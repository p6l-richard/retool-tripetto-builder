/*! For license information please see index.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var s in i)("object"==typeof exports?exports:e)[s]=i[s]}}(self,(()=>(()=>{"use strict";var e={705:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i="",s=void 0!==t[5];return t[4]&&(i+="@supports (".concat(t[4],") {")),t[2]&&(i+="@media ".concat(t[2]," {")),s&&(i+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),i+=e(t),s&&(i+="}"),t[2]&&(i+="}"),t[4]&&(i+="}"),i})).join("")},t.i=function(e,i,s,o,n){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(s)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(r[l]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);s&&r[u[0]]||(void 0!==n&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=n),i&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=i):u[2]=i),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t.push(u))}},t}},738:e=>{e.exports=function(e){return e[1]}},347:e=>{var t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach((function(e){s[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(e){return!1}}()?Object.assign:function(e,n){for(var r,a,l=o(e),c=1;c<arguments.length;c++){for(var u in r=Object(arguments[c]))i.call(r,u)&&(l[u]=r[u]);if(t){a=t(r);for(var h=0;h<a.length;h++)s.call(r,a[h])&&(l[a[h]]=r[a[h]])}}return l}},748:(e,t,i)=>{var s=i(466),o=i(347),n=i(767);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!s)throw Error(r(227));var a=new Set,l={};function c(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(l[e]=t,e=0;e<t.length;e++)a.add(t[e])}var h=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,m={},g={};function b(e,t,i,s,o,n,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=r}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){f[e]=new b(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];f[t]=new b(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){f[e]=new b(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){f[e]=new b(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){f[e]=new b(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){f[e]=new b(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){f[e]=new b(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){f[e]=new b(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){f[e]=new b(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function M(e,t,i,s){var o=f.hasOwnProperty(t)?f[t]:null;(null!==o?0===o.type:!s&&2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1]))||(function(e,t,i,s){if(null==t||function(e,t,i,s){if(null!==i&&0===i.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==i?!i.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,i,s))return!0;if(s)return!1;if(null!==i)switch(i.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,i,o,s)&&(i=null),s||null===o?function(e){return!!p.call(g,e)||!p.call(m,e)&&(d.test(e)?g[e]=!0:(m[e]=!0,!1))}(t)&&(null===i?e.removeAttribute(t):e.setAttribute(t,""+i)):o.mustUseProperty?e[o.propertyName]=null===i?3!==o.type&&"":i:(t=o.attributeName,s=o.attributeNamespace,null===i?e.removeAttribute(t):(i=3===(o=o.type)||4===o&&!0===i?"":""+i,s?e.setAttributeNS(s,t,i):e.setAttribute(t,i))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);f[t]=new b(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);f[t]=new b(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);f[t]=new b(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){f[e]=new b(e,1,!1,e.toLowerCase(),null,!1,!1)})),f.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){f[e]=new b(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,S=60106,I=60107,k=60108,N=60114,_=60109,L=60110,C=60112,D=60113,A=60120,j=60115,T=60116,z=60121,E=60128,O=60129,P=60130,R=60131;if("function"==typeof Symbol&&Symbol.for){var H=Symbol.for;x=H("react.element"),S=H("react.portal"),I=H("react.fragment"),k=H("react.strict_mode"),N=H("react.profiler"),_=H("react.provider"),L=H("react.context"),C=H("react.forward_ref"),D=H("react.suspense"),A=H("react.suspense_list"),j=H("react.memo"),T=H("react.lazy"),z=H("react.block"),H("react.scope"),E=H("react.opaque.id"),O=H("react.debug_trace_mode"),P=H("react.offscreen"),R=H("react.legacy_hidden")}var F,U="function"==typeof Symbol&&Symbol.iterator;function B(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=U&&e[U]||e["@@iterator"])?e:null}function Y(e){if(void 0===F)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var Z=!1;function V(e,t){if(!e||Z)return"";Z=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var s=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){s=e}e.call(t.prototype)}else{try{throw Error()}catch(e){s=e}e()}}catch(e){if(e&&s&&"string"==typeof e.stack){for(var o=e.stack.split("\n"),n=s.stack.split("\n"),r=o.length-1,a=n.length-1;1<=r&&0<=a&&o[r]!==n[a];)a--;for(;1<=r&&0<=a;r--,a--)if(o[r]!==n[a]){if(1!==r||1!==a)do{if(r--,0>--a||o[r]!==n[a])return"\n"+o[r].replace(" at new "," at ")}while(1<=r&&0<=a);break}}}finally{Z=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?Y(e):""}function W(e){switch(e.tag){case 5:return Y(e.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return V(e.type,!1);case 11:return V(e.type.render,!1);case 22:return V(e.type._render,!1);case 1:return V(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case I:return"Fragment";case S:return"Portal";case N:return"Profiler";case k:return"StrictMode";case D:return"Suspense";case A:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case L:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case j:return G(e.type);case z:return G(e._render);case T:t=e._payload,e=e._init;try{return G(e(t))}catch(e){}}return null}function $(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==i&&"function"==typeof i.get&&"function"==typeof i.set){var o=i.get,n=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){s=""+e,n.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=Q(e)?e.checked?"true":"false":e.value),(e=s)!==i&&(t.setValue(e),!0)}function J(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var i=t.checked;return o({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=i?i:e._wrapperState.initialChecked})}function ee(e,t){var i=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;i=$(null!=t.value?t.value:i),e._wrapperState={initialChecked:s,initialValue:i,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&M(e,"checked",t,!1)}function ie(e,t){te(e,t);var i=$(t.value),s=t.type;if(null!=i)"number"===s?(0===i&&""===e.value||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,i):t.hasOwnProperty("defaultValue")&&oe(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function se(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}""!==(i=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==i&&(e.name=i)}function oe(e,t,i){"number"===t&&J(e.ownerDocument)===e||(null==i?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}function ne(e,t){return e=o({children:void 0},t),(t=function(e){var t="";return s.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function re(e,t,i,s){if(e=e.options,t){t={};for(var o=0;o<i.length;o++)t["$"+i[o]]=!0;for(i=0;i<e.length;i++)o=t.hasOwnProperty("$"+e[i].value),e[i].selected!==o&&(e[i].selected=o),o&&s&&(e[i].defaultSelected=!0)}else{for(i=""+$(i),t=null,o=0;o<e.length;o++){if(e[o].value===i)return e[o].selected=!0,void(s&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return o({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var i=t.value;if(null==i){if(i=t.children,t=t.defaultValue,null!=i){if(null!=t)throw Error(r(92));if(Array.isArray(i)){if(!(1>=i.length))throw Error(r(93));i=i[0]}t=i}null==t&&(t=""),i=t}e._wrapperState={initialValue:$(i)}}function ce(e,t){var i=$(t.value),s=$(t.defaultValue);null!=i&&((i=""+i)!==e.value&&(e.value=i),null==t.defaultValue&&e.defaultValue!==i&&(e.defaultValue=i)),null!=s&&(e.defaultValue=""+s)}function ue(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml";function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var me,ge,be=(ge=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((me=me||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=me.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction((function(){return ge(e,t)}))}:ge);function fe(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var ye={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function Me(e,t,i){return null==t||"boolean"==typeof t||""===t?"":i||"number"!=typeof t||0===t||ye.hasOwnProperty(e)&&ye[e]?(""+t).trim():t+"px"}function we(e,t){for(var i in e=e.style,t)if(t.hasOwnProperty(i)){var s=0===i.indexOf("--"),o=Me(i,t[i],s);"float"===i&&(i="cssFloat"),s?e.setProperty(i,o):e[i]=o}}Object.keys(ye).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ye[t]=ye[e]}))}));var xe=o({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Se(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(r(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,_e=null,Le=null;function Ce(e){if(e=to(e)){if("function"!=typeof Ne)throw Error(r(280));var t=e.stateNode;t&&(t=so(t),Ne(e.stateNode,e.type,t))}}function De(e){_e?Le?Le.push(e):Le=[e]:_e=e}function Ae(){if(_e){var e=_e,t=Le;if(Le=_e=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function je(e,t){return e(t)}function Te(e,t,i,s,o){return e(t,i,s,o)}function ze(){}var Ee=je,Oe=!1,Pe=!1;function Re(){null===_e&&null===Le||(ze(),Ae())}function He(e,t){var i=e.stateNode;if(null===i)return null;var s=so(i);if(null===s)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(i&&"function"!=typeof i)throw Error(r(231,t,typeof i));return i}var Fe=!1;if(h)try{var Ue={};Object.defineProperty(Ue,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",Ue,Ue),window.removeEventListener("test",Ue,Ue)}catch(ge){Fe=!1}function Be(e,t,i,s,o,n,r,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(i,c)}catch(e){this.onError(e)}}var Ye=!1,Ze=null,Ve=!1,We=null,Ge={onError:function(e){Ye=!0,Ze=e}};function $e(e,t,i,s,o,n,r,a,l){Ye=!1,Ze=null,Be.apply(Ge,arguments)}function Qe(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Xe(e){if(Qe(e)!==e)throw Error(r(188))}function Je(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(r(188));return t!==e?null:e}for(var i=e,s=t;;){var o=i.return;if(null===o)break;var n=o.alternate;if(null===n){if(null!==(s=o.return)){i=s;continue}break}if(o.child===n.child){for(n=o.child;n;){if(n===i)return Xe(o),e;if(n===s)return Xe(o),t;n=n.sibling}throw Error(r(188))}if(i.return!==s.return)i=o,s=n;else{for(var a=!1,l=o.child;l;){if(l===i){a=!0,i=o,s=n;break}if(l===s){a=!0,s=o,i=n;break}l=l.sibling}if(!a){for(l=n.child;l;){if(l===i){a=!0,i=n,s=o;break}if(l===s){a=!0,s=n,i=o;break}l=l.sibling}if(!a)throw Error(r(189))}}if(i.alternate!==s)throw Error(r(190))}if(3!==i.tag)throw Error(r(188));return i.stateNode.current===i?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ke(e,t){for(var i=e.alternate;null!==t;){if(t===e||t===i)return!0;t=t.return}return!1}var et,tt,it,st,ot=!1,nt=[],rt=null,at=null,lt=null,ct=new Map,ut=new Map,ht=[],dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,i,s,o){return{blockedOn:e,domEventName:t,eventSystemFlags:16|i,nativeEvent:o,targetContainers:[s]}}function mt(e,t){switch(e){case"focusin":case"focusout":rt=null;break;case"dragenter":case"dragleave":at=null;break;case"mouseover":case"mouseout":lt=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ut.delete(t.pointerId)}}function gt(e,t,i,s,o,n){return null===e||e.nativeEvent!==n?(e=pt(t,i,s,o,n),null!==t&&null!==(t=to(t))&&tt(t),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function bt(e){var t=eo(e.target);if(null!==t){var i=Qe(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=qe(i)))return e.blockedOn=t,void st(e.lanePriority,(function(){n.unstable_runWithPriority(e.priority,(function(){it(i)}))}))}else if(3===t&&i.stateNode.hydrate)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i)return null!==(t=to(i))&&tt(t),e.blockedOn=i,!1;t.shift()}return!0}function yt(e,t,i){ft(e)&&i.delete(t)}function vt(){for(ot=!1;0<nt.length;){var e=nt[0];if(null!==e.blockedOn){null!==(e=to(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var i=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==i){e.blockedOn=i;break}t.shift()}null===e.blockedOn&&nt.shift()}null!==rt&&ft(rt)&&(rt=null),null!==at&&ft(at)&&(at=null),null!==lt&&ft(lt)&&(lt=null),ct.forEach(yt),ut.forEach(yt)}function Mt(e,t){e.blockedOn===t&&(e.blockedOn=null,ot||(ot=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,vt)))}function wt(e){function t(t){return Mt(t,e)}if(0<nt.length){Mt(nt[0],e);for(var i=1;i<nt.length;i++){var s=nt[i];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==rt&&Mt(rt,e),null!==at&&Mt(at,e),null!==lt&&Mt(lt,e),ct.forEach(t),ut.forEach(t),i=0;i<ht.length;i++)(s=ht[i]).blockedOn===e&&(s.blockedOn=null);for(;0<ht.length&&null===(i=ht[0]).blockedOn;)bt(i),null===i.blockedOn&&ht.shift()}function xt(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var St={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},It={},kt={};function Nt(e){if(It[e])return It[e];if(!St[e])return e;var t,i=St[e];for(t in i)if(i.hasOwnProperty(t)&&t in kt)return It[e]=i[t];return e}h&&(kt=document.createElement("div").style,"AnimationEvent"in window||(delete St.animationend.animation,delete St.animationiteration.animation,delete St.animationstart.animation),"TransitionEvent"in window||delete St.transitionend.transition);var _t=Nt("animationend"),Lt=Nt("animationiteration"),Ct=Nt("animationstart"),Dt=Nt("transitionend"),At=new Map,jt=new Map,Tt=["abort","abort",_t,"animationEnd",Lt,"animationIteration",Ct,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Dt,"transitionEnd","waiting","waiting"];function zt(e,t){for(var i=0;i<e.length;i+=2){var s=e[i],o=e[i+1];o="on"+(o[0].toUpperCase()+o.slice(1)),jt.set(s,t),At.set(s,o),c(o,[s])}}(0,n.unstable_now)();var Et=8;function Ot(e){if(0!=(1&e))return Et=15,1;if(0!=(2&e))return Et=14,2;if(0!=(4&e))return Et=13,4;var t=24&e;return 0!==t?(Et=12,t):0!=(32&e)?(Et=11,32):0!=(t=192&e)?(Et=10,t):0!=(256&e)?(Et=9,256):0!=(t=3584&e)?(Et=8,t):0!=(4096&e)?(Et=7,4096):0!=(t=4186112&e)?(Et=6,t):0!=(t=62914560&e)?(Et=5,t):67108864&e?(Et=4,67108864):0!=(134217728&e)?(Et=3,134217728):0!=(t=805306368&e)?(Et=2,t):0!=(1073741824&e)?(Et=1,1073741824):(Et=8,e)}function Pt(e,t){var i=e.pendingLanes;if(0===i)return Et=0;var s=0,o=0,n=e.expiredLanes,r=e.suspendedLanes,a=e.pingedLanes;if(0!==n)s=n,o=Et=15;else if(0!=(n=134217727&i)){var l=n&~r;0!==l?(s=Ot(l),o=Et):0!=(a&=n)&&(s=Ot(a),o=Et)}else 0!=(n=i&~r)?(s=Ot(n),o=Et):0!==a&&(s=Ot(a),o=Et);if(0===s)return 0;if(s=i&((0>(s=31-Yt(s))?0:1<<s)<<1)-1,0!==t&&t!==s&&0==(t&r)){if(Ot(t),o<=Et)return t;Et=o}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)o=1<<(i=31-Yt(t)),s|=e[i],t&=~o;return s}function Rt(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ht(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Ft(24&~t))?Ht(10,t):e;case 10:return 0===(e=Ft(192&~t))?Ht(8,t):e;case 8:return 0===(e=Ft(3584&~t))&&0===(e=Ft(4186112&~t))&&(e=512),e;case 2:return 0===(t=Ft(805306368&~t))&&(t=268435456),t}throw Error(r(358,e))}function Ft(e){return e&-e}function Ut(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Bt(e,t,i){e.pendingLanes|=t;var s=t-1;e.suspendedLanes&=s,e.pingedLanes&=s,(e=e.eventTimes)[t=31-Yt(t)]=i}var Yt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Zt(e)/Vt|0)|0},Zt=Math.log,Vt=Math.LN2,Wt=n.unstable_UserBlockingPriority,Gt=n.unstable_runWithPriority,$t=!0;function Qt(e,t,i,s){Oe||ze();var o=Xt,n=Oe;Oe=!0;try{Te(o,e,t,i,s)}finally{(Oe=n)||Re()}}function qt(e,t,i,s){Gt(Wt,Xt.bind(null,e,t,i,s))}function Xt(e,t,i,s){var o;if($t)if((o=0==(4&t))&&0<nt.length&&-1<dt.indexOf(e))e=pt(null,e,t,i,s),nt.push(e);else{var n=Jt(e,t,i,s);if(null===n)o&&mt(e,s);else{if(o){if(-1<dt.indexOf(e))return e=pt(n,e,t,i,s),void nt.push(e);if(function(e,t,i,s,o){switch(t){case"focusin":return rt=gt(rt,e,t,i,s,o),!0;case"dragenter":return at=gt(at,e,t,i,s,o),!0;case"mouseover":return lt=gt(lt,e,t,i,s,o),!0;case"pointerover":var n=o.pointerId;return ct.set(n,gt(ct.get(n)||null,e,t,i,s,o)),!0;case"gotpointercapture":return n=o.pointerId,ut.set(n,gt(ut.get(n)||null,e,t,i,s,o)),!0}return!1}(n,e,t,i,s))return;mt(e,s)}Ts(e,t,s,null,i)}}}function Jt(e,t,i,s){var o=ke(s);if(null!==(o=eo(o))){var n=Qe(o);if(null===n)o=null;else{var r=n.tag;if(13===r){if(null!==(o=qe(n)))return o;o=null}else if(3===r){if(n.stateNode.hydrate)return 3===n.tag?n.stateNode.containerInfo:null;o=null}else n!==o&&(o=null)}}return Ts(e,t,s,o,i),null}var Kt=null,ei=null,ti=null;function ii(){if(ti)return ti;var e,t,i=ei,s=i.length,o="value"in Kt?Kt.value:Kt.textContent,n=o.length;for(e=0;e<s&&i[e]===o[e];e++);var r=s-e;for(t=1;t<=r&&i[s-t]===o[n-t];t++);return ti=o.slice(e,1<t?1-t:void 0)}function si(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function oi(){return!0}function ni(){return!1}function ri(e){function t(t,i,s,o,n){for(var r in this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=n,this.currentTarget=null,e)e.hasOwnProperty(r)&&(t=e[r],this[r]=t?t(o):o[r]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?oi:ni,this.isPropagationStopped=ni,this}return o(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=oi)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=oi)},persist:function(){},isPersistent:oi}),t}var ai,li,ci,ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hi=ri(ui),di=o({},ui,{view:0,detail:0}),pi=ri(di),mi=o({},di,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ni,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ci&&(ci&&"mousemove"===e.type?(ai=e.screenX-ci.screenX,li=e.screenY-ci.screenY):li=ai=0,ci=e),ai)},movementY:function(e){return"movementY"in e?e.movementY:li}}),gi=ri(mi),bi=ri(o({},mi,{dataTransfer:0})),fi=ri(o({},di,{relatedTarget:0})),yi=ri(o({},ui,{animationName:0,elapsedTime:0,pseudoElement:0})),vi=o({},ui,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Mi=ri(vi),wi=ri(o({},ui,{data:0})),xi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Si={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ii={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ki(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ii[e])&&!!t[e]}function Ni(){return ki}var _i=o({},di,{key:function(e){if(e.key){var t=xi[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=si(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Si[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ni,charCode:function(e){return"keypress"===e.type?si(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?si(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Li=ri(_i),Ci=ri(o({},mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Di=ri(o({},di,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ni})),Ai=ri(o({},ui,{propertyName:0,elapsedTime:0,pseudoElement:0})),ji=o({},mi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ti=ri(ji),zi=[9,13,27,32],Ei=h&&"CompositionEvent"in window,Oi=null;h&&"documentMode"in document&&(Oi=document.documentMode);var Pi=h&&"TextEvent"in window&&!Oi,Ri=h&&(!Ei||Oi&&8<Oi&&11>=Oi),Hi=String.fromCharCode(32),Fi=!1;function Ui(e,t){switch(e){case"keyup":return-1!==zi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bi(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Yi=!1,Zi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Zi[e.type]:"textarea"===t}function Wi(e,t,i,s){De(s),0<(t=Es(t,"onChange")).length&&(i=new hi("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var Gi=null,$i=null;function Qi(e){_s(e,0)}function qi(e){if(X(io(e)))return e}function Xi(e,t){if("change"===e)return t}var Ji=!1;if(h){var Ki;if(h){var es="oninput"in document;if(!es){var ts=document.createElement("div");ts.setAttribute("oninput","return;"),es="function"==typeof ts.oninput}Ki=es}else Ki=!1;Ji=Ki&&(!document.documentMode||9<document.documentMode)}function is(){Gi&&(Gi.detachEvent("onpropertychange",ss),$i=Gi=null)}function ss(e){if("value"===e.propertyName&&qi($i)){var t=[];if(Wi(t,$i,e,ke(e)),e=Qi,Oe)e(t);else{Oe=!0;try{je(e,t)}finally{Oe=!1,Re()}}}}function os(e,t,i){"focusin"===e?(is(),$i=i,(Gi=t).attachEvent("onpropertychange",ss)):"focusout"===e&&is()}function ns(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qi($i)}function rs(e,t){if("click"===e)return qi(t)}function as(e,t){if("input"===e||"change"===e)return qi(t)}var ls="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},cs=Object.prototype.hasOwnProperty;function us(e,t){if(ls(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++)if(!cs.call(t,i[s])||!ls(e[i[s]],t[i[s]]))return!1;return!0}function hs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ds(e,t){var i,s=hs(e);for(e=0;s;){if(3===s.nodeType){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=hs(s)}}function ps(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ps(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ms(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var i="string"==typeof t.contentWindow.location.href}catch(e){i=!1}if(!i)break;t=J((e=t.contentWindow).document)}return t}function gs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var bs=h&&"documentMode"in document&&11>=document.documentMode,fs=null,ys=null,vs=null,Ms=!1;function ws(e,t,i){var s=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;Ms||null==fs||fs!==J(s)||(s="selectionStart"in(s=fs)&&gs(s)?{start:s.selectionStart,end:s.selectionEnd}:{anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},vs&&us(vs,s)||(vs=s,0<(s=Es(ys,"onSelect")).length&&(t=new hi("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=fs)))}zt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),zt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),zt(Tt,2);for(var xs="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ss=0;Ss<xs.length;Ss++)jt.set(xs[Ss],0);u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ks=new Set("cancel close invalid load scroll toggle".split(" ").concat(Is));function Ns(e,t,i){var s=e.type||"unknown-event";e.currentTarget=i,function(e,t,i,s,o,n,a,l,c){if($e.apply(this,arguments),Ye){if(!Ye)throw Error(r(198));var u=Ze;Ye=!1,Ze=null,Ve||(Ve=!0,We=u)}}(s,t,void 0,e),e.currentTarget=null}function _s(e,t){t=0!=(4&t);for(var i=0;i<e.length;i++){var s=e[i],o=s.event;s=s.listeners;e:{var n=void 0;if(t)for(var r=s.length-1;0<=r;r--){var a=s[r],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==n&&o.isPropagationStopped())break e;Ns(o,a,c),n=l}else for(r=0;r<s.length;r++){if(l=(a=s[r]).instance,c=a.currentTarget,a=a.listener,l!==n&&o.isPropagationStopped())break e;Ns(o,a,c),n=l}}}if(Ve)throw e=We,Ve=!1,We=null,e}function Ls(e,t){var i=oo(t),s=e+"__bubble";i.has(s)||(js(t,e,2,!1),i.add(s))}var Cs="_reactListening"+Math.random().toString(36).slice(2);function Ds(e){e[Cs]||(e[Cs]=!0,a.forEach((function(t){ks.has(t)||As(t,!1,e,null),As(t,!0,e,null)})))}function As(e,t,i,s){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,n=i;if("selectionchange"===e&&9!==i.nodeType&&(n=i.ownerDocument),null!==s&&!t&&ks.has(e)){if("scroll"!==e)return;o|=2,n=s}var r=oo(n),a=e+"__"+(t?"capture":"bubble");r.has(a)||(t&&(o|=4),js(n,e,o,t),r.add(a))}function js(e,t,i,s){var o=jt.get(t);switch(void 0===o?2:o){case 0:o=Qt;break;case 1:o=qt;break;default:o=Xt}i=o.bind(null,t,i,e),o=void 0,!Fe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),s?void 0!==o?e.addEventListener(t,i,{capture:!0,passive:o}):e.addEventListener(t,i,!0):void 0!==o?e.addEventListener(t,i,{passive:o}):e.addEventListener(t,i,!1)}function Ts(e,t,i,s,o){var n=s;if(0==(1&t)&&0==(2&t)&&null!==s)e:for(;;){if(null===s)return;var r=s.tag;if(3===r||4===r){var a=s.stateNode.containerInfo;if(a===o||8===a.nodeType&&a.parentNode===o)break;if(4===r)for(r=s.return;null!==r;){var l=r.tag;if((3===l||4===l)&&((l=r.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;r=r.return}for(;null!==a;){if(null===(r=eo(a)))return;if(5===(l=r.tag)||6===l){s=n=r;continue e}a=a.parentNode}}s=s.return}!function(e,t,i){if(Pe)return e();Pe=!0;try{Ee(e,t,i)}finally{Pe=!1,Re()}}((function(){var s=n,o=ke(i),r=[];e:{var a=At.get(e);if(void 0!==a){var l=hi,c=e;switch(e){case"keypress":if(0===si(i))break e;case"keydown":case"keyup":l=Li;break;case"focusin":c="focus",l=fi;break;case"focusout":c="blur",l=fi;break;case"beforeblur":case"afterblur":l=fi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=bi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Di;break;case _t:case Lt:case Ct:l=yi;break;case Dt:l=Ai;break;case"scroll":l=pi;break;case"wheel":l=Ti;break;case"copy":case"cut":case"paste":l=Mi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ci}var u=0!=(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,m=s;null!==m;){var g=(p=m).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&null!=(g=He(m,d))&&u.push(zs(m,g,p))),h)break;m=m.return}0<u.length&&(a=new l(a,c,null,i,o),r.push({event:a,listeners:u}))}}if(0==(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(c=i.relatedTarget||i.fromElement)||!eo(c)&&!c[Js])&&(l||a)&&(a=o.window===o?o:(a=o.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=s,null!==(c=(c=i.relatedTarget||i.toElement)?eo(c):null)&&(c!==(h=Qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(u=gi,g="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Ci,g="onPointerLeave",d="onPointerEnter",m="pointer"),h=null==l?a:io(l),p=null==c?a:io(c),(a=new u(g,m+"leave",l,i,o)).target=h,a.relatedTarget=p,g=null,eo(o)===s&&((u=new u(d,m+"enter",c,i,o)).target=p,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,m=0,p=u=l;p;p=Os(p))m++;for(p=0,g=d;g;g=Os(g))p++;for(;0<m-p;)u=Os(u),m--;for(;0<p-m;)d=Os(d),p--;for(;m--;){if(u===d||null!==d&&u===d.alternate)break e;u=Os(u),d=Os(d)}u=null}else u=null;null!==l&&Ps(r,a,l,u,!1),null!==c&&null!==h&&Ps(r,h,c,u,!0)}if("select"===(l=(a=s?io(s):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var b=Xi;else if(Vi(a))if(Ji)b=as;else{b=ns;var f=os}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(b=rs);switch(b&&(b=b(e,s))?Wi(r,b,i,o):(f&&f(e,a,s),"focusout"===e&&(f=a._wrapperState)&&f.controlled&&"number"===a.type&&oe(a,"number",a.value)),f=s?io(s):window,e){case"focusin":(Vi(f)||"true"===f.contentEditable)&&(fs=f,ys=s,vs=null);break;case"focusout":vs=ys=fs=null;break;case"mousedown":Ms=!0;break;case"contextmenu":case"mouseup":case"dragend":Ms=!1,ws(r,i,o);break;case"selectionchange":if(bs)break;case"keydown":case"keyup":ws(r,i,o)}var y;if(Ei)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Yi?Ui(e,i)&&(v="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(v="onCompositionStart");v&&(Ri&&"ko"!==i.locale&&(Yi||"onCompositionStart"!==v?"onCompositionEnd"===v&&Yi&&(y=ii()):(ei="value"in(Kt=o)?Kt.value:Kt.textContent,Yi=!0)),0<(f=Es(s,v)).length&&(v=new wi(v,e,null,i,o),r.push({event:v,listeners:f}),(y||null!==(y=Bi(i)))&&(v.data=y))),(y=Pi?function(e,t){switch(e){case"compositionend":return Bi(t);case"keypress":return 32!==t.which?null:(Fi=!0,Hi);case"textInput":return(e=t.data)===Hi&&Fi?null:e;default:return null}}(e,i):function(e,t){if(Yi)return"compositionend"===e||!Ei&&Ui(e,t)?(e=ii(),ti=ei=Kt=null,Yi=!1,e):null;switch(e){default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ri&&"ko"!==t.locale?null:t.data}}(e,i))&&0<(s=Es(s,"onBeforeInput")).length&&(o=new wi("onBeforeInput","beforeinput",null,i,o),r.push({event:o,listeners:s}),o.data=y)}_s(r,t)}))}function zs(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Es(e,t){for(var i=t+"Capture",s=[];null!==e;){var o=e,n=o.stateNode;5===o.tag&&null!==n&&(o=n,null!=(n=He(e,i))&&s.unshift(zs(e,n,o)),null!=(n=He(e,t))&&s.push(zs(e,n,o))),e=e.return}return s}function Os(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ps(e,t,i,s,o){for(var n=t._reactName,r=[];null!==i&&i!==s;){var a=i,l=a.alternate,c=a.stateNode;if(null!==l&&l===s)break;5===a.tag&&null!==c&&(a=c,o?null!=(l=He(i,n))&&r.unshift(zs(i,l,a)):o||null!=(l=He(i,n))&&r.push(zs(i,l,a))),i=i.return}0!==r.length&&e.push({event:t,listeners:r})}function Rs(){}var Hs=null,Fs=null;function Us(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Bs(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ys="function"==typeof setTimeout?setTimeout:void 0,Zs="function"==typeof clearTimeout?clearTimeout:void 0;function Vs(e){(1===e.nodeType||9===e.nodeType&&null!=(e=e.body))&&(e.textContent="")}function Ws(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Gs(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}var $s=0,Qs=Math.random().toString(36).slice(2),qs="__reactFiber$"+Qs,Xs="__reactProps$"+Qs,Js="__reactContainer$"+Qs,Ks="__reactEvents$"+Qs;function eo(e){var t=e[qs];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Js]||i[qs]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=Gs(e);null!==e;){if(i=e[qs])return i;e=Gs(e)}return t}i=(e=i).parentNode}return null}function to(e){return!(e=e[qs]||e[Js])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function io(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function so(e){return e[Xs]||null}function oo(e){var t=e[Ks];return void 0===t&&(t=e[Ks]=new Set),t}var no=[],ro=-1;function ao(e){return{current:e}}function lo(e){0>ro||(e.current=no[ro],no[ro]=null,ro--)}function co(e,t){ro++,no[ro]=e.current,e.current=t}var uo={},ho=ao(uo),po=ao(!1),mo=uo;function go(e,t){var i=e.type.contextTypes;if(!i)return uo;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var o,n={};for(o in i)n[o]=t[o];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function bo(e){return null!=e.childContextTypes}function fo(){lo(po),lo(ho)}function yo(e,t,i){if(ho.current!==uo)throw Error(r(168));co(ho,t),co(po,i)}function vo(e,t,i){var s=e.stateNode;if(e=t.childContextTypes,"function"!=typeof s.getChildContext)return i;for(var n in s=s.getChildContext())if(!(n in e))throw Error(r(108,G(t)||"Unknown",n));return o({},i,s)}function Mo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||uo,mo=ho.current,co(ho,e),co(po,po.current),!0}function wo(e,t,i){var s=e.stateNode;if(!s)throw Error(r(169));i?(e=vo(e,t,mo),s.__reactInternalMemoizedMergedChildContext=e,lo(po),lo(ho),co(ho,e)):lo(po),co(po,i)}var xo=null,So=null,Io=n.unstable_runWithPriority,ko=n.unstable_scheduleCallback,No=n.unstable_cancelCallback,_o=n.unstable_shouldYield,Lo=n.unstable_requestPaint,Co=n.unstable_now,Do=n.unstable_getCurrentPriorityLevel,Ao=n.unstable_ImmediatePriority,jo=n.unstable_UserBlockingPriority,To=n.unstable_NormalPriority,zo=n.unstable_LowPriority,Eo=n.unstable_IdlePriority,Oo={},Po=void 0!==Lo?Lo:function(){},Ro=null,Ho=null,Fo=!1,Uo=Co(),Bo=1e4>Uo?Co:function(){return Co()-Uo};function Yo(){switch(Do()){case Ao:return 99;case jo:return 98;case To:return 97;case zo:return 96;case Eo:return 95;default:throw Error(r(332))}}function Zo(e){switch(e){case 99:return Ao;case 98:return jo;case 97:return To;case 96:return zo;case 95:return Eo;default:throw Error(r(332))}}function Vo(e,t){return e=Zo(e),Io(e,t)}function Wo(e,t,i){return e=Zo(e),ko(e,t,i)}function Go(){if(null!==Ho){var e=Ho;Ho=null,No(e)}$o()}function $o(){if(!Fo&&null!==Ro){Fo=!0;var e=0;try{var t=Ro;Vo(99,(function(){for(;e<t.length;e++){var i=t[e];do{i=i(!0)}while(null!==i)}})),Ro=null}catch(t){throw null!==Ro&&(Ro=Ro.slice(e+1)),ko(Ao,Go),t}finally{Fo=!1}}}var Qo=w.ReactCurrentBatchConfig;function qo(e,t){if(e&&e.defaultProps){for(var i in t=o({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}var Xo=ao(null),Jo=null,Ko=null,en=null;function tn(){en=Ko=Jo=null}function sn(e){var t=Xo.current;lo(Xo),e.type._context._currentValue=t}function on(e,t){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)===t){if(null===i||(i.childLanes&t)===t)break;i.childLanes|=t}else e.childLanes|=t,null!==i&&(i.childLanes|=t);e=e.return}}function nn(e,t){Jo=e,en=Ko=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Or=!0),e.firstContext=null)}function rn(e,t){if(en!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(en=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ko){if(null===Jo)throw Error(r(308));Ko=t,Jo.dependencies={lanes:0,firstContext:t,responders:null}}else Ko=Ko.next=t;return e._currentValue}var an=!1;function ln(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function cn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function un(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hn(e,t){if(null!==(e=e.updateQueue)){var i=(e=e.shared).pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function dn(e,t){var i=e.updateQueue,s=e.alternate;if(null!==s&&i===(s=s.updateQueue)){var o=null,n=null;if(null!==(i=i.firstBaseUpdate)){do{var r={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===n?o=n=r:n=n.next=r,i=i.next}while(null!==i);null===n?o=n=t:n=n.next=t}else o=n=t;return i={baseState:s.baseState,firstBaseUpdate:o,lastBaseUpdate:n,shared:s.shared,effects:s.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function pn(e,t,i,s){var n=e.updateQueue;an=!1;var r=n.firstBaseUpdate,a=n.lastBaseUpdate,l=n.shared.pending;if(null!==l){n.shared.pending=null;var c=l,u=c.next;c.next=null,null===a?r=u:a.next=u,a=c;var h=e.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==a&&(null===d?h.firstBaseUpdate=u:d.next=u,h.lastBaseUpdate=c)}}if(null!==r){for(d=n.baseState,a=0,h=u=c=null;;){l=r.lane;var p=r.eventTime;if((s&l)===l){null!==h&&(h=h.next={eventTime:p,lane:0,tag:r.tag,payload:r.payload,callback:r.callback,next:null});e:{var m=e,g=r;switch(l=t,p=i,g.tag){case 1:if("function"==typeof(m=g.payload)){d=m.call(p,d,l);break e}d=m;break e;case 3:m.flags=-4097&m.flags|64;case 0:if(null==(l="function"==typeof(m=g.payload)?m.call(p,d,l):m))break e;d=o({},d,l);break e;case 2:an=!0}}null!==r.callback&&(e.flags|=32,null===(l=n.effects)?n.effects=[r]:l.push(r))}else p={eventTime:p,lane:l,tag:r.tag,payload:r.payload,callback:r.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,a|=l;if(null===(r=r.next)){if(null===(l=n.shared.pending))break;r=l.next,l.next=null,n.lastBaseUpdate=l,n.shared.pending=null}}null===h&&(c=d),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=h,Ra|=a,e.lanes=a,e.memoizedState=d}}function mn(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],o=s.callback;if(null!==o){if(s.callback=null,s=i,"function"!=typeof o)throw Error(r(191,o));o.call(s)}}}var gn=(new s.Component).refs;function bn(e,t,i,s){i=null==(i=i(s,t=e.memoizedState))?t:o({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var fn={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var s=cl(),o=ul(e),n=un(s,o);n.payload=t,null!=i&&(n.callback=i),hn(e,n),hl(e,o,s)},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=cl(),o=ul(e),n=un(s,o);n.tag=1,n.payload=t,null!=i&&(n.callback=i),hn(e,n),hl(e,o,s)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=cl(),s=ul(e),o=un(i,s);o.tag=2,null!=t&&(o.callback=t),hn(e,o),hl(e,s,i)}};function yn(e,t,i,s,o,n,r){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,n,r):!(t.prototype&&t.prototype.isPureReactComponent&&us(i,s)&&us(o,n))}function vn(e,t,i){var s=!1,o=uo,n=t.contextType;return"object"==typeof n&&null!==n?n=rn(n):(o=bo(t)?mo:ho.current,n=(s=null!=(s=t.contextTypes))?go(e,o):uo),t=new t(i,n),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=fn,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=n),t}function Mn(e,t,i,s){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,s),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&fn.enqueueReplaceState(t,t.state,null)}function wn(e,t,i,s){var o=e.stateNode;o.props=i,o.state=e.memoizedState,o.refs=gn,ln(e);var n=t.contextType;"object"==typeof n&&null!==n?o.context=rn(n):(n=bo(t)?mo:ho.current,o.context=go(e,n)),pn(e,i,o,s),o.state=e.memoizedState,"function"==typeof(n=t.getDerivedStateFromProps)&&(bn(e,t,n,i),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&fn.enqueueReplaceState(o,o.state,null),pn(e,i,o,s),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4)}var xn=Array.isArray;function Sn(e,t,i){if(null!==(e=i.ref)&&"function"!=typeof e&&"object"!=typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(r(309));var s=i.stateNode}if(!s)throw Error(r(147,e));var o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=s.refs;t===gn&&(t=s.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(r(284));if(!i._owner)throw Error(r(290,e))}return e}function In(e,t){if("textarea"!==e.type)throw Error(r(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function kn(e){function t(t,i){if(e){var s=t.lastEffect;null!==s?(s.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i,i.nextEffect=null,i.flags=8}}function i(i,s){if(!e)return null;for(;null!==s;)t(i,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Yl(e,t)).index=0,e.sibling=null,e}function n(t,i,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<i?(t.flags=2,i):s:(t.flags=2,i):i}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function l(e,t,i,s){return null===t||6!==t.tag?((t=Gl(i,e.mode,s)).return=e,t):((t=o(t,i)).return=e,t)}function c(e,t,i,s){return null!==t&&t.elementType===i.type?((s=o(t,i.props)).ref=Sn(e,t,i),s.return=e,s):((s=Zl(i.type,i.key,i.props,null,e.mode,s)).ref=Sn(e,t,i),s.return=e,s)}function u(e,t,i,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=$l(i,e.mode,s)).return=e,t):((t=o(t,i.children||[])).return=e,t)}function h(e,t,i,s,n){return null===t||7!==t.tag?((t=Vl(i,e.mode,s,n)).return=e,t):((t=o(t,i)).return=e,t)}function d(e,t,i){if("string"==typeof t||"number"==typeof t)return(t=Gl(""+t,e.mode,i)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case x:return(i=Zl(t.type,t.key,t.props,null,e.mode,i)).ref=Sn(e,null,t),i.return=e,i;case S:return(t=$l(t,e.mode,i)).return=e,t}if(xn(t)||B(t))return(t=Vl(t,e.mode,i,null)).return=e,t;In(e,t)}return null}function p(e,t,i,s){var o=null!==t?t.key:null;if("string"==typeof i||"number"==typeof i)return null!==o?null:l(e,t,""+i,s);if("object"==typeof i&&null!==i){switch(i.$$typeof){case x:return i.key===o?i.type===I?h(e,t,i.props.children,s,o):c(e,t,i,s):null;case S:return i.key===o?u(e,t,i,s):null}if(xn(i)||B(i))return null!==o?null:h(e,t,i,s,null);In(e,i)}return null}function m(e,t,i,s,o){if("string"==typeof s||"number"==typeof s)return l(t,e=e.get(i)||null,""+s,o);if("object"==typeof s&&null!==s){switch(s.$$typeof){case x:return e=e.get(null===s.key?i:s.key)||null,s.type===I?h(t,e,s.props.children,o,s.key):c(t,e,s,o);case S:return u(t,e=e.get(null===s.key?i:s.key)||null,s,o)}if(xn(s)||B(s))return h(t,e=e.get(i)||null,s,o,null);In(t,s)}return null}function g(o,r,a,l){for(var c=null,u=null,h=r,g=r=0,b=null;null!==h&&g<a.length;g++){h.index>g?(b=h,h=null):b=h.sibling;var f=p(o,h,a[g],l);if(null===f){null===h&&(h=b);break}e&&h&&null===f.alternate&&t(o,h),r=n(f,r,g),null===u?c=f:u.sibling=f,u=f,h=b}if(g===a.length)return i(o,h),c;if(null===h){for(;g<a.length;g++)null!==(h=d(o,a[g],l))&&(r=n(h,r,g),null===u?c=h:u.sibling=h,u=h);return c}for(h=s(o,h);g<a.length;g++)null!==(b=m(h,o,g,a[g],l))&&(e&&null!==b.alternate&&h.delete(null===b.key?g:b.key),r=n(b,r,g),null===u?c=b:u.sibling=b,u=b);return e&&h.forEach((function(e){return t(o,e)})),c}function b(o,a,l,c){var u=B(l);if("function"!=typeof u)throw Error(r(150));if(null==(l=u.call(l)))throw Error(r(151));for(var h=u=null,g=a,b=a=0,f=null,y=l.next();null!==g&&!y.done;b++,y=l.next()){g.index>b?(f=g,g=null):f=g.sibling;var v=p(o,g,y.value,c);if(null===v){null===g&&(g=f);break}e&&g&&null===v.alternate&&t(o,g),a=n(v,a,b),null===h?u=v:h.sibling=v,h=v,g=f}if(y.done)return i(o,g),u;if(null===g){for(;!y.done;b++,y=l.next())null!==(y=d(o,y.value,c))&&(a=n(y,a,b),null===h?u=y:h.sibling=y,h=y);return u}for(g=s(o,g);!y.done;b++,y=l.next())null!==(y=m(g,o,b,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?b:y.key),a=n(y,a,b),null===h?u=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(o,e)})),u}return function(e,s,n,l){var c="object"==typeof n&&null!==n&&n.type===I&&null===n.key;c&&(n=n.props.children);var u="object"==typeof n&&null!==n;if(u)switch(n.$$typeof){case x:e:{for(u=n.key,c=s;null!==c;){if(c.key===u){if(7===c.tag){if(n.type===I){i(e,c.sibling),(s=o(c,n.props.children)).return=e,e=s;break e}}else if(c.elementType===n.type){i(e,c.sibling),(s=o(c,n.props)).ref=Sn(e,c,n),s.return=e,e=s;break e}i(e,c);break}t(e,c),c=c.sibling}n.type===I?((s=Vl(n.props.children,e.mode,l,n.key)).return=e,e=s):((l=Zl(n.type,n.key,n.props,null,e.mode,l)).ref=Sn(e,s,n),l.return=e,e=l)}return a(e);case S:e:{for(c=n.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===n.containerInfo&&s.stateNode.implementation===n.implementation){i(e,s.sibling),(s=o(s,n.children||[])).return=e,e=s;break e}i(e,s);break}t(e,s),s=s.sibling}(s=$l(n,e.mode,l)).return=e,e=s}return a(e)}if("string"==typeof n||"number"==typeof n)return n=""+n,null!==s&&6===s.tag?(i(e,s.sibling),(s=o(s,n)).return=e,e=s):(i(e,s),(s=Gl(n,e.mode,l)).return=e,e=s),a(e);if(xn(n))return g(e,s,n,l);if(B(n))return b(e,s,n,l);if(u&&In(e,n),void 0===n&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(r(152,G(e.type)||"Component"))}return i(e,s)}}var Nn=kn(!0),_n=kn(!1),Ln={},Cn=ao(Ln),Dn=ao(Ln),An=ao(Ln);function jn(e){if(e===Ln)throw Error(r(174));return e}function Tn(e,t){switch(co(An,t),co(Dn,e),co(Cn,Ln),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}lo(Cn),co(Cn,t)}function zn(){lo(Cn),lo(Dn),lo(An)}function En(e){jn(An.current);var t=jn(Cn.current),i=pe(t,e.type);t!==i&&(co(Dn,e),co(Cn,i))}function On(e){Dn.current===e&&(lo(Cn),lo(Dn))}var Pn=ao(0);function Rn(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hn=null,Fn=null,Un=!1;function Bn(e,t){var i=Ul(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function Yn(e,t){switch(e.tag){case 5:var i=e.type;return null!==(t=1!==t.nodeType||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Zn(e){if(Un){var t=Fn;if(t){var i=t;if(!Yn(e,t)){if(!(t=Ws(i.nextSibling))||!Yn(e,t))return e.flags=-1025&e.flags|2,Un=!1,void(Hn=e);Bn(Hn,i)}Hn=e,Fn=Ws(t.firstChild)}else e.flags=-1025&e.flags|2,Un=!1,Hn=e}}function Vn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Hn=e}function Wn(e){if(e!==Hn)return!1;if(!Un)return Vn(e),Un=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Bs(t,e.memoizedProps))for(t=Fn;t;)Bn(e,t),t=Ws(t.nextSibling);if(Vn(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var i=e.data;if("/$"===i){if(0===t){Fn=Ws(e.nextSibling);break e}t--}else"$"!==i&&"$!"!==i&&"$?"!==i||t++}e=e.nextSibling}Fn=null}}else Fn=Hn?Ws(e.stateNode.nextSibling):null;return!0}function Gn(){Fn=Hn=null,Un=!1}var $n=[];function Qn(){for(var e=0;e<$n.length;e++)$n[e]._workInProgressVersionPrimary=null;$n.length=0}var qn=w.ReactCurrentDispatcher,Xn=w.ReactCurrentBatchConfig,Jn=0,Kn=null,er=null,tr=null,ir=!1,sr=!1;function or(){throw Error(r(321))}function nr(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!ls(e[i],t[i]))return!1;return!0}function rr(e,t,i,s,o,n){if(Jn=n,Kn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qn.current=null===e||null===e.memoizedState?jr:Tr,e=i(s,o),sr){n=0;do{if(sr=!1,!(25>n))throw Error(r(301));n+=1,tr=er=null,t.updateQueue=null,qn.current=zr,e=i(s,o)}while(sr)}if(qn.current=Ar,t=null!==er&&null!==er.next,Jn=0,tr=er=Kn=null,ir=!1,t)throw Error(r(300));return e}function ar(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===tr?Kn.memoizedState=tr=e:tr=tr.next=e,tr}function lr(){if(null===er){var e=Kn.alternate;e=null!==e?e.memoizedState:null}else e=er.next;var t=null===tr?Kn.memoizedState:tr.next;if(null!==t)tr=t,er=e;else{if(null===e)throw Error(r(310));e={memoizedState:(er=e).memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},null===tr?Kn.memoizedState=tr=e:tr=tr.next=e}return tr}function cr(e,t){return"function"==typeof t?t(e):t}function ur(e){var t=lr(),i=t.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=e;var s=er,o=s.baseQueue,n=i.pending;if(null!==n){if(null!==o){var a=o.next;o.next=n.next,n.next=a}s.baseQueue=o=n,i.pending=null}if(null!==o){o=o.next,s=s.baseState;var l=a=n=null,c=o;do{var u=c.lane;if((Jn&u)===u)null!==l&&(l=l.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),s=c.eagerReducer===e?c.eagerState:e(s,c.action);else{var h={lane:u,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===l?(a=l=h,n=s):l=l.next=h,Kn.lanes|=u,Ra|=u}c=c.next}while(null!==c&&c!==o);null===l?n=s:l.next=a,ls(s,t.memoizedState)||(Or=!0),t.memoizedState=s,t.baseState=n,t.baseQueue=l,i.lastRenderedState=s}return[t.memoizedState,i.dispatch]}function hr(e){var t=lr(),i=t.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=e;var s=i.dispatch,o=i.pending,n=t.memoizedState;if(null!==o){i.pending=null;var a=o=o.next;do{n=e(n,a.action),a=a.next}while(a!==o);ls(n,t.memoizedState)||(Or=!0),t.memoizedState=n,null===t.baseQueue&&(t.baseState=n),i.lastRenderedState=n}return[n,s]}function dr(e,t,i){var s=t._getVersion;s=s(t._source);var o=t._workInProgressVersionPrimary;if(null!==o?e=o===s:(e=e.mutableReadLanes,(e=(Jn&e)===e)&&(t._workInProgressVersionPrimary=s,$n.push(t))),e)return i(t._source);throw $n.push(t),Error(r(350))}function pr(e,t,i,s){var o=Da;if(null===o)throw Error(r(349));var n=t._getVersion,a=n(t._source),l=qn.current,c=l.useState((function(){return dr(o,t,i)})),u=c[1],h=c[0];c=tr;var d=e.memoizedState,p=d.refs,m=p.getSnapshot,g=d.source;d=d.subscribe;var b=Kn;return e.memoizedState={refs:p,source:t,subscribe:s},l.useEffect((function(){p.getSnapshot=i,p.setSnapshot=u;var e=n(t._source);if(!ls(a,e)){e=i(t._source),ls(h,e)||(u(e),e=ul(b),o.mutableReadLanes|=e&o.pendingLanes),e=o.mutableReadLanes,o.entangledLanes|=e;for(var s=o.entanglements,r=e;0<r;){var l=31-Yt(r),c=1<<l;s[l]|=e,r&=~c}}}),[i,t,s]),l.useEffect((function(){return s(t._source,(function(){var e=p.getSnapshot,i=p.setSnapshot;try{i(e(t._source));var s=ul(b);o.mutableReadLanes|=s&o.pendingLanes}catch(e){i((function(){throw e}))}}))}),[t,s]),ls(m,i)&&ls(g,t)&&ls(d,s)||((e={pending:null,dispatch:null,lastRenderedReducer:cr,lastRenderedState:h}).dispatch=u=Dr.bind(null,Kn,e),c.queue=e,c.baseQueue=null,h=dr(o,t,i),c.memoizedState=c.baseState=h),h}function mr(e,t,i){return pr(lr(),e,t,i)}function gr(e){var t=ar();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:cr,lastRenderedState:e}).dispatch=Dr.bind(null,Kn,e),[t.memoizedState,e]}function br(e,t,i,s){return e={tag:e,create:t,destroy:i,deps:s,next:null},null===(t=Kn.updateQueue)?(t={lastEffect:null},Kn.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function fr(e){return e={current:e},ar().memoizedState=e}function yr(){return lr().memoizedState}function vr(e,t,i,s){var o=ar();Kn.flags|=e,o.memoizedState=br(1|t,i,void 0,void 0===s?null:s)}function Mr(e,t,i,s){var o=lr();s=void 0===s?null:s;var n=void 0;if(null!==er){var r=er.memoizedState;if(n=r.destroy,null!==s&&nr(s,r.deps))return void br(t,i,n,s)}Kn.flags|=e,o.memoizedState=br(1|t,i,n,s)}function wr(e,t){return vr(516,4,e,t)}function xr(e,t){return Mr(516,4,e,t)}function Sr(e,t){return Mr(4,2,e,t)}function Ir(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function kr(e,t,i){return i=null!=i?i.concat([e]):null,Mr(4,2,Ir.bind(null,t,e),i)}function Nr(){}function _r(e,t){var i=lr();t=void 0===t?null:t;var s=i.memoizedState;return null!==s&&null!==t&&nr(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Lr(e,t){var i=lr();t=void 0===t?null:t;var s=i.memoizedState;return null!==s&&null!==t&&nr(t,s[1])?s[0]:(e=e(),i.memoizedState=[e,t],e)}function Cr(e,t){var i=Yo();Vo(98>i?98:i,(function(){e(!0)})),Vo(97<i?97:i,(function(){var i=Xn.transition;Xn.transition=1;try{e(!1),t()}finally{Xn.transition=i}}))}function Dr(e,t,i){var s=cl(),o=ul(e),n={lane:o,action:i,eagerReducer:null,eagerState:null,next:null},r=t.pending;if(null===r?n.next=n:(n.next=r.next,r.next=n),t.pending=n,r=e.alternate,e===Kn||null!==r&&r===Kn)sr=ir=!0;else{if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var a=t.lastRenderedState,l=r(a,i);if(n.eagerReducer=r,n.eagerState=l,ls(l,a))return}catch(e){}hl(e,o,s)}}var Ar={readContext:rn,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useOpaqueIdentifier:or,unstable_isNewReconciler:!1},jr={readContext:rn,useCallback:function(e,t){return ar().memoizedState=[e,void 0===t?null:t],e},useContext:rn,useEffect:wr,useImperativeHandle:function(e,t,i){return i=null!=i?i.concat([e]):null,vr(4,2,Ir.bind(null,t,e),i)},useLayoutEffect:function(e,t){return vr(4,2,e,t)},useMemo:function(e,t){var i=ar();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var s=ar();return t=void 0!==i?i(t):t,s.memoizedState=s.baseState=t,e=(e=s.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Dr.bind(null,Kn,e),[s.memoizedState,e]},useRef:fr,useState:gr,useDebugValue:Nr,useDeferredValue:function(e){var t=gr(e),i=t[0],s=t[1];return wr((function(){var t=Xn.transition;Xn.transition=1;try{s(e)}finally{Xn.transition=t}}),[e]),i},useTransition:function(){var e=gr(!1),t=e[0];return fr(e=Cr.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,i){var s=ar();return s.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:i},pr(s,e,t,i)},useOpaqueIdentifier:function(){if(Un){var e=!1,t=function(e){return{$$typeof:E,toString:e,valueOf:e}}((function(){throw e||(e=!0,i("r:"+($s++).toString(36))),Error(r(355))})),i=gr(t)[1];return 0==(2&Kn.mode)&&(Kn.flags|=516,br(5,(function(){i("r:"+($s++).toString(36))}),void 0,null)),t}return gr(t="r:"+($s++).toString(36)),t},unstable_isNewReconciler:!1},Tr={readContext:rn,useCallback:_r,useContext:rn,useEffect:xr,useImperativeHandle:kr,useLayoutEffect:Sr,useMemo:Lr,useReducer:ur,useRef:yr,useState:function(){return ur(cr)},useDebugValue:Nr,useDeferredValue:function(e){var t=ur(cr),i=t[0],s=t[1];return xr((function(){var t=Xn.transition;Xn.transition=1;try{s(e)}finally{Xn.transition=t}}),[e]),i},useTransition:function(){var e=ur(cr)[0];return[yr().current,e]},useMutableSource:mr,useOpaqueIdentifier:function(){return ur(cr)[0]},unstable_isNewReconciler:!1},zr={readContext:rn,useCallback:_r,useContext:rn,useEffect:xr,useImperativeHandle:kr,useLayoutEffect:Sr,useMemo:Lr,useReducer:hr,useRef:yr,useState:function(){return hr(cr)},useDebugValue:Nr,useDeferredValue:function(e){var t=hr(cr),i=t[0],s=t[1];return xr((function(){var t=Xn.transition;Xn.transition=1;try{s(e)}finally{Xn.transition=t}}),[e]),i},useTransition:function(){var e=hr(cr)[0];return[yr().current,e]},useMutableSource:mr,useOpaqueIdentifier:function(){return hr(cr)[0]},unstable_isNewReconciler:!1},Er=w.ReactCurrentOwner,Or=!1;function Pr(e,t,i,s){t.child=null===e?_n(t,null,i,s):Nn(t,e.child,i,s)}function Rr(e,t,i,s,o){i=i.render;var n=t.ref;return nn(t,o),s=rr(e,t,i,s,n,o),null===e||Or?(t.flags|=1,Pr(e,t,s,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,ia(e,t,o))}function Hr(e,t,i,s,o,n){if(null===e){var r=i.type;return"function"!=typeof r||Bl(r)||void 0!==r.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=Zl(i.type,null,s,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Fr(e,t,r,s,o,n))}return r=e.child,0==(o&n)&&(o=r.memoizedProps,(i=null!==(i=i.compare)?i:us)(o,s)&&e.ref===t.ref)?ia(e,t,n):(t.flags|=1,(e=Yl(r,s)).ref=t.ref,e.return=t,t.child=e)}function Fr(e,t,i,s,o,n){if(null!==e&&us(e.memoizedProps,s)&&e.ref===t.ref){if(Or=!1,0==(n&o))return t.lanes=e.lanes,ia(e,t,n);0!=(16384&e.flags)&&(Or=!0)}return Yr(e,t,i,s,n)}function Ur(e,t,i){var s=t.pendingProps,o=s.children,n=null!==e?e.memoizedState:null;if("hidden"===s.mode||"unstable-defer-without-hiding"===s.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},vl(0,i);else{if(0==(1073741824&i))return e=null!==n?n.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},vl(0,e),null;t.memoizedState={baseLanes:0},vl(0,null!==n?n.baseLanes:i)}else null!==n?(s=n.baseLanes|i,t.memoizedState=null):s=i,vl(0,s);return Pr(e,t,o,i),t.child}function Br(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=128)}function Yr(e,t,i,s,o){var n=bo(i)?mo:ho.current;return n=go(t,n),nn(t,o),i=rr(e,t,i,s,n,o),null===e||Or?(t.flags|=1,Pr(e,t,i,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,ia(e,t,o))}function Zr(e,t,i,s,o){if(bo(i)){var n=!0;Mo(t)}else n=!1;if(nn(t,o),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),vn(t,i,s),wn(t,i,s,o),s=!0;else if(null===e){var r=t.stateNode,a=t.memoizedProps;r.props=a;var l=r.context,c=i.contextType;c="object"==typeof c&&null!==c?rn(c):go(t,c=bo(i)?mo:ho.current);var u=i.getDerivedStateFromProps,h="function"==typeof u||"function"==typeof r.getSnapshotBeforeUpdate;h||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(a!==s||l!==c)&&Mn(t,r,s,c),an=!1;var d=t.memoizedState;r.state=d,pn(t,s,r,o),l=t.memoizedState,a!==s||d!==l||po.current||an?("function"==typeof u&&(bn(t,i,u,s),l=t.memoizedState),(a=an||yn(t,i,a,s,d,l,c))?(h||"function"!=typeof r.UNSAFE_componentWillMount&&"function"!=typeof r.componentWillMount||("function"==typeof r.componentWillMount&&r.componentWillMount(),"function"==typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"==typeof r.componentDidMount&&(t.flags|=4)):("function"==typeof r.componentDidMount&&(t.flags|=4),t.memoizedProps=s,t.memoizedState=l),r.props=s,r.state=l,r.context=c,s=a):("function"==typeof r.componentDidMount&&(t.flags|=4),s=!1)}else{r=t.stateNode,cn(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:qo(t.type,a),r.props=c,h=t.pendingProps,d=r.context,l="object"==typeof(l=i.contextType)&&null!==l?rn(l):go(t,l=bo(i)?mo:ho.current);var p=i.getDerivedStateFromProps;(u="function"==typeof p||"function"==typeof r.getSnapshotBeforeUpdate)||"function"!=typeof r.UNSAFE_componentWillReceiveProps&&"function"!=typeof r.componentWillReceiveProps||(a!==h||d!==l)&&Mn(t,r,s,l),an=!1,d=t.memoizedState,r.state=d,pn(t,s,r,o);var m=t.memoizedState;a!==h||d!==m||po.current||an?("function"==typeof p&&(bn(t,i,p,s),m=t.memoizedState),(c=an||yn(t,i,c,s,d,m,l))?(u||"function"!=typeof r.UNSAFE_componentWillUpdate&&"function"!=typeof r.componentWillUpdate||("function"==typeof r.componentWillUpdate&&r.componentWillUpdate(s,m,l),"function"==typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(s,m,l)),"function"==typeof r.componentDidUpdate&&(t.flags|=4),"function"==typeof r.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof r.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=s,t.memoizedState=m),r.props=s,r.state=m,r.context=l,s=c):("function"!=typeof r.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof r.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),s=!1)}return Vr(e,t,i,s,n,o)}function Vr(e,t,i,s,o,n){Br(e,t);var r=0!=(64&t.flags);if(!s&&!r)return o&&wo(t,i,!1),ia(e,t,n);s=t.stateNode,Er.current=t;var a=r&&"function"!=typeof i.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&r?(t.child=Nn(t,e.child,null,n),t.child=Nn(t,null,a,n)):Pr(e,t,a,n),t.memoizedState=s.state,o&&wo(t,i,!0),t.child}function Wr(e){var t=e.stateNode;t.pendingContext?yo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yo(0,t.context,!1),Tn(e,t.containerInfo)}var Gr,$r,Qr,qr={dehydrated:null,retryLane:0};function Xr(e,t,i){var s,o=t.pendingProps,n=Pn.current,r=!1;return(s=0!=(64&t.flags))||(s=(null===e||null!==e.memoizedState)&&0!=(2&n)),s?(r=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(n|=1),co(Pn,1&n),null===e?(void 0!==o.fallback&&Zn(t),e=o.children,n=o.fallback,r?(e=Jr(t,e,n,i),t.child.memoizedState={baseLanes:i},t.memoizedState=qr,e):"number"==typeof o.unstable_expectedLoadTime?(e=Jr(t,e,n,i),t.child.memoizedState={baseLanes:i},t.memoizedState=qr,t.lanes=33554432,e):((i=Wl({mode:"visible",children:e},t.mode,i,null)).return=t,t.child=i)):(e.memoizedState,r?(o=function(e,t,i,s,o){var n=t.mode,r=e.child;e=r.sibling;var a={mode:"hidden",children:i};return 0==(2&n)&&t.child!==r?((i=t.child).childLanes=0,i.pendingProps=a,null!==(r=i.lastEffect)?(t.firstEffect=i.firstEffect,t.lastEffect=r,r.nextEffect=null):t.firstEffect=t.lastEffect=null):i=Yl(r,a),null!==e?s=Yl(e,s):(s=Vl(s,n,o,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,s}(e,t,o.children,o.fallback,i),r=t.child,n=e.child.memoizedState,r.memoizedState=null===n?{baseLanes:i}:{baseLanes:n.baseLanes|i},r.childLanes=e.childLanes&~i,t.memoizedState=qr,o):(i=function(e,t,i,s){var o=e.child;return e=o.sibling,i=Yl(o,{mode:"visible",children:i}),0==(2&t.mode)&&(i.lanes=s),i.return=t,i.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=i}(e,t,o.children,i),t.memoizedState=null,i))}function Jr(e,t,i,s){var o=e.mode,n=e.child;return t={mode:"hidden",children:t},0==(2&o)&&null!==n?(n.childLanes=0,n.pendingProps=t):n=Wl(t,o,0,null),i=Vl(i,o,s,null),n.return=e,i.return=e,n.sibling=i,e.child=n,i}function Kr(e,t){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),on(e.return,t)}function ea(e,t,i,s,o,n){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:o,lastEffect:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=i,r.tailMode=o,r.lastEffect=n)}function ta(e,t,i){var s=t.pendingProps,o=s.revealOrder,n=s.tail;if(Pr(e,t,s.children,i),0!=(2&(s=Pn.current)))s=1&s|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Kr(e,i);else if(19===e.tag)Kr(e,i);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(co(Pn,s),0==(2&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(i=t.child,o=null;null!==i;)null!==(e=i.alternate)&&null===Rn(e)&&(o=i),i=i.sibling;null===(i=o)?(o=t.child,t.child=null):(o=i.sibling,i.sibling=null),ea(t,!1,o,i,n,t.lastEffect);break;case"backwards":for(i=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Rn(e)){t.child=o;break}e=o.sibling,o.sibling=i,i=o,o=e}ea(t,!0,i,null,n,t.lastEffect);break;case"together":ea(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ia(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),Ra|=t.lanes,0!=(i&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(i=Yl(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Yl(e,e.pendingProps)).return=t;i.sibling=null}return t.child}return null}function sa(e,t){if(!Un)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;null!==i;)null!==i.alternate&&(s=i),i=i.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function oa(e,t,i){var s=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return bo(t.type)&&fo(),null;case 3:return zn(),lo(po),lo(ho),Qn(),(s=t.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(Wn(t)?t.flags|=4:s.hydrate||(t.flags|=256)),null;case 5:On(t);var n=jn(An.current);if(i=t.type,null!==e&&null!=t.stateNode)$r(e,t,i,s),e.ref!==t.ref&&(t.flags|=128);else{if(!s){if(null===t.stateNode)throw Error(r(166));return null}if(e=jn(Cn.current),Wn(t)){s=t.stateNode,i=t.type;var a=t.memoizedProps;switch(s[qs]=t,s[Xs]=a,i){case"dialog":Ls("cancel",s),Ls("close",s);break;case"iframe":case"object":case"embed":Ls("load",s);break;case"video":case"audio":for(e=0;e<Is.length;e++)Ls(Is[e],s);break;case"source":Ls("error",s);break;case"img":case"image":case"link":Ls("error",s),Ls("load",s);break;case"details":Ls("toggle",s);break;case"input":ee(s,a),Ls("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!a.multiple},Ls("invalid",s);break;case"textarea":le(s,a),Ls("invalid",s)}for(var c in Se(i,a),e=null,a)a.hasOwnProperty(c)&&(n=a[c],"children"===c?"string"==typeof n?s.textContent!==n&&(e=["children",n]):"number"==typeof n&&s.textContent!==""+n&&(e=["children",""+n]):l.hasOwnProperty(c)&&null!=n&&"onScroll"===c&&Ls("scroll",s));switch(i){case"input":q(s),se(s,a,!0);break;case"textarea":q(s),ue(s);break;case"select":case"option":break;default:"function"==typeof a.onClick&&(s.onclick=Rs)}s=e,t.updateQueue=s,null!==s&&(t.flags|=4)}else{switch(c=9===n.nodeType?n:n.ownerDocument,e===he&&(e=de(i)),e===he?"script"===i?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof s.is?e=c.createElement(i,{is:s.is}):(e=c.createElement(i),"select"===i&&(c=e,s.multiple?c.multiple=!0:s.size&&(c.size=s.size))):e=c.createElementNS(e,i),e[qs]=t,e[Xs]=s,Gr(e,t),t.stateNode=e,c=Ie(i,s),i){case"dialog":Ls("cancel",e),Ls("close",e),n=s;break;case"iframe":case"object":case"embed":Ls("load",e),n=s;break;case"video":case"audio":for(n=0;n<Is.length;n++)Ls(Is[n],e);n=s;break;case"source":Ls("error",e),n=s;break;case"img":case"image":case"link":Ls("error",e),Ls("load",e),n=s;break;case"details":Ls("toggle",e),n=s;break;case"input":ee(e,s),n=K(e,s),Ls("invalid",e);break;case"option":n=ne(e,s);break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=o({},s,{value:void 0}),Ls("invalid",e);break;case"textarea":le(e,s),n=ae(e,s),Ls("invalid",e);break;default:n=s}Se(i,n);var u=n;for(a in u)if(u.hasOwnProperty(a)){var h=u[a];"style"===a?we(e,h):"dangerouslySetInnerHTML"===a?null!=(h=h?h.__html:void 0)&&be(e,h):"children"===a?"string"==typeof h?("textarea"!==i||""!==h)&&fe(e,h):"number"==typeof h&&fe(e,""+h):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(l.hasOwnProperty(a)?null!=h&&"onScroll"===a&&Ls("scroll",e):null!=h&&M(e,a,h,c))}switch(i){case"input":q(e),se(e,s,!1);break;case"textarea":q(e),ue(e);break;case"option":null!=s.value&&e.setAttribute("value",""+$(s.value));break;case"select":e.multiple=!!s.multiple,null!=(a=s.value)?re(e,!!s.multiple,a,!1):null!=s.defaultValue&&re(e,!!s.multiple,s.defaultValue,!0);break;default:"function"==typeof n.onClick&&(e.onclick=Rs)}Us(i,s)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Qr(0,t,e.memoizedProps,s);else{if("string"!=typeof s&&null===t.stateNode)throw Error(r(166));i=jn(An.current),jn(Cn.current),Wn(t)?(s=t.stateNode,i=t.memoizedProps,s[qs]=t,s.nodeValue!==i&&(t.flags|=4)):((s=(9===i.nodeType?i:i.ownerDocument).createTextNode(s))[qs]=t,t.stateNode=s)}return null;case 13:return lo(Pn),s=t.memoizedState,0!=(64&t.flags)?(t.lanes=i,t):(s=null!==s,i=!1,null===e?void 0!==t.memoizedProps.fallback&&Wn(t):i=null!==e.memoizedState,s&&!i&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Pn.current)?0===Ea&&(Ea=3):(0!==Ea&&3!==Ea||(Ea=4),null===Da||0==(134217727&Ra)&&0==(134217727&Ha)||gl(Da,ja))),(s||i)&&(t.flags|=4),null);case 4:return zn(),null===e&&Ds(t.stateNode.containerInfo),null;case 10:return sn(t),null;case 19:if(lo(Pn),null===(s=t.memoizedState))return null;if(a=0!=(64&t.flags),null===(c=s.rendering))if(a)sa(s,!1);else{if(0!==Ea||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Rn(e))){for(t.flags|=64,sa(s,!1),null!==(a=c.updateQueue)&&(t.updateQueue=a,t.flags|=4),null===s.lastEffect&&(t.firstEffect=null),t.lastEffect=s.lastEffect,s=i,i=t.child;null!==i;)e=s,(a=i).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return co(Pn,1&Pn.current|2),t.child}e=e.sibling}null!==s.tail&&Bo()>Ya&&(t.flags|=64,a=!0,sa(s,!1),t.lanes=33554432)}else{if(!a)if(null!==(e=Rn(c))){if(t.flags|=64,a=!0,null!==(i=e.updateQueue)&&(t.updateQueue=i,t.flags|=4),sa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!c.alternate&&!Un)return null!==(t=t.lastEffect=s.lastEffect)&&(t.nextEffect=null),null}else 2*Bo()-s.renderingStartTime>Ya&&1073741824!==i&&(t.flags|=64,a=!0,sa(s,!1),t.lanes=33554432);s.isBackwards?(c.sibling=t.child,t.child=c):(null!==(i=s.last)?i.sibling=c:t.child=c,s.last=c)}return null!==s.tail?(i=s.tail,s.rendering=i,s.tail=i.sibling,s.lastEffect=t.lastEffect,s.renderingStartTime=Bo(),i.sibling=null,t=Pn.current,co(Pn,a?1&t|2:1&t),i):null;case 23:case 24:return Ml(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==s.mode&&(t.flags|=4),null}throw Error(r(156,t.tag))}function na(e){switch(e.tag){case 1:bo(e.type)&&fo();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(zn(),lo(po),lo(ho),Qn(),0!=(64&(t=e.flags)))throw Error(r(285));return e.flags=-4097&t|64,e;case 5:return On(e),null;case 13:return lo(Pn),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return lo(Pn),null;case 4:return zn(),null;case 10:return sn(e),null;case 23:case 24:return Ml(),null;default:return null}}function ra(e,t){try{var i="",s=t;do{i+=W(s),s=s.return}while(s);var o=i}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o}}function aa(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}Gr=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},$r=function(e,t,i,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,jn(Cn.current);var r,a=null;switch(i){case"input":n=K(e,n),s=K(e,s),a=[];break;case"option":n=ne(e,n),s=ne(e,s),a=[];break;case"select":n=o({},n,{value:void 0}),s=o({},s,{value:void 0}),a=[];break;case"textarea":n=ae(e,n),s=ae(e,s),a=[];break;default:"function"!=typeof n.onClick&&"function"==typeof s.onClick&&(e.onclick=Rs)}for(h in Se(i,s),i=null,n)if(!s.hasOwnProperty(h)&&n.hasOwnProperty(h)&&null!=n[h])if("style"===h){var c=n[h];for(r in c)c.hasOwnProperty(r)&&(i||(i={}),i[r]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(l.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in s){var u=s[h];if(c=null!=n?n[h]:void 0,s.hasOwnProperty(h)&&u!==c&&(null!=u||null!=c))if("style"===h)if(c){for(r in c)!c.hasOwnProperty(r)||u&&u.hasOwnProperty(r)||(i||(i={}),i[r]="");for(r in u)u.hasOwnProperty(r)&&c[r]!==u[r]&&(i||(i={}),i[r]=u[r])}else i||(a||(a=[]),a.push(h,i)),i=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(a=a||[]).push(h,u)):"children"===h?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(l.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Ls("scroll",e),a||c===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===E?u.toString():(a=a||[]).push(h,u))}i&&(a=a||[]).push("style",i);var h=a;(t.updateQueue=h)&&(t.flags|=4)}},Qr=function(e,t,i,s){i!==s&&(t.flags|=4)};var la="function"==typeof WeakMap?WeakMap:Map;function ca(e,t,i){(i=un(-1,i)).tag=3,i.payload={element:null};var s=t.value;return i.callback=function(){Ga||(Ga=!0,$a=s),aa(0,t)},i}function ua(e,t,i){(i=un(-1,i)).tag=3;var s=e.type.getDerivedStateFromError;if("function"==typeof s){var o=t.value;i.payload=function(){return aa(0,t),s(o)}}var n=e.stateNode;return null!==n&&"function"==typeof n.componentDidCatch&&(i.callback=function(){"function"!=typeof s&&(null===Qa?Qa=new Set([this]):Qa.add(this),aa(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}var ha="function"==typeof WeakSet?WeakSet:Set;function da(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Pl(e,t)}else t.current=null}function pa(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var i=e.memoizedProps,s=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?i:qo(t.type,i),s),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Vs(t.stateNode.containerInfo))}throw Error(r(163))}function ma(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=i.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var s=e.create;e.destroy=s()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=i.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var o=e;s=o.next,0!=(4&(o=o.tag))&&0!=(1&o)&&(zl(i,e),Tl(i,e)),e=s}while(e!==t)}return;case 1:return e=i.stateNode,4&i.flags&&(null===t?e.componentDidMount():(s=i.elementType===i.type?t.memoizedProps:qo(i.type,t.memoizedProps),e.componentDidUpdate(s,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=i.updateQueue)&&mn(i,t,e));case 3:if(null!==(t=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 5:case 1:e=i.child.stateNode}mn(i,t,e)}return;case 5:return e=i.stateNode,void(null===t&&4&i.flags&&Us(i.type,i.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&wt(i)))))}throw Error(r(163))}function ga(e,t){for(var i=e;;){if(5===i.tag){var s=i.stateNode;if(t)"function"==typeof(s=s.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{s=i.stateNode;var o=i.memoizedProps.style;o=null!=o&&o.hasOwnProperty("display")?o.display:null,s.style.display=Me("display",o)}}else if(6===i.tag)i.stateNode.nodeValue=t?"":i.memoizedProps;else if((23!==i.tag&&24!==i.tag||null===i.memoizedState||i===e)&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ba(e,t){if(So&&"function"==typeof So.onCommitFiberUnmount)try{So.onCommitFiberUnmount(xo,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var s=i,o=s.destroy;if(s=s.tag,void 0!==o)if(0!=(4&s))zl(t,i);else{s=t;try{o()}catch(e){Pl(s,e)}}i=i.next}while(i!==e)}break;case 1:if(da(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Pl(t,e)}break;case 5:da(t);break;case 4:xa(e,t)}}function fa(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ya(e){return 5===e.tag||3===e.tag||4===e.tag}function va(e){e:{for(var t=e.return;null!==t;){if(ya(t))break e;t=t.return}throw Error(r(160))}var i=t;switch(t=i.stateNode,i.tag){case 5:var s=!1;break;case 3:case 4:t=t.containerInfo,s=!0;break;default:throw Error(r(161))}16&i.flags&&(fe(t,""),i.flags&=-17);e:t:for(i=e;;){for(;null===i.sibling;){if(null===i.return||ya(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.flags)continue t;if(null===i.child||4===i.tag)continue t;i.child.return=i,i=i.child}if(!(2&i.flags)){i=i.stateNode;break e}}s?Ma(e,i,t):wa(e,i,t)}function Ma(e,t,i){var s=e.tag,o=5===s||6===s;if(o)e=o?e.stateNode:e.stateNode.instance,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!=(i=i._reactRootContainer)||null!==t.onclick||(t.onclick=Rs));else if(4!==s&&null!==(e=e.child))for(Ma(e,t,i),e=e.sibling;null!==e;)Ma(e,t,i),e=e.sibling}function wa(e,t,i){var s=e.tag,o=5===s||6===s;if(o)e=o?e.stateNode:e.stateNode.instance,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==s&&null!==(e=e.child))for(wa(e,t,i),e=e.sibling;null!==e;)wa(e,t,i),e=e.sibling}function xa(e,t){for(var i,s,o=t,n=!1;;){if(!n){n=o.return;e:for(;;){if(null===n)throw Error(r(160));switch(i=n.stateNode,n.tag){case 5:s=!1;break e;case 3:case 4:i=i.containerInfo,s=!0;break e}n=n.return}n=!0}if(5===o.tag||6===o.tag){e:for(var a=e,l=o,c=l;;)if(ba(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===l)break e;for(;null===c.sibling;){if(null===c.return||c.return===l)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}s?(a=i,l=o.stateNode,8===a.nodeType?a.parentNode.removeChild(l):a.removeChild(l)):i.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){i=o.stateNode.containerInfo,s=!0,o.child.return=o,o=o.child;continue}}else if(ba(e,o),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(n=!1)}o.sibling.return=o.return,o=o.sibling}}function Sa(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{3==(3&s.tag)&&(e=s.destroy,s.destroy=void 0,void 0!==e&&e()),s=s.next}while(s!==i)}return;case 1:case 12:case 17:return;case 5:if(null!=(i=t.stateNode)){s=t.memoizedProps;var o=null!==e?e.memoizedProps:s;e=t.type;var n=t.updateQueue;if(t.updateQueue=null,null!==n){for(i[Xs]=s,"input"===e&&"radio"===s.type&&null!=s.name&&te(i,s),Ie(e,o),t=Ie(e,s),o=0;o<n.length;o+=2){var a=n[o],l=n[o+1];"style"===a?we(i,l):"dangerouslySetInnerHTML"===a?be(i,l):"children"===a?fe(i,l):M(i,a,l,t)}switch(e){case"input":ie(i,s);break;case"textarea":ce(i,s);break;case"select":e=i._wrapperState.wasMultiple,i._wrapperState.wasMultiple=!!s.multiple,null!=(n=s.value)?re(i,!!s.multiple,n,!1):e!==!!s.multiple&&(null!=s.defaultValue?re(i,!!s.multiple,s.defaultValue,!0):re(i,!!s.multiple,s.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(r(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((i=t.stateNode).hydrate&&(i.hydrate=!1,wt(i.containerInfo)));case 13:return null!==t.memoizedState&&(Ba=Bo(),ga(t.child,!0)),void Ia(t);case 19:return void Ia(t);case 23:case 24:return void ga(t,null!==t.memoizedState)}throw Error(r(163))}function Ia(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new ha),t.forEach((function(t){var s=Hl.bind(null,e,t);i.has(t)||(i.add(t),t.then(s,s))}))}}function ka(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&null!==(t=t.memoizedState)&&null===t.dehydrated}var Na=Math.ceil,_a=w.ReactCurrentDispatcher,La=w.ReactCurrentOwner,Ca=0,Da=null,Aa=null,ja=0,Ta=0,za=ao(0),Ea=0,Oa=null,Pa=0,Ra=0,Ha=0,Fa=0,Ua=null,Ba=0,Ya=1/0;function Za(){Ya=Bo()+500}var Va,Wa=null,Ga=!1,$a=null,Qa=null,qa=!1,Xa=null,Ja=90,Ka=[],el=[],tl=null,il=0,sl=null,ol=-1,nl=0,rl=0,al=null,ll=!1;function cl(){return 0!=(48&Ca)?Bo():-1!==ol?ol:ol=Bo()}function ul(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===Yo()?1:2;if(0===nl&&(nl=Pa),0!==Qo.transition){0!==rl&&(rl=null!==Ua?Ua.pendingLanes:0),e=nl;var t=4186112&~rl;return 0==(t&=-t)&&0==(t=(e=4186112&~e)&-e)&&(t=8192),t}return e=Yo(),e=Ht(0!=(4&Ca)&&98===e?12:e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),nl)}function hl(e,t,i){if(50<il)throw il=0,sl=null,Error(r(185));if(null===(e=dl(e,t)))return null;Bt(e,t,i),e===Da&&(Ha|=t,4===Ea&&gl(e,ja));var s=Yo();1===t?0!=(8&Ca)&&0==(48&Ca)?bl(e):(pl(e,i),0===Ca&&(Za(),Go())):(0==(4&Ca)||98!==s&&99!==s||(null===tl?tl=new Set([e]):tl.add(e)),pl(e,i)),Ua=e}function dl(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}function pl(e,t){for(var i=e.callbackNode,s=e.suspendedLanes,o=e.pingedLanes,n=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Yt(a),c=1<<l,u=n[l];if(-1===u){if(0==(c&s)||0!=(c&o)){u=t,Ot(c);var h=Et;n[l]=10<=h?u+250:6<=h?u+5e3:-1}}else u<=t&&(e.expiredLanes|=c);a&=~c}if(s=Pt(e,e===Da?ja:0),t=Et,0===s)null!==i&&(i!==Oo&&No(i),e.callbackNode=null,e.callbackPriority=0);else{if(null!==i){if(e.callbackPriority===t)return;i!==Oo&&No(i)}15===t?(i=bl.bind(null,e),null===Ro?(Ro=[i],Ho=ko(Ao,$o)):Ro.push(i),i=Oo):14===t?i=Wo(99,bl.bind(null,e)):(i=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(r(358,e))}}(t),i=Wo(i,ml.bind(null,e))),e.callbackPriority=t,e.callbackNode=i}}function ml(e){if(ol=-1,rl=nl=0,0!=(48&Ca))throw Error(r(327));var t=e.callbackNode;if(jl()&&e.callbackNode!==t)return null;var i=Pt(e,e===Da?ja:0);if(0===i)return null;var s=i,o=Ca;Ca|=16;var n=Sl();for(Da===e&&ja===s||(Za(),wl(e,s));;)try{Nl();break}catch(t){xl(e,t)}if(tn(),_a.current=n,Ca=o,null!==Aa?s=0:(Da=null,ja=0,s=Ea),0!=(Pa&Ha))wl(e,0);else if(0!==s){if(2===s&&(Ca|=64,e.hydrate&&(e.hydrate=!1,Vs(e.containerInfo)),0!==(i=Rt(e))&&(s=Il(e,i))),1===s)throw t=Oa,wl(e,0),gl(e,i),pl(e,Bo()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=i,s){case 0:case 1:throw Error(r(345));case 2:case 5:Cl(e);break;case 3:if(gl(e,i),(62914560&i)===i&&10<(s=Ba+500-Bo())){if(0!==Pt(e,0))break;if(((o=e.suspendedLanes)&i)!==i){cl(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Ys(Cl.bind(null,e),s);break}Cl(e);break;case 4:if(gl(e,i),(4186112&i)===i)break;for(s=e.eventTimes,o=-1;0<i;){var a=31-Yt(i);n=1<<a,(a=s[a])>o&&(o=a),i&=~n}if(i=o,10<(i=(120>(i=Bo()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Na(i/1960))-i)){e.timeoutHandle=Ys(Cl.bind(null,e),i);break}Cl(e);break;default:throw Error(r(329))}}return pl(e,Bo()),e.callbackNode===t?ml.bind(null,e):null}function gl(e,t){for(t&=~Fa,t&=~Ha,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Yt(t),s=1<<i;e[i]=-1,t&=~s}}function bl(e){if(0!=(48&Ca))throw Error(r(327));if(jl(),e===Da&&0!=(e.expiredLanes&ja)){var t=ja,i=Il(e,t);0!=(Pa&Ha)&&(i=Il(e,t=Pt(e,t)))}else i=Il(e,t=Pt(e,0));if(0!==e.tag&&2===i&&(Ca|=64,e.hydrate&&(e.hydrate=!1,Vs(e.containerInfo)),0!==(t=Rt(e))&&(i=Il(e,t))),1===i)throw i=Oa,wl(e,0),gl(e,t),pl(e,Bo()),i;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cl(e),pl(e,Bo()),null}function fl(e,t){var i=Ca;Ca|=1;try{return e(t)}finally{0===(Ca=i)&&(Za(),Go())}}function yl(e,t){var i=Ca;Ca&=-2,Ca|=8;try{return e(t)}finally{0===(Ca=i)&&(Za(),Go())}}function vl(e,t){co(za,Ta),Ta|=t,Pa|=t}function Ml(){Ta=za.current,lo(za)}function wl(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(-1!==i&&(e.timeoutHandle=-1,Zs(i)),null!==Aa)for(i=Aa.return;null!==i;){var s=i;switch(s.tag){case 1:null!=(s=s.type.childContextTypes)&&fo();break;case 3:zn(),lo(po),lo(ho),Qn();break;case 5:On(s);break;case 4:zn();break;case 13:case 19:lo(Pn);break;case 10:sn(s);break;case 23:case 24:Ml()}i=i.return}Da=e,Aa=Yl(e.current,null),ja=Ta=Pa=t,Ea=0,Oa=null,Fa=Ha=Ra=0}function xl(e,t){for(;;){var i=Aa;try{if(tn(),qn.current=Ar,ir){for(var s=Kn.memoizedState;null!==s;){var o=s.queue;null!==o&&(o.pending=null),s=s.next}ir=!1}if(Jn=0,tr=er=Kn=null,sr=!1,La.current=null,null===i||null===i.return){Ea=1,Oa=t,Aa=null;break}e:{var n=e,r=i.return,a=i,l=t;if(t=ja,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var c=l;if(0==(2&a.mode)){var u=a.alternate;u?(a.updateQueue=u.updateQueue,a.memoizedState=u.memoizedState,a.lanes=u.lanes):(a.updateQueue=null,a.memoizedState=null)}var h=0!=(1&Pn.current),d=r;do{var p;if(p=13===d.tag){var m=d.memoizedState;if(null!==m)p=null!==m.dehydrated;else{var g=d.memoizedProps;p=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!h)}}if(p){var b=d.updateQueue;if(null===b){var f=new Set;f.add(c),d.updateQueue=f}else b.add(c);if(0==(2&d.mode)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=un(-1,1);y.tag=2,hn(a,y)}a.lanes|=1;break e}l=void 0,a=t;var v=n.pingCache;if(null===v?(v=n.pingCache=new la,l=new Set,v.set(c,l)):void 0===(l=v.get(c))&&(l=new Set,v.set(c,l)),!l.has(a)){l.add(a);var M=Rl.bind(null,n,c,a);c.then(M,M)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);l=Error((G(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ea&&(Ea=2),l=ra(l,a),d=r;do{switch(d.tag){case 3:n=l,d.flags|=4096,t&=-t,d.lanes|=t,dn(d,ca(0,n,t));break e;case 1:n=l;var w=d.type,x=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===Qa||!Qa.has(x)))){d.flags|=4096,t&=-t,d.lanes|=t,dn(d,ua(d,n,t));break e}}d=d.return}while(null!==d)}Ll(i)}catch(e){t=e,Aa===i&&null!==i&&(Aa=i=i.return);continue}break}}function Sl(){var e=_a.current;return _a.current=Ar,null===e?Ar:e}function Il(e,t){var i=Ca;Ca|=16;var s=Sl();for(Da===e&&ja===t||wl(e,t);;)try{kl();break}catch(t){xl(e,t)}if(tn(),Ca=i,_a.current=s,null!==Aa)throw Error(r(261));return Da=null,ja=0,Ea}function kl(){for(;null!==Aa;)_l(Aa)}function Nl(){for(;null!==Aa&&!_o();)_l(Aa)}function _l(e){var t=Va(e.alternate,e,Ta);e.memoizedProps=e.pendingProps,null===t?Ll(e):Aa=t,La.current=null}function Ll(e){var t=e;do{var i=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(i=oa(i,t,Ta)))return void(Aa=i);if(24!==(i=t).tag&&23!==i.tag||null===i.memoizedState||0!=(1073741824&Ta)||0==(4&i.mode)){for(var s=0,o=i.child;null!==o;)s|=o.lanes|o.childLanes,o=o.sibling;i.childLanes=s}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(i=na(t)))return i.flags&=2047,void(Aa=i);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Aa=t);Aa=t=e}while(null!==t);0===Ea&&(Ea=5)}function Cl(e){var t=Yo();return Vo(99,Dl.bind(null,e,t)),null}function Dl(e,t){do{jl()}while(null!==Xa);if(0!=(48&Ca))throw Error(r(327));var i=e.finishedWork;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(r(177));e.callbackNode=null;var s=i.lanes|i.childLanes,o=s,n=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var a=e.eventTimes,l=e.expirationTimes;0<n;){var c=31-Yt(n),u=1<<c;o[c]=0,a[c]=-1,l[c]=-1,n&=~u}if(null!==tl&&0==(24&s)&&tl.has(e)&&tl.delete(e),e===Da&&(Aa=Da=null,ja=0),1<i.flags?null!==i.lastEffect?(i.lastEffect.nextEffect=i,s=i.firstEffect):s=i:s=i.firstEffect,null!==s){if(o=Ca,Ca|=32,La.current=null,Hs=$t,gs(a=ms())){if("selectionStart"in a)l={start:a.selectionStart,end:a.selectionEnd};else e:if(l=(l=a.ownerDocument)&&l.defaultView||window,(u=l.getSelection&&l.getSelection())&&0!==u.rangeCount){l=u.anchorNode,n=u.anchorOffset,c=u.focusNode,u=u.focusOffset;try{l.nodeType,c.nodeType}catch(e){l=null;break e}var h=0,d=-1,p=-1,m=0,g=0,b=a,f=null;t:for(;;){for(var y;b!==l||0!==n&&3!==b.nodeType||(d=h+n),b!==c||0!==u&&3!==b.nodeType||(p=h+u),3===b.nodeType&&(h+=b.nodeValue.length),null!==(y=b.firstChild);)f=b,b=y;for(;;){if(b===a)break t;if(f===l&&++m===n&&(d=h),f===c&&++g===u&&(p=h),null!==(y=b.nextSibling))break;f=(b=f).parentNode}b=y}l=-1===d||-1===p?null:{start:d,end:p}}else l=null;l=l||{start:0,end:0}}else l=null;Fs={focusedElem:a,selectionRange:l},$t=!1,al=null,ll=!1,Wa=s;do{try{Al()}catch(e){if(null===Wa)throw Error(r(330));Pl(Wa,e),Wa=Wa.nextEffect}}while(null!==Wa);al=null,Wa=s;do{try{for(a=e;null!==Wa;){var v=Wa.flags;if(16&v&&fe(Wa.stateNode,""),128&v){var M=Wa.alternate;if(null!==M){var w=M.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&v){case 2:va(Wa),Wa.flags&=-3;break;case 6:va(Wa),Wa.flags&=-3,Sa(Wa.alternate,Wa);break;case 1024:Wa.flags&=-1025;break;case 1028:Wa.flags&=-1025,Sa(Wa.alternate,Wa);break;case 4:Sa(Wa.alternate,Wa);break;case 8:xa(a,l=Wa);var x=l.alternate;fa(l),null!==x&&fa(x)}Wa=Wa.nextEffect}}catch(e){if(null===Wa)throw Error(r(330));Pl(Wa,e),Wa=Wa.nextEffect}}while(null!==Wa);if(w=Fs,M=ms(),v=w.focusedElem,a=w.selectionRange,M!==v&&v&&v.ownerDocument&&ps(v.ownerDocument.documentElement,v)){null!==a&&gs(v)&&(M=a.start,void 0===(w=a.end)&&(w=M),"selectionStart"in v?(v.selectionStart=M,v.selectionEnd=Math.min(w,v.value.length)):(w=(M=v.ownerDocument||document)&&M.defaultView||window).getSelection&&(w=w.getSelection(),l=v.textContent.length,x=Math.min(a.start,l),a=void 0===a.end?x:Math.min(a.end,l),!w.extend&&x>a&&(l=a,a=x,x=l),l=ds(v,x),n=ds(v,a),l&&n&&(1!==w.rangeCount||w.anchorNode!==l.node||w.anchorOffset!==l.offset||w.focusNode!==n.node||w.focusOffset!==n.offset)&&((M=M.createRange()).setStart(l.node,l.offset),w.removeAllRanges(),x>a?(w.addRange(M),w.extend(n.node,n.offset)):(M.setEnd(n.node,n.offset),w.addRange(M))))),M=[];for(w=v;w=w.parentNode;)1===w.nodeType&&M.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<M.length;v++)(w=M[v]).element.scrollLeft=w.left,w.element.scrollTop=w.top}$t=!!Hs,Fs=Hs=null,e.current=i,Wa=s;do{try{for(v=e;null!==Wa;){var S=Wa.flags;if(36&S&&ma(v,Wa.alternate,Wa),128&S){M=void 0;var I=Wa.ref;if(null!==I){var k=Wa.stateNode;Wa.tag,M=k,"function"==typeof I?I(M):I.current=M}}Wa=Wa.nextEffect}}catch(e){if(null===Wa)throw Error(r(330));Pl(Wa,e),Wa=Wa.nextEffect}}while(null!==Wa);Wa=null,Po(),Ca=o}else e.current=i;if(qa)qa=!1,Xa=e,Ja=t;else for(Wa=s;null!==Wa;)t=Wa.nextEffect,Wa.nextEffect=null,8&Wa.flags&&((S=Wa).sibling=null,S.stateNode=null),Wa=t;if(0===(s=e.pendingLanes)&&(Qa=null),1===s?e===sl?il++:(il=0,sl=e):il=0,i=i.stateNode,So&&"function"==typeof So.onCommitFiberRoot)try{So.onCommitFiberRoot(xo,i,void 0,64==(64&i.current.flags))}catch(e){}if(pl(e,Bo()),Ga)throw Ga=!1,e=$a,$a=null,e;return 0!=(8&Ca)||Go(),null}function Al(){for(;null!==Wa;){var e=Wa.alternate;ll||null===al||(0!=(8&Wa.flags)?Ke(Wa,al)&&(ll=!0):13===Wa.tag&&ka(e,Wa)&&Ke(Wa,al)&&(ll=!0));var t=Wa.flags;0!=(256&t)&&pa(e,Wa),0==(512&t)||qa||(qa=!0,Wo(97,(function(){return jl(),null}))),Wa=Wa.nextEffect}}function jl(){if(90!==Ja){var e=97<Ja?97:Ja;return Ja=90,Vo(e,El)}return!1}function Tl(e,t){Ka.push(t,e),qa||(qa=!0,Wo(97,(function(){return jl(),null})))}function zl(e,t){el.push(t,e),qa||(qa=!0,Wo(97,(function(){return jl(),null})))}function El(){if(null===Xa)return!1;var e=Xa;if(Xa=null,0!=(48&Ca))throw Error(r(331));var t=Ca;Ca|=32;var i=el;el=[];for(var s=0;s<i.length;s+=2){var o=i[s],n=i[s+1],a=o.destroy;if(o.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===n)throw Error(r(330));Pl(n,e)}}for(i=Ka,Ka=[],s=0;s<i.length;s+=2){o=i[s],n=i[s+1];try{var l=o.create;o.destroy=l()}catch(e){if(null===n)throw Error(r(330));Pl(n,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return Ca=t,Go(),!0}function Ol(e,t,i){hn(e,t=ca(0,t=ra(i,t),1)),t=cl(),null!==(e=dl(e,1))&&(Bt(e,1,t),pl(e,t))}function Pl(e,t){if(3===e.tag)Ol(e,e,t);else for(var i=e.return;null!==i;){if(3===i.tag){Ol(i,e,t);break}if(1===i.tag){var s=i.stateNode;if("function"==typeof i.type.getDerivedStateFromError||"function"==typeof s.componentDidCatch&&(null===Qa||!Qa.has(s))){var o=ua(i,e=ra(t,e),1);if(hn(i,o),o=cl(),null!==(i=dl(i,1)))Bt(i,1,o),pl(i,o);else if("function"==typeof s.componentDidCatch&&(null===Qa||!Qa.has(s)))try{s.componentDidCatch(t,e)}catch(e){}break}}i=i.return}}function Rl(e,t,i){var s=e.pingCache;null!==s&&s.delete(t),t=cl(),e.pingedLanes|=e.suspendedLanes&i,Da===e&&(ja&i)===i&&(4===Ea||3===Ea&&(62914560&ja)===ja&&500>Bo()-Ba?wl(e,0):Fa|=i),pl(e,t)}function Hl(e,t){var i=e.stateNode;null!==i&&i.delete(t),0==(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===Yo()?1:2:(0===nl&&(nl=Pa),0===(t=Ft(62914560&~nl))&&(t=4194304))),i=cl(),null!==(e=dl(e,t))&&(Bt(e,t,i),pl(e,i))}function Fl(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ul(e,t,i,s){return new Fl(e,t,i,s)}function Bl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Yl(e,t){var i=e.alternate;return null===i?((i=Ul(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Zl(e,t,i,s,o,n){var a=2;if(s=e,"function"==typeof e)Bl(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case I:return Vl(i.children,o,n,t);case O:a=8,o|=16;break;case k:a=8,o|=1;break;case N:return(e=Ul(12,i,t,8|o)).elementType=N,e.type=N,e.lanes=n,e;case D:return(e=Ul(13,i,t,o)).type=D,e.elementType=D,e.lanes=n,e;case A:return(e=Ul(19,i,t,o)).elementType=A,e.lanes=n,e;case P:return Wl(i,o,n,t);case R:return(e=Ul(24,i,t,o)).elementType=R,e.lanes=n,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case _:a=10;break e;case L:a=9;break e;case C:a=11;break e;case j:a=14;break e;case T:a=16,s=null;break e;case z:a=22;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Ul(a,i,t,o)).elementType=e,t.type=s,t.lanes=n,t}function Vl(e,t,i,s){return(e=Ul(7,e,s,t)).lanes=i,e}function Wl(e,t,i,s){return(e=Ul(23,e,s,t)).elementType=P,e.lanes=i,e}function Gl(e,t,i){return(e=Ul(6,e,null,t)).lanes=i,e}function $l(e,t,i){return(t=Ul(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ql(e,t,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ut(0),this.expirationTimes=Ut(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ut(0),this.mutableSourceEagerHydrationData=null}function ql(e,t,i){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==s?null:""+s,children:e,containerInfo:t,implementation:i}}function Xl(e,t,i,s){var o=t.current,n=cl(),a=ul(o);e:if(i){t:{if(Qe(i=i._reactInternals)!==i||1!==i.tag)throw Error(r(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(bo(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(r(171))}if(1===i.tag){var c=i.type;if(bo(c)){i=vo(i,c,l);break e}}i=l}else i=uo;return null===t.context?t.context=i:t.pendingContext=i,(t=un(n,a)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),hn(o,t),hl(o,a,n),a}function Jl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function ec(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}function tc(e,t,i){var s=null!=i&&null!=i.hydrationOptions&&i.hydrationOptions.mutableSources||null;if(i=new Ql(e,t,null!=i&&!0===i.hydrate),t=Ul(3,null,null,2===t?7:1===t?3:0),i.current=t,t.stateNode=i,ln(t),e[Js]=i.current,Ds(8===e.nodeType?e.parentNode:e),s)for(e=0;e<s.length;e++){var o=(t=s[e])._getVersion;o=o(t._source),null==i.mutableSourceEagerHydrationData?i.mutableSourceEagerHydrationData=[t,o]:i.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=i}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function sc(e,t,i,s,o){var n=i._reactRootContainer;if(n){var r=n._internalRoot;if("function"==typeof o){var a=o;o=function(){var e=Jl(r);a.call(e)}}Xl(t,r,e,o)}else{if(n=i._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var i;i=e.lastChild;)e.removeChild(i);return new tc(e,0,t?{hydrate:!0}:void 0)}(i,s),r=n._internalRoot,"function"==typeof o){var l=o;o=function(){var e=Jl(r);l.call(e)}}yl((function(){Xl(t,r,e,o)}))}return Jl(r)}function oc(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(r(200));return ql(e,t,null,i)}Va=function(e,t,i){var s=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||po.current)Or=!0;else{if(0==(i&s)){switch(Or=!1,t.tag){case 3:Wr(t),Gn();break;case 5:En(t);break;case 1:bo(t.type)&&Mo(t);break;case 4:Tn(t,t.stateNode.containerInfo);break;case 10:s=t.memoizedProps.value;var o=t.type._context;co(Xo,o._currentValue),o._currentValue=s;break;case 13:if(null!==t.memoizedState)return 0!=(i&t.child.childLanes)?Xr(e,t,i):(co(Pn,1&Pn.current),null!==(t=ia(e,t,i))?t.sibling:null);co(Pn,1&Pn.current);break;case 19:if(s=0!=(i&t.childLanes),0!=(64&e.flags)){if(s)return ta(e,t,i);t.flags|=64}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),co(Pn,Pn.current),s)break;return null;case 23:case 24:return t.lanes=0,Ur(e,t,i)}return ia(e,t,i)}Or=0!=(16384&e.flags)}else Or=!1;switch(t.lanes=0,t.tag){case 2:if(s=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=go(t,ho.current),nn(t,i),o=rr(null,t,s,e,o,i),t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,bo(s)){var n=!0;Mo(t)}else n=!1;t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,ln(t);var a=s.getDerivedStateFromProps;"function"==typeof a&&bn(t,s,a,e),o.updater=fn,t.stateNode=o,o._reactInternals=t,wn(t,s,e,i),t=Vr(null,t,s,!0,n,i)}else t.tag=0,Pr(null,t,o,i),t=t.child;return t;case 16:o=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=(n=o._init)(o._payload),t.type=o,n=t.tag=function(e){if("function"==typeof e)return Bl(e)?1:0;if(null!=e){if((e=e.$$typeof)===C)return 11;if(e===j)return 14}return 2}(o),e=qo(o,e),n){case 0:t=Yr(null,t,o,e,i);break e;case 1:t=Zr(null,t,o,e,i);break e;case 11:t=Rr(null,t,o,e,i);break e;case 14:t=Hr(null,t,o,qo(o.type,e),s,i);break e}throw Error(r(306,o,""))}return t;case 0:return s=t.type,o=t.pendingProps,Yr(e,t,s,o=t.elementType===s?o:qo(s,o),i);case 1:return s=t.type,o=t.pendingProps,Zr(e,t,s,o=t.elementType===s?o:qo(s,o),i);case 3:if(Wr(t),s=t.updateQueue,null===e||null===s)throw Error(r(282));if(s=t.pendingProps,o=null!==(o=t.memoizedState)?o.element:null,cn(e,t),pn(t,s,null,i),(s=t.memoizedState.element)===o)Gn(),t=ia(e,t,i);else{if((n=(o=t.stateNode).hydrate)&&(Fn=Ws(t.stateNode.containerInfo.firstChild),Hn=t,n=Un=!0),n){if(null!=(e=o.mutableSourceEagerHydrationData))for(o=0;o<e.length;o+=2)(n=e[o])._workInProgressVersionPrimary=e[o+1],$n.push(n);for(i=_n(t,null,s,i),t.child=i;i;)i.flags=-3&i.flags|1024,i=i.sibling}else Pr(e,t,s,i),Gn();t=t.child}return t;case 5:return En(t),null===e&&Zn(t),s=t.type,o=t.pendingProps,n=null!==e?e.memoizedProps:null,a=o.children,Bs(s,o)?a=null:null!==n&&Bs(s,n)&&(t.flags|=16),Br(e,t),Pr(e,t,a,i),t.child;case 6:return null===e&&Zn(t),null;case 13:return Xr(e,t,i);case 4:return Tn(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=Nn(t,null,s,i):Pr(e,t,s,i),t.child;case 11:return s=t.type,o=t.pendingProps,Rr(e,t,s,o=t.elementType===s?o:qo(s,o),i);case 7:return Pr(e,t,t.pendingProps,i),t.child;case 8:case 12:return Pr(e,t,t.pendingProps.children,i),t.child;case 10:e:{s=t.type._context,o=t.pendingProps,a=t.memoizedProps,n=o.value;var l=t.type._context;if(co(Xo,l._currentValue),l._currentValue=n,null!==a)if(l=a.value,0==(n=ls(l,n)?0:0|("function"==typeof s._calculateChangedBits?s._calculateChangedBits(l,n):1073741823))){if(a.children===o.children&&!po.current){t=ia(e,t,i);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var c=l.dependencies;if(null!==c){a=l.child;for(var u=c.firstContext;null!==u;){if(u.context===s&&0!=(u.observedBits&n)){1===l.tag&&((u=un(-1,i&-i)).tag=2,hn(l,u)),l.lanes|=i,null!==(u=l.alternate)&&(u.lanes|=i),on(l.return,i),c.lanes|=i;break}u=u.next}}else a=10===l.tag&&l.type===t.type?null:l.child;if(null!==a)a.return=l;else for(a=l;null!==a;){if(a===t){a=null;break}if(null!==(l=a.sibling)){l.return=a.return,a=l;break}a=a.return}l=a}Pr(e,t,o.children,i),t=t.child}return t;case 9:return o=t.type,s=(n=t.pendingProps).children,nn(t,i),s=s(o=rn(o,n.unstable_observedBits)),t.flags|=1,Pr(e,t,s,i),t.child;case 14:return n=qo(o=t.type,t.pendingProps),Hr(e,t,o,n=qo(o.type,n),s,i);case 15:return Fr(e,t,t.type,t.pendingProps,s,i);case 17:return s=t.type,o=t.pendingProps,o=t.elementType===s?o:qo(s,o),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,bo(s)?(e=!0,Mo(t)):e=!1,nn(t,i),vn(t,s,o),wn(t,s,o,i),Vr(null,t,s,!0,e,i);case 19:return ta(e,t,i);case 23:case 24:return Ur(e,t,i)}throw Error(r(156,t.tag))},tc.prototype.render=function(e){Xl(e,this._internalRoot,null,null)},tc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Xl(null,e,null,(function(){t[Js]=null}))},et=function(e){13===e.tag&&(hl(e,4,cl()),ec(e,4))},tt=function(e){13===e.tag&&(hl(e,67108864,cl()),ec(e,67108864))},it=function(e){if(13===e.tag){var t=cl(),i=ul(e);hl(e,i,t),ec(e,i)}},st=function(e,t){return t()},Ne=function(e,t,i){switch(t){case"input":if(ie(e,i),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var o=so(s);if(!o)throw Error(r(90));X(s),ie(s,o)}}}break;case"textarea":ce(e,i);break;case"select":null!=(t=i.value)&&re(e,!!i.multiple,t,!1)}},je=fl,Te=function(e,t,i,s,o){var n=Ca;Ca|=4;try{return Vo(98,e.bind(null,t,i,s,o))}finally{0===(Ca=n)&&(Za(),Go())}},ze=function(){0==(49&Ca)&&(function(){if(null!==tl){var e=tl;tl=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,pl(e,Bo())}))}Go()}(),jl())},Ee=function(e,t){var i=Ca;Ca|=2;try{return e(t)}finally{0===(Ca=i)&&(Za(),Go())}};var nc={Events:[to,io,so,De,Ae,jl,{current:!1}]},rc={findFiberByHostInstance:eo,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},ac={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{xo=lc.inject(ac),So=lc}catch(ge){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nc,t.createPortal=oc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw Error(r(268,Object.keys(e)))}return null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var i=Ca;if(0!=(48&i))return e(t);Ca|=1;try{if(e)return Vo(99,e.bind(null,t))}finally{Ca=i,Go()}},t.hydrate=function(e,t,i){if(!ic(t))throw Error(r(200));return sc(null,e,t,!0,i)},t.render=function(e,t,i){if(!ic(t))throw Error(r(200));return sc(null,e,t,!1,i)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(r(40));return!!e._reactRootContainer&&(yl((function(){sc(null,null,e,!1,(function(){e._reactRootContainer=null,e[Js]=null}))})),!0)},t.unstable_batchedUpdates=fl,t.unstable_createPortal=function(e,t){return oc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,i,s){if(!ic(i))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return sc(e,t,i,!1,s)},t.version="17.0.2"},116:(e,t,i)=>{!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=i(748)},43:(e,t,i)=>{i(347);var s=i(466),o=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var n=Symbol.for;o=n("react.element"),t.Fragment=n("react.fragment")}var r=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,i){var s,n={},c=null,u=null;for(s in void 0!==i&&(c=""+i),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,s)&&!l.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:o,type:e,key:c,ref:u,props:n,_owner:r.current}}t.jsx=c,t.jsxs=c},751:(e,t,i)=>{var s=i(347),o=60103,n=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var r=60109,a=60110,l=60112;t.Suspense=60113;var c=60115,u=60116;if("function"==typeof Symbol&&Symbol.for){var h=Symbol.for;o=h("react.element"),n=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),r=h("react.provider"),a=h("react.context"),l=h("react.forward_ref"),t.Suspense=h("react.suspense"),c=h("react.memo"),u=h("react.lazy")}var d="function"==typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g={};function b(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||m}function f(){}function y(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||m}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},f.prototype=b.prototype;var v=y.prototype=new f;v.constructor=y,s(v,b.prototype),v.isPureReactComponent=!0;var M={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,i){var s,n={},r=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(r=""+t.key),t)w.call(t,s)&&!x.hasOwnProperty(s)&&(n[s]=t[s]);var l=arguments.length-2;if(1===l)n.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];n.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===n[s]&&(n[s]=l[s]);return{$$typeof:o,type:e,key:r,ref:a,props:n,_owner:M.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var k=/\/+/g;function N(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(e,t,i,s,r){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case o:case n:l=!0}}if(l)return r=r(l=e),e=""===s?"."+N(l,0):s,Array.isArray(r)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),_(r,t,i,"",(function(e){return e}))):null!=r&&(I(r)&&(r=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(r,i+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(k,"$&/")+"/")+e)),t.push(r)),1;if(l=0,s=""===s?".":s+":",Array.isArray(e))for(var c=0;c<e.length;c++){var u=s+N(a=e[c],c);l+=_(a,t,i,u,r)}else if(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"==typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=_(a=a.value,t,i,u=s+N(a,c++),r);else if("object"===a)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function L(e,t,i){if(null==e)return e;var s=[],o=0;return _(e,s,"","",(function(e){return t.call(i,e,o++)})),s}function C(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var D={current:null};function A(){var e=D.current;if(null===e)throw Error(p(321));return e}var j={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:s};t.Children={map:L,forEach:function(e,t,i){L(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(p(143));return e}},t.Component=b,t.PureComponent=y,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,i){if(null==e)throw Error(p(267,e));var n=s({},e.props),r=e.key,a=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,l=M.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)w.call(t,u)&&!x.hasOwnProperty(u)&&(n[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)n.children=i;else if(1<u){c=Array(u);for(var h=0;h<u;h++)c[h]=arguments[h+2];n.children=c}return{$$typeof:o,type:e.type,key:r,ref:a,props:n,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:r,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:C}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,i){return A().useImperativeHandle(e,t,i)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,i){return A().useReducer(e,t,i)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.2"},466:(e,t,i)=>{e.exports=i(751)},823:(e,t,i)=>{e.exports=i(43)},794:(e,t)=>{var i,s,o,n;if("object"==typeof performance&&"function"==typeof performance.now){var r=performance;t.unstable_now=function(){return r.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}if("undefined"==typeof window||"function"!=typeof MessageChannel){var c=null,u=null,h=function(){if(null!==c)try{var e=t.unstable_now();c(!0,e),c=null}catch(e){throw setTimeout(h,0),e}};i=function(e){null!==c?setTimeout(i,0,e):(c=e,setTimeout(h,0))},s=function(e,t){u=setTimeout(e,t)},o=function(){clearTimeout(u)},t.unstable_shouldYield=function(){return!1},n=t.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,b=null,f=-1,y=5,v=0;t.unstable_shouldYield=function(){return t.unstable_now()>=v},n=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<e?Math.floor(1e3/e):5};var M=new MessageChannel,w=M.port2;M.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();v=e+y;try{b(!0,e)?w.postMessage(null):(g=!1,b=null)}catch(e){throw w.postMessage(null),e}}else g=!1},i=function(e){b=e,g||(g=!0,w.postMessage(null))},s=function(e,i){f=d((function(){e(t.unstable_now())}),i)},o=function(){p(f),f=-1}}function x(e,t){var i=e.length;e.push(t);e:for(;;){var s=i-1>>>1,o=e[s];if(!(void 0!==o&&0<k(o,t)))break e;e[s]=t,e[i]=o,i=s}}function S(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var i=e.pop();if(i!==t){e[0]=i;e:for(var s=0,o=e.length;s<o;){var n=2*(s+1)-1,r=e[n],a=n+1,l=e[a];if(void 0!==r&&0>k(r,i))void 0!==l&&0>k(l,r)?(e[s]=l,e[a]=i,s=a):(e[s]=r,e[n]=i,s=n);else{if(!(void 0!==l&&0>k(l,i)))break e;e[s]=l,e[a]=i,s=a}}}return t}return null}function k(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}var N=[],_=[],L=1,C=null,D=3,A=!1,j=!1,T=!1;function z(e){for(var t=S(_);null!==t;){if(null===t.callback)I(_);else{if(!(t.startTime<=e))break;I(_),t.sortIndex=t.expirationTime,x(N,t)}t=S(_)}}function E(e){if(T=!1,z(e),!j)if(null!==S(N))j=!0,i(O);else{var t=S(_);null!==t&&s(E,t.startTime-e)}}function O(e,i){j=!1,T&&(T=!1,o()),A=!0;var n=D;try{for(z(i),C=S(N);null!==C&&(!(C.expirationTime>i)||e&&!t.unstable_shouldYield());){var r=C.callback;if("function"==typeof r){C.callback=null,D=C.priorityLevel;var a=r(C.expirationTime<=i);i=t.unstable_now(),"function"==typeof a?C.callback=a:C===S(N)&&I(N),z(i)}else I(N);C=S(N)}if(null!==C)var l=!0;else{var c=S(_);null!==c&&s(E,c.startTime-i),l=!1}return l}finally{C=null,D=n,A=!1}}var P=n;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){j||A||(j=!0,i(O))},t.unstable_getCurrentPriorityLevel=function(){return D},t.unstable_getFirstCallbackNode=function(){return S(N)},t.unstable_next=function(e){switch(D){case 1:case 2:case 3:var t=3;break;default:t=D}var i=D;D=t;try{return e()}finally{D=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=P,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=D;D=e;try{return t()}finally{D=i}},t.unstable_scheduleCallback=function(e,n,r){var a=t.unstable_now();switch(r="object"==typeof r&&null!==r&&"number"==typeof(r=r.delay)&&0<r?a+r:a,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:L++,callback:n,priorityLevel:e,startTime:r,expirationTime:l=r+l,sortIndex:-1},r>a?(e.sortIndex=r,x(_,e),null===S(N)&&e===S(_)&&(T?o():T=!0,s(E,r-a))):(e.sortIndex=l,x(N,e),j||A||(j=!0,i(O))),e},t.unstable_wrapCallback=function(e){var t=D;return function(){var i=D;D=t;try{return e.apply(this,arguments)}finally{D=i}}}},767:(e,t,i)=>{e.exports=i(794)},99:(e,t,i)=>{i.d(t,{Z:()=>a});var s=i(738),o=i.n(s),n=i(705),r=i.n(n)()(o());r.push([e.id,".builder{position:absolute;left:0;width:60%;top:0;bottom:0}.runner{position:absolute;background-color:#fff;left:60%;right:0;top:0;bottom:0;overflow:hidden;scroll-behavior:smooth;-webkit-overflow-scrolling:touch;opacity:0;pointer-events:none;transition:opacity .25s ease-out}.runner>iframe{pointer-events:none}.runner.visible{opacity:1;pointer-events:auto}.runner.visible>iframe{pointer-events:auto}",""]);const a=r},379:e=>{var t=[];function i(e){for(var i=-1,s=0;s<t.length;s++)if(t[s].identifier===e){i=s;break}return i}function s(e,s){for(var n={},r=[],a=0;a<e.length;a++){var l=e[a],c=s.base?l[0]+s.base:l[0],u=n[c]||0,h="".concat(c," ").concat(u);n[c]=u+1;var d=i(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)t[d].references++,t[d].updater(p);else{var m=o(p,s);s.byIndex=a,t.splice(a,0,{identifier:h,updater:m,references:1})}r.push(h)}return r}function o(e,t){var i=t.domAPI(t);return i.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;i.update(e=t)}else i.remove()}}e.exports=function(e,o){var n=s(e=e||[],o=o||{});return function(e){e=e||[];for(var r=0;r<n.length;r++){var a=i(n[r]);t[a].references--}for(var l=s(e,o),c=0;c<n.length;c++){var u=i(n[c]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}n=l}}},569:e=>{var t={};e.exports=function(e,i){var s=function(e){if(void 0===t[e]){var i=document.querySelector(e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,i)=>{e.exports=function(e){var t=i.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(i){!function(e,t,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var o=void 0!==i.layer;o&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,o&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var n=i.sourceMap;n&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,i)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function i(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={id:s,exports:{}};return e[s](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{i.r(s);var e,t,o=i(466),n=i(116),r=Object.freeze({__proto__:null,get AES(){return ft},get Collection(){return Rl},get Components(){return ec},get Contracts(){return tc},get DOM(){return mr},get Drawings(){return ic},get Forms(){return rc},get Layers(){return pa},get Layouts(){return Xh},get SHA2(){return oi},get Slots(){return Ki},get Touch(){return Jh},get Markdown(){return ts},get Application(){return No},get Await(){return Kr},get Callback(){return Jr},get Rectangles(){return Ci},get Coordinate(){return Ii},get Dimensions(){return Ni},get Spacing(){return Li},get Namespaces(){return cs},get Branch(){return js},get Branches(){return Hi},get Cluster(){return Ms},get Clusters(){return xs},get Condition(){return Ds},get Conditions(){return As},get Node(){return ys},get detectChange(){return yi},get mountNamespace(){return us},get unmountNamespace(){return hs},get lookupVariable(){return ms},get L10n(){return il},get pgettext(){return ol},get npgettext(){return sl},get _(){return nl},get _n(){return rl},get LayerRenderer(){return lc},get LayerLayout(){return ac},get MoveableLayout(){return cc},get ConditionBlock(){return Zs},get NodeBlock(){return Sa},get populateSlots(){return xc},get insertVariable(){return Ic},get slotInsertAction(){return kc},get getSlotIcon(){return Sc},get populateVariables(){return Kh},get isVariable(){return Fs},get getMetadata(){return td},get markdownifyToString(){return Us},get makeMarkdownSafe(){return Bs},get Fonts(){return id},get linearicon(){return xl},get linearicons(){return wl},get lineariconStyle(){return Sl},get REGEX_IS_URL(){return Nc},get getHelpTopic(){return pc},get EditorOrchestratorNodeBlock(){return Pc},get EditorOrchestrator(){return bl},get SlotsOrchestrator(){return Zi},get ConditionsOrchestrator(){return hc},get affects(){return od},get assigned(){return Ts},get definition(){return Mi},get destroyed(){return Es},get detached(){return Os},get slots(){return Ps},get unassigned(){return Rs},get upgraded(){return Hs},get conditions(){return nd},get created(){return rd},get collection(){return ad},get deleted(){return ld},get editor(){return cd},get supplies(){return Na},get metadata(){return ed},get name(){return ud},get icon(){return hd},get alias(){return dd},get score(){return pd},get title(){return md},get menu(){return gd},get width(){return bd},get refreshed(){return fd},get renamed(){return yd},get reordered(){return vd},get tripetto(){return Ia},get DEFAULT(){return np},get arrayItem(){return R},get arraySize(){return P},get assert(){return Z},get call(){return pe},get callAsync(){return me},get callBind(){return fe},get callEx(){return be},get callFunction(){return ye},get callPromise(){return ge},get cancelFrame(){return _e},get cancelInterval(){return Te},get cancelPromise(){return Ie},get cancelTick(){return we},get cancelTimeout(){return Ce},get cancelUIInterval(){return Ee},get cancelUITimeout(){return Ae},get cast(){return V},get castToBoolean(){return Q},get castToFloat(){return $},get castToNumber(){return G},get castToString(){return W},get clone(){return q},get compare(){return K},get count(){return ae},get createInstanceOf(){return Qe},get destroy(){return $e},get each(){return ee},get eachReverse(){return te},get extend(){return X},get extendImmutable(){return J},get filter(){return ce},get find(){return de},get findFirst(){return ue},get findLast(){return he},get firstArrayItem(){return H},get forEach(){return le},get get(){return Be},get getAny(){return Ye},get getBoolean(){return Ze},get getFloat(){return Ge},get getNumber(){return We},get getString(){return Ve},get has(){return oe},get hasOneOrMore(){return re},get hasOnly(){return ne},get isArray(){return z},get isArrayOrCollection(){return O},get isBoolean(){return T},get isCollection(){return E},get isDate(){return U},get isDefined(){return S},get isError(){return Y},get isFilledString(){return C},get isFloat(){return j},get isFunction(){return N},get isNull(){return I},get isNumber(){return D},get isNumberFinite(){return A},get isObject(){return k},get isRegEx(){return B},get isString(){return _},get isUndefined(){return x},get lastArrayItem(){return F},get map(){return ie},get noop(){return w},get reduce(){return se},get scheduleAction(){return He},get scheduleAndCancelFrame(){return Ne},get scheduleAndCancelPromise(){return Se},get scheduleAndCancelTick(){return Me},get scheduleAnimation(){return Pe},get scheduleEvent(){return Re},get scheduleFrame(){return ke},get scheduleInterval(){return je},get scheduleNumberOfFrames(){return Oe},get schedulePromise(){return xe},get scheduleTick(){return ve},get scheduleTimeout(){return Le},get scheduleUIInterval(){return ze},get scheduleUITimeout(){return De},get set(){return Fe},get setAny(){return Ue},get stringLength(){return L},get Console(){return qe},get Environment(){return Xe},get Num(){return e},get Str(){return t},get DateTime(){return M},get Flags(){return Je},get Enumerator(){return l},get Debounce(){return tt},get Limiter(){return Ke},get Throttle(){return et},get Stack(){return it},get DEBUG(){return st},get disableDebugging(){return nt},get enableDebugging(){return ot},get NAME(){return rp},get VERSION(){return ap},get WEBSITE(){return lp},get DOCS(){return cp},get Builder(){return hp}});!function(e){function t(e,t){const i=Math.pow(10,t||0);return A(e)?Math.round(G((e*i).toFixed(1)))/i:0}e.round=function(e){return A(e)?Math.round(e):0},e.floor=function(e){return A(e)?Math.floor(e):0},e.ceil=function(e){return A(e)?Math.ceil(e):0},e.conform=t,e.positive=function(e){return A(e)&&e>0?e:0},e.negative=function(e){return A(e)&&e<0?e:0},e.max=function(e,t){return A(e)&&A(t)?Math.max(e,t):A(e)?e:A(t)?t:0},e.maxL=function(...e){const t=P(e);let i=NaN;if(t>0)for(let s=0;s<t;s++){const t=e[s];A(t)&&(!A(i)||t>i)&&(i=t)}return A(i)?i:0},e.min=function(e,t){return A(e)&&A(t)?Math.min(e,t):A(e)?e:A(t)?t:0},e.minL=function(...e){const t=P(e);let i=NaN;if(t>0)for(let s=0;s<t;s++){const t=e[s];A(t)&&(!A(i)||t<i)&&(i=t)}return A(i)?i:0},e.range=function(e,t,i){return A(e)?(A(i)&&t>i&&(t=i),A(t)&&e<t?t:A(i)&&e>i?i:e):A(t)?t:A(i)?i:0},e.inRange=function(e,t,i,s=!0,o=!1){return A(e)&&(s?e>=t:e>t)&&(o?e<=i:e<i)},e.format=function(e,i=0,s=",",o=".",n="-"){let r,a,l,c="";if(-1!==`${e="auto"===i?$(e):t($(e),i)}`.indexOf("e"))if(-1!==`${e}`.indexOf("e-")){const t=e;for(let i=20;i>=0&&(e=t.toFixed(i).replace(/(0*$)/g,"")||"0",parseFloat(e)!==t);i--);}else e=e<0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER;if(r=W(e).replace("-",n).split("."),a=r[0],l=P(r)>=2?r[1]:"",C(s))for(let e=L(a)-1,t=0;e>=0;e--)c=a.charAt(e)+(3===t&&a.charAt(e)!==n?s:"")+c,3===t&&(t=0),t++;else c=a;if(("auto"===i||i>0)&&((l||"auto"!==i)&&(c+=o+l),"auto"!==i))for(i-=L(l);i>0;)c+="0",i--;return c}}(e||(e={})),function(e){function t(e){return C(e)?e.toLowerCase():""}function i(e){return C(e)?e.replace(/(^\s*)|(\s*$)/g,""):""}function s(e){return C(e)?e.replace(/(\s*$)/g,""):""}function o(e){return C(e)?e.replace(/[^\S\r\n\.]{2,}/g," ").replace(/\n[^\S\r\n\.]/g,"\n"):""}function n(e){return o(i(e))}function r(e,t,i=""){return e=W(e),A(t)&&t>0&&t<L(e)?C(i)?s(e.substr(0,t))+i:e.substr(0,t):e}function a(e,i,s="",o=!1){let n="",r=0;return e=W(e),i=W(i),ee(o?t(e).split(t(i)):e.split(i),(t=>{const o=L(t);n+=(r>0?s:"")+e.substr(r,o),r+=o+L(i)})),n}function l(e,t="",i,...s){let o="";if(e){let a,l;E(e)?a=e:z(e)||(l=Object.keys(e));const c=(l||a||e).length;for(let u=0;u<c;u++)o+=(""===o?"":t)+W(i?pe(i,...(n=l?l[u]:u,r=s.slice(0),_(n)?r.unshift(e[n]):a?r.unshift(a.item(n)):r.unshift(e[n]),r)):l?e[l[u]]:a?a.item(u):e[u])}var n,r;return o}e.lowercase=t,e.uppercase=function(e){return C(e)?e.toUpperCase():""},e.capitalize=function(e,i="first-character",s=!1){if(s&&(e=t(e)),C(e)){const t="each-sentence"===i?e.split("."):[e];return ee(t,(e=>{let t="";if("each-word"!==i){let i=e.toString(),s=0;for(;s<L(i);){const e=i.charAt(s);if(" "!==e&&"\t"!==e&&"\r"!==e&&"\n"!==e&&"."!==e){i=i.substr(0,s)+i.substr(s,1).toUpperCase()+i.substr(s+1);break}s++}t+=(0===s?" ":"")+i}else t=e.replace(/(^|[\s`~!@#$%^&+\-*=_()[\]{};:'"\\|,<.>\/?])[^\s`~!@#$%^&+\-*=_()[\]{};:'"\\|,<.>\/?]/g,(e=>e.toUpperCase()));return t}),{replace:!0}),n(l(t,"."))}return""},e.trim=i,e.trimLeft=function(e){return C(e)?e.replace(/(^\s*)/g,""):""},e.trimRight=s,e.trimMultiple=o,e.sanitize=n,e.removeWhitespaces=function(e){return C(e)?e.replace(/\s/g,""):""},e.limit=r,e.replace=a,e.replaceMultiple=function(e,t,i,s){return e=W(e),ee(t,(t=>{e=a(e,t,i,s)})),e},e.makeHTMLSafe=function(e){return W(e).replace(/[<>]/g,(e=>"<"===e?"&lt;":"&gt;"))},e.CRLFToHTML=function(e){return W(e).replace(/(\r\n|[\r\n])/g,"<br />")},e.iterateToString=l,e.extract=function(e,i){const s=W(i.left);if(e=W(e),C(s)){const o=(i.ignoreCase?t(e):e).indexOf(i.ignoreCase?t(s):s);if(-1!==o&&""!==(e=e.substr(o+L(s)))){const s=C(i.right)?i.fromEnd?(i.ignoreCase?t(e):e).lastIndexOf(i.ignoreCase?t(i.right):i.right):(i.ignoreCase?t(e):e).indexOf(i.ignoreCase?t(i.right):i.right):L(e);if(-1!==s)return e.substr(0,s)}}return""},e.fill=function(e,t){let i="";for(e=W(e),t=G(t);t>0;)i+=e,t--;return i},e.padLeft=function(e,t,i,s,o){let n=W(o||A(e)?G(e):e);if(_(t)&&A(i)&&L(t)>=1){let r,a="";if(r=(o||A(e))&&"-"===n.charAt(0),s&&L(n)>i)return n.substr(L(n)-i);if(L(n)>=i)return n;r&&(n=n.substr(1));do{a+=t}while(L(a)<i);return(r?"-":"")+(a+n).substr(L(a+n)+(r?1:0)-i)}return n},e.padRight=function(e,t,i,s){let o=W(e);if(_(t)&&A(i)&&L(t)>=1){if(o=W(o),s&&L(o)>i)return r(o,i);if(L(o)>=i)return o;for(;L(o)<i;)o=r(o+t,i)}return o},e.djb2Hash=function(e,t=""){const i=L(e);let s=0,o=5381;for(;s<i;)o=33*o^e.charCodeAt(s),s++;return t+(o>>>0).toString(36)}}(t||(t={}));class a{constructor(e){this.m_fnScheduler=e,this.m_pStack=[],this.m_nCall=0,this.m_nOffset=0}call(){const e=this.m_pStack.length;for(let t=0;t<e;t++){const e=this.m_pStack[t];e&&e.callee&&e.callee(...e.arguments)}this.m_pStack.splice(0,e),this.m_pStack.length>0?(this.m_nOffset=this.m_nCall-this.m_pStack.length+1,this.m_fnScheduler((()=>this.call()))):this.m_nOffset=0}schedule(e,...t){return e?(this.m_nCall++,this.m_pStack.push({callee:e,arguments:t}),0===this.m_nOffset&&(this.m_nOffset=this.m_nCall,this.m_fnScheduler((()=>this.call()))),this.m_nCall):0}cancel(e){this.m_nOffset>0&&e>=this.m_nOffset&&e<=this.m_nCall&&(this.m_pStack[e-this.m_nOffset]=void 0)}}class l{constructor(){this.m_nEnumerator=0}static get n(){return this.m_nEnumerator===Number.MAX_VALUE&&(this.m_nEnumerator=0),++this.m_nEnumerator}get n(){return this.m_nEnumerator===Number.MAX_VALUE&&(this.m_nEnumerator=0),++this.m_nEnumerator}set n(e){e>this.m_nEnumerator&&e<=Number.MAX_VALUE&&(this.m_nEnumerator=e)}static recycle(){this.m_nEnumerator=Number.MAX_VALUE}recycle(){this.m_nEnumerator=Number.MAX_VALUE}}l.m_nEnumerator=0;const c="undefined"!=typeof process&&process&&process.nextTick?e=>{process.nextTick(e)}:"undefined"!=typeof Promise&&Promise?e=>{Promise.resolve().then(e)}:e=>{setTimeout(e,0)},u="undefined"!=typeof Promise&&Promise?e=>{Promise.resolve().then(e)}:"undefined"!=typeof process&&process&&process.nextTick?e=>{process.nextTick(e)}:e=>{setTimeout(e,0)},h="undefined"!=typeof requestAnimationFrame?e=>requestAnimationFrame(e)||0:e=>setTimeout(e,1e3/60)||0,d="undefined"!=typeof window,p="undefined"==typeof window&&"undefined"!=typeof process,m="undefined"!=typeof self&&"function"==typeof postMessage,g=new a(c),b=new a(h),f=new a(u),y={},v=new l;class M{constructor(e=new Date){e instanceof M?this.m_pDate=new Date(e.time):U(e)?this.m_pDate=new Date(e.getTime()):this.m_pDate=new Date(e)}static get now(){return Date.now()}static get precise(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()}static get UTC(){return this.now-60*(new Date).getTimezoneOffset()*1e3}static get today(){const e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()}static get UTCToday(){const e=new Date,t=new Date;return t.setUTCFullYear(e.getFullYear()),t.setUTCMonth(e.getMonth()),t.setUTCDate(e.getDate()),t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),t.getTime()}static isFuture(e){return this.now<e}static isPast(e){return this.now>=e}static elapsed(e,t=!1){return(Q(t)?this.precise:this.now)-e}static timerReset(){const e=this.m_nStamp;return this.m_nStamp=this.precise,e}static get timerElapsed(){return this.precise-this.timerReset()}static get timerStamp(){return this.formatElapsed()}static format(e="dd-MM-yyyy HH:mm:ss.SSS",i=this.now,s=!1,o){const n=new Date(i);return t.sanitize(e.replace(/('[^']+')|('')|(HH)|(H)|(hh)|(h)|(mm)|(m)|(ss)|(s)|(SSS)|(S)|(zzzz)|(z)|(dd)|(d)|(MMMMM)|(MMMM)|(MMM)|(MM)|(M)|(LLLLL)|(LLLL)|(LLL)|(EEEEE)|(EEEE)|(EEE)|(EE)|(E)|(ccccc)|(cccc)|(ccc)|(cc)|(yyyy)|(yy)|(y)|(a)/g,(e=>{switch(e){case"HH":return t.padLeft(W(s?n.getUTCHours():n.getHours()),"0",2);case"H":return W(s?n.getUTCHours():n.getHours());case"hh":return t.padLeft(W(((s?n.getUTCHours():n.getHours())+11)%12+1),"0",2);case"h":return W(((s?n.getUTCHours():n.getHours())+11)%12+1);case"a":return o?W((s?n.getUTCHours():n.getHours())>=12?o.PM:o.AM):"";case"mm":return t.padLeft(W(s?n.getUTCMinutes():n.getMinutes()),"0",2);case"m":return W(s?n.getUTCMinutes():n.getMinutes());case"ss":return t.padLeft(W(s?n.getUTCSeconds():n.getSeconds()),"0",2);case"s":return W(s?n.getUTCSeconds():n.getSeconds());case"SSS":return t.padLeft(W(s?n.getUTCMilliseconds():n.getMilliseconds()),"0",3);case"S":return W(s?n.getUTCMilliseconds():n.getMilliseconds());case"z":case"zzzz":return"";case"dd":return t.padLeft(W(s?n.getUTCDate():n.getDate()),"0",2);case"d":return W(s?n.getUTCDate():n.getDate());case"yyyy":case"y":return W(s?n.getUTCFullYear():n.getFullYear());case"yy":return t.padLeft(W(s?n.getUTCFullYear():n.getFullYear()),"0",2,!0);case"MMMMM":return W(R(o?o.monthsFormattedNarrow:void 0,s?n.getUTCMonth():n.getMonth(),"?"));case"MMMM":return W(R(o?o.monthsFormattedWide:void 0,s?n.getUTCMonth():n.getMonth(),"?"));case"MMM":return W(R(o?o.monthsFormattedAbbreviated:void 0,s?n.getUTCMonth():n.getMonth(),"?"));case"MM":return t.padLeft(W((s?n.getUTCMonth():n.getMonth())+1),"0",2);case"M":return W((s?n.getUTCMonth():n.getMonth())+1);case"LLLLL":return W(R(o?o.monthsNominativeNarrow:void 0,s?n.getUTCMonth():n.getMonth(),"?"));case"LLLL":return W(R(o?o.monthsNominativeWide:void 0,s?n.getUTCMonth():n.getMonth(),"?"));case"LLL":return W(R(o?o.monthsNominativeAbbreviated:void 0,s?n.getUTCMonth():n.getMonth(),"?"));case"EEEEE":return W(R(o?o.weekdaysFormattedNarrow:void 0,s?n.getUTCDay():n.getDay(),"?"));case"EEEE":return W(R(o?o.weekdaysFormattedWide:void 0,s?n.getUTCDay():n.getDay(),"?"));case"EEE":return W(R(o?o.weekdaysFormattedAbbreviated:void 0,s?n.getUTCDay():n.getDay(),"?"));case"EE":return W(R(o?o.weekdaysFormattedShort:void 0,s?n.getUTCDay():n.getDay(),"?"));case"E":return W(s?n.getUTCDay():n.getDay());case"ccccc":return W(R(o?o.weekdaysNominativeNarrow:void 0,s?n.getUTCDay():n.getDay(),"?"));case"cccc":return W(R(o?o.weekdaysNominativeWide:void 0,s?n.getUTCDay():n.getDay(),"?"));case"ccc":return W(R(o?o.weekdaysNominativeAbbreviated:void 0,s?n.getUTCDay():n.getDay(),"?"));case"cc":return W(R(o?o.weekdaysNominativeShort:void 0,s?n.getUTCDay():n.getDay(),"?"));case"''":return"'"}return e.replace(/'/g,"")})))}static formatElapsed(i="H'h':mm'm':ss's'.SSS'ms'.uuu's'",s,o,n){let r,a,l,c,u,h;return s=e.conform($(s,this.timerElapsed),3),r=Math.floor(s/36e5),a=Math.floor(s%36e5/6e4),l=Math.floor(s%36e5%6e4/1e3),h=W(e.conform(s%36e5%6e4%1e3,3)).split("."),c=h[0],u=P(h)>=2?h[1]:"0",t.sanitize(i.replace(/('[^']+')|('')|(HH)|(H)|(hh)|(h)|(mm)|(m)|(ss)|(s)|(SSS)|(S)|(uuu)|(u)|(zzzz)|(z)|(dd)|(d)|(MMMMM)|(MMMM)|(MMM)|(MM)|(M)|(LLLLL)|(LLLL)|(LLL)|(EEEEE)|(EEEE)|(EEE)|(EE)|(E)|(ccccc)|(cccc)|(ccc)|(cc)|(yyyy)|(yy)|(y)|(a)/g,(e=>{switch(e){case"HH":return t.padLeft(W(r),"0",2);case"H":return W(r);case"hh":return t.padLeft(W((r+11)%12+1),"0",2);case"h":return W((r+11)%12+1);case"a":return W(r>=12?n:o);case"mm":return t.padLeft(W(a),"0",2);case"m":return W(a);case"ss":return t.padLeft(W(l),"0",2);case"s":return W(l);case"SSS":return t.padLeft(c,"0",3);case"S":return c;case"uuu":return t.padLeft(u,"0",3);case"u":return u;case"z":case"zzzz":return"";case"''":return"'"}return e.replace(/'/g,"")})))}static get log(){return this.format("dd-MM-yyyy HH:mm:ss.SSS")}static get logTime(){return this.format("HH:mm:ss.SSS")}get date(){return this.m_pDate}get time(){return this.date.getTime()}set time(e){this.m_pDate=new Date(e)}}function w(){}function x(e){return void 0===e}function S(e){return!x(e)}function I(e){return x(e)||"object"==typeof e&&null===e}function k(e){return"object"==typeof e&&null!==e&&!z(e)}function N(e){return"function"==typeof e}function _(e){return"string"==typeof e}function L(e){return _(e)?e.length:0}function C(e){return L(e)>0}function D(e){return"number"==typeof e&&!isNaN(e)}function A(e,t,i){return"number"==typeof e&&isFinite(e)&&("number"!=typeof t||e>=t)&&("number"!=typeof i||e<=i)}function j(e,t,i){return"number"==typeof e&&isFinite(e)&&e%1!=0&&("number"!=typeof t||e>=t)&&("number"!=typeof i||e<=i)}function T(e){return"boolean"==typeof e}function z(e){return Array.isArray(e)}function E(e){return(k(e)||z(e)||N(e))&&"number"==typeof e.length&&"function"==typeof e.item}function O(e){return z(e)||E(e)}function P(e){return z(e)||E(e)?e.length:k(e)?P(Object.keys(e)):0}function R(e,t,i){if(t=G(t),e)if(z(e)){if(t>=0&&t<P(e))return e[t]}else if(E(e)){if(t>=0&&t<P(e))return e.item(t)}else if(k(e)){const i=Object.keys(e);if(t>=0&&t<P(i))return e[i[t]]}return S(i)?i:void 0}function H(e,t){if(e)if(z(e)){if(P(e)>0)return e[0]}else if(E(e)){if(P(e)>0)return e.item(0)}else if(k(e)){const t=Object.keys(e);if(P(t)>0)return e[t[0]]}return S(t)?t:void 0}function F(e,t){if(e)if(z(e)){const t=P(e);if(t>0)return e[t-1]}else if(E(e)){const t=P(e);if(t>0)return e.item(t-1)}else if(k(e)){const t=Object.keys(e),i=P(t);if(i>0)return e[t[i-1]]}return S(t)?t:void 0}function U(e){return k(e)&&"[object Date]"===Object.prototype.toString.call(e)}function B(e){return k(e)&&"[object RegExp]"===Object.prototype.toString.call(e)}function Y(e){return e instanceof Error}function Z(e,t){if(I(e))throw new Error(t||"Assert failed!");return e}function V(e){return e}function W(e,t){return _(e)?e:S(e)&&!I(e)&&N(e.toString)?e.toString():_(t)?t:""}function G(e,t){if(A(e))return Math.round(e);if(T(e))return e?1:0;if(S(e)&&!I(e)&&N(e.toString)){const t=parseFloat(e.toString().replace(/[^-e\d.]/g,""));if(A(t))return Math.round(t)}return A(t)?Math.round(t):0}function $(e,t){if(A(e))return parseFloat(`${e}`);if(T(e))return e?1:0;if(S(e)&&!I(e)&&N(e.toString)){const t=parseFloat(e.toString().replace(/[^-e\d.]/g,""));if(A(t))return t}return A(t)?t:0}function Q(e,t){if(T(e))return e;if(A(e))return!!e;if(S(e)&&!I(e)&&N(e.toString)){const t=e.toString();return!("0"===t||"false"===t.toLowerCase())}return!!t}function q(e){return Object.create(e)}function X(e,...t){const i=e;return ee(t,(e=>{ee(e,((e,t)=>{k(e)&&k(i[t])?X(i[t],e):i[t]=e}),{keys:!0})})),i}function J(...e){const t={};return ee(e,(e=>{ee(e,((e,i)=>{k(e)&&k(t[i])?t[i]=J(t[i],e):t[i]=e}),{keys:!0})})),t}function K(e,t,i){if(k(e)||z(e)){let s,o,n=!1,r=!1;if(k(e)!==k(t)||z(e)!==z(t))return!1;if(E(e)?n=!0:z(e)||(s=Object.keys(e)),E(t)?r=!0:z(t)||(o=Object.keys(t)),n!==r||z(s)!==z(o)||(s||e).length!==(o||t).length)return!1;const a=(s||e).length;for(let l=0;l<a;l++){const a=s?s[l]:l,c=o?o[l]:l;if(a!==c||!K(n?e.item(a):e[a],r?t.item(c):t[c],i))return!1}return!0}return!(typeof e!=typeof t||I(e)!==I(t)||i&&e!==t)}function ee(e,t,i){if(e&&t){const s=i&&i.arguments?i.arguments:void 0,o=!(!i||!i.replace);let n;if(n=i&&i.keys?s?(e,i)=>t(e,i,...s):(e,i)=>t(e,i):s?e=>t(e,...s):e=>t(e),z(e))e.forEach(((t,i)=>{const s=n(t,i);o&&(e[i]=s)}));else if(E(e)){const t=e,i=t.length;for(let e=0;e<i;e++)n(t.item(e),e)}else Object.keys(e).forEach((t=>{const i=n(e[t],t);o&&(e[t]=i)}))}return e}function te(e,t,i){if(e){let n,r;E(e)?n=e:z(e)||(r=Object.keys(e));for(let a=(r||n||e).length-1;a>=0;a--){const l=pe(t,...(s=r?r[a]:a,o=i&&i.arguments?i.arguments.slice(0):[],i&&i.keys&&o.unshift(s),_(s)?o.unshift(e[s]):n?o.unshift(n.item(s)):o.unshift(e[s]),o));i&&i.replace&&!n&&(r?e[r[a]]=l:e[a]=l)}}var s,o;return e}function ie(e,t,...i){const s=[];if(e){let r,a;E(e)?r=e:z(e)||(a=Object.keys(e));const l=(a||r||e).length;for(let c=0;c<l;c++)s.push(pe(t,...(o=a?a[c]:c,n=i.slice(0),_(o)?n.unshift(e[o]):r?n.unshift(r.item(o)):n.unshift(e[o]),n)))}var o,n;return s}function se(e,t,i,...s){if(e){let r,a;E(e)?r=e:z(e)||(a=Object.keys(e));const l=(a||r||e).length;for(let c=0;c<l;c++)i=pe(t,...(o=a?a[c]:c,n=s.slice(0),_(o)?n.unshift(e[o]):r?n.unshift(r.item(o)):n.unshift(e[o]),n.unshift(i),n))}var o,n;return i}function oe(e,t,i=!1){if(e){let s,o;E(e)?s=e:z(e)||(o=Object.keys(e));const n=(o||s||e).length;for(let r=0;r<n;r++){let n=!1;if(n=Q(pe(t,o?e[o[r]]:s?s.item(r):e[r])),i===n)return i}return!i}return!1}function ne(e,t){return oe(e,t,!1)}function re(e,t){return oe(e,t,!0)}function ae(e,t){let i=0;if(e){let s,o;E(e)?s=e:z(e)||(o=Object.keys(e));const n=(o||s||e).length;for(let r=0;r<n;r++){let n=!0;N(t)&&(n=Q(pe(t,o?e[o[r]]:s?s.item(r):e[r]))),n&&i++}}return i}function le(e,t,i){const s=!(!i||"first"!==i.return),o=!(!i||"last"!==i.return);let n;if(i&&i.return&&"matches"!==i.return||(n=[]),e){let l,c;E(e)?l=e:z(e)||(c=Object.keys(e));const u=(c||l||e).length;for(let h=o?u-1:0;o&&h>=0||!o&&h<u;o?h--:h++){let u=!0;if(u=Q(pe(t,c?e[c[h]]:l?l.item(h):e[h])),u){if(i&&N(i.do)){const t=pe(i.do,...(r=c?c[h]:h,a=i&&i.arguments?i.arguments.slice(0):[],_(r)?a.unshift(e[r]):l?a.unshift(l.item(r)):a.unshift(e[r]),a));i&&i.replace&&!l&&(c?e[c[h]]=t:e[h]=t)}if(s||o)return c?e[c[h]]:l?l.item(h):e[h];n&&(c?n.push(e[c[h]]):l?n.push(l.item(h)):n.push(e[h]))}}}var r,a;return n}function ce(e,t){return le(e,t)}function ue(e,t){return le(e,t,{return:"first"})}function he(e,t){return le(e,t,{return:"last"})}function de(e,t){if(e){let i,s;E(e)?i=e:z(e)||(s=Object.keys(e));const o=(s||i||e).length;for(let n=0;n<o;n++){let o=!0;if(o=Q(pe(t,s?e[s[n]]:i?i.item(n):e[n])),o)return s?s[n]:n}}}function pe(e,...t){if(e)return e(...t)}function me(e,...t){g.schedule(e,...t)}function ge(e,...t){f.schedule(e,...t)}function be(e,t,...i){t?pe(e,...i):me(e,...i)}function fe(e,t,...i){if(e&&t)return e.bind(t)(...i)}function ye(e,...t){if(N(e))return e(...t)}function ve(e,...t){return g.schedule(e,...t)}function Me(e,t,...i){return we(t),ve(e,...i)}function we(e){return g.cancel(e),0}function xe(e,...t){return f.schedule(e,...t)}function Se(e,t,...i){return Ie(t),xe(e,...i)}function Ie(e){return f.cancel(e),0}function ke(e,...t){return b.schedule(e,...t)}function Ne(e,t,...i){return _e(t),ke(e,...i)}function _e(e){return b.cancel(e),0}function Le(e,t,...i){return((e,t=0)=>setTimeout(e,t)||0)((()=>e(...i)),t)}function Ce(e){return 0!==e&&clearTimeout(e),0}function De(e,t,...i){const s=v.n+1,o=W(s),n=M.precise,r=()=>{y[o]&&(M.elapsed(n,!0)>=t?(y[o](...i),$e(y,o)):ke(r))};return y[o]=e,ke(r),s}function Ae(e){return 0!==e&&$e(y,W(e)),0}function je(e,t,...i){return((e,t=0)=>setInterval(e,t)||0)((()=>e(...i)),t)}function Te(e){return 0!==e&&clearInterval(e),0}function ze(e,t,...i){const s=v.n+1,o=W(s);let n=M.precise;const r=()=>{y[o]&&(M.elapsed(n,!0)>=t&&(y[o](...i),n=M.precise),ke(r))};return y[o]=e,ke(r),s}function Ee(e){return 0!==e&&$e(y,W(e)),0}function Oe(e,t,...i){e&&(t>0?ke((()=>Oe(e,--t,...i))):e(...i))}function Pe(e,...t){Oe(e,2,...t)}function Re(e,...t){Oe(e,2,...t)}function He(e,...t){Oe(e,5,...t)}function Fe(e,t,i){return e[t]=i}function Ue(e,t,i){return(k(e)||N(e))&&C(t)?e[t]=i:i}function Be(e,t){return e[t]}function Ye(e,t){if(e&&C(t))return e[t]}function Ze(e,t,i=!1){return Q(Ye(e,t),i)}function Ve(e,t,i=""){return W(Ye(e,t),i)}function We(e,t,i=0){return G(Ye(e,t),i)}function Ge(e,t,i=0){return $(Ye(e,t),i)}function $e(e,t){return!!(e&&C(t)&&S(e[t]))&&delete e[t]}function Qe(e,...t){return new e(...t)}var qe,Xe;M.m_nStamp=0,function(e){function i(){return t.padRight(M.logTime," ",16,!0)}function s(e){return t.padRight(e," ",23,!0)}e.time=i,e.module=s,e.log=function(e,t){return i()+s(e)+t}}(qe||(qe={})),function(e){e.isBrowser=d,e.isNode=p,e.isWebWorker=m}(Xe||(Xe={}));class Je{constructor(){this.m_nFlag=1}get flag(){const e=this.m_nFlag;return this.m_nFlag=this.m_nFlag<<1,e}static convert(...e){let t=1;return se(e,((e,i)=>(e|=i?t:0,t*=2,e)),0)||0}static has(e,t){let i=1;if(t>0)for(;--t;)i*=2;return Q(e&i)}}class Ke{constructor(e,t,i){this.m_pArguments=[],this.m_nTime=0,this.m_nHandle=0,this.m_bPromise=!1,this.m_bFrame=!1,this.m_bDoubleFrame=!1,this.m_sHold=!1,this.m_bThrottle="debounce"!==e,this.m_bDelay="throttle-delay"===e,this.m_fnCallback=t,this.m_nTimeout="tick"!==i&&"promise"!==i&&"frame"!==i&&"double-frame"!==i&&i||0,this.m_bPromise="promise"===i,this.m_bFrame="frame"===i||"double-frame"===i,this.m_bDoubleFrame="double-frame"===i}call(){this.m_nHandle=0,this.m_fnCallback(...this.m_pArguments)}invoke(...e){if(!this.m_sHold&&this.m_bThrottle&&this.m_nTimeout>0){if(!this.m_bDelay)return void(M.elapsed(this.m_nTime,!0)>=this.m_nTimeout&&(this.m_pArguments=e,this.m_nTime=M.precise,this.call()));0!==this.m_nHandle&&M.elapsed(this.m_nTime,!0)>=this.m_nTimeout&&(this.cancel(),this.call())}this.m_pArguments=e,this.m_bThrottle||this.cancel(),this.m_sHold?this.m_sHold="hold":0===this.m_nHandle&&(this.m_nTime=M.precise,this.m_nTimeout>0?this.m_nHandle=Le((()=>this.call()),this.m_nTimeout):this.m_bPromise?this.m_nHandle=xe((()=>this.call())):this.m_bFrame?this.m_nHandle=ke((()=>{this.m_bDoubleFrame?this.m_nHandle=ke((()=>this.call())):this.call()})):this.m_nHandle=ve((()=>this.call())))}cancel(){const e=this.m_nTimeout>0?Ce:this.m_bPromise?Ie:this.m_bFrame?_e:we;this.m_nHandle=e(this.m_nHandle)}flush(){this.m_sHold=!1,0!==this.m_nHandle&&(this.cancel(),this.call())}hold(){this.m_sHold=this.m_sHold||(0===this.m_nHandle?"catch":"hold"),this.cancel()}release(e=!1){if(this.m_sHold){const t="hold"===this.m_sHold;this.m_sHold=!1,t&&(e?this.call():this.invoke(...this.m_pArguments))}}}class et extends Ke{constructor(e,t="frame",i=!0){super(i?"throttle-delay":"throttle",e,t)}}class tt extends Ke{constructor(e,t="frame"){super("debounce",e,t)}}class it{constructor(){this.m_pStack=[]}add(e){this.m_pStack.push(e)}flush(){const e=this.m_pStack.length;for(let t=0;t<e;t++)this.m_pStack[t]()}clear(){this.m_pStack=[]}flushAndClear(){this.flush(),this.clear()}}let st=!1;function ot(){st=!0}function nt(){st=!1}const rt=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],at=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function lt(e,t,i,s){for(let o=0;o<4;o++)for(let n=0;n<s;n++)e[o][n]^=t[4*i+n][o]}function ct(e,t){for(let i=0;i<4;i++)for(let s=0;s<t;s++)e[i][s]=rt[e[i][s]]}function ut(e){for(let t=0;t<4;t++)e[t]=rt[e[t]]}function ht(e){const t=e[0];for(let t=0;t<3;t++)e[t]=e[t+1];return e[3]=t,e}function dt(e,t){const i=new Array(4);for(let s=1;s<4;s++){for(let o=0;o<4;o++)i[o]=e[s][(o+s)%t];for(let t=0;t<4;t++)e[s][t]=i[t]}}function pt(e){for(let t=0;t<4;t++){const i=new Array(4),s=new Array(4);for(let o=0;o<4;o++)i[o]=e[o][t],s[o]=128&e[o][t]?e[o][t]<<1^283:e[o][t]<<1;e[0][t]=s[0]^i[1]^s[1]^i[2]^i[3],e[1][t]=i[0]^s[1]^i[2]^s[2]^i[3],e[2][t]=i[0]^i[1]^s[2]^i[3]^s[3],e[3][t]=i[0]^s[0]^i[1]^i[2]^s[3]}}function mt(e,t){const i=t.length/4-1,s=[[],[],[],[]];for(let t=0;t<16;t++)s[t%4][Math.floor(t/4)]=e[t];lt(s,t,0,4);for(let e=1;e<i;e++)ct(s,4),dt(s,4),pt(s),lt(s,t,e,4);ct(s,4),dt(s,4),lt(s,t,i,4);const o=new Array(16);for(let e=0;e<16;e++)o[e]=s[e%4][Math.floor(e/4)];return o}function gt(e){const t=e.length/4,i=t+6,s=new Array(4*(i+1)),o=[0,0,0,0];for(let i=0;i<t;i++)s[i]=[e[4*i],e[4*i+1],e[4*i+2],e[4*i+3]];for(let e=t;e<4*(i+1);e++){s[e]=[0,0,0,0];for(let t=0;t<4;t++)o[t]=s[e-1][t];if(e%t==0){ut(ht(o));for(let i=0;i<4;i++)o[i]^=at[e/t][i]}else t>6&&e%t==4&&ut(o);for(let i=0;i<4;i++)s[e][i]=s[e-t][i]^o[i]}return s}function bt(e){return e.replace(/[\u0080-\u07ff]/g,(e=>{const t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|63&t)})).replace(/[\u0800-\uffff]/g,(e=>{const t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|t>>6&63,128|63&t)}))}var ft=Object.freeze({__proto__:null,decrypt:function(e,t,i,s){const o=i/8,n=new Array(o);e=s(e),t=bt(t);for(let e=0;e<o;e++)n[e]=isNaN(t.charCodeAt(e))?0:t.charCodeAt(e);const r=mt(n,gt(n)),a=gt(r.concat(r.slice(0,o-16))),l=new Array(8),c=e.slice(0,8),u=Math.ceil((e.length-8)/16),h=new Array(u);for(let e=0;e<8;e++)l[e]=c.charCodeAt(e);for(let t=0;t<u;t++)h[t]=e.slice(8+16*t,8+16*t+16);const d=new Array(h.length);for(let e=0;e<u;e++){for(let t=0;t<4;t++)l[15-t]=e>>>8*t&255;for(let t=0;t<4;t++)l[15-t-4]=(e+1)/4294967296-1>>>8*t&255;const t=mt(l,a),i=new Array(h[e].length);for(let s=0;s<h[e].length;s++)i[s]=String.fromCharCode(t[s]^h[e].charCodeAt(s));d[e]=i.join("")}return d.join("").replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,(e=>String.fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2)))).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,(e=>String.fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))))},encrypt:function(e,t,i,s){const o=i/8,n=new Array(o);e=bt(e),t=bt(t);for(let e=0;e<o;e++)n[e]=isNaN(t.charCodeAt(e))?0:t.charCodeAt(e);const r=mt(n,gt(n)),a=gt(r.concat(r.slice(0,o-16))),l=Math.ceil(e.length/16),c=new Array(16),u=new Array(l),h=(new Date).getTime(),d=h%1e3,p=Math.floor(h/1e3),m=Math.floor(65535*Math.random());for(let e=0;e<2;e++)c[e]=d>>>8*e&255;for(let e=0;e<2;e++)c[e+2]=m>>>8*e&255;for(let e=0;e<4;e++)c[e+4]=p>>>8*e&255;let g="";for(let e=0;e<8;e++)g+=String.fromCharCode(c[e]);for(let t=0;t<l;t++){for(let e=0;e<4;e++)c[15-e]=t>>>8*e&255;for(let e=0;e<4;e++)c[15-e-4]=t/4294967296>>>8*e;const i=t<l-1?16:(e.length-1)%16+1,s=mt(c,a),o=new Array(i);for(let n=0;n<i;n++)o[n]=String.fromCharCode(s[n]^e.charCodeAt(16*t+n));u[t]=o.join("")}return s(g+u.join(""))}});function yt(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}class vt{constructor(){this.m_pHooks={},this.m_nHookTimeout=0,this.m_nHookFrame=0,this.m_nHookBuffer=0}get isHookBufferEnabled(){return this.m_nHookBuffer>0}getHooks(e){const t=this.m_pHooks[e];if(t)return t}prepareHookPayload(e,t,i){return e.hook={name:t,type:i},e}scheduleHook(e){"framed"===e?this.m_nHookFrame=Ne((()=>this.invokeHook(e)),this.m_nHookFrame):this.m_nHookTimeout=Me((()=>this.invokeHook(e)),this.m_nHookTimeout)}invokeHook(e){const t=new it;ee(this.m_pHooks,((i,s)=>{ee(i,(i=>{i.type===e&&ee(i.payloads.splice(0,i.payloads.length),(e=>{t.add((()=>i.hook(this.prepareHookPayload(e,s,i.type))))}))}))}),{keys:!0}),t.flush()}attachHook(e,t,i,s,o){(this.getHooks(e)||(this.m_pHooks[e]=[])).push({hook:i,payloads:[],type:t,group:s,context:o})}hook(e,t,i,s){return this.attachHook(e,t,i,!1,s),this}groupedHook(e,t,i,s){return this.attachHook(e,t,i,!0,s),this}emitHook(e,t,i="fifo"){const s=this.getHooks(e);if(s){const o=new it;return ee(s,(s=>{"synchronous"!==s.type||this.isHookBufferEnabled?(s.group&&s.payloads.length>0?s.payloads[0]=t:"lifo"===i?s.payloads.splice(0,0,t):s.payloads.push(t),"synchronous"===s.type||this.isHookBufferEnabled||this.scheduleHook(s.type)):o.add((()=>s.hook(this.prepareHookPayload(t,e,"synchronous"))))})),o.flush(),!0}return!1}bufferHooks(){this.m_nHookTimeout=we(this.m_nHookTimeout),this.m_nHookFrame=_e(this.m_nHookFrame),this.m_nHookBuffer++}flushHooks(){if(this.m_nHookBuffer>0&&(this.m_nHookBuffer--,0===this.m_nHookBuffer)){const e=new it;ee(this.m_pHooks,((t,i)=>{ee(t,(t=>{"synchronous"===t.type?ee(t.payloads.splice(0,t.payloads.length),(s=>{e.add((()=>t.hook(this.prepareHookPayload(s,i,t.type))))})):this.scheduleHook(t.type)}))}),{keys:!0}),e.flush()}}unhook(e,t){const i=this.getHooks(e);if(i){let s=!1;if(t){let e=i.length;for(;e--;){const o=i[e];o.context!==t&&o.hook!==t||(i.splice(e,1),s=!0)}}return t&&0!==i.length?s:($e(this.m_pHooks,e),!0)}return!1}unhookContext(e){let t=!1;return ee(this.m_pHooks,((i,s)=>{let o=i.length;for(;o--;)i[o].context===e&&(i.splice(o,1),t=!0);0===i.length&&$e(this.m_pHooks,s)}),{keys:!0}),t}destroy(){const e=new it;this.m_nHookTimeout=we(this.m_nHookTimeout),this.m_nHookFrame=_e(this.m_nHookFrame),this.m_nHookBuffer=0,ee(this.m_pHooks,((t,i)=>{ee(t,(t=>{ee(t.payloads.splice(0,t.payloads.length),(s=>{e.add((()=>t.hook(this.prepareHookPayload(s,i,t.type))))}))}))}),{keys:!0}),this.m_pHooks={},e.flush()}}function Mt(e,t,i,s,o="multiple"){if(!s||!N(s.value))throw new Error(`The '@${e}' decorator can only be applied to a method but '${i}' seems to be a property.`);const n=`@marker @${e}`,r=`@marker @${e} #${i}`,a=Object.getOwnPropertyDescriptor(t,n);if(Object.getOwnPropertyDescriptor(t,r))throw new Error(`Decorator '@${e}' is already applied to the method '${i}'.`);if("single"===o&&a)throw new Error(`Decorator '@${e}' is already used in this class, but can only be applied once.`);Object.defineProperty(t,r,{value:!0,writable:!1,enumerable:!1,configurable:!1}),a?a.value.push(s.value):Object.defineProperty(t,n,{value:[s.value],writable:!1,enumerable:!1,configurable:!1})}function wt(e,t,...i){const s=Ye(t,`@marker @${e}`);if(s){const e=s.length;if(1===e)return fe(s[0],t,...i);for(let o=0;o<e;o++)fe(s[o],t,...i)}}function xt(e,t,i,s,o){const n={target:t,property:i,oldValue:s,newValue:o};ee(Ye(t,e),(e=>{fe(e,t,n)}))}function St(e,t,i,s,o){const n=`@observers #${i}`,r=Object.getOwnPropertyDescriptor(t,n),a=`@observers @${e} #${i}`;if(Object.getOwnPropertyDescriptor(t,a))throw new Error(`Decorator '@${e}' is already applied to the property '${i}'.`);if(Object.defineProperty(t,a,{value:!0,writable:!1,enumerable:!1,configurable:!1}),r&&z(r.value))r.value.push(o);else{if(s){if(s.configurable=!1,!s.set)throw new Error(`Decorator '@${e}' can only be used on writable properties, but '${i}' seems to be a readonly property or a method.`);{const e=s.set;s.set=function(t){const s=Ye(this,i);s!==t&&(e.call(this,t),xt(n,this,i,s,t))}}}else{const e=`@observable #${i}`;Object.defineProperty(t,i,{get:function(){return Ye(this,e)},set:function(t){const s=Ye(this,e);s!==t&&(Ue(this,e,t),xt(n,this,i,s,t))},enumerable:!0,configurable:!1})}Object.defineProperty(t,n,{value:[o],writable:!1,enumerable:!1,configurable:!1})}}function It(e){return(t,i,s)=>{St("hookup",t,i,s,(t=>{t.target.emitHook(e,{property:t.property,value:t.newValue})}))}}class kt{constructor(){this.m_pStack=[]}push(e){this.m_pStack.push(e)}flush(){let e=this.m_pStack.shift();for(;e;)e(),e=this.m_pStack.shift()}}class Nt extends vt{constructor(e=0,t=0,i=1){super(),this.m_nCurrentCount=0,this.m_pCursor={column:0,row:0,index:0},this.m_bSilent=!1,this.m_pItems=[],this.m_nUniqueId=Nt.enumerator.n,this.m_nType=e,this.m_nOrientation=t,this.m_nColumns=this.m_nCurrentColumns=0===this.type?Math.max(i,1):0,this.m_nRows=this.m_nCurrentRows=1===this.type?Math.max(i,1):0}get uniqueId(){return this.m_nUniqueId}get type(){return this.m_nType}set type(e){this.m_nType!==e&&(this.m_nType=e,this.recalculate(new kt,0,"change",-1,32).flush())}get orientation(){return this.m_nOrientation}set orientation(e){if(this.m_nOrientation!==e){const t=new kt;this.m_nOrientation=e,this.reindex(t,0,-1,"change",-1,32),t.flush()}}get columns(){return this.m_nColumns}set columns(e){this.m_nType=0,e!==this.m_nColumns&&(this.m_nColumns=Math.max(e,1),this.recalculate(new kt,0,"change",-1,32).flush())}get rows(){return this.m_nRows}set rows(e){this.m_nType=1,e!==this.m_nRows&&(this.m_nRows=Math.max(e,1),this.recalculate(new kt,0,"change",-1,32).flush())}get count(){return this.m_pItems.length}get all(){return this.m_pItems}get currentItem(){return this.itemAtIndex(this.safeCursor.index)}get firstItem(){return this.itemAtIndex(0)}get lastItem(){return this.itemAtIndex(this.count-1)}get lastItemInFirstRow(){return this.lastItemInRow(0)}get lastItemInFirstColumn(){return this.lastItemInColumn(0)}get cursor(){return this.m_pCursor}set cursor(e){const t=this.m_pCursor.column,i=this.m_pCursor.row;this.m_pCursor=this.getSafeCursor(e),this.m_pCursor.column===t&&this.m_pCursor.row===i||this.isSilent||this.onCursorChange({matrix:this,cursor:this.cursor})}get safeCursor(){return this.m_pCursor}get isCursorAtFirstColumn(){return 0===this.cursor.column}get isCursorAtLastColumn(){return this.cursor.column===this.columns-1}get isCursorAtEndColumn(){return this.cursor.column===this.columns}get isCursorAtFirstRow(){return 0===this.cursor.row}get isCursorAtLastRow(){return this.cursor.row===this.rows-1}get isCursorAtEndRow(){return this.cursor.row===this.rows}get isCursorAtFirst(){return 0===this.cursor.index}get isCursorAtLast(){return this.cursor.index===this.count-1}get isCursorAtEnd(){return this.cursor.index===this.count}get isSilent(){return N(this.m_bSilent)?this.m_bSilent():this.m_bSilent}set isSilent(e){this.m_bSilent=e}isValidIndex(e,t=!1){return A(e)&&e>=0&&e<this.count+(t?1:0)}reindex(t,i,s,o,n,r){let a=!1;for(i=e.max(i,0),s=this.isValidIndex(s)?s+1:this.count,n=this.isValidIndex(n)?n:-1,this.isSilent&&(o="nothing");i<s;)a=this.m_pItems[i].reindex(t,this,i,"nothing"!==o?n===i?o:"auto":"nothing",r)||a,i++;return a}recalculate(e,t,i,s,o){const n="nothing"!==i&&!this.isSilent,r=this.count;switch(this.m_nType){case 0:0===this.m_nColumns&&(this.m_nColumns=1),this.m_nRows=Math.max(Math.ceil(r/this.m_nColumns),r>0?1:0);break;case 1:0===this.m_nRows&&(this.m_nRows=1),this.m_nColumns=Math.max(Math.ceil(r/this.m_nRows),r>0?1:0);break;case 2:this.m_nColumns=this.m_nRows=Math.max(Math.ceil(Math.sqrt(r)),r>0?1:0);break;case 3:case 4:for(this.m_nColumns=this.m_nRows=Math.max(Math.floor(Math.sqrt(r)),r>0?1:0);this.m_nColumns*this.m_nRows<r;)for(3===this.m_nType?this.m_nColumns++:this.m_nRows++;this.m_nColumns*this.m_nRows<r;)4===this.m_nType?this.m_nColumns++:this.m_nRows++}return n&&(this.bufferHooks(),(1===this.m_nOrientation&&this.m_nColumns!==this.m_nCurrentColumns||0===this.m_nOrientation&&this.m_nRows!==this.m_nCurrentRows)&&(t=0),this.isValidIndex(t)&&this.reindex(e,t,r,i,s,o)),this.m_nColumns===this.m_nCurrentColumns&&this.m_nRows===this.m_nCurrentRows||((this.safeCursor.column>this.m_nColumns||this.safeCursor.row>this.m_nRows)&&(this.cursor={column:Math.min(this.safeCursor.column,this.m_nColumns),row:Math.min(this.safeCursor.row,this.m_nRows)}),n&&e.push((()=>{this.onDimensionChange({matrix:this,difference:this.m_nColumns*this.m_nRows-this.m_nCurrentColumns*this.m_nCurrentRows,columns:this.m_nColumns,rows:this.m_nRows,reason:o})})),this.m_nCurrentColumns=this.m_nColumns,this.m_nCurrentRows=this.m_nRows),r!==this.m_nCurrentCount&&(n&&e.push((()=>{this.onCountChange({matrix:this,difference:r-this.m_nCurrentCount,count:r,reason:o})})),this.m_nCurrentCount=r),n&&this.flushHooks(),e}getSafeCursor(e){if(!A(e.index)||e.index<0){const t=Math.min(Math.max(A(e.column)?e.column:this.columns,0),this.columns),i=Math.min(Math.max(A(e.row)?e.row:this.rows,0),this.rows);return{column:t,row:i,index:this.indexFromColumnRow(t,i)}}return this.cursorFromIndex(e.index)}onDimensionChange(e){this.emitHook("OnDimensionChange",e)}onCountChange(e){this.emitHook("OnCountChange",e)}onCursorChange(e){this.emitHook("OnCursorChange",e)}indexFromColumnRow(e,t){const i=e>=0&&e<this.columns&&t>=0&&t<this.rows?0===this.orientation?this.rows*e+t:this.columns*t+e:-1;return i>=0&&i<this.count?i:-1}cursorFromIndex(e){return{column:(e=Math.min(Math.max(e||0,0),this.count))<this.count?0===this.orientation?Math.floor(e/this.rows):e%this.columns:this.columns,row:e<this.count?0===this.orientation?e%this.rows:Math.floor(e/this.columns):this.rows,index:e}}pushToMatrix(e,t={index:void 0,recalculate:!0,emit:"push"}){const i=this.isSilent?"nothing":t.emit,s=Q(t.recalculate,!0),o=new kt;let n,r;if(r=A(t.index)?t.index:e.index,!e.isPopped&&e.parent){if(this===e.parent)return this.isValidIndex(t.index,!0)&&e.moveToIndex(t.index),e;n=e.parent,e.popSilent()}if(this.isValidIndex(r)?this.m_pItems.splice(r,0,e):r=this.m_pItems.push(e)-1,"nothing"!==i&&this.bufferHooks(),s&&"nothing"!==i||e.reindex(o,this,r,i,1),s&&this.recalculate(o,r,i,r,1),"nothing"!==i){if(e.isFirst){const t=e.successorSibling;t&&(t.dispatch(o,{hook:"OnItemChange",payload:{matrix:this,matrixPrevious:n,item:t,reason:128}}),this.emitHook("OnItemChange",{matrix:this,matrixPrevious:n,item:t,reason:128}))}if(e.isLast){const t=e.predecessorSibling;t&&(t.dispatch(o,{hook:"OnItemChange",payload:{matrix:this,matrixPrevious:n,item:t,reason:64}}),this.emitHook("OnItemChange",{matrix:this,matrixPrevious:n,item:t,reason:64}))}}return o.flush(),"nothing"!==i&&this.flushHooks(),e}moveTo(e,t){return this.moveToIndex(e,this.getSafeCursor(t).index)}moveToIndex(e,t){if(this.isValidIndex(t,!0)&&e.index!==t){const i=new kt;return this.m_pItems.splice(t,0,this.m_pItems.splice(e.index,1)[0]),this.reindex(i,Math.min(e.index,t),Math.max(e.index,t),"change",-1,4),i.flush(),!0}return!1}moveToPosition(e,t,i){return this.moveToIndex(e,this.indexFromColumnRow(t,i))}moveToItem(e,t,i){return this.moveToIndex(e,t.index+(i?0:1)-(e.index<t.index?1:0))}moveUpOrDown(e,t){if(t&&!e.isFirstOfMatrix||!t&&!e.isLastOfMatrix){const i=new kt;return this.m_pItems[e.index]=this.m_pItems[e.index+(t?-1:1)],this.m_pItems[e.index+(t?-1:1)]=e,this.reindex(i,e.index-(t?1:0),e.index+(t?0:1),"change",-1,4),i.flush(),!0}return!1}swap(t,i){if(t.index!==i.index){const s=new kt;return this.m_pItems[t.index]=i,this.m_pItems[i.index]=t,this.reindex(s,e.min(t.index,i.index),e.max(t.index,i.index),"change",-1,8),s.flush(),!0}return!1}popFromMatrix(e,t=!0){let i=[],s=!1,o=!1;if(e||(e=this.itemAtIndex(this.count-1)),e&&(s=e.isFirst,o=e.isLast,this.isValidIndex(e.index)&&e===this.m_pItems[e.index]&&(i=this.m_pItems.splice(e.index,1))),1===i.length&&i[0]){const e=new kt,n=!!this.isSilent;if(i[0].dispatch(e,"Pop"),n||(this.bufferHooks(),t&&(i[0].dispatch(e,{hook:"OnItemPop",payload:{matrix:this,item:i[0]}}),this.emitHook("OnItemPop",{matrix:this,item:i[0]}))),this.recalculate(e,i[0].index,"change",-1,2),!n){if(s){const t=this.firstItem;t&&(t.dispatch(e,{hook:"OnItemChange",payload:{matrix:this,matrixPrevious:void 0,item:t,reason:128}}),this.emitHook("OnItemChange",{matrix:this,matrixPrevious:void 0,item:t,reason:128}))}if(o){const t=this.lastItem;t&&(t.dispatch(e,{hook:"OnItemChange",payload:{matrix:this,matrixPrevious:void 0,item:t,reason:64}}),this.emitHook("OnItemChange",{matrix:this,matrixPrevious:void 0,item:t,reason:64}))}}return e.flush(),n||this.flushHooks(),i[0]}}sort(e=((e,t)=>e.uniqueId-t.uniqueId)){this.m_pItems.sort(e);const t=new kt,i=this.reindex(t,0,-1,"change",-1,16);return t.flush(),i}clear(e="thorough"){const t=new kt;if("dirty"!==e){const i=this.count;for(let s=0;s<i;s++){const i=this.m_pItems[s];i.dispatch(t,"Pop"),this.isSilent||(i.dispatch(t,{hook:"OnItemPop",payload:{matrix:this,item:i}}),"thorough"===e&&this.emitHook("OnItemPop",{matrix:this,item:i})),i.dispatch(t,"Detach")}}this.m_pItems=[],"dirty"!==e&&("thorough"===e&&this.recalculate(t,0,"change",-1,2),t.flush())}invalidateMatrix(){this.onDimensionChange({matrix:this,difference:this.m_nColumns*this.m_nRows-this.m_nCurrentColumns*this.m_nCurrentRows,columns:this.columns,rows:this.rows,reason:32})}recalculateMatrix(){this.recalculate(new kt,0,"change",-1,32).flush()}each(e,t,i){const s=this.m_pItems.slice(t,A(i)&&i>=0?i+1:i),o=s.length;for(let t=0;t<o;t++){const i=e(s[t]);if(T(i)&&i)return!0}return!1}reverseEach(e,t,i){const s=this.m_pItems.slice(t,A(i)&&i>=0?i+1:i);for(let t=s.length-1;t>=0;t--){const i=e(s[t]);if(T(i)&&i)return!0}return!1}itemAtIndex(e){return this.isValidIndex(e)?this.m_pItems[e]:void 0}itemAtPosition(e,t){return this.itemAtIndex(this.indexFromColumnRow(e,t))}itemAtCursor(e){return this.itemAtIndex(this.getSafeCursor(e).index)}itemFromId(e){return ue(this.m_pItems,(t=>t.uniqueId===e))}lastItemInRow(e){let t,i=this.columns;for(;!t&&i>0;)t=this.itemAtPosition(--i,e);return t}lastItemInColumn(e){let t,i=this.rows;for(;!t&&i>0;)t=this.itemAtPosition(e,--i);return t}moveCursorToFirstColumn(e=!1){return this.cursor={column:0,row:e?0:this.safeCursor.row,index:-1}}moveCursorToSuccessorColumn(e=!1){return this.cursor={column:this.cursor.column+1,row:e?0:this.safeCursor.row,index:-1}}moveCursorToPredecessorColumn(e=!1){return this.cursor={column:this.cursor.column-1,row:e?0:this.safeCursor.row,index:-1}}moveCursorToLastColumn(e=!1){return this.cursor={column:this.columns-1,row:e?0:this.safeCursor.row,index:-1}}moveCursorToFirstRow(e=!1){return this.cursor={column:e?0:this.safeCursor.column,row:0,index:-1}}moveCursorToSuccessorRow(e=!1){return this.cursor={column:e?0:this.safeCursor.column,row:this.cursor.row+1,index:-1}}moveCursorToPredecessorRow(e=!1){return this.cursor={column:e?0:this.safeCursor.column,row:this.cursor.row-1,index:-1}}moveCursorToLastRow(e=!1){return this.cursor={column:e?0:this.safeCursor.column,row:this.rows-1,index:-1}}moveCursorToFirst(){return this.cursor={column:-1,row:-1,index:0}}moveCursorToSuccessor(){return this.cursor={column:-1,row:-1,index:this.safeCursor.index+1}}moveCursorToPredecessor(){return this.cursor={column:-1,row:-1,index:this.safeCursor.index-1}}moveCursorToLast(){return this.cursor={column:-1,row:-1,index:this.count-1}}moveCursorToEnd(){return this.cursor={column:-1,row:-1,index:this.count}}}Nt.enumerator=new l;const _t=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],Lt=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Ct=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428],Dt=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],At=[2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561],jt=[573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882],Tt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],zt=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Et(e,t){return e>>>t|e<<32-t}function Ot(e,t,i,s){return Et(e,t)^Et(e,i)^e>>>s}function Pt(e,t){return e[15&t]+=Ot(e[t+14&15],17,19,10)+e[t+9&15]+Ot(e[t+1&15],7,18,3)}function Rt(e,t){const i=(65535&e)+(65535&t);return(t=(e>>16)+(t>>16)+(i>>16))<<16|65535&i}function Ht(e,t,...i){let s=0,o=0,n=0,r=0;for(;s<i.length/2;s++)o=i[s],n+=65535&o,r+=o>>>16;for(r+=n>>>16,e[t+1]=r<<16|65535&n,n=r>>>16,r=0;s<i.length;s++)o=i[s],n+=65535&o,r+=o>>>16;r+=n>>>16,e[t]=r<<16|65535&n}function Ft(e,t){let i=0;const s=[],o=[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];for(;i<16;)s[i]=t[3+(i<<2)]|t[2+(i<<2)]<<8|t[1+(i<<2)]<<16|t[i<<2]<<24,i++;for(i=0;i<64;i++){const e=o[0],t=o[1],n=o[2],r=o[4],a=o[7]+(Et(r,6)^Et(r,11)^Et(r,25))+(r&o[5]^~r&o[6])+Tt[i]+(i<16?s[i]:Pt(s,i));for(let i=7;i>=0;i--)o[i]=4===i?Rt(o[3],a):0===i?Rt(a,(Et(e,2)^Et(e,13)^Et(e,22))+(e&t^e&n^t&n)):o[i-1]}for(i=0;i<8;i++)e[i]+=o[i]}function Ut(e,t,i){let s;try{s=unescape(encodeURIComponent(e))}catch(t){s=function(e){const t=e.length;let i="";for(let s=0;s<t;s++){const t=e.charCodeAt(s);if(t<128)i+=String.fromCharCode(t);else if(t<2048)i+=String.fromCharCode(192|t>>>6,128|63&t);else if(t<55296||t>=57344)i+=String.fromCharCode(224|t>>>12,128|t>>>6&63,128|63&t);else{const o=65536+((1023&t)<<10|1023&e.charCodeAt(++s));i+=String.fromCharCode(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)}}return i}(e)}const o=(t?224===i?At:256===i?jt:384===i?Ct:Dt:224===i?_t:Lt).slice(),n=s.length,r=[];let a,l,c="",u=0,h=!0,d=0,p=0,m=0,g=0,b=0;if(t){const e=[0,0,0,0,0,0,0,0],t=[24,16,8,0];let i;do{for(r[0]=u,a=1;a<=32;a++)r[a]=0;for(a=m;d<n&&a<128;++d){const e=s.charCodeAt(d);e<128?r[a>>2]|=e<<t[3&a++]:(r[a>>2]|=(192|e>>6)<<t[3&a++],r[a>>2]|=(128|63&e)<<t[3&a++])}for(p+=a-m,m=a-128,d===n&&(r[a>>2]|=[-2147483648,8388608,32768,128][3&a],++d),u=r[32],d>n&&a<112&&(r[31]=p<<3,h=!1),l=32;l<160;l+=2){const e=r[l-30],t=r[l-29],i=r[l-4],s=r[l-3];Ht(r,l,r[l-13],r[l-31],(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25),(s>>>19|i<<13)^(i>>>29|s<<3)^(s>>>6|i<<26),r[l-14],r[l-32],(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7,(i>>>19|s<<13)^(s>>>29|i<<3)^i>>>6)}for(i=o.slice(),e[6]=i[2]&i[4],e[7]=i[3]&i[5],a=0;a<160;a+=8)for(l=0;l<8;l+=2){const t=l>0?8-l:0,s=[0,0,0,0];Ht(s,0,zt[a+l+1],r[a+l+1],i[9+t]&i[2===l?9:11+t]^~i[9+t]&i[6===l?15:13-l],(i[9+t]>>>14|i[8+t]<<18)^(i[9+t]>>>18|i[8+t]<<14)^(i[8+t]>>>9|i[9+t]<<23),i[15-l],zt[a+l],r[a+l],i[8+t]&i[2===l?8:10+t]^~i[8+t]&i[6===l?14:12-l],(i[8+t]>>>14|i[9+t]<<18)^(i[8+t]>>>18|i[9+t]<<14)^(i[9+t]>>>9|i[8+t]<<23),i[14-l]),Ht(s,2,(e[l+1]=i[1+t]&i[2===l?1:3+t])^i[1+t]&i[(6===l?l:4-l)+1]^e[7-t],(i[1+t]>>>28|i[t]<<4)^(i[t]>>>2|i[1+t]<<30)^(i[t]>>>7|i[1+t]<<25),(e[l]=i[t]&i[2===l?0:2+t])^i[t]&i[6===l?l:4-l]^e[6-t],(i[t]>>>28|i[1+t]<<4)^(i[1+t]>>>2|i[t]<<30)^(i[1+t]>>>7|i[t]<<25)),Ht(i,14-l,i[7-l],s[1],i[6-l],s[0]),Ht(i,6-l,s[3],s[1],s[2],s[0])}for(a=0;a<16;a+=2)Ht(o,a,o[a+1],i[a+1],o[a],i[a])}while(h)}else{for(m=63&n,g=n<<3,b=n>>29,a=0;a+63<n;a+=64){for(l=d;l<64;l++)r[l]=s.charCodeAt(p++);Ft(o,r),d=0}for(a=0;a<m;a++)r[a]=s.charCodeAt(p++);for(d=g>>3&63,r[d++]=128,a=d;a<(d>56?64:56);a++)r[a]=0;if(d>56)for(Ft(o,r),a=0;a<56;a++)r[a]=0;for(;a<64;)for(l=24;l>=0;l-=8,a++)r[a]=(a>=60?g:b)>>>l&255;Ft(o,r)}for(a=0;a<(512===i?16:384===i?12:256===i?8:7);a++)for(l=28;l>=0;l-=4)c+="0123456789abcdef".charAt(o[a]>>>l&15);return c}function Bt(e){return Ut(e,!1,224)}function Yt(e){return Ut(e,!1,256)}function Zt(e){return Ut(e,!0,384)}function Vt(e){return Ut(e,!0,512)}function Wt(e){return Ut(e,!0,224)}function Gt(e){return Ut(e,!0,256)}const $t={},Qt={},qt={},Xt={},Jt={},Kt={};function ei(e){return Qt[e]||(Qt[e]=Yt(e))}var ti,ii,si,oi=Object.freeze({__proto__:null,SHA2_224:Bt,SHA2_256:Yt,SHA2_384:Zt,SHA2_512:Vt,SHA2_512_224:Wt,SHA2_512_256:Gt,CSHA2_224:function(e){return $t[e]||($t[e]=Bt(e))},CSHA2_256:ei,CSHA2_384:function(e){return qt[e]||(qt[e]=Zt(e))},CSHA2_512:function(e){return Xt[e]||(Xt[e]=Vt(e))},CSHA2_512_224:function(e){return Jt[e]||(Jt[e]=Wt(e))},CSHA2_512_256:function(e){return Kt[e]||(Kt[e]=Gt(e))}});class ni extends vt{constructor(e){super(),this.m_nIndex=-1,this.m_nColumn=-1,this.m_nRow=-1,this.m_bPopped=!0,this.m_nUniqueId=ni.enumerator.n,this.m_pMatrix=e}static pushToMatrix(e,t){return(t=t||e.parent)&&t.pushToMatrix(e,{index:-1,recalculate:!0,emit:"push"}),e}get parent(){return this.matrix()}get uniqueId(){return this.m_nUniqueId}get hash(){return this.m_sHash||(this.m_sHash=Yt(`${M.now}${Math.random()}.${this.uniqueId}`))}set hash(e){C(e)&&/[A-Fa-f0-9]{64}/.test(e)&&(this.m_sHash=e)}get index(){return this.m_nIndex}set index(e){this.moveToIndex(e)}get columnIndex(){return this.m_nColumn}get rowIndex(){return this.m_nRow}get isPopped(){return this.m_bPopped}get isFirst(){return!!this.m_pMatrix&&(0===this.m_pMatrix.orientation?0===this.rowIndex:0===this.columnIndex)}get isLast(){return!!this.m_pMatrix&&(this.isLastOfMatrix||(0===this.m_pMatrix.orientation?this.rowIndex===this.m_pMatrix.rows-1:this.columnIndex===this.m_pMatrix.columns-1))}get isFirstColumn(){return 0===this.columnIndex}get isLastColumn(){return!!this.m_pMatrix&&(this.isLastOfMatrix||this.columnIndex===this.m_pMatrix.columns-1)}get isFirstRow(){return 0===this.rowIndex}get isLastRow(){return!!this.m_pMatrix&&(this.isLastOfMatrix||this.rowIndex===this.m_pMatrix.rows-1)}get isFirstOfMatrix(){return 0===this.index}get isLastOfMatrix(){return!!this.m_pMatrix&&this.index===this.m_pMatrix.count-(this.m_bPopped?0:1)}get predecessorSibling(){return this.m_pMatrix&&!this.isFirstOfMatrix?this.m_pMatrix.itemAtIndex(this.index-1):void 0}get successorSibling(){return this.m_pMatrix&&!this.isLastOfMatrix?this.m_pMatrix.itemAtIndex(this.index+(this.m_bPopped?0:1)):void 0}get predecessorInColumn(){return this.m_pMatrix?this.m_pMatrix.itemAtPosition(this.m_nColumn,this.m_nRow-1):void 0}get successorInColumn(){return this.m_pMatrix?this.m_pMatrix.itemAtPosition(this.m_nColumn,this.m_nRow+1):void 0}get predecessorInRow(){return this.m_pMatrix?this.m_pMatrix.itemAtPosition(this.m_nColumn-1,this.m_nRow):void 0}get successorInRow(){return this.m_pMatrix?this.m_pMatrix.itemAtPosition(this.m_nColumn+1,this.m_nRow):void 0}matrix(){return this.m_pMatrix}onPush(e){this.emitHook("OnItemPush",e,"lifo")}onChange(e){this.emitHook("OnItemChange",e)}onPop(e){this.emitHook("OnItemPop",e)}dispatch(e,t){if("Pop"!==t)if("Detach"!==t)switch(t.hook){case"OnItemChange":e.push((()=>{this.onChange(t.payload)}));break;case"OnItemPop":e.push((()=>{this.onPop(t.payload)}))}else this.m_pMatrix=void 0;else this.m_bPopped=!0}reindex(e,t,i,s,o){const n=this.m_nColumn,r=this.m_nRow;let a,l=!1;if(this.m_pMatrix!==t&&(a=this.m_pMatrix,this.m_pMatrix=t,l=!0),this.m_nIndex===i&&"change"!==s&&"push"!==s||(0!==i&&0!==this.m_nIndex||(o|=128),i+1!==t.count&&this.m_nIndex+1!==t.count||(o|=64),this.m_nIndex=i,l=!0),this.m_nColumn=0===this.m_pMatrix.orientation?Math.floor(this.m_nIndex/this.m_pMatrix.rows):this.m_nIndex%this.m_pMatrix.columns,this.m_nRow=0===this.m_pMatrix.orientation?this.m_nIndex%this.m_pMatrix.rows:Math.floor(this.m_nIndex/this.m_pMatrix.columns),this.isPopped){const e=this.m_pMatrix.itemAtIndex(i);e&&e===this&&(this.m_bPopped=!1,l=!0)}return!(!l&&this.m_nColumn===n&&this.m_nRow===r||("nothing"!==s&&("push"===s?(e.push((()=>{this.onPush({matrix:t,matrixPrevious:a,item:this,reason:o})})),this.m_pMatrix.emitHook("OnItemPush",{matrix:this.m_pMatrix,matrixPrevious:a,item:this,reason:o},"lifo")):(e.push((()=>{this.onChange({matrix:t,matrixPrevious:a,item:this,reason:o})})),this.m_pMatrix.emitHook("OnItemChange",{matrix:this.m_pMatrix,matrixPrevious:a,item:this,reason:o}))),0))}moveTo(e){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.moveTo(this,e)}moveToIndex(e){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.moveToIndex(this,e)}moveToPosition(e,t){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.moveToPosition(this,e,t)}moveToItem(e,t){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.moveToItem(this,e,t)}moveUpOrDown(e){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.moveUpOrDown(this,e)}swap(e){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.swap(this,e)}pop(){return!(this.m_pMatrix&&!this.m_bPopped)||this.m_pMatrix.popFromMatrix(this,!0)instanceof ni}popSilent(){return!(this.m_pMatrix&&!this.m_bPopped)||this.m_pMatrix.popFromMatrix(this,!1)instanceof ni}unpop(e,t){return!(!this.m_bPopped||!e&&!this.m_pMatrix)&&(e||this.m_pMatrix).pushToMatrix(this,{index:t,recalculate:!0,emit:"change"})instanceof ni}unpopSilent(e,t){return e=e||this.m_pMatrix,!(!this.m_bPopped||!e)&&e.pushToMatrix(this,{index:t,recalculate:!0,emit:"nothing"})instanceof ni}}ni.enumerator=new l;class ri extends Nt{constructor(e,t=0,i=0,s=1){super(t,i,s),this.m_pItemConstructor=e}get itemConstructor(){return this.m_pItemConstructor}appendToMatrix(e){return this.pushToMatrix(this.onItemInstance(e),{index:-1,recalculate:!0,emit:"push"})}insertToMatrix(e){return this.pushToMatrix(this.onItemInstance(e),{index:0,recalculate:!0,emit:"push"})}insertToMatrixAtCursor(e,t){return this.pushToMatrix(this.onItemInstance(e),{index:this.getSafeCursor(t).index,recalculate:!0,emit:"push"})}insertToMatrixAtIndex(e,t){return this.pushToMatrix(this.onItemInstance(e),{index:t,recalculate:!0,emit:"push"})}insertToMatrixAtPosition(e,t,i){return this.pushToMatrix(this.onItemInstance(e),{index:this.indexFromColumnRow(t,i),recalculate:!0,emit:"push"})}onItemInstance(e){return new this.itemConstructor(this,e)}}class ai extends ni{constructor(e){super(e)}get parent(){return this.matrix()}matrix(){return super.matrix()}insertBefore(e){return this.parent.pushToMatrix(this.parent.onItemInstance(e),{index:this.index,recalculate:!0,emit:"push"})}insertAfter(e){return this.parent.pushToMatrix(this.parent.onItemInstance(e),{index:this.index+(this.isPopped?0:1),recalculate:!0,emit:"push"})}dispatch(e,t){"Detach"!==t&&super.dispatch(e,t)}}!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(ti||(ti={})),function(e){e[e.Push=1]="Push",e[e.Pop=2]="Pop",e[e.Move=4]="Move",e[e.Swap=8]="Swap",e[e.Sort=16]="Sort",e[e.Recalculation=32]="Recalculation",e[e.Last=64]="Last",e[e.First=128]="First"}(ii||(ii={})),function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e[e.Square=2]="Square",e[e.SquareHorizontal=3]="SquareHorizontal",e[e.SquareVertical=4]="SquareVertical"}(si||(si={}));const li="@serializer #properties",ci="@deserializer #properties";function ui(e,t){const i={};return ee(t,((e,t)=>{S(e)&&Ue(i,t,e)}),{keys:!0}),ee(Ye(e,li),(t=>{const s=Ye(e,t);if(S(s)){const e=Ye(s,"@serializer #proc");Ue(i,t,C(e)?fe(Ye(s,e),s):s)}})),i}function hi(e,t,i){const s=i||new it;return ee(Ye(e,ci),(i=>{const o=t[i];if(S(o)){const t=Ye(e,i),n=Ye(t,"@deserializer #proc");if(t&&C(n))return void fe(Ye(t,n),t,o,s);Ue(e,i,o)}})),i||s.flush(),e}function di(e){return ie(Ye(e,ci),(t=>({property:t,get value(){return Ye(e,t)}})))}function pi(e,t,i){const s=Object.getOwnPropertyDescriptor(e,ci);if(i&&!i.set)throw new Error(`Decorator '@deserialize' can only be used on writable properties, but '${t}' seems to be a readonly property or a method.`);s&&z(s.value)?s.value.push(t):Object.defineProperty(e,ci,{value:[t],writable:!1,enumerable:!1,configurable:!1})}function mi(e,t,i){if(!i||!N(i.value))throw new Error(`Decorator '@deserializer' needs to be applied to a function, but '${t}' seems to be a property.`);if(Object.getOwnPropertyDescriptor(e,"@deserializer #proc"))throw new Error("Decorator '@deserializer' is applied multiple times, but can only be used once in a class.");Object.defineProperty(e,"@deserializer #proc",{value:t,writable:!1,enumerable:!1,configurable:!1})}function gi(e,t,i){if(!i||!N(i.value))throw new Error(`Decorator '@serializer' needs to be applied to a function, but '${t}' seems to be a property.`);if(Object.getOwnPropertyDescriptor(e,"@serializer #proc"))throw new Error("Decorator '@serializer' is applied multiple times, but can only be used once in a class.");Object.defineProperty(e,"@serializer #proc",{value:t,writable:!1,enumerable:!1,configurable:!1})}function bi(e,t,i){const s=Object.getOwnPropertyDescriptor(e,li);if(i&&!i.get)throw new Error(`Decorator '@serialize' can only be used on readable properties, but '${t}' is not a property.`);s&&z(s.value)?s.value.push(t):Object.defineProperty(e,li,{value:[t],writable:!1,enumerable:!1,configurable:!1})}const fi={};function yi(e){if(e instanceof ws){const t=fi[e.hash];t&&t()}else ee(fi,(e=>{e()}))}function vi(e,t,i="rw"){return(s,o,n)=>{switch(o){case"type":case"node":case"cluster":case"branch":case"slot":case"slots":throw new Error(`Definition decorator is not allowed on protected property '${o}'.`)}"w"!==i&&"rw"!==i||(bi(s,o,n),n&&!n.set||St("definition",s,o,n,(e=>{yi(e.target instanceof ws?e.target:Ye(e.target,"map"))}))),"r"!==i&&"rw"!==i||pi(s,o,n),Object.defineProperty(s,`@type ${o}`,{value:{type:e,optional:"optional"===t,get isPrimitive(){return"string"===e||"number"===e||"boolean"===e}},writable:!1,enumerable:!1,configurable:!1})}}function Mi(e,t,i){return _(e)?vi(e,t,i):_(t)&&!_(i)?vi("rw")(e,t,i):void 0}function wi(e,t){return Ye(e,`@type ${t}`)||void 0}class xi extends Nt{constructor(e,t,i,s,o){super(i,s,o),this.m_pType=e,this.m_pParent=t}get grid(){return this.parent.grid}get dispatcher(){return this.m_pType}get parent(){return this.m_pParent}appendItem(e){return this.pushToMatrix(e,{index:-1,recalculate:!0,emit:"push"})}insertItem(e){return this.pushToMatrix(e,{index:0,recalculate:!0,emit:"push"})}insertItemAtIndex(e,t){return this.pushToMatrix(e,{index:t,recalculate:!0,emit:"push"})}onDimensionChange(e){super.onDimensionChange(e),this.onDimensions()}onCountChange(e){super.onCountChange(e),this.parent.onPushOrPop()}onDimensions(){this.parent.resize(),this.emitHook("OnResize",{dispatcher:this})}deserialize(e,...t){}reset(){this.clear()}destroy(){this.clear(),super.destroy()}}class Si extends xi{constructor(e,t){super(e,t,1,1,1)}}class Ii{constructor(e=0,t=0,i=0,s=0){this.left=e,this.top=t,this.right=i,this.bottom=s}}const ki=Number.POSITIVE_INFINITY;class Ni{constructor(e=Ni.NONE,t=Ni.NONE,i=0,s=0,o=0,n=0){this.minWidth=i,this.minHeight=s,this.maxWidth=o,this.maxHeight=n,this.width=e,this.height=t}static get NONE(){return ki}get minWidth(){return this.m_nMinWidth}set minWidth(t){this.m_nMinWidth=e.max(t,0)}get minHeight(){return this.m_nMinHeight}set minHeight(t){this.m_nMinHeight=e.max(t,0)}get maxWidth(){return 0===this.m_nMaxWidth?Number.POSITIVE_INFINITY:this.m_nMaxWidth}set maxWidth(t){this.m_nMaxWidth=e.max(t,0)}get maxHeight(){return 0===this.m_nMaxHeight?Number.POSITIVE_INFINITY:this.m_nMaxHeight}set maxHeight(t){this.m_nMaxHeight=e.max(t,0)}get width(){return e.range(this.m_nWidth,this.minWidth,this.maxWidth)}set width(e){this.m_nWidth=A(e)?e:ki}get height(){return e.range(this.m_nHeight,this.minHeight,this.maxHeight)}set height(e){this.m_nHeight=A(e)?e:ki}get isWidthSpecified(){return this.m_nWidth!==ki}get isHeightSpecified(){return this.m_nHeight!==ki}get w(){return this.m_nWidth}get h(){return this.m_nHeight}}class _i{constructor(e){e?(this.m_pCoordinate=new Ii(e.left,e.top,e.right,e.bottom),this.m_pDimensions=new Ni(e.width,e.height,e.minWidth,e.minHeight,e.maxWidth,e.maxHeight)):(this.m_pCoordinate=new Ii,this.m_pDimensions=new Ni)}get dimensions(){return this.m_pDimensions}get coordinate(){return this.m_pCoordinate}get left(){return this.m_pCoordinate.left}set left(e){this.m_pCoordinate.left=e}get top(){return this.m_pCoordinate.top}set top(e){this.m_pCoordinate.top=e}get right(){return this.m_pDimensions.isWidthSpecified?this.m_pCoordinate.left+this.m_pDimensions.width:this.m_pCoordinate.right}set right(e){A(e)&&(this.m_pDimensions.width=Ni.NONE,this.m_pCoordinate.right=e)}get bottom(){return this.m_pDimensions.isHeightSpecified?this.m_pCoordinate.top+this.m_pDimensions.height:this.m_pCoordinate.bottom}set bottom(e){A(e)&&(this.m_pDimensions.height=Ni.NONE,this.m_pCoordinate.bottom=e)}get width(){return this.m_pDimensions.isWidthSpecified?this.m_pDimensions.width:Math.abs(this.right-this.left)}set width(e){this.m_pDimensions.width=e}get height(){return this.m_pDimensions.isHeightSpecified?this.m_pDimensions.height:Math.abs(this.bottom-this.top)}set height(e){this.m_pDimensions.height=e}get roundedWidth(){return e.round(this.width)}get roundedHeight(){return e.round(this.height)}get w(){return this.m_pDimensions.isWidthSpecified?this.m_pDimensions.w:this.width}get h(){return this.m_pDimensions.isHeightSpecified?this.m_pDimensions.h:this.height}get copy(){return new _i({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}isIn(t,i){return(!A(t)||e.inRange(t,this.left,this.right))&&(!A(i)||e.inRange(i,this.top,this.bottom))}}class Li extends Ii{constructor(e=0,t=0,i=0,s=0){super(e,t,i,s)}get horizontal(){return this.left+this.right}get vertical(){return this.top+this.bottom}}class Ci{constructor(e){this.m_pRectangles={},this.m_bShift=!1,this.m_pShiftCoordinate=new Ii,this.m_nShiftLeft=0,this.m_nShiftTop=0,this.m_nShiftHorizontal=0,this.m_nShiftVertical=0,ee(e,(e=>{const t=this.m_pRectangles[e.name]={rectangle:new _i({width:G(e.width),height:G(e.height),minWidth:G(e.minWidth),minHeight:G(e.minHeight),maxWidth:G(e.maxWidth),maxHeight:G(e.maxHeight)}),buffer:new _i({width:0,height:0}),spacing:new Li(G(e.spacingLeft),G(e.spacingTop),G(e.spacingRight),G(e.spacingBottom)),hinting:new Li(G(e.hintCorrectionLeft),G(e.hintCorrectionTop),G(e.hintCorrectionRight),G(e.hintCorrectionBottom)),meanCorrectionHorizontal:G(e.meanCorrectionHorizontal),meanCorrectionVertical:G(e.meanCorrectionVertical),align:e.align};t.buffer.width=t.rectangle.width+t.spacing.horizontal,t.buffer.height=t.rectangle.height+t.spacing.vertical})),this.left=0,this.top=0}get left(){const e=R(this.m_pRectangles,0);return e?e.rectangle.left-e.spacing.left:0}set left(e){ee(this.m_pRectangles,(t=>{t.rectangle.left=e+t.spacing.left}))}get top(){const e=R(this.m_pRectangles,0);return e?e.rectangle.top-e.spacing.top:0}set top(e){ee(this.m_pRectangles,(t=>{t.rectangle.top=e+t.spacing.top}))}get right(){return G(se(this.m_pRectangles,((t,i)=>e.max(i.rectangle.right+i.spacing.right,t))))}get bottom(){return G(se(this.m_pRectangles,((t,i)=>e.max(i.rectangle.bottom+i.spacing.bottom,t))))}get width(){return G(se(this.m_pRectangles,((t,i)=>e.max(i.rectangle.width+i.spacing.horizontal,t))))}get height(){return G(se(this.m_pRectangles,((t,i)=>e.max(i.rectangle.height+i.spacing.vertical,t))))}get dimensions(){let t=0,i=0;return ee(this.m_pRectangles,(s=>{t=e.max(s.rectangle.width+s.spacing.horizontal,t),i=e.max(s.rectangle.height+s.spacing.vertical,i)})),new Ni(t,i)}get innerLeft(){return G(se(this.m_pRectangles,((t,i)=>e.min(i.rectangle.left,t))))}get innerTop(){return G(se(this.m_pRectangles,((t,i)=>e.min(i.rectangle.top,t))))}get innerRight(){return G(se(this.m_pRectangles,((t,i)=>e.max(i.rectangle.right,t))))}get innerBottom(){return G(se(this.m_pRectangles,((t,i)=>e.max(i.rectangle.bottom,t))))}get innerWidth(){return this.innerRight-this.innerLeft}get innerHeight(){return this.innerBottom-this.innerTop}get isShifted(){return this.m_bShift}set isShifted(e){this.m_bShift!==e&&(this.m_bShift=e,e&&(this.m_nShiftLeft=this.m_pShiftCoordinate.left=this.left,this.m_nShiftTop=this.m_pShiftCoordinate.top=this.top))}get shiftLeft(){return this.m_nShiftLeft}set shiftLeft(e){this.m_nShiftLeft=this.m_pShiftCoordinate.left+e}get shiftTop(){return this.m_nShiftTop}set shiftTop(e){this.m_nShiftTop=this.m_pShiftCoordinate.top+e}get shiftRight(){return this.shiftLeft+this.width}get shiftBottom(){return this.shiftTop+this.height}get shiftHorizontal(){return this.m_nShiftHorizontal}get shiftVertical(){return this.m_nShiftVertical}get shiftMeanHorizontal(){return this.shiftLeft+this.width/2}get shiftMeanVertical(){return this.shiftTop+this.height/2}each(e,t=1){ee(this.m_pRectangles,((i,s)=>{e(1!==t&&A(t,0)?new _i({left:i.rectangle.left*t,top:i.rectangle.top*t,right:i.rectangle.right*t,bottom:i.rectangle.bottom*t}):i.rectangle,s)}),{keys:!0})}minWidth(e,t){const i=this.m_pRectangles[e];return i?A(t)?i.rectangle.dimensions.minWidth=t:i.rectangle.dimensions.minWidth:0}minHeight(e,t){const i=this.m_pRectangles[e];return i?A(t)?i.rectangle.dimensions.minHeight=t:i.rectangle.dimensions.minHeight:0}maxWidth(e,t){const i=this.m_pRectangles[e];return i?A(t)?i.rectangle.dimensions.maxWidth=t:i.rectangle.dimensions.maxWidth:0}maxHeight(e,t){const i=this.m_pRectangles[e];return i?A(t)?i.rectangle.dimensions.maxHeight=t:i.rectangle.dimensions.maxHeight:0}meanHorizontal(e){if(C(e)){const t=this.m_pRectangles[e];return t?t.rectangle.left+(t.rectangle.width+t.meanCorrectionHorizontal)/2:0}return this.left+this.width/2}meanVertical(e){if(C(e)){const t=this.m_pRectangles[e];return t?t.rectangle.top+(t.rectangle.height+t.meanCorrectionVertical)/2:0}return this.top+this.height/2}rectangle(e,t=1){if(C(e)){const i=this.m_pRectangles[e];return i?A(t)&&1!==t?new _i({left:i.rectangle.left*t,top:i.rectangle.top*t,right:i.rectangle.right*t,bottom:i.rectangle.bottom*t}):i.rectangle:new _i}return new _i({left:this.left*t,top:this.top*t,right:this.right*t,bottom:this.bottom*t})}rectangleApplied(e,t=1){if(C(e)){const i=this.m_pRectangles[e];return i?new _i({left:(i.buffer.left+i.spacing.left)*t,top:(i.buffer.top+i.spacing.top)*t,right:(i.buffer.right-i.spacing.right)*t,bottom:(i.buffer.bottom-i.spacing.bottom)*t}):new _i}return this.rectangle(void 0,t)}rectangleWidth(e,t){if(C(e)){const i=this.m_pRectangles[e];return i?(A(t)&&(i.rectangle.width=t,ee(i.align,(e=>{this.rectangleWidth(e,t+i.spacing.horizontal-this.spacingHorizontal(e))}))),i.rectangle.w):0}return this.width}rectangleHeight(e,t){if(C(e)){const i=this.m_pRectangles[e];return i?(A(t)&&(i.rectangle.height=t,ee(i.align,(e=>{this.rectangleHeight(e,t+i.spacing.vertical-this.spacingVertical(e))}))),i.rectangle.h):0}return this.height}isRectangleAligned(e,t){const i=this.m_pRectangles[t];return!!i&&C(ue(i.align,(t=>e===t)))}spacingLeft(e,t){if(C(e)){const i=this.m_pRectangles[e];return i?(A(t)&&(i.rectangle.left=this.left+(i.spacing.left=t)),i.spacing.left):0}return this.innerLeft-this.left}spacingTop(e,t){if(C(e)){const i=this.m_pRectangles[e];return i?(A(t)&&(i.rectangle.top=this.top+(i.spacing.top=t)),i.spacing.top):0}return this.innerTop-this.top}spacingRight(e,t){if(C(e)){const i=this.m_pRectangles[e];return i?A(t)?i.spacing.right=t:i.spacing.right:0}return this.right-this.innerRight}spacingBottom(e,t){if(C(e)){const i=this.m_pRectangles[e];return i?A(t)?i.spacing.bottom=t:i.spacing.bottom:0}return this.bottom-this.innerBottom}spacingHorizontal(e){if(C(e)){const t=this.m_pRectangles[e];return t?t.spacing.horizontal:0}return this.spacingLeft()+this.spacingRight()}spacingVertical(e){if(C(e)){const t=this.m_pRectangles[e];return t?t.spacing.vertical:0}return this.spacingTop()+this.spacingBottom()}hintCorrectionLeft(e,t){const i=this.m_pRectangles[e];return i?A(t)?i.hinting.left=t:i.hinting.left:0}hintCorrectionTop(e,t){const i=this.m_pRectangles[e];return i?A(t)?i.hinting.top=t:i.hinting.top:0}hintCorrectionRight(e,t){const i=this.m_pRectangles[e];return i?A(t)?i.hinting.right=t:i.hinting.right:0}hintCorrectionBottom(e,t){const i=this.m_pRectangles[e];return i?A(t)?i.hinting.bottom=t:i.hinting.bottom:0}shiftRectangle(e){if(C(e)){const t=this.m_pRectangles[e];return t?new _i({left:this.shiftLeft+t.spacing.left,top:this.shiftTop+t.spacing.top,right:this.shiftRight-t.spacing.right,bottom:this.shiftBottom-t.spacing.bottom}):new _i}return new _i({left:this.shiftLeft,top:this.shiftTop,right:this.shiftRight,bottom:this.shiftBottom})}position(){return ee(this.m_pRectangles,(e=>{this.m_nShiftHorizontal=-(e.buffer.left-(e.buffer.left=this.m_bShift?this.shiftLeft:e.rectangle.left-e.spacing.left)),this.m_nShiftVertical=-(e.buffer.top-(e.buffer.top=this.m_bShift?this.shiftTop:e.rectangle.top-e.spacing.top))})),0!==this.m_nShiftHorizontal||0!==this.m_nShiftVertical}resize(){let e=!1,t=!1;return ee(this.m_pRectangles,(i=>{i.buffer.width!==i.rectangle.width+i.spacing.horizontal&&(i.buffer.width=i.rectangle.width+i.spacing.horizontal,e=!0),i.buffer.height!==i.rectangle.height+i.spacing.vertical&&(i.buffer.height=i.rectangle.height+i.spacing.vertical,t=!0)})),e&&t?"both":e?"width":t?"height":"none"}isCoordinateIn(t,i,s=!1){return k(ue(this.m_pRectangles,(o=>(!A(t)||e.inRange(t,o.rectangle.left-(s?o.spacing.left:0),o.rectangle.right+(s?o.spacing.right:0)))&&(!A(i)||e.inRange(i,o.rectangle.top-(s?o.spacing.top:0),o.rectangle.bottom+(s?o.spacing.bottom:0))))))}isCoordinateInRectangles(t,i,s=!1,o=new Ii(0,0,0,0)){if(A(t)){const i=(s?this.innerLeft:this.left)-o.left,n=(s?this.innerRight:this.right)+o.right;if(!e.inRange(t,i,n))return!1}if(A(i)){const t=(s?this.innerTop:this.top)-o.top,n=(s?this.innerBottom:this.bottom)+o.bottom;if(!e.inRange(i,t,n))return!1}return!0}isCoordinateInRectangle(t,i,s,o=!1){const n=this.m_pRectangles[t];return!(!n||A(i)&&!e.inRange(i,n.rectangle.left-(o?n.spacing.left:0),n.rectangle.right+(o?n.spacing.right:0))||A(s)&&!e.inRange(s,n.rectangle.top-(o?n.spacing.top:0),n.rectangle.bottom+(o?n.spacing.bottom:0)))}}class Di{constructor(e,t){this.m_pRenderer=e,this.m_pParent=t}get renderer(){return this.m_pRenderer}get parent(){return this.m_pParent}get x(){return 0}get y(){return 0}beforeResize(e){}zIndex(e){}onElevate(e){}onPush(){}onFirst(){}onLast(){}onMoveExpansion(e,t,i){return new Ii(0,0,0,0)}onIsMoveIn(e,t,i){return!1}onMoveInit(e,t){return!0}onMoveStart(e){return!0}onMove(e,t,i,s){return!0}onMoveEnd(e){}onGuidesChange(e,t,i,s,o,n){}}class Ai extends ni{constructor(e,t,i){if(super(e),this.m_bRendered=!1,this.m_nZoom=1,e){const t=e.parent;this.m_pRenderer=t.renderer,this.m_nZoom=t.zoom}i&&(this.m_pRenderer=i,i.grid||(i.grid=this)),this.m_pChildren=t?t(this):void 0,this.m_pRectangles=(this.layout?this.layout.configuration:void 0)||new Ci}get parent(){return this.matrix()}get ancestor(){if(this.parent)return this.parent.parent}get children(){return this.m_pChildren}get zoom(){return this.m_nZoom}set zoom(t){this.m_nZoom=e.max(t,0),this.applyResize("zoom"),this.applyPosition("zoom")}get layout(){return this.m_pLayout?this.m_pLayout:this.renderer?this.m_pLayout=this.renderer.layout(this):void 0}get renderer(){return this.m_pRenderer}set renderer(e){this.forEachDescendantRecursive((t=>{t.m_bRendered=!1,t.m_pRenderer=e}))}get isRendered(){return this.m_bRendered}get rectangles(){return this.m_pRectangles}get rectangle(){return this.rectangles.rectangleApplied("self",this.zoom)}get left(){return this.rectangle.left}get top(){return this.rectangle.top}get right(){return this.rectangle.right}get bottom(){return this.rectangle.bottom}get width(){return this.rectangles.rectangleApplied("self").width}get height(){return this.rectangles.rectangleApplied("self").height}get meanHorizontal(){return this.left+this.width/2}get meanVertical(){return this.top+this.height/2}renderInvalidate(){this.m_pLayout&&(this.m_pLayout.destroy(),this.m_pLayout=void 0),this.m_bRendered=!1}applyPosition(e){if(this.rectangles.position()||e){const t=this.rectangle;return this.layout&&this.layout.position(t.left,t.top,this.zoom,e||"redraw"),!0}return!1}applyResize(e){const t=this.rectangles.resize();if("none"!==t||e){const i=this.rectangles.rectangleApplied("self"),s="both"===t||"redraw"===e?"redraw":"none"!==t?t:"zoom";return this.layout&&this.layout.resize(i.width,i.height,this.zoom,s),!this.ancestor&&this.renderer&&this.renderer.onResize(i.width,i.height,this.zoom,s),!0}return!1}resize(e,t){return A(e)&&this.rectangles.rectangleWidth("children",e),A(t)&&this.rectangles.rectangleHeight("children",t),this.layout&&this.layout.beforeResize(this.rectangles),this.applyResize()}render(e){this.isRendered||(this.layout&&(this.layout.render("render"),this.m_bRendered=!0),this.onRender(),e&&this.forEachDescendant((e=>{e.render(!0)})))}rerender(e){this.isRendered&&this.layout&&this.layout.render(e)}onRender(){}reset(){const e=this.isRendered;this.renderInvalidate(),e&&this.render(!1)}destroy(){this.renderInvalidate(),this.m_pRenderer=void 0,super.destroy()}}class ji extends Ai{constructor(e,t,i){super(e,t,i),this.m_nZ=0,this.m_bMove=!1,this.m_nMove=-1,this.m_nGuides=0,this.isGrid&&this.initialize()}get isGrid(){return!(this.ancestor instanceof Ai)}get grid(){let e=this;for(;e;){if(e instanceof zi)return e;e=e.ancestor}}get z(){return this.m_nZ}get isMoving(){return this.m_bMove}initialize(){const e=this.grid;this.position(),this.resize(),this.zIndex(),e&&e.isRendered&&this.render(!1)}onPush(e){this.initialize(),super.onPush(e),this.onValidate()}onChange(e){this.position(),28&e.reason&&!this.isGrid&&this.ancestor&&this.ancestor.resize(),this.layout&&(1&e.reason&&this.layout.onPush(),64&e.reason&&this.layout.onLast(),128&e.reason&&this.layout.onFirst()),1&e.reason&&this.zIndex(),super.onChange(e),this.onValidate(),this.m_nGuides=Ne((()=>this.guides()),this.m_nGuides)}onPop(e){super.onPop(e),this.destroy()}onValidate(){}forEachDescendant(e){return!!this.children&&this.children.each(e)}forEachDescendantRecursive(e){return!!Q(e(this),!0)&&(this.forEachDescendant((t=>{t.forEachDescendantRecursive(e)})),!0)}zIndex(e=0){let t=this.ancestor;for(;t;)e++,t=t.ancestor;return e!==this.m_nZ&&(this.m_nZ=e,this.layout&&this.layout.zIndex(this.z),this.forEachDescendant((e=>{e.zIndex()})),!0)}position(e,t){return A(e)?this.rectangles.left=e:this.predecessorInRow?this.rectangles.left=this.predecessorInRow.rectangles.right:this.ancestor?this.rectangles.left=(this.layout?this.layout.x:0)||this.ancestor.rectangles.rectangle("children").left:this.rectangles.left=0,A(t)?this.rectangles.top=t:this.predecessorInColumn?this.rectangles.top=this.predecessorInColumn.rectangles.bottom:this.ancestor?this.rectangles.top=(this.layout?this.layout.y:0)||this.ancestor.rectangles.rectangle("children").top:this.rectangles.top=0,!!this.applyPosition()&&(this.forEachDescendant((e=>{e.shift(this.rectangles.shiftHorizontal,this.rectangles.shiftVertical)})),!0)}shift(e,t){this.position(this.rectangles.left+e,this.rectangles.top+t)}resize(t,i){let s=!1;if(this.children&&(!D(t)||!D(i))){let s;t=i=0,this.children.each((o=>{s=s||o,t=e.max(o.rectangles.right-s.rectangles.left,t||0),i=e.max(o.rectangles.bottom-s.rectangles.top,i||0)}))}if(super.resize(t,i)){if(!this.isPopped&&!this.isGrid){let e=this.successorSibling;for(;e&&e.ancestor;){const t=e.predecessorInRow,i=e.predecessorInColumn;e.position(t?t.rectangles.right:(this.layout?this.layout.x:0)||e.ancestor.rectangles.rectangle("children").left,i?i.rectangles.bottom:(this.layout?this.layout.y:0)||e.ancestor.rectangles.rectangle("children").top),e=e.successorSibling}this.ancestor&&this.ancestor.resize()}s=!0}return s}move(e,t,i={x:0,y:0}){let s;return A(e)&&A(t)?(this.rectangles.isShifted=!0,this.rectangles.shiftLeft=e/this.zoom,this.rectangles.shiftTop=t/this.zoom,s=this.rectangles.shiftRectangle("self")):this.rectangles.isShifted=!1,this.position(this.rectangles.left,this.rectangles.top),{x:s?s.left+i.x/this.zoom:0,y:s?s.top+i.y/this.zoom:0}}guides(){const e=this.rectangles.rectangle("self");let t=this.ancestor,i=this.isPopped,s=0,o=0;for(;!i&&t&&t.ancestor&&0===s&&0===o;){const e=t.rectangle,n=t.rectangles.rectangle("self",this.zoom);s=e.left-n.left,o=e.top-n.top,i=t.isPopped,t=t.ancestor}this.layout&&this.layout.onGuidesChange(!i,e.left*this.zoom-s,e.top*this.zoom-o,e.width,e.height,this.zoom),this.forEachDescendant((e=>{e.guides()}))}onPushOrPop(){}onMoveInit(e,t){return this.layout instanceof Di&&this.layout.onMoveInit(e,t)}onMoveStart(e){return this.m_bMove=!0,this.m_pMove=this.parent,this.m_nMove=this.index,this.renderer&&this.renderer.onMoveStart(),!(!this.layout||!this.layout.onMoveStart(e)||(this.forEachDescendantRecursive((e=>{e.layout&&e.layout.onElevate(!0)})),0))}onMove(e,t,i,s="children"){const o=this.move(e,t,i),n=this.grid;let r,a=this.isPopped,l=!1;if(n&&n.forEachDescendantRecursive((e=>{if(e!==this&&e.layout&&e.rectangles.isCoordinateInRectangles(o.x,o.y,!1,e.layout.onMoveExpansion(o.x,o.y,this))){if(this.ancestor&&e.layout.onIsMoveIn(o.x,o.y,this)){let t=e.parent,i=this.ancestor.parent;!t&&i instanceof Si?t=i:!i&&t instanceof Si&&(i=t),(!t&&!i||t&&i&&t.dispatcher===i.dispatcher)&&(r=Ye(e,s)||r)}return!0}return!1})),r){const e=r,t=1===e.type&&1===e.rows,i=!this.isPopped&&this.parent===e;let s=e.count;l=e.each((n=>{if(n===this)return!1;if(t||1===e.columns||n.rectangles.isCoordinateInRectangle("self",o.x,void 0,!0)){let o=0,r=0,a=n.index,l=!1;const c=t?n.rectangles.meanHorizontal("self"):n.rectangles.meanVertical("self");if(i?l=this.index<n.index:(l=(t?this.rectangles.shiftLeft:this.rectangles.shiftTop)<c,l?0===n.index&&(s=0):a++),l?r=c:o=c,t?l?o=this.rectangles.shiftRight-this.rectangles.hintCorrectionRight("self"):r=this.rectangles.shiftLeft+this.rectangles.hintCorrectionLeft("self"):l?o=this.rectangles.shiftBottom-this.rectangles.hintCorrectionBottom("self"):r=this.rectangles.shiftTop+this.rectangles.hintCorrectionTop("self"),o>r&&this.onMoveValidate(e,a,i))return e.pushToMatrix(this,{index:a,recalculate:!0,emit:"change"})instanceof ji}return!1}))||i,!l&&this.onMoveValidate(e,s,!1)&&(l=e.pushToMatrix(this,{index:s,recalculate:!0,emit:"change"})instanceof ji)}this.layout&&!this.layout.onMove(o.x,o.y,!l,i)&&(a=!l,l=!1),a||l||(this.popSilent(),this.resize(),this.guides()),this.renderer&&this.renderer.onMove()}onMoveValidate(e,t,i){return!0}onMoveEnd(e){this.forEachDescendantRecursive((e=>{e.layout&&e.layout.onElevate(!1)})),this.unpop(this.m_pMove,this.m_nMove),this.move(),this.m_bMove=!1,this.layout&&this.layout.onMoveEnd(e),this.renderer&&this.renderer.onMoveEnd()}serialize(e=""){const t=ui(this,{id:this.hash});if(C(e)&&this.children&&this.children.count>0){const i=[];this.children.each((e=>{i.push(e.serialize())})),Fe(t,e,i)}return t}deserialize(e,t,i=""){if(this.renderInvalidate(),hi(this,e,t),this.hash=e.id,""!==i&&this.children){const s=e[i];s&&this.children.deserialize(t,...s)}return this}reset(){this.m_nGuides=_e(this.m_nGuides),this.children&&this.children.reset(),super.reset()}destroy(){super.destroy(),this.m_nGuides=_e(this.m_nGuides),this.children&&this.children.destroy()}}yt([gi],ji.prototype,"serialize",null),yt([mi],ji.prototype,"deserialize",null);class Ti extends ji{constructor(e,t,i,s){super(e,(e=>new t(i,e)),s)}}class zi extends Ti{constructor(e,t,i){super(void 0,e,t,i),this.m_nThreshold=1}get threshold(){return this.m_nThreshold}set threshold(t){this.m_nThreshold=e.max(t,1),this.forEachDescendant((e=>{const i=e.children;i&&(1===i.type?i.rows=t:0===i.type&&(i.columns=t))}))}deserialize(e,t,i){const s=this.isRendered;return this.renderInvalidate(),this.reset(),super.deserialize(e,t,i),t.flush(),s&&this.render(!0),this}}class Ei extends xi{constructor(e,t,i="vertical"){super(e,t,"horizontal"===i?1:0,"horizontal"===i?1:0,1)}}class Oi extends ji{constructor(e,t,i){super(e,(s=>new t(i,s,e.grid?e.grid.threshold:1)))}}class Pi extends xi{constructor(e,t,i=1,s="vertical"){super(e,t,"horizontal"===s?1:0,0,i)}}class Ri extends ji{constructor(e){super(e)}}class Hi extends Si{constructor(e,t){super(e,t)}get cluster(){return this.parent}onDimensions(){let t=0;this.each((i=>{t=e.max(i.spacing+i.offset,t)})),this.each((e=>{const i=t-e.rectangles.spacingTop("children");0!==i&&(e.rectangles.spacingTop("children",t),e.clusters.each((t=>{e.rectangles.isShifted?t.shift(0,i):t.position()})),e.resize(),e.isMoving&&e.guides())})),yi(this.cluster.map),super.onDimensions()}append(){return this.appendItem(new js(this))}insert(){return this.insertItem(new js(this))}insertBefore(e){return this.insertItemAtIndex(new js(this),e.index)}insertAfter(e){return this.insertItemAtIndex(new js(this),e.index+1)}deserialize(e,...t){return ee(t,(t=>{this.appendItem(new js(this)).deserialize(t,e)})),this}}function Fi(e){switch(e){case"meta":return 0;case"static":return 1;case"dynamic":return 2;case"feature":return 3}}function Ui(e){return t=>{Zi.register(t,e)}}function Bi(e,t,i){St("property",e,t,i,(e=>e.target.propertyChange(e.property)))}class Yi extends ni{constructor(e,t,i,s,o,n,r){if(super(),this.m_bReciprocate=!0,!C(i))throw new Error("Invalid slot reference supplied to slot constructor.");if(this.m_pType=e,this.m_sKind=t,this.m_sReference=i,this.m_nSequence=s,this.m_pExchangeables=n,r instanceof Zi){if(r.id&&"static"===t){const e=ei(o?`${r.id}:${o}`:r.id);if(e&&!r.selectByIdentifier(e))return this.hash=e,void(this.m_bReciprocate=!1)}const e=Yi.recover(r,i,"static"===t||"dynamic"===t);e&&!r.selectByIdentifier(e)&&(this.hash=e)}else r&&(this.hash=r)}static reciprocate(e,t){t.m_bReciprocate&&e.id&&(Yi.m_pIds[`${e.id}:${t.reference}`]=t.id,0===e.count&&(Yi.m_pIds[e.id]=`${e.id}:${t.reference}`))}static recover(e,t,i){if(e.id){const s=Yi.m_pIds[`${e.id}:${t}`];if(s)return delete Yi.m_pIds[`${e.id}:${t}`],s;if(i){const t=Yi.m_pIds[`${e.id}`];if(t){const i=Yi.m_pIds[t];if(delete Yi.m_pIds[e.id],i)return delete Yi.m_pIds[t],i}}}}get slots(){return this.parent}get id(){return this.hash}get type(){return this.m_pType.type}get kind(){return this.m_sKind}get sequence(){return this.m_nSequence}set sequence(e){this.m_nSequence=e,this.slots&&this.slots.sort()}get reference(){return this.m_sReference}get exchangeables(){const e=this;return ie(this.m_pExchangeables,(t=>({property:t,get value(){return Ye(e,t)},set value(i){Ue(e,t,i)}})))}getPipe(e){if(T(e.pipeable))return e.pipeable;let t;if(e.pipeable)t=e.pipeable;else{if(T(e.pipable))return e.pipable;t=e.pipable}return t?t.group?{legacy:t.group,label:t.label,alias:t.alias,content:t.content||t.template}:t:void 0}onPop(e){return Yi.reciprocate(e.matrix,this),super.onPop(e)}propertyChange(e){const t=this.slots;if(t&&!t.isDeserializing)switch(this.emitHook("OnSlotProperty",{slot:this,property:e}),t.emitHook("OnSlotProperty",{slot:this,property:e}),e){case"label":case"name":case"alias":case"placeholder":this.emitHook("OnSlotRename",{slot:this}),t.emitHook("OnSlotRename",{slot:this});break;case"required":this.emitHook("OnSlotRequired",{slot:this}),t.emitHook("OnSlotRequired",{slot:this})}}serialize(){return ui(this,{id:this.id,type:this.type,kind:this.kind,reference:this.reference,sequence:this.sequence,label:this.label,name:this.name,placeholder:this.placeholder,alias:this.alias,required:this.required,pipeable:this.pipeable,default:this.default,exportable:this.exportable,actionable:this.actionable,protected:this.protected})}deserialize(e){return hi(this,e),this.hash=e.id,this.sequence=e.sequence,this.label=e.label,this.name=e.name,this.placeholder=e.placeholder,this.alias=e.alias,this.required=e.required,this.pipeable=this.getPipe(e),this.default=e.default,this.exportable=e.exportable,this.actionable=T(e.actionable)?e.actionable:e.volatile,this.protected=e.protected,this}deprecate(){return this.pop(),this}delete(){return this.pop(),this}pipe(e){const t=(null==e?void 0:e.id)||this.slots&&this.slots.id;return t&&this.pipeable&&!T(this.pipeable)?ei(this.pipeable.pipe?`${t}:${this.pipeable.pipe}`:t):""}legacyPipe(e){const t=(null==e?void 0:e.id)||this.slots&&this.slots.id;return t&&this.pipeable&&!T(this.pipeable)&&this.pipeable.legacy?ei(`${t}:${this.pipeable.legacy}`):void 0}isPipe(e){if(e&&this.slots&&this.slots.id&&this.pipeable&&!T(this.pipeable)){if(ei(this.pipeable.pipe?`${this.slots.id}:${this.pipeable.pipe}`:this.slots.id)===e)return!0;if(this.pipeable.legacy&&ei(`${this.slots.id}:${this.pipeable.legacy}`)===e)return!0}return!1}exchange(e){this.m_pExchangeables=e}}Yi.m_pIds={},yt([Bi],Yi.prototype,"label",void 0),yt([Bi],Yi.prototype,"name",void 0),yt([Bi],Yi.prototype,"placeholder",void 0),yt([Bi],Yi.prototype,"alias",void 0),yt([Bi],Yi.prototype,"required",void 0),yt([Bi],Yi.prototype,"pipeable",void 0),yt([Bi],Yi.prototype,"default",void 0),yt([Bi],Yi.prototype,"exportable",void 0),yt([Bi],Yi.prototype,"actionable",void 0),yt([Bi],Yi.prototype,"protected",void 0),yt([Bi],Yi.prototype,"sequence",null),yt([gi],Yi.prototype,"serialize",null),yt([mi],Yi.prototype,"deserialize",null);class Zi extends Nt{constructor(e){super(),this.m_bDeserializing=!1,this.m_sId=null==e?void 0:e.id}static register(e,t){if(this.m_pTypes[t])throw new Error(`Duplicate slot type '${t}' registered using the '@slot' decorator.`);this.m_pTypes[Fe(e,"type",t)]=e}static ofType(e){return this.m_pTypes[e]}get id(){return this.m_sId}get isDeserializing(){return this.m_bDeserializing}get hasMultiplePipeable(){if(this.count>1){let e,t=0;return this.each((i=>{const s=i.pipeable&&!T(i.pipeable)?i.pipeable.pipe||!0:void 0;return(s&&s!==e||!s&&!1!==i.pipeable)&&t++,e||(e=s),t>1}))}return!1}create(e,t){let i=this.select(t.reference,e);return i&&i.type===t.type.type?i.sequence!==t.sequence&&(i.sequence=t.sequence):(i&&i.delete(),i=this.pushToMatrix(new t.type(t.type,e,t.reference,t.sequence,t.pipe,t.exchange,(null==i?void 0:i.id)||this))),ee(t,((e,t)=>{switch(t){case"type":case"reference":case"sequence":case"pipe":break;case"exchange":i.exchange(e);break;default:Fe(i,t,e)}}),{keys:!0}),i}onDimensionChange(e){super.onDimensionChange(e),this.isDeserializing||this.sort()}meta(e){return this.create("meta",e)}static(e){return this.create("static",e)}dynamic(e){return this.create("dynamic",e)}feature(e){return this.create("feature",e)}select(e,t){let i;return this.each((s=>!(t&&t!==s.kind||s.reference!==e&&s.id!==e||(i=s,0)))),i}selectByIdentifier(e){let t;if(e)return this.each((i=>!(i.id!==e&&!i.isPipe(e)||(t=i,0)))),t}deprecate(e,t){const i=this.select(e,t);if(i)return i.deprecate()}delete(e,t){const i=this.select(e,t);if(i)return i.delete()}clean(e,...t){this.each((i=>{e&&i.kind!==e||ue(t,(e=>e instanceof Yi&&e.id===i.id))||i.pop()}))}sort(){return!this.isDeserializing&&super.sort(((e,t)=>Fi(e.kind)-Fi(t.kind)||(e.sequence||0)-(t.sequence||0)||e.uniqueId-t.uniqueId))}serialize(){const e=[];return this.each((t=>{e.push(t.serialize())})),e}deserialize(e){return this.m_bDeserializing=!0,ee(e,(e=>{const t=Zi.ofType(e.type);if(!t)throw new Error(`No slot implementation found for type '${e.type}'`);{const i=this.select(e.reference,e.kind);i&&i.type===t.type?i.deserialize(e):(i&&i.pop(),this.pushToMatrix(new t(t,e.kind,e.reference,e.sequence)).deserialize(e))}})),this.m_bDeserializing=!1,this.sort(),this}destroy(){this.clear("dirty"),super.destroy()}}Zi.m_pTypes={};let Vi=class extends Yi{toValue(e){return Q(e,this.default)}toString(e){const t=this.toValue(e);return!t&&this.labelForFalse?this.labelForFalse:t&&this.labelForTrue?this.labelForTrue:t?"True":"False"}};yt([Bi,bi,pi],Vi.prototype,"labelForFalse",void 0),yt([Bi,bi,pi],Vi.prototype,"labelForTrue",void 0),Vi=yt([Ui("boolean")],Vi);let Wi=class extends Yi{get supportsTime(){return"years"!==this.precision&&"months"!==this.precision&&"days"!==this.precision}fromString(e){const t=e.replace(" ","T").split("T"),i=t[0].split("-"),s=2===t.length&&t[1].split(":")||void 0;if(3===i.length&&(!s||3===s.length)){const e=new Date(0);if(e.setUTCFullYear(G(i[0])),e.setUTCMonth(G(i[1])-1),e.setUTCDate(G(i[2])),s){e.setUTCHours(G(s[0])),e.setUTCMinutes(G(s[1]));const t=s[2].split(".");e.setUTCSeconds(G(2===t.length?t[0]:s[2])),e.setUTCMilliseconds(2===t.length?G(t[1]):0)}else e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0);return e.getTime()}return this.default||0}toValue(e,t){const i=e instanceof Date?new Date(e.getTime()-60*e.getTimezoneOffset()*1e3):new Date(_(e)?this.fromString(e):G(e,this.default)),s=!0===this.minimum?new Date:this.minimum,o=!0===this.maximum?new Date:this.maximum;if(U(s)||A(s)){const e=U(s)?s.getTime()-60*s.getTimezoneOffset()*1e3:s;i.getTime()<e&&i.setTime(e)}if(U(o)||A(o)){const e=U(o)?o.getTime()-60*o.getTimezoneOffset()*1e3:o;i.getTime()>e&&i.setTime(e)}switch(t||this.precision){case"years":i.setUTCMonth(0);case"months":i.setUTCDate(1);case"days":i.setUTCHours(0);case"hours":i.setUTCMinutes(0);case"minutes":i.setUTCSeconds(0);case"seconds":i.setUTCMilliseconds(0)}return i.getTime()}toDate(e,t){return new Date(this.toValue(e,t))}toString(e,i){const s=this.toDate(e,i);let o=!0;switch(i||this.precision){case"years":case"months":case"days":o=!1}return`${s.getUTCFullYear()}-${t.padLeft(s.getUTCMonth()+1,"0",2)}-${t.padLeft(s.getUTCDate(),"0",2)}`+(o&&` ${t.padLeft(s.getUTCHours(),"0",2)}:${t.padLeft(s.getUTCMinutes(),"0",2)}:${t.padLeft(s.getUTCSeconds(),"0",2)}.${t.padLeft(s.getUTCMilliseconds(),"0",3)}`||"")}};yt([Bi,bi,pi],Wi.prototype,"precision",void 0),yt([Bi,bi,pi],Wi.prototype,"minimum",void 0),yt([Bi,bi,pi],Wi.prototype,"maximum",void 0),Wi=yt([Ui("date")],Wi);let Gi=class extends Yi{toValue(e){return G(e,this.default)}toString(e,t){return t?t(this.toValue(e)):W(this.toValue(e))}};Gi=yt([Ui("number")],Gi);let $i=class extends Yi{get precision(){return this.m_nPrecision}set precision(t){this.m_nPrecision=A(t)?e.max(0,t):void 0}toValue(t){let i;return i=A(this.precision)&&this.precision>0?e.conform($(t,this.default),this.precision):G(t,this.default),A(this.minimum)&&i<this.minimum&&(i=this.minimum),A(this.maximum)&&i>this.maximum&&(i=this.maximum),i}formatString(e,t){return(t&&_(this.prefixPlural)?this.prefixPlural:this.prefix||"")+e+(t&&_(this.suffixPlural)?this.suffixPlural:this.suffix||"")}toString(i,s){const o=this.toValue(i);return this.formatString(this.digits?t.padLeft(o,"0",this.digits,!1,!0):!s||this.separator||this.decimal||this.minus?e.format(o,this.precision,this.separator||"",this.decimal,this.minus):s(o,this.precision),1!==o)}};yt([Bi,bi,pi],$i.prototype,"minimum",void 0),yt([Bi,bi,pi],$i.prototype,"maximum",void 0),yt([Bi,bi,pi],$i.prototype,"separator",void 0),yt([Bi,bi,pi],$i.prototype,"decimal",void 0),yt([Bi,bi,pi],$i.prototype,"minus",void 0),yt([Bi,bi,pi],$i.prototype,"prefix",void 0),yt([Bi,bi,pi],$i.prototype,"prefixPlural",void 0),yt([Bi,bi,pi],$i.prototype,"suffix",void 0),yt([Bi,bi,pi],$i.prototype,"suffixPlural",void 0),yt([Bi,bi,pi],$i.prototype,"digits",void 0),yt([Bi,bi,pi],$i.prototype,"precision",null),$i=yt([Ui("numeric")],$i);let Qi=class extends Yi{toValue(e){return W(e,this.default)}toString(e){return this.toValue(e)}};Qi=yt([Ui("string")],Qi);let qi=class extends Yi{get maxLength(){return this.m_nMaxLength}set maxLength(t){this.m_nMaxLength=A(t)?e.max(0,t):void 0}toValue(e){const i=t.sanitize(W(e,this.default)).substr(0,this.maxLength||void 0);switch(this.transformation){case"capitalize":return t.capitalize(i,"first-character");case"capitalize-words":return t.capitalize(i,"each-word");case"capitalize-sentences":return t.capitalize(i,"each-sentence");case"uppercase":return t.uppercase(i);case"lowercase":return t.lowercase(i)}return i}toString(e){return this.toValue(e)}};yt([Bi,bi,pi],qi.prototype,"maxLength",null),yt([Bi,bi,pi],qi.prototype,"transformation",void 0),qi=yt([Ui("text")],qi);var Xi,Ji,Ki=Object.freeze({__proto__:null,Slots:Zi,Slot:Yi,property:Bi,slot:Ui,get Boolean(){return Vi},get Date(){return Wi},get Number(){return Gi},get Numeric(){return $i},get String(){return Qi},get Text(){return qi}});!function(e){e[e.None=0]="None",e[e.Formatting=1]="Formatting",e[e.Paragraphs=2]="Paragraphs",e[e.Breaks=4]="Breaks",e[e.Hyperlinks=8]="Hyperlinks",e[e.Headings=16]="Headings",e[e.Blockquotes=32]="Blockquotes",e[e.Code=64]="Code",e[e.InlineCode=128]="InlineCode",e[e.Images=256]="Images",e[e.All=511]="All"}(Xi||(Xi={})),function(e){e[e.Text=1]="Text",e[e.Content=2]="Content",e[e.Newline=4]="Newline",e[e.Space=8]="Space",e[e.Heading=16]="Heading",e[e.Quote=32]="Quote",e[e.Code=64]="Code",e[e.InlineCode=128]="InlineCode"}(Ji||(Ji={}));class es{constructor(e,t){if(this.m_nFeatures=Xi.All,this.m_bMentions=!1,this.m_bReferences=!1,this.m_pBlocks=[],this.m_nOpcode=Ji.Newline,this.m_nIndex=0,this.m_sBuffer="",this.m_pTags=[],this.m_nStopIndex=-1,this.m_sMarkdown=e.replace(/(\r\n|[\r\n])/,"\n"),this.m_nLength=this.m_sMarkdown.length,/[\n\\\*_~`#>\[!@]/g.test(this.m_sMarkdown))t&&("number"==typeof t.features&&(this.m_nFeatures=t.features),this.m_pMentions=t.mentions,this.m_pReferences=t.references,this.m_sStopWord=t.stopWord,this.m_sStopWord&&(this.m_sStopChar=this.m_sStopWord.charAt(0))),this.parse();else{if(t&&t.stopWord){const e=this.m_sMarkdown.indexOf(t.stopWord);-1!==e&&(this.m_sMarkdown=this.m_sMarkdown.substr(0,e),this.m_nStopIndex=e)}this.m_pBlocks.push({content:this.m_sMarkdown.replace(/\s\s+/g," ")})}}static parse(e,t){return new es(e,t)}get features(){return this.m_nFeatures}get abstractSyntaxTree(){const e=this.m_pBlocks.length;if(1===e){const e={content:this.m_pBlocks[0].content,value:this.m_pBlocks[0].value};return"paragraph"!==this.m_pBlocks[0].type&&(e.type=this.m_pBlocks[0].type),e}return{content:0===e?"":this.m_pBlocks}}get text(){let e="";return this.map(((t,i)=>{switch(t){case"break":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"quote":case"codeline":return void(e+=(""===e?"":"\n")+i);case"paragraph":return void(e+=(""===e?"":"\n\n")+i);case"codeblock":case"image":return;default:return void(e+=i)}})),e.replace(/(^\s*)|(\s*$)/g,"").replace(/[^\S\r\n\.]{2,}/g," ").replace(/\n[^\S\r\n\.]/g,"\n")}get hasMentions(){return this.m_bMentions}get hasReferences(){return this.m_bReferences}parse(){for(;this.m_nIndex<this.m_nLength;this.m_nIndex++){if(this.m_sBuffer=this.m_sMarkdown.charAt(this.m_nIndex),this.m_nOpcode&Ji.Code){if("\n"===this.m_sBuffer){this.m_nOpcode&Ji.Newline&&this.m_pTag&&"codeblock"===this.m_pTag.type&&"string"!=typeof this.m_pTag.content&&(!Array.isArray(this.m_pTag.content)||this.m_pTag.content.length>0)&&(this.m_pTag.content=[...Array.isArray(this.m_pTag.content)?this.m_pTag.content:[this.m_pTag.content],{parent:this.m_pTag,type:"codeline",content:""}]),this.m_nOpcode|=Ji.Newline,this.m_pText=void 0;continue}}else{if("\n"===this.m_sBuffer){this.features&Xi.Paragraphs?this.m_nOpcode&Ji.Newline&&this.m_pText&&(this.m_nOpcode&=~Ji.Quote,this.block("paragraph")):this.features&Xi.Breaks&&this.m_nOpcode&Ji.Text&&(this.m_nOpcode&=~Ji.Content,this.m_pTags.push("break")),this.m_nOpcode|=Ji.Newline,this.m_nOpcode&Ji.Heading&&(this.m_nOpcode&=~Ji.Heading,this.block("paragraph"));continue}if(this.parseLinebreak())continue;if(this.m_nIndex>0&&(this.m_nOpcode&Ji.Newline||this.m_nOpcode&Ji.Space)&&" "===this.m_sBuffer)continue;if(this.m_nIndex>0&&(this.m_nOpcode&Ji.Newline||this.m_nOpcode&Ji.Space)&&"\t"===this.m_sBuffer)continue}this.parseStopWord()||(!(this.parseEscapeCharacters()||this.parseCodeBlock()||this.parseBuffer("mention",this.m_pMentions,"@",(()=>this.m_bMentions=!0))||this.parseBuffer("reference",this.m_pReferences,"#",(()=>this.m_bReferences=!0))||this.parseCode())&&(this.parseHeading()||this.parseBlockquotes()||this.parseImage()||this.parseHyperlinks()||this.features&Xi.Formatting&&(this.parseTag("bold+italic","*","triple")||this.parseTag("bold","*","double")||this.parseTag("italic","*","single")||this.parseTag("underline","_","single-or-double")||this.parseTag("strikethrough","~","single-or-double")))||this.flush(),0===this.m_pTags.length&&(this.m_nOpcode&=~Ji.Newline," "!==this.m_sBuffer&&"\t"!==this.m_sBuffer||(this.m_nOpcode|=Ji.Space)))}}pushBlock(e,t){const i={parent:void 0,type:e,content:"",value:t};return this.m_pBlocks.push(i),this.m_nOpcode&=~Ji.Content,i}block(e,t){this.m_pBlock={type:e,value:t},this.m_pTags=[],this.m_nOpcode&=~Ji.InlineCode}pushTag(e){this.m_pTags.push(e)}popTag(e){const t=this.m_pTags.length;let i=this.m_pTag;if(t>0)for(let i=t-1;i>=0;i--)if(this.m_pTags[i]===e)return this.m_pTags.splice(i,this.m_pTags.length-i),!0;for(;i;){if(i.type===e)return this.m_pTag=this.m_pText=i.parent,!0;i=i.parent}return!1}isTagActive(e){const t=this.m_pTags.length;let i=this.m_pTag;if(t>0)for(let i=t-1;i>=0;i--)if(this.m_pTags[i]===e)return!0;for(;i;){if(i.type===e)return!0;i=i.parent}return!1}tag(e){return!this.popTag(e)&&(this.pushTag(e),!0)}flush(e=!1){if(!this.m_sBuffer&&!e)return{content:""};this.m_pBlock?(this.m_pTag=this.m_pText=this.pushBlock(this.m_pBlock.type,this.m_pBlock.value),this.m_pBlock=void 0,this.m_nOpcode&Ji.Code&&(this.m_pTag.content=this.m_pText={parent:this.m_pTag,type:"codeline",content:""})):this.m_pTag||(this.m_pTag=this.m_pText=this.pushBlock("paragraph"));let t=this.m_pTags.shift();for(;t;)this.m_pText={parent:this.m_pTag,type:t,content:""},"string"==typeof this.m_pTag.content&&this.m_pTag.content&&(this.m_pTag.content={parent:this.m_pTag,content:this.m_pTag.content}),this.m_pTag.content="string"==typeof this.m_pTag.content?this.m_pText:[...Array.isArray(this.m_pTag.content)?this.m_pTag.content:[this.m_pTag.content],this.m_pText],"break"===t?this.m_pText=this.m_pTag:this.m_pTag=this.m_pText,t=this.m_pTags.shift();return this.m_pText&&"string"==typeof this.m_pText.content||(this.m_pText={parent:this.m_pTag,content:""},this.m_pTag.content=[...Array.isArray(this.m_pTag.content)?this.m_pTag.content:[this.m_pTag.content],this.m_pText],"codeblock"===this.m_pTag.type&&(this.m_pText.type="codeline")),"\t"===this.m_sBuffer?(this.m_pText.content+="codeline"===this.m_pText.type?"  ":" ",{content:""}):(this.m_nOpcode&Ji.Newline&&this.m_nOpcode&Ji.Content&&(e||" "!==this.m_sBuffer)&&(this.m_pText.content+=" "),this.m_pText.content+=this.m_sBuffer,this.m_nOpcode|=Ji.Text,this.m_nOpcode|=Ji.Content,this.m_nOpcode&=~Ji.Space,e&&(this.m_sBuffer=""),this.m_pText)}parseLinebreak(){return!!(this.features&Xi.Paragraphs&&this.features&Xi.Breaks&&this.m_nOpcode&Ji.Content&&" "===this.m_sBuffer&&this.m_nIndex+2<this.m_nLength&&" "===this.m_sMarkdown.charAt(this.m_nIndex+1)&&"\n"===this.m_sMarkdown.charAt(this.m_nIndex+2))&&(this.m_nIndex++,this.m_nOpcode&=~Ji.Space,this.m_nOpcode&=~Ji.Content,this.m_pTags.push("break"),!0)}parseEscapeCharacters(){if("\\"===this.m_sBuffer&&this.m_nIndex+1<this.m_nLength){const e=this.m_sMarkdown.charAt(this.m_nIndex+1);if("\\"===e||"*"===e||"_"===e||"~"===e||"`"===e||"#"===e||">"===e||"["===e||"]"===e||"("===e||")"===e||"!"===e||"@"===e)return this.m_sBuffer=e,this.m_nIndex++,!0}return!1}parseTag(e,t,i){if(this.m_sBuffer===t){if("single"!==i&&this.m_nIndex+("triple"===i?2:1)<this.m_nLength&&this.m_sMarkdown.charAt(this.m_nIndex+1)===t&&("triple"!==i||this.m_sMarkdown.charAt(this.m_nIndex+2)===t))this.m_nIndex+="triple"===i?2:1;else if("double"===i||"triple"===i)return!1;if("bold"===e||"italic"===e){if(this.popTag("bold+italic"))return this.tag("bold"===e?"italic":"bold"),!0}else if("bold+italic"===e){const t=this.isTagActive("bold"),i=this.isTagActive("italic");if(this.popTag("bold"),this.popTag("italic"),t&&i)return!0;(t||i)&&(this.popTag(t?"bold":"italic"),e=t?"italic":"bold")}return this.tag(e),!0}return!1}parseBuffer(e,t,i,s){if(t&&this.m_sBuffer===i&&this.m_nIndex+1<this.m_nLength){const i=t.parser(this.m_sMarkdown.substr(this.m_nIndex+1,t.numberOfChars||void 0),this.m_nIndex);if(i&&i.shift>0){this.m_nIndex+=i.shift,this.m_sBuffer="",this.pushTag(e);const t=this.flush(!0);return i.markdown?t.parent&&"code"===t.parent.type?t.content=i.markdown:t.content=es.parse(i.markdown,{features:this.features&Xi.Formatting|this.features&Xi.InlineCode|this.features&Xi.Hyperlinks|this.features&Xi.Images,mentions:this.m_pMentions,references:this.m_pReferences}).abstractSyntaxTree.content:i.text&&(t.content=i.text),t.value=i.value,t.value&&s(),this.popTag(e),!0}}return!1}parseStopWord(){return!(this.m_nOpcode&Ji.InlineCode||this.m_nOpcode&Ji.Code||this.m_sBuffer!==this.m_sStopChar||!this.m_sStopWord||this.m_sMarkdown.substr(this.m_nIndex,this.m_sStopWord.length)!==this.m_sStopWord||(this.m_nStopIndex=this.m_nIndex,this.m_nIndex=this.m_nLength,0))}parseHeading(){if(this.features&Xi.Paragraphs&&this.features&Xi.Headings&&this.m_nOpcode&Ji.Newline&&"#"===this.m_sBuffer){let e=1,t=this.m_nIndex+1;for(;t<this.m_nLength&&e>=1&&e<=6;){const i=this.m_sMarkdown.charAt(t);if("#"!==i){" "!==i&&(e=0);break}e++,t++}switch(e){case 1:this.block("h1");break;case 2:this.block("h2");break;case 3:this.block("h3");break;case 4:this.block("h4");break;case 5:this.block("h5");break;case 6:this.block("h6");break;default:return!1}return this.m_nIndex+=e,this.m_nOpcode|=Ji.Heading,!0}return!1}parseBlockquotes(){return!!(this.features&Xi.Paragraphs&&this.features&Xi.Blockquotes&&this.m_nOpcode&Ji.Newline&&">"===this.m_sBuffer)&&(this.m_nIndex+1<this.m_nLength&&" "===this.m_sMarkdown.charAt(this.m_nIndex+1)&&this.m_nIndex++,this.m_nOpcode&Ji.Quote?(this.m_sBuffer=" ",!1):(this.m_nOpcode|=Ji.Quote,this.block("quote"),!0))}parseImage(){if(this.features&Xi.Images&&"!"===this.m_sBuffer&&this.m_nIndex+4<this.m_nLength&&"["===this.m_sMarkdown.charAt(this.m_nIndex+1)){let e="",t="",i=!1;const s=this.m_nIndex++;for(;++this.m_nIndex<this.m_nLength;){if(this.m_sBuffer=this.m_sMarkdown.charAt(this.m_nIndex),!this.parseEscapeCharacters())if(i){if(")"===this.m_sBuffer){if(""!==t){this.pushTag("image");const i=this.flush(!0);i.content=e,i.value=t,this.popTag("image")}return!0}}else if("]"===this.m_sBuffer&&this.m_nIndex+1<this.m_nLength&&"("===this.m_sMarkdown.charAt(this.m_nIndex+1)){i=!0,this.m_nIndex++;continue}i?t+=this.m_sBuffer:e+=this.m_sBuffer}return this.m_nIndex=s,this.m_sBuffer="!",!1}return!1}parseHyperlinks(){if(this.features&Xi.Hyperlinks&&"["===this.m_sBuffer&&this.m_nIndex+3<this.m_nLength){const e=es.parse(this.m_sMarkdown.substr(this.m_nIndex+1),{features:this.features&Xi.Formatting|this.features&Xi.InlineCode|this.features&Xi.Images,mentions:this.m_pMentions,references:this.m_pReferences,stopWord:"]("});if(-1!==e.m_nStopIndex){const t=this.m_nIndex;let i="";for(this.m_nIndex+=e.m_nStopIndex+2;++this.m_nIndex<this.m_nLength;){if(this.m_sBuffer=this.m_sMarkdown.charAt(this.m_nIndex),!this.parseEscapeCharacters()&&")"===this.m_sBuffer){if(""!==i){this.pushTag("hyperlink");const t=this.flush(!0);t.content=e.abstractSyntaxTree.content||i,t.value=i,this.popTag("hyperlink")}return!0}i+=this.m_sBuffer}this.m_nIndex=t,this.m_sBuffer="["}}return!1}parseCode(){return this.features&Xi.InlineCode&&"`"===this.m_sBuffer&&(this.m_sBuffer="",this.m_nOpcode=this.m_nOpcode^Ji.InlineCode,this.tag("code")),!!(this.m_nOpcode&Ji.InlineCode)}parseCodeBlock(){if(this.features&Xi.Paragraphs&&this.features&Xi.Code&&this.m_nOpcode&Ji.Newline&&"`"===this.m_sBuffer&&this.m_nIndex+2<this.m_nLength&&"`"===this.m_sMarkdown.charAt(this.m_nIndex+1)&&"`"===this.m_sMarkdown.charAt(this.m_nIndex+2)){let e="",t=!0;for(this.m_nOpcode=this.m_nOpcode^Ji.Code,this.m_nIndex+=3,this.m_sBuffer="";this.m_nIndex<this.m_nLength;){const i=this.m_sMarkdown.charAt(this.m_nIndex);if("\n"===i){this.m_nIndex--;break}" "===i||"\t"===i?t=!1:t&&(e+=i),this.m_nIndex++}return this.m_nOpcode&Ji.Code?this.block("codeblock",e||void 0):this.block("paragraph"),!0}return!!(this.m_nOpcode&Ji.Code)}mapHelper(e,t,i=!0,s){const o="string"==typeof e.content,n=e.value;if(n&&n.ref&&"string"==typeof n.string)return t(e.type,n.string,n.ref,s,"node");const r=t(e.type,o?e.content:"",e.value,s,i&&!e.type?o?"text":"root":"node");return o||(Array.isArray(e.content)?e.content.forEach((e=>this.mapHelper(e,t,!1,r))):this.mapHelper(e.content,t,!1,r)),r}reduceHelper(e,t){const i=e.value;if(i&&i.ref&&"string"==typeof i.string)return t(e.type,i.string,i.ref);if("string"!=typeof e.content){const i=[];return Array.isArray(e.content)?e.content.forEach((e=>i.push(this.reduceHelper(e,t)))):i.push(this.reduceHelper(e.content,t)),t(e.type,i,e.value)}return t(e.type,e.content,e.value)}map(e){return this.mapHelper(this.abstractSyntaxTree,e)}reduce(e){return this.reduceHelper(this.abstractSyntaxTree,e)}}var ts=Object.freeze({__proto__:null,MarkdownParser:es,get MarkdownFeatures(){return Xi}});const is=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function ss(e){return e&&is.test(e)||!1}function os(e,t){return-1===function(e,t){const i=ss(e),s=ss(t);if(!i||!s)return i&&!s?1:!i&&s?-1:0;const o=e.split("-"),n=t.split("-"),r=o[0].split("."),a=n[0].split(".");for(let e=0;e<3;e++){const t=Number(r[e]),i=Number(a[e]);if(t>i)return 1;if(i>t)return-1;if(!isNaN(t)&&isNaN(i))return 1;if(isNaN(t)&&!isNaN(i))return-1}return o[1]&&n[1]?o[1]>n[1]?1:o[1]<n[1]?-1:0:!o[1]&&n[1]?1:o[1]&&!n[1]?-1:0}(e,t)}function ns(e,t){const i=window;if(void 0!==i)if(void 0!==typeof i[e])i[e]=t;else if(i[e]!==t)throw new Error(`Marblecore.Loader: Another context is already registered for '${e}'!`)}const rs={};class as{constructor(e){this.m_pBlocks={},this.m_pAliases={},this.m_pMissing=[],this.m_sIdentifier=e}get identifier(){return this.m_sIdentifier}get all(){const e=[];return ee(this.m_pBlocks,(t=>{cs.isAllowed(t.identifier)&&e.push(t)})),e.sort(((e,t)=>e.label.localeCompare(t.label))),e}get missing(){const e=[];return ee(this.m_pMissing,(t=>{ue(e,(e=>e===t))||e.push(t)})),e}get errors(){return this.m_pMissing.length}register(e,t,i,s,o,n){if(this.m_pBlocks[t]){if(this.m_pBlocks[t].version===o)return e;throw new Error(`Duplicate block '${t}' registered for namespace '${this.identifier}'.`)}return ee(i,(t=>{if(this.m_pAliases[t]&&this.m_pAliases[t]!==e)throw new Error(`Duplicate block '${t}' registered for namespace '${this.identifier}'.`);Fe(this.m_pAliases,t,e)})),Fe(e,"identifier",t),Fe(e,"version",ss(o)?o:"0.0.0"),Fe(e,"kind",n),Fe(e,"flag",(e=>cs.hasFlag(e,t))),Fe(e,"_",s),cs.onRegister&&cs.onRegister(t,e,"node",ss(o)?o:"0.0.0"),e.prototype.type=Fe(this.m_pBlocks,t,e)}ofType(e){const t=this.m_pBlocks[e]||this.m_pAliases[e];if(t&&cs.isAllowed(t.identifier))return t;this.m_pMissing.push(e)}resetMissing(){this.m_pMissing=[]}}class ls{constructor(e){this.m_pBlocks={},this.m_pAliases={},this.m_pMissing=[],this.m_sIdentifier=e}get identifier(){return this.m_sIdentifier}get all(){const e=[];return ee(this.m_pBlocks,(t=>{cs.isAllowed(t.identifier)&&e.push(t)})),e.sort(((e,t)=>e.label.localeCompare(t.label))),e}get missing(){const e=[];return ee(this.m_pMissing,(t=>{ue(e,(e=>e===t))||e.push(t)})),e}get errors(){return this.m_pMissing.length}register(e,t,i,s,o,n){if(this.m_pBlocks[t]){if(this.m_pBlocks[t].version===n)return e;throw new Error(`Duplicate block '${t}' registered for namespace '${this.identifier}'.`)}if(ee(i,(t=>{if(this.m_pAliases[t]&&this.m_pAliases[t]!==e)throw new Error(`Duplicate block '${t}' registered for namespace '${this.identifier}'.`);Fe(this.m_pAliases,t,e)})),Fe(e,"identifier",t),Fe(e,"version",ss(n)?n:"0.0.0"),Fe(e,"flag",(e=>cs.hasFlag(e,t))),Fe(e,"_",s),"*"!==o&&"cluster"!==o&&"branch"!==o&&"node"!==o&&_(o)){const t=cs.get(this.identifier).nodeBlocks.ofType(o);t?Fe(e,"context",t):xe((()=>{const t=cs.get(this.identifier).nodeBlocks.ofType(o);if(!t)throw new Error(`Context '${o}' is undefined.`);Fe(e,"context",t)}))}else Fe(e,"context",o);return cs.onRegister&&cs.onRegister(t,e,"condition",ss(n)?n:"0.0.0"),e.prototype.type=Fe(this.m_pBlocks,t,e)}for(e){return e instanceof ds&&(e=e.type),ce(this.all,(t=>t.context===e))}ofType(e){const t=this.m_pBlocks[e]||this.m_pAliases[e];if(t&&cs.isAllowed(t.identifier))return t;this.m_pMissing.push(e)}resetMissing(){this.m_pMissing=[]}}class cs{static get active(){return this.m_pActive||this.activate("default")}static get missingBlockTypes(){const e=[];return ee(this.active.nodeBlocks.missing,(t=>{ue(e,(e=>e===t))||e.push(t)})),ee(this.active.conditionBlocks.missing,(t=>{ue(e,(e=>e===t))||e.push(t)})),e}static get erroneousBlocks(){return this.active.nodeBlocks.errors+this.active.conditionBlocks.errors}static get(e){var t;return e=e||(null===(t=this.m_pActive)||void 0===t?void 0:t.identifier)||"default",this.m_pNamespaces[e]||Ue(this.m_pNamespaces,e,{identifier:e,nodeBlocks:new as(e),conditionBlocks:new ls(e)})}static isAvailable(e){return!!this.m_pNamespaces[e]}static loadUMD(e,t,i,s,o=!0){if(o&&this.unload(e),this.activate(e),s){ns(i,t);try{return Function(s)(),this.active}catch(e){return}}}static loadURL(e,t,i,s,o,n,r=!0){r&&this.unload(e),this.activate(e),function(e,t,i,s,o){ns(e,i),function(e,t,i){if("undefined"!=typeof document){let s=!1;const o=e=>{s||(s=!0,i&&i(e))};try{const i=document.createElement("script");i.onload=()=>o(!0),i.onerror=()=>o(!1),i.async=!0,i.src=function(e,t){return"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&t?(rs[t]||(rs[t]=trustedTypes.createPolicy(t,{createScriptURL:e=>e}))).createScriptURL(e):e}(e,t),document.body.appendChild(i)}catch(e){o(!1)}}else i&&i(!1)}(t,s,o)}(i,o,t,s,(e=>{n&&n(e?this.active:void 0)}))}static unload(e){return!!this.m_pNamespaces[e]&&(this.m_pActive&&this.m_pActive.identifier===e&&(this.m_pActive=void 0),Ue(this.m_pNamespaces,e,void 0),!0)}static mount(e){return this.m_pActive&&this.m_pActive.identifier!==e&&this.m_pStack.push(this.m_pActive.identifier),this.activate(e)}static unmount(){this.activate(this.m_pStack.pop()||"default")}static activate(e){return this.m_pActive=this.get(e)}static activateDefault(){return this.activate("default")}static activateOrLoadUMD(e,t,i,s,o=!0,n=!1){return!o&&this.isAvailable(e)?this.activate(e):this.loadUMD(e,t,i,s,n)}static activateOrLoadURL(e,t,i,s,o,n,r=!0,a=!1){if(!r&&this.isAvailable(e))return this.activate(e),void(n&&n(this.active));this.loadURL(e,t,i,s,o,n,a)}static resetMissing(){this.active.nodeBlocks.resetMissing(),this.active.conditionBlocks.resetMissing()}static include(...e){ee(e,(e=>{this.m_sInclude||(this.m_sInclude="\n"),-1===this.m_sInclude.indexOf(`\n${e}\n`)&&(this.m_sInclude+=e+"\n")}))}static exclude(...e){ee(e,(e=>{this.m_sExclude||(this.m_sExclude="\n"),-1===this.m_sExclude.indexOf(`\n${e}\n`)&&(this.m_sExclude+=e+"\n")}))}static isAllowed(e){if(!e)return!1;if(!this.m_sExclude&&!this.m_sInclude)return!0;if(this.m_sExclude&&-1!==this.m_sExclude.indexOf(`\n${e}\n`))return!1;const t=e.lastIndexOf(":");return!(-1!==t&&!this.isAllowed(e.substr(0,t))||this.m_sInclude&&-1===this.m_sInclude.indexOf(`\n${e}\n`))}static flag(e,...t){this.m_pFlags||(this.m_pFlags={});const i=this.m_pFlags;ee(t,(t=>{i[e]||(i[e]="\n"),-1===i[e].indexOf(`\n${t}\n`)&&(i[e]+=t+"\n")}))}static hasFlag(e,t){if(!this.m_pFlags||!this.m_pFlags[e]||!t)return!1;if(-1!==this.m_pFlags[e].indexOf(`\n${t}\n`))return!0;const i=t.lastIndexOf(":");return!(-1===i||!this.hasFlag(e,t.substr(0,i)))}}function us(e){return cs.mount(e)}function hs(){cs.unmount()}cs.m_pNamespaces={},cs.m_pStack=[];class ds{constructor(e){this.m_bInitialized=!1,this.m_bProxy=!1,this.m_sCurrentLabel="",this.m_pNode=e}static get label(){return this._()}static create(e,t,i){if(e instanceof ds){if(e.node!==t)return;return e}if(_(e)){const t=cs.active.nodeBlocks.ofType(e);if(!t)return;e=t}return new e(t).init(i)}get id(){return this.node.id}get map(){return this.node.map}get node(){return this.m_pNode}get slots(){if(!this.m_pSlots)throw new Error("Cannot access the slots collection before the `@slots` decorated function is invoked.");return this.m_pSlots}get label(){return this.type.label}get isInitialized(){return this.m_bInitialized}init(e){return e&&"proxy"!==e||(e||wt("created",this),this.m_bInitialized=!0,this.m_bProxy="proxy"===e,this.m_pSlots=new Zi(this.m_bProxy?void 0:this.node)),this}assignedToNode(e){return this.slots.hook("OnSlotProperty","synchronous",(()=>yi(this.map)),this),this.slots.hook("OnCountChange","synchronous",(()=>yi(this.map)),this),wt("assigned",this,e),()=>{this.m_sCurrentLabel=this.label}}unassignedFromNode(){const e={timestamp:M.precise,slots:this.slots.count&&this.slots.serialize()||void 0,block:this.serialize()};return wt("unassigned",this),this.slots.clear("thorough"),this.slots.unhookContext(this.node),this.slots.unhookContext(this),this.node.unhookContext(this),e}detectChange(){yi(this.map)}rerender(e=!1){const t=this.label;this.m_sCurrentLabel!==t&&(this.m_sCurrentLabel=t,e=!0),e&&this.node.rerender("update")}serialize(e={}){return ui(this,X(e,{type:this.type.identifier,version:this.type.version}))}deserialize(e,t){const i=t||new it;return hi(this,e,i),this.m_bInitialized||this.init(),this.m_bProxy||i.add((()=>{ss(e.version)&&os(e.version,this.type.version)&&wt("upgraded",this,e.version)})),t||i.flush(),this}destroy(){this.m_bProxy||wt("destroyed",this),this.slots.destroy()}}yt([gi],ds.prototype,"serialize",null),yt([mi],ds.prototype,"deserialize",null);const ps={},ms=(e,t)=>{var i,s;let o;return ps[t]||(null===(i=e.map)||void 0===i||i.forEach((e=>{if(e.block instanceof ds){const i=e.block.slots.selectByIdentifier(t);if(i){const s=i.id!==t;if(s||!1!==i.pipeable)return o={key:t,node:e,block:e.block,slot:s?void 0:i,pipe:s?i:void 0,get label(){var t;const o=null===(t=e.block)||void 0===t?void 0:t.slots,n=s&&(null==i?void 0:i.pipeable)&&!T(i.pipeable)&&i.pipeable||void 0;if(null==n?void 0:n.alias)return null==n?void 0:n.alias;if(!n){if(null==i?void 0:i.alias)return i.alias+(o&&o.count>1&&i.label&&i.label!==i.alias&&o.each((e=>e.alias===i.alias&&e.id!==i.id))?" / "+i.label:"");if(null==i?void 0:i.name)return i.name+(o&&o.count>1&&i.label&&i.label!==i.name&&o.each((e=>e.name===i.name&&e.id!==i.id))?" / "+i.label:"")}const r=e=>e+(o&&(n?o.hasMultiplePipeable&&n.label&&e!==n.label?" / "+n.label:"":o.count>1&&(null==i?void 0:i.label)&&e!==i.label?" / "+i.label:"")||""),a=Ve(e.block,"alias");return a?r(a):e.label?r(e.label):(null==n?void 0:n.label)||(null==i?void 0:i.label)||""}},!0}}return!1}),"nodes"),o&&(ps[t]=o,null===(s=o.slot||o.pipe)||void 0===s||s.hook("OnItemPop","synchronous",(()=>{ps[t]=void 0})),o.node.hook("OnItemPop","synchronous",(()=>{ps[t]=void 0}))),o)},gs=e=>({numberOfChars:64,parser:t=>{if(/[A-Fa-f0-9]{64}/.test(t)){const i=ms(e,t);return{shift:64,markdown:i?"\\_\\_\\_":"",value:i}}}});function bs(e,t){return e.push({from:t.id,to:Fe(t,"id",(new class extends ni{}).hash)}),t}function fs(e,i){let s=JSON.stringify(i);return ee(e,(e=>{s=t.replace(s,`"${e.from}"`,`"${e.to}"`),s=t.replace(s,"@"+e.from,"@"+e.to)})),JSON.parse(s)}class ys extends Ri{constructor(){super(...arguments),this.m_pType="undefined"}get id(){return this.hash}get parent(){return this.matrix()}get predecessor(){return this.predecessorSibling instanceof ys&&this.predecessorSibling||void 0}get successor(){return this.successorSibling instanceof ys&&this.successorSibling||void 0}get map(){return this.grid}get cluster(){return this.ancestor}get block(){return this.m_pBlock instanceof ds&&this.m_pBlock||void 0}get blockTypeIdentifier(){return this.m_pBlock instanceof ds?this.m_pBlock.type.identifier:this.m_pBlock?this.m_pBlock.type:""}get hasBlock(){return!!this.m_pBlock}get isBlockInvalid(){return!(!this.m_pBlock||this.m_pBlock instanceof ds)}get disabled(){return this.m_bDisabled}set disabled(e){this.m_bDisabled!==e&&(this.m_bDisabled=e,this.rerender("update"))}get type(){return this.getType()}get name(){return this.m_sName}set name(e){this.m_sName!==e&&(this.m_sName=e,this.m_pLabel=void 0,this.rerender(this.onTypeChange()))}get nameVisible(){return this.m_bNameVisible}set nameVisible(e){this.m_bNameVisible!==e&&(this.m_bNameVisible=e,this.rerender(this.onTypeChange()))}get placeholder(){return this.m_sPlaceholder}set placeholder(e){if(this.m_sPlaceholder!==e){let t;this.m_sPlaceholder=e,C(this.m_sName)||(this.emitHook("OnRename",{}),this.m_pLabel=void 0,t="update"),"refresh"===this.onTypeChange()&&(t="refresh"),t&&this.rerender(t)}}get labelRaw(){return this.name||this.placeholder||""}get labelMarkdown(){var e,t;return this.m_pLabel||(this.m_pLabel=new es(this.labelRaw,{features:!1===(null===(e=this.block)||void 0===e?void 0:e.allowMarkdown)?Xi.None:!0===(null===(t=this.block)||void 0===t?void 0:t.allowMarkdown)?Xi.Formatting|Xi.Hyperlinks|Xi.InlineCode:Xi.Formatting|Xi.Hyperlinks,mentions:gs(this)})),this.m_pLabel}get label(){return this.labelMarkdown.text}get alias(){const e=this.block&&this.block.slots||this.m_pSlots;if(e){let t="",i=0;if(e.each((e=>{"static"===e.kind&&e.alias?e.alias!==t&&(t=e.alias,i++):"dynamic"===e.kind&&e.pipeable&&!T(e.pipeable)&&e.pipeable.alias&&e.pipeable.alias!==t&&(t=e.pipeable.alias,i++)})),1===i)return t}return Ve(this.block,"alias")||void 0}get description(){return this.m_sDescription}set description(e){this.m_sDescription!==e&&(this.m_sDescription=e,this.rerender(this.onTypeChange()))}static proxy(e,t,i){const s=ds.create(t,e,"proxy");if(s)return s.deserialize(i.block),i.slots&&s.slots.deserialize(i.slots),wt("slots",s,s.slots),s}static exchange(e,t,i){const s=Object.keys(i).sort(((e,t)=>{var s,o;return((null===(s=i[e])||void 0===s?void 0:s.timestamp)||0)-((null===(o=i[t])||void 0===o?void 0:o.timestamp)||0)})),o=s.length,n=[],r={};for(let e=0;e<o;e++)if(s[e]===t.type.identifier){s.splice(0,e+1);break}ee(s,(s=>{if(s!==t.type.identifier){const t=i[s];if(t){const i=this.proxy(e,s,t);i&&n.push(i)}}})),ee(n,(e=>{var i;ee(ie(Ye(i=e,li),(e=>({property:e,get value(){return Ye(i,e)}}))),(i=>{const s=wi(e,i.property);if(s)if(s.isPrimitive){const e=wi(t,i.property);e&&e.type===s.type&&(e.optional&&x(i.value)||"string"===e.type&&C(i.value)||"number"===e.type&&A(i.value)||"boolean"===e.type&&T(i.value))&&(r[i.property]=i.value)}else ue(di(t),(e=>{const o=wi(t,e.property);if(o&&o.type===s.type&&!o.isPrimitive){const t=r[e.property];return(z(t)&&t||(r[e.property]=[])).push(i.value),!0}return!1}))}))})),ee(r,((e,i)=>{if(z(e)){if(ds.exchanger){const s=Ye(t,i);s&&ds.exchanger(e,s)}}else Ue(t,i,e)}),{keys:!0}),ee(n,(e=>{e.slots.each((e=>{t.slots.each((t=>t.kind===e.kind&&(t.reference===e.reference||t.id===e.id)&&(ee(e.exchangeables,(e=>{const i=ue(t.exchangeables,(t=>t.property===e.property));i&&(i.value=e.value)})),!0)))}))}))}unassignAndCache(e){if(e)return this.m_pBlockCache||(this.m_pBlockCache={}),ys.proxy(this,e.type.identifier,this.m_pBlockCache[e.type.identifier]=e.unassignedFromNode())}getFromCache(e){if(this.m_pBlockCache){const t=this.m_pBlockCache[e];if(t){const i=ds.create(e,this,"existing");if(i)return i.deserialize(t.block),t.slots&&i.slots.deserialize(t.slots),i}}}getType(){return this.m_pBlock?this.m_pBlock instanceof ds?this.m_pBlock.type:"error":Q(this.m_bNameVisible,!0)&&C(this.m_sName)||C(this.m_sDescription)||C(this.m_sPlaceholder)?"static":C(this.m_sName)?"note":"undefined"}onTypeChange(){const e=this.m_pType;return this.m_pType=this.getType(),e!==this.m_pType?(this.emitHook("OnTypeChange",{}),yi(this.map),"refresh"):"update"}onChange(e){yi(this.map),super.onChange(e)}resize(e,t){return!this.isMoving&&super.resize(e,t)}zIndex(){return super.zIndex(2)}assignBlock(e){const t=this.block&&this.unassignAndCache(this.block);if(this.m_pSlots=void 0,this.m_pBlock=ds.create(e instanceof ds?e:this.getFromCache(e.identifier)||e,this),this.m_pBlock){wt("slots",this.m_pBlock,this.m_pBlock.slots);const e=this.m_pBlock.assignedToNode(t);this.m_pBlockCache&&ys.exchange(this,this.m_pBlock,this.m_pBlockCache),e()}return this.rerender(this.onTypeChange()),t&&this.emitHook("OnBlockUnassign",{node:this,block:t}),this.m_pBlock&&this.emitHook("OnBlockAssign",{node:this,block:this.m_pBlock}),this.emitHook("OnBlockChange",{node:this,block:this.m_pBlock}),yi(this.map),this.m_pBlock}unassignBlock(){const e=this.m_pBlock;if(this.m_pBlock=void 0,e&&(e instanceof ds&&this.unassignAndCache(e),this.rerender(this.onTypeChange()),e instanceof ds))return this.emitHook("OnBlockUnassign",{node:this,block:e}),this.emitHook("OnBlockChange",{node:this,block:void 0}),yi(this.map),e}serialize(){const e={},t=this.block&&this.block.slots||this.m_pSlots;return t&&t.count&&(e.slots=t.serialize()),this.m_pBlock&&(e.block=this.m_pBlock instanceof ds?this.m_pBlock.serialize():this.m_pBlock),X(super.serialize(),e)}deserialize(e,t){const i=t||new it;return super.deserialize(e,i),this.m_pBlock=void 0,this.m_pSlots=void 0,e.block&&(this.m_pBlock=ds.create(e.block.type,this,"existing")||e.block,this.m_pBlock instanceof ds?(this.m_pBlock.deserialize(e.block,i),e.slots&&this.m_pBlock.slots.deserialize(e.slots),wt("slots",this.m_pBlock,this.m_pBlock.slots),i.add(this.m_pBlock.assignedToNode())):e.slots&&(this.m_pSlots=new Zi(this).deserialize(e.slots))),this.m_pType=this.getType(),t||i.flush(),this}slot(e,t){let i;const s=this.block&&this.block.slots||this.m_pSlots;if(s){const o=t&&(_(t)?t:t.identifier)||void 0;o&&o!==this.blockTypeIdentifier||s.each((t=>(t.id===e||t.reference===e)&&(i=t,!0)))}return i}refresh(){return this.isPopped||(this.refreshed(),this.rerender(this.onTypeChange())),this}refreshed(){return this.isPopped||(this.m_pLabel=void 0,this.emitHook("OnRename",{})),this}insertBefore(){if(!this.parent)throw new Error("The node dispatcher is invalid.");return this.parent.insertBefore(this)}insertAfter(){if(!this.parent)throw new Error("The node dispatcher is invalid.");return this.parent.insertAfter(this)}enable(){return this.disabled=void 0,this}disable(){return this.disabled=!0,this}duplicate(e){const t=[];var i;return(e=e||this.insertAfter()).deserialize(fs(t,(ee((i=this.serialize()).slots,(e=>{bs(t,e)})),bs(t,i)))),e.render(!1),e}delete(){return this.pop(),this}destroy(){this.block&&this.block.destroy(),this.m_pBlockCache=void 0,super.destroy()}}yt([Mi],ys.prototype,"explanation",void 0),yt([Mi,It("OnDisable")],ys.prototype,"disabled",null),yt([Mi,It("OnRename")],ys.prototype,"name",null),yt([Mi],ys.prototype,"nameVisible",null),yt([Mi],ys.prototype,"placeholder",null),yt([Mi],ys.prototype,"description",null),yt([gi],ys.prototype,"serialize",null),yt([mi],ys.prototype,"deserialize",null);class vs extends Pi{constructor(e,t){super(e,t)}get cluster(){return this.parent}onDimensions(){yi(this.cluster.map),super.onDimensions()}append(){return this.appendItem(new ys(this))}insert(){return this.insertItem(new ys(this))}insertBefore(e){return this.insertItemAtIndex(new ys(this),e.index)}insertAfter(e){return this.insertItemAtIndex(new ys(this),e.index+1)}deserialize(e,...t){return ee(t,(t=>{this.appendItem(new ys(this)).deserialize(t,e)})),this}}class Ms extends Oi{constructor(e){super(e,vs,ys),this.m_pBranches=new Hi(js,this)}get id(){return this.hash}get parent(){return this.matrix()}get predecessor(){return this.predecessorSibling instanceof Ms&&this.predecessorSibling||void 0}get successor(){return this.successorSibling instanceof Ms&&this.successorSibling||void 0}get map(){return this.grid}get branch(){return this.ancestor}get nodes(){return this.children}get branches(){return this.m_pBranches}get hasBranches(){return this.branches.count>0}get name(){return this.m_sName}set name(e){this.m_sName!==e&&(this.m_sName=e,this.rerender("update"))}get jumps(){const e=[];return this.map&&this.map.forEach((t=>{t.jump===this&&e.push(t)}),"branches"),e}onChange(e){yi(this.map),super.onChange(e)}onPop(e){ee(this.jumps,(e=>{e.jump=void 0})),super.onPop(e)}forEachDescendant(e){return super.forEachDescendant(e)||this.branches.each(e)}resize(e,t){return!this.isMoving&&super.resize(e,t)}serialize(){const e={};if(this.branches.count>0){const t=[];this.branches.each((e=>{t.push(e.serialize())})),e.branches=t}return X(super.serialize("nodes"),e)}deserialize(e,t){const i=t||new it;return super.deserialize(e,i,"nodes"),this.branches.deserialize(i,...e.branches||[]),t||i.flush(),this}insertBefore(){if(!this.parent)throw new Error("The cluster dispatcher is invalid.");return this.parent.insertBefore(this)}insertAfter(){if(!this.parent)throw new Error("The cluster dispatcher is invalid.");return this.parent.insertAfter(this)}duplicate(e){const t=[],i=e=>(ee(e.branches,(e=>{ee(e.conditions,(e=>{bs(t,e)})),ee(e.clusters,(e=>{i(e)})),bs(t,e)})),ee(e.nodes,(e=>{bs(t,e),ee(e.slots,(e=>{bs(t,e)}))})),bs(t,e));return(e=e||this.insertAfter()).deserialize(fs(t,i(this.serialize()))),e.render(!0),e}delete(){return this.pop(),this}reset(){this.branches.reset(),super.reset()}destroy(){this.branches.destroy(),super.destroy()}}yt([Mi,It("OnRename")],Ms.prototype,"name",null),yt([gi],Ms.prototype,"serialize",null),yt([mi],Ms.prototype,"deserialize",null);class ws extends zi{constructor(e,t){super(xs,Ms,e),this.m_bDeserializing=!1,function(e){const t=new tt((()=>{e.emitHook("OnChange",{map:e})}));Ue(fi,e.hash,(()=>{e.isDeserializing?t.cancel():t.invoke()}))}(this),this.m_pApplication=t||{name:"",version:""}}static create(e,t){return new ws(e,t)}get application(){return this.m_pApplication}get builder(){return this.m_pBuilder||this.m_pApplication}get clusters(){return this.children}get definition(){const e=this.serialize();return $e(e,"id"),e}set definition(e){this.deserialize(X(e,{id:""}))}get isDeserializing(){return this.m_bDeserializing}serialize(){const e=super.serialize("clusters");return Fe(e,"builder",this.m_pApplication),e}deserialize(e){const t=new it;return this.m_bDeserializing=!0,this.m_pBuilder=e.builder||this.m_pApplication,cs.resetMissing(),t.add((()=>{const e=cs.erroneousBlocks;e>0&&this.emitHook("OnError",{map:this,erroneousBlocks:e,get missingBlockTypes(){return cs.missingBlockTypes}})})),super.deserialize(e,t,"clusters"),!e.prologue&&e.preface&&(this.prologue=e.preface),this.m_bDeserializing=!1,this}forEach(e,t="all",i,s=!1){i||(s=!1);const o=(n,r)=>n.each((n=>n===i?(s=!1,!1):!(s||"clusters"!==t&&"all"!==t||!e(n,r))||!("nodes"!==t&&"all"!==t||!n.nodes.each((t=>t===i?(s=!1,!1):!s&&e(t,r))))||n.branches.each((n=>n===i?(s=!1,!1):!(s||"branches"!==t&&"all"!==t||!e(n,r))||!("conditions"!==t&&"all"!==t||!n.conditions.each((t=>t===i?(s=!1,!1):!s&&e(t,r))))||o(n.clusters,r+1)))));return o(this.clusters,0)}reload(){this.definition=this.definition}reset(){this.name=void 0,this.description=void 0,this.language=void 0,this.keywords=void 0,this.prologue=void 0,this.epilogue=void 0,super.reset()}destroy(){$e(fi,this.hash),super.destroy()}}yt([Mi,It("OnRename")],ws.prototype,"name",void 0),yt([Mi],ws.prototype,"description",void 0),yt([Mi],ws.prototype,"language",void 0),yt([Mi],ws.prototype,"keywords",void 0),yt([Mi],ws.prototype,"prologue",void 0),yt([Mi],ws.prototype,"epilogue",void 0),yt([gi],ws.prototype,"serialize",null),yt([mi],ws.prototype,"deserialize",null);class xs extends Ei{constructor(e,t){super(e,t)}get map(){return this.branch instanceof ws?this.branch:this.branch&&this.branch.map}get branch(){return this.parent instanceof js||this.parent instanceof ws?this.parent:void 0}onDimensions(){yi(this.map),super.onDimensions()}append(){return this.appendItem(new Ms(this))}insert(){return this.insertItem(new Ms(this))}insertBefore(e){return this.insertItemAtIndex(new Ms(this),e.index)}insertAfter(e){return this.insertItemAtIndex(new Ms(this),e.index+1)}deserialize(e,...t){return ee(t,(t=>{this.appendItem(new Ms(this)).deserialize(t,e)})),this}}function Ss(e,t,i){St("affects#condition",e,t,i,(e=>{const i=e.target;e.oldValue instanceof vt&&e.oldValue.unhookContext(i),i.rerender(),e.newValue instanceof vt&&(e.newValue instanceof ys?(e.newValue.hook("OnRename","synchronous",(()=>i.rerender()),i),e.newValue.hook("OnBlockUnassign","synchronous",(e=>{i.shouldBeDeleted(e.block)&&i.delete(t)}),i)):e.newValue instanceof Yi?e.newValue.hook("OnSlotProperty","synchronous",(()=>i.rerender()),i):e.newValue.hook("OnRename","synchronous",(()=>i.rerender()),i),e.newValue.hook("OnItemPop","synchronous",(()=>i.delete(t)),i)),yi(i.map)})),Mt("destroyed",e,t,{value:function(){Ye(this,t)instanceof vt&&Ue(this,t,void 0)}})}function Is(e,t,i){St("affects#name",e,t,i,(e=>{e.target instanceof ds&&e.target.node.emitHook("OnRename",{}),e.target.rerender(),yi(e.target.map)}))}function ks(e,t,i){St("affects#required",e,t,i,(e=>{e.target.rerender(!0),yi(e.target.map)}));const s=Object.getOwnPropertyDescriptor(e,"@signal #required");s?s.value.push(t):Object.defineProperty(e,"@signal #required",{value:[t],writable:!1,enumerable:!1,configurable:!1})}function Ns(e,t,i){St("affects#slots",e,t,i,(e=>{e.target.isInitialized&&(wt("slots",e.target,e.target.slots),yi(e.target.map))}))}function _s(e){switch(e){case"#name":case"#label":return Is;case"#condition":return Ss;case"#slots":return Ns;case"#required":return ks}}class Ls{constructor(e){this.m_pBlock=e}get branch(){return this.m_pBlock.branch&&this.m_pBlock.branch.name||""}get branchOrphan(){return this.m_pBlock.branch&&this.m_pBlock.branch!==this.m_pBlock.condition.branch&&this.m_pBlock.branch.name||""}get cluster(){return this.m_pBlock.cluster&&this.m_pBlock.cluster.name||""}get clusterOrphan(){return this.m_pBlock.cluster&&this.m_pBlock.cluster!==this.m_pBlock.condition.cluster&&this.m_pBlock.cluster.name||""}get node(){return this.m_pBlock.node?this.m_pBlock.node.label:""}get nodeOrphan(){return this.m_pBlock.node&&this.m_pBlock.node.cluster!==this.m_pBlock.condition.cluster?this.m_pBlock.node.label:""}}class Cs{constructor(e){this.m_bInitialized=!1,this.m_nUpdate=0,this.m_sCurrentName="",this.m_sCurrentLabel="",this.m_pCondition=e}static get label(){return this._()}static create(e,t,i){if(e instanceof Cs){if(e.condition!==t)return;return e}if(_(e)){const t=cs.active.conditionBlocks.ofType(e);if(!t)return;e=t}return new e(t).init(i)}get id(){return this.condition.id}get map(){return this.condition.map}get condition(){return this.m_pCondition}get isInitialized(){return this.m_bInitialized}get name(){return this.type.label}get labels(){return this.m_pLabels||(this.m_pLabels=new Ls(this))}get label(){return this.labels.node||this.labels.clusterOrphan||this.labels.branchOrphan||""}resolve(e,t){let i;if(C(t)){const s=this.condition.map;s&&s.forEach((s=>{if("slots"===e){if(s instanceof ys){const e=s.slot(t);if(e)return i=e,!0}}else if(s.id===t)return i=s,!0;return!1}),"slots"===e?"nodes":e)}return i}init(e){return e&&(wt("created",this),this.m_bInitialized=!0),this}assignedToCondition(e){return wt("assigned",this,e),()=>{this.m_sCurrentName=this.name,this.m_sCurrentLabel=this.label}}unassignedFromCondition(){return this.condition.unhookContext(this),wt("unassigned",this),this.serialize()}shouldBeDeleted(e){return this.type.context===e.type||!(!this.slot||this.slot.slots!==e.slots)}detectChange(){yi(this.map)}rerender(e=!1){const t=this.name,i=this.label;this.m_sCurrentName===t&&this.m_sCurrentLabel===i||(this.m_sCurrentName=t,this.m_sCurrentLabel=i,e=!0),e&&this.condition.rerender("update")}serialize(e={}){return ui(this,X(e,{type:this.type.identifier,version:this.type.version,branch:this.branch&&this.branch.id,cluster:this.cluster&&this.cluster.id,node:this.node&&this.node.id,slot:this.slot&&this.slot.id}))}deserialize(e,t){const i=t||new it;return hi(this,e,i),this.m_bInitialized||this.init(!0),i.add((()=>this.branch=this.resolve("branches",e.branch))),i.add((()=>this.cluster=this.resolve("clusters",e.cluster))),i.add((()=>this.node=this.resolve("nodes",e.node))),i.add((()=>this.slot=this.resolve("slots",e.slot))),i.add((()=>{ss(e.version)&&os(e.version,this.type.version)&&wt("upgraded",this,e.version)})),t||i.flush(),this}delete(e){if(!this.condition.isPopped){if(_(e)){const t=wt(`detached#${e}`,this);if(N(t))return void(this.m_nUpdate=Me((()=>{t()||this.condition.delete()}),this.m_nUpdate))}this.condition.delete()}}destroy(){this.m_nUpdate=we(this.m_nUpdate),wt("destroyed",this)}}yt([_s("#condition")],Cs.prototype,"branch",void 0),yt([_s("#condition")],Cs.prototype,"cluster",void 0),yt([_s("#condition")],Cs.prototype,"node",void 0),yt([_s("#condition")],Cs.prototype,"slot",void 0),yt([gi],Cs.prototype,"serialize",null),yt([mi],Cs.prototype,"deserialize",null);class Ds extends Ri{constructor(e){super(e)}get id(){return this.hash}get parent(){return this.matrix()}get predecessor(){return this.predecessorSibling instanceof Ds&&this.predecessorSibling||void 0}get successor(){return this.successorSibling instanceof Ds&&this.successorSibling||void 0}get map(){return this.grid}get branch(){return this.ancestor}get cluster(){const e=this.branch;return e&&e.cluster}get block(){return this.m_pBlock instanceof Cs&&this.m_pBlock||void 0}get blockTypeIdentifier(){return this.m_pBlock instanceof Cs?this.m_pBlock.type.identifier:this.m_pBlock?this.m_pBlock.type:""}get hasBlock(){return!!this.m_pBlock}get isBlockInvalid(){return!(!this.m_pBlock||this.m_pBlock instanceof Cs)}get disabled(){return this.m_bDisabled}set disabled(e){this.m_bDisabled!==e&&(this.m_bDisabled=e,this.rerender("update"))}get type(){return this.block&&this.block.type}get name(){return this.block?this.block.name:""}get nameMarkdown(){var e;return this.m_pName||(this.m_pName=new es(this.name,{features:!0===(null===(e=this.block)||void 0===e?void 0:e.allowMarkdown)?Xi.Formatting|Xi.InlineCode:Xi.None,mentions:gs(this)})),this.m_pName}get label(){return this.block?this.block.label:""}unassignAndCache(e){this.m_pBlockCache||(this.m_pBlockCache={}),this.m_pBlockCache[e.type.identifier]=e.unassignedFromCondition()}getFromCache(e){if(this.m_pBlockCache){const t=this.m_pBlockCache[e];if(t){const i=Cs.create(e,this,!1);if(i){const e=new it;return i.deserialize(t,e),e.flush(),i}}}}onChange(e){1&e.reason&&this.block&&this.block.rerender(),yi(this.map),super.onChange(e)}onMove(e,t,i){super.onMove(e,t,i,"conditions")}rerender(e){this.m_pName=void 0,this.emitHook("OnRename",{}),super.rerender(e)}assignBlock(e){const t=this.block;return this.m_pBlock=Cs.create(e instanceof Cs?e:this.getFromCache(e.identifier)||e,this,!0),t&&this.unassignAndCache(t),this.m_pBlock&&this.m_pBlock.assignedToCondition(t)(),this.rerender("refresh"),t&&this.emitHook("OnBlockUnassign",{condition:this,block:t}),this.m_pBlock&&this.emitHook("OnBlockAssign",{condition:this,block:this.m_pBlock}),this.emitHook("OnBlockChange",{condition:this,block:this.m_pBlock}),yi(this.map),this.m_pBlock}unassignBlock(){const e=this.m_pBlock;if(this.m_pBlock=void 0,e&&(e instanceof Cs&&this.unassignAndCache(e),this.rerender("refresh"),e instanceof Cs))return this.emitHook("OnBlockUnassign",{condition:this,block:e}),this.emitHook("OnBlockChange",{condition:this,block:void 0}),yi(this.map),e}serialize(){const e={};return this.m_pBlock&&(e.block=this.m_pBlock instanceof Cs?this.m_pBlock.serialize():this.m_pBlock),X(super.serialize(),e)}deserialize(e,t){const i=t||new it;return super.deserialize(e,i),e.block?(this.m_pBlock=Cs.create(e.block.type,this,!1)||e.block,this.m_pBlock instanceof Cs&&(this.m_pBlock.deserialize(e.block,i),i.add(this.m_pBlock.assignedToCondition()))):this.m_pBlock=void 0,t||i.flush(),this}refresh(){return this.isPopped||(this.refreshed(),this.rerender("update")),this}refreshed(){return this.isPopped||(this.m_pName=void 0,this.emitHook("OnRename",{})),this}insertBefore(){if(!this.parent)throw new Error("The condition dispatcher is invalid.");return this.parent.insertBefore(this)}insertAfter(){if(!this.parent)throw new Error("The condition dispatcher is invalid.");return this.parent.insertAfter(this)}enable(){return this.disabled=void 0,this}disable(){return this.disabled=!0,this}duplicate(e){const t=this.serialize();return Fe(t,"id",(e=e||this.insertAfter()).id),e.deserialize(t),e.render(!1),e}delete(){return this.pop(),this}destroy(){this.block&&this.block.destroy(),this.m_pBlockCache=void 0,super.destroy()}}yt([Mi,It("OnDisable")],Ds.prototype,"disabled",null),yt([gi],Ds.prototype,"serialize",null),yt([mi],Ds.prototype,"deserialize",null);class As extends Pi{constructor(e,t){super(e,t)}get branch(){return this.parent}onDimensions(){const e=this.firstItem,t=this.lastItem;this.branch.offset=e&&t?t.rectangles.bottom-e.rectangles.top:0,yi(this.branch.map),super.onDimensions()}append(){return this.appendItem(new Ds(this))}insert(){return this.insertItem(new Ds(this))}insertBefore(e){return this.insertItemAtIndex(new Ds(this),e.index)}insertAfter(e){return this.insertItemAtIndex(new Ds(this),e.index+1)}deserialize(e,...t){return ee(t,(t=>{this.appendItem(new Ds(this)).deserialize(t,e)})),this}}class js extends Ti{constructor(e){super(e,xs,Ms),this.m_nOffset=0,this.m_sCulling="first",this.m_sTerminator="continuous",this.m_pConditions=new As(Ds,this),this.m_nSpacing=this.rectangles.spacingTop("children")}static get isValidating(){return this.m_bValidating}get id(){return this.hash}get parent(){return this.matrix()}get predecessor(){return this.predecessorSibling instanceof js&&this.predecessorSibling||void 0}get successor(){return this.successorSibling instanceof js&&this.successorSibling||void 0}get map(){return this.grid}get cluster(){return this.ancestor}get conditions(){return this.m_pConditions}get clusters(){return this.children}get spacing(){return this.m_nSpacing}get offset(){return this.m_nOffset}set offset(e){if(this.m_nOffset!==e){const t=this.parent;this.m_nOffset=e,this.applyResize("redraw"),t&&t.onDimensions()}}get culling(){return this.m_sCulling}set culling(e){this.m_sCulling!==e&&(this.m_sCulling=e,this.emitHook("OnCullingChange",{branch:this,culling:this.m_sCulling}),yi(this.map))}get terminator(){return"jump"!==this.m_sTerminator||this.m_pJump?"epilogue"!==this.m_sTerminator||this.m_pEpilogue?this.m_sTerminator:"abort":"continuous"}set terminator(e){("jump"!==e||this.m_pJump)&&("epilogue"!==e||this.m_pEpilogue||(this.m_pEpilogue={}),this.m_sTerminator!==e&&(this.m_sTerminator=e,this.emitHook("OnTerminatorChange",{branch:this,terminator:this.m_sTerminator,jump:this.jump,epilogue:"abort"===this.m_sTerminator&&this.m_pEpilogue||void 0}),yi(this.map)))}get jump(){if("jump"===this.terminator)return this.m_pJump}set jump(e){const t=this.m_sTerminator,i=this.m_pJump;e?(this.m_pJump=e,this.m_sTerminator="jump"):("jump"===this.m_sTerminator&&(this.m_sTerminator="continuous"),this.m_pJump=void 0),t===this.m_sTerminator&&i===this.m_pJump||(this.emitHook("OnTerminatorChange",{branch:this,terminator:this.m_sTerminator,jump:this.m_pJump,epilogue:void 0}),yi(this.map))}get epilogue(){if("epilogue"===this.terminator)return this.m_pEpilogue}set epilogue(e){const t=this.m_sTerminator,i=this.m_pEpilogue;e?(this.m_pEpilogue=e,this.m_sTerminator="epilogue"):("epilogue"===this.m_sTerminator&&(this.m_sTerminator="abort"),this.m_pEpilogue=void 0),t===this.m_sTerminator&&K(i,this.m_pEpilogue,!0)||(this.emitHook("OnTerminatorChange",{branch:this,terminator:this.m_sTerminator,jump:this.m_pJump,epilogue:this.m_pEpilogue}),yi(this.map))}get name(){return this.m_sName}set name(e){this.m_sName!==e&&(this.m_sName=e,this.rerender("update"))}onChange(e){1&e.reason&&(this.layout&&this.layout.beforeResize(this.rectangles),this.conditions.each((e=>{e.block&&e.block.rerender()}))),yi(this.map),super.onChange(e)}onMove(e,t,i){super.onMove(e,t,i,"branches")}forEachDescendant(e){return super.forEachDescendant(e)||this.conditions.each(e)}resize(e,t){if(this.isPopped&&this.rectangles.isShifted){const e=this.spacing+this.offset-this.rectangles.spacingTop("children");0!==e&&(this.rectangles.spacingTop("children",this.spacing+this.offset),this.clusters.each((t=>{t.shift(0,e)})))}return super.resize(e,t)}serialize(){const e={};if(this.conditions.count>0){const t=[];this.conditions.each((e=>{t.push(e.serialize())})),e.conditions=t}switch("first"!==this.culling&&(e.culling=this.culling),this.terminator){case"jump":this.m_pJump&&(e.jump=this.m_pJump.id);break;case"abort":case"epilogue":e.jump="abort",e.epilogue="epilogue"===this.terminator&&this.m_pEpilogue||void 0}return X(super.serialize("clusters"),e)}deserialize(e,t){const i=t||new it;switch(super.deserialize(e,i,"clusters"),this.conditions.deserialize(i,...e.conditions||[]),e.culling){case"each":case"all":case"none":this.culling=e.culling;break;default:this.culling="first"}return"abort"===e.jump?(this.m_pEpilogue=e.epilogue,this.m_sTerminator=this.m_pEpilogue?"epilogue":"abort"):(this.m_sTerminator="continuous",this.m_pEpilogue=void 0,C(e.jump)&&i.add((()=>{this.map&&this.map.forEach((t=>t.id===e.jump&&(this.m_pJump=t,this.m_sTerminator="jump",!0)),"clusters")}))),t||i.flush(),this}insertBefore(){if(!this.parent)throw new Error("The branch dispatcher is invalid.");return this.parent.insertBefore(this)}insertAfter(){if(!this.parent)throw new Error("The branch dispatcher is invalid.");return this.parent.insertAfter(this)}duplicate(e){const t=[],i=e=>(ee(e.conditions,(e=>{bs(t,e)})),ee(e.clusters,(e=>{ee(e.branches,(e=>{i(e)})),ee(e.nodes,(e=>{bs(t,e),ee(e.slots,(e=>{bs(t,e)}))})),bs(t,e)})),bs(t,e));return(e=e||this.insertAfter()).deserialize(fs(t,i(this.serialize()))),e.render(!0),e}delete(){return this.pop(),this}reset(){this.conditions.reset(),super.reset()}destroy(){this.conditions.destroy(),super.destroy()}}function Ts(e,t,i){Mt("assigned",e,t,i)}function zs(e){switch(e.type){case"node":return t=>{cs.get(e.namespace).nodeBlocks.register(t,e.identifier,_(e.alias)?[e.alias]:e.alias||[],(()=>e.label),e.version||"0.0.0",e.kind||"ui")};case"condition":return t=>{cs.get(e.namespace).conditionBlocks.register(t,e.identifier,_(e.alias)?[e.alias]:e.alias||[],(()=>e.label),e.context,e.version||"0.0.0")}}}function Es(e,t,i){Mt("destroyed",e,t,i)}function Os(e){return(t,i,s)=>Mt(`detached#${e}`,t,i,s)}function Ps(e,t,i){Mt("slots",e,t,i)}function Rs(e,t,i){Mt("unassigned",e,t,i)}function Hs(e,t,i){Mt("upgraded",e,t,i)}function Fs(e){return!(!e||64!==e.length||!/[A-Fa-f0-9]{64}/.test(e))}function Us(e,t=Xi.All,i="___"){return e&&es.parse(e,{features:t,mentions:{numberOfChars:64,parser:e=>{if(Fs(e))return{shift:64,text:i}}}}).text||""}function Bs(e,t=Xi.Formatting|Xi.InlineCode){return t&Xi.Formatting&&(e=e.replace(/[*_~\\]/g,"\\$&")),t&Xi.InlineCode&&(e=e.replace(/[`]/g,"\\$&")),t&Xi.Hyperlinks&&(e=e.replace(/[[]/g,"\\$&")),e}js.m_bValidating=!1,yt([Mi,It("OnRename")],js.prototype,"name",null),yt([gi],js.prototype,"serialize",null),yt([mi],js.prototype,"deserialize",null);class Ys extends ni{constructor(){if(super(),this.m_bInitialized=!1,this.m_bListening=!1,this.hook("OnItemPush","asynchronous",(()=>{this.hook("OnItemPop","synchronous",(()=>{wt("deleted",this),this.emitHook("OnDelete",{item:this}),this.m_pRef=void 0})),this.hook("OnItemChange","synchronous",(e=>{yi(this.ref instanceof ds&&this.ref.map||void 0),-193&e.reason&&(wt("reordered",this),this.emitHook("OnIndex",{item:this}))})),this.emitHook("OnAdd",{item:this}),this.m_bInitialized=this.m_bListening=!0})),this.hook("OnRename","synchronous",(()=>wt("renamed",this))),!C(Ye(this,"@name")))throw new Error("Tripetto: You need to implement the `@name` decorator for collection items.")}get editor(){if(!this.orchestratorForEditor)throw new Error("Tripetto: Cannot reference `this.editor` outside the `@editor` decorated function.");return this.orchestratorForEditor}get collection(){return this.parent}get id(){return this.hash}get ref(){return this.m_pRef||(this.m_pRef=this.collection.ref)}get isInitialized(){return this.m_bInitialized}get isDeleted(){return this.isPopped}get labelWithoutMarkdown(){return Us(this.getNameOfItem())}getIconOfItem(){return Ve(this,Ye(this,"@icon")||"")||void 0}getNameOfItem(){return Ve(this,Ye(this,"@name")||"")}setNameOfItem(e){Ue(this,Ye(this,"@name")||"",e)}getAliasOfItem(){return Ve(this,Ye(this,"@alias")||"")}setAliasOfItem(e){Ue(this,Ye(this,"@alias")||"",e)}getScoreOfItem(){const e=Ye(this,Ye(this,"@score")||"");return A(e)?e:void 0}setScoreOfItem(e){Ue(this,Ye(this,"@score")||"",e)}getTitleOfItem(){return Us(Ve(this,Ye(this,"@title")||"")||this.getNameOfItem())||this.getAliasOfItem()}getMenuOfItem(){return Ye(this,Ye(this,"@menu")||"")||[]}getWidthOfItem(){return G(Ye(this,Ye(this,"@width")||""))}serialize(){return ui(this,{id:this.id})}deserialize(e,t){return hi(this,e,t),this.hash=e.id,t.add((()=>this.m_bInitialized=!0)),this}open(){return He((()=>this.emitHook("OnOpen",{item:this}))),this}close(){return this.emitHook("OnClose",{item:this}),this}refresh(e){if(this.isInitialized)if(e)switch(e){case"icon":this.emitHook("OnIcon",{item:this});break;case"name":this.emitHook("OnRename",{item:this})}else wt("refreshed",this)}delete(){return this.pop(),this.m_bListening||wt("deleted",this),this}}yt([gi],Ys.prototype,"serialize",null),yt([mi],Ys.prototype,"deserialize",null);class Zs extends Cs{get editor(){if(!this.orchestratorForEditor)throw new Error("Tripetto: Cannot reference `this.editor` outside the `@editor` decorated function.");return this.orchestratorForEditor}get icon(){return this.type.icon}get title(){return this.type.label}assignedToCondition(e){this.condition.hook("OnRename","synchronous",(()=>wt("renamed",this)),this),wt("renamed",this);const t=super.assignedToCondition(e);return()=>{this.m_sCurrentIcon=this.icon,t()}}draw(e,t,i,s){}rerender(e=!1){this.m_sCurrentIcon!==this.icon&&(this.m_sCurrentIcon=this.icon,e=!0),super.rerender(e)}open(e){return!1}serialize(e={}){return ee(Ye(this,"@definition #collections"),(t=>{if("r"!==t.mode&&this.node&&this.node.block&&Ye(this.node.block,t.collection)instanceof ka){const i=Ye(this,t.property);i instanceof Ys&&(e[t.property]=i.id)}})),super.serialize(e)}deserialize(e,t){return super.deserialize(e,t),t.add((()=>{ee(Ye(this,"@definition #collections"),(t=>{if("w"!==t.mode&&this.node&&this.node.block){const i=Ye(this.node.block,t.collection);Ue(this,t.property,i instanceof ka&&i.itemByIdentifier(W(e[t.property]))||void 0)}}))})),this}}let Vs,Ws,Gs=0,$s=[],Qs=0,qs=!1,Xs=!1,Js=0,Ks=1;function eo(){Qs=-1,Js=0,qs=0===Ks,pe(Ws),Ws=void 0,to()}function to(){let e;if(-1===Qs&&Vs&&(e=Vs.shift(),e))return Js=e.id,Ks=e.type,Ws=e.proc,void(0!==Ks||qs?eo():Qs=ke((()=>{Xs?(Qs=ke((()=>eo())),Xs=!1):eo()})));Qs=0,Vs=void 0,io()}function io(){0===Qs&&$s.length>0&&(Vs=$s.splice(0,$s.length),Qs=-1,to())}function so(e,t,i,s){if(e){const o=e.length;for(let n=0;n<o;n++){const o=e[n];if(o.id===t)return s&&pe(o.proc),o.id=0,o.proc=void 0,i&&e.splice(n,1),!0}}return!1}function oo(){if($s.length>50){const e=Vs?Vs.splice(0,Vs.length):void 0,t=$s.splice(0,$s.length);return Qs=-1,Vs=void 0,$s=[],ee(e,(e=>{qs=qs&&0===e.type,pe(e.proc)})),ee(t,(e=>{qs=qs&&0===e.type,pe(e.proc)})),!0}return!1}function no(e,t=0,i=!1){return lo(t),0===Qs&&qs||i||oo()?(pe(e),0):($s.push({id:++Gs,type:0,proc:e}),io(),Gs)}function ro(e,t=!1,i=!1){return Xs=Xs||i,0===Qs||t||oo()?(qs=!1,pe(e),0):($s.push({id:++Gs,type:1,proc:e}),io(),Gs)}function ao(e,t=!1){return no((()=>ro(e,!1,t)))}function lo(e){return!(!A(e)||e<=0)&&(Js===e?(_e(Qs),Qs=-1,Js=0,Ws=void 0,to(),!0):so($s,e,!0,!1)||so(Vs,e,!1,!1))}function co(e,t){return[e[0]*t[0]+e[1]*t[3]+e[2]*t[6],e[0]*t[1]+e[1]*t[4]+e[2]*t[7],e[0]*t[2]+e[1]*t[5]+e[2]*t[8],e[3]*t[0]+e[4]*t[3]+e[5]*t[6],e[3]*t[1]+e[4]*t[4]+e[5]*t[7],e[3]*t[2]+e[4]*t[5]+e[5]*t[8],e[6]*t[0]+e[7]*t[3]+e[8]*t[6],e[6]*t[1]+e[7]*t[4]+e[8]*t[7],e[6]*t[2]+e[7]*t[5]+e[8]*t[8]]}function uo(e){return[e[4]*e[8]-e[5]*e[7],e[2]*e[7]-e[1]*e[8],e[1]*e[5]-e[2]*e[4],e[5]*e[6]-e[3]*e[8],e[0]*e[8]-e[2]*e[6],e[2]*e[3]-e[0]*e[5],e[3]*e[7]-e[4]*e[6],e[1]*e[6]-e[0]*e[7],e[0]*e[4]-e[1]*e[3]]}function ho(e,t,i,s,o,n,r,a){const l=[e,i,o,t,s,n,1,1,1];return co(l,function(e,t){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],0,0,0,t[3]*e[0]+t[4]*e[1]+t[5]*e[2],0,0,0,t[6]*e[0]+t[7]*e[1]+t[8]*e[2]]}([r,a,1],uo(l)))}function po(e){const t=(i=[0,0,e.width,0,0,e.height,e.width,e.height],co(ho((s=[e.leftTopX,e.leftTopY,e.rightTopX,e.rightTopY,e.leftBottomX,e.leftBottomY,e.rightBottomX,e.rightBottomY])[0],s[1],s[2],s[3],s[4],s[5],s[6],s[7]),uo(ho(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7]))));var i,s;return"matrix3d("+[t[0]/t[8],t[3]/t[8],0,t[6]/t[8],t[1]/t[8],t[4]/t[8],0,t[7]/t[8],0,0,1,0,t[2]/t[8],t[5]/t[8],0,1].join(",")+")"}class mo{constructor(e){this.m_bIsInDOM=!1,this.m_nId=mo.m_pEnumerator.n,this.m_pHTMLElement=mo.$(e)}static data(e,t,i){return this.attribute(e,"data-"+t,i)}static destroyData(e,t){this.destroyAttribute(e,"data-"+t)}static attribute(e,t,i){return e&&C(t)&&e.getAttribute?_(i)?(e.setAttribute(t,i),i):W(e.getAttribute(t)):""}static destroyAttribute(e,t){e&&C(t)&&e.removeAttribute&&e.removeAttribute(t)}static isInDOM(e){return!!e&&document.body.contains(e)}static isEqual(e,t){const i=e instanceof mo?e.HTMLElement:e,s=t instanceof mo?t.HTMLElement:t;return!(!i||!s)&&i.isEqualNode&&i.isEqualNode(s)}static $(e){return e instanceof mo?e.HTMLElement:C(e)?document.getElementById(e)||void 0:e||void 0}static $ignature(e){let i="",s="",o=-1;return e instanceof mo?(o=e.id,e=e.HTMLElement):_(e)&&(e=this.$(e)),e&&!_(e)&&(e instanceof Window?(i="Window",s="Window"):C(Ve(e,"tagName"))?(i=t.capitalize(Ve(e,"tagName"),"first-character",!0),s="HTMLElement"):(i="Document",s="DocumentElement"),-1!==o&&(s+=":"+t.padLeft(W(o),"0",8,!1,!0)),C(this.attribute(e,"id"))&&(s=this.attribute(e,"id"))),(C(i)?i+":":"")+(C(s)?s:"<Null>")}static removeChildren(e){if(e){let t=e.lastChild;for(;t;)e.removeChild(t),t=e.lastChild}}static destroyChildren(e){const t=this.isInDOM(e);ro((()=>{this.removeChildren(e)}),!t,t)}static destroy(e,t=!1,i){const s=this.isInDOM(e);s&&t&&this.destroyChildren(e),ro((()=>{e&&e.parentElement&&e.parentElement.removeChild(e),i&&i()}),!s,s)}get id(){return this.m_nId}get hash(){const e=this.HTMLElement,t=ei(W(this.id));return e&&!C(e.id)&&(e.id=t),t}get HTMLElement(){return this.m_pHTMLElement}get exists(){return!!this.HTMLElement}get isInDOM(){return this.m_bIsInDOM&&this.exists||(this.m_bIsInDOM=mo.isInDOM(this.HTMLElement))}get parent(){const e=this.HTMLElement;if(e&&e.parentElement)return new mo(e.parentElement)}get firstChild(){const e=this.HTMLElement;if(e&&e.firstElementChild)return new mo(e.firstElementChild)}get childCount(){const e=this.HTMLElement;return e?G(e.childElementCount):0}get depth(){if(this.isInDOM){const e=this.HTMLElement;if(e){let t=0,i=e.parentElement;for(;i;)t++,i=i.parentElement;return t}}return-1}get tagName(){const e=this.HTMLElement;return e?t.lowercase(e.tagName):""}get canvas(){const e=this.HTMLElementOfType();if(e&&e.getContext)return e.getContext("2d")||void 0}data(e,t){return mo.data(this.HTMLElement,e,t)}destroyData(e){mo.destroyData(this.HTMLElement,e)}attribute(e,t){return mo.attribute(this.HTMLElement,e,t)}destroyAttribute(e){mo.destroyAttribute(this.HTMLElement,e)}isEqual(e){return mo.isEqual(this,e)}isParentOf(e){let t=mo.$(e);for(;t;){if(mo.isEqual(this,t))return!0;t=t.parentElement}return!1}isChildOf(e){let t=this.HTMLElement;for(;t;){if(mo.isEqual(e,t))return!0;t=t.parentElement}return!1}HTMLElementOfType(){return this.HTMLElement?this.HTMLElement:void 0}destroy(){if(this.m_pHTMLElement){const e=this.m_pHTMLElement;return this.m_pHTMLElement=void 0,e}}}mo.m_pEnumerator=new l;class go extends mo{constructor(e){super(e),this.m_pEvents={}}static get isPassiveSupported(){if(!T(this.m_bPassive)){this.m_bPassive=!1;try{const e=()=>{};window.addEventListener("test",e,Object.defineProperty({},"passive",{get:()=>{this.m_bPassive=!0}})),window.removeEventListener("test",e)}catch(e){}}return this.m_bPassive}static options(e,t){return this.isPassiveSupported&&T(t)?{capture:e,passive:t}:e}static attachListener(e,t,i,s={},o=this){const n=this.$(e);return!(!n||!N(i)||(i=i.bind(o),ee(C(t)?[t]:z(t)?t:[],(t=>{if(C(t)&&n&&n.addEventListener){const r=Q(s.capture);let a,l;switch(s.sequencer){case"read":l=e=>no((()=>i(e)));break;case"write":l=e=>ro((()=>i(e)));break;case"write-thorough":l=e=>ro((()=>i(e)),!1,!0);break;case"write-after-read":l=e=>ao((()=>i(e)));break;default:l=i}s.limiter&&(a=new Ke(s.limiter,(e=>l(e)),s.timeout||0)),n.addEventListener(t,Ue(o,"$dom-event-listener-"+(e instanceof mo?`${e.id}-`:"")+t,{listener:e=>{e&&!e.cancelBubble&&(s.stopPropagation&&go.stopPropagation(e),a?a.invoke(e):l(e))},limiter:a,capture:r,passive:s.passive}).listener,go.options(r,s.passive)),st&&console.log(qe.log("DOM.EventListeners",`Attached event '${t}${s.limiter?"-"+s.limiter:""}' to asset '${this.$ignature(n)}' (${r?"capture mode":"bubble mode"})`))}})),0))}static detachListener(e,t,i=this){const s=this.$(e);return!!s&&(ee(C(t)?[t]:z(t)?t:[],(t=>{if(C(t)&&s&&s.addEventListener){const o="$dom-event-listener-"+(e instanceof mo?`${e.id}-`:"")+t,n=Ye(i,o);n&&(s.removeEventListener(t,n.listener,n.capture),n.limiter&&n.limiter.cancel(),$e(i,o),st&&console.log(qe.log("DOM.EventListeners",`Detach event '${t}' from asset '${this.$ignature(s)}' (${n.capture?"capture mode":"bubble mode"})`)))}})),!0)}static stopPropagation(e){k(e)&&(N(e.preventDefault)&&e.preventDefault(),N(e.stopPropagation)&&e.stopPropagation())}on(e,t,i={}){const s=this.HTMLElement;return!!s&&(t=t.bind(this),i.overwrite&&this.off(e),ee(C(e)?[e]:z(e)?e:[],(e=>{if(C(e)&&s&&s.addEventListener)if(Ye(this.m_pEvents,e)){if(!i.noOverwrite)throw new Error(`DOM.EventListeners: Another handler is already attached to event '${e}' for asset '${go.$ignature(this)}'`)}else{const o=Q(i.capture);let n,r;switch(i.sequencer){case"read":r=e=>no((()=>t(e)));break;case"write":r=e=>ro((()=>t(e)));break;case"write-thorough":r=e=>ro((()=>t(e)),!1,!0);break;case"write-after-read":r=e=>ao((()=>t(e)));break;default:r=t}i.limiter&&(n=new Ke(i.limiter,(e=>r(e)),i.timeout||0)),s.addEventListener(e,Ue(this.m_pEvents,e,{listener:e=>{e&&!e.cancelBubble&&(i.stopPropagation&&go.stopPropagation(e),n?n.invoke(e):r(e))},limiter:n,capture:o,passive:i.passive}).listener,go.options(o,i.passive)),st&&console.log(qe.log("DOM.EventListeners",`Attached event '${e}${i.limiter?"-"+i.limiter:""}' to asset '${go.$ignature(this)}' (${o?"capture mode":"bubble mode"})`))}})),!0)}off(e){if(C(e)){const t=e,i=Ye(this.m_pEvents,t);if(i){const e=this.HTMLElement;i.limiter&&i.limiter.cancel(),e&&e.removeEventListener&&e.removeEventListener(t,i.listener,i.capture),$e(this.m_pEvents,t),st&&console.log(qe.log("DOM.EventListeners",`Detach event '${t}' from asset '${go.$ignature(this)}'`))}}else ee(e,(e=>this.off(e)))}listensTo(e){return!!Ye(this.m_pEvents,e)}destroy(){return ee(Object.keys(this.m_pEvents),(e=>this.off(e))),super.destroy()}}class bo{constructor(e){this.m_pTypes=[],this.m_pPool=[],this.m_pPools={};const t=e.size||0;this.m_sName=e.name||"*",this.m_fnAllocate=e.onAllocate,this.m_fnRequest=e.onRequest,this.m_fnDispose=e.onDispose,e.types&&e.types.forEach((e=>{this.expand(e.size||0,e.type)})),this.expand(t)}get size(){let e=this.m_pPool.length;return this.m_pTypes.forEach((t=>{e+=this.m_pPools[t].length})),e}get types(){return this.m_pTypes}get(e){return e?this.m_pPools[e]?this.m_pPools[e]:(this.m_pTypes.push(e),this.m_pPools[e]=[]):this.m_pPool}allocate(e){return this.m_fnAllocate(e)}push(e,t,i){e.push(t),bo.profiler&&console.log(`Pool Name<${this.m_sName}> Type<${i||"*"}> Size<${e.length}>`)}expand(e,t){const i=this.get(t);for(;e--;)this.push(i,this.allocate(t),t)}shrink(e,t){const i=this.get(t);for(;e--;)i.pop()}request(e){const t=this.get(e).pop()||this.allocate(e);return this.m_fnRequest&&this.m_fnRequest(t,e),t}dispose(e,t){return this.m_fnDispose?this.m_fnDispose(e,(()=>{this.push(this.get(t),e,t)}),t):this.push(this.get(t),e,t),e}destroy(){this.m_pPool.length=0,this.m_pTypes.forEach((e=>{this.m_pPools[e].length=0}))}}bo.profiler=!1;const fo=["-webkit-","-khtml-","-moz-","-ms-","-o-"],yo={"backdrop-filter":!0,"backface-visibility":!0,"box-sizing":!0,filter:!0,perspective:!0,"perspective-origin":!0,transition:!0,"transition-delay":!0,"transition-duration":!0,"transition-property":!0,"transition-timing-function":!0,transform:!0,"transform-origin":!0,"transform-style":!0,appearance:!0,"text-size-adjust":!0,"user-select":!0},vo={"box-flex":!0,"box-flex-group":!0,"column-count":!0,flex:!0,"flex-grow":!0,"flex-positive":!0,"flex-shrink":!0,"flex-negative":!0,"font-weight":!0,"line-clamp":!0,"line-height":!0,opacity:!0,order:!0,orphans:!0,"tab-size":!0,widows:!0,"z-index":!0,zoom:!0,"fill-opacity":!0,"stroke-dashoffset":!0,"stroke-opacity":!0,"stroke-width":!0},Mo={padding:!0,margin:!0};for(const e of Object.keys(vo))for(const t of fo)vo[t+e]=!0;class wo extends go{constructor(e,t){super(e),this.m_bElevated=!1,this.m_bTransitions=!0,this.m_nTransitionTimeout=0,this.m_sTransformationPrefix="",this.m_sTransformationTranslate="",this.m_sTransformationScale="",t&&t(this)}static get MAX_OPACITY(){return 100}static get ZINDEX_LAYERS(){return 1e7}static get ZINDEX_FLOATING(){return 2e7}static get ZINDEX_ELEVATED(){return 3e7}static get ZINDEX_MODAL(){return 4e7}static get ZINDEX_SCROLLBARS(){return 4e7}static get ZINDEX_MENU(){return 5e7}static prefix(e){return!!yo[e]}static hyphenate(e){return t.sanitize(e).replace(/([A-Z])/g,"-$1").replace(/^webkit-/,"-webkit-").replace(/^ms-/,"-ms-").replace(/^moz-/,"-moz-").replace(/^o-/,"-o-").toLowerCase()}static extendStyles(e){if(z(e)){const t=e;return 1===t.length&&t[0]?t[0]:J(...t)}return e}static parseStylesToRules(e,i,s,o,n,r,a,l){const c=[];let u,h="",d="",p=-1,m=!1;if(u=C(e=t.sanitize(e)),s=s&&u,o){if(u){ee(fo,(t=>{this.parseStylesToRules(`@${t}keyframes ${e}`,i,!1,!1,!0,r,"")}));const t=this.parseStylesToRules(`@keyframes ${e}`,i,!1,!1,!0,r,"");t.isEmpty||(h+=t.hash)}}else p=r.push({selector:e,properties:c,atRule:a}),u&&(h=a+e),ee(this.extendStyles(i),((i,o)=>{if(k(i)){if(s||n){const u=t.sanitize(o);C(u)&&(l&&N(l[u])?c.push(...l[u](i)):n||"@"!==u.charAt(0)?d+=this.parseStylesToRules(n?u:-1!==u.indexOf("&")?u.replace(/&/g,e):`${e} ${u}`,i,s&&!n,!1,!1,r,n?e:a,l).hash:d+=this.parseStylesToRules(e,i,s,!1,!1,r,u,l).hash)}}else if(!n){const e=this.hyphenate(o);if(C(e)){let s;z(i)?(s="",ee(i,(t=>{let i;i=A(t)&&0!==t&&!vo[e]?`${t}px`:W(t),vo[e]?s=i:s+=(""===s?"":Mo[e]?" ":",")+i}))):s=A(i)&&0!==i&&!vo[e]?`${i}px`:W(i),s=s.replace(/([\{\}\[\]])/g,"\\$1"),C(s)&&(c.push({name:e,value:s}),this.prefix(e)&&ee(fo,(i=>{switch(e){case"transition":case"transition-property":s=t.replace(s,"transform",i+"transform"),s=t.replace(s,"perspective",i+"perspective")}c.push({name:i+e,value:s})})))}}}),{keys:!0}),c.length>0?(c.sort(((e,t)=>e.name>t.name?1:-1)),(u||s)&&ee(c,(e=>{h+=`${e.name}:${e.value};`}))):p>0&&(r.splice(p-1,1),h=""),h+=d;return m=C(h),u&&(o||1===p)&&(h=So.hash(h,o?"a":"c"),ee(r,(e=>{o?e.atRule=e.atRule.replace(/&/g,h):e.selector=e.selector.replace(/&/g,`.${h}`)}))),{rules:r,hash:h,isEmpty:!m}}static of(e){return e instanceof wo?e:new wo(e)}static apply(e,t){return new wo(e,t)}static set(e,i,s,o=!0,n=!1){if(e&&C(i)){let r;z(s)?(r="",ee(s,(e=>{let t;t=A(e)&&0!==e&&!vo[i]?`${e}px`:W(e),vo[i]?r=t:r+=(""===r?"":Mo[i]?" ":",")+t}))):r=A(s)&&0!==s&&!vo[i]?`${s}px`:W(s),(n=n||-1!==r.indexOf("!important"))&&(r=t.trim(t.replace(r,"!important",""))),o&&this.prefix(i)&&ee(fo,(s=>{switch(i){case"transition":case"transition-property":r=t.replace(r,"transform",s+"transform"),r=t.replace(r,"perspective",s+"perspective")}this.set(e,s+i,r,!1,n)})),n?e.style.setProperty(i,r,n?"important":""):e.style.setProperty(i,r)}}static get(e,t,i=!0,s){if(e&&C(t)){let o="";if(this.prefix(t))for(let n=0;n<P(fo);n++)if(o=this.get(e,fo[n]+t,i,s),C(o))return o;if(i){const i=window.getComputedStyle(e,C(s)?s:void 0);if(k(i)&&(o=i.getPropertyValue(t),C(o)))return o}return W(e.style.getPropertyValue(t))}return""}static styles(e,t){ee(t,((t,i)=>{this.set(e,this.hyphenate(i),t,!0)}),{keys:!0})}static stylesToRules(e,t,i,s,o){return this.parseStylesToRules(e,t,i,s,!1,[],"",o)}static stylesToString(e){const t=this.stylesToRules("",e,!1,!1).rules;let i="";return P(t)>0&&ee(t[0].properties,(e=>{i+=`${e.name}:${e.value};`})),i}static pointerEvents(e,t){return T(t)?(this.set(e,"pointer-events",t?"auto":"none"),t):"none"!==this.get(e,"pointer-events")}static zIndex(e,t){let i;return D(t)||"auto"===t||"inherit"===t?(this.set(e,"z-index","auto"===t?"auto":"inherit"===t?"":t),"inherit"===t?0:t):(i=this.get(e,"z-index",!1),C(i)&&"auto"!==i?G(i):"auto")}static opacity(t,i){return"inherit"===i?(this.set(t,"opacity",""),100):D(i)?(i=e.range(i,0,100),this.set(t,"opacity",.01*i),i):G(100*$(this.get(t,"opacity")))}static transition(e,t){let i;return _(t)?(this.set(e,"transition","inherit"===t?"":C(t)?t:"none"),t):(i=this.get(e,"transition"),""===i||"all 0s ease 0s"===i?"inherit":"none"!==i?i:"")}static transformation(e,t){let i;return _(t)?(this.set(e,"transform",C(t)?t:""),t):(i=this.get(e,"transform",!1),C(i)||(i=this.get(e,"transform",!0)),"none"!==i?i:"")}static class(e,i){return e?(_(i)&&(e.className=t.sanitize(i)),e.className):""}static addClass(e,i){let s;return C(i)?e&&e.classList?(e.classList.add(i),wo.class(e)):(s=wo.class(e),this.class(e,t.sanitize(s+(-1===String(` ${s} `).indexOf(` ${t.sanitize(i)} `)?" "+i:"")))):wo.class(e)}static removeClass(e,i){return C(i)?e&&e.classList?(e.classList.remove(i),wo.class(e)):this.class(e,t.sanitize(t.replace(` ${wo.class(e)} `,` ${t.sanitize(i)} `," "))):wo.class(e)}static toggleClass(e,t){return C(t)?e&&e.classList?(e.classList.toggle(t),wo.class(e)):this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t):wo.class(e)}static setClass(e,t,i){return i?this.addClass(e,t):this.removeClass(e,t)}static hasClass(e,i){return!(!C(i)||!e)&&(e.classList?e.classList.contains(i):-1!==String(` ${wo.class(e)} `).indexOf(` ${t.sanitize(i)} `))}get class(){return wo.class(this.HTMLElement)}set class(e){wo.class(this.HTMLElement,e)}get styles(){const e=this.HTMLElement;return e?e.style:{}}set styles(e){wo.styles(this.HTMLElement,e)}get pointerEvents(){return wo.pointerEvents(this.HTMLElement)}set pointerEvents(e){wo.pointerEvents(this.HTMLElement,e)}get zIndex(){return A(this.m_nZIndex)?this.m_nZIndex:"auto"===this.m_nZIndex?"auto":this.m_nZIndex=wo.zIndex(this.HTMLElement)}set zIndex(e){this.m_nZIndex!==e&&(this.m_nZIndex="inherit"===e?void 0:e,this.m_bElevated||wo.zIndex(this.HTMLElement,e))}set elevate(e){0!==e!==this.m_bElevated&&(this.m_bElevated=0!==e,this.m_bElevated&&!A(this.m_nZIndex)&&(this.m_nZIndex=wo.zIndex(this.HTMLElement)),wo.zIndex(this.HTMLElement,this.m_bElevated?(A(this.m_nZIndex)?this.m_nZIndex:G(this.get("z-index",!0)))+e:A(this.m_nZIndex)||"auto"===this.m_nZIndex?this.m_nZIndex:"inherit"))}get elevated(){return this.m_bElevated}set elevated(e){e?(this.transitions=!1,this.elevate=3e7):this.transitionActivate((()=>this.elevate=0))}get opacity(){return wo.opacity(this.HTMLElement)}set opacity(e){wo.opacity(this.HTMLElement,e)}get transition(){return _(this.m_sTransition)?this.m_sTransition:this.m_sTransition=wo.transition(this.HTMLElement)}set transition(e){this.m_sTransition=e,this.m_bTransitions&&wo.transition(this.HTMLElement,e)}get onTransitionEnd(){return this.m_fnTransitionEnd}set onTransitionEnd(e){this.m_fnTransitionEnd=e,e?this.on(["webkitTransitionEnd","oTransitionEnd","transitionend"],(t=>{e(t.propertyName,G(1e3*t.elapsedTime))}),{overwrite:!0}):this.off(["webkitTransitionEnd","oTransitionEnd","transitionend"])}get transitions(){return this.m_bTransitions}set transitions(e){this.m_bTransitions!==e&&(this.m_bTransitions=e,this.m_bTransitions||_(this.m_sTransition)||(this.m_sTransition=wo.transition(this.HTMLElement)),wo.transition(this.HTMLElement,this.m_bTransitions?this.m_sTransition:""))}transitionActivate(e,t=250){pe(this.onTransitionEnd,"",0),this.onTransitionEnd=()=>{this.m_nTransitionTimeout=Ce(this.m_nTransitionTimeout),this.onTransitionEnd=void 0,e()},this.transitions=!0,no((()=>{const e=this.get("transition-duration",!0);C(e)&&"0s"!==e?this.m_nTransitionTimeout=Le((()=>pe(this.onTransitionEnd,"",0)),t):pe(this.onTransitionEnd,"",0)}))}get onAnimationStart(){return this.m_fnAnimationStart}set onAnimationStart(e){this.m_fnAnimationStart=e,e?this.on(["webkitAnimationStart","oAnimationStart","animationstart"],(t=>{e(t.animationName)}),{overwrite:!0}):this.off(["webkitAnimationStart","oAnimationStart","animationstart"])}get onAnimationEnd(){return this.m_fnAnimationEnd}set onAnimationEnd(e){this.m_fnAnimationEnd=e,e?this.on(["webkitAnimationEnd","oAnimationEnd","animationend"],(t=>{e(t.animationName,G(1e3*t.elapsedTime))}),{overwrite:!0}):this.off(["webkitAnimationEnd","oAnimationEnd","animationend"])}get transformation(){return _(this.m_sTransformation)?this.m_sTransformation:this.m_sTransformation=wo.transformation(this.HTMLElement)}set transformation(e){this.m_sTransformation!==e&&(this.m_sTransformation=e,wo.transformation(this.HTMLElement,(C(this.m_sTransformationTranslate)?this.m_sTransformationTranslate+" ":"")+(C(this.m_sTransformationScale)?this.m_sTransformationScale+" ":"")+(C(this.m_sTransformationPrefix)?this.m_sTransformationPrefix+" ":"")+`${C(e)?e:""}`))}set transformationPrefix(e){this.m_sTransformationPrefix!==e&&(this.m_sTransformationPrefix=e,wo.transformation(this.HTMLElement,(C(this.m_sTransformationTranslate)?this.m_sTransformationTranslate+" ":"")+(C(this.m_sTransformationScale)?this.m_sTransformationScale+" ":"")+(C(e)?e+" ":"")+`${C(this.m_sTransformation)?this.m_sTransformation:""}`))}apply(e,t=!0){return t?ro((()=>this.apply(e,!1)),!this.isInDOM):e(this),this}set(e,t){wo.set(this.HTMLElement,e,t)}get(e,t=!0,i){return wo.get(this.HTMLElement,e,t,i)}animate(e,t,i=!1,s="safe"){"frame"!==s?(this.onAnimationEnd=(s,o)=>{i&&ro((()=>this.removeClass(e))),Pe(t,W(s),G(o)),this.onAnimationEnd=void 0},ro((()=>{this.addClass(e),no((()=>{const e=this.get("animation-name");C(e)&&"none"!==e||pe(this.onAnimationEnd,"",0)}))}),"synchronous"===s||!this.isInDOM)):Pe((()=>this.animate(e,t,i,"safe")))}transcale(e,t,i,s=!0){this.m_sTransformationTranslate=A(e)&&A(t)&&(s||0!==e||0!==t)?`translate${s?"3d":""}(${e}px,${t}px${s?",0px":""})`:"",this.m_sTransformationScale=A(i)&&1!==i?`scale${s?"3d":""}(${i}${s?`,${i},1`:""})`:"",wo.transformation(this.HTMLElement,(C(this.m_sTransformationTranslate)?this.m_sTransformationTranslate+" ":"")+(C(this.m_sTransformationScale)?this.m_sTransformationScale+" ":"")+(C(this.m_sTransformationPrefix)?this.m_sTransformationPrefix+" ":"")+`${C(this.m_sTransformation)?this.m_sTransformation:""}`)}addClass(e){return wo.addClass(this.HTMLElement,e)}addClassSafe(e,t=!1){t?ke((()=>this.addClassSafe(e,!1))):ro((()=>this.addClass(e)),!this.isInDOM)}removeClass(e){return wo.removeClass(this.HTMLElement,e)}removeClassSafe(e,t=!1){t?ke((()=>this.removeClassSafe(e,!1))):ro((()=>this.removeClass(e)),!this.isInDOM)}toggleClass(e){return wo.toggleClass(this.HTMLElement,e)}toggleClassSafe(e,t=!1){t?ke((()=>this.toggleClassSafe(e,!1))):ro((()=>this.toggleClass(e)),!this.isInDOM)}setClass(e,t){return t?this.addClass(e):this.removeClass(e)}setClassSafe(e,t,i=!1){i?ke((()=>this.setClassSafe(e,t,!1))):ro((()=>this.setClass(e,t)),!this.isInDOM)}hasClass(e){return wo.hasClass(this.HTMLElement,e)}selector(e,t){return this.setClass(So.selectorHash(e),t)}selectorSafe(e,t,i=!1){i?ke((()=>this.selectorSafe(e,t,!1))):ro((()=>this.selector(e,t)),!this.isInDOM)}addSelector(e){return this.addClass(So.selectorHash(e))}addSelectorSafe(e,t=!1){t?ke((()=>this.addSelectorSafe(e,!1))):ro((()=>this.addSelector(e)),!this.isInDOM)}removeSelector(e){return this.removeClass(So.selectorHash(e))}removeSelectorSafe(e,t=!1){t?ke((()=>this.removeSelectorSafe(e,!1))):ro((()=>this.removeSelector(e)),!this.isInDOM)}toggleSelector(e){return this.toggleClass(So.selectorHash(e))}toggleSelectorSafe(e,t=!1){t?ke((()=>this.toggleSelectorSafe(e,!1))):ro((()=>this.toggleSelector(e)),!this.isInDOM)}hasSelector(e){return this.hasClass(So.selectorHash(e))}animateSelector(e,t,i=!1,s="safe"){this.animate(So.selectorHash(e),t,i,s)}destroy(){return this.m_nTransitionTimeout=Ce(this.m_nTransitionTimeout),super.destroy()}}class xo{constructor(t,i,s,o,n){if(this.m_sClass=W(n),C(i)&&(this.m_pRule=xo.getFromSelector(t.CSSStyleRules,i),s)){const n=this.sheet||t.sheet;if(n&&(A(o)||(o=this.index),-1===o&&(o=So.count(n)),A(o))){const t=wo.stylesToString(s);this.delete(),o=e.range(o,0,So.count(n)),"insertRule"in n?n.insertRule(`${i} { ${t} }`,o):"addRule"in n&&n.addRule(i,t,o),this.m_pRule=xo.getFromSelector(n.cssRules||n.rules,i)}}}static getFromSelector(e,t){return C(t)?ue(e,(e=>e.selectorText===t)):void 0}static getSelectorIndex(e,t){let i=-1;return C(t)&&ue(e,(e=>(i++,e.selectorText===t)))?i:-1}get sheet(){return this.m_pRule&&this.m_pRule.parentStyleSheet?this.m_pRule.parentStyleSheet:void 0}get selector(){return this.m_pRule?this.m_pRule.selectorText:""}get class(){return this.m_sClass}get index(){const e=this.sheet;return e?xo.getSelectorIndex(e.cssRules||e.rules,this.selector):-1}get CSS(){return this.m_pRule?this.m_pRule.style.cssText:""}get styles(){return this.m_pRule?this.m_pRule.style:{}}set styles(e){wo.styles(this.m_pRule,e)}set(e,t,i=!1){wo.set(this.m_pRule,e,t,!0,i)}get(e){return wo.get(this.m_pRule,e,!1)}delete(){const e=this.sheet;if(this.m_pRule&&e){const t=this.index;if(-1!==t)return"deleteRule"in e?e.deleteRule(t):"removeRule"in e&&e.removeRule(t),this.m_pRule=void 0,!0}return!1}}class So{constructor(e=!0,t="",i){this.m_nReflection=0,this.m_pStylesheets=[],this.m_pClasses={},this.m_pRules={},this.m_sMedia=t,this.m_pTarget=on.$(i),this.m_bAutoReflection=e,this.m_bNeedReflection=!1}static get pool(){return this.m_pPool||(this.m_pPool=new bo({onAllocate:()=>{const e=document.createElement("style");return e.setAttribute("type","text/css"),e},onRequest:e=>{e.textContent="",e.removeAttribute("media")},onDispose:(e,t)=>{on.destroy(e,!1,t)}}))}static get app(){return this.m_pApplication||(this.m_pApplication=new So(!0))}static get screen(){return this.m_pScreen||(this.m_pScreen=new So(!0,"screen"))}static get print(){return this.m_pPrint||(this.m_pPrint=new So(!0,"print"))}static get prefix(){return this.m_sPrefix}static set prefix(e){this.m_sPrefix=e}static hash(e,i){return t.djb2Hash(e,`${this.prefix}${""===this.prefix?"":"-"}${i}`)}static count(e){return e?P(e.cssRules||e.rules):0}static create(e=!0,t="",i){return new So(e,t,i)}static selectorHash(e){const t=this.m_pSelectors[e];return _(t)?t:this.m_pSelectors[e]=this.hash(e,"s")}static selector(e,t="&"){return t+"."+this.selectorHash(e)}static selectors(...e){let t="";return ee(e,(e=>{t+=(""===t?"":",")+this.selector(e)})),t}get parsers(){return{"@keyframes":e=>[{name:"animation-name",value:this.animation(e)}]}}get sheets(){const e=[];return ee(this.m_pStylesheets,(t=>{if(t){const i=t.sheet;i&&e.push(i)}})),e}get sheet(){return this.reflect(!0)}get count(){let e=0;return ee(this.sheets,(t=>{e+=So.count(t)})),e}get CSSStyleRules(){const e=[];return ee(this.sheets,(t=>{ee(t.cssRules||t.rules,(t=>{t&&e.push(t)}))})),e}get CSSText(){let e="";return ee(this.m_pRules,(t=>{e+=t.rules})),e}get rules(){const e=[];return ee(this.CSSStyleRules,(t=>{e.push(new xo(this,t.selectorText))})),e}reflect(e){let t;if(this.reflectCancel(),this.m_pStylesheets)if(e&&0===P(this.m_pStylesheets)||this.m_bNeedReflection){if(t=So.pool.request(),t&&(C(this.m_sMedia)&&t.setAttribute("media",this.m_sMedia),this.write(t)||e)){const e=on.isInDOM(this.m_pTarget||document.head);ro((()=>{const e=this.m_pTarget||document.head;e&&e.appendChild(t)}),!e,e),this.m_pStylesheets.push(t),st&&console.log(qe.log("DOM.Stylesheet","Flush stylesheet"))}}else t=F(this.m_pStylesheets);return t?t.sheet:void 0}reflectSchedule(){this.m_bNeedReflection=!0,this.m_bAutoReflection&&0===this.m_nReflection&&(this.m_nReflection=no((()=>{this.m_nReflection=0,this.reflect(!1)})))}reflectCancel(){0!==this.m_nReflection&&(lo(this.m_nReflection),this.m_nReflection=0)}stringify(e){let t="",i="";return ee(e,(e=>{e.atRule!==i&&(""!==i&&(t+="}"),i=e.atRule,""!==i&&(t+=`${i}{`)),t+=`${e.selector}{`,ee(e.properties,(e=>{t+=`${e.name}:${e.value};`})),t+="}"})),""!==i&&(t+="}"),t}cache(e){return e.isEmpty||this.m_pRules[e.hash]||(this.m_pRules[e.hash]={rules:this.stringify(e.rules),isReflected:!1},this.reflectSchedule()),e}write(e){if(this.m_bNeedReflection){let t="";if(ee(this.m_pRules,(e=>{e.isReflected||(t+=e.rules,e.isReflected=!0)})),this.m_bNeedReflection=!1,""!==t)return e.textContent=t,!0}return!1}static(e,t){this.cache(wo.stylesToRules(e,t,!0,!1,this.parsers))}style(e){const t=wo.stylesToRules("&",e,!0,!1,this.parsers);return t.isEmpty?"":this.cache(t).hash}styleAsset(e,t){e.addClass(this.style(t))}styleAssetSafe(e,t){e.addClassSafe(this.style(t))}animation(e,t){const i=wo.stylesToRules(t||"&",e,!1,!0);return i.isEmpty?"":(this.cache(i),t||i.hash)}rule(e={}){const t=So.hash(`rule.${So.m_pEnumerator.n}`,"r");return new xo(this,`.${t}`,e,-1,t)}insertRule(e,t={},i){return new xo(this,e,t,0,this.m_pClasses[e]=i)}insertRuleAt(e,t,i={},s){return new xo(this,t,i,e,this.m_pClasses[t]=s)}addRule(e,t={},i){return new xo(this,e,t,-1,this.m_pClasses[e]=i)}getRule(e){return new xo(this,e,void 0,void 0,this.m_pClasses[e])}deleteRule(e){return new xo(this,e).delete()}flush(){this.reflect(!1)}destroy(){this.reflectCancel(),ee(this.m_pStylesheets,(e=>So.pool.dispose(e))),this.m_pClasses={},this.m_pRules={},this.m_bNeedReflection=!1,this!==So.app&&this!==So.screen&&this!==So.print?(this.m_pStylesheets=void 0,this.m_pTarget=void 0):this.m_pStylesheets=[]}}function Io(e,t=So.app){ee(e,((e,i)=>{t.static(i,e)}),{keys:!0})}function ko(e=So.app){Io({"*":{webkitTouchCallout:"none",webkitTapHighlightColor:"transparent",touchAction:"none",textRendering:"optimizeLegibility",userSelect:"none",boxSizing:"border-box",cursor:"default","&:focus":{outline:"none"}},"input[type='text']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='password']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='email']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='search']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},textarea:{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}}},e),e.static("html",{textSizeAdjust:"none"}),e.static("body",{overflow:"hidden"})}So.m_pEnumerator=new l,So.m_sPrefix="",So.m_pSelectors={};class No{static get isInteractive(){return this.m_bInteractive}static get isComplete(){return this.m_bComplete}static get isUnloading(){return this.m_bUnloading}static get isVisible(){return this.isComplete&&!this.isUnloading&&!this.m_bHidden}static get isActive(){return this.m_bActive&&this.isVisible&&document.hasFocus()}static attach(){this.m_bInitialized||("interactive"===document.readyState?this.m_bInteractive=!0:"complete"===document.readyState&&(this.m_bInteractive=!0,this.m_bComplete=!0),this.isInteractive||this.isComplete||go.attachListener(document,"readystatechange",this.onReadyStateChange,{capture:!0},this),this.isInteractive||go.attachListener(document,"DOMContentLoaded",this.onInteractive,{capture:!0},this),this.isComplete||go.attachListener(window,"load",this.onComplete,{capture:!0},this),go.attachListener(document,"visibilitychange",this.onVisibility,{capture:!0},this),go.attachListener(window,"unload",this.onUnload,{capture:!0},this),go.attachListener(window,"focus",this.onFocus,{capture:!0},this),go.attachListener(window,"blur",this.onBlur,{capture:!0},this),this.m_bInitialized=!0)}static onReadyStateChange(){switch(st&&console.log(qe.log("DOM.Application",`DOM state changed to '${document.readyState}'`)),document.readyState){case"interactive":this.onInteractive();break;case"complete":this.onComplete()}}static onInteractive(){go.detachListener(document,"DOMContentLoaded",this),this.isInteractive||(st&&console.log(qe.log("DOM.Application","DOM interactive")),this.m_bInteractive=!0,this.observe())}static onComplete(){go.detachListener(document,"DOMContentLoaded",this),go.detachListener(document,"readystatechange",this),go.detachListener(window,"load",this),this.isComplete||(st&&console.log(qe.log("DOM.Application","DOM complete")),this.m_bInteractive=!0,this.m_bComplete=!0,this.observe())}static onUnload(){this.isInteractive&&!this.isUnloading&&(st&&console.log(qe.log("DOM.Application","Unloading application")),this.m_bUnloading=!0,ee(this.m_pApplications,(e=>{N(e.do)||(pe(e.onUnload,e.payload),e.onUnload=void 0)})),this.m_pApplications=[])}static onVisibility(){"unloaded"!==document.visibilityState?this.isInteractive&&this.m_bHidden!==Q(document.hidden)&&(this.m_bHidden=Q(document.hidden),this.m_bHidden&&this.m_bActive&&(this.m_bActive=!1,ee(this.m_pApplications,(e=>{N(e.do)||pe(e.onDeactivate,e.payload)}))),ee(this.m_pApplications,(e=>{N(e.do)||pe(this.m_bHidden?e.onHide:e.onShow,e.payload)}))):this.onUnload()}static onFocus(e){e.target!==window||this.m_bActive||Pe((()=>{this.m_bActive=!0,ee(this.m_pApplications,(e=>{N(e.do)||pe(e.onActivate,e.payload)}))}))}static onBlur(e){e.target===window&&this.m_bActive&&(this.m_bActive=!1,ee(this.m_pApplications,(e=>{N(e.do)||pe(e.onDeactivate,e.payload)})))}static observe(){let e=!1;this.m_nHandle=_e(this.m_nHandle),ee(this.m_pApplications,(t=>{N(t.do)&&(!N(t.first)||Q(pe(t.first,t.payload))?t.first=void 0:this.isInteractive&&this.isComplete&&(e=!0),!N(t.when)||Q(pe(t.when,t.payload))?t.when=void 0:this.isInteractive&&this.isComplete&&(e=!0),N(t.first)||N(t.when)||!(!t.waitForComplete&&this.isInteractive||this.isComplete)||(st&&console.log(qe.log("DOM.Application","Bootstrapping application")),pe(t.do,t.payload),t.do=void 0))})),e&&(this.m_nHandle=ke((()=>this.observe())))}static run(e){if(e.waitForComplete=Q(e.waitForComplete,!0),N(e.do)){const t=!N(e.first)||Q(pe(e.first,e.payload)),i=!N(e.when)||Q(pe(e.when,e.payload));st&&console.log(qe.log("DOM.Application","Register new application")),e.desktopClass&&ko(),e.styleRules&&Io(e.styleRules),this.attach(),this.isInteractive&&(!e.waitForComplete||this.isComplete)&&t&&i?(st&&console.log(qe.log("DOM.Application","Bootstrapping application")),pe(e.do,e.payload),e.do=void 0,e.first=void 0,e.when=void 0):(t&&(e.first=void 0),i&&(e.when=void 0),this.m_pApplications.push(e))}}}function _o(e,t){if(t)return wo.set(e,"position",t),t;switch(wo.get(e,"position")){case"relative":return"relative";case"absolute":return"absolute";case"fixed":return"fixed"}return"static"}function Lo(e,t){if(t)return wo.set(e,"box-sizing",t+"-box"),t;switch(wo.get(e,"box-sizing")){case"border-box":return"border";case"padding-box":return"padding"}return"content"}function Co(e,t){if(t)return wo.set(e,"display",t),t;switch(wo.get(e,"display")){case"inline":return"inline";case"block":return"block"}return"none"}function Do(e,t,i){return T(t)?(wo.set(e,"visibility",t?i?"":"visible":"hidden"),t):"visible"===wo.get(e,"visibility")}function Ao(e,t){if(t)return wo.set(e,"overflow",t),t;switch(wo.get(e,"overflow")){case"hidden":return"hidden";case"scroll":return"scroll";case"auto":return"auto"}return"visible"}function jo(e,t){if(t)return wo.set(e,"overflow-x",t),t;switch(wo.get(e,"overflow-x")){case"hidden":return"hidden";case"scroll":return"scroll";case"auto":return"auto"}return"visible"}function To(e,t){if(t)return wo.set(e,"overflow-y",t),t;switch(wo.get(e,"overflow-y")){case"hidden":return"hidden";case"scroll":return"scroll";case"auto":return"auto"}return"visible"}function zo(e,t,i){if(e&&e.getBoundingClientRect){const s=e.getBoundingClientRect();if(s){let o=s.left,n=s.top,r=s.right,a=s.bottom;if(t){const t=wo.get(e,"border-left-width"),i=wo.get(e,"border-top-width");t.indexOf("px")>0&&(o+=G(t.replace("px",""))),i.indexOf("px")>0&&(n+=G(i.replace("px",""))),r=o+e.clientWidth,a=n+e.clientHeight}return new _i(i?{left:(i.left>=0?o:r)+i.left,top:(i.top>=0?n:a)+i.top,right:(i.right>=0?r:o)-i.right,bottom:(i.bottom>=0?a:n)-i.bottom}:{left:o,top:n,right:r,bottom:a})}}return new _i}function Eo(e){return zo(e).left}function Oo(e){return zo(e).top}function Po(e){return zo(e).right}function Ro(e){return zo(e).bottom}function Ho(e){return zo(e).width}function Fo(e){return zo(e).height}function Uo(e,t){let i;return D(t)||"auto"===t||"inherit"===t?(wo.set(e,"left","auto"===t?"auto":"inherit"===t?"":W(G(t))+"px"),"inherit"===t?0:t):(i=wo.get(e,"left"),C(i)&&"auto"!==i?G(i):"auto")}function Bo(e,t){let i;return D(t)||"auto"===t||"inherit"===t?(wo.set(e,"top","auto"===t?"auto":"inherit"===t?"":W(G(t))+"px"),"inherit"===t?0:t):(i=wo.get(e,"top"),C(i)&&"auto"!==i?G(i):"auto")}function Yo(e,t){let i;return D(t)||"auto"===t||"inherit"===t?(wo.set(e,"right","auto"===t?"auto":"inherit"===t?"":W(G(t))+"px"),"inherit"===t?0:t):(i=wo.get(e,"right"),C(i)&&"auto"!==i?G(i):"auto")}function Zo(e,t){let i;return D(t)||"auto"===t||"inherit"===t?(wo.set(e,"bottom","auto"===t?"auto":"inherit"===t?"":W(G(t))+"px"),"inherit"===t?0:t):(i=wo.get(e,"bottom"),C(i)&&"auto"!==i?G(i):"auto")}function Vo(t,i,s){let o;return s=Q(s),D(i)||"auto"===i||"inherit"===i?(s?"auto"===i||"inherit"===i?wo.destroyAttribute(t,"width"):wo.attribute(t,"width",W(e.max(G(i),0))):wo.set(t,"width","auto"===i?"auto":"inherit"===i?"":W(e.max(G(i),0))+"px"),"inherit"===i?0:i):(o=s?wo.attribute(t,"width"):wo.get(t,"width"),C(o)&&"auto"!==o?G(o):"auto")}function Wo(t,i,s){let o;return s=Q(s),D(i)||"auto"===i||"inherit"===i?(s?"auto"===i||"inherit"===i?wo.destroyAttribute(t,"height"):wo.attribute(t,"height",W(e.max(G(i),0))):wo.set(t,"height","auto"===i?"auto":"inherit"===i?"":W(e.max(G(i),0))+"px"),"inherit"===i?0:i):(o=s?wo.attribute(t,"height"):wo.get(t,"height"),C(o)&&"auto"!==o?G(o):"auto")}function Go(t,i){if(i){const s=("auto"===i.width?"auto":W(e.max(G(i.width),0))+"px")+" "+("auto"===i.height?"auto":W(e.max(G(i.height),0))+"px");return wo.set(t,"background-size",s),s}return wo.get(t,"background-size")}function $o(e,i){const s=A(i.x)||A(i.y);let o="";if(!A(i.x)||!A(i.y)||!Q(i.ignoreTransformations)){let n;if(o=wo.transformation(e),n=t.extract(o,{left:"translate3d(",right:")",ignoreCase:!0}),s&&(o=t.replace(o,"translate3d("+n+")","",!0)),C(n)||(n=t.extract(o,{left:"translate(",right:")",ignoreCase:!0}),s&&(o=t.replace(o,"translate("+n+")","",!0))),C(n)){const e=n.split(",");P(e)>=2&&(A(i.x)||(i.x=$(e[0])),A(i.y)||(i.y=$(e[1])))}if(!A(i.x)){const e=t.extract(o,{left:"translateX(",right:")",ignoreCase:!0});C(e)&&(s&&(o=t.replace(o,"translateX("+e+")","",!0)),i.x=$(e))}if(!A(i.y)){const e=t.extract(o,{left:"translateY(",right:")",ignoreCase:!0});C(e)&&(s&&(o=t.replace(o,"translateY("+e+")","",!0)),i.y=$(e))}A(i.x)||(i.x=0),A(i.y)||(i.y=0)}return s&&(i.translate3D=Q(i.translate3D,!0),wo.transformation(e,"translate"+(i.translate3D?"3d":"")+"("+i.x+"px,"+i.y+"px"+(i.translate3D?",0px":"")+")"+(C(o)?" "+o:""))),{x:i.x,y:i.y}}function Qo(t,i){return t?A(i)?t.scrollLeft=e.round(i):t.scrollLeft||0:0}function qo(t,i){return t?A(i)?t.scrollTop=e.round(i):t.scrollTop||0:0}function Xo(e){return e&&e.scrollWidth||0}function Jo(e){return e&&e.scrollHeight||0}function Ko(e,t,i){return void 0!==i?(Ue(e,t,i),i):Ye(e,t)}function en(t,i){return t?A(i)?t.tabIndex=e.range(i,-1,32767):t.tabIndex||G(mo.attribute(t,"tabindex"),-1):-1}function tn(e,t){return No.isActive&&wo.isInDOM(e)?(ro((()=>{No.isActive&&e&&wo.isInDOM(e)&&e.focus&&e.focus()}),!0),!0):!!t&&(No.isActive&&He((()=>tn(e,!0))),!0)}function sn(e){return!(!No.isActive||!wo.isInDOM(e)||(ro((()=>{No.isActive&&e&&wo.isInDOM(e)&&e.blur&&e.blur()}),!0),0))}No.m_bInitialized=!1,No.m_bInteractive=!1,No.m_bComplete=!1,No.m_bUnloading=!1,No.m_bActive=!0,No.m_bHidden=!1,No.m_pApplications=[],No.m_nHandle=0;class on extends wo{constructor(e,t){super(e),this.m_nZoom=1,this.m_nX=0,this.m_nY=0,this.m_sTranslate="no",t&&t(this)}static get isFocused(){return document.activeElement?this.of(document.activeElement):void 0}static get isFocusedOnInput(){const e=this.isFocused;return e instanceof on&&("textarea"===e.tagName||"input"===e.tagName||"select"===e.tagName)}static of(e){return e instanceof on?e:new on(e)}static assert(e){return this.of(e)}static apply(e,t){return new on(e,t)}static style(e,t,i=So.app){i.styleAsset(this.of(e),t)}static styleSafe(e,t,i=So.app){i.styleAssetSafe(this.of(e),t)}static create(e,t,i=document.body,s){const o=new on(document.createElement(e),t);if(o.HTMLElement){const e=i instanceof on?i.HTMLElement:this.$(i);if(e){const t=this.isInDOM(e);ro((()=>{e&&o.HTMLElement&&((s=this.$(s))?e.insertBefore(o.HTMLElement,s):e.appendChild(o.HTMLElement))}),!t,t),st&&console.log(qe.log("DOM.Properties",`Created new asset '${this.$ignature(o)}'`))}return o}}get parent(){const e=this.HTMLElement;if(e&&e.parentElement)return new on(e.parentElement)}get firstChild(){const e=this.HTMLElement;if(e&&e.firstElementChild)return new on(e.firstElementChild)}get lastChild(){const e=this.HTMLElement;if(e&&e.lastElementChild)return new on(e.lastElementChild)}get x(){return this.m_nX}set x(e){this.m_nX!==e&&("no"!==this.m_sTranslate?this.position({x:e}):(wo.set(this.HTMLElement,"left",e+"px"),this.m_nX=e))}get y(){return this.m_nY}set y(e){this.m_nY!==e&&("no"!==this.m_sTranslate?this.position({y:e}):(wo.set(this.HTMLElement,"top",e+"px"),this.m_nY=e))}get z(){return this.m_nZ||1}set z(e){this.m_nZ!==e&&this.position({z:e})}get positionByTranslate(){return"no"!==this.m_sTranslate}set positionByTranslate(e){this.position({translate:e?"yes":"no"})}get positionByTranslate3D(){return"accelerated"===this.m_sTranslate}set positionByTranslate3D(e){this.position({translate:e?"accelerated":"no"})}get positioning(){return _o(this.HTMLElement)}set positioning(e){_o(this.HTMLElement,e)}get boxModel(){return Lo(this.HTMLElement)}set boxModel(e){Lo(this.HTMLElement,e)}get rendering(){return Co(this.HTMLElement)}set rendering(e){Co(this.HTMLElement,e)}get visible(){return Do(this.HTMLElement)}set visible(e){Do(this.HTMLElement,e,!0)}set visibleExplicit(e){Do(this.HTMLElement,e)}get overflow(){return Ao(this.HTMLElement)}set overflow(e){Ao(this.HTMLElement,e)}get overflowHorizontal(){return jo(this.HTMLElement)}set overflowHorizontal(e){jo(this.HTMLElement,e)}get overflowVertical(){return To(this.HTMLElement)}set overflowVertical(e){To(this.HTMLElement,e)}get rectangle(){return zo(this.HTMLElement)}get rectangleClient(){return zo(this.HTMLElement,!0)}get rectangleLeft(){return Eo(this.HTMLElement)}get rectangleTop(){return Oo(this.HTMLElement)}get rectangleRight(){return Po(this.HTMLElement)}get rectangleBottom(){return Ro(this.HTMLElement)}get rectangleWidth(){return Ho(this.HTMLElement)}get rectangleHeight(){return Fo(this.HTMLElement)}get zoom(){return this.m_nZoom}set zoom(e){this.m_nZoom!==e&&(this.m_nZoom=e,A(this.m_nLeft)&&Uo(this.HTMLElement,this.m_nLeft*e),A(this.m_nTop)&&Bo(this.HTMLElement,this.m_nTop*e),A(this.m_nRight)&&Yo(this.HTMLElement,this.m_nRight*e),A(this.m_nBottom)&&Zo(this.HTMLElement,this.m_nBottom*e),A(this.m_nWidth)&&Vo(this.HTMLElement,this.m_nWidth*e),A(this.m_nHeight)&&Wo(this.HTMLElement,this.m_nHeight*e),this.m_nBackgroundWidth&&this.m_nBackgroundHeight&&Go(this.HTMLElement,{width:"auto"===this.m_nBackgroundWidth?"auto":this.m_nBackgroundWidth*e,height:"auto"===this.m_nBackgroundHeight?"auto":this.m_nBackgroundHeight*e}))}get left(){return A(this.m_nLeft)?this.m_nLeft:"auto"===this.m_nLeft?"auto":this.m_nLeft=Uo(this.HTMLElement)}set left(e){if(this.m_nLeft!==e)switch(e){case"auto":Uo(this.HTMLElement,this.m_nLeft="auto");break;case"inherit":this.m_nLeft=void 0,Uo(this.HTMLElement,"inherit");break;default:Uo(this.HTMLElement,(this.m_nLeft=e)*this.m_nZoom)}}get top(){return A(this.m_nTop)?this.m_nTop:"auto"===this.m_nTop?"auto":this.m_nTop=Bo(this.HTMLElement)}set top(e){if(this.m_nTop!==e)switch(e){case"auto":Bo(this.HTMLElement,this.m_nTop="auto");break;case"inherit":this.m_nTop=void 0,Bo(this.HTMLElement,"inherit");break;default:Bo(this.HTMLElement,(this.m_nTop=e)*this.m_nZoom)}}get right(){return A(this.m_nRight)?this.m_nRight:"auto"===this.m_nRight?"auto":this.m_nRight=Yo(this.HTMLElement)}set right(e){if(this.m_nRight!==e)switch(e){case"auto":Yo(this.HTMLElement,this.m_nRight="auto");break;case"inherit":this.m_nRight=void 0,Yo(this.HTMLElement,"inherit");break;default:Yo(this.HTMLElement,(this.m_nRight=e)*this.m_nZoom)}}get bottom(){return A(this.m_nBottom)?this.m_nBottom:"auto"===this.m_nBottom?"auto":this.m_nBottom=Zo(this.HTMLElement)}set bottom(e){if(this.m_nBottom!==e)switch(e){case"auto":Zo(this.HTMLElement,this.m_nBottom="auto");break;case"inherit":this.m_nBottom=void 0,Zo(this.HTMLElement,"inherit");break;default:Zo(this.HTMLElement,(this.m_nBottom=e)*this.m_nZoom)}}get width(){return A(this.m_nWidth)?this.m_nWidth:"auto"===this.m_nWidth?"auto":this.m_nWidth=Vo(this.HTMLElement)}set width(e){if(this.m_nWidth!==e)switch(e){case"auto":Vo(this.HTMLElement,this.m_nWidth="auto");break;case"inherit":this.m_nWidth=void 0,Vo(this.HTMLElement,"inherit");break;default:Vo(this.HTMLElement,(this.m_nWidth=e)*this.m_nZoom)}}get height(){return A(this.m_nHeight)?this.m_nHeight:"auto"===this.m_nHeight?"auto":this.m_nHeight=Wo(this.HTMLElement)}set height(e){if(this.m_nHeight!==e)switch(e){case"auto":Wo(this.HTMLElement,this.m_nHeight="auto");break;case"inherit":this.m_nHeight=void 0,Wo(this.HTMLElement,"inherit");break;default:Wo(this.HTMLElement,(this.m_nHeight=e)*this.m_nZoom)}}get elementWidth(){return Vo(this.HTMLElement,void 0,!0)}set elementWidth(e){Vo(this.HTMLElement,e,!0)}get elementHeight(){return Wo(this.HTMLElement,void 0,!0)}set elementHeight(e){Wo(this.HTMLElement,e,!0)}get scrollLeft(){return Qo(this.HTMLElement)}set scrollLeft(e){Qo(this.HTMLElement,e)}get scrollTop(){return qo(this.HTMLElement)}set scrollTop(e){qo(this.HTMLElement,e)}get scrollWidth(){return Xo(this.HTMLElement)}get scrollHeight(){return Jo(this.HTMLElement)}get tabIndex(){return en(this.HTMLElement)}set tabIndex(e){en(this.HTMLElement,e)}property(e,t){return Ko(this.HTMLElement,e,t)}apply(e,t=!1){return ro((()=>e(this)),t||!this.isInDOM),this}style(e,t=So.app){t.styleAsset(this,e)}styleSafe(e,t=So.app){t.styleAssetSafe(this,e)}child(e=0){const t=this.HTMLElement;if(t){const i=R(t.children,e);if(i)return new on(i)}}forEachChild(e){const t=this.HTMLElement;t&&ee(t.children,(t=>e(new on(t))))}position(e){const t="no"!==this.m_sTranslate;A(e.x)&&(this.m_nX=e.x),A(e.y)&&(this.m_nY=e.y),A(e.z)&&(this.m_nZ=e.z),e.translate&&(this.m_sTranslate=e.translate),"no"!==this.m_sTranslate?(t||(wo.set(this.HTMLElement,"left",""),wo.set(this.HTMLElement,"top","")),this.transcale(this.m_nX,this.m_nY,this.m_nZ,"accelerated"===this.m_sTranslate)):(wo.set(this.HTMLElement,"left",this.m_nX+"px"),wo.set(this.HTMLElement,"top",this.m_nY+"px"),this.transcale(void 0,void 0,this.m_nZ,!0))}shift(e){this.position({x:this.m_nX+G(e.horizontal),y:this.m_nY+G(e.vertical),translate:e.translate})}rectangleOffset(e){return zo(this.HTMLElement,!1,e)}backgroundSize(e){return this.m_nBackgroundWidth=e?e.width:void 0,this.m_nBackgroundHeight=e?e.height:void 0,Go(this.HTMLElement,this.m_nBackgroundWidth&&this.m_nBackgroundHeight?{width:"auto"===this.m_nBackgroundWidth?"auto":this.m_nBackgroundWidth*this.m_nZoom,height:"auto"===this.m_nBackgroundHeight?"auto":this.m_nBackgroundHeight*this.m_nZoom}:void 0)}translate(e){return $o(this.HTMLElement,e)}translateX(e){return this.translate(e).x}translateY(e){return this.translate(e).y}skew(e){this.set("transform-origin","left top 0");const t=e.width||G(this.width),i=e.height||G(this.height);this.transformationPrefix=po({leftTopX:G(e.leftTopX,0),leftTopY:G(e.leftTopY,0),rightTopX:G(e.rightTopX,t),rightTopY:G(e.rightTopY,0),leftBottomX:G(e.leftBottomX,0),leftBottomY:G(e.leftBottomY,i),rightBottomX:G(e.rightBottomX,t),rightBottomY:G(e.rightBottomY,i),width:t,height:i})}skewOffset(e){const t=e.width||G(this.width),i=e.height||G(this.height);this.skew({leftTopX:G(e.leftTopX,0),leftTopY:G(e.leftTopY,0),rightTopX:t-G(e.rightTopX,0),rightTopY:G(e.rightTopY,0),leftBottomX:G(e.leftBottomX,0),leftBottomY:i-G(e.leftBottomY,0),rightBottomX:t-G(e.rightBottomX,0),rightBottomY:i-G(e.rightBottomY,0),width:t,height:i})}unskew(){this.transformationPrefix=""}focus(e=!0){return tn(this.HTMLElement,e)}blur(){return sn(this.HTMLElement)}destroyChildren(){on.destroyChildren(this.HTMLElement)}destroy(e=!0,t=!1){const i=super.destroy();return e&&on.destroy(i,t),i}}var nn,rn,an;function ln(){return window.devicePixelRatio||1}function cn(){return document.createElement("canvas")}function un(e,t,i){if(e=e||cn())return A(t)&&Vo(e,t,!0),A(i)&&Wo(e,i,!0),e.getContext("2d");throw new Error("DOM.Canvas.Context2D: 2D context cannot be created.")}function hn(e,t,i,s){let o;const n=e instanceof mo?e.HTMLElementOfType():e;return A(i)&&(i*=ln()),A(s)&&(s*=ln()),o=un(n,i,s),o&&pe(t,o,i||Vo(o.canvas,void 0,!0),s||Wo(o.canvas,void 0,!0),ln()),o}!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e[e.Diagonal=2]="Diagonal"}(nn||(nn={})),function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(rn||(rn={})),function(e){e[e.Top=0]="Top",e[e.Middle=1]="Middle",e[e.Bottom=2]="Bottom"}(an||(an={}));class dn{constructor(e,t,i,s){if(this.m_nWidth=0,this.m_nHeight=0,this.m_pContext=hn(e,this.m_fnRender=t,i,s),this.context){const e=Vo(this.context.canvas,void 0,!0),t=Wo(this.context.canvas,void 0,!0);"auto"!==e&&(this.m_nWidth=e),"auto"!==t&&(this.m_nHeight=t)}}get context(){return this.m_pContext}get width(){return this.m_nWidth}get height(){return this.m_nHeight}clear(e=!1){this.context&&(this.context.clearRect(0,0,this.width,this.height),e&&this.m_pBuffer&&this.context.drawImage(this.m_pBuffer.canvas,0,0,this.width,this.height,0,0,this.width,this.height))}buffer(e=!1){return!this.context||!e&&this.m_pBuffer||(this.m_pBuffer=un(void 0,this.width,this.height),this.m_pBuffer&&this.m_pBuffer.drawImage(this.context.canvas,0,0,this.width,this.height,0,0,this.width,this.height)),this.m_pBuffer}reset(){this.context&&(this.m_pBuffer?(this.clear(!0),this.m_pBuffer=void 0):this.render())}render(e,t){if(this.context){const i=Vo(this.context.canvas,e?e*ln():void 0,!0),s=Wo(this.context.canvas,t?t*ln():void 0,!0);this.clear(),"auto"!==i&&(this.m_nWidth=i),"auto"!==s&&(this.m_nHeight=s),pe(this.m_fnRender,this.context,this.m_nWidth,this.m_nHeight,ln())}}darken(t,i,s=0){if(this.buffer()){const o=this.context.createLinearGradient(0,0,0!==s?this.width:0,1!==s?this.height:0);this.clear(!0),o&&(o.addColorStop(0,`rgba(${t<0?"255,255,255":"0,0,0"},${e.range(Math.abs(t),0,100)/100})`),o.addColorStop(1,`rgba(${i<0?"255,255,255":"0,0,0"},${e.range(Math.abs(i),0,100)/100})`),this.context.fillStyle=o,this.context.fillRect(0,0,this.width,this.height))}}lighten(e,t,i=0){this.darken(-e,-t,i)}grayscale(e=!0,t=!1,i=1){if(this.buffer()){const s=this.context.getImageData(0,0,this.width,this.height);if(s){const o=s.data;if(o){for(let s=0;s<o.length;s+=4){let n=e?.34*o[s]+.5*o[s+1]+.16*o[s+2]:(o[s]+o[s+1]+o[s+2])/3;t&&(n=200+55/255*(255-n)),o[s]=n,o[s+1]=n,o[s+2]=n,1!==i&&(o[s+3]=o[s+3]*i)}this.context.putImageData(s,0,0)}}}}}class pn{constructor(e,t){this.m_pContext=e,this.m_sFont=t?t.font:void 0,this.m_nSize=t?t.size:void 0,this.m_sFillStyle=t?t.fillStyle:void 0,this.m_nLineHeight=t?t.lineHeight:void 0,this.m_bStroke=!!t&&Q(t.stroke),this.m_sStrokeStyle=t?t.strokeStyle:void 0}static correction(e,t){if(!A(this.m_pCorrections[e+" "+t])){const i=parseInt(e.replace(/^\D+/g,""),10)||18,s=2*i,o=un(void 0,i,s);if(this.m_pCorrections[e+" "+t]=0,o){const n="top"===t||"hanging"===t||"middle"===t;let r;if(o.font=e,o.textBaseline=t,o.fillStyle="rgb(0,0,0)",o.fillText("middle"===t?"-":"hanging"===t?"a":"bottom"===t?"p":"A",0,i),r=o.getImageData(0,0,i,s),r){const o=r.data;if(o)for(let r=n?0:s-1;n&&r<s||!n&&r>=0;r+=n?1:-1)for(let s=0;s<i;s++)if(o[r*i*4+4*s+3]>0)return this.m_pCorrections[e+" "+t]=i-r}}}return this.m_pCorrections[e+" "+t]}get context(){return this.m_pContext}get font(){return C(this.m_sFont)?this.m_sFont:""}set font(e){this.m_sFont=e}get size(){return A(this.m_nSize)?this.m_nSize:0}set size(e){this.m_nSize=e}get lineHeight(){return A(this.m_nLineHeight)?this.m_nLineHeight:A(this.m_nSize)?this.m_nSize*pn.LINE_HEIGHT:18}set lineHeight(e){this.m_nLineHeight=e}get fillStyle(){return C(this.m_sFillStyle)?this.m_sFillStyle:""}set fillStyle(e){this.m_sFillStyle=e}get stroke(){return this.m_bStroke}set stroke(e){this.m_bStroke=e}get strokeStyle(){return C(this.m_sStrokeStyle)?this.m_sStrokeStyle:""}set strokeStyle(e){this.m_sStrokeStyle=e}wrap(i,s,o=0,n=""){const r=[],a=i.split("\n"),l=P(a);o=e.max(o,0);for(let i=0;i<l&&(0===o||P(r)<o);i++){let c=t.sanitize(a[i]).replace(/\s/g," ");const u=1===o?[c]:c.split(" "),h=P(u);c="";for(let a=0;a<h&&(0===o||P(r)<o);a++){let d="";if(o>0&&P(r)+1===o){for(;a<h;)d+=(""===d?"":" ")+u[a],a++;i+1<l&&(d+=n)}else d=u[a];if(C(d)){let i=this.measure((""===c?"":c+" ")+d);if(i>s){let a=this.measure(d);for(;a>s;){let l=o>0&&P(r)+1===o?n:"";const u=a/L(d),h=e.max(u>0?e.max(s-(C(c)?this.measure(c+" "):0),0)/u:0,1);let p=d.substr(0,e.max(h-L(l),0));if(i=this.measure((""===c?"":c+" ")+p+l),i>s){p=(""===c?"":c+" ")+p,c="";do{const e=L(p);e>0?p=p.substr(0,e-1):l=l.substr(0,L(l)-1),i=this.measure((""===c?"":c+" ")+p+l)}while(i>s&&(C(p)||C(l)))}else if(i<s){let e="";for(;i<s&&L(p)<L(d);)p+=e,e=d.charAt(L(p)),i=this.measure((""===c?"":c+" ")+p+e+l)}if(r.push((""===c?"":c+" ")+t.sanitize(p)+l),o>0&&P(r)===o)return r;c="",d=d.substr(L(p)),a=C(d)?this.measure(d):0}if(C(c)&&(r.push(c),o>0&&P(r)===o))return r;c=""}C(d)&&(c+=(""===c?"":" ")+d)}else-1!==o&&a+1===h&&r.push("")}C(c)&&r.push(c)}return r}measure(e){return this.context.measureText(e).width}draw(t,i){let s;this.context.textAlign=1===i.horizontal?"center":2===i.horizontal?"end":"start",this.context.textBaseline=1===i.vertical?"middle":2===i.vertical?"bottom":"top",_(i.font||this.font)&&A(i.size||this.size)&&(this.context.font=(i.size||this.size)+"px "+(i.font||this.font)),_(i.fillStyle||this.fillStyle)&&(this.context.fillStyle=i.fillStyle||this.fillStyle),_(i.strokeStyle||this.strokeStyle)&&(this.context.strokeStyle=i.strokeStyle||this.strokeStyle),s=i.width>0?this.wrap(t,i.width,i.lines,i.suffix||""):[t],i.lineHeight=i.lineHeight||(A(i.size)?i.size*pn.LINE_HEIGHT:void 0)||this.lineHeight,i.stroke=T(i.stroke)?i.stroke:this.stroke,i.y+=pn.correction(this.context.font,this.context.textBaseline),i.y-=1===i.vertical?e.round((P(s)-1)*i.lineHeight/2):2===i.vertical?(P(s)-1)*i.lineHeight:0,i.width>0&&(i.x+=1===i.horizontal?e.round(i.width/2):2===i.horizontal?i.width:0),ee(s,(e=>{i.stroke?this.context.strokeText(e,i.x,i.y):this.context.fillText(e,i.x,i.y),i.y+=i.lineHeight||0}))}single(e,t,i,s=0,o=0,n=""){this.draw(e,{x:t,y:i,width:s,horizontal:o,lines:1,suffix:n})}Mmultiple(e,t,i,s=0,o=0,n=0,r=0,a=""){this.draw(e,{x:t,y:i,width:s,horizontal:n,vertical:r,lines:o,suffix:a})}}pn.LINE_HEIGHT=1.15,pn.m_pCorrections={};var mn={exports:{}},gn={},bn={exports:{}},fn={};var yn=/javascript\s*\:/gim;fn.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},fn.getDefaultWhiteList=function(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}},fn.onAttr=function(e,t,i){},fn.onIgnoreAttr=function(e,t,i){},fn.safeAttrValue=function(e,t){return yn.test(t)?"":t};var vn=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},Mn=fn,wn=function(e,t){";"!==(e=function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}(e))[e.length-1]&&(e+=";");var i=e.length,s=!1,o=0,n=0,r="";function a(){if(!s){var i=vn(e.slice(o,n)),a=i.indexOf(":");if(-1!==a){var l=vn(i.slice(0,a)),c=vn(i.slice(a+1));if(l){var u=t(o,r.length,l,c,i);u&&(r+=u+"; ")}}}o=n+1}for(;n<i;n++){var l=e[n];if("/"===l&&"*"===e[n+1]){var c=e.indexOf("*/",n+2);if(-1===c)break;o=(n=c+1)+1,s=!1}else"("===l?s=!0:")"===l?s=!1:";"===l?s||a():"\n"===l&&a()}return vn(r)};function xn(e){return null==e}function Sn(e){(e=function(e){var t={};for(var i in e)t[i]=e[i];return t}(e||{})).whiteList=e.whiteList||Mn.whiteList,e.onAttr=e.onAttr||Mn.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Mn.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Mn.safeAttrValue,this.options=e}Sn.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,i=t.whiteList,s=t.onAttr,o=t.onIgnoreAttr,n=t.safeAttrValue,r=wn(e,(function(e,t,r,a,l){var c=i[r],u=!1;if(!0===c?u=c:"function"==typeof c?u=c(a):c instanceof RegExp&&(u=c.test(a)),!0!==u&&(u=!1),a=n(r,a)){var h,d={position:t,sourcePosition:e,source:l,isWhite:u};return u?xn(h=s(r,a,d))?r+":"+a:h:xn(h=o(r,a,d))?void 0:h}}));return r};var In=Sn;!function(e,t){var i=fn,s=In;for(var o in(t=e.exports=function(e,t){return new s(t).process(e)}).FilterCSS=s,i)t[o]=i[o];"undefined"!=typeof window&&(window.filterCSS=e.exports)}(bn,bn.exports);var kn={indexOf:function(e,t){var i,s;if(Array.prototype.indexOf)return e.indexOf(t);for(i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1},forEach:function(e,t,i){var s,o;if(Array.prototype.forEach)return e.forEach(t,i);for(s=0,o=e.length;s<o;s++)t.call(i,e[s],s,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1}},Nn=bn.exports.FilterCSS,_n=bn.exports.getDefaultWhiteList,Ln=kn,Cn=new Nn;function Dn(e){return e.replace(An,"&lt;").replace(jn,"&gt;")}var An=/</g,jn=/>/g,Tn=/"/g,zn=/&quot;/g,En=/&#([a-zA-Z0-9]*);?/gim,On=/&colon;?/gim,Pn=/&newline;?/gim,Rn=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,Hn=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Fn=/u\s*r\s*l\s*\(.*/gi;function Un(e){return e.replace(Tn,"&quot;")}function Bn(e){return e.replace(zn,'"')}function Yn(e){return e.replace(En,(function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))}))}function Zn(e){return e.replace(On,":").replace(Pn," ")}function Vn(e){for(var t="",i=0,s=e.length;i<s;i++)t+=e.charCodeAt(i)<32?" ":e.charAt(i);return Ln.trim(t)}function Wn(e){return Vn(e=Zn(e=Yn(e=Bn(e))))}function Gn(e){return Dn(e=Un(e))}gn.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},gn.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},gn.onTag=function(e,t,i){},gn.onIgnoreTag=function(e,t,i){},gn.onTagAttr=function(e,t,i){},gn.onIgnoreTagAttr=function(e,t,i){},gn.safeAttrValue=function(e,t,i,s){if(i=Wn(i),"href"===t||"src"===t){if("#"===(i=Ln.trim(i)))return"#";if("http://"!==i.substr(0,7)&&"https://"!==i.substr(0,8)&&"mailto:"!==i.substr(0,7)&&"tel:"!==i.substr(0,4)&&"data:image/"!==i.substr(0,11)&&"ftp://"!==i.substr(0,6)&&"./"!==i.substr(0,2)&&"../"!==i.substr(0,3)&&"#"!==i[0]&&"/"!==i[0])return""}else if("background"===t){if(Rn.lastIndex=0,Rn.test(i))return""}else if("style"===t){if(Hn.lastIndex=0,Hn.test(i))return"";if(Fn.lastIndex=0,Fn.test(i)&&(Rn.lastIndex=0,Rn.test(i)))return"";!1!==s&&(i=(s=s||Cn).process(i))}return Gn(i)},gn.escapeHtml=Dn,gn.escapeQuote=Un,gn.unescapeQuote=Bn,gn.escapeHtmlEntities=Yn,gn.escapeDangerHtml5Entities=Zn,gn.clearNonPrintableCharacter=Vn,gn.friendlyAttrValue=Wn,gn.escapeAttrValue=Gn,gn.onIgnoreTagStripAll=function(){return""},gn.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var i=!Array.isArray(e),s=[],o=!1;return{onIgnoreTag:function(n,r,a){if(function(t){return!!i||-1!==Ln.indexOf(e,t)}(n)){if(a.isClosing){var l="[/removed]",c=a.position+l.length;return s.push([!1!==o?o:a.position,c]),o=!1,l}return o||(o=a.position),"[removed]"}return t(n,r,a)},remove:function(e){var t="",i=0;return Ln.forEach(s,(function(s){t+=e.slice(i,s[0]),i=s[1]})),t+=e.slice(i)}}},gn.stripCommentTag=function(e){for(var t="",i=0;i<e.length;){var s=e.indexOf("\x3c!--",i);if(-1===s){t+=e.slice(i);break}t+=e.slice(i,s);var o=e.indexOf("--\x3e",s);if(-1===o)break;i=o+3}return t},gn.stripBlankChar=function(e){var t=e.split("");return(t=t.filter((function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)}))).join("")},gn.cssFilter=Cn,gn.getDefaultCSSWhiteList=_n;var $n={},Qn=kn;function qn(e){var t=Qn.spaceIndex(e);if(-1===t)var i=e.slice(1,-1);else i=e.slice(1,t+1);return"/"===(i=Qn.trim(i).toLowerCase()).slice(0,1)&&(i=i.slice(1)),"/"===i.slice(-1)&&(i=i.slice(0,-1)),i}function Xn(e){return"</"===e.slice(0,2)}var Jn=/[^a-zA-Z0-9_:\.\-]/gim;function Kn(e,t){for(;t<e.length;t++){var i=e[t];if(" "!==i)return"="===i?t:-1}}function er(e,t){for(;t>0;t--){var i=e[t];if(" "!==i)return"="===i?t:-1}}function tr(e){return function(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]}(e)?e.substr(1,e.length-2):e}$n.parseTag=function(e,t,i){var s="",o=0,n=!1,r=!1,a=0,l=e.length,c="",u="";e:for(a=0;a<l;a++){var h=e.charAt(a);if(!1===n){if("<"===h){n=a;continue}}else if(!1===r){if("<"===h){s+=i(e.slice(o,a)),n=a,o=a;continue}if(">"===h){s+=i(e.slice(o,n)),c=qn(u=e.slice(n,a+1)),s+=t(n,s.length,c,u,Xn(u)),o=a+1,n=!1;continue}if('"'===h||"'"===h)for(var d=1,p=e.charAt(a-d);""===p.trim()||"="===p;){if("="===p){r=h;continue e}p=e.charAt(a-++d)}}else if(h===r){r=!1;continue}}return o<e.length&&(s+=i(e.substr(o))),s},$n.parseAttr=function(e,t){var i=0,s=[],o=!1,n=e.length;function r(e,i){if(!((e=(e=Qn.trim(e)).replace(Jn,"").toLowerCase()).length<1)){var o=t(e,i||"");o&&s.push(o)}}for(var a=0;a<n;a++){var l,c=e.charAt(a);if(!1!==o||"="!==c)if(!1===o||a!==i||'"'!==c&&"'"!==c||"="!==e.charAt(a-1)){if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===o){if(-1===(l=Kn(e,a))){r(Qn.trim(e.slice(i,a))),o=!1,i=a+1;continue}a=l-1;continue}if(-1===(l=er(e,a-1))){r(o,tr(Qn.trim(e.slice(i,a)))),o=!1,i=a+1;continue}}}else{if(-1===(l=e.indexOf(c,a+1)))break;r(o,Qn.trim(e.slice(i+1,l))),o=!1,i=(a=l)+1}else o=e.slice(i,a),i=a+1}return i<e.length&&(!1===o?r(e.slice(i)):r(o,tr(Qn.trim(e.slice(i))))),Qn.trim(s.join(" "))};var ir=bn.exports.FilterCSS,sr=gn,or=$n,nr=or.parseTag,rr=or.parseAttr,ar=kn;function lr(e){return null==e}function cr(e){(e=function(e){var t={};for(var i in e)t[i]=e[i];return t}(e||{})).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=sr.onIgnoreTagStripAll),e.whiteList=e.whiteList||sr.whiteList,e.onTag=e.onTag||sr.onTag,e.onTagAttr=e.onTagAttr||sr.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||sr.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||sr.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||sr.safeAttrValue,e.escapeHtml=e.escapeHtml||sr.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new ir(e.css))}cr.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,i=t.whiteList,s=t.onTag,o=t.onIgnoreTag,n=t.onTagAttr,r=t.onIgnoreTagAttr,a=t.safeAttrValue,l=t.escapeHtml,c=this.cssFilter;t.stripBlankChar&&(e=sr.stripBlankChar(e)),t.allowCommentTag||(e=sr.stripCommentTag(e));var u=!1;t.stripIgnoreTagBody&&(u=sr.StripTagBody(t.stripIgnoreTagBody,o),o=u.onIgnoreTag);var h=nr(e,(function(e,t,u,h,d){var p,m={sourcePosition:e,position:t,isClosing:d,isWhite:i.hasOwnProperty(u)};if(!lr(p=s(u,h,m)))return p;if(m.isWhite){if(m.isClosing)return"</"+u+">";var g=function(e){var t=ar.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var i="/"===(e=ar.trim(e.slice(t+1,-1)))[e.length-1];return i&&(e=ar.trim(e.slice(0,-1))),{html:e,closing:i}}(h),b=i[u],f=rr(g.html,(function(e,t){var i,s=-1!==ar.indexOf(b,e);return lr(i=n(u,e,t,s))?s?(t=a(u,e,t,c))?e+'="'+t+'"':e:lr(i=r(u,e,t,s))?void 0:i:i}));return h="<"+u,f&&(h+=" "+f),g.closing&&(h+=" /"),h+">"}return lr(p=o(u,h,m))?l(h):p}),l);return u&&(h=u.remove(h)),h};var ur,hr=cr;!function(e,t){var i=gn,s=$n,o=hr;function n(e,t){return new o(t).process(e)}for(var r in(t=e.exports=n).filterXSS=n,t.FilterXSS=o,i)t[r]=i[r];for(var r in s)t[r]=s[r];"undefined"!=typeof window&&(window.filterXSS=e.exports),"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)}(mn,mn.exports);class dr extends on{constructor(e,t,i,s,o,n){if(super(_(e)?""!==e?document.createElement(e):void 0:e),this.m_pChain={},this.m_bDestroyed=!1,this.HTMLElement){const e=i instanceof on?i.HTMLElement:dr.$(i);if(o&&this.addClass((n||So.app).style(o)),t&&t(this),e){const t=on.isInDOM(e);i instanceof dr&&(this.m_pParent=i).chain(this),ro((()=>{!e||!this.HTMLElement||t&&this.m_pParent&&!this.m_pParent.isInChain(this)||((s=dr.$(s))?e.insertBefore(this.HTMLElement,s):e.appendChild(this.HTMLElement))}),!t,t),dr.m_nCount++,st&&console.log(qe.log("DOM.Element",`Created new asset '${dr.$ignature(this)}' (${dr.m_nCount} element${1===dr.m_nCount?"":"s"} in DOM)`))}}}static get head(){return this.m_pHead||(this.m_pHead=new dr(document.head||"head"))}static get body(){return this.m_pBody||(this.m_pBody=new dr(document.body))}static setTrustedTypesPolicy(e){this.m_sTrustedTypesPolicy=e}static whenDestroyed(e){if(this.m_fnDestroy){const t=this.m_fnDestroy;this.m_fnDestroy=(i,s)=>{e(i,s),t(i,s)}}else this.m_fnDestroy=e}static create(e,t,i=document.body,s,o,n){return new dr(e,t,i,s,o,n)}static assert(e){return e||new dr("")}static sanitize(e){return"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&this.m_sTrustedTypesPolicy?(this.m_pTrustedTypesPolicies[this.m_sTrustedTypesPolicy]||(this.m_pTrustedTypesPolicies[this.m_sTrustedTypesPolicy]=trustedTypes.createPolicy(this.m_sTrustedTypesPolicy,{createHTML:e=>mn.exports.filterXSS(e)}))).createHTML(e):mn.exports.filterXSS(e)}static HTML(e,t){if(e){if(_(t)){const i=on.isInDOM(e);ro((()=>{e&&(this.removeChildren(e),e.innerHTML=this.sanitize(t))}),!i,i)}return e.innerHTML}return""}static text(e,t,i=!1,s=!1){if(e){if(_(t)){const o=on.isInDOM(e);return ro((()=>{e&&(i||s||this.removeChildren(e),s?e.insertBefore(document.createTextNode(t),e.firstChild):e.appendChild(document.createTextNode(t)))}),!o,o),t}return W(e.textContent)}return""}static zoom(e,t){ee(e,(e=>{e.zoom=t}))}get parent(){if(this.m_pParent)return this.m_pParent;const e=this.HTMLElement;return e&&e.parentElement?new on(e.parentElement):void 0}get index(){if(this.HTMLElement){let e=-1;const t=this.HTMLElement.parentElement;if(t&&ue(t.children,(t=>(e++,this.isEqual(t)))))return e}return-1}get HTML(){return dr.HTML(this.HTMLElement)}set HTML(e){this.destroyChildren(),dr.HTML(this.HTMLElement,e)}get text(){return dr.text(this.HTMLElement)}set text(e){this.destroyChildren(),dr.text(this.HTMLElement,e,!0)}get isDestroyed(){return this.m_bDestroyed}isInChain(e){return this.m_pChain[e.id]instanceof dr}unchain(e){$e(this.m_pChain,W(e.id))}destroyRecursive(e,t){if(!this.m_bDestroyed)return this.m_bDestroyed=!0,this.m_pParent&&(e||this.m_pParent.unchain(this),this.m_pParent=void 0),this.HTMLElement&&(ee(this.m_pChain,(e=>{e.destroyRecursive(!0,t)})),this.m_pChain={},dr.m_nCount--,this.onDestroy&&this.onDestroy(this,e),dr.m_fnDestroy&&dr.m_fnDestroy(this,e),st&&console.log(qe.log("DOM.Element",`Destroy asset '${dr.$ignature(this)}' (${dr.m_nCount} element${1===dr.m_nCount?"":"s"} in DOM)`))),super.destroy(!e||t,t)}chain(e){this.m_pChain[W(e.id)]=e}create(e,t,i,s){return dr.create(e,t,this,void 0,i,s)}append(e,t,i,s){return dr.create(e,t,this,void 0,i,s)}insert(e,t,i,s,o=0){return dr.create(e,t,this,o>=0&&this.HTMLElement?R(this.HTMLElement.children,o):void 0,i,s)}textAppend(e){dr.text(this.HTMLElement,e,!0,!1)}textInsert(e){dr.text(this.HTMLElement,e,!1,!0)}markdown(e,t,i){const s=t&&"number"==typeof t.features?t.features:Xi.All;this.destroyChildren(),e.map(((e,o,n,r,a)=>{if("root"===a)return this;if("text"===a)return o&&dr.text(this.HTMLElement,o),this;let l;switch(r||(r=this),e){case"bold":s&Xi.Formatting&&(l=r.create("b"));break;case"italic":s&Xi.Formatting&&(l=r.create("i"));break;case"bold+italic":s&Xi.Formatting&&(l=r.create("b").create("i"));break;case"underline":s&Xi.Formatting&&(l=r.create("u"));break;case"strikethrough":s&Xi.Formatting&&(l=r.create("s"));break;case"paragraph":s&Xi.Paragraphs&&(l=r.create("p"));break;case"break":return s&Xi.Paragraphs?r.create("br"):r;case"quote":s&Xi.Blockquotes&&(l=r.create("blockquote"));break;case"code":s&Xi.InlineCode&&(l=r.create("code"));break;case"codeblock":case"codeline":s&Xi.Code&&(l=r.create("codeblock"===e?"pre":"code"));break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":s&Xi.Headings&&(l=r.create(e));break;case"hyperlink":s&Xi.Hyperlinks&&(l=r.create("a"),l.attribute("href",W(n)),l.attribute("rel","noopener"),t&&"self"===t.target||l.attribute("target","_blank"));break;case"image":return s&Xi.Images?(l=r.create("img"),l.attribute("src",W(n)),l.attribute("alt",o)):l=r.create("span"),l;case"mention":if(t&&t.mentions)return t.mentions(r,n,o)||r;break;case"reference":if(t&&t.references)return t.references(r,n,o)||r}return l||(l=r.create("span")),o&&dr.text(l.HTMLElement,o),i&&e&&i(l,e),l}))}destroyChildren(){ee(this.m_pChain,(e=>{e.destroyRecursive(!1,!1)})),super.destroyChildren()}destroy(e=!1){return this.destroyRecursive(!1,e)}}dr.m_nCount=0,dr.m_pTrustedTypesPolicies={},dr.m_sTrustedTypesPolicy="";class pr{constructor(e){this.m_pFragment=document.createDocumentFragment(),this.m_pAsset=void 0,this.m_pChain=[],pe(e,this)}static create(e,t=document.body,i){const s=new pr(e);return s.reflect(t,i),s}create(e,t){return this.insertBefore(e,void 0,t)}append(e,t){return this.insertBefore(e,void 0,t)}insertBefore(e,t,i){if(this.m_pFragment||this.m_pAsset){const s=dr.create(e,i,this.m_pFragment||this.m_pAsset,t);return this.m_pFragment&&this.m_pChain.push(s),s}}reflect(e=document.body,t){if(this.m_pFragment){const i=e instanceof on?e.HTMLElement:dr.$(e);if(i){const s=dr.isInDOM(i);ro((()=>{this.m_pFragment&&i&&((t=dr.$(t))?i.insertBefore(this.m_pFragment,t):i.appendChild(this.m_pFragment)),this.m_pAsset=i,this.m_pFragment=void 0,e instanceof dr&&(this.m_pAsset=e,ee(this.m_pChain,(t=>{e.chain(t)})))}),!s,s)}}this.m_pChain=[]}}!function(e){function t(e,t,i){return`<svg xmlns="http://www.w3.org/2000/svg" shape-rendering="geometricPrecision" width="${e}px" height="${t}px">${i}</svg>`}function i(e,i,s){return`data:image/svg+xml;base64,${btoa(t(e,i,s))}`}e.create=t,e.createBase64=i,e.apply=function(e,t,s,o,n){ro((()=>{Q(n,!0)&&(e.width=t,e.height=s),e.attribute("src",i(t,s,o))}),!e||!e.isInDOM)},e.background=function(e,t,s,o,n,r){ro((()=>{Q(n,!0)&&(e.backgroundSize({width:t,height:s}),e.set("background-repeat","no-repeat")),Q(r,!0)&&(e.width=t,e.height=s),e.set("background-image",`url('${i(t,s,o)}')`)}),!e||!e.isInDOM)}}(ur||(ur={}));var mr=Object.freeze({__proto__:null,get Directions(){return nn},get HorizontalAlignment(){return rn},Shader2D:dn,TextWrapper:pn,get VerticalAlignment(){return an},applyShader2D:function(e,t,i,s){return new dn(e,t,i,s)},canvas:cn,context2D:un,contextWebGL:function(e,t,i,s){if(e=e||cn())return A(i)&&Vo(e,i,!0),A(s)&&Wo(e,s,!0),e.getContext("webgl",t)||e.getContext("experimental-webgl",t);throw new Error("DOM.Canvas.ContextWebGL: WebGL context cannot be created.")},pixelRatio:ln,render2D:hn,renderBackground:function(e,t,i,s,o){C(o)&&e.set("background-repeat",o),e.backgroundSize({width:i,height:s}),e.set("background-image","url("+hn(void 0,t,i,s).canvas.toDataURL("image/png")+")")},Asset:on,backgroundSize:Go,blur:sn,bottom:Zo,boxModel:Lo,focus:tn,height:Wo,left:Uo,overflow:Ao,overflowHorizontal:jo,overflowVertical:To,position:function(e,t){"no"!==t.translate?(t.resetCSSPosition&&(Uo(e,0),Bo(e,0)),$o(e,{x:t.x,y:t.y,translate3D:"accelerated"===t.translate,ignoreTransformations:!0})):(Uo(e,t.x),Bo(e,t.y))},positioning:_o,property:Ko,rectangle:zo,rectangleBottom:Ro,rectangleHeight:Fo,rectangleLeft:Eo,rectangleRight:Po,rectangleTop:Oo,rectangleWidth:Ho,rendering:Co,right:Yo,scrollHeight:Jo,scrollLeft:Qo,scrollTop:qo,scrollWidth:Xo,skew:function(e,t){wo.set(e,"transform-origin","0 0 0");const i=G(t.width,e?e.offsetWidth:0),s=G(t.height,e?e.offsetHeight:0);wo.transformation(e,po({leftTopX:G(t.leftTopX,0),leftTopY:G(t.leftTopY,0),rightTopX:G(t.rightTopX,i),rightTopY:G(t.rightTopY,0),leftBottomX:G(t.leftBottomX,0),leftBottomY:G(t.leftBottomY,s),rightBottomX:G(t.rightBottomX,i),rightBottomY:G(t.rightBottomY,s),width:i,height:s}))},tabIndex:en,top:Bo,translate:$o,visible:Do,width:Vo,Application:No,Element:dr,EventListeners:go,Fragment:pr,perspective:po,DOMElement:mo,Style:wo,Stylesheet:So,Rule:xo,desktopStyles:()=>({"*":{webkitTouchCallout:"none",webkitTapHighlightColor:"transparent",touchAction:"none",textRendering:"optimizeLegibility",userSelect:"none",boxSizing:"border-box",cursor:"default","&:focus":{outline:"none"}},"input[type='text']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='password']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='email']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='search']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},textarea:{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}}}),desktopStylesheet:ko,styleRules:Io,get SVG(){return ur}});class gr extends vt{constructor(e,t,i,s,o,n){if(super(),this.m_nCallee=0,this.m_bActive=!1,this.m_bDisabled=!1,this.m_bDetached=!1,this.m_pStylesheet=s||xr.stylesheet,this.m_pAsset=gr.prepareAsset(t,this.stylesheet),0===(n=n||e.types))throw new Error("Touch.Controller: Controller type is invalid.");if(!this.asset.exists)throw new Error("Touch.Controller: One or more assets are invalid.");if("multiple"!==i&&xr.first(this.asset,n))throw new Error("Touch.Controller: Multiple controllers of type `"+e.id+"` on the same asset are not supported.");this.m_nId=xr.enumerator,this.m_nType=n,this.m_pArea=o,xr.register(e,this)}static prepareAsset(e,t){const i=on.of(e);return i.style({touchAction:"none","-webkit-touch-callout":"none","-webkit-tap-highlight-color":"transparent"},t),i.attribute("x-ms-format-detection","none"),i}static createType(){return this.m_pTypes.flag}get rectangle(){return this.asset.rectangle}get id(){return this.m_nId}get type(){return this.m_nType}get stylesheet(){return this.m_pStylesheet}get asset(){return this.m_pAsset}get area(){return this.m_pArea instanceof Ii?this.m_pArea:this.m_pArea?this.m_pArea():new Ii}set area(e){this.m_pArea=e}get isActive(){return this.m_bActive}get isDisabled(){return this.m_bDisabled||xr.isDisabled}set isDisabled(e){e!==this.m_bDisabled&&(this.m_bDisabled=e,e&&this.cancel())}get isDetached(){return this.m_bDetached}activate(){this.m_bActive=!0}deactivate(){this.m_bActive=!1}emit(e){if(T(e.activate)&&(this.m_bActive=e.activate),N(e.event)){const t=()=>(this.m_nCallee=0,e.arguments?Q(pe(e.event,...e.arguments),!0):Q(pe(e.event,e.payload),!0));if(this.m_nCallee=_e(this.m_nCallee),!Q(e.asynchronous))return t();{const i=ke(t);Q(e.cancelable)&&(this.m_nCallee=i)}}return!0}onRegister(){this.m_bDetached=!1}onDestroy(){return!this.m_bDetached&&(super.destroy(),this.m_bDetached=!0,!0)}enable(){this.isDisabled=!1}disable(){this.isDisabled=!0}cancel(){this.isActive&&(xr.terminate(this.type),this.deactivate())}destroy(){xr.unregister(this)}}gr.m_pTypes=new Je;const br=gr.createType(),fr=gr.createType(),yr=gr.createType(),vr=gr.createType();gr.createType();class Mr{constructor(t,i,s,o,n,r,a,l,c,u,h,d,p,m){if(this.m_bActive=!0,this.m_bFocus=!1,this.m_nTypes=0,this.m_nDuration=0,this.m_nVelocityHandle=0,this.m_nVelocityX=0,this.m_nVelocityY=0,this.m_nId=t,this.m_pInitialPosition={x:s,y:o},this.m_pCurrentPosition={x:s,y:o},this.m_pDelta={x:s,y:o},this.m_bTouch=n,this.m_bPen=r,this.m_nButtons=a,this.m_nClicks=e.max(l,0),this.m_nWheelX=c,this.m_nWheelY=u,this.m_nPressure=$(h),this.m_nTiltX=G(d),this.m_nTiltY=G(p),!this.focus(i,!0)){const e=Mr.typesAndTarget(i);this.m_nTypes=e.types,this.m_pTarget=e.target}this.m_nVelocityTimer=this.m_nStart=M.precise,this.m_nVelocityMove=M.precise,this.m_pVelocityPosition={x:s,y:o},m||this.velocity(!1)}static clone(e){return new Mr(e.id,e.target,e.initialPosition.x,e.initialPosition.y,e.isTouch,e.isPen,e.buttons,e.clicks,e.wheelX,e.wheelY,e.pressure,e.tiltX,e.tiltY,!0)}static each(e,t,i,s){e&&e.controllers((t=>i(t,e)),t,!(!s||!s.Bubble),!(!s||!s.Verify))}static controllers(e,t,i,s){this.each(e,t,s,{Verify:!0,Bubble:"bubble"===i})}static id(e){return e?e.id:void 0}static mean(...t){let i=0,s=0,o=0;return ee(t,(e=>{i+=e.meanX,s+=e.meanY,o++})),o=e.max(o,1),{x:i/o,y:s/o}}static proportional(e,t){const i=(e.meanX+t.meanX)/2,s=(e.meanY+t.meanY)/2,o=Math.abs(e.diffX)+Math.abs(t.diffX),n=Math.abs(e.diffY)+Math.abs(t.diffY);return{x:i+(i-e.meanX)*(Math.abs(e.diffX)/o*2-1),y:s+(s-e.meanY)*(Math.abs(e.diffY)/n*2-1)}}static difference(e,t){return{x:e.x-t.x,y:e.y-t.y}}static typesAndTarget(e){const t={types:0,target:void 0};for(;e;){const i=xr.types(e),s=e.tagName,o=e.data(wr);if("exclusive"!==o&&"stop"!==o){if((""!==o||xr.isInputElement(s))&&(t.types="disable"===o?yr:"void"===o?vr:fr,t.target=e,"input"!==o))break;"label"===s&&(t.types|=br)}if(0!==i&&(t.types|=i,t.target=t.target||e),"stop"===o)break;e=e.parent}return t}get id(){return this.m_nId}get isActive(){return this.m_bActive}get target(){return on.assert(this.m_pTarget)}get initialPosition(){return this.m_pInitialPosition}get currentPosition(){return this.m_pCurrentPosition}get delta(){const e={x:this.m_pCurrentPosition.x-this.m_pDelta.x,y:this.m_pCurrentPosition.y-this.m_pDelta.y};return this.m_pDelta={x:this.m_pCurrentPosition.x,y:this.m_pCurrentPosition.y},e}get isMouse(){return!this.isTouch&&!this.isPen}get isTouch(){return this.m_bTouch}get isPen(){return this.m_bPen}get isInput(){return!!(this.m_nTypes&fr)}get isLabel(){return!!(this.m_nTypes&br)}get type(){return this.isTouch?"touch":this.isPen?"pen":"mouse"}get types(){return this.m_nTypes}get buttons(){return this.m_nButtons}get clicks(){return this.m_nClicks}get wheelX(){return this.m_nWheelX}get wheelY(){return this.m_nWheelY}get pressure(){return this.m_nPressure}get tiltX(){return this.m_nTiltX}get tiltY(){return this.m_nTiltY}get diffX(){return this.m_pCurrentPosition.x-this.m_pInitialPosition.x}get diffY(){return this.m_pCurrentPosition.y-this.m_pInitialPosition.y}get meanX(){const t=e.min(this.m_pCurrentPosition.x,this.m_pInitialPosition.x);return t+(e.max(this.m_pCurrentPosition.x,this.m_pInitialPosition.x)-t)/2}get meanY(){const t=e.min(this.m_pCurrentPosition.y,this.m_pInitialPosition.y);return t+(e.max(this.m_pCurrentPosition.y,this.m_pInitialPosition.y)-t)/2}get radius(){return Math.sqrt(Math.pow(this.diffX,2)+Math.pow(this.diffY,2))}get angle(){return-180*Math.atan2(this.diffY,this.diffX)/Math.PI}get time(){return this.m_nStart}get duration(){return this.m_nDuration}get velocityX(){return this.m_nVelocityX}get velocityY(){return this.m_nVelocityY}get hasVirtualFocus(){return this.m_bFocus}velocity(t){const i=M.elapsed(this.m_nVelocityTimer,!0);if(i>1e3/60*2){let t=!1;this.m_nVelocityTimer=M.precise,this.m_pVelocityPosition.x!==this.m_pCurrentPosition.x&&(this.m_nVelocityX=e.range(1e3*(this.m_pVelocityPosition.x-this.m_pCurrentPosition.x)/(1+i)*.8+.2*this.m_nVelocityX,-3e3,3e3),t=!0),this.m_pVelocityPosition.y!==this.m_pCurrentPosition.y&&(this.m_nVelocityY=e.range(1e3*(this.m_pVelocityPosition.y-this.m_pCurrentPosition.y)/(1+i)*.8+.2*this.m_nVelocityY,-3e3,3e3),t=!0),this.m_pVelocityPosition={x:this.m_pCurrentPosition.x,y:this.m_pCurrentPosition.y},t?this.m_nVelocityMove=M.precise:M.elapsed(this.m_nVelocityMove,!0)>250&&(this.m_nVelocityX=0,this.m_nVelocityY=0)}t?0!==this.m_nVelocityHandle&&(this.m_nVelocityHandle=_e(this.m_nVelocityHandle)):this.m_nVelocityHandle=ke((()=>this.velocity(!1)))}controllers(e,t,i,s){let o=this.m_pTarget,n=!1,r=!1;for(;o;)xr.each(o,t,(t=>{if(!r){if(s){if(!o)return;if(!o.rectangleOffset(t.area).isIn(this.currentPosition.x,this.currentPosition.y))return}n=!0,r=e(t)||!1}})),o=r||!i&&n?void 0:o.parent;return r}move(e,t,i,s,o,n,r){let a=!1;return!!this.m_bActive&&(o=$(o),n=G(n),r=G(r),this.m_pCurrentPosition.x===e&&this.m_pCurrentPosition.y===t&&this.m_nButtons===s&&this.m_nPressure===o&&this.m_nTiltX===n&&this.m_nTiltY===r||(this.m_pCurrentPosition={x:e,y:t},this.m_nButtons=s,this.m_nPressure=o,this.m_nTiltX=n,this.m_nTiltY=r,a=!0),i&&(this.m_nDuration=M.elapsed(this.m_nStart,!0),this.m_bActive=!1,this.destroy()),a)}reinit(t=0){let i=this.m_pInitialPosition.x,s=this.m_pInitialPosition.y;0===t?(i=this.m_pCurrentPosition.x,s=this.m_pCurrentPosition.y):(this.m_pCurrentPosition.x>i?i=this.m_pCurrentPosition.x-e.min(t,this.m_pCurrentPosition.x-i):this.m_pCurrentPosition.x<i&&(i=this.m_pCurrentPosition.x+e.min(t,i-this.m_pCurrentPosition.x)),this.m_pCurrentPosition.y>s?s=this.m_pCurrentPosition.y-e.min(t,this.m_pCurrentPosition.y-s):this.m_pCurrentPosition.y<s&&(s=this.m_pCurrentPosition.y+e.min(t,s-this.m_pCurrentPosition.y))),this.m_pInitialPosition={x:i,y:s}}distance(e){return e instanceof Mr?this.distance(e.currentPosition):e&&A(e.x)&&A(e.y)?Math.sqrt(Math.pow(this.m_pCurrentPosition.x-e.x,2)+Math.pow(this.m_pCurrentPosition.y-e.y,2)):0}alpha(e){return e instanceof Mr?this.alpha(e.currentPosition):e&&A(e.x)&&A(e.y)?-180*Math.atan2(this.m_pCurrentPosition.y-e.y,this.m_pCurrentPosition.x-e.x)/Math.PI:0}radialDistance(t){if(t instanceof Mr)return this.radialDistance(t.currentPosition);if(t&&A(t.x)&&A(t.y)){const i=this.distance(t);let s=Math.abs(this.alpha(t));return s>90&&(s=180-s),s*=Math.PI/180,e.max(Math.sin(s)*i,Math.cos(s)*i)}return 0}forEachController(e,t="*"){return this.controllers((t=>e(t,this)||!1),t,!0,!1)}translatePointToAsset(t,i){const s=(i||this.target).rectangle;return{x:e.round(t.x-s.left),y:e.round(t.y-s.top)}}translateToAsset(e){return this.translatePointToAsset(this.m_pCurrentPosition,e)}implements(e){return Q(this.m_nTypes&xr.implements(e))}focus(e,t=!1){if(this.m_bFocus=!1,e){let i=e;for(;i;){if(xr.assetWithPhysicalFocus&&i.isEqual(xr.assetWithPhysicalFocus)||xr.assetWithVirtualFocus&&i.isEqual(xr.assetWithVirtualFocus)){const e=i.tagName,s=i.data(wr);return this.m_bFocus=!0,!("disable"!==s&&"void"!==s&&"input"!==s&&!xr.isInputElement(e)||(this.m_nTypes=t||"disable"===s?yr:"void"===s?vr:fr,this.m_pTarget=i,0))}i=i.parent}}return!1}destroy(){this.velocity(!0)}}const wr="touch-mode";class xr{static get throttle(){return this.m_pThrottle||(this.m_pThrottle=new et((e=>this.cycle(e))))}static get enumerator(){return this.m_pEnumerator.n}static get count(){return this.m_nCount}static get touches(){return this.m_nTouches}static get touched(){return P(this.m_pPoints)}static get captured(){return this.m_nCaptured}static get isListening(){return this.m_pAssets.length>0}static get isDisabled(){return this.m_bDisabled}static set isDisabled(e){this.m_bDisabled=e}static get isDragging(){return 0!==this.touches&&Q(this.captured&this.implements("drag"))}static get isScrolling(){return 0!==this.touches&&Q(this.captured&this.implements("scroll"))}static get isTouch(){const e=this.firstPoint;return!!(e&&e.isActive&&e.isTouch)}static get wasTouched(){return this.isTouch||M.precise-this.m_nTouched<100}static get isMouse(){const e=this.firstPoint;return!!(e&&e.isActive&&e.isMouse)}static get isPen(){const e=this.firstPoint;return!!(e&&e.isActive&&e.isPen)}static get isInput(){const e=this.assetWithPhysicalFocus;return e instanceof on&&this.isInputElement(e.tagName)}static get supportsPointerEvents(){return!(!window.PointerEvent&&!this.m_bPointerEvents)}static get points(){return this.m_pPoints}static get firstPoint(){return this.pointFromIndex(0)}static get secondPoint(){return this.pointFromIndex(1)}static get assetWithVirtualFocus(){return this.m_pFocusVirtual}static get assetWithPhysicalFocus(){return this.m_pFocusPhysical||(document.activeElement?on.of(document.activeElement):void 0)}static get logging(){return this.m_bLog}static set logging(e){this.m_bLog!==e&&(this.m_bLog=e,e?this.log():(this.m_nLog=_e(this.m_nLog),this.m_pLog&&(this.m_pLog.destroy(),this.m_pLog=void 0)))}static pointCreate(e,t,i,s,o,n,r,a,l,c,u,h,d){const p=new Mr(e,on.of(t),i,s,o,n,r,a,l,c,u,h,d,!1);return this.m_nTouches++,Ue(this.m_pPoints,W(e),p)}static pointClear(e){const t=this.point(e);t&&(t.destroy(),$e(this.m_pPoints,W(e))),this.m_nTouches=P(this.m_pPoints)}static pointDecrease(){this.m_nTouches--}static pointRelease(e=!1){e?this.release():0===this.touches&&(this.m_nCaptured=0)}static findListenerAsset(e){let t=e;for(;t;){if(G(t.data("touch-controllers"))>0)return t;t=t.parent}}static attach(e){this.m_pBuffer.push(e),_e(this.m_nBind),this.m_nBind=ke((()=>{this.m_nBind=ke((()=>{const e=[],t=[];let i=this.m_pBuffer.pop();for(;i;)-1!==i.asset.depth?e.push({Asset:i.asset,Depth:i.asset.depth}):t.push(i),i=this.m_pBuffer.pop();e.sort(((e,t)=>e.Depth-t.Depth)),ee(e,(e=>{const t=this.findListenerAsset(e.Asset);if(t)t.data("touch-controllers",W(G(t.data("touch-controllers"))+1));else{let t=0;ee(ce(this.m_pAssets,(t=>{for(;t;){if(t.isEqual(e.Asset))return!0;t=t.parent}return!1})),(e=>{e&&(t+=this.detach(e,!0))})),e.Asset.data("touch-controllers",W(1+t)),this.m_pAssets.push(e.Asset),this.supportsPointerEvents||(go.attachListener(e.Asset,"touchstart",this.touchStart,{capture:!0,passive:!1},this),go.attachListener(e.Asset,"mousedown",this.mouseDown,{capture:!0,passive:!1},this)),go.attachListener(e.Asset,["pointerdown","MSPointerDown"],this.pointerDown,{capture:!0,passive:!1},this),go.attachListener(e.Asset,["wheel","mousewheel","DOMMouseScroll"],this.mouseWheel,{capture:!0,passive:!1},this),go.attachListener(e.Asset,"contextmenu",this.contextMenu,{capture:!0,passive:!1},this),go.attachListener(e.Asset,"click",this.click,{capture:!0,passive:!1},this),st&&console.log(qe.log("Touch",`Controller host attached to DOM element (now attached to ${this.m_pAssets.length} element${1===this.m_pAssets.length?"":"s"})`))}})),ee(t,(e=>this.attach(e)))}))}))}static detach(e,t){const i=G(e.data("touch-controllers"));if(1===i||t){e.destroyData("touch-controllers");for(let t=0;t<this.m_pAssets.length;t++)if(this.m_pAssets[t]===e){this.m_pAssets.splice(t,1);break}this.supportsPointerEvents||(go.detachListener(e,"touchstart",this),go.detachListener(e,"mousedown",this)),go.detachListener(e,["pointerdown","MSPointerDown"],this),go.detachListener(e,["mousewheel","DOMMouseScroll"],this),go.detachListener(e,"contextmenu",this),go.detachListener(e,"click",this),st&&console.log(qe.log("Touch",`Controller host detached from DOM element (now attached to ${this.m_pAssets.length} element${1===this.m_pAssets.length?"":"s"})`))}else i>1&&e.data("touch-controllers",W(i-1));return i}static attachTouch(){this.supportsPointerEvents||this.m_bTouchListeners||(this.m_bTouchListeners=!0,go.attachListener(document,"touchmove",this.touchMove,{capture:!0,passive:!1,stopPropagation:!0},this),go.attachListener(document,"touchend",this.touchEnd,{capture:!0,passive:!1},this),go.attachListener(document,"touchcancel",this.touchCancel,{capture:!0,passive:!1},this))}static detachTouch(){0===this.touches&&this.m_bTouchListeners&&(this.m_bTouchListeners=!1,go.detachListener(document,"touchmove",this),go.detachListener(document,"touchend",this),go.detachListener(document,"touchcancel",this))}static attachMouse(){this.supportsPointerEvents||this.m_bMouseListeners||(this.m_bMouseListeners=!0,go.attachListener(document,"mousemove",this.mouseMove,{capture:!0,passive:!1,limiter:"throttle"},this),go.attachListener(document,"mouseup",this.mouseUp,{capture:!0,passive:!1},this))}static detachMouse(){this.m_bMouseListeners||(this.m_bMouseListeners=!1,go.detachListener(document,"mousemove",this),go.detachListener(document,"mouseup",this))}static attachPointer(){this.supportsPointerEvents&&!this.m_bPointerListeners&&(this.m_bPointerListeners=!0,go.attachListener(document,["pointermove","MSPointerMove"],this.pointerMove,{capture:!0,passive:!1},this),go.attachListener(document,["pointerup","MSPointerUp"],this.pointerUp,{capture:!0,passive:!1},this),go.attachListener(document,["pointercancel","MSPointerCancel"],this.pointerCancel,{capture:!0,passive:!1},this))}static detachPointer(){0===this.touches&&this.m_bPointerListeners&&(this.m_bPointerListeners=!1,go.detachListener(document,["pointermove","MSPointerMove"],this),go.detachListener(document,["pointerup","MSPointerUp"],this),go.detachListener(document,["pointercancel","MSPointerCancel"],this))}static switchToPointerEvents(){this.m_bPointerEvents||(this.m_bPointerEvents=!0,ee(this.m_pAssets,(e=>{go.detachListener(e,"touchstart",this),go.detachListener(e,"mousedown",this)})))}static propagation(e){return!(this.m_nTypes&(fr|yr)||(go.stopPropagation(e),0))}static flush(){var e;A(e=this.m_nQueue)&&!(e<=0)&&(Js===e?(_e(Qs),Xs=!1,eo()):so($s,e,!0,!0)||so(Vs,e,!1,!0)),this.m_nQueue=0}static touchStart(e){let t;if(this.flush(),e.touches&&1===e.touches.length?this.touchSanitize():t=this.firstPoint,!t||t.isTouch){let i=!1,s=!1;ee(e.touches,(e=>{this.point(e.identifier)||(t=this.pointCreate(e.identifier,e.target,e.clientX,e.clientY,!0,!1,0,0,0,0,0,0,0),i=!0)})),!this.m_pFocusVirtual||!t||t.hasVirtualFocus||t.types&(fr|br)||this.blur(),this.m_nTypes=0,le(this.m_pPoints,(t=>!re(e.touches,(e=>e.identifier===t.id))||(this.m_nTypes|=t.types,!1)),{do:e=>{this.pointClear(e.id),i=!0,s=!0},return:"none"}),this.pointRelease(s),i&&(this.m_nQueue=no((()=>{this.m_nQueue=0,this.cycle(1)})))}this.m_nTouched=M.precise,this.attachTouch(),this.propagation(e),this.log()}static touchMove(e){let t=!1;ee(e.changedTouches,(e=>{const i=this.point(e.identifier);i&&(t=i.move(e.clientX,e.clientY,!1,0,0,0,0)||t)})),t&&this.throttle.invoke(2),this.log()}static touchEnd(e){const t=[];this.flush(),ee(e.changedTouches,(e=>{const i=this.point(e.identifier);i&&(i.move(e.clientX,e.clientY,!0,0,0,0,0),t.push(e.identifier),this.pointDecrease())})),this.m_nTouched=M.precise,this.detachTouch(),this.pointRelease(),this.log(),P(t)>0&&(this.m_nQueue=no((()=>{this.m_nQueue=0,this.cycle(4),ee(t,(e=>this.pointClear(e)))})))}static touchCancel(){const e=this.touches>0;this.m_nTouches=0,this.flush(),this.pointRelease(),this.detachTouch(),this.detachPointer(),this.log(),e&&(this.m_nQueue=no((()=>{this.m_nQueue=0,this.cycle(4),ee(this.m_pPoints,(e=>this.pointClear(e.id)))})))}static touchSanitize(){const e=this.firstPoint;e&&e.isTouch&&(this.terminate(this.m_nTypes),ee(this.m_pPoints,(e=>this.pointClear(e.id))),this.m_nTypes=0,this.m_nCaptured=0)}static mouseDown(t){const i=M.precise,s=G(t.detail),o=t.sourceCapabilities;if(!o||!o.firesTouchEvents){if(s>1&&i-this.m_nClick>300&&(this.m_nClicks=s),this.m_nClick=i,this.m_nTouched=0,this.flush(),this.touchSanitize(),0===this.touched){const i=this.pointCreate(0,t.target,t.clientX,t.clientY,!1,"pen"===t.pointerType,this.pointerButtons(t),e.max(s-this.m_nClicks,0),0,0,t.pressure,0,0);i&&(!this.m_pFocusVirtual||i.hasVirtualFocus||i.types&(fr|br)||this.blur(),this.m_nTypes=i.types,this.m_nQueue=no((()=>{this.m_nQueue=0,this.cycle(8)})))}this.attachMouse(),this.attachPointer(),this.propagation(t),this.log()}}static mouseMove(e){const t=this.point(0);!t||t.types&yr||(go.stopPropagation(e),!t.isTouch&&t.isActive&&t.move(e.clientX,e.clientY,!1,this.pointerButtons(e),e.pressure,0,0)&&(t.types&vr||this.throttle.invoke(16),this.log()))}static mouseUp(e){let t;this.flush(),t=this.point(0),t&&(t.isTouch||(t.move(e.clientX,e.clientY,!0,0,0,0,0),this.pointDecrease(),this.pointRelease(),this.log(),this.m_nQueue=no((()=>{this.m_nQueue=0,!t||t.types&vr||this.cycle(32),this.pointClear(0)}))),this.detachMouse(),this.detachPointer(),this.propagation(e))}static mouseWheel(t){if(!(Mr.typesAndTarget(on.of(t.target)).types&yr)){let i=0,s=G(t.wheelDelta||40*-t.detail);switch(go.stopPropagation(t),t.deltaMode){case 1:A(t.deltaX)&&(i=40*-t.deltaX),A(t.deltaY)&&(s=40*-t.deltaY);break;case 2:A(t.deltaX)&&(i=120*-t.deltaX),A(t.deltaY)&&(s=120*-t.deltaY);break;default:A(t.deltaX)&&(i=-t.deltaX),A(t.deltaY)&&(s=-t.deltaY)}no((()=>{0===this.touched&&(this.m_nTypes=this.pointCreate(0,t.target,t.clientX,t.clientY,!1,!1,this.pointerButtons(t),0,e.round(i),e.round(s),0,0,0).types,this.cycle(64),this.pointDecrease(),this.pointRelease(),this.log(),this.pointClear(0))}))}}static pointerDown(e){let t=this.point(0)||this.firstPoint;this.switchToPointerEvents(),t&&t.type!==e.pointerType&&(t.isMouse?this.mouseUp(e):this.pointerCancel()),"touch"===e.pointerType?(this.flush(),this.point(e.pointerId)||(t=this.firstPoint,t&&!t.isTouch||(t=this.pointCreate(e.pointerId,e.target,e.clientX,e.clientY,!0,!1,this.pointerButtons(e),0,0,0,e.pressure,e.tiltX,e.tiltY),t&&(!this.m_pFocusVirtual||t.hasVirtualFocus||t.types&(fr|br)||this.blur(),this.m_nTypes=t.types,this.m_nQueue=no((()=>{this.m_nQueue=0,this.cycle(1)})))),this.m_nTouched=M.precise,this.attachPointer(),this.propagation(e),this.log())):this.mouseDown(e)}static pointerMove(e){let t;"touch"===e.pointerType?(go.stopPropagation(e),t=this.point(e.pointerId),t&&t.move(e.clientX,e.clientY,!1,this.pointerButtons(e),e.pressure,e.tiltX,e.tiltY)&&(this.throttle.invoke(2),this.log())):this.mouseMove(e)}static pointerUp(e){let t;"touch"===e.pointerType?(this.flush(),t=this.point(e.pointerId),t?(t.isActive&&(t.move(e.clientX,e.clientY,!0,this.pointerButtons(e),e.pressure,e.tiltX,e.tiltY),this.pointDecrease(),this.pointRelease(),this.log(),this.m_nQueue=no((()=>{this.m_nQueue=0,this.cycle(4),t&&this.pointClear(t.id)}))),this.detachPointer(),this.propagation(e)):(go.stopPropagation(e),this.pointerCancel()),this.m_nTouched=M.precise):this.mouseUp(e)}static pointerCancel(){this.touchCancel()}static pointerButtons(e){let t=0;if(A(e.buttons)){const i=C(e.pointerType)&&"pen"===e.pointerType;1&e.buttons&&(t|=i?512:1),2&e.buttons&&(t|=i?1024:2),4&e.buttons&&(t|=4),8&e.buttons&&(t|=8),16&e.buttons&&(t|=16),32&e.buttons&&(t|=2048)}else if(A(e.button))switch(e.button){case 0:t|=1;break;case 1:t|=4;break;case 2:t|=2}return Q(e.altKey)&&(t|=128),Q(e.ctrlKey)&&(t|=64),Q(e.shiftKey)&&(t|=32),Q(e.metaKey)&&(t|=256),t}static contextMenu(e){this.propagation(e)}static click(e){this.propagation(e)}static cycle(e){let t=!this.m_pFocusVirtual||Q(64&e);if(!(this.isDisabled&&-37&e)){if(!t){const e=this.firstPoint;e&&(e.hasVirtualFocus||e.types&(fr|br))&&(t=!0)}if(t){if(this.m_bNotifications&&ue(this.m_pNotifications,(t=>!Q(t(e),!0))))return;ee(this.m_pProcessors,(t=>{(this.m_nCaptured||this.m_nTypes)&t.types&&t.processor&&t.processor(e)}))}}}static processor(e){return ue(this.m_pProcessors,(t=>Q(t.types&e)))}static processorId(e){const t=this.processor(e);return t?t.id:"?"}static registerProcessor(e,t){return!!(e&&t&&t.id>0)&&(this.m_nProcessors&e.types||(this.m_nProcessors|=e.types,this.m_pProcessors.push(e),this.m_pProcessors.sort(((e,t)=>G(t.priority)-G(e.priority)))),!0)}static log(){st&&this.m_bLog&&(this.m_nLog=Ne((()=>{this.m_pLog=this.m_pLog||dr.create("div",(e=>{e.positioning="absolute",e.left=0,e.right=0,e.bottom=0,e.opacity=75,e.styles={backgroundColor:"#2c3e50",fontFamily:"Courier New",fontSize:11,color:"#fff",whiteSpace:"nowrap",padding:5,overflow:"hidden"}}));const t=10+13*(P(this.points)+1),i=e=>` <span style="color: #3498db;">${e}&lt;</span>`,s='<span style="color: #3498db;">&gt;</span>';let o='<span style="color: #2ecc71;">';o+=`Touches: <b>${this.touches}</b>`,o+=`&nbsp;&nbsp;&nbsp;Touched: <b>${this.touched}</b>`,o+=`&nbsp;&nbsp;&nbsp;Points: <b>${P(this.points)}</b>`,o+=`&nbsp;&nbsp;&nbsp;Controllers: <b>${this.count}</b>`,o+=`&nbsp;&nbsp;&nbsp;Dragging: <b>${this.isDragging}</b>`,o+=`&nbsp;&nbsp;&nbsp;Scrolling: <b>${this.isScrolling}</b>`,o+=`&nbsp;&nbsp;&nbsp;Touch: <b>${this.isTouch}</b>`,o+=`&nbsp;&nbsp;&nbsp;Touched: <b>${this.wasTouched}</b>`,o+=`&nbsp;&nbsp;&nbsp;Mouse: <b>${this.isMouse}</b>`,o+=`&nbsp;&nbsp;&nbsp;Pen: <b>${this.isPen}</b>`,o+=`&nbsp;&nbsp;&nbsp;Input: <b>${this.isInput}</b>`,o+=`&nbsp;&nbsp;&nbsp;PointerEvents API: <b>${this.supportsPointerEvents}</b>`,o+="</span>",ee(this.points,(t=>{o+=`</br><b>#${t.id}</b>`,o+=`${i("")}${e.round(t.diffX)}x${e.round(t.diffY)}${s}`,o+=`${i("Mouse")}${t.isMouse}${s}`,o+=`${i("Touch")}${t.isTouch}${s}`,o+=`${i("Pen")}${t.isPen}${s}`,o+=`${i("Active")}${t.isActive}${s}`,o+=`${i("")}${e.conform(t.angle,2)}${s}`,o+=`${i("Radius")}${e.conform(t.radius,2)}${s}`,o+=`${i("Velocity")}${e.conform(t.velocityX,2)}`,o+=`x${e.conform(t.velocityY,2)}${s}`,o+=`${i("Buttons")}${t.buttons}${s}`,o+=`${i("Touch")}${t.isTouch}${s}`,o+=`${i("Clicks")}${t.clicks}${s}`,o+=`${i("WheelX")}${t.wheelX}${s}`,o+=`${i("WheelY")}${t.wheelY}${s}`,o+=`${i("Pressure")}${e.conform(t.pressure,3)}${s}`,o+=`${i("T")}${e.conform(t.duration,1)}ms${s}`})),ro((()=>{this.m_pLog&&(this.m_pLog.height=t,this.m_pLog.HTML=o)}))}),this.m_nLog))}static inventory(e,t,i){if(e){let s=e.data("touch-id");if(C(s)&&z(Ye(this.m_pInventory,s))||(s=A(t)?W(t):"",C(s)&&Fe(this.m_pInventory,e.data("touch-id",s),[])),C(s)){const o=Ye(this.m_pInventory,s)||[];A(i)&&-1!==(i=o.indexOf(i))&&o.splice(i,1),A(t)&&o.push(t),0===P(o)&&($e(this.m_pInventory,s),e.destroyData("touch-id"))}}}static types(e){return se(Ye(this.m_pInventory,e.data("touch-id")),((e,t)=>e|this.controller(t).type),0)}static implement(e,t){this.m_pGestures[e]=this.implements(e)|t}static implements(e){return this.m_pGestures[e]||0}static register(e,t){return this.registerProcessor(e,t)?(this.controller(t)||(this.m_nCount++,this.inventory(t.asset,t.id),this.attach(t),Ue(this.m_pControllers,W(t.id),t),t.onRegister(),st&&console.log(qe.log("Touch","Attached controller `"+e.id+"` with identifier `"+t.id+"` (now listening for "+this.count+" object"+(1===this.count?"":"s")+")"))),t.id):0}static unregister(e){if(e.onDestroy()){for(let t=0;t<this.m_pBuffer.length;t++)if(this.m_pBuffer[t]===e){this.m_pBuffer.splice(t,1);break}this.inventory(e.asset,void 0,e.id),this.m_nCount--,st&&console.log(qe.log("Touch","Detached controller `"+this.processorId(e.type)+"` with identifier `"+e.id+"` (now listening for "+this.count+" object"+(1===this.count?"":"s")+")")),$e(this.m_pControllers,W(e.id));const t=this.findListenerAsset(e.asset);t&&this.detach(t,!1)}}static unregisterAsset(e,t="*"){if(e=on.of(e)){let i=!1;return ee(this.filter(e,t),(e=>{this.unregister(e),i=!0})),i}return!1}static registerNotification(e,t){let i;Ue(this.m_pNotifications,e,t),i=P(this.m_pNotifications),this.m_bNotifications=i>0,st&&console.log(qe.log("Touch","Register notification `"+e+"` (now listening for "+i+" notification"+(1===i?"":"s")+")"))}static unregisterNotification(e){let t;$e(this.m_pNotifications,e),t=P(this.m_pNotifications),this.m_bNotifications=t>0,st&&console.log(qe.log("Touch","Unregister notification `"+e+"` (now listening for "+t+" notification"+(1===t?"":"s")+")"))}static controller(e){return Ye(this.m_pControllers,W(e instanceof gr?e.id:e))}static each(e,t,i){"*"===e?ee(this.m_pControllers,(e=>{("*"===t||t&e.type)&&i(e)})):ee(Ye(this.m_pInventory,e.data("touch-id")),(e=>{const s=this.controller(e);s&&("*"===t||t&s.type)&&i(s)}))}static filter(e,t){const i=[];return this.each(e,t,(e=>{i.push(e)})),i}static filterRecursive(e,t="*",i=!1){const s=[];return ee(e instanceof on?[e]:e,(e=>{for(;e;)s.push(...this.filter(e,t)),e=i||0===s.length?e.parent:void 0})),s}static first(e,t){if("*"===e)return ue(this.m_pControllers,(e=>!!("*"===t||t&e.type)));{let i;return ue(Ye(this.m_pInventory,e.data("touch-id")),(e=>{const s=this.controller(e);return!(!s||!("*"===t||t&s.type)||(i=s,0))})),i}}static point(...e){const t=P(e);for(let i=0;i<t;i++){const t=e[i];if(A(t)){const e=Ye(this.m_pPoints,W(t));if(e)return e}}}static pointFromIndex(e){return R(this.m_pPoints,e)}static schedule(e,t=0,...i){N(e)&&(this.scheduleCancel(),this.m_fnScheduler=()=>{this.m_nScheduler=0,this.m_fnScheduler=void 0,pe(e,...i)},t>0?this.m_nScheduler=De(this.m_fnScheduler,t):this.m_fnScheduler())}static scheduleInvoke(){this.schedulePause(),pe(this.m_fnScheduler)}static schedulePause(){this.m_nScheduler=Ae(this.m_nScheduler)}static scheduleContinue(e=0){this.schedulePause(),this.m_fnScheduler&&(e>0?this.m_nScheduler=De(this.m_fnScheduler,e):this.m_fnScheduler())}static scheduleCancel(){this.schedulePause(),this.m_fnScheduler=void 0}static terminate(e){ee(this.m_pProcessors,(t=>{t.terminate&&(0===e||"*"===e||e&t.types)&&t.terminate()}))}static claim(e){ee(this.m_pProcessors,(t=>{t.terminate&&e&~t.types&&t.terminate()}))}static capture(e){0!==e&&this.m_nCaptured===e||(e&this.implements("hold")&&this.blur(),this.claim(this.m_nCaptured=e))}static release(){this.capture(0)}static mode(e,t){e.data(wr,t)}static isInputElement(e){return"input"===e||"textarea"===e||"select"===e}static focus(e,t,i){const s=this.firstPoint,o=this.m_pFocusPhysical;e!==this.m_pFocusVirtual&&(this.blur(),this.m_pFocusVirtual=e,this.m_pFocusPhysical=t,this.m_fnBlur=i,s&&s.focus(s.target),!t||o&&t.isEqual(o)||t.focus())}static blur(e){if(this.m_pFocusVirtual&&(!e||this.m_pFocusVirtual.isEqual(e))){const e=this.m_pFocusPhysical;this.m_pFocusVirtual=void 0,this.m_pFocusPhysical=void 0,this.m_fnBlur&&(this.m_fnBlur(),this.m_fnBlur=void 0),e&&e.blur()}}static onFocusOrBlur(e,t,i,s){t.on("focus",(()=>{this.focus(e,t,s),i&&i()})),t.on("blur",(()=>this.blur(e)))}static enable(){this.isDisabled=!1}static disable(){this.isDisabled=!0}static destroy(){this.m_nBind=_e(this.m_nBind),ee(this.m_pControllers,(e=>{this.unregister(e)}))}}var Sr,Ir,kr,Nr,_r;xr.m_pEnumerator=new l,xr.m_pControllers={},xr.m_pBuffer=[],xr.m_pAssets=[],xr.m_pInventory={},xr.m_pProcessors=[],xr.m_pPoints={},xr.m_pNotifications={},xr.m_pGestures={},xr.m_bMouseListeners=!1,xr.m_bTouchListeners=!1,xr.m_bPointerListeners=!1,xr.m_nBind=0,xr.m_nProcessors=0,xr.m_bNotifications=!1,xr.m_bDisabled=!1,xr.m_bPointerEvents=!1,xr.m_nQueue=0,xr.m_nTypes=0,xr.m_nCount=0,xr.m_nTouches=0,xr.m_nTouched=0,xr.m_nClick=0,xr.m_nClicks=0,xr.m_nCaptured=0,xr.m_nScheduler=0,xr.m_bLog=!1,xr.m_nLog=0,xr.stylesheet=So.app,dr.whenDestroyed((e=>{xr.blur(e),xr.unregisterAsset(e)})),function(e){e[e.None=0]="None",e[e.MouseLeft=1]="MouseLeft",e[e.MouseRight=2]="MouseRight",e[e.MouseMiddle=4]="MouseMiddle",e[e.MouseBack=8]="MouseBack",e[e.MouseForward=16]="MouseForward",e[e.KeyboardShift=32]="KeyboardShift",e[e.KeyboardCtrl=64]="KeyboardCtrl",e[e.KeyboardAlt=128]="KeyboardAlt",e[e.KeyboardMeta=256]="KeyboardMeta",e[e.PenContact=512]="PenContact",e[e.PenContactWithBarrel=1024]="PenContactWithBarrel",e[e.PenEraser=2048]="PenEraser"}(Sr||(Sr={})),function(e){e[e.Bidirectional=1]="Bidirectional",e[e.Horizontal=2]="Horizontal",e[e.Vertical=4]="Vertical"}(Ir||(Ir={})),function(e){e[e.OnTouchStart=1]="OnTouchStart",e[e.OnTouchMove=2]="OnTouchMove",e[e.OnTouchEnd=4]="OnTouchEnd",e[e.OnMouseDown=8]="OnMouseDown",e[e.OnMouseMove=16]="OnMouseMove",e[e.OnMouseUp=32]="OnMouseUp",e[e.OnMouseWheel=64]="OnMouseWheel"}(kr||(kr={})),function(e){e[e.Lowest=1]="Lowest",e[e.Low=2]="Low",e[e.Normal=3]="Normal",e[e.High=4]="High",e[e.Highest=5]="Highest"}(Nr||(Nr={})),function(e){e[e.Mouse=1]="Mouse",e[e.Touch=2]="Touch",e[e.Pen=4]="Pen"}(_r||(_r={}));class Lr extends gr{constructor(e,t,i,s,o=7){super(Lr,e,"multiple"),this.m_sHover="none",this.m_bAlways=!1,this.m_nHoverType=o,this.on=t,this.onStart=i,this.onEnd=s,e.on("pointerenter",(t=>{xr.each(e,this.type,(e=>{if(e.m_nHoverType&Lr.eventHoverType(t)){let i="mouse";switch(t.pointerType){case"touch":i="touch";break;case"pen":i="pen"}e.hoverStart(i)}}))}),{noOverwrite:!0}),e.on("pointerleave",(t=>{xr.each(e,this.type,(e=>{e.m_nHoverType&Lr.eventHoverType(t)&&e.hoverEnd()}))}),{noOverwrite:!0}),!xr.supportsPointerEvents&&1&this.m_nHoverType&&(2&this.m_nHoverType&&(Lr.m_bTouch=!0),e.on("mouseenter",(()=>{xr.supportsPointerEvents||xr.wasTouched||xr.each(e,this.type,(e=>{1&e.m_nHoverType&&(Lr.m_nMouse++,e.hoverStart("mouse"))}))}),{noOverwrite:!0}),e.on("mouseleave",(()=>{xr.each(e,this.type,(e=>{1&e.m_nHoverType&&(Lr.m_nMouse>0&&Lr.m_nMouse--,e.hoverEnd())}))}),{noOverwrite:!0}))}static get id(){return"Hover"}static get types(){return this.m_nType||(this.m_nType=gr.createType())}static eventHoverType(e){switch(e.pointerType){case"touch":return 2;case"pen":return 4}return 1}static processor(e){!xr.supportsPointerEvents&&this.m_bTouch&&(1&e&&(this.m_nMouse>0&&(xr.each("*",this.types,(e=>{1&e.m_nHoverType&&e.hoverEnd()})),this.m_nMouse=0),1===xr.touches?Mr.controllers(xr.firstPoint,this.types,"bubble",((e,t)=>{2&e.m_nHoverType&&(e.hoverStart("touch"),this.m_pHovers.push(e))})):this.terminate()),4&e&&this.terminate())}static terminate(){!xr.supportsPointerEvents&&this.m_pHovers.length>0&&ee(this.m_pHovers.splice(0,this.m_pHovers.length),(e=>{e.hoverEnd()}))}static disable(){this.m_bDisabled=!0}static enable(){this.m_bDisabled=!1}static stop(){xr.each("*",this.types,(e=>{e.hoverEnd()}))}static on(e,t,i,s,o=7){return new Lr(e,t,i,s,o)}static mouse(e,t,i,s){return new Lr(e,t,i,s,1)}static touch(e,t,i,s){return new Lr(e,t,i,s,2)}static pen(e,t,i,s){return new Lr(e,t,i,s,4)}static pointer(e,t,i,s){return new Lr(e,t,i,s,5)}get isHovered(){return"none"!==this.m_sHover}hoverStart(e){if((!Lr.m_bDisabled||this.m_bAlways)&&!this.isDisabled&&"none"===this.m_sHover){const t={asset:this.asset,hover:this,isHovered:!0,isMouse:"mouse"===e,isTouch:"touch"===e,isPen:"pen"===e};this.m_sHover=e,this.onHoverStart(t),this.onHover(t)}}hoverEnd(){if("none"!==this.m_sHover){const e={asset:this.asset,hover:this,isHovered:!1,isMouse:"mouse"===this.m_sHover,isTouch:"touch"===this.m_sHover,isPen:"pen"===this.m_sHover};this.onHover(e),this.onHoverEnd(e),this.m_sHover="none"}}onHover(e){this.emitHook("OnHover",e),pe(this.on,e)}onHoverStart(e){this.emitHook("OnHoverStart",e),pe(this.onStart,e)}onHoverEnd(e){this.emitHook("OnHoverEnd",e),pe(this.onEnd,e)}onDestroy(){return!!super.onDestroy()&&(1===P(xr.filter(this.asset,this.type))&&(this.asset.off("pointerenter"),this.asset.off("pointerleave"),this.asset.off("mouseenter"),this.asset.off("mouseleave")),!0)}alwaysOn(){return this.m_bAlways=!0,this}}Lr.m_pHovers=[],Lr.m_bTouch=!1,Lr.m_bDisabled=!1,Lr.m_nMouse=0;class Cr{constructor(e,t){this.m_bStopped=!1,this.m_nStep=0,this.m_nId=0,this.m_fnOnStep=e,this.m_fnOnStop=t}get isStopped(){return this.m_bStopped}get isPostponed(){return 0!==this.m_nId}get step(){return this.m_nStep}get payload(){return this.m_pPayload}onStep(){pe(this.m_fnOnStep,this)}onStop(){pe(this.m_fnOnStop,this)}next(e,t){return this.suspend(),S(t)&&(this.m_pPayload=t),A(e)?this.m_nStep=e||0:this.m_nStep++,this.m_nStep>0&&this.onStep(),this.step}invoke(e,t=0,i=!0){const s=()=>{this.suspend(),pe(e,this),i&&this.reset()};this.suspend(),t>0?(this.m_nId=Le(s,t),this.m_fnCallee=e):s()}postpone(e,t=0){this.invoke(e,t,!1)}suspend(){0!==this.m_nId&&(this.m_nId=Ce(this.m_nId),this.m_fnCallee=void 0)}continue(){0!==this.m_nId&&(pe(this.m_fnCallee,this),this.suspend())}stop(){this.suspend(),this.m_bStopped=!0,this.m_nStep>0&&this.onStop(),this.m_pPayload=void 0,this.m_nStep=0}reset(){this.stop(),this.m_bStopped=!1,this.m_fnCallee=void 0}}class Dr extends gr{constructor(e,t,i,s,o=!1,n,r){super(Dr,e,"multiple",r,n,o?Dr.tapDouble:Dr.tapSingle),this.m_nTapped=0,this.m_nCount=0,this.m_nButtons=0,this.on=t,this.onStart=i,this.onEnd=s,xr.implement("tap",Dr.tapSingle),xr.implement("doubletap",Dr.tapDouble)}static get tapSingle(){return this.m_nTapSingle||(this.m_nTapSingle=gr.createType())}static get tapDouble(){return this.m_nTapDouble||(this.m_nTapDouble=gr.createType())}static get id(){return"Tap"}static get types(){return this.tapSingle|this.tapDouble}static get priority(){return 2}static get state(){return this.m_pState||(this.m_pState=new Cr((()=>{2===this.state.step?this.onEnd():this.onStart()}),(()=>{this.onEnd()})))}static onStart(){Mr.controllers(xr.firstPoint,this.tapSingle|this.tapDouble,"stop",((e,t)=>{if(e.m_nButtons=t.buttons,!e.isDisabled){const i={tap:e,asset:e.asset,offset:t.translateToAsset(e.asset),isMouse:t.isMouse,isTouch:t.isTouch,isPen:t.isPen,buttons:t.buttons};e.onTapStart(i),this.m_pEvents.push(i)}}))}static onEnd(){ee(this.m_pEvents.splice(0,this.m_pEvents.length),(e=>{e.tap&&e.tap.onTapEnd(e)}))}static processor(e){if(!(-46&e)){if(!this.state.isStopped){const e=xr.firstPoint;switch(this.state.step){case 0:1===xr.touches&&e&&(e.isTouch||513&e.buttons)&&this.state.next();break;case 1:case 3:if(0===xr.touches&&1===xr.touched&&e&&e.clicks<=2&&(!e.implements("snap")&&1===this.state.step||e.duration<=(this.state.step,300))&&e.radius<=(e.isTouch?15:10))if(1===this.state.step){const t=(e.implements("doubletap")||e.implements("snap"))&&e.duration<=300;t&&this.state.next(2,e.currentPosition),this.state.invoke((()=>{xr.claim(this.tapSingle),Mr.controllers(e,this.tapSingle,"stop",((e,t)=>e.tap(t)))}),t?200:0)}else(2===e.clicks||e.distance(this.state.payload)<=(e.isTouch?42:10))&&this.state.invoke((()=>{xr.claim(this.tapDouble),Mr.controllers(e,this.tapDouble,"stop",((e,t)=>e.tap(t)))}));else 1!==xr.touches&&this.state.stop();break;case 2:1===xr.touches&&e&&e.clicks<=2&&(e.isTouch||513&e.buttons)?this.state.next():this.state.stop()}}0===xr.touches&&2!==this.state.step&&this.terminate()}}static terminate(){this.state.reset()}static on(e,t,i,s,o=!1,n,r){return new Dr(e,t,i,s,o,n,r)}static single(e,t,i,s,o,n){return this.on(e,t,i,s,!1,o,n)}static double(e,t,i,s,o,n){return this.on(e,t,i,s,!0,o,n)}get isAllowed(){return!this.isDisabled&&M.elapsed(this.m_nTapped,!0)>300&&(this.m_nTapped=M.precise,!0)}get count(){return this.m_nCount}tap(e){return!!this.isAllowed&&(this.m_nCount++,this.onTap({tap:this,asset:this.asset,offset:e.translateToAsset(this.asset),isMouse:e.isMouse,isTouch:e.isTouch,isPen:e.isPen,buttons:this.m_nButtons}),!0)}onTap(e){this.emitHook("OnTap",e),this.emit({event:this.on,payload:e})}onTapStart(e){this.emitHook("OnTapStart",e),pe(this.onStart,e)}onTapEnd(e){this.emitHook("OnTapEnd",e),pe(this.onEnd,e)}}Dr.m_pEvents=[];class Ar extends gr{constructor(e,t,i,s,o,n,r){super(Ar,e,"multiple"),this.m_bFocus=!1,this.m_bFocusOnStroke="focus-on-stroke"===i,this.m_pPhysical=t,this.m_fnCondition=r,this.on=n,-1===t.tabIndex&&(t.tabIndex=o>0?o:0),this.m_nTab=t.tabIndex,t.on("focus",(()=>Ar.synchronize(e,t,!0,"auto-blur"===s)),{noOverwrite:!0}),t.on("blur",(()=>Ar.synchronize(e,t,!1,"auto-blur"===s)),{noOverwrite:!0}),"focus-on-tap"===i&&Dr.on(e,(()=>this.focus()))}static get id(){return"Focus"}static get types(){return this.m_nType||(this.m_nType=gr.createType())}static get priority(){return 5}static synchronize(e,t,i,s){s&&(i?xr.focus(e,t,(()=>this.synchronize(e,t,!1,!1))):xr.blur(e)),xr.each(e,this.types,(t=>{t.m_bFocus!==i&&(t.m_bFocus=i,t.isDisabled||t.onFocus({focus:t,asset:e,hasFocus:i}))}))}static processor(e){if(~9&e)return;if(0===xr.touches||xr.isInput)return;const t=xr.firstPoint;!t||t.isInput||t.isLabel||Mr.controllers(t,this.types,"bubble",(e=>!(e.isDisabled||!e.m_bFocusOnStroke)&&(!(!t.hasVirtualFocus||t.target.isChildOf(e.asset))||e.focus())))}static on(e,t,i,s,o,n=0,r){return new Ar(e,t,i,s,n,o,r)}get hasFocus(){return this.m_bFocus}onFocus(e){this.emitHook("OnFocus",e),this.on&&this.on(e)}focus(){return this.hasFocus||this.isDisabled||this.m_fnCondition&&!this.m_fnCondition(this)?this.hasFocus:this.m_pPhysical.focus()}blur(){return!!this.hasFocus&&this.m_pPhysical.blur()}update(){-1!==this.m_nTab&&(this.m_pPhysical.tabIndex=this.isDisabled||this.m_fnCondition&&!this.m_fnCondition(this)?-1:this.m_nTab)}onDestroy(){return!!super.onDestroy()&&(1===xr.filter(this.asset,this.type).length&&(this.m_pPhysical.off("focus"),this.m_pPhysical.off("blur")),!0)}}function jr(e){switch(e){case"Alt":case"AltGraph":case"CapsLock":case"Control":case"Fn":case"FnLock":case"Hyper":case"Meta":case"NumLock":case"ScrollLock":case"Shift":case"Super":case"Symbol":case"SymbolLock":case"Enter":case"Tab":case" ":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":case"PageDown":case"PageUp":case"Backspace":case"Clear":case"Copy":case"CrSel":case"Cut":case"Delete":case"EraseEof":case"ExSel":case"Insert":case"Paste":case"Redo":case"Undo":case"Accept":case"Again":case"Attn":case"Cancel":case"ContextMenu":case"Escape":case"Execute":case"Find":case"Finish":case"Help":case"Pause":case"Play":case"Props":case"Select":case"ZoomIn":case"ZoomOut":case"BrightnessDown":case"BrightnessUp":case"Eject":case"LogOff":case"Power":case"PowerOff":case"PrintScreen":case"Hibernate":case"Standby":case"WakeUp":case"AllCandidates":case"Alphanumeric":case"CodeInput":case"Compose":case"Convert":case"Dead":case"FinalMode":case"GroupFirst":case"GroupLast":case"GroupNext":case"GroupPrevious":case"ModeChange":case"NextCandidate":case"NonConvert":case"PreviousCandidate":case"Process":case"SingleCandidate":case"F1":case"F2":case"F3":case"F4":case"F5":case"F6":case"F7":case"F8":case"F9":case"F10":case"F11":case"F12":case"F13":case"F14":case"F15":case"F16":case"F17":case"F18":case"F19":case"F20":case"Soft1":case"Soft2":case"Soft3":case"Soft4":case"AppSwitch":case"Call":case"Camera":case"CameraFocus":case"EndCall":case"GoBack":case"GoHome":case"HeadsetHook":case"LastNumberRedial":case"Notification":case"MannerMode":case"VoiceDial":case"ChannelDown":case"ChannelUp":case"MediaFastForward":case"MediaPause":case"MediaPlay":case"MediaPlayPause":case"MediaRecord":case"MediaRewind":case"MediaStop":case"MediaTrackNext":case"MediaTrackPrevious":case"AudioBalanceLeft":case"AudioBalanceRight":case"AudioBassDown":case"AudioBassBoostDown":case"AudioBassBoostToggle":case"AudioBassBoostUp":case"AudioBassUp":case"AudioFaderFront":case"AudioFaderRear":case"AudioSurroundModeNext":case"AudioTrebleDown":case"AudioTrebleUp":case"AudioVolumeDown":case"AudioVolumeMute":case"AudioVolumeUp":case"MicrophoneToggle":case"MicrophoneVolumeDown":case"MicrophoneVolumeMute":case"MicrophoneVolumeUp":case"TV":case"TV3DMode":case"TVAntennaCable":case"TVAudioDescription":case"TVAudioDescriptionMixDown":case"TVAudioDescriptionMixUp":case"TVContentsMenu":case"TVDataService":case"TVInput":case"TVInputComponent1":case"TVInputComponent1":case"TVInputComposite1":case"TVInputComposite2":case"TVInputHDMI1":case"TVInputHDMI4":case"TVInputHDMI4":case"TVInputHDMI4":case"TVInputVGA1":case"TVMediaContext":case"TVNetwork":case"TVNumberEntry":case"TVPower":case"TVRadioService":case"TVSatellite":case"TVSatelliteBS":case"TVSatelliteCS":case"TVSatelliteToggle":case"TVTerrestrialAnalog":case"TVTerrestrialDigital":case"TVTimer":case"AVRInput":case"AVRPower":case"ColorF0Red":case"ColorF1Green":case"ColorF2Yellow":case"ColorF3Blue":case"ColorF4Grey":case"ColorF5Brown":case"ClosedCaptionToggle":case"Dimmer":case"DisplaySwap":case"DVR":case"Exit":case"FavoriteClear0":case"FavoriteClear1":case"FavoriteClear2":case"FavoriteClear3":case"FavoriteRecall0":case"FavoriteRecall1":case"FavoriteRecall2":case"FavoriteRecall3":case"FavoriteStore0":case"FavoriteStore1":case"FavoriteStore2":case"FavoriteStore3":case"Guide":case"GuideNextDay":case"GuidePreviousDay":case"Info":case"InstantReplay":case"Link":case"ListProgram":case"LiveContent":case"Lock":case"MediaApps":case"MediaAudioTrack":case"MediaLast":case"MediaSkipBackward":case"MediaSkipForward":case"MediaStepBackward":case"MediaStepForward":case"MediaTopMenu":case"NavigateIn":case"NavigateNext":case"NavigateOut":case"NavigatePrevious":case"NextFavoriteChannel":case"NextUserProfile":case"OnDemand":case"Pairing":case"PinPDown":case"PinPMove":case"PinPToggle":case"PinPUp":case"PlaySpeedDown":case"PlaySpeedReset":case"PlaySpeedUp":case"RandomToggle":case"RcLowBattery":case"RecordSpeedNext":case"RfBypass":case"ScanChannelsToggle":case"ScreenModeNext":case"Settings":case"SplitScreenToggle":case"STBInput":case"groupnext":case"Subtitle":case"Teletext":case"VideoModeNext":case"Wink":case"ZoomToggle":case"SpeechCorrectionList":case"SpeechInputToggle":case"Close":case"New":case"Open":case"Print":case"Save":case"SpellCheck":case"MailForward":case"MailReply":case"MailSend":case"LaunchCalculator":case"LaunchCalendar":case"LaunchContacts":case"LaunchMail":case"LaunchMediaPlayer":case"LaunchMusicPlayer":case"LaunchMyComputer":case"LaunchPhone":case"LaunchScreenSaver":case"LaunchSpreadsheet":case"LaunchWebBrowser":case"LaunchWebCam":case"LaunchWordProcessor":case"LaunchApplication1":case"LaunchApplication2":case"LaunchApplication3":case"LaunchApplication4":case"LaunchApplication5":case"LaunchApplication6":case"LaunchApplication7":case"LaunchApplication8":case"LaunchApplication9":case"LaunchApplication10":case"LaunchApplication11":case"LaunchApplication12":case"LaunchApplication13":case"LaunchApplication14":case"LaunchApplication15":case"LaunchApplication16":case"BrowserBack":case"BrowserFavorites":case"BrowserForward":case"BrowserHome":case"BrowserRefresh":case"BrowserSearch":case"BrowserStop":case"+":case"-":case"/":case"*":return e;case"Scroll":return"ScrollLock";case"OS":return"Meta";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MozHomeScreen":return"Home";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"FastFwd":return"MediaFastForward";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Live":return"TV";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Subtract":return"-";case"Multiply":return"*";case"Divide":return"/"}return""}class Tr extends gr{constructor(e,t,i,s){super(Tr,i,"multiple",void 0,void 0,"local"===e?Tr.typeLocal:Tr.typeGlobal),this.m_bKeyDown=!1,this.m_sEvents=t,this.on=s,"local"===e?(this.asset.on("keydown",(e=>this.keyDown(e)),{noOverwrite:!0}),this.asset.on("keyup",(e=>this.keyUp(e)),{noOverwrite:!0})):Tr.attach()}static get typeGlobal(){return this.m_nTypeGlobal||(this.m_nTypeGlobal=gr.createType())}static get typeLocal(){return this.m_nTypeLocal||(this.m_nTypeLocal=gr.createType())}static get id(){return"Keyboard"}static get types(){return this.typeGlobal|this.typeLocal}static get isKeyDown(){return this.m_bKeyDown}static attach(){0===this.m_nControllers&&(go.attachListener(document,"keydown",this.keyDown,void 0,this),go.attachListener(document,"keyup",this.keyUp,void 0,this)),this.m_nControllers++}static detach(){this.m_nControllers--,0===this.m_nControllers&&(go.detachListener(document,"keydown",this),go.detachListener(document,"keyup",this))}static keyDown(e){let t=!1;xr.each("*",this.typeGlobal,(i=>{t=t||i.keyDown(e)}))}static keyUp(e){let t=!1;xr.each("*",this.typeGlobal,(i=>{t=t||i.keyUp(e)}))}static global(e,t,i="any"){return new Tr("global",i,e,t)}static local(e,t,i="any"){return new Tr("local",i,e,t)}get isKeyDown(){return this.m_bKeyDown}parse(e,t){"down"===t&&(this.m_sKey=e.key||"");const i=this.m_sKey||e.key||"",s="down"===t&&(e.repeat||this.m_sKeyHistory===i);let o=0;return e.altKey&&(o|=128),e.ctrlKey&&(o|=64),e.shiftKey&&(o|=32),e.metaKey&&(o|=256),"up"===t?this.m_sKey=this.m_sKeyHistory=void 0:this.m_sKeyHistory=this.m_sKey,{keyboard:this,asset:this.asset,key:jr(i),value:i,modifiers:o,hasModifiers:0!==o,isKeyDown:"down"===t,isKeyUp:"up"===t,isAlt:e.altKey,isCtrl:e.ctrlKey,isShift:e.shiftKey,isMeta:e.metaKey,isRepeat:s,isInput:xr.isInput,isGlobal:this.type===Tr.typeGlobal}}keyDown(e){if(Tr.m_bKeyDown=this.m_bKeyDown=!0,this.isDisabled||"keyup"===this.m_sEvents)return!1;const t=xr.isDragging||xr.isScrolling||this.onKey(this.parse(e,"down"));return t&&go.stopPropagation(e),t}keyUp(e){if(Tr.m_bKeyDown=this.m_bKeyDown=!1,this.isDisabled||"keydown"===this.m_sEvents)return!1;const t=xr.isDragging||xr.isScrolling||this.onKey(this.parse(e,"up"));return t&&go.stopPropagation(e),t}onKey(e){return this.emitHook("OnKey",e),Q(pe(this.on,e))}focus(){const e=xr.first(this.asset,Ar.types)||Ar.on(this.asset,this.asset,"no-auto-focus","no-auto-blur");return e.focus(),e}onDestroy(){return!!super.onDestroy()&&(this.type===Tr.typeLocal?(this.asset.off("keydown"),this.asset.off("keyup")):Tr.detach(),!0)}}Tr.m_nControllers=0,Tr.m_bKeyDown=!1;const zr=1e3/60;function Er(t,i,s,o=0){return i=e.range(i,0,t)/t,s*(--i*i*i*i*i+1)+o}function Or(t,i,s,o=0){return 0===(i=e.range(i,0,t))?o:s*Math.pow(2,10*(i/t-1))+o}class Pr{constructor(t){this.m_nHandle=0,this.m_nTime=0,this.m_nReverse=0,this.m_nDuration=e.max(t.duration,1),this.m_bLoop=Q(t.loop),this.onAnimation=t.onAnimation,this.onAnimationStart=t.onAnimationStart,this.onAnimationEnd=t.onAnimationEnd,this.onAnimationCallback=t.onAnimationCallback,t.start&&this.start(t.reverse)}static create(e){return new Pr(e)}get elapsed(){return this.isReversed?this.m_nReverse-e.min(M.elapsed(this.m_nTime,!0),this.m_nReverse):e.min(M.elapsed(this.m_nTime,!0),this.m_nDuration)}get duration(){return this.m_nDuration}get isReady(){return 0===this.m_nHandle}get isReversed(){return this.m_nReverse>0}onAnimate(){pe(this.onAnimation,this)}onStart(){pe(this.onAnimationStart,this)}onEnd(e){pe(this.onAnimationEnd,this,e)}onCallback(){pe(this.onAnimationCallback,this),this.onAnimationCallback=void 0}start(e,t){if(N(t)&&(this.onAnimationCallback=t),this.isReady){const t=()=>{const e=this.elapsed===(this.isReversed?0:this.duration);this.onAnimate(),this.m_nHandle=0===this.m_nTime||!this.m_bLoop&&e?0:ke(t),e&&(this.onCallback(),this.m_bLoop||this.onEnd(!1)),this.m_bLoop&&e&&(this.m_nReverse=this.isReversed?this.duration:0,this.m_nTime=M.precise)};return this.m_nReverse=Q(e,this.isReversed)?this.duration:0,this.m_nTime=M.precise,this.m_nHandle=ke(t),this.onStart(),!0}return!1}stop(){this.isReady||(this.m_nHandle=_e(this.m_nHandle),this.m_nTime=0,this.onEnd(!0))}reverse(t){return this.isReversed?(this.m_nTime=M.elapsed(this.m_nDuration-e.min(M.elapsed(this.m_nTime,!0),this.m_nDuration),!0),this.m_nReverse=0):(this.m_nReverse=e.min(M.elapsed(this.m_nTime,!0),this.m_nDuration),this.m_nTime=M.precise),this.start(this.isReversed,t),this}jump(e){return this.m_nTime=M.elapsed(e,!0),this}jumpToBegin(){return this.jump(0)}jumpToEnd(){return this.jump(this.duration)}linear(t,i=0,s=0,o=0){return function(t,i,s,o=0){return s*e.range(i,0,t)/t+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}quadraticEaseIn(t,i=0,s=0,o=0){return function(t,i,s,o=0){return s*(i=e.range(i,0,t)/t)*i+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}quadraticEaseOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return-s*(i=e.range(i,0,t)/t)*(i-2)+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}quadraticEaseInOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return(i=e.range(i,0,t)/(t/2))<1?s/2*i*i+o:-s/2*(--i*(i-2)-1)+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}cubicEaseIn(t,i=0,s=0,o=0){return function(t,i,s,o=0){return s*(i=e.range(i,0,t)/t)*i*i+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}cubicEaseOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return i=e.range(i,0,t)/t,s*(--i*i*i+1)+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}cubicEaseInOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return(i=e.range(i,0,t)/(t/2))<1?s/2*i*i*i+o:s/2*((i-=2)*i*i+2)+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}quarticEaseIn(t,i=0,s=0,o=0){return function(t,i,s,o=0){return s*(i=e.range(i,0,t)/t)*i*i*i+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}quarticEaseOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return i=e.range(i,0,t)/t,-s*(--i*i*i*i-1)+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}quarticEaseInOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return(i=e.range(i,0,t)/(t/2))<1?s/2*i*i*i*i+o:-s/2*((i-=2)*i*i*i-2)+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}quinticEaseIn(t,i=0,s=0,o=0){return function(t,i,s,o=0){return s*(i=e.range(i,0,t)/t)*i*i*i*i+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}quinticEaseOut(t,i=0,s=0,o=0){return Er(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}quinticEaseInOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return(i=e.range(i,0,t)/(t/2))<1?s/2*i*i*i*i*i+o:s/2*((i-=2)*i*i*i*i+2)+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}sinusoidalEaseIn(t,i=0,s=0,o=0){return function(t,i,s,o=0){return i>=t?s+o:-s*Math.cos(e.range(i,0,t)/t*(Math.PI/2))+s+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}sinusoidalEaseOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return s*Math.sin(e.range(i,0,t)/t*(Math.PI/2))+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}sinusoidalEaseInOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return-s/2*(Math.cos(Math.PI*e.range(i,0,t)/t)-1)+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}exponentialEaseIn(t,i=0,s=0,o=0){return Or(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}exponentialEaseOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return((i=e.range(i,0,t))>=t?s:s*(1-Math.pow(2,-10*i/t)))+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}exponentialEaseInOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return 0===(i=e.range(i,0,t))?o:i>=t?s+o:(i/=t/2)<1?s/2*Math.pow(2,10*(i-1))+o:(i--,s/2*(2-Math.pow(2,-10*i))+o)}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}circularEaseIn(t,i=0,s=0,o=0){return function(t,i,s,o=0){return i=e.range(i,0,t)/t,-s*(Math.sqrt(1-i*i)-1)+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}circularEaseOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return i=e.range(i,0,t)/t,i--,s*Math.sqrt(1-i*i)+o}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}circularEaseInOut(t,i=0,s=0,o=0){return function(t,i,s,o=0){return(i=e.range(i,0,t)/(t/2))<1?-s/2*(Math.sqrt(1-i*i)-1)+o:(i-=2,s/2*(Math.sqrt(1-i*i)+1)+o)}(o||e.max(this.duration-s,0),e.max(this.elapsed-s,0),t,i)}}class Rr extends gr{constructor(e,t,i,s){super(Rr,e,"single",s,i),this.on=t}static get id(){return"Wheel"}static get types(){return this.m_nType||(this.m_nType=gr.createType())}static get priority(){return 4}static get isLocked(){return!(0===this.m_nLock||this.m_nLock<M.precise&&(this.m_nLock=0,1))}static processor(e){let t;-65&e?32&e&&this.lock():(t=xr.firstPoint,!t||0===t.wheelX&&0===t.wheelY||this.isLocked||t.forEachController(((e,t)=>!(e.isDisabled||!e.onWheel({wheel:t.wheelY,wheelX:t.wheelX,wheelY:t.wheelY,buttons:t.buttons,offset:t.translateToAsset(e.asset),asset:e.asset})||(xr.capture(this.types),0))),this.types))}static lock(t){this.m_nLock=e.max(M.precise+(t||300),this.m_nLock)}static on(e,t,i,s){return new Rr(e,t,i,s)}onWheel(e){return this.emitHook("OnWheel",e),this.emit({event:this.on,payload:e})}}var Hr,Fr,Ur,Br,Yr;Rr.m_nLock=0,function(e){e[e.No=0]="No",e[e.Yes=1]="Yes",e[e.Always=2]="Always"}(Hr||(Hr={}));class Zr extends gr{constructor(e){super(Zr,e.asset,"single",e.stylesheet,void 0,"horizontal"===e.direction||2===e.direction?Zr.horizontal:"vertical"===e.direction||4===e.direction?Zr.vertical:Zr.bidirectional),this.m_nInitializing=0,this.m_bInitializing=!0,this.m_bInitialized=!1,this.m_bHover=!1,this.m_bHovercanceled=!1,this.m_bScrolling=!1,this.m_nScrollLeft=0,this.m_nScrollTop=0,this.m_nScrollX=0,this.m_nScrollY=0,this.m_nScrollWidth=0,this.m_nScrollHeight=0,this.m_bScrollLeft=!1,this.m_bScrollRight=!1,this.m_bScrollUp=!1,this.m_bScrollDown=!1,this.m_bZoom=!1,this.m_bZoomStart=!1,this.m_sZoomCrawl="stop",this.m_nOffsetLeft=0,this.m_nOffsetTop=0,this.m_pViewport=new _i,this.m_pSpacing=new Li,this.m_nDirection=1,this.m_nKinetic=0,this.m_nReflect=0,this.m_nMeasureScroll=0,this.m_nMeasureAsset=0,this.m_bMeasured=!1,this.m_nUpdate=0,this.m_nRules=0,this.m_nCaptured=0,this.m_bCentering=!1,this.m_nBounceHorizontal=Hr.Yes,this.m_nBounceVertical=Hr.Yes,this.m_nBounceHorizontalHandle=0,this.m_nBounceVerticalHandle=0;const t=Q(e.autoInitialize,!0),i=Q(e.keyboard,!0),s=Q(e.focus,!0);this.m_bInertialScrolling=Q(e.inertialScrolling,!0),this.m_bPannable=Q(e.pannable,!0),this.m_bLockDirection=Q(e.lockDirection,!0),this.m_bWheel=Q(e.wheel,!0),this.m_bHovering=Q(e.hovering),this.m_sScroll=W(e.classScroll),this.m_sScrollHorizontal=W(e.classScrollHorizontal),this.m_sScrollVertical=W(e.classScrollVertical),this.m_sScrollLeft=W(e.classScrollLeft),this.m_sScrollRight=W(e.classScrollRight),this.m_sScrollUp=W(e.classScrollUp),this.m_sScrollDown=W(e.classScrollDown),this.m_nZoom=$(e.zoom,1)||1,this.m_bZoomInitialize=Q(e.zoomInitialize),this.m_sZoomToFit="all"===e.zoomToFit||"horizontal"===e.zoomToFit||"vertical"===e.zoomToFit?e.zoomToFit:!!e.zoomToFit&&"all",this.m_bZoomDimensions=Q(e.zoomDimensions),this.m_bZoomAnimations=Q(e.zoomAnimations,!0),this.m_bZoomOnPinch=Q(e.zoomOnPinch),this.m_bZoomOnWheel=Q(e.zoomOnWheel);const o=this.asset.firstChild;if(!Q(e.native)&&o&&(this.asset.tagName===o.tagName||"div"===o.tagName||"section"===o.tagName||"nav"===o.tagName||"ul"===o.tagName)){switch(e.bounceHorizontal){case"no":this.m_nBounceHorizontal=Hr.No;break;case"always":this.m_nBounceHorizontal=Hr.Always;break;default:this.m_nBounceHorizontal=Hr.Yes}switch(e.bounceVertical){case"no":this.m_nBounceVertical=Hr.No;break;case"always":this.m_nBounceVertical=Hr.Always;break;default:this.m_nBounceVertical=Hr.Yes}this.m_bCentering=Q(e.centering),this.m_pSpacing=e.spacing||new Li,this.m_pScroll=o.apply((t=>{t.style({overflow:"visible",overflowHorizontal:"visible",overflowVertical:"visible",display:"block"},this.stylesheet),(this.m_bCentering||Q(e.hideWhileNotInitialized))&&(t.opacity=0),t.position({x:this.spacing.left,y:this.spacing.top,translate:"accelerated"})})),this.asset.on("scroll",(()=>this.reflect(!0)))}this.asset.style({overflow:"hidden",overflowHorizontal:"hidden",overflowVertical:"hidden"},this.stylesheet),(s||i)&&(this.m_pFocus=Ar.on(this.asset,this.asset,"focus-on-stroke","no-auto-blur",(()=>{this.hasFocus&&this.onScrollActivate(),s&&this.onScrollFocus()}))),i&&Tr.global(this.asset,(e=>{if(this.hasFocus&&!xr.isInput){if(" "===e.key&&(!e.hasModifiers||e.isShift))return e.isShift?this.scrollInchUp():this.scrollInchDown();if(!e.hasModifiers)switch(e.key){case"Home":return this.canScrollUp?this.scrollToTop():this.scrollToLeft();case"End":return this.canScrollDown?this.scrollToBottom():this.scrollToRight();case"PageUp":return this.canScrollVertical?this.scrollPageUp():this.scrollPageLeft();case"PageDown":return this.canScrollVertical?this.scrollPageDown():this.scrollPageRight();case"ArrowUp":return this.scrollInchUp();case"ArrowDown":return this.scrollInchDown();case"ArrowLeft":return this.scrollInchLeft();case"ArrowRight":return this.scrollInchRight();case"ZoomIn":case"+":return this.zoomIn();case"ZoomOut":case"-":return this.zoomOut()}}return!1}),"keydown"),this.hovering&&Lr.pointer(this.asset,(e=>this.hover(e.isHovered,!1))).alwaysOn(),e.zoomOnDoubleTap&&Dr.double(this.asset,(e=>this.zoomToggle(this.m_bZoomAnimations,250,!0,e.offset))),this.onInit=e.onInit,this.onDimensions=e.onDimensions,this.onViewport=e.onViewport,this.onResize=e.onResize,this.onDirection=e.onDirection,this.onFocus=e.onFocus,this.onActivate=e.onActivate,this.onHover=e.onHover,this.onStart=e.onStart,this.onChange=e.onChange,this.onScroll=e.onScroll,this.onEnd=e.onEnd,this.onZoomBounderies=e.onZoomBounderies,this.onZoomStart=e.onZoomStart,this.onZoom=e.onZoom,this.onZoomChange=e.onZoomChange,this.onZoomEnd=e.onZoomEnd,this.onZoomWheel=e.onZoomWheel,xr.implement("hold",Zr.types),xr.implement("scroll",Zr.types),t&&this.init()}static get bidirectional(){return this.m_nBidirectional||(this.m_nBidirectional=gr.createType())}static get horizontal(){return this.m_nHorizontal||(this.m_nHorizontal=gr.createType())}static get vertical(){return this.m_nVertical||(this.m_nVertical=gr.createType())}static get id(){return"Scroll"}static get types(){return this.bidirectional|this.horizontal|this.vertical}static get priority(){return 1}static get state(){return this.m_pState||(this.m_pState=new Cr)}static get data(){return this.state.payload||{touches:0,distance:0,zoom:0,scrolling:!1,zooming:!1,firstPoint:void 0,secondPoint:void 0,scroll:void 0,debouncer:void 0}}static normalize(t,i,s){let o=e.range(t,-150,150);return i-o<-150?o=i+150:i-o>s+150&&(o=-s-150+i),o}static processor(e){if(64&e){const e=xr.firstPoint;!e||0===e.wheelX&&0===e.wheelY||Rr.isLocked||e.forEachController(((e,t)=>{if(!e.isDisabled){if(e.m_bZoomOnWheel&&0!==t.wheelY&&64&t.buttons){const i=e.onScrollZoomWheel(t.wheelY>0?"in":"out");return i>0&&e.applyZoom(e.zoom+i*(Math.abs(t.wheelY)<40?1/40*t.wheelY:t.wheelY<0?-1:1),!0,!0,!0,e.m_bZoomAnimations,150,!1,t.translateToAsset(e.asset))&&e.scrollActivate(!0),!0}if(e.wheel){const i=e.type&this.bidirectional&&0!==t.wheelX&&0!==t.wheelY?1:0!==t.wheelX||32&t.buttons||e.type&this.horizontal||0===e.rangeVertical&&e.rangeHorizontal>0?2:4,s=this.normalize(2===i?t.wheelX||t.wheelY:t.wheelX,e.scrollLeft,e.rangeHorizontal),o=this.normalize(2===i?0:t.wheelY,e.scrollTop,e.rangeVertical);if(e.scrollShift(-s,-o,!0,!0,!1,!0))return e.scrollDirection(i),e.scrollActivate(!0),xr.capture(this.bidirectional),!0}}return!1}),this.types)}if(!(-64&e)){if(32&e&&Rr.lock(),!this.state.isStopped){const t=xr.firstPoint,i=xr.secondPoint;if(t)switch(this.state.step){case 0:-37&e&&t.forEachController(((e,t)=>{if(!e.isDisabled&&k(e.asset)&&(t.isTouch||e.pannable&&513&t.buttons)){let s,o=0,n=0;if(2===xr.touches&&e.m_bZoomOnPinch&&i&&!i.forEachController(((i,r)=>i===e&&(s=r.id,o=t.radialDistance(r),n=r.radius+t.radius,!0)),this.types))return!1;if(1===xr.touches||2===xr.touches){const r=e.scroll(t,!0,!0);if(r||n>=15)return r||(t.reinit(),i&&i.reinit()),this.state.next(1,{touches:xr.touches,distance:o,zoom:e.zoom,scrolling:r,zooming:!1,firstPoint:t.id,secondPoint:s,scroll:e,debouncer:new tt(((t,i)=>{e.applyZoom(t,!e.isZooming,!0,!1,!1,0,!1,i)}))}),xr.capture(this.bidirectional),!0}}return!1}),this.types);break;case 1:if(this.data.scroll&&t){const e=this.data.scroll;let s=!0;if(!e.isDisabled&&(1===xr.touches||2===xr.touches)&&(t.id!==this.data.firstPoint&&t.forEachController((t=>t===e),this.types)&&(this.data.firstPoint=t.id,t.reinit(),e.calibrate()),i?i.id!==this.data.secondPoint&&i.forEachController((t=>t===e),this.types)&&(this.data.secondPoint=i.id):this.data.secondPoint=void 0,t.id===this.data.firstPoint&&(1===xr.touches||i&&i.id===this.data.secondPoint&&(!e.m_bZoomOnPinch||!e.isBouncing)))){if(xr.touches!==this.data.touches&&(t.reinit(),i&&i.reinit(),e.calibrate(),e.scrollZoomEnd(),this.data.scrolling&&e.scrollStart(),this.data.touches=xr.touches,this.data.distance=t.radialDistance(i),this.data.zoom=e.zoom,e.m_bZoomOnPinch&&(this.data.scrolling=!1)),2===xr.touches&&i&&e.m_bZoomOnPinch){const s=t.radialDistance(i);if(Math.round(Math.abs(s-this.data.distance))>0){const o=this.data.debouncer;this.data.zoom*=s/this.data.distance,o&&o.invoke(this.data.zoom,t.translatePointToAsset(Mr.proportional(t,i),e.asset)),this.data.distance=s,this.data.zooming=!0}}else this.data.scrolling=e.scroll(t,!1,!this.data.zooming)||!e.m_bZoomOnPinch&&this.data.scrolling;s=!1}s&&(e.deactivate(),e.scrollZoomEnd(),this.data.scrolling?e.kinetic(t):e.scrollEnd(),this.state.stop())}else this.terminate()}}0===xr.touches&&this.terminate()}}static terminate(){this.state.reset()}static edgeDetection(t,i,s,o,n,r,a=100){const l=ue(t?xr.filterRecursive(t,this.types,!1):xr.filter("*",this.types),(e=>!(!t||P(t)>1)||(s?e.boundingRectangle:e.viewport).isIn(i.x,i.y)));if(this.edgeDetectionStop(),l){const t=s?l.boundingRectangle:l.viewport,c=e.min(150,t.width/3),u=e.min(150,t.height/3);let h=0,d=0;if(a=e.range(a,0,100),o&&l.type&(this.bidirectional|this.horizontal)&&l.rangeHorizontal>0&&a>0&&(i.x<t.left+c?h=-(c-e.max(i.x-t.left,0)):i.x>t.right-c&&(h=c-e.max(t.right-i.x,0))),n&&l.type&(this.bidirectional|this.vertical)&&l.rangeVertical>0&&a>0&&(i.y<t.top+u?d=-(u-e.max(i.y-t.top,0)):i.y>t.bottom-u&&(d=u-e.max(t.bottom-i.y,0))),0!==h||0!==d){let t=M.precise-zr,i=l.scrollLeft,s=l.scrollTop;const p=()=>{const m=M.elapsed(t,!0);let g=!0;if(l){if(m>=zr){let p=0,b=0;o&&(p=e.floor(Or(c,Math.abs(h),.2*a,0)*m/zr)*(h<0?-1:1)),n&&(b=e.floor(Or(u,Math.abs(d),.2*a,0)*m/zr)*(d<0?-1:1)),l.scrollShift(p,b,!1,!1,!0,!0)?r({x:l.scrollLeft-i,y:l.scrollTop-s},l.asset):g=!1,i=l.scrollLeft,s=l.scrollTop,t=M.precise}this.m_nEdgeDetection=g?ke(p):0}};return this.m_nEdgeDetection=ke(p),!0}}return!1}static edgeDetectionStop(){this.m_nEdgeDetection=_e(this.m_nEdgeDetection)}static update(t=250,i=!0){const s=()=>{this.m_nUpdate=0,xr.isDragging?this.update(e.max(t,250),i):ee(xr.filter("*",this.types),(e=>e.update(i,0)))};Ae(this.m_nUpdate),t<=0?s():this.m_nUpdate=De(s,t)}static on(e){return new Zr(e)}get focusController(){return this.m_pFocus}get native(){return!this.m_pScroll}get inertialScrolling(){return this.m_bInertialScrolling}get pannable(){return this.m_bPannable}get lockDirection(){return this.m_bLockDirection}get wheel(){return this.m_bWheel}get hovering(){return this.m_bHovering}get left(){return-this.m_nScrollLeft+this.m_nOffsetLeft}get top(){return-this.m_nScrollTop+this.m_nOffsetTop}get centerLeft(){return this.rangeHorizontal>0||0===this.width?0:e.round((this.viewport.width-this.width)/2)}get centerTop(){return this.rangeVertical>0||0===this.height?0:e.round((this.viewport.height-this.height)/2)}get isInitialized(){return this.m_bInitialized}get hasFocus(){return!!this.m_pFocus&&this.m_pFocus.hasFocus}get isHovered(){return this.m_bHover}get isHovercanceled(){return this.m_bHovercanceled}get isScrolling(){return this.m_bScrolling}get isScrollable(){return this.rangeHorizontal>0||this.rangeVertical>0}get isZooming(){return this.m_bZoomStart}get direction(){return this.m_nDirection}get horizontal(){return Q(this.type&(Zr.bidirectional|Zr.horizontal))}get vertical(){return Q(this.type&(Zr.bidirectional|Zr.vertical))}get centering(){return this.m_bCentering}get scrollLeft(){return e.range(this.m_nScrollLeft,0,this.rangeHorizontal)}set scrollLeft(e){this.scrollHorizontal(e,!1)}get scrollTop(){return e.range(this.m_nScrollTop,0,this.rangeVertical)}set scrollTop(e){this.scrollVertical(e,!1)}get shiftLeft(){return this.m_nOffsetLeft}get shiftTop(){return this.m_nOffsetTop}get rangeHorizontal(){return this.type&Zr.vertical?0:e.max(this.width-this.viewport.roundedWidth,0)}get rangeVertical(){return this.type&Zr.horizontal?0:e.max(this.height-this.viewport.roundedHeight,0)}get width(){return this.m_nScrollWidth}get height(){return this.m_nScrollHeight}get canScrollHorizontal(){return this.rangeHorizontal>0}get canScrollVertical(){return this.rangeVertical>0}get canScrollLeft(){return this.scrollLeft>0}get canScrollRight(){return this.scrollLeft<this.rangeHorizontal}get canScrollUp(){return this.scrollTop>0}get canScrollDown(){return this.scrollTop<this.rangeVertical}get canZoomIn(){return this.zoom<this.zoomMax}get canZoomOut(){return this.zoom>this.zoomMin}get canZoom(){return this.canZoomIn||this.canZoomOut}get isZoomFitHorizontal(){return this.zoom===this.zoomFitHorizontal}get isZoomFitVertical(){return this.zoom===this.zoomFitVertical}get bounceHorizontal(){return this.m_nScrollLeft<0?this.m_nScrollLeft:this.m_nScrollLeft>this.rangeHorizontal?this.m_nScrollLeft-this.rangeHorizontal:0}get bounceVertical(){return this.m_nScrollTop<0?this.m_nScrollTop:this.m_nScrollTop>this.rangeVertical?this.m_nScrollTop-this.rangeVertical:0}get isBouncing(){return 0!==this.bounceHorizontal||0!==this.bounceVertical}get isBounceHorizontal(){switch(this.m_nBounceHorizontal){case Hr.Always:return"always";case Hr.Yes:return"yes"}return"no"}set isBounceHorizontal(e){switch(e){case"no":this.m_nBounceHorizontal=Hr.No;break;case"yes":this.m_nBounceHorizontal=Hr.Yes;break;case"always":this.m_nBounceHorizontal=Hr.Always}}get isBounceVertical(){switch(this.m_nBounceVertical){case Hr.Always:return"always";case Hr.Yes:return"yes"}return"no"}set isBounceVertical(e){switch(e){case"no":this.m_nBounceVertical=Hr.No;break;case"yes":this.m_nBounceVertical=Hr.Yes;break;case"always":this.m_nBounceVertical=Hr.Always}}get zoom(){return this.m_nZoom}set zoom(e){this.applyZoom(e,!1,!1,!1,!1)}get zoomMin(){return this.onScrollZoomBounderies(0)}get zoomMax(){const e=this.onScrollZoomBounderies(Number.MAX_VALUE);return e===Number.MAX_VALUE?1:e}get zoomFit(){return e.min(this.zoomFitHorizontal,this.zoomFitVertical)}get zoomFitHorizontal(){return this.viewport.width>0&&this.width&&this.zoom>0?this.viewport.width/(this.width/this.zoom):1}get zoomFitVertical(){return this.viewport.height>0&&this.height&&this.zoom>0?this.viewport.height/(this.height/this.zoom):1}get viewport(){return this.m_pViewport}get spacing(){return this.m_pSpacing}get boundingRectangle(){return new _i({left:this.viewport.left-this.spacing.left,top:this.viewport.top-this.spacing.top,right:this.viewport.right+this.spacing.right,bottom:this.viewport.bottom+this.spacing.bottom})}get parent(){const e=this.asset;return this.native?e.parent:e}calibrate(){this.m_nScrollX=this.m_nScrollLeft,this.m_nScrollY=this.m_nScrollTop}reflect(e){if(this.native)return;const t=()=>{this.m_nReflect=0;const t=this.asset.scrollLeft,i=this.asset.scrollTop;0===t&&0===i||(e&&on.isFocusedOnInput?this.scrollToAsset(on.isFocused,!e,void 0,void 0,void 0,void 0,!0):this.applyScroll(this.m_nScrollLeft+t,this.m_nScrollTop+i,e),ro((()=>{this.asset.scrollLeft=0,this.asset.scrollTop=0}),e))};e?(lo(this.m_nReflect),t()):this.m_nReflect=no((()=>t()),this.m_nReflect)}measure(t,i,s=!1){let o=!1;if(this.m_bInitializing=!1,!s&&this.m_nScrollTop>=0&&this.m_nScrollLeft>=0){const s=this.onScrollDimensions(),n=this.onScrollViewport();this.m_bMeasured=n instanceof _i&&s instanceof Ni,this.m_bMeasured||this.reflect(!1),this.m_nMeasureScroll=no((()=>{const r=(n||this.rectangle).copy;let a,l,c;if(this.m_nMeasureScroll=0,r.left+=this.spacing.left,r.top+=this.spacing.top,r.right-=this.spacing.right,r.bottom-=this.spacing.bottom,s)a=e.round(s.width*(this.m_bZoomDimensions?this.zoom:1)),l=e.round(s.height*(this.m_bZoomDimensions?this.zoom:1));else{let t;a=e.max(this.asset.scrollWidth,this.m_pScroll?this.m_pScroll.scrollWidth:0),l=e.max(this.asset.scrollHeight,this.m_pScroll?this.m_pScroll.scrollHeight:0),t=a-r.width,t>0&&t<1&&(a=r.roundedWidth),t=l-r.height,t>0&&t<1&&(l=r.roundedHeight)}if(c=r.width!==this.viewport.width||r.height!==this.viewport.height,c=c||this.m_nScrollWidth!==a||this.m_nScrollHeight!==l,this.m_pViewport=r,this.m_nScrollWidth=a,this.m_nScrollHeight=l,!this.m_bInitialized&&this.m_bZoomInitialize){const t=e.max(this.onScrollZoomBounderies("all"===this.m_sZoomToFit?this.zoomFit:"horizontal"===this.m_sZoomToFit?this.zoomFitHorizontal:"vertical"===this.m_sZoomToFit?this.zoomFitVertical:this.zoom),0);t>0&&t!==this.zoom&&(this.m_nZoom=t,this.m_bZoomDimensions&&s&&(this.m_nScrollWidth=e.round(s.width*this.zoom),this.m_nScrollHeight=e.round(s.height*this.zoom)))}if(c){const e=()=>{this.m_bInitialized&&this.applyZoom(this.zoom,!0,!0,!0,t,250,!0)};this.m_bCentering?this.applyOffset(this.centerLeft,this.centerTop,this.m_bInitialized&&t,e):e(),this.applyRules()}this.m_bInitialized||(this.m_bZoomInitialize&&this.onScrollZoom(this.zoom),this.m_pScroll&&(this.m_pScroll.opacity="inherit"),this.m_bInitialized=!0,this.onScrollInit()),c&&this.onScrollResize(),o=Q(pe(i))}),this.m_nMeasureScroll,this.m_bMeasured)}else o=Q(pe(i));return o}applyZoom(t,i,s,o,n,r=0,a=!1,l={x:this.spacing.left+this.viewport.width/2,y:this.spacing.top+this.viewport.height/2}){if(!this.onZoom)return!1;if(t=e.max(t,0),this.m_bZoom)return!1;if(this.m_bZoom=!0,t=e.max(this.onScrollZoomBounderies(t),0),this.m_bZoom=!1,t>0&&this.m_nZoom!==t){const c=e.range(l.x-this.spacing.left-this.m_nOffsetLeft,0,this.viewport.width),u=e.range(l.y-this.spacing.top-this.m_nOffsetTop,0,this.viewport.height),h=A(this.m_nZoomAnimationX)?this.m_nZoomAnimationX:this.left,d=A(this.m_nZoomAnimationY)?this.m_nZoomAnimationY:this.top,p=A(this.m_nZoomAnimationZ)?this.m_nZoomAnimationZ:this.zoom,m=e.floor((this.m_nScrollLeft+c)/this.zoom*t-c),g=e.floor((this.m_nScrollTop+u)/this.zoom*t-u),b=this.onScrollDimensions();return b?(this.m_nScrollWidth=e.round(b.width*t),this.m_nScrollHeight=e.round(b.height*t)):(this.m_nScrollWidth=e.round(this.m_nScrollWidth/this.zoom*t),this.m_nScrollHeight=e.round(this.m_nScrollHeight/this.zoom*t)),this.m_nScrollLeft=e.range(m-this.m_nOffsetLeft,0,this.rangeHorizontal),this.m_nScrollTop=e.range(g-this.m_nOffsetTop,0,this.rangeVertical),this.m_nZoom=t,this.m_bCentering&&(this.m_nOffsetLeft=this.centerLeft,this.m_nOffsetTop=this.centerTop),this.m_pZoomAnimation&&this.m_pZoomAnimation.stop(),n&&this.isInitialized?(this.m_nZoomAnimationX=h,this.m_nZoomAnimationY=d,this.m_nZoomAnimationZ=p,this.m_pZoomAnimation=new Pr({onAnimationStart:()=>{i&&this.scrollZoomStart()},onAnimation:e=>{a?(this.m_nZoomAnimationX=h+e.cubicEaseOut(this.left-h),this.m_nZoomAnimationY=d+e.cubicEaseOut(this.top-d),this.m_nZoomAnimationZ=p+e.cubicEaseOut(this.zoom-p)):(this.m_nZoomAnimationX=h+e.linear(this.left-h),this.m_nZoomAnimationY=d+e.linear(this.top-d),this.m_nZoomAnimationZ=p+e.linear(this.zoom-p)),ro((()=>{this.applyPosition(this.m_nZoomAnimationX,this.m_nZoomAnimationY,!0),this.onScrollZoom(this.m_nZoomAnimationZ)})),s&&this.onScrollZoomChange(this.m_nZoomAnimationZ)},onAnimationEnd:(e,t)=>{this.m_pZoomAnimation=void 0,this.m_nZoomAnimationX=void 0,this.m_nZoomAnimationY=void 0,this.m_nZoomAnimationZ=void 0,t||(this.applyRules(),this.onScrollResize()),o&&this.scrollZoomEnd()},duration:r,start:!0})):(ro((()=>{i&&this.scrollZoomStart(),this.applyPosition(this.left,this.top,!0),this.onScrollZoom(),o?this.scrollZoomEnd():s&&this.onScrollZoomChange()})),this.isInitialized&&(this.applyRules(),this.onScrollResize())),!0}return!1}applyPosition(t,i,s){this.m_pScroll?ro((()=>{this.m_pScroll&&(this.m_pScroll.position({x:this.spacing.left+t,y:this.spacing.top+i}),this.onScrollMove(-t,-i))}),s):(t=e.range(-t,0,this.rangeHorizontal),i=e.range(-i,0,this.rangeVertical),ro((()=>{this.asset.scrollLeft=t,this.asset.scrollTop=i,this.onScrollMove(t,i)}),s,!0))}applyScroll(t,i,s=!1){return t=e.floor(t),i=e.floor(i),t===this.m_nScrollLeft&&i===this.m_nScrollTop||(this.m_nScrollLeft=t,this.m_nScrollTop=i,this.applyPosition(this.left,this.top,s),this.applyRules(),this.m_bScrolling&&this.onScrollChange()),0!==this.bounceHorizontal||0!==this.bounceVertical}applyOffset(t,i,s,o){if(this.m_nOffsetLeft!==t||this.m_nOffsetTop!==i)if(s){const e=this.m_nOffsetLeft,s=this.m_nOffsetTop;this.m_pOffsetAnimation&&this.m_pOffsetAnimation.stop(),this.m_pOffsetAnimation=new Pr({onAnimation:o=>{this.applyOffset(e+o.quinticEaseOut(t-e),s+o.quinticEaseOut(i-s),!1,void 0)},onAnimationEnd:()=>{this.m_pOffsetAnimation=void 0,o&&o()},duration:400,start:!0})}else this.m_nOffsetLeft=e.round(t),this.m_nOffsetTop=e.round(i),this.applyPosition(this.left,this.top,!1),o&&o()}applyRules(){Ae(this.m_nRules),this.m_nRules=De((()=>{ro((()=>{let e=!1,t=!1;this.canScrollLeft!==this.m_bScrollLeft&&(this.asset.setClass(this.m_sScrollLeft,this.m_bScrollLeft=this.canScrollLeft),e=!0),this.canScrollRight!==this.m_bScrollRight&&(this.asset.setClass(this.m_sScrollRight,this.m_bScrollRight=this.canScrollRight),e=!0),this.canScrollUp!==this.m_bScrollUp&&(this.asset.setClass(this.m_sScrollUp,this.m_bScrollUp=this.canScrollUp),t=!0),this.canScrollDown!==this.m_bScrollDown&&(this.asset.setClass(this.m_sScrollDown,this.m_bScrollDown=this.canScrollDown),t=!0),e&&this.asset.setClass(this.m_sScrollHorizontal,this.m_bScrollLeft||this.m_bScrollRight),t&&this.asset.setClass(this.m_sScrollVertical,this.m_bScrollUp||this.m_bScrollDown),(e||t)&&this.asset.setClass(this.m_sScroll,this.m_bScrollLeft||this.m_bScrollRight||this.m_bScrollUp||this.m_bScrollDown)}))}),100)}hover(e,t){this.m_bHover!==e&&(this.m_bHover=e,(e||t)&&(this.m_bHovercanceled=!e),this.onScrollHover())}bounce(t,i,s){const o=t?this.bounceVertical:this.bounceHorizontal,n=M.precise;if(0!==o&&0!==(t?this.m_nBounceVerticalHandle:this.m_nBounceHorizontalHandle))return!0;if(0!==o){const s=()=>{const i=o-Er(400,M.elapsed(n,!0),o,0),r=this.applyScroll(t?this.m_nScrollLeft:this.scrollLeft+(0!==e.round(i)?i:0),t?this.scrollTop+(0!==e.round(i)?i:0):this.m_nScrollTop)?ke(s):0;t?this.m_nBounceVerticalHandle=r:this.m_nBounceHorizontalHandle=r,0===this.m_nKinetic&&0===this.m_nBounceHorizontalHandle&&0===this.m_nBounceVerticalHandle&&(this.m_nCaptured=0,this.scrollEnd())};return t?this.m_nBounceVerticalHandle=ke(s):this.m_nBounceHorizontalHandle=ke(s),this.m_nCaptured=i?M.precise:0,!0}return t?this.m_nBounceVerticalHandle=_e(this.m_nBounceVerticalHandle):this.m_nBounceHorizontalHandle=_e(this.m_nBounceHorizontalHandle),0===this.m_nKinetic&&0===this.m_nBounceHorizontalHandle&&0===this.m_nBounceVerticalHandle&&(this.m_nCaptured=0,this.scrollEnd()),!1}kinetic(t){if(this.scrollStop(),this.inertialScrolling){const i=t.isMouse?.4:.75;let s=this.bounceHorizontal,o=this.bounceVertical,n=0,r=0,a=Q(this.horizontal&&3&this.m_nDirection&&(this.m_nBounceHorizontal===Hr.Always||this.rangeHorizontal>0)),l=Q(this.vertical&&5&this.m_nDirection&&(this.m_nBounceVertical===Hr.Always||this.rangeVertical>0));if(a&&(t.velocityX>150||t.velocityX<-150)&&(n=t.velocityX*i/(0!==s?10:1),a=0!==n),l&&(t.velocityY>150||t.velocityY<-150)&&(r=t.velocityY*i/(0!==o?10:1),l=0!==r),a||l){let t=M.precise,i=a?t:0,c=l?t:0,u=0,h=0,d=t,p=t;const m=this.m_nScrollLeft+G(n),g=this.m_nScrollTop+G(r),b=()=>{const a=M.elapsed(i,!0),l=M.elapsed(c,!0),f=-n*Math.exp(-a/325),y=-r*Math.exp(-l/325);if(e.min(a,l)<1300&&(f>1||f<-1||y>1||y<-1)){let n=this.m_nScrollLeft,r=this.m_nScrollTop;if(i>0){let t=0;n=m+G(f),this.m_nBounceHorizontal!==Hr.No?(n<0?t=n:n>this.rangeHorizontal&&(t=n-this.rangeHorizontal),t-=s,t/=2.75*(0!==s?1:3),t=e.range(e.round(t),-this.viewport.width,this.viewport.width)):(n<=0||n>=this.rangeHorizontal)&&(i=0),n=e.range(n,0,this.rangeHorizontal)+s+t}if(c>0){let t=0;r=g+G(y),this.m_nBounceVertical!==Hr.No?(r<0?t=r:r>this.rangeVertical&&(t=r-this.rangeVertical),t-=o,t/=2.75*(0!==o?1:3),t=e.range(e.round(t),-this.viewport.height,this.viewport.height)):(r<=0||r>=this.rangeVertical)&&(c=0),r=e.range(r,0,this.rangeVertical)+o+t}this.applyScroll(n,r)&&(i>0&&0!==this.bounceHorizontal&&(i-=10*M.elapsed(t,!0)),c>0&&0!==this.bounceVertical&&(c-=10*M.elapsed(t,!0))),u!==n?(u=n,d=M.precise):M.elapsed(d,!0)>100&&(i=0,s=this.bounceHorizontal),h!==r?(h=r,p=M.precise):M.elapsed(p,!0)>100&&(c=0,o=this.bounceVertical),this.m_nKinetic=ke(b)}else this.m_nKinetic=0,i=0,c=0;0===i&&this.bounce(!1,!0,!1),0===c&&this.bounce(!0,!0,!1),t=M.precise};this.m_nKinetic=ke(b),this.m_nCaptured=M.precise}}0===this.m_nKinetic&&(this.bounce(!1,!0,!1),this.bounce(!0,!0,!1))}scroll(t,i,s){const o=this.m_nCaptured>0&&M.elapsed(this.m_nCaptured,!0)<250,n=t.isTouch?15:5;let r,a,l,c,u=t.diffX,h=t.diffY,d=!1;if(this.scrollStop(i),i){if(Math.abs(t.radius)>=5){const i=Math.abs(t.angle);e.inRange(i,20,160)&&!e.inRange(i,70,110)&&(d=!0)}this.calibrate(),this.measure(!1,(()=>{this.m_nBounceHorizontal!==Hr.No&&(this.m_nScrollX<0?this.m_nScrollX*=2.75:this.m_nScrollX>this.rangeHorizontal&&(this.m_nScrollX=this.rangeHorizontal+2.75*(this.m_nScrollX-this.rangeHorizontal))),this.m_nBounceVertical!==Hr.No&&(this.m_nScrollY<0?this.m_nScrollY*=2.75:this.m_nScrollY>this.rangeVertical&&(this.m_nScrollY=this.rangeVertical+2.75*(this.m_nScrollY-this.rangeVertical)))}),o),Zr.edgeDetectionStop()}if(!i&&s||this.scrollDirection(1),r=this.horizontal&&Q(3&this.m_nDirection)&&(this.m_nBounceHorizontal===Hr.Always||this.rangeHorizontal>0),a=this.vertical&&Q(5&this.m_nDirection)&&(this.m_nBounceVertical===Hr.Always||this.rangeVertical>0),l=r&&(o||(i?Math.abs(d?t.radius:u)>=n:0!==u)),c=a&&(o||(i?Math.abs(d?t.radius:h)>=n:0!==h)),l||c){let n=0,p=0;return i&&(u=e.range(u,-1,1),h=e.range(h,-1,1),this.lockDirection&&s&&!o&&(this.scrollDirection(d||l&&c?1:c?4:2),l=l&&Q(3&this.m_nDirection),c=c&&Q(5&this.m_nDirection))),n=l?this.m_nScrollX-u:this.m_nScrollLeft,p=c?this.m_nScrollY-h:this.m_nScrollTop,this.emit({event:()=>{let s=!0;return n=e.range(n,0,this.rangeHorizontal)+(this.m_nBounceHorizontal!==Hr.No&&r?e.range(G((n<0?n:n>this.rangeHorizontal?n-this.rangeHorizontal:0)/2.75),-this.viewport.width,this.viewport.width):0),p=e.range(p,0,this.rangeVertical)+(this.m_nBounceVertical!==Hr.No&&a?e.range(G((p<0?p:p>this.rangeVertical?p-this.rangeVertical:0)/2.75),-this.viewport.height,this.viewport.height):0),i&&(s=this.m_nScrollLeft!==n||this.m_nScrollTop!==p,!s&&l&&(this.m_nBounceHorizontal===Hr.Always||this.m_nBounceHorizontal===Hr.Yes&&this.rangeHorizontal>0)&&(s=!0),!s&&c&&(this.m_nBounceVertical===Hr.Always||this.m_nBounceVertical===Hr.Yes&&this.rangeVertical>0)&&(s=!0),s)?(t.reinit(1),!0):!!s&&(this.applyScroll(n,p),this.scrollStart(),!0)},asynchronous:!i,cancelable:!i})}return!1}scrollDirection(e){e!==this.m_nDirection&&(this.m_nDirection=e,this.onScrollDirection())}scrollStop(e=!1){this.m_nCaptured=0,(0!==this.m_nBounceHorizontalHandle||0!==this.m_nBounceVerticalHandle||0!==this.m_nKinetic||this.m_pScrollAnimation)&&(this.m_nKinetic=_e(this.m_nKinetic),this.m_nBounceHorizontalHandle=_e(this.m_nBounceHorizontalHandle),this.m_nBounceVerticalHandle=_e(this.m_nBounceVerticalHandle),this.m_pScrollAnimation&&this.m_pScrollAnimation.stop(),e&&this.scrollEnd())}scrollActivate(e=!1){(e||xr.isScrolling)&&(this.m_pFocus?this.m_pFocus.focus():this.onScrollActivate())}scrollZoomStart(){this.scrollStop(this.m_bScrolling),this.m_bZoomStart||(this.m_bZoomStart=!0,this.onScrollZoomStart())}scrollZoomEnd(){this.m_bZoomStart&&(this.m_bZoomStart=!1,this.onScrollZoomEnd())}scrollStart(){this.m_bScrolling||(this.m_bScrolling=!0,this.onScrollStart(),Lr.disable())}scrollEnd(){this.m_bScrolling&&(this.m_bScrolling=!1,this.onScrollEnd(),Lr.enable())}scrollHorizontal(t,i=!0){t=e.range(t,0,this.rangeHorizontal),this.horizontal&&t!==this.scrollLeft&&(this.scrollStop(),this.emit({event:()=>{this.applyScroll(t,this.scrollTop)},asynchronous:!i,cancelable:!0}))}scrollVertical(t,i=!0){t=e.range(t,0,this.rangeVertical),this.vertical&&t!==this.scrollTop&&(this.scrollStop(),this.emit({event:()=>{this.applyScroll(this.scrollLeft,t)},asynchronous:!i,cancelable:!0}))}onScrollInit(){this.emitHook("OnScrollInit",{scroll:this}),pe(this.onInit,this)}onScrollDimensions(){if(!this.native)return pe(this.onDimensions,this)}onScrollViewport(){return pe(this.onViewport,this)}onScrollResize(){this.emitHook("OnScrollResize",{scroll:this}),pe(this.onResize,this)}onScrollDirection(){this.emitHook("OnScrollDirection",{scroll:this}),pe(this.onDirection,this)}onScrollFocus(){this.emitHook("OnScrollFocus",{scroll:this}),this.emit({event:this.onFocus,asynchronous:!0,arguments:[this]})}onScrollActivate(){this.emitHook("OnScrollActivate",{scroll:this}),this.emit({event:this.onActivate,asynchronous:!0,arguments:[this]})}onScrollHover(){this.emitHook("OnScrollHover",{scroll:this}),this.emit({event:this.onHover,asynchronous:!0,arguments:[this.isHovered,this]})}onScrollStart(){this.scrollActivate(),this.emitHook("OnScrollStart",{scroll:this}),this.emit({event:this.onStart,asynchronous:!0,arguments:[this]})}onScrollChange(){this.emitHook("OnScrollChange",{scroll:this}),this.emit({event:this.onChange,asynchronous:!0,cancelable:!0,arguments:[this]})}onScrollMove(e,t){pe(this.onScroll,e,t,this)}onScrollEnd(){this.emitHook("OnScrollEnd",{scroll:this}),this.emit({event:this.onEnd,asynchronous:!0,arguments:[this]})}onScrollZoomBounderies(e){return $(pe(this.onZoomBounderies,e,this),e)}onScrollZoomStart(){this.scrollActivate(),this.emitHook("OnZoomStart",{scroll:this}),this.emit({event:this.onZoomStart,asynchronous:!0,arguments:[this.zoom,this]})}onScrollZoom(e){this.onZoom&&this.onZoom(e||this.zoom,this)}onScrollZoomChange(e){this.emitHook("OnZoomChange",{scroll:this,zoom:e||this.zoom}),this.emit({event:this.onZoomChange,cancelable:!0,asynchronous:!0,arguments:[e||this.zoom,this]})}onScrollZoomEnd(){this.emitHook("OnZoomEnd",{scroll:this}),this.emit({event:this.onZoomEnd,asynchronous:!0,arguments:[this.zoom,this]})}onScrollZoomWheel(e){return $(pe(this.onZoomWheel,e,this),.1)}init(){this.m_nInitializing=_e(this.m_nInitializing),!this.m_bInitializing||this.isInitialized||this.isDetached||(this.asset.isInDOM?this.measure(!1):this.m_nInitializing=ke((()=>{this.m_nInitializing=0,this.init()})))}update(e=!0,t=300){this.m_nUpdate=Ae(this.m_nUpdate),t>0?this.m_nUpdate=De((()=>{this.update(e,0),this.m_nUpdate=0}),t):!this.isDetached&&this.isInitialized&&this.measure(e,(()=>{let e;return e=this.bounce(!1,!1,!0),e=this.bounce(!0,!1,!0)||e,e}))}reset(){this.scrollStop(),this.applyScroll(0,0)}scrollTo(t,i,s=!0,o=!1,n=!1,r=!0){return this.measure(s,(()=>{const a=this.m_nScrollLeft,l=this.m_nScrollTop;let c=this.horizontal?e.range(t,0,this.rangeHorizontal):this.scrollLeft,u=this.vertical?e.range(i,0,this.rangeVertical):this.scrollTop;return r&&!n&&s&&(this.horizontal&&this.m_nBounceHorizontal!==Hr.No&&(this.m_nBounceHorizontal===Hr.Always||this.rangeHorizontal>0)&&(t<0||t>this.rangeHorizontal)&&(c+=e.range(G((t<0?t:t>this.rangeHorizontal?t-this.rangeHorizontal:0)/2.75),-this.viewport.width,this.viewport.width)),this.vertical&&this.m_nBounceVertical!==Hr.No&&(this.m_nBounceVertical===Hr.Always||this.rangeVertical>0)&&(i<0||i>this.rangeVertical)&&(u+=e.range(G((i<0?i:i>this.rangeVertical?i-this.rangeVertical:0)/2.75),-this.viewport.height,this.viewport.height))),c=e.floor(c),u=e.floor(u),(c!==a||u!==l)&&(this.scrollStop(),!n&&s?(this.scrollDirection(c!==a&&u!==l?1:c!==a?2:4),this.m_pScrollAnimation=new Pr({onAnimationStart:()=>{this.scrollStart()},onAnimation:e=>{let t,i;o?(t=e.exponentialEaseOut(c-a),i=e.exponentialEaseOut(u-l)):(t=e.cubicEaseInOut(c-a),i=e.cubicEaseInOut(u-l)),this.applyScroll(a+t,l+i)},onAnimationEnd:()=>{this.m_pScrollAnimation=void 0,this.bounce(!1,!0,!1),this.bounce(!0,!0,!1)},duration:300,start:!0})):this.emit({event:()=>{this.applyScroll(c,u)},asynchronous:!n,cancelable:!0}),!0)}),this.isInitialized&&(o||n))}scrollShift(e,t,i=!0,s=!1,o=!1,n=!0){return this.scrollTo(this.scrollLeft+e,this.scrollTop+t,i,s,o,n)}scrollToAsset(t,i=!0,s=20,o=20,n=20,r=20,a=!1){let l=t.parent;for(;l&&!this.asset.isEqual(l);)l=l.parent;l&&(lo(this.m_nMeasureAsset),this.measure(i,(()=>{this.m_nMeasureAsset=no((()=>{const l=t.rectangle;if(this.m_nMeasureAsset=0,l.width>0&&l.height>0){let t=0,c=0;const u=e.inRange(l.left-s,this.viewport.left,this.viewport.right),h=e.inRange(l.right+n,this.viewport.left,this.viewport.right),d=e.inRange(l.top-o,this.viewport.top,this.viewport.bottom),p=e.inRange(l.bottom+r,this.viewport.top,this.viewport.bottom),m=h||l.left-s<this.viewport.left&&l.right+n>this.viewport.right,g=p||l.top-o<this.viewport.top&&l.bottom+r>this.viewport.bottom;a&&m||u&&h||(l.width+s+n<=this.viewport.width?l.left-s<this.viewport.left?t=l.left-s-this.viewport.left:l.right+n>this.viewport.right&&(t=l.right+n-this.viewport.right):(t=l.left-this.viewport.left,t-=e.max(this.viewport.width-l.width,0)/2||r)),a&&g||d&&p||(l.height+o+r<=this.viewport.height?l.top-o<this.viewport.top?c=l.top-o-this.viewport.top:l.bottom+r>this.viewport.bottom&&(c=l.bottom+r-this.viewport.bottom):(c=l.top-this.viewport.top,c-=e.max(this.viewport.height-l.height,0)/2||o)),0===t&&0===c||this.scrollShift(t,c,i,!1,!1,!1)}}))})))}scrollToTop(){return this.scrollTo(this.scrollLeft,0,!0,!0)}scrollToBottom(){return this.scrollTo(this.scrollLeft,this.rangeVertical,!0,!0)}scrollToTopOrBottom(){return this.scrollTop>0?this.scrollToTop():this.scrollToBottom()}scrollToLeft(){return this.scrollTo(0,this.scrollTop,!0,!0)}scrollToRight(){return this.scrollTo(this.rangeHorizontal,this.scrollTop,!0,!0)}scrollToLeftOrRight(){return this.scrollLeft>0?this.scrollToLeft():this.scrollToRight()}scrollPageUp(){return this.scrollTo(this.scrollLeft,this.scrollTop-this.viewport.roundedHeight,!0,!0,!1,!1)}scrollPageDown(){return this.scrollTo(this.scrollLeft,this.scrollTop+this.viewport.roundedHeight,!0,!0,!1,!1)}scrollPageLeft(){return this.scrollTo(this.scrollLeft-this.viewport.roundedWidth,this.scrollTop,!0,!0,!1,!1)}scrollPageRight(){return this.scrollTo(this.scrollLeft+this.viewport.roundedWidth,this.scrollTop,!0,!0,!1,!1)}scrollInchUp(){return this.scrollTo(this.scrollLeft,this.scrollTop-96,!0,!0,!1,!1)}scrollInchDown(){return this.scrollTo(this.scrollLeft,this.scrollTop+96,!0,!0,!1,!1)}scrollInchLeft(){return this.scrollTo(this.scrollLeft-96,this.scrollTop,!0,!0,!1,!1)}scrollInchRight(){return this.scrollTo(this.scrollLeft+96,this.scrollTop,!0,!0,!1,!1)}zoomTo(e,t=this.m_bZoomAnimations,i=250,s=!0,o){return this.applyZoom(e,!0,!0,!0,t,i,s,o)}zoomToPercentage(t,i=this.m_bZoomAnimations,s=250,o=!0,n){return this.zoomTo(.01*e.max(t,0),i,s,o,n)}zoomToMax(e=this.m_bZoomAnimations,t=250,i=!0,s){return this.applyZoom(this.zoomMax,!0,!0,!0,e,t,i,s)}zoomToMin(e=this.m_bZoomAnimations,t=250,i=!0,s){return this.applyZoom(this.zoomMin,!0,!0,!0,e,t,i,s)}zoomToFit(e=this.m_bZoomAnimations,t=250,i=!0){return this.applyZoom(this.zoomFit,!0,!0,!0,e,t,i)}zoomToFitHorizontal(e=this.m_bZoomAnimations,t=250,i=!0){return this.applyZoom(this.zoomFitHorizontal,!0,!0,!0,e,t,i)}zoomToFitVertical(e=this.m_bZoomAnimations,t=250,i=!0){return this.applyZoom(this.zoomFitVertical,!0,!0,!0,e,t,i)}zoomToActual(e=this.m_bZoomAnimations,t=250,i=!0,s){return this.applyZoom(1,!0,!0,!0,e,t,i,s)}zoomToggle(e=this.m_bZoomAnimations,t=250,i=!0,s){return this.zoomToActual(e,t,i,s)||this.zoomToFit(e,t,i)}zoomIn(e=this.m_bZoomAnimations,t=250,i=!0,s){const o=this.zoom+(1-this.zoomMin)/9;return this.applyZoom(o,!0,!0,!0,e,t,i,s)}zoomOut(e=this.m_bZoomAnimations,t=250,i=!0,s){const o=this.zoom-(1-this.zoomMin)/9;return this.applyZoom(o,!0,!0,!0,e,t,i,s)}zoomCrawl(e,t){if(this.m_sZoomCrawl!==e&&(this.zoomCrawlStop(),"stop"!==e)&&this.zoomMax-this.zoomMin>0){const i=t/(this.zoomMax-this.zoomMin),s="in"===e?this.zoomMax-this.zoom:-(this.zoom-this.zoomMin),o=this.zoom;this.m_sZoomCrawl=e,this.m_pZoomCrawl=new Pr({onAnimation:e=>{this.zoom=o+e.linear(s)},onAnimationEnd:()=>{this.m_pZoomCrawl=void 0,this.m_sZoomCrawl="stop"},duration:Math.abs(s*i),start:!0})}}zoomCrawlStop(){this.m_sZoomCrawl="stop",this.m_pZoomCrawl&&(this.m_pZoomCrawl.stop(),this.m_pZoomCrawl=void 0)}cancelHover(){this.hover(!1,!0)}focus(){this.m_pFocus&&this.m_pFocus.focus()}blur(){this.m_pFocus&&this.m_pFocus.blur()}onDestroy(){return Zr.data.scroll===this&&Zr.terminate(),this.zoomCrawlStop(),this.scrollStop(),lo(this.m_nMeasureScroll),lo(this.m_nMeasureAsset),lo(this.m_nReflect),this.m_pZoomAnimation&&this.m_pZoomAnimation.stop(),this.m_pOffsetAnimation&&this.m_pOffsetAnimation.stop(),this.asset.off("mouseenter"),this.asset.off("mouseleave"),this.asset.off("scroll"),this.m_nInitializing=_e(this.m_nInitializing),this.m_nRules=Ae(this.m_nRules),this.m_nUpdate=Ae(this.m_nUpdate),this.m_pScroll=void 0,super.onDestroy()}}Zr.m_nUpdate=0,Zr.m_nEdgeDetection=0;class Vr extends gr{constructor(t){super(Vr,t.asset,"single",t.stylesheet,t.area,"horizontal"===t.direction||2===t.direction?Vr.horizontal:"vertical"===t.direction||4===t.direction?Vr.vertical:Vr.bidirectional),this.m_bInitialized=!1,this.m_bPrioritize=!1,this.m_bDragging=!1,this.m_nDelay=e.max(G(t.delay),0),this.m_bEdgeScrolling=Q(t.edgeScrolling,!0),this.m_bEdgeInSpacing=Q(t.edgeInSpacing),this.m_pEdgeTargets=t.edgeTargets||[],this.m_bEdgeAnywhere=Q(t.edgeAnywhere),this.m_bPrioritize=Q(t.prioritize),this.onInit=t.onInit,this.onStart=t.onStart,this.onMove=t.onMove,this.onEnd=t.onEnd,xr.implement("drag",Vr.types),xr.implement("snap",Vr.types)}static get bidirectional(){return this.m_nBidirectional||(this.m_nBidirectional=gr.createType())}static get horizontal(){return this.m_nHorizontal||(this.m_nHorizontal=gr.createType())}static get vertical(){return this.m_nVertical||(this.m_nVertical=gr.createType())}static get id(){return"Drag"}static get types(){return this.bidirectional|this.horizontal|this.vertical}static get priority(){return 3}static get state(){return this.m_pState||(this.m_pState=new Cr)}static get data(){return this.state.payload||{point:void 0,shift:{x:0,y:0},position:{x:0,y:0},isMouse:!1,isTouch:!1,isPen:!1,time:0,debounce:!1}}static get isDragging(){return 2===this.state.step}static processor(t){if(!(-64&t)){if(!this.state.isStopped){const i=2===this.state.step?xr.point(Mr.id(this.data.point)):xr.firstPoint;switch(this.state.step){case 0:if(9&t&&1===xr.touches&&i&&(i.isTouch||1537&i.buttons)){let t=-1,s=e.maxL(i.implements("hold")?250:0,i.implements("doubletap")||i.implements("tap")?300:0);Mr.controllers(i,this.types,"stop",((e,i)=>{t=-1===t||e.m_nDelay<t?e.m_nDelay:t,e.m_bDragging=!1,e.m_bInitialized=!1,(e.m_bPrioritize||1024&i.buttons)&&(s=0),this.state.next(1,{point:Mr.clone(i),shift:{x:0,y:0},position:{x:0,y:0},isMouse:i.isMouse,isTouch:i.isTouch,isPen:i.isPen,time:M.now,debounce:!0})})),t=e.max(0,t),1===this.state.step?(this.m_bScheduled=!0,xr.schedule((()=>{this.m_bScheduled=!1,Mr.controllers(i,this.types,"stop",((e,i)=>e.dragInit(i.translateToAsset(e.asset),i.isMouse,i.isTouch,i.isPen,t)))}),s),this.state.postpone((()=>{i&&(this.state.next(),xr.scheduleInvoke(),xr.capture(this.bidirectional),i.reinit(),this.data.time=M.now,Mr.each(i,this.types,((e,t)=>e.dragStart(this.data.position=t.translateToAsset(e.asset),t.isMouse,t.isTouch,t.isPen))))}),s+t)):this.state.stop()}break;case 1:1===xr.touches?i&&!i.implements("hold")&&i.radius>(i.isTouch?15:5)&&this.state.continue():0===xr.touches?(xr.schedulePause(),this.state.next(3),this.state.invoke((()=>{this.terminate()}),200,!1)):this.terminate();break;case 2:if(i){let e=!1;this.data.debounce&&(i.isActive&&M.now-this.data.time<150?i.radius>(i.isTouch?10:5)&&(this.data.debounce=!1):(this.data.debounce=!1,i.reinit())),this.data.debounce||Mr.each(i,this.types,((t,i)=>{if(t&&t.m_bInitialized&&t.m_bDragging){if(!i.isActive||t.type&this.bidirectional||t.type&this.horizontal&&0!==i.diffX||t.type&this.vertical&&0!==i.diffY){const s=t.asset;if(i.isActive||Zr.edgeDetectionStop(),i.isActive?t.onDragMove({drag:t,asset:t.asset,offset:this.data.position,isMouse:i.isMouse,isTouch:i.isTouch,isPen:i.isPen,diffX:t.type&(this.bidirectional|this.horizontal)?i.diffX+this.data.shift.x:0,diffY:t.type&(this.bidirectional|this.vertical)?i.diffY+this.data.shift.y:0,moveX:t.type&(this.bidirectional|this.horizontal)?i.diffX:0,moveY:t.type&(this.bidirectional|this.vertical)?i.diffY:0,isDragging:t.m_bDragging,isEdging:!1})||this.terminate():(t.m_bDragging&&Lr.enable(),t.onDragEnd({drag:t,asset:t.asset,offset:this.data.position,isMouse:i.isMouse,isTouch:i.isTouch,isPen:i.isPen,diffX:t.type&(this.bidirectional|this.horizontal)?i.diffX+this.data.shift.x:0,diffY:t.type&(this.bidirectional|this.vertical)?i.diffY+this.data.shift.y:0,moveX:t.type&(this.bidirectional|this.horizontal)?i.diffX:0,moveY:t.type&(this.bidirectional|this.vertical)?i.diffY:0,isDragging:t.m_bDragging,isEdging:!1})),t.m_bEdgeScrolling&&!e&&i.isActive&&s){let o;if(!t.m_bEdgeAnywhere){const e=s.parent;o=(e?[e]:[]).concat(t.m_pEdgeTargets)}e=Zr.edgeDetection(o,i.currentPosition,t.m_bEdgeInSpacing,Q(t.type&(this.bidirectional|this.horizontal)),Q(t.type&(this.bidirectional|this.vertical)),((e,o)=>{o.isParentOf(s)?this.data.shift={x:this.data.shift.x+e.x,y:this.data.shift.y+e.y}:this.data.position={x:this.data.position.x+e.x,y:this.data.position.y+e.y},t.onDragMove({drag:t,asset:t.asset,offset:this.data.position,isMouse:i.isMouse,isTouch:i.isTouch,isPen:i.isPen,diffX:t.type&(this.bidirectional|this.horizontal)?i.diffX+this.data.shift.x:0,diffY:t.type&(this.bidirectional|this.vertical)?i.diffY+this.data.shift.y:0,moveX:t.type&(this.bidirectional|this.horizontal)?i.diffX:0,moveY:t.type&(this.bidirectional|this.vertical)?i.diffY:0,isDragging:t.m_bDragging,isEdging:!0})||this.terminate()}),i.radius>5?5*(i.radius-5):0)}}}else this.terminate()})),0!==xr.touches&&i.isActive||this.terminate()}else this.terminate();break;case 3:1===xr.touches&&i&&(this.state.next(),this.state.postpone((()=>{i&&(this.state.next(2,{point:Mr.clone(i),shift:{x:0,y:0},position:{x:0,y:0},isMouse:i.isMouse,isTouch:i.isTouch,isPen:i.isPen,time:M.now,debounce:!0}),xr.scheduleInvoke(),xr.capture(this.bidirectional),Mr.each(i,this.types,((e,t)=>e.dragStart(this.data.position=t.translateToAsset(e.asset),t.isMouse,t.isTouch,t.isPen))))}),i.implements("doubletap")?300:0));break;case 4:1===xr.touches&&i&&i.radius>(i.isTouch?15:5)&&this.state.continue()}}0===xr.touches&&3!==this.state.step&&this.terminate()}}static terminate(){Zr.edgeDetectionStop(),xr.scheduleCancel(),this.m_bScheduled||Mr.each(this.data.point,this.types,(e=>{e.dragEnd(this.data.position,this.data.isMouse,this.data.isTouch,this.data.isPen)})),this.state.reset()}static on(e){return new Vr(e)}dragInit(e,t,i,s,o){this.m_bInitialized=!this.isDisabled&&this.onDragInit({drag:this,asset:this.asset,offset:e,isMouse:t,isTouch:i,isPen:s,delay:o})}dragStart(e,t,i,s){return this.m_bDragging=this.m_bInitialized&&!this.isDisabled&&this.onDragStart({drag:this,asset:this.asset,offset:e,isMouse:t,isTouch:i,isPen:s}),this.m_bDragging&&Lr.disable(),this.m_bDragging}dragEnd(e,t,i,s){this.m_bDragging&&Lr.enable(),this.onDragEnd({drag:this,asset:this.asset,offset:e,isMouse:t,isTouch:i,isPen:s,diffX:0,diffY:0,moveX:0,moveY:0,isDragging:this.m_bDragging,isEdging:!1})}onDragInit(e){return this.emitHook("OnDragInit",e),this.emit({event:this.onInit,payload:e})}onDragStart(e){return this.emitHook("OnDragStart",e),this.emit({event:this.onStart,activate:!0,payload:e})}onDragMove(e){return!!this.m_bDragging&&(this.emitHook("OnDragMove",e),this.emit({event:this.onMove,activate:!0,payload:e}))}onDragEnd(e){return!!this.m_bInitialized&&(this.m_bInitialized=!1,this.emitHook("OnDragEnd",e),this.emit({event:this.onEnd,activate:!1,payload:e}))}onDestroy(){return this.m_bDragging&&this.dragEnd(Vr.data.position,Vr.data.isMouse,Vr.data.isTouch,Vr.data.isPen),super.onDestroy()}}Vr.m_bScheduled=!1;class Wr extends Zr{constructor(t){if(super(X(t,{stylesheet:t.stylesheet||Wr.stylesheet,hovering:Q(t.hovering,!0)})),this.m_nHorizontalTrack=0,this.m_nVerticalTrack=0,this.m_bVisible=!1,this.m_bShow=!1,this.m_bHide=!1,this.m_bDrag=!1,this.m_nBlink=0,this.m_bBlink=!1,this.m_bBlinkOnInit=!1,this.m_nRetain=0,this.m_bRetain=!1,this.m_nHover=1,this.m_nFocus=1,this.m_nDrag=1,this.m_nCrawl=1,this.native)throw new Error("UI.Scrollbars: Scrollbars are not supported for native scrollers.");if(!this.asset)throw new Error("UI.Scrollbars: Invalid asset.");const i=t.style||Wr.style;if(!i)return this.m_pTrackSpacing=this.m_pThumbSpacing=new Li,void(this.m_nThumbSize=this.m_nThumbMin=1);const s=i.offset||new Li,o=e.max(i.track&&i.track.size||0,1),n=Q(t.passive);i.thumb=i.thumb||{},i.corner=i.corner||{},this.m_pTrackSpacing=(i.track?i.track.spacing:void 0)||new Li,this.m_pThumbSpacing=i.thumb.spacing||new Li,this.m_nThumbSize=e.max(i.thumb.size||0,0)||o,this.m_nThumbMin=e.max(G(i.thumb.min),this.m_nThumbSize),this.m_bBlinkOnInit=Q(t.blink,!0);const r=this.stylesheet.style([i.track?i.track.appearance:void 0,{position:"absolute",boxSizing:"border-box",overflow:"hidden",cursor:"default !important",zIndex:wo.ZINDEX_SCROLLBARS,visibility:"hidden",opacity:0,[So.selector("visible")]:{visibility:"inherit",opacity:1},[So.selector("horizontal")]:J(i.track?i.track.horizontal:void 0,{height:o,bottom:this.spacing.bottom+this.m_pTrackSpacing.bottom+s.bottom,left:this.spacing.left+this.m_pTrackSpacing.left+s.left,right:this.spacing.right+this.m_pTrackSpacing.right+s.right,[So.selector("corner")]:{right:this.spacing.right+this.m_pTrackSpacing.right+this.m_nThumbSize}}),[So.selector("vertical")]:J(i.track?i.track.vertical:void 0,{width:o,top:this.spacing.top+this.m_pTrackSpacing.top+s.top,right:this.spacing.right+this.m_pTrackSpacing.right+s.right,bottom:this.spacing.bottom+this.m_pTrackSpacing.bottom+s.bottom,[So.selector("corner")]:{bottom:this.spacing.bottom+this.m_pTrackSpacing.bottom+this.m_nThumbSize}}),[So.selector("hover")]:i.track?i.track.hover:void 0,[So.selector("focus")]:i.track?i.track.focus:void 0,[So.selector("drag")]:J(i.track?i.track.drag:void 0,{opacity:1,visibility:"inherit"}),[So.selector("crawl")]:J(i.track?i.track.crawl:void 0,{opacity:1,visibility:"inherit"})}]),a=this.stylesheet.style([i.thumb.appearance,{position:"absolute",[So.selector("horizontal")]:J(i.thumb.horizontal,{width:1,height:this.m_nThumbSize,left:this.m_pThumbSpacing.left,bottom:this.m_pThumbSpacing.bottom}),[So.selector("vertical")]:J(i.thumb.vertical,{width:this.m_nThumbSize,height:1,right:this.m_pThumbSpacing.right,top:this.m_pThumbSpacing.top}),[So.selector("hover")]:J(i.thumb.hover,{width:o-this.m_pThumbSpacing.horizontal,height:o-this.m_pThumbSpacing.vertical}),[So.selector("focus")]:i.thumb.focus,[So.selector("drag")]:J(i.thumb.drag,{width:o-this.m_pThumbSpacing.horizontal,height:o-this.m_pThumbSpacing.vertical}),[So.selector("crawl")]:J(i.thumb.crawl,{width:o-this.m_pThumbSpacing.horizontal,height:o-this.m_pThumbSpacing.vertical})}]);this.horizontal&&(this.m_pHorizontalTrack=dr.create("div",(e=>{let t,i;e.addClass(r),e.addSelector("horizontal"),this.m_pHorizontalThumb=e.create("div",(e=>{let t;e.addClass(a),e.addSelector("horizontal"),e.width=0,e.position({x:0,y:0,translate:"accelerated"}),n||(xr.mode(e,"stop"),Lr.pointer(e,(e=>this.thumb(2,e.isHovered))).alwaysOn(),Vr.on({stylesheet:this.stylesheet,asset:e,direction:"horizontal",edgeScrolling:!1,prioritize:!0,onInit:()=>2===this.m_nFocus,onStart:()=>{this.m_bDrag=!0,this.drag(2,!0),this.focus(),t=this.scrollLeft},onMove:e=>{this.scrollStart(),this.scrollHorizontal(t+e.diffX*this.horizontalMultiplier)},onEnd:()=>{this.m_bDrag=!1,this.scrollEnd(),this.drag(2,!1)}}))})),n?e.pointerEvents=!1:(xr.mode(e,"stop"),Lr.pointer(e,(e=>this.track(2,e.isHovered))).alwaysOn(),Vr.on({stylesheet:this.stylesheet,asset:e,direction:"horizontal",edgeScrolling:!1,prioritize:!0,onInit:()=>2===this.m_nHover,onStart:e=>{i=e.offset.x,t=ze((()=>{this.crawl(2,!0),this.crawlTo(2,i)}),200),this.m_bDrag=!0,this.crawlTo(2,i),this.focus()},onMove:e=>{i=e.offset.x+e.diffX},onEnd:()=>{Ee(t),this.m_bDrag=!1,this.crawl(2,!1)}}))}),this.parent)),this.vertical&&(this.m_pVerticalTrack=dr.create("div",(e=>{let t,i;e.addClass(r),e.addSelector("vertical"),this.m_pVerticalThumb=e.create("div",(e=>{let t;e.addClass(a),e.addSelector("vertical"),e.height=0,e.position({x:0,y:0,translate:"accelerated"}),n||(xr.mode(e,"stop"),Lr.pointer(e,(e=>this.thumb(4,e.isHovered))).alwaysOn(),Vr.on({stylesheet:this.stylesheet,asset:e,direction:"vertical",edgeScrolling:!1,prioritize:!0,onInit:()=>4===this.m_nFocus,onStart:()=>{this.m_bDrag=!0,this.drag(4,!0),this.focus(),t=this.scrollTop},onMove:e=>{this.scrollStart(),this.scrollVertical(t+e.diffY*this.verticalMultiplier)},onEnd:()=>{this.m_bDrag=!1,this.scrollEnd(),this.drag(4,!1)}}))})),n?e.pointerEvents=!1:(xr.mode(e,"stop"),Lr.pointer(e,(e=>this.track(4,e.isHovered))).alwaysOn(),Vr.on({stylesheet:this.stylesheet,asset:e,direction:"vertical",edgeScrolling:!1,prioritize:!0,onInit:()=>4===this.m_nHover,onStart:e=>{i=e.offset.y,t=ze((()=>{this.crawl(4,!0),this.crawlTo(4,i)}),200),this.m_bDrag=!0,this.crawlTo(4,i),this.focus()},onMove:e=>{i=e.offset.y+e.diffY},onEnd:()=>{Ee(t),this.m_bDrag=!1,this.crawl(4,!1)}}))}),this.parent)),this.horizontal&&this.vertical&&(this.m_pCorner=dr.create("div",void 0,this.parent,void 0,[i.corner.appearance,{position:"absolute",boxSizing:"border-box",width:this.m_nThumbSize,height:this.m_nThumbSize,right:this.spacing.right+this.m_pTrackSpacing.right,bottom:this.spacing.bottom+this.m_pTrackSpacing.bottom,zIndex:wo.ZINDEX_SCROLLBARS,visibility:"hidden",opacity:0,[So.selector("visible")]:{visibility:"inherit",opacity:1},[So.selector("horizontal")]:{height:o},[So.selector("vertical")]:{width:o},[So.selector("drag")]:i.corner.drag,[So.selector("crawl")]:i.corner.crawl}],this.stylesheet))}static on(e){return new Wr(e)}static invalidate(e,t,i=!1){let s=!1;return xr.each("*",this.types,(o=>{o instanceof Wr&&("*"===e||o.asset.isChildOf(e))&&(o.invalidate(t,i),s=!0)})),s}get horizontalThumbSize(){return e.max(this.width>0?this.m_nHorizontalTrack/this.width*(this.width-this.rangeHorizontal):this.m_nHorizontalTrack,this.m_nThumbMin)}get verticalThumbSize(){return e.max(this.height>0?this.m_nVerticalTrack/this.height*(this.height-this.rangeVertical):this.m_nVerticalTrack,this.m_nThumbMin)}get horizontalMultiplier(){return this.m_pHorizontalThumb?e.max(this.rangeHorizontal/(this.m_nHorizontalTrack-this.horizontalThumbSize),1):1}get verticalMultiplier(){return this.m_pVerticalThumb?e.max(this.rangeVertical/(this.m_nVerticalTrack-this.verticalThumbSize),1):1}get isObservable(){return this.isScrollable&&(this.isHovered||this.m_bShow||this.m_bBlink||this.m_bRetain)}get isDragging(){return Vr.isDragging&&!this.m_bDrag}get isShown(){return this.m_bShow}get isHidden(){return this.m_bHide}get isVisible(){return this.isHorizontalVisible||this.isVerticalVisible}get isHorizontalVisible(){return!(this.m_fnCondition&&!this.m_fnCondition(this))&&(!!(2&(this.m_nDrag|this.m_nCrawl))||!(!this.isInitialized||this.isZooming||this.m_bHide||this.isScrolling&&4===this.direction||4===this.m_nDrag||4===this.m_nCrawl)&&(this.rangeHorizontal>0||0!==this.bounceHorizontal)&&(Q(this.isScrolling&&3&this.direction)||this.isObservable))}get isVerticalVisible(){return!(this.m_fnCondition&&!this.m_fnCondition(this))&&(!!(4&(this.m_nDrag|this.m_nCrawl))||!(!this.isInitialized||this.isZooming||this.m_bHide||this.isScrolling&&2===this.direction||2===this.m_nDrag||2===this.m_nCrawl)&&(this.rangeVertical>0||0!==this.bounceVertical)&&(Q(this.isScrolling&&5&this.direction)||this.isObservable))}styles(e=!1){const t=this.rangeHorizontal>0||0!==this.bounceHorizontal,i=this.rangeVertical>0||0!==this.bounceVertical,s=this.isHorizontalVisible,o=this.isVerticalVisible;this.m_bVisible=s||o,this.m_nHorizontalTrack=this.viewport.width-this.m_pTrackSpacing.horizontal-this.m_pThumbSpacing.horizontal,this.m_nVerticalTrack=this.viewport.height-this.m_pTrackSpacing.vertical-this.m_pThumbSpacing.vertical,t&&i&&(this.m_nHorizontalTrack-=this.m_nThumbSize,this.m_nVerticalTrack-=this.m_nThumbSize),ro((()=>{const e=t&&i&&(s||o);let n=!1,r=!1;s&&!o&&2&(this.m_nHover|this.m_nFocus|this.m_nDrag|this.m_nCrawl)&&(n=!0),o&&!s&&4&(this.m_nHover|this.m_nFocus|this.m_nDrag|this.m_nCrawl)&&(r=!0),this.m_pHorizontalTrack&&(this.m_pHorizontalTrack.selector("visible",s),this.m_pHorizontalTrack.selector("hover",2===this.m_nHover&&!this.isDragging),this.m_pHorizontalTrack.selector("focus",2===this.m_nFocus&&!this.isDragging),this.m_pHorizontalTrack.selector("drag",2===this.m_nDrag),this.m_pHorizontalTrack.selector("crawl",2===this.m_nCrawl),this.m_pHorizontalTrack.selector("corner",e),this.m_pHorizontalThumb&&(this.m_pHorizontalThumb.selector("hover",2===this.m_nHover&&!this.isDragging),this.m_pHorizontalThumb.selector("focus",2===this.m_nFocus&&!this.isDragging),this.m_pHorizontalThumb.selector("drag",2===this.m_nDrag),this.m_pHorizontalThumb.selector("crawl",2===this.m_nCrawl),s&&(this.m_pHorizontalThumb.width=this.horizontalThumbSize))),this.m_pVerticalTrack&&(this.m_pVerticalTrack.selector("visible",o),this.m_pVerticalTrack.selector("hover",4===this.m_nHover&&!this.isDragging),this.m_pVerticalTrack.selector("focus",4===this.m_nFocus&&!this.isDragging),this.m_pVerticalTrack.selector("drag",4===this.m_nDrag),this.m_pVerticalTrack.selector("crawl",4===this.m_nCrawl),this.m_pVerticalTrack.selector("corner",e),this.m_pVerticalThumb&&(this.m_pVerticalThumb.selector("hover",4===this.m_nHover&&!this.isDragging),this.m_pVerticalThumb.selector("focus",4===this.m_nFocus&&!this.isDragging),this.m_pVerticalThumb.selector("drag",4===this.m_nDrag),this.m_pVerticalThumb.selector("crawl",4===this.m_nCrawl),o&&(this.m_pVerticalThumb.height=this.verticalThumbSize))),this.m_pCorner&&(this.m_pCorner.selector("visible",e),this.m_pCorner.selector("horizontal",n),this.m_pCorner.selector("vertical",r)),this.position()}),e||!this.asset.isInDOM)}position(){if(this.m_pHorizontalThumb){const t=this.horizontalThumbSize;this.m_pHorizontalThumb.x=(this.rangeHorizontal>0?G((this.m_nHorizontalTrack-t)/this.rangeHorizontal*this.scrollLeft):0)+e.range(this.bounceHorizontal,-t+this.m_nThumbMin/2,t-this.m_nThumbMin/2)}if(this.m_pVerticalThumb){const t=this.verticalThumbSize;this.m_pVerticalThumb.y=(this.rangeVertical>0?G((this.m_nVerticalTrack-t)/this.rangeVertical*this.scrollTop):0)+e.range(this.bounceVertical,-t+this.m_nThumbMin/2,t-this.m_nThumbMin/2)}}track(e,t){const i=4===e?this.rangeVertical:this.rangeHorizontal,s=t&&i>0?e:1;this.m_nHover!==s&&(this.m_nHover=s,this.styles())}thumb(e,t){const i=4===e?this.rangeVertical:this.rangeHorizontal,s=t&&i?e:1;this.m_nFocus!==s&&(this.m_nFocus=s,this.styles())}drag(e,t){const i=t?e:1;this.m_nDrag!==i&&(this.m_nDrag=i,this.styles())}crawl(e,t){const i=t?e:1;this.m_nCrawl!==i&&(this.m_nCrawl=i,this.styles())}crawlTo(e,t){let i=0,s=0;if(4===e&&this.m_pVerticalThumb?(i=this.m_pVerticalThumb.y,s=i+this.verticalThumbSize):2===e&&this.m_pHorizontalThumb&&(i=this.m_pHorizontalThumb.x,s=i+this.horizontalThumbSize),t<i||t>s){const o=t<i?-2:2;this.scrollShift(4===e?0:this.horizontalMultiplier*(s-i)/o,4===e?this.verticalMultiplier*(s-i)/o:0,!0,!0,!1,!1)}}retain(){Ce(this.m_nRetain),this.m_bRetain=!0,this.m_nRetain=Le((()=>{this.m_nRetain=0,this.m_bRetain=!1,this.styles()}),1500),this.styles()}onScrollInit(){this.m_bBlinkOnInit&&this.blink(),super.onScrollInit()}onScrollResize(){this.isZooming||this.styles(),super.onScrollResize()}onScrollDirection(){this.styles(),super.onScrollDirection()}onScrollHover(){this.isHovered||this.isHovercanceled?this.styles():this.retain(),super.onScrollHover()}onScrollStart(){this.styles(),super.onScrollStart()}onScrollMove(e,t){this.m_bVisible?this.position():this.styles(),this.isDragging&&this.blink(),super.onScrollMove(e,t)}onScrollEnd(){this.retain(),super.onScrollEnd()}onScrollZoomStart(){this.styles(),super.onScrollZoomStart()}onScrollZoomEnd(){this.retain(),super.onScrollZoomEnd()}blink(){Ce(this.m_nBlink),this.m_nBlink=Le((()=>{this.m_nBlink=0,this.m_bBlink=!1,this.styles()}),3e3),this.m_bBlink||(this.m_bBlink=!0,this.styles())}show(e){return e!==this.m_bShow&&(this.m_bShow=e,this.styles()),this.m_bShow}hide(e){return e!==this.m_bHide&&(this.m_bHide=e,this.styles()),this.m_bHide}invalidate(e,t=!1){this.m_fnCondition=e,this.styles(t)}onDestroy(){return Ce(this.m_nRetain),Ce(this.m_nBlink),this.m_pCorner&&(this.m_pCorner.destroy(),this.m_pCorner=void 0),this.m_pHorizontalThumb&&(this.m_pHorizontalThumb.destroy(),this.m_pHorizontalThumb=void 0),this.m_pHorizontalTrack&&(this.m_pHorizontalTrack.destroy(),this.m_pHorizontalTrack=void 0),this.m_pVerticalThumb&&(this.m_pVerticalThumb.destroy(),this.m_pVerticalThumb=void 0),this.m_pVerticalTrack&&(this.m_pVerticalTrack.destroy(),this.m_pVerticalTrack=void 0),super.onDestroy()}}function Gr(t,i,s,o,n,...r){return dr.create(s,(s=>{let r;Vr.on({stylesheet:t.stylesheet,asset:s,edgeScrolling:!1,prioritize:!0,onStart:()=>{let o=!1;switch(i){case"left":o=t.canScrollLeft;break;case"up":o=t.canScrollUp;break;case"right":o=t.canScrollRight;break;case"down":o=t.canScrollDown}if(o){const o="left"===i||"right"===i?t.viewport.width:0,a="up"===i||"down"===i?t.viewport.height:0,l=e.round(o/5)*("left"===i?-1:1),c=e.round(a/5)*("up"===i?-1:1);0===l&&0===c||(r=ze((()=>{t.scrollShift(l,c,!0,!0,!1,!1)}),300),s.addSelectorSafe(n),t.scrollShift(l,c,!0,!0,!1,!1))}},onMove:e=>{let s=!1;switch(i){case"left":s=t.canScrollLeft;break;case"up":s=t.canScrollUp;break;case"right":s=t.canScrollRight;break;case"down":s=t.canScrollDown}return s&&e.asset.rectangle.isIn(e.asset.rectangleLeft+e.offset.x+e.diffX,e.asset.rectangleTop+e.offset.y+e.diffY)},onEnd:()=>{s.removeSelectorSafe(n),r=Ee(r)}}),Lr.pointer(s,(e=>s.selector(o,e.isHovered))).alwaysOn()}),t.asset,void 0,[{position:"absolute",left:"right"===i?"auto":0,right:"left"===i?"auto":0,top:"down"===i?"auto":0,bottom:"up"===i?"auto":0},...r],t.stylesheet)}Wr.stylesheet=So.app;class $r extends gr{constructor(e,t,i=!1,s,o){super($r,e,"multiple",o,s),this.m_bBubble=i,this.on=t}static get id(){return"Stroke"}static get types(){return this.m_nType||(this.m_nType=gr.createType())}static processor(e){~9&e||1===xr.touches&&Mr.controllers(xr.firstPoint,this.types,"bubble",((e,t)=>!(e.isDisabled||!e.onStroke({asset:e.asset,offset:t.translateToAsset(e.asset),isMouse:t.isMouse,isTouch:t.isTouch,isPen:t.isPen})||e.m_bBubble||(xr.claim(this.types),0))))}static on(e,t,i=!1,s,o){return new $r(e,t,i,s,o)}onStroke(e){return this.emitHook("OnStroke",e),this.emit({event:this.on,payload:e})}}class Qr{constructor(e,t){this.m_bHover=!1,this.m_bSelected=!1,this.m_bOpen=!1,this.m_bDisabled=this.m_bDisabledInitial=e,this.m_bInteractable=t}get menu(){return this.m_pMenu}get element(){return this.m_pElement}get elementType(){return"li"}get isInteractable(){return this.m_bInteractable}get isDisabled(){return this.m_bDisabled}set isDisabled(e){this.m_bDisabled!==e&&(this.m_bDisabled=e,this.update())}get isHovered(){return!this.isDisabled&&this.m_bHover}set isHovered(e){this.m_bHover!==e&&(this.m_bHover=e,this.update())}get isSelected(){return!this.isDisabled&&this.m_bSelected}set isSelected(e){this.m_bSelected!==e&&(this.m_bSelected=e,this.update())}get isOpen(){return this.m_bOpen}get canOpen(){return!1}get closeOnTap(){return!1}update(e=!1){ro((()=>{this.element&&(this.element.selector("disabled",this.isDisabled),this.element.selector("hover",this.isHovered),this.element.selector("selected",this.isSelected&&this.isOpen),this.element.attribute("aria-disabled",this.isDisabled?"true":"false"))}),e)}draw(e,t){this.m_pMenu=e,this.m_pElement=t,this.update(!0)}tap(){pe(this.onTap,this)}open(){return!(this.m_bOpen||!this.canOpen||(this.m_bOpen=!0,pe(this.onOpen,this),0))}close(e=!1){return!!this.m_bOpen&&(this.m_bOpen=!1,pe(this.onClose,this,e),!0)}remove(){this.m_bDisabled=this.m_bDisabledInitial,this.m_bHover=!1,this.m_bSelected=!1,this.m_bOpen=!1,this.m_pElement&&(this.m_pElement.destroy(),this.m_pElement=void 0),pe(this.onRemove,this)}destroy(){this.remove(),this.m_pMenu=void 0,pe(this.onDestroy,this)}}class qr extends Qr{constructor(e,t=!1,i=!1){super(t,i),this.m_sLabel=e}draw(e,t,i){super.draw(e,t),!i&&e.style.options&&e.style.options.label&&(i=J(e.style.options.label.appearance,{[So.selector("disabled")]:e.style.options.label.disabled,[So.selector("hover")]:e.style.options.label.hover})),i&&t.style(i,e.stylesheet),t.textAppend(this.m_sLabel),t.attribute("aria-label",this.m_sLabel)}}class Xr extends qr{constructor(e,t,i=!1){super(e,i,!0),this.m_fnCommand=t}get closeOnTap(){return!0}draw(e,t,i){var s,o;!i&&e.style.options&&e.style.options.item&&(i=J(e.style.options.item.appearance,{[So.selector("disabled")]:e.style.options.item.disabled,[So.selector("hover")]:e.style.options.item.hover,[So.selector("selected")]:e.style.options.item.selected,[So.selector("tapped")]:e.style.options.item.tapped})),super.draw(e,t,i),this.m_sBadge&&(this.m_pBadge=t.append("span",(e=>{e.text=this.m_sBadge||""}),null===(o=null===(s=e.style.options)||void 0===s?void 0:s.item)||void 0===o?void 0:o.badge))}tap(){Re(this.m_fnCommand),super.tap()}badge(e){return this.m_sBadge=e,this.m_pBadge&&(this.m_pBadge.text=this.m_sBadge,this.m_pBadge.opacity=this.m_sBadge?1:0),this}}class Jr{constructor(e){let t;this.m_nPromises=0,this.m_bAsynchronous=!1,this.m_bCanceled=!1,this.m_fnPromise=e.promise,this.m_bContinuous=Q(e.continuous),t=e.await(this),t!==this&&0===this.m_nPromises&&this.return(t),this.m_bAsynchronous=!0,this.m_bCondition=Q(this.m_bCondition,!Q(e.conditional))}static of(e){return new Jr(e)}get condition(){return Q(this.m_bCondition,!0)}set condition(e){this.m_bCondition=e}get isAlive(){return N(this.m_fnPromise)}get promiseCount(){return this.m_nPromises}terminate(){return this.return(void 0),this.condition}cancel(){return this.m_bCanceled=!0,this.m_bCondition=!0,this.terminate()}return(e){return this.m_fnPromise&&this.condition&&(this.m_nPromises++,this.m_fnPromise({isAsynchronous:this.m_bAsynchronous,isCanceled:this.m_bCanceled,payload:e}),this.m_bContinuous||(this.m_fnPromise=void 0)),e}}class Kr extends Jr{static for(e){return new Kr(e)}constructor(e){super({await:e.await,promise:e.promise,conditional:e.conditional,continuous:e.continuous})}done(){return this.terminate()}}!function(e){e[e.Fill=0]="Fill",e[e.Left=1]="Left",e[e.Top=2]="Top",e[e.Center=3]="Center",e[e.Right=4]="Right",e[e.Bottom=5]="Bottom"}(Fr||(Fr={})),function(e){e[e.None=0]="None",e[e.HABC=1]="HABC",e[e.HCBA=2]="HCBA",e[e.HBCA=3]="HBCA",e[e.VABC=4]="VABC",e[e.VCBA=5]="VCBA",e[e.VBCA=6]="VBCA"}(Ur||(Ur={}));class ea{constructor(){this.m_pLayers=[],this.m_bUpdating=!1,this.m_bGlobal=!1,this.m_bGlobalExplicit=!1,this.m_bVisible=!0,this.m_bShow=!0,this.m_nHorizontal=Fr.Fill,this.m_nVertical=Fr.Fill,this.m_pSpacing=new Li,this.m_nWidth=0,this.m_nWidthThreshold=0,this.m_nHeight=0,this.m_nHeightThreshold=0,this.m_nLayout=Ur.None,this.m_bAutoActivate=!0,this.m_bFocus=!1,this.m_bFocusExplicit=!1,this.m_bCapture=!1,this.m_bOverlay=!1,this.m_bOverlayExplicit=!1,this.m_bScrolling=!1,this.m_bScrollbars=!1,this.m_sCloseChildPanels="no",this.m_bApplicationRole=!1,this.m_bTouchDisabled=!1}get isAttached(){return 0!==this.m_pLayers.length}get layerWidth(){return this.m_nHorizontal===Fr.Fill?0:this.m_nWidth}get layerHeight(){return this.m_nVertical===Fr.Fill?0:this.m_nHeight}get layerStyle(){return this.m_pStyle}get horizontalAlignment(){return this.m_nHorizontal!==Fr.Fill&&this.isHorizontalLayout?Fr.Left:this.m_nHorizontal}get verticalAlignment(){return this.m_nVertical!==Fr.Fill&&this.isVerticalLayout?Fr.Top:this.m_nVertical}get isHorizontalLayout(){return this.panelLayout===Ur.HABC||this.panelLayout===Ur.HCBA||this.panelLayout===Ur.HBCA}get isVerticalLayout(){return this.panelLayout===Ur.VABC||this.panelLayout===Ur.VCBA||this.panelLayout===Ur.VBCA}get panelLayout(){return this.m_nLayout}get isGlobal(){return this.m_bGlobal}get isVisible(){return this.m_bVisible}get animationStyles(){return this.m_pAnimation}get isFocusEnabled(){return this.m_bFocus}get isAutoActivate(){return this.m_bAutoActivate}get isCapturingEnabled(){return this.m_bCapture}get isOverlayVisible(){return this.m_bOverlay}get isScrollingEnabled(){return this.m_bScrolling}get isScrollbarsEnabled(){return this.m_bScrollbars}get closeChildPanelsOnTap(){return"tap"===this.m_sCloseChildPanels}get closeChildPanelsOnStroke(){return"stroke"===this.m_sCloseChildPanels}get isApplicationRole(){return this.m_bApplicationRole}get isTouchDisabled(){return this.m_bTouchDisabled}assertUnattached(){if(this.isAttached)throw new Error("UI.layers.Configuration: The configuration is already used for an active layer. Cannot change property.")}update(){this.m_bUpdating||(this.m_bUpdating=!0,ee(this.m_pLayers,(e=>{e.configure()})),this.m_bUpdating=!1)}style(e){return this.assertUnattached(),this.m_pStyle=e,this}global(){return this.assertUnattached(),this.m_bGlobal=!0,this.m_bGlobalExplicit=!0,this}local(){return this.assertUnattached(),this.m_bGlobal=!1,this.m_bGlobalExplicit=!0,this}preferGlobal(){return this.assertUnattached(),this.m_bGlobalExplicit||(this.m_bGlobal=!0),this}preferLocal(){return this.assertUnattached(),this.m_bGlobalExplicit||(this.m_bGlobal=!1),this}visible(e=!0){return this.isAttached?e?this.show():this.hide():this.m_bVisible=e,this}show(){return this.m_bShow||(this.m_bShow=!0,this.update()),this}hide(){return this.m_bShow&&(this.m_bShow=!1,this.update()),this}alignHorizontal(e){switch(e){case"fill":return this.alignFillHorizontal();case"center":return this.alignCenterHorizontal();case"left":return this.alignLeft();case"right":return this.alignRight()}}alignFillHorizontal(){return this.m_nHorizontal=Fr.Fill,this.m_nWidth=0,this.update(),this}alignCenterHorizontal(){return this.m_nHorizontal=Fr.Center,this.update(),this}alignLeft(){return this.m_nHorizontal=Fr.Left,this.update(),this}alignRight(){return this.m_nHorizontal=Fr.Right,this.update(),this}alignVertical(e){switch(e){case"fill":return this.alignFillVertical();case"center":return this.alignCenterVertical();case"top":return this.alignTop();case"bottom":return this.alignBottom()}}alignFillVertical(){return this.m_nVertical=Fr.Fill,this.m_nHeight=0,this.update(),this}alignCenterVertical(){return this.m_nVertical=Fr.Center,this.update(),this}alignTop(){return this.m_nVertical=Fr.Top,this.update(),this}alignBottom(){return this.m_nVertical=Fr.Bottom,this.update(),this}left(e){return this.m_pSpacing.left=e,this.update(),this}top(e){return this.m_pSpacing.top=e,this.update(),this}right(e){return this.m_pSpacing.right=e,this.update(),this}bottom(e){return this.m_pSpacing.bottom=e,this.update(),this}width(t){return t=e.max(t,0),this.m_nWidth!==t&&(this.m_nWidth=t,this.m_nHorizontal===Fr.Fill&&(this.m_nHorizontal=Fr.Center),this.update()),this}minWidth(t){return t=D(t)?e.max(t,0):void 0,this.m_nWidthMin!==t&&(this.m_nWidthMin=t,this.update()),this}maxWidth(t){return t=D(t)?e.max(t,0):void 0,this.m_nWidthMax!==t&&(this.m_nWidthMax=t,this.update()),this}height(t){return t=e.max(t,0),this.m_nHeight!==t&&(this.m_nHeight=t,this.m_nVertical===Fr.Fill&&(this.m_nVertical=Fr.Center),this.update()),this}minHeight(t){return t=D(t)?e.max(t,0):void 0,this.m_nHeightMin!==t&&(this.m_nHeightMin=t,this.update()),this}maxHeight(t){return t=D(t)?e.max(t,0):void 0,this.m_nHeightMax!==t&&(this.m_nHeightMax=t,this.update()),this}widthThreshold(t,i){return this.assertUnattached(),this.m_nWidthThreshold=e.max(t,0),this.m_fnWidthThreshold=i,this}heightThreshold(t,i){return this.assertUnattached(),this.m_nHeightThreshold=e.max(t,0),this.m_fnHeightThreshold=i,this}animation(e){return this.assertUnattached(),this.m_pAnimation=e,this}layout(e){switch(this.assertUnattached(),e){case"none":this.m_nLayout=Ur.None;break;case"habc":this.m_nLayout=Ur.HABC;break;case"hcba":this.m_nLayout=Ur.HCBA;break;case"hbca":this.m_nLayout=Ur.HBCA;break;case"vabc":this.m_nLayout=Ur.VABC;break;case"vcba":this.m_nLayout=Ur.VCBA;break;case"vbca":this.m_nLayout=Ur.VBCA;break;default:this.m_nLayout=e}return this}focus(e=!0){return this.assertUnattached(),this.m_bFocus=e,this.m_bFocusExplicit=!0,this}preferFocus(){return this.assertUnattached(),this.m_bFocusExplicit||(this.m_bFocus=!0),this}autoActivate(e=!0){return this.assertUnattached(),this.m_bAutoActivate=e,this}capture(e=!0){return this.assertUnattached(),this.m_bCapture=e,this}overlay(e=!0){return this.assertUnattached(),this.m_bOverlay=e,this.m_bOverlayExplicit=!0,this}preferOverlay(){return this.assertUnattached(),this.m_bOverlayExplicit||(this.m_bOverlay=!0),this}scrolling(e={bounceHorizontal:"always",bounceVertical:"always"}){return this.assertUnattached(),this.m_bScrolling=!0,this.m_pScrollingProperties=e,this}scrollingProperties(e){return X(this.m_pScrollingProperties||{},{asset:e,native:!1,autoInitialize:!1})}scrollbars(e={bounceHorizontal:"always",bounceVertical:"always"}){return this.assertUnattached(),this.m_bScrollbars=!0,this.scrolling(this.m_pScrollbarsProperties=e)}scrollbarsProperties(e){return X(this.m_pScrollbarsProperties||this.m_pScrollingProperties||{},{asset:e,native:!1,autoInitialize:!1})}autoCloseChildPanels(e){return this.assertUnattached(),this.m_sCloseChildPanels=e,this}applicationRole(e=!0){return this.assertUnattached(),this.m_bApplicationRole=e,this}disableTouch(e=!0){return this.assertUnattached(),this.m_bTouchDisabled=e,this}rectangle(t,i,s=Ur.None){let o,n,r,a=!1;if(this.m_fnWidthThreshold){const e=t>this.m_nWidthThreshold?"above":t<this.m_nWidthThreshold?"below":"equal";e!==this.m_sWidthThreshold&&this.m_fnWidthThreshold(this,this.m_sWidthThreshold=e)}if(this.m_fnHeightThreshold){const e=i>this.m_nHeightThreshold?"above":i<this.m_nHeightThreshold?"below":"equal";e!==this.m_sHeightThreshold&&this.m_fnHeightThreshold(this,this.m_sHeightThreshold=e)}if(s!==Ur.None&&(this.m_nLayout=s,a=!0),o={left:a&&this.isHorizontalLayout?0:e.max(this.m_pSpacing.left,0),top:a&&this.isVerticalLayout?0:e.max(this.m_pSpacing.top,0),right:a&&this.isHorizontalLayout?0:e.max(this.m_pSpacing.right,0),bottom:a&&this.isVerticalLayout?0:e.max(this.m_pSpacing.bottom,0),width:void 0,height:void 0,visible:this.m_bShow},n=e.max(t-(o.left||0)-o.right,0),r=e.max(i-(o.top||0)-o.bottom,0),this.layerWidth>0||A(this.m_nWidthMax))switch(o.width=this.layerWidth>0?e.min(this.layerWidth,n):n,A(this.m_nWidthMin)&&(o.width=e.max(o.width,this.m_nWidthMin)),A(this.m_nWidthMax)&&(o.width=e.min(o.width,e.min(this.m_nWidthMax,n))),this.horizontalAlignment){case Fr.Center:o.left=(o.left||0)+e.floor((n-o.width)/2);break;case Fr.Right:o.left=t-o.width-o.right}if(this.layerHeight>0||A(this.m_nHeightMax))switch(o.height=this.layerHeight>0?e.min(this.layerHeight,r):r,A(this.m_nHeightMin)&&(o.height=e.max(o.height,this.m_nHeightMin)),A(this.m_nHeightMax)&&(o.height=e.min(o.height,e.min(this.m_nHeightMax,r))),this.verticalAlignment){case Fr.Center:o.top=(o.top||0)+e.floor((r-o.height)/2);break;case Fr.Bottom:o.top=i-o.height-o.bottom}return a&&(this.isHorizontalLayout&&(o.left=void 0,o.width=o.width||n),this.isVerticalLayout&&(o.top=void 0,o.height=o.height||r)),o}attach(e){return this.detach(e),this.m_pLayers.push(e),this}detach(e){for(let t=0;t<this.m_pLayers.length;t++)this.m_pLayers[t]===e&&(this.m_pLayers.splice(t,1),t--)}}class ta extends ai{constructor(e,t){super(e),this.m_nWait=0,this.m_bLoading=!0,this.m_bCalculate=!1,this.m_bCalculated=!1,this.m_bActivated=!1,this.m_bHover=!1,this.m_bClosing=!1,this.m_bDestroyed=!1,this.m_nType=t.type,this.m_pConfiguration=t.configuration.attach(this),this.m_fnCreate=t.layer,this.m_bVisible=this.configuration.isVisible,this.m_pLayers=new sa({parent:this,stylesheet:this.stylesheet,style:e.style&&e.style.applyToChildren&&J(e.style,this.configuration.layerStyle)||this.configuration.layerStyle})}static get app(){return oa.app}static whenShown(e){if(this.m_fnShown){const t=this.m_fnShown;this.m_fnShown=i=>{e(i),t(i)}}else this.m_fnShown=e}static whenClosed(e){if(this.m_fnClose){const t=this.m_fnClose;this.m_fnClose=i=>{e(i),t(i)}}else this.m_fnClose=e}get parent(){return this.matrix()}get layers(){return this.m_pLayers}get stylesheet(){return this.parent.stylesheet}get chain(){if(3===this.type){let e=this.parent.layer;for(;e;){if(2===e.type)return e;e=e.parent.layer}}else if(2===this.type)return this}static get configuration(){return new ea}get configuration(){return this.m_pConfiguration}set configuration(e){this.reconfigure(e)}get type(){return this.m_nType}get await(){return this.m_pAwait}get isActive(){return this.isFirst&&(!this.parent.layer||this.parent.layer.isActive)}get isLoading(){return this.m_bLoading}get isReady(){return!this.isLoading}get isDrawn(){return this.layers&&this.layers.isDrawn}get isCalculated(){return this.m_bCalculated&&!this.isDestroyed}get isVisible(){return this.m_bVisible}set isVisible(e){e?this.show(!1):this.hide()}get isActivated(){return this.m_bActivated}get hasFocus(){return!!this.m_pFocus&&this.m_pFocus.hasFocus}get isHovered(){return this.m_bHover}get isClosing(){return this.m_bClosing||this.isPopped}get isDestroyed(){return this.m_bDestroyed}get element(){return dr.assert(this.layers.element)}get context(){return dr.assert(this.layers.context)}get overlay(){return this.layers.overlay}get viewport(){return this.layers.viewport}get left(){return this.layers.left}get top(){return this.layers.top}get right(){return this.layers.right}get bottom(){return this.layers.bottom}get width(){return this.layers.width}get height(){return this.layers.height}get scroll(){return this.layers.scroll}get scrollbars(){return this.layers.scrollbars}get onCalculate(){return this.m_fnCalculate||(()=>{})}set onCalculate(e){this.m_fnCalculate=e,this.m_bCalculate&&pe(this.m_fnCalculate,this)}get onCalculated(){return this.m_fnCalculated||(()=>{})}set onCalculated(e){this.m_fnCalculated=e,this.isCalculated&&pe(this.m_fnCalculated,this)}get onReady(){return this.m_fnReady||(()=>{})}set onReady(e){this.m_fnReady=e,this.isLoading||this.isDestroyed||pe(this.m_fnReady,this)}hover(e){e!==this.m_bHover&&(this.m_bHover=e,ro((()=>{this.element.selector("hover",this.m_bHover)})),this.isLoading||this.onLayerHover())}panels(e){if(2===this.type){let t=this;for(;t.layers.each((e=>!(3!==e.type||e.isClosing||!e.isVisible||(t=e,0))));)pe(e,t)}else this.chain&&this.chain.panels(e)}layout(){const t=this.chain;if(t){let i,s,o=0,n=0,r=!0;t.panels((a=>{switch(t.configuration.panelLayout){case Ur.HABC:case Ur.HCBA:o+=a.width,n=e.min(t.width-o,0);break;case Ur.VABC:case Ur.VCBA:o+=a.height,n=e.min(t.height-o,0);break;case Ur.HBCA:case Ur.VBCA:if(i){const i=t.configuration.panelLayout===Ur.HBCA;o+=i?a.width:a.height,n=e.min((i?t.width:t.height)-o,0)}}r=r&&a.isCalculated,i=i||a,s=a})),r&&(s&&s!==this&&!s.layers.hasPanel&&s.configure(),ro((()=>t.panels((r=>{const a=r===i,l=r===s;switch(r.element.selector("first",a),r.element.selector("last",l),t.configuration.panelLayout){case Ur.HABC:r.element.left=n,n+=r.width;break;case Ur.HCBA:o-=r.width,r.element.left=o;break;case Ur.VABC:r.element.top=n,n+=r.height;break;case Ur.VCBA:o-=r.height,r.element.top=o;break;case Ur.HBCA:r.element.left=a?e.min(e.max(o-(r.scroll?r.scroll.shiftLeft:0),0),t.width):n,a||(n+=r.width);break;case Ur.VBCA:r.element.top=a?e.min(e.max(o-(r.scroll?r.scroll.shiftTop:0),0),t.height):n,a||(n+=r.height)}r.isCalculated&&r.update()})))))}3!==this.type&&this.update()}update(){ro((()=>{if(this.isCalculated&&!this.isClosing){const e=this.layers.firstItem,i=3===this.type;let s=this.index;if(!e||this.isActive&&5===e.type||e.update(),ee([Fr.Fill,Fr.Left,Fr.Top,Fr.Center,Fr.Right,Fr.Bottom],(e=>{this.element.selector(`horizontal-${t.lowercase(Fr[e])}`,!(i&&this.configuration.isHorizontalLayout||this.configuration.horizontalAlignment!==e)),this.element.selector(`vertical-${t.lowercase(Fr[e])}`,!(i&&this.configuration.isVerticalLayout||this.configuration.verticalAlignment!==e))})),(i||2===this.type)&&ee([Ur.HABC,Ur.HCBA,Ur.HBCA,Ur.VABC,Ur.VCBA,Ur.VBCA],(e=>{this.element.selector(`layout-${t.lowercase(Ur[e])}`,this.configuration.panelLayout===e)})),i){let e=0,t=this.parent.layer;for(;t&&3===t.type;)e++,s=t.index+e,t=t.parent.layer;if(0===s){const e=this.chain;if(e){const t=e.configuration.panelLayout;t!==Ur.HBCA&&t!==Ur.VBCA||(s=100)}}}switch(this.type){case 5:this.element.zIndex=wo.ZINDEX_FLOATING-s;break;case 4:case 6:this.element.zIndex=wo.ZINDEX_MODAL-s;break;default:this.element.zIndex=wo.ZINDEX_LAYERS-s}this.overlay&&(this.overlay.zIndex=wo.ZINDEX_MODAL-s)}})),this.updateActive()}updateActive(){this.isActive!==this.m_bActivated&&(this.m_bActivated=!this.m_bActivated,ro((()=>{this.element.selector("inactive",!this.m_bActivated),this.element.selector("active",this.m_bActivated)})),this.scrollbars&&!this.m_bActivated&&this.scrollbars.cancelHover(),this.isLoading||(this.m_bActivated?this.onLayerActivate():this.onLayerDeactivate()))}updateFocus(){this.hasFocus?(ta.m_pFocus=this,this.onLayerFocus(),4!==this.type&&6!==this.type&&this.activate()):(ta.m_pFocus===this&&(ta.m_pFocus=void 0),this.onLayerBlur())}onPush(e){this.layers&&(this.layers.draw((()=>{if(Kr.for({await:e=>pe(this.m_fnCreate,this,this.m_pAwait=e)||this.m_pWait,promise:e=>{this.m_pWait=void 0,this.m_pWaitConditions=void 0,this.m_pAwait=void 0,e.isAsynchronous&&this.parent.root.validate()}}),this.element.positionByTranslate3D=3===this.type,this.element.left=0,this.element.top=0,this.element.width=0,this.element.height=0,this.element.style([this.layers.style.layer?this.layers.style.layer.appearance:void 0,{contain:"strict",position:"absolute",boxSizing:"border-box",overflow:"hidden",visibility:"hidden",pointerEvents:"auto",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden",[So.selector("loading")]:this.layers.style.layer?this.layers.style.layer.loading:void 0,[So.selector("ready")]:J(this.layers.style.layer?this.layers.style.layer.ready:void 0,{visibility:"inherit"}),[So.selector("active")]:this.layers.style.layer?this.layers.style.layer.active:void 0,[So.selector("inactive")]:this.layers.style.layer?this.layers.style.layer.inactive:void 0,[So.selector("hover")]:this.layers.style.layer?this.layers.style.layer.hover:void 0,[So.selector("hide")]:J(this.layers.style.layer?this.layers.style.layer.hide:void 0,{visibility:"hidden"}),[So.selector("show")]:this.layers.style.layer?this.layers.style.layer.show:void 0,[So.selector("showing")]:this.layers.style.layer?this.layers.style.layer.showing:void 0,[So.selector("close")]:J(this.layers.style.layer?this.layers.style.layer.close:void 0,{visibility:"hidden"}),[So.selector("chain")]:J(this.layers.style.layer&&this.layers.style.layer.type?this.layers.style.layer.type.chain:void 0,{pointerEvents:"none"}),[So.selector("panel")]:X({[So.selectors("layout-habc","layout-hcba","layout-hbca")]:{transition:"left .2s ease-out"},[So.selectors("layout-vabc","layout-vcba","layout-vbca")]:{transition:"top .2s ease-out"},[So.selector("showing")]:{[So.selector("last")]:{transition:"none"}}},this.layers.style.layer&&this.layers.style.layer.type?this.layers.style.layer.type.panel:void 0),[So.selector("floating")]:this.layers.style.layer&&this.layers.style.layer.type?this.layers.style.layer.type.floating:void 0,[So.selector("modal")]:this.layers.style.layer&&this.layers.style.layer.type?this.layers.style.layer.type.modal:void 0,[So.selector("popup")]:this.layers.style.layer&&this.layers.style.layer.type?this.layers.style.layer.type.popup:void 0,[So.selector("horizontal-fill")]:this.layers.style.layer&&this.layers.style.layer.alignment&&this.layers.style.layer.alignment.horizontal?this.layers.style.layer.alignment.horizontal.fill:void 0,[So.selector("horizontal-left")]:this.layers.style.layer&&this.layers.style.layer.alignment&&this.layers.style.layer.alignment.horizontal?this.layers.style.layer.alignment.horizontal.left:void 0,[So.selector("horizontal-center")]:this.layers.style.layer&&this.layers.style.layer.alignment&&this.layers.style.layer.alignment.horizontal?this.layers.style.layer.alignment.horizontal.center:void 0,[So.selector("horizontal-right")]:this.layers.style.layer&&this.layers.style.layer.alignment&&this.layers.style.layer.alignment.horizontal?this.layers.style.layer.alignment.horizontal.right:void 0,[So.selector("vertical-fill")]:this.layers.style.layer&&this.layers.style.layer.alignment&&this.layers.style.layer.alignment.vertical?this.layers.style.layer.alignment.vertical.fill:void 0,[So.selector("vertical-top")]:this.layers.style.layer&&this.layers.style.layer.alignment&&this.layers.style.layer.alignment.vertical?this.layers.style.layer.alignment.vertical.top:void 0,[So.selector("vertical-center")]:this.layers.style.layer&&this.layers.style.layer.alignment&&this.layers.style.layer.alignment.vertical?this.layers.style.layer.alignment.vertical.center:void 0,[So.selector("vertical-bottom")]:this.layers.style.layer&&this.layers.style.layer.alignment&&this.layers.style.layer.alignment.vertical?this.layers.style.layer.alignment.vertical.bottom:void 0,[So.selector("layout-habc")]:this.layers.style.layer&&this.layers.style.layer.layout?this.layers.style.layer.layout.HABC:void 0,[So.selector("layout-hcba")]:this.layers.style.layer&&this.layers.style.layer.layout?this.layers.style.layer.layout.HCBA:void 0,[So.selector("layout-hbca")]:this.layers.style.layer&&this.layers.style.layer.layout?this.layers.style.layer.layout.HBCA:void 0,[So.selector("layout-vabc")]:this.layers.style.layer&&this.layers.style.layer.layout?this.layers.style.layer.layout.VABC:void 0,[So.selector("layout-vcba")]:this.layers.style.layer&&this.layers.style.layer.layout?this.layers.style.layer.layout.VCBA:void 0,[So.selector("layout-vbca")]:this.layers.style.layer&&this.layers.style.layer.layout?this.layers.style.layer.layout.VBCA:void 0,[So.selector("invisible")]:{opacity:0,pointerEvents:"none"}}],this.stylesheet),this.configuration.animationStyles){const e=this.configuration.animationStyles;e.layer&&this.element.style({[So.selector("ready")]:e.layer.ready,[So.selector("show")]:e.layer.show,[So.selector("hide")]:e.layer.hide,[So.selector("close")]:e.layer.close},this.stylesheet)}this.element.addSelector("loading"),this.element.addSelector("inactive"),this.element.selector("chain",2===this.type),this.element.selector("panel",3===this.type),this.element.selector("modal",4===this.type),this.element.selector("floating",5===this.type),6===this.type&&(this.element.addSelector("popup"),this.element.data("popup","yes")),this.configuration.isApplicationRole&&this.element.attribute("role","application"),this.scroll&&this.scroll.focusController?this.m_pFocus=this.scroll.focusController:this.configuration.isFocusEnabled&&(this.m_pFocus=Ar.on(this.element,this.element,"focus-on-stroke","no-auto-blur")),this.m_pFocus&&this.m_pFocus.hook("OnFocus","synchronous",(()=>this.updateFocus())),this.configuration.isAutoActivate&&4!==this.type&&6!==this.type?($r.on(this.element,(()=>{this.configuration.closeChildPanelsOnStroke&&this.closeChildPanels(),this.activate()}),!0,void 0,this.stylesheet),this.scroll&&this.scroll.hook("OnScrollActivate","framed",(()=>{this.activate()}))):this.configuration.closeChildPanelsOnStroke&&$r.on(this.element,(()=>this.closeChildPanels()),!0,void 0,this.stylesheet),this.configuration.closeChildPanelsOnTap&&Dr.single(this.element,(()=>this.closeChildPanels())),this.scroll&&this.scroll.hovering?this.scroll.hook("OnScrollHover","synchronous",(e=>{this.hover(e.scroll.isHovered)})):Lr.pointer(this.element,(e=>this.hover(e.isHovered))),this.configuration.isTouchDisabled&&xr.mode(this.context,"disable"),this.onLayerDraw()})),this.configure()),super.onPush(e)}onChange(e){this.update(),super.onChange(e)}onPop(e){this.destroy(),super.onPop(e)}onLayerCalculate(){this.emitHook("OnCalculate",{layer:this}),pe(this.m_fnCalculate,this)}onLayerCalculated(){this.emitHook("OnCalculated",{layer:this}),pe(this.m_fnCalculated,this)}onLayerReady(){this.emitHook("OnReady",{layer:this}),pe(this.m_fnReady,this)}onLayerResize(){this.emitHook("OnResize",{layer:this}),pe(this.onResize,this)}onLayerDraw(){this.emitHook("OnDraw",{layer:this}),pe(this.onDraw,this)}onLayerActivate(){this.emitHook("OnActivate",{layer:this}),pe(this.onActivate,this)}onLayerDeactivate(){this.emitHook("OnDeactivate",{layer:this}),pe(this.onDeactivate,this)}onLayerFocus(){this.emitHook("OnFocus",{layer:this}),pe(this.onFocus,this)}onLayerBlur(){this.emitHook("OnBlur",{layer:this}),pe(this.onBlur,this)}onLayerHover(){this.emitHook("OnHover",{layer:this}),pe(this.onHover,this)}onLayerBeforeHide(){this.emitHook("OnBeforeHide",{layer:this}),pe(this.onBeforeHide,this)}onLayerHide(){this.emitHook("OnHide",{layer:this}),pe(this.onHide,this)}onLayerBeforeShow(){if(this.emitHook("OnBeforeShow",{layer:this}),pe(this.onBeforeShow,this),3===this.type){const e=this.parent.layer,t=this.chain;e&&3===e.type&&e.onLayerBeforeShowPanel(this),t&&t.onLayerBeforeShowPanel(this)}ta.m_fnShown&&ta.m_fnShown(this)}onLayerShow(){if(this.emitHook("OnShow",{layer:this}),pe(this.onShow,this),3===this.type){const e=this.parent.layer,t=this.chain;e&&3===e.type&&e.onLayerShowPanel(this),t&&t.onLayerShowPanel(this)}}onLayerClose(){if(this.emitHook("OnClose",{layer:this}),pe(this.onClose,this),3===this.type){const e=this.parent.layer,t=this.chain;e&&3===e.type&&e.onLayerClosePanel(this),t&&t.onLayerClosePanel(this)}ta.m_fnClose&&ta.m_fnClose(this)}onLayerBeforeShowPanel(e){this.emitHook("OnBeforeShowPanel",{layer:this,panel:e}),pe(this.onBeforeShowPanel,this,e)}onLayerShowPanel(e){this.emitHook("OnShowPanel",{layer:this,panel:e}),pe(this.onShowPanel,this,e)}onLayerClosePanel(e){this.emitHook("OnClosePanel",{layer:this,panel:e}),pe(this.onClosePanel,this,e)}onLayerDestroy(){pe(this.onDestroy,this),this.emitHook("OnDestroy",{layer:this})}onLayerZoomEnd(){3===this.type&&this.layers.count>0&&this.scroll&&this.layout()}validate(){this.isLoading&&this.isCalculated&&!this.m_pAwait&&(this.m_bLoading=!1,ta.m_pFocus&&ta.m_pFocus.m_pFocus&&ta.m_pFocus.m_pFocus.blur(),this.onLayerReady(),ro((()=>{this.element.removeSelector("loading"),this.isVisible&&(this.onLayerBeforeShow(),this.element.addSelector("showing"),this.element.animateSelector("ready",(()=>ro((()=>{this.onLayerShow(),this.element.removeSelectorSafe("showing")}))))),this.overlay&&(this.overlay.removeSelector("loading"),this.isVisible&&this.overlay.addSelector("ready"))}))),this.updateActive()}configure(){if(this.element&&this.parent.isCalculated){let e;3===this.type&&(e=this.chain),this.layers.rectangle(e?this.configuration.rectangle((this.layers.hasPanel?this.width:0)||e.width,(this.layers.hasPanel?this.height:0)||e.height,e.configuration.panelLayout):this.configuration.rectangle(this.parent.width,this.parent.height))}}reconfigure(e){this.m_pConfiguration.detach(this),this.m_pConfiguration=e.attach(this),this.configure()}calculate(){this.m_bCalculate||(this.m_bCalculate=!0,this.onLayerCalculate())}calculated(e){this.m_bCalculated||(this.m_bCalculated=!0,this.onLayerCalculated()),this.layout(),this.isLoading&&!this.m_pAwait&&this.parent.root.validate(),e&&this.onLayerResize()}wait(e){return!!this.m_pAwait&&(this.m_pWait=this.m_pAwait,this.m_pAwait.condition=!1,this.m_nWait++,e&&!e()&&(this.m_pWaitConditions||(this.m_pWaitConditions=[])).push(e),!0)}done(){this.m_pAwait&&(this.m_nWait>0&&this.m_nWait--,0===this.m_nWait&&(this.m_pWaitConditions&&ue(this.m_pWaitConditions,(e=>!e()))||(this.m_pAwait.condition=!0),this.m_pAwait.done()))}createLayer(e,t=ta.configuration){return this.layers.createLayer(e,t)}createChild(e,t=ta.configuration){return this.layers.createChild(e,t)}createChain(e=ta.configuration){return this.layers.createChain(e)}createPanel(e,t=ta.configuration){return this.layers.createPanel(e,t)}createModal(e,t=ta.configuration){return this.layers.createModal(e,t)}createFloating(e,t=ta.configuration){return this.layers.createFloating(e,t)}createPopup(e,t=ta.configuration){return this.layers.createPopup(e,t)}component(e,t,i){return this.layers.component(e,t,i)}activate(){return!this.isPopped&&!this.isActive&&(this.parent.layer&&this.parent.layer.activate(),this.index>0?this.index=0:this.update(),!0)}deactivate(){return this.isActive&&this.parent&&this.parent.each((e=>{const t=e!==this&&e.isVisible?e:void 0;return!!t&&(t.index=0,!0)}))}focus(){return!(this.isPopped||!this.m_pFocus||(this.m_pFocus.focus(),0))}blur(){return!(this.isPopped||!this.m_pFocus||(this.m_pFocus.blur(),0))}hide(e=!1){this.isVisible&&(this.m_bVisible=!1,this.layers.hide(),this.deactivate(),!this.isLoading&&this.isCalculated&&(this.onLayerBeforeHide(),e?this.onLayerHide():ro((()=>{this.element.animateSelector("hide",(()=>this.onLayerHide()),!1,Wr.invalidate(this.element,(()=>this.m_bVisible),!0)?"frame":"synchronous"),this.element.removeSelector("show"),this.overlay&&(this.overlay.addSelector("hide"),this.overlay.removeSelector("show"))})),3===this.type&&this.layout()))}show(e=!0){this.isVisible||(this.m_bVisible=!0,this.layers.show(),!this.isLoading&&this.isCalculated&&(this.onLayerBeforeShow(),ro((()=>{this.element.animateSelector("show",(()=>{this.onLayerShow(),this.element.removeSelectorSafe("showing"),Wr.invalidate(this.element,(()=>this.m_bVisible))})),this.element.addSelector("showing"),this.element.addSelector("ready"),this.element.removeSelector("hide"),this.overlay&&(this.overlay.addSelector("show"),this.overlay.addSelector("ready"),this.overlay.removeSelector("hide"))})),3===this.type&&this.layout(),(e||1===this.parent.count)&&this.activate()))}close(e=!1){this.m_bClosing||(this.m_bClosing=!0,this.layers.close(),!this.isLoading&&this.isCalculated?(e||ro((()=>{this.element.animateSelector("close",(()=>this.destroy()),!1,Wr.invalidate(this.element,(()=>!1),!0)?"frame":"synchronous"),this.overlay&&this.overlay.addSelector("close")})),3===this.type&&this.layout(),this.onLayerClose()):this.destroy())}closeChildPanels(){let e=this;for(;e&&3!==e.type&&2!==e.type;)e=e.parent.layer;e&&e.layers.each((e=>3===e.type&&(e.close(),!0)))}destroy(){this.isPopped?this.isDestroyed||(this.m_bClosing||(this.m_bClosing=!0,this.onLayerClose()),this.m_bCalculated=!1,this.m_bVisible=!1,this.m_bDestroyed=!0,this.m_pWait=void 0,this.m_pWaitConditions=void 0,this.m_pConfiguration.detach(this),this.m_pAwait&&(this.m_pAwait.cancel(),this.m_pAwait=void 0),3===this.type&&this.layout(),this.onLayerDestroy(),this.layers.destroy(),super.destroy()):this.pop()}}class ia{constructor(e=ia.configuration){this.m_pConfiguration=e}static get configuration(){return ta.configuration}get layer(){return this.m_pLayer}get configuration(){return this.m_pConfiguration}wait(e){return this.layer.wait(e)}done(){this.layer.done()}render(e,t){return this.m_pLayer=e,this.onRender(e,t)}}class sa extends ri{constructor(e={}){super(ta),this.m_bInitialized=!1,this.m_bDrawn=!1,this.m_pGlobals=[],this.m_nSequence=0,this.m_sNotification="",this.m_pStylesheet=e.stylesheet||oa.stylesheet,this.m_pStyle=e.style||oa.style||{},e.parent instanceof ta?this.m_pLayer=e.parent:(this.m_pStyle.applyToChildren=Q(this.m_pStyle.applyToChildren,!0),this.m_pElement=dr.create("div",void 0,e.parent,void 0,{position:e.parent?"absolute":"fixed",boxSizing:"border-box",overflow:"hidden",left:0,top:0,right:0,bottom:0,pointerEvents:"none"},this.stylesheet),this.calculate())}get root(){let e=this;for(;e.layer;)e=e.layer.parent;return e}get stylesheet(){return this.m_pStylesheet}get style(){return this.m_pStyle}get isInitialized(){return this.m_bInitialized}get isDrawn(){return this.m_bDrawn}get isCalculated(){return this.m_pRectangle instanceof _i}get isCalculating(){return!this.isCalculated||this.each((e=>!e.isDestroyed&&(e.await instanceof Kr||e.layers.isCalculating)))}get isInitializing(){return this.scroll instanceof Zr&&!this.scroll.isInitialized||this.each((e=>e.layers.isInitializing))}get isDestroyed(){return!z(this.m_pGlobals)}get layer(){return this.m_pLayer}get active(){return this.firstItem}get element(){return this.m_pElement}get context(){return this.m_pContext||this.element}get overlay(){return this.m_pOverlay}get scroll(){return this.m_pScroll}get scrollbars(){return this.m_pScroll instanceof Wr?this.m_pScroll:void 0}get viewport(){return this.m_pRectangle}get left(){return this.m_pRectangle?this.m_pRectangle.left:0}get top(){return this.m_pRectangle?this.m_pRectangle.top:0}get right(){return this.m_pRectangle?this.m_pRectangle.right:0}get bottom(){return this.m_pRectangle?this.m_pRectangle.bottom:0}get width(){return this.m_pRectangle?this.m_pRectangle.roundedWidth:0}get height(){return this.m_pRectangle?this.m_pRectangle.roundedHeight:0}get hasPanel(){return this.each((e=>3===e.type&&!e.isClosing&&e.isVisible))}calculate(){this.layer&&!this.layer.parent.isCalculated||(this.m_nSequence=no((()=>{if(this.m_nSequence=0,!this.isDestroyed&&this.element){const e=this.layer&&2!==this.layer.type?this.element.rectangle:this.element.rectangleClient;if(e.roundedWidth!==this.width||e.roundedHeight!==this.height||this.layer&&3===this.layer.type){const t=this.m_bInitialized;this.m_pRectangle=e,this.m_bInitialized=!0,this.each((e=>e.configure())),this.layer&&this.layer.calculated(t),t&&(this.scroll&&this.scroll.update(!0),this.onLayersResize())}}}),this.m_nSequence),this.layer&&this.layer.calculate())}make(e,t,i,s=!0){if(this.isDestroyed)return;if(3===e){if(t.isGlobal)return;if(!this.layer)return;if(2!==this.layer.type&&3!==this.layer.type){let o=this.layer.parent.layer;for(;o;){if(2===o.type||3===o.type){const n=o.layers.make(e,t,i,s);if(n)return this.layer.hook("OnClose","synchronous",(()=>n.close()),n),n.hook("OnDestroy","synchronous",(()=>{this.layer&&this.layer.unhookContext(n)})),n}o=o.parent.layer}return}}if(t.isGlobal&&this.layer){const o=this.layer.parent.make(e,t,i,!1);return s&&o&&this.m_pGlobals.push(o),o}const o=this.insertToMatrix({type:e,configuration:t,layer:i});return 2!==e&&1!==e||(o.hook("OnBeforeShow","synchronous",(()=>{this.scroll&&this.scroll.disable(),this.scrollbars&&this.scrollbars.hide(!0)}),this),o.hook("OnClose","synchronous",(()=>{this.scroll&&this.scroll.enable(),this.scrollbars&&this.scrollbars.hide(!1)}),this),o.hook("OnDestroy","synchronous",(()=>o.unhookContext(this)),this)),this.each((e=>{3===e.type&&e!==o&&e.destroy()})),o}onLayersResize(){this.emitHook("OnResize",{layers:this}),pe(this.onResize,this)}onLayersClose(){this.emitHook("OnClose",{layers:this}),pe(this.onClose,this)}onLayersDestroy(){this.emitHook("OnDestroy",{layers:this}),pe(this.onDestroy,this)}init(){this.scroll&&this.scroll.init(),this.each((e=>e.layers.init()))}validate(){let e=!this.layer;this.isCalculating||(this.isInitializing?this.init():(this.layer&&this.layer.validate(),this.each((e=>e.layers.validate())),e=!1)),e&&this.each((e=>{!e.configuration.isGlobal||4!==e.type&&6!==e.type||e.layers.validate()}))}draw(e){if(this.layer&&!this.m_bInitialized&&!this.m_pElement){let t=this.layer.parent;if(3===this.layer.type){const e=this.layer.chain;t=e?e.layers:void 0}t&&t.element&&(4!==this.layer.type&&6!==this.layer.type||(this.m_pOverlay=t.element.create("div",(e=>{if(this.layer&&this.layer.configuration.animationStyles){const t=this.layer.configuration.animationStyles;t.overlay&&e.style({[So.selector("ready")]:t.overlay.ready,[So.selector("show")]:t.overlay.show,[So.selector("hide")]:t.overlay.hide,[So.selector("close")]:t.overlay.close},this.stylesheet)}e.selector("visible",Q(this.layer&&this.layer.configuration.isOverlayVisible)),e.addSelector("loading"),this.layer&&6===this.layer.type?this.layer.configuration.isCapturingEnabled?$r.on(e,(()=>{this.layer&&this.layer.close()}),!1,void 0,this.stylesheet):(xr.registerNotification(this.m_sNotification=`layer-${this.uniqueId}`,(e=>{if((9&e&&xr.touches>0||64&e)&&!ue(xr.points,(e=>{let t=e.target.HTMLElement;for(;t;){if("yes"===on.data(t,"popup"))return!0;t=t.parentElement}return!1}))){if(64&e)return!1;this.layer&&this.layer.close()}return!0})),e.pointerEvents=!1):xr.mode(e,"void")}),{position:"absolute",left:0,top:0,right:0,bottom:0,overflow:"hidden",visibility:"hidden",zIndex:wo.ZINDEX_MODAL,pointerEvents:"auto",transform:"translate3d(0, 0, 0)",backfaceVisibility:"hidden",[So.selector("visible")]:this.style.overlay?this.style.overlay.appearance:void 0,[So.selector("loading")]:this.style.overlay?this.style.overlay.loading:void 0,[So.selector("ready")]:J(this.style.overlay?this.style.overlay.ready:void 0,{visibility:"inherit"}),[So.selector("hide")]:J(this.style.overlay?this.style.overlay.hide:void 0,{visibility:"hidden"}),[So.selector("show")]:this.style.overlay?this.style.overlay.show:void 0,[So.selector("close")]:J(this.style.overlay?this.style.overlay.close:void 0,{visibility:"hidden"})},this.stylesheet)),t.element.create("div",(t=>{if(this.layer){if(this.m_pElement=t,this.layer.configuration.isScrollingEnabled){const e=this.layer.configuration.scrollbarsProperties(t);e.stylesheet=e.stylesheet||this.stylesheet,e.style=e.style||this.style.scrollbars,this.m_pContext=t.create("div"),this.m_pScroll=(this.layer.configuration.isScrollbarsEnabled?Wr:Zr).on(e),this.scroll&&(this.scroll.onInit=()=>this.root.validate(),this.scroll.onViewport=()=>this.viewport,this.scroll.onDimensions||(this.scroll.onDimensions=()=>pe(this.layer?this.layer.onDimensions:void 0,this.layer)),3===this.layer.type&&this.scroll.hook("OnZoomEnd","framed",(()=>{this.layer&&this.layer.onLayerZoomEnd()})))}pe(e),this.m_bDrawn=!0}})))}}rectangle(e){e&&!this.isDestroyed&&ro((()=>{this.element&&(this.element.selector("invisible",!e.visible),e.visible?(this.element.width=A(e.width)?e.width:"auto",this.element.height=A(e.height)?e.height:"auto",A(e.width)?(A(e.left)&&(this.element.left=e.left),this.element.right="auto"):(this.element.left=G(e.left),this.element.right=e.right),A(e.height)?(A(e.top)&&(this.element.top=e.top),this.element.bottom="auto"):(this.element.top=G(e.top),this.element.bottom=e.bottom)):(this.element.width=1,this.element.height=1,this.element.left=0,this.element.top=0,this.element.right="auto",this.element.bottom="auto"),this.calculate())}),!this.element||!this.element.isInDOM)}update(){this.isInitialized&&this.calculate()}createLayer(e,t=ta.configuration){return this.make(0,t,e)}createChild(e,t=ta.configuration){return this.make(1,t,e)}createChain(e=ta.configuration){return this.make(2,e)}createPanel(e,t=ta.configuration){return this.make(3,t,e)}createModal(e,t=ta.configuration){return this.make(4,t.preferGlobal().preferOverlay().preferFocus(),e)}createFloating(e,t=ta.configuration){return this.make(5,t,e)}createPopup(e,t=ta.configuration){return this.make(6,t.preferGlobal().preferFocus(),e)}component(e,t,i){let s=0;switch(t){case"child":s=1;break;case"modal":s=4;break;case"floating":s=5;break;case"panel":s=3;break;case"popup":s=6}switch(e instanceof ia||(e=new e),i){case"global":e.configuration.global();break;case"local":e.configuration.local()}return this.make(s,e.configuration,((t,i)=>e.render(t,i))),e}hide(){this.each((e=>e.hide(!0))),ee(this.m_pGlobals,(e=>e.hide()))}show(){this.each((e=>e.show())),ee(this.m_pGlobals,(e=>e.show()))}close(){this.each((e=>{let t=!!this.layer;if(3===e.type){const i=e.chain;i&&!i.isClosing&&(t=!1)}e.close(t)})),ee(this.m_pGlobals,(e=>e.close())),this.onLayersClose()}destroy(){lo(this.m_nSequence),this.isDestroyed||(""!==this.m_sNotification&&(xr.unregisterNotification(this.m_sNotification),this.m_sNotification=""),this.each((e=>e.destroy())),ee(this.m_pGlobals,(e=>e.destroy())),this.onLayersDestroy(),this.m_pGlobals=[],this.m_pLayer=void 0,this.m_pRectangle=void 0,this.m_pContext=void 0,this.m_pScroll&&(this.m_pScroll.destroy(),this.m_pScroll=void 0),this.m_pElement&&(this.m_pElement.destroy(),this.m_pElement=void 0),this.m_pOverlay&&(this.m_pOverlay.destroy(),this.m_pOverlay=void 0),super.destroy())}}class oa extends sa{constructor(e={}){super(e)}static get app(){if(!this.m_pApplication){const e=()=>{this.m_pApplication&&this.m_pApplication.update()};this.m_pApplication=new oa,go.attachListener(window,"resize",(()=>e()),void 0,this),go.attachListener(window,"orientationchange",(()=>e()),void 0,this),this.m_pApplication.hook("OnDestroy","synchronous",(()=>{go.detachListener(window,"resize",this),go.detachListener(window,"orientationchange",this),this.m_pApplication=void 0}))}return this.m_pApplication}update(){this.m_pUpdate=this.m_pUpdate||new tt((()=>super.update()),e.max(100,100)),this.m_pUpdate.invoke()}destroy(){this.m_pUpdate&&(this.m_pUpdate.cancel(),this.m_pUpdate=void 0),super.destroy()}}function na(e="0.2s",...t){return X({"@keyframes":{from:{visibility:"visible",opacity:0},to:{visibility:"visible",opacity:1}},animationDuration:e},...t)}function ra(e="0.2s",...t){return X({"@keyframes":{from:{visibility:"visible",opacity:1},to:{visibility:"visible",opacity:0}},animationDuration:e},...t)}function aa(e="0.2s",...t){return X({"@keyframes":{from:{visibility:"visible",opacity:0,transform:"scale(2)"},to:{visibility:"visible",opacity:1,transform:"scale(1)"}},animationDuration:e},...t)}function la(e="0.2s",...t){return X({"@keyframes":{from:{visibility:"visible",opacity:1,transform:"scale(1)"},to:{visibility:"visible",opacity:0,transform:"scale(2)"}},animationDuration:e},...t)}function ca(e="0.2s",...t){return X({"@keyframes":{from:{visibility:"visible",opacity:0,transform:"scale(0.7)"},to:{visibility:"visible",opacity:1,transform:"scale(1)"}},animationDuration:e},...t)}function ua(e="0.2s",...t){return X({"@keyframes":{from:{visibility:"visible",opacity:1,transform:"scale(1)"},to:{visibility:"visible",opacity:0,transform:"scale(0.7)"}},animationDuration:e},...t)}function ha(e="0.3s",...t){return X({"@keyframes":{"0%":{transform:"scale3d(1, 1, 1)"},"50%":{transform:"scale3d(1.05, 1.05, 1.05)"},"100%":{transform:"scale3d(1, 1, 1)"}},animationDuration:e},...t)}oa.stylesheet=So.app,function(e){e.Fade={layer:{ready:na(),show:na(),hide:ra(),close:ra()},overlay:{ready:na(),show:na(),hide:ra(),close:ra()}},e.Zoom={layer:{ready:ca(),show:ca(),hide:ua(),close:ua()},overlay:{ready:na(),show:na(),hide:ra(),close:ra()}},e.Fall={layer:{ready:aa(),show:aa(),hide:la(),close:la()},overlay:{ready:na(),show:na(),hide:ra(),close:ra()}}}(Br||(Br={})),function(e){e[e.Layer=0]="Layer",e[e.Child=1]="Child",e[e.Chain=2]="Chain",e[e.Panel=3]="Panel",e[e.Modal=4]="Modal",e[e.Floating=5]="Floating",e[e.Popup=6]="Popup"}(Yr||(Yr={}));var da,pa=Object.freeze({__proto__:null,Layers:oa,Layer:ta,LayerConfiguration:ea,get LayerAnimations(){return Br},LayerComponent:ia,component:function(e,t){return(i,s,o)=>{if(!N(o.value))throw new Error("Layers: Cannot use the @component decorator on properties.");{const s=i.render;i.render=function(i,n){const r=this;if(r instanceof ia&&i instanceof ta)return i.hook(e,t||"synchronous",(()=>o.value.call(r))),s.call(r,i,n)}}}},get LayerAlignment(){return Fr},get LayerLayouts(){return Ur},get LayerTypes(){return Yr}});class ma{constructor(t,i={},s){this.m_sState="initializing",this.m_nSequence=0,this.m_nHover=0,this.m_nAction=0,this.m_bDestroyed=!1,this.m_pOptions=t||[],this.m_pStylesheet=i.stylesheet||ga.stylesheet,this.m_pStyle=i.style||ga.style||{},this.m_pParent=i.parent||ga.parent,this.m_pAncestor=s,this.m_nMinWidth=e.max(G(i.minWidth,this.m_pStyle.minWidth),0),this.m_nMaxWidth=e.max(G(i.maxWidth,this.m_pStyle.maxWidth),0),this.m_bDelegateWidths=Q(i.delegateWidths,this.m_pStyle.delegateWidths),this.m_bOverlay=Q(i.overlay),this.m_bCapture=Q(i.capture),this.m_bModal=Q(i.modal),this.m_bAutoFocus=Q(i.autoFocus,!0),this.m_bDestroyOnClose=Q(i.destroyOnClose,!0),this.onOpen=i.onOpen,this.onClose=i.onClose,this.onClosing=i.onClosing,this.onClosed=i.onClosed,this.onDestroy=i.onDestroy,ma.initialize()}static get root(){return this.m_pRoot}static set root(e){this.m_pRoot=e,e?(go.attachListener(window,"resize",(()=>ga.close()),void 0,this),go.attachListener(window,"orientationchange",(()=>ga.close()),void 0,this),xr.registerNotification("menu",(e=>{if(ma.m_bTapped)return!1;if((9&e&&xr.touches>0||64&e)&&!ue(xr.points,(e=>{let t=e.target.HTMLElement;for(;t;){if("yes"===on.data(t,"menu"))return!0;t=t.parentElement}return!1}))){if(64&e)return!1;ga.close(!0)}return!0}))):(go.detachListener(window,"resize",this),go.detachListener(window,"orientationchange",this),xr.unregisterNotification("menu"),this.m_pFocus=void 0)}static initialize(){this.m_bInitialized||(ta.whenShown((()=>ga.close())),ta.whenClosed((()=>ga.close())),this.m_bInitialized=!0)}get rootMenu(){return ma.root}set rootMenu(e){ma.root=e}get focusedMenu(){return ma.m_pFocus}set focusedMenu(e){ma.m_pFocus=e}get options(){return this.m_pOptions}get stylesheet(){return this.m_pStylesheet}get style(){return this.m_pStyle}get parent(){return this.m_pParent}get isDrawn(){return this.m_pMenu instanceof dr&&this.m_pContainer instanceof dr}get isDestroyed(){return this.m_bDestroyed}get isOpen(){return this.isDrawn&&"ready"===this.m_sState}get isSubmenu(){return this.m_pAncestor instanceof ma}get isHovered(){return this.m_pMenu instanceof dr&&this.m_pMenu.hasSelector("hover")}get opened(){return ue(this.options,(e=>e.isOpen))}get minWidth(){return this.m_nMinWidth}get maxWidth(){return this.m_nMaxWidth}get minSubmenuWidth(){return this.m_bDelegateWidths?this.minWidth:0}get maxSubmenuWidth(){return this.m_bDelegateWidths?this.maxWidth:0}get tappedOption(){return this.m_pTappedOption}get isOptionTapped(){return!!this.m_pTappedOption}reset(){lo(this.m_nSequence),this.rootMenu===this&&(this.rootMenu=void 0),this.m_sState="initializing",this.m_pContainer=void 0,this.m_pScroll=void 0,this.m_pHover=void 0,this.m_nHover=_e(this.m_nHover),this.m_nAction=Ae(this.m_nAction),this.m_pMenu&&(this.m_pMenu.destroy(),this.m_pMenu=void 0),this.m_pOverlay&&(this.m_pOverlay.destroy(),this.m_pOverlay=void 0)}draw(){return this.m_sState="drawing",!this.isDestroyed&&P(this.options)>0&&(!this.isSubmenu&&(this.m_bOverlay||this.m_bCapture||this.m_bModal)&&(this.m_pOverlay=this.m_pOverlay||dr.create("div",(e=>{e.data("menu","yes"),this.m_bCapture?$r.on(e,(()=>ga.close(!0)),!1,void 0,this.stylesheet):this.m_bModal?xr.mode(e,"void"):e.pointerEvents=!1}),this.m_pParent,void 0,[{"*":{webkitTouchCallout:"none",webkitTapHighlightColor:"transparent",touchAction:"none",textRendering:"optimizeLegibility",userSelect:"none",boxSizing:"border-box",cursor:"default","&:focus":{outline:"none"}},"input[type='text']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='password']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='email']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='search']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},textarea:{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}}},this.m_bOverlay&&this.style.overlay?this.style.overlay.appearance:void 0,{position:"absolute",contain:"strict",left:0,top:0,right:0,bottom:0,zIndex:wo.ZINDEX_MENU,visibility:"hidden",opacity:0,[So.selector("open")]:J(this.style.overlay?this.style.overlay.open:void 0,{visibility:"visible",opacity:1}),[So.selector("close")]:J(this.style.overlay?this.style.overlay.close:void 0,{opacity:0})}],this.stylesheet)),this.m_pMenu=this.m_pMenu||dr.create("div",(e=>{e.attribute("role","menu"),e.data("menu","yes"),e.selector("submenu",this.isSubmenu),e.create("nav",(t=>{this.m_pContainer=t,t.create("ul",(e=>{const t=se(this.options,((e,t)=>e+(t.isInteractable?1:0)),0)||0;let i=0;ee(this.options,(s=>{e.create(s.elementType,(e=>{s.draw(this,e),s.isInteractable&&(i++,e.attribute("role","menuitem"),e.attribute("aria-posinset",`${i}`),e.attribute("aria-setsize",`${t}`)),Lr.pointer(e,(e=>this.hover(s,e.isHovered))),s.canOpen?$r.on(e,(e=>{e.isTouch&&!Tr.isKeyDown&&this.tap(s)}),!1,void 0,this.stylesheet):Dr.single(e,(()=>this.tap(s)),void 0,void 0,void 0,this.stylesheet)}))}))})),Lr.pointer(t,void 0,(()=>e.addSelectorSafe("hover")),(()=>{e.removeSelectorSafe("hover"),this.hover(void 0,!1)})),this.isSubmenu||(this.m_pKeyboard=Tr.local(t,(e=>{if(!this.focusedMenu||ma.m_bTapped||e.hasModifiers)return!0;switch(e.key){case"Escape":this.focusedMenu.close();break;case"Tab":ga.close();break;case"ArrowLeft":this.focusedMenu!==this.rootMenu&&this.focusedMenu.close();break;case"Enter":case"ArrowRight":this.enter("ArrowRight"===e.key);break;case"ArrowUp":this.shift("up");break;case"ArrowDown":this.shift("down")}return!0}),"keydown"))}))}),this.m_pParent,void 0,[{"*":{webkitTouchCallout:"none",webkitTapHighlightColor:"transparent",touchAction:"none",textRendering:"optimizeLegibility",userSelect:"none",boxSizing:"border-box",cursor:"default","&:focus":{outline:"none"}},"input[type='text']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='password']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='email']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='search']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},textarea:{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}}},this.style.menu?this.style.menu.outer:void 0,{display:"block",contain:"content",position:"absolute",boxSizing:"border-box",visibility:"hidden",opacity:0,zIndex:wo.ZINDEX_MENU,backgroundRepeat:"no-repeat","> nav":J(this.style.menu?this.style.menu.inner:void 0,{overflow:"hidden","> ul":{margin:0,padding:0,listStyleType:"none","> li":{display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"default"},"> a":{display:"block",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",cursor:"default",textDecoration:"none","&:hover":{textDecoration:"none"}}},[So.selector("scroll-up")]:{"> nav:nth-of-type(1)":{visibility:"visible",opacity:1}},[So.selector("scroll-down")]:{"> nav:nth-of-type(2)":{visibility:"visible",opacity:1}}}),[So.selector("center")]:this.style.menu?this.style.menu.center:void 0,[So.selector("context")]:this.style.menu?this.style.menu.context:void 0,[So.selector("left")]:this.style.menu?this.style.menu.left:void 0,[So.selector("right")]:this.style.menu?this.style.menu.right:void 0,[So.selector("top")]:this.style.menu?this.style.menu.top:void 0,[So.selector("bottom")]:this.style.menu?this.style.menu.bottom:void 0,[So.selector("open")]:J(this.style.menu?this.style.menu.open:void 0,{visibility:"inherit",opacity:1}),[So.selector("close")]:J(this.style.menu?this.style.menu.close:void 0,{opacity:0}),[So.selector("submenu")]:this.style.menu?this.style.menu.submenu:void 0,[So.selector("hover")]:this.style.menu?this.style.menu.hover:void 0}],this.stylesheet),this.isDrawn)}hover(e,t){Tr.isKeyDown||((t=!ma.m_bTapped&&this.isHovered&&(!this.m_pScroll||!this.m_pScroll.isScrolling)&&t)&&e?this.m_pHover=e:e&&this.m_pHover!==e||(this.m_pHover=void 0),this.m_nHover=_e(this.m_nHover),this.m_nAction=Ae(this.m_nAction),this.isDrawn&&(this.m_nHover=ke((()=>{if(this.m_nHover=0,this.isDrawn){const e=this.opened;let t=e;ee(this.options,(i=>{const s=!(this.m_pHover!==i||this.m_pScroll&&this.m_pScroll.isScrolling);s&&!i.isDisabled&&i.canOpen&&(t=void 0,i.isOpen||(this.m_nAction=De((()=>{i.open()}),100))),i.isHovered=s,s||(this.m_pHover||e!==i?i.isSelected=!1:(t=void 0,this.m_nHover=ke((()=>{i.isSelected=!0}))))})),t&&(this.m_nAction=De((()=>{t&&t.close(!0)}),500))}}))))}select(e){this.m_pHover=e,e.isHovered=!0,this.m_pScroll&&e.element&&this.m_pScroll.scrollToAsset(e.element,!1)}tap(e){if(!ma.m_bTapped){const t=this.opened;t&&t!==e&&t.tap(),this.m_pHover&&this.m_pHover!==e&&(this.m_pHover.isHovered=!1),e&&!e.isDisabled&&(e.closeOnTap&&e.element?(ma.m_bTapped=!0,this.m_pTappedOption=e,ma.root&&(ma.root.m_pTappedOption=e),this.m_pScroll&&(this.m_pScroll.isDisabled=!0),e.element.animateSelector("tapped",(()=>{ga.close(!0,(()=>{e.tap()}))}))):e.tap())}}enter(e){if(this.focusedMenu&&this.focusedMenu.m_pHover&&(!e||this.focusedMenu.m_pHover.canOpen)&&(this.focusedMenu.tap(this.focusedMenu.m_pHover),this.focusedMenu.m_pHover.canOpen)){const e=this.focusedMenu;Re((()=>{if(this.focusedMenu&&this.focusedMenu!==e){const e=ue(this.focusedMenu.options,(e=>!e.isDisabled&&e instanceof Xr));e&&this.focusedMenu.select(e)}}))}}shift(e){let t,i,s;if(this.focusedMenu){if(ee(this.focusedMenu.options,(e=>{!e.isDisabled&&e instanceof Xr&&(t=t||e,i=e)})),this.focusedMenu.m_pHover){let o,n=!1;ee(this.focusedMenu.options,(t=>{n&&"down"===e&&!s&&!t.isDisabled&&t instanceof Xr&&(s=t),!n&&this.focusedMenu&&t===this.focusedMenu.m_pHover&&(n=!0,"up"===e&&(s=o||i)),!t.isDisabled&&t instanceof Xr&&(o=t)})),s||"down"!==e||(s=t)}else s="up"===e?i:t;s&&s!==this.focusedMenu.m_pHover&&(this.focusedMenu.m_pHover&&(this.focusedMenu.m_pHover.isHovered=!1,this.focusedMenu.m_pHover.isOpen&&this.focusedMenu.m_pHover.close(!0)),this.focusedMenu.select(s))}}open(t,i="center",s){if(this.close(),!this.isSubmenu&&this.rootMenu&&this.rootMenu!==this&&this.rootMenu.close(),this.draw()){if(this.isSubmenu||(this.rootMenu=this),this.focusedMenu=this,this.m_pTappedOption=void 0,"left-from-center"===i||"right-from-center"===i||"top-from-center"===i||"bottom-from-center"===i){const e=t.width/2,s=t.height/2;switch(i){case"left-from-center":t.left+=e,i="left";break;case"right-from-center":t.right-=e,i="right";break;case"top-from-center":t.top+=s,i="top";break;case"bottom-from-center":t.bottom-=s,i="bottom"}}s&&(t.left-=s.left,t.top-=s.top,t.right+=s.right,t.bottom+=s.bottom),ro((()=>{this.m_pMenu&&this.m_pContainer&&(this.m_pContainer.set("min-width",`${this.m_nMinWidth}px`),this.m_pContainer.set("max-width",this.m_nMaxWidth>0?`${this.m_nMaxWidth}px`:"none"),this.m_sState="interactive",pe(this.onOpen,this),this.m_nSequence=no((()=>{if(this.m_nSequence=0,this.m_pMenu&&this.m_pContainer){const s=window.innerWidth,o=window.innerHeight,n=this.m_pMenu.rectangle,r=this.m_pContainer.rectangle,a=this.m_pParent?this.m_pParent.rectangle:new _i,l=new Li(r.left-n.left,r.top-n.top,n.right-r.right,n.bottom-r.bottom);let c=t.left+(t.width-("context"===i?0:n.width))/2,u=t.top+(t.height-("context"===i?0:n.height))/2;switch("context"===i&&(c-=l.left,u-=l.top),n.width>s&&(n.width=s,ro((()=>{this.m_pContainer&&(this.m_pContainer.set("min-width",n.width-l.horizontal+"px"),this.m_pContainer.set("max-width",n.width-l.horizontal+"px"))}))),"left"===i&&n.width>t.left&&(s-t.right>=n.width?i="right":n.height<=t.top?i="top":o-t.bottom>=n.height?i="bottom":s-t.right>t.left&&(i="right")),"right"===i&&n.width>s-t.right&&(t.left>=n.width?i="left":n.height<=t.top?i="top":o-t.bottom>=n.height?i="bottom":t.left>s-t.right&&(i="left")),"top"===i&&n.height>t.top&&(o-t.bottom>=n.height?i="bottom":n.width<=t.left?i="left":s-t.right>=n.width?i="right":o-t.bottom>t.top&&(i="bottom")),"bottom"===i&&n.height>o-t.bottom&&(t.top>=n.height?i="top":n.width<=t.left?i="left":s-t.right>=n.width?i="right":t.top>o-t.bottom&&(i="top")),i){case"left":c=t.left-n.width;break;case"right":c=t.right;break;case"top":u=t.top-n.height;break;case"bottom":u=t.bottom}if(u<0||u+n.height>o){let t=n.height;u<0&&("top"===i&&(t+=u),u=0),u+n.height>o&&("bottom"!==i&&(u=e.max(u-(u+n.height-o),0)),t=e.min(o-u,n.height)),t<n.height&&(n.height=t,ro((()=>{this.m_pContainer&&(this.m_pContainer.set("max-height",t-l.vertical+"px"),this.m_pScroll=this.m_pScroll||(this.style.scrollbars?Wr:Zr).on({stylesheet:this.stylesheet,classScrollUp:this.style.indicators?So.selectorHash("scroll-up"):"",classScrollDown:this.style.indicators?So.selectorHash("scroll-down"):"",asset:this.m_pContainer,direction:"vertical",style:this.style.scrollbars,autoInitialize:!1,focus:!1,keyboard:!1,passive:!this.style.scrollbarsInteractable,hovering:this.style.scrollbarsInteractable||!1,blink:this.style.scrollbarsInteractable||!1,onStart:()=>{const e=this.opened;e&&e.close(),this.m_pHover&&!Tr.isKeyDown&&(this.m_pHover.isHovered=!1,this.m_pHover=void 0)}}),this.style.indicators&&(Gr(this.m_pScroll,"up","nav","hover","crawl",this.style.indicators.up.appearance,{opacity:0,visibility:"hidden",[So.selector("hover")]:this.style.indicators.up.hover,[So.selector("crawl")]:this.style.indicators.up.crawl}),Gr(this.m_pScroll,"down","nav","hover","crawl",this.style.indicators.down.appearance,{opacity:0,visibility:"hidden",[So.selector("hover")]:this.style.indicators.down.hover,[So.selector("crawl")]:this.style.indicators.down.crawl})))})))}c=e.range(c,0,s-n.width),ro((()=>{const s=Q(this.style.origin,!0);if(this.m_pMenu){if(this.m_pMenu.left=c-a.left,this.m_pMenu.top=u-a.top,(("left"===i||"right"===i)&&c<=t.left&&c+n.width>=t.right||("top"===i||"bottom"===i)&&u<=t.top&&u+n.height>=t.bottom)&&(i="center"),"left"===i||"right"===i){const o=t.top<=u&&t.bottom>=u+n.height?u+n.height/2:t.top>u&&t.top<u+n.height&&t.bottom>=u+n.height?t.top+(u+n.height-t.top)/2:t.top<u&&t.bottom>u&&t.bottom<u+n.height?u+(t.bottom-u)/2:t.top+t.height/2,r=e.range(n.height/2+(o-(u+n.height/2))-l.vertical/2,2*l.top,n.height-2*l.bottom-l.vertical);this.m_pMenu.set("background-position",`${"left"===i?"right":"left"} ${r}px`),s&&this.m_pMenu.set("transform-origin",`${"left"===i?"100%":"0"} ${r}px 0`)}if("top"===i||"bottom"===i){const o=t.left<=c&&t.right>=c+n.width?c+n.width/2:t.left>c&&t.left<c+n.width&&t.right>=c+n.width?t.left+(c+n.width-t.left)/2:t.left<c&&t.right>c&&t.right<c+n.width?c+(t.right-c)/2:t.left+t.width/2,r=e.range(n.width/2+(o-(c+n.width/2))-l.horizontal/2,2*l.left,n.width-2*l.right-l.horizontal);this.m_pMenu.set("background-position",`${r}px ${"top"===i?"bottom":"top"}`),s&&this.m_pMenu.set("transform-origin",`${r}px ${"top"===i?"100%":"0"} 0`)}this.m_pMenu.addSelector(i),this.m_pMenu.animateSelector("open",(()=>{this.m_pScroll&&(this.m_pScroll.init(),this.m_bAutoFocus&&this.m_pScroll.focus()),this.m_bAutoFocus&&this.m_pKeyboard&&this.m_pKeyboard.focus()}),!1,"synchronous"),this.m_pOverlay&&this.m_pOverlay.addSelector("open"),this.m_sState="ready"}}))}}),this.m_nSequence))}))}return this}openSubmenu(t){this.m_nSequence=no((()=>{if(this.m_nSequence=0,t.element&&t.menu&&t.menu.m_pContainer){const i=t.element.rectangle,s=t.menu.m_pContainer.rectangle;i.left=e.min(i.left,s.left),i.right=e.max(i.right,s.right),this.open(i,"right",t.menu.style.options&&t.menu.style.options.submenu?t.menu.style.options.submenu.margin:void 0)}}),this.m_nSequence)}openAtElement(e,t="center",i){return this.m_nSequence=no((()=>{const s=e.rectangle;this.m_nSequence=0,this.open(s,t,i)}),this.m_nSequence),this}openAtPosition(e,t,i="context"){return this.open(new _i({left:e,top:t,right:e,bottom:t}),i)}close(e=!1,t){if(this.focusedMenu===this&&this.m_pAncestor&&(this.focusedMenu=this.m_pAncestor),e&&this.isOpen){let e=0;const i=()=>{2===e&&this.close(!1,t)};this.m_pMenu?this.m_pMenu.animateSelector("close",(()=>{e++,i()})):e++,this.m_pOverlay&&this.m_bOverlay?this.m_pOverlay.animateSelector("close",(()=>{e++,i()})):e++,ee(this.options,(e=>{e.close(!0)})),this.m_sState="closing",pe(this.onClosing,this),i()}else{const e="interactive"===this.m_sState||"ready"===this.m_sState||"closing"===this.m_sState;"ready"!==this.m_sState&&"closing"!==this.m_sState||(ma.m_bTapped=!1),this.isDrawn&&(this.m_pScroll&&(this.m_pScroll.isDisabled=!1),e&&("closing"!==this.m_sState&&pe(this.onClosing,this),pe(this.onClose,this)),this.m_bDestroyOnClose?this.destroy():(ee(this.options,(e=>e.remove())),this.reset()),e&&(pe(t,this),Re((()=>pe(this.onClosed,this)))))}}focus(){if(this.isOpen){const e=ue(this.options,(e=>!e.isDisabled&&e instanceof Xr));e&&(this.opened&&this.opened.close(!1),this.m_pHover&&(this.m_pHover.isHovered=!1,this.m_pHover.isSelected=!1),this.m_pScroll&&this.m_pScroll.focus(),this.m_pKeyboard&&this.m_pKeyboard.focus(),this.select(e))}return this}destroy(){this.m_bDestroyed||(ee(this.m_pOptions,(e=>e.destroy())),pe(this.onDestroy,this)),this.m_bDestroyed=!0,this.reset()}}ma.m_bInitialized=!1,ma.m_bTapped=!1;class ga extends ma{constructor(e,t={}){super(e,t)}static get parent(){return this.m_pParent}static set parent(e){this.m_pParent=e}static get isActive(){return ma.root instanceof ma}static open(e,t,i={}){return new ma(e,i).open(t,i.position,i.margin)}static openAtElement(e,t,i={}){return new ma(e,i).openAtElement(t,i.position,i.margin)}static openAtPosition(e,t,i,s={}){return new ma(e,s).openAtPosition(t,i)}static close(e=!1,t){ma.root&&ma.root.close(e,t)}}function ba(e,t,i){let s,o,n,r;if(e.style.options&&e.style.options.image&&e.style.options.image.paths&&e.style.options.image.paths.class&&0===i.indexOf("data:image/svg+xml;base64,")){const t=atob(i.substr(26));s=`data:image/svg+xml;base64,${btoa(t.replace("<path ",`<style type="text/css">.${e.style.options.image.paths.class}-fill{fill:${e.style.options.image.paths.normal};}.${e.style.options.image.paths.class}-stroke{stroke:${e.style.options.image.paths.normal};}</style><path `))}`,o=`data:image/svg+xml;base64,${btoa(t.replace("<path ",`<style type="text/css">.${e.style.options.image.paths.class}-fill{fill:${e.style.options.image.paths.hover||e.style.options.image.paths.normal};}.${e.style.options.image.paths.class}-stroke{stroke:${e.style.options.image.paths.hover||e.style.options.image.paths.normal};}</style><path `))}`,n=`data:image/svg+xml;base64,${btoa(t.replace("<path ",`<style type="text/css">.${e.style.options.image.paths.class}-fill{fill:${e.style.options.image.paths.selected||e.style.options.image.paths.normal};}.${e.style.options.image.paths.class}-stroke{stroke:${e.style.options.image.paths.selected||e.style.options.image.paths.normal};}</style><path `))}`,r=`data:image/svg+xml;base64,${btoa(t.replace("<path ",`<style type="text/css">.${e.style.options.image.paths.class}-fill{fill:${e.style.options.image.paths.disabled||e.style.options.image.paths.normal};}.${e.style.options.image.paths.class}-stroke{stroke:${e.style.options.image.paths.disabled||e.style.options.image.paths.normal};}</style><path `))}`}t.create("span"),t.style({"> span:first-child":{display:"inline-block",float:"left",backgroundRepeat:"no-repeat",backgroundImage:`url("${s||i}")`},[So.selector("hover")]:{"> span:first-child":{backgroundImage:`url("${o||i}")`}},[So.selector("selected")]:{"> span:first-child":{backgroundImage:`url("${n||i}")`}},[So.selector("disabled")]:{"> span:first-child":{backgroundImage:`url("${r||i}")`}}})}ga.stylesheet=So.app;class fa extends Xr{constructor(e,t,i,s=!1){super(t,i,s),this.m_sImage=e}draw(e,t,i){ba(e,t,this.m_sImage),super.draw(e,t,i),!i&&e.style.options&&e.style.options.image&&t.style(J(e.style.options.image.appearance,{"> span:first-child":e.style.options.image.image,[So.selector("disabled")]:e.style.options.image.disabled,[So.selector("hover")]:e.style.options.image.hover,[So.selector("selected")]:e.style.options.image.selected,[So.selector("tapped")]:e.style.options.image.tapped}),e.stylesheet)}}class ya extends Qr{constructor(){super(!1,!1)}draw(e,t,i){super.draw(e,t),!i&&e.style.options&&e.style.options.separator&&(i=J(e.style.options.separator.appearance,{"> div":e.style.options.separator.separator,[So.selector("disabled")]:e.style.options.separator.disabled,[So.selector("hover")]:e.style.options.separator.hover})),i&&t.style(i,e.stylesheet),t.create("div")}}class va extends Xr{constructor(e,t,i=!1,s=!0){super(e,void 0,i||z(t)&&0===P(t)),this.m_pOptions=t||[],this.m_bCollapse=s}get submenu(){return this.m_pSubmenu}get canOpen(){return N(this.m_pOptions)||P(this.m_pOptions)>0}get closeOnTap(){return!1}parse(e){if("function"!=typeof this.m_pOptions){if(this.m_bCollapse)for(;1===this.m_pOptions.length&&this.m_pOptions[0]instanceof va;){const e=this.m_pOptions[0];this.m_pOptions="function"==typeof e.m_pOptions?e.m_pOptions():e.m_pOptions}if(0===this.m_pOptions.length)return void(this.isDisabled=!0);this.m_pSubmenu=this.m_pSubmenu||new ma(this.m_pOptions,{stylesheet:e.stylesheet,style:e.style,parent:e.parent,minWidth:e.minSubmenuWidth,maxWidth:e.maxSubmenuWidth,delegateWidths:!0,destroyOnClose:!1},e),this.m_pSubmenu.onOpen=()=>{this.isSelected=!0},this.m_pSubmenu.onClosing=()=>{this.isSelected=!1},this.m_pSubmenu.onClose=()=>{this.isSelected=!1,this.close()}}}update(e=!1){this.element&&this.element.attribute("aria-expanded",this.isSelected?"true":"false"),super.update(e)}draw(e,t,i){super.draw(e,t,i),!i&&e.style.options&&e.style.options.submenu&&t.style(J(e.style.options.submenu.appearance,{[So.selector("disabled")]:e.style.options.submenu.disabled,[So.selector("hover")]:e.style.options.submenu.hover,[So.selector("selected")]:e.style.options.submenu.selected}),e.stylesheet),t.attribute("aria-haspopup","true"),this.parse(e)}tap(){this.isOpen?this.close(!0):this.open(),super.tap()}open(){if(this.menu){const e=this.menu.opened;"function"==typeof this.m_pOptions&&(this.m_pOptions=this.m_pOptions(),this.parse(this.menu)),e&&this.menu.opened!==this&&e.close(!1)}return!!(super.open()&&this.m_pSubmenu&&this.element)&&(this.m_pSubmenu.openSubmenu(this),this.element&&this.element.attribute("aria-expanded","true"),!0)}close(e=!1){return!(!super.close(e)||!this.m_pSubmenu||(this.m_pSubmenu.close(e),0))}remove(){this.m_pSubmenu&&(this.m_pSubmenu.destroy(),this.m_pSubmenu=void 0),super.remove()}destroy(){super.destroy(),this.m_pSubmenu&&(this.m_pSubmenu.destroy(),this.m_pSubmenu=void 0)}}class Ma extends va{constructor(e,t,i,s=!1,o=!0){super(t,i,s,o),this.m_sImage=e}draw(e,t,i){ba(e,t,this.m_sImage),super.draw(e,t,i),!i&&e.style.options&&e.style.options.image&&t.style(J(e.style.options.image.appearance,{"> span:first-child":e.style.options.image.image,[So.selector("disabled")]:e.style.options.image.disabled,[So.selector("hover")]:e.style.options.image.hover,[So.selector("selected")]:e.style.options.image.selected,[So.selector("tapped")]:e.style.options.image.tapped}),e.stylesheet)}}class wa extends Xr{constructor(e,t,i="blank"){super(e,(()=>window.open(t,"blank"===i?"_blank":"_self")),!t),this.m_sURL=t,this.m_sTarget=i}get elementType(){return"a"}get URL(){return this.m_sURL}set URL(e){this.m_sURL!==e&&(this.m_sURL=e,this.isDisabled=!e,this.element&&this.element.property("href",this.m_sURL))}get target(){return this.m_sTarget}set target(e){this.m_sTarget!==e&&(this.m_sTarget=e,this.element&&this.element.property("target",this.m_sTarget))}update(e=!1){this.element&&this.element.set("pointer-events",this.isDisabled?"none":"auto"),super.update(e)}draw(e,t,i){super.draw(e,t,i),xr.mode(t,"disable"),t.attribute("href",this.m_sURL),t.set("pointer-events",this.isDisabled?"none":"auto"),t.on("click",(()=>ga.close())),"blank"===this.m_sTarget&&t.attribute("target","_blank")}}function xa(e,t,i=[],s=[]){return ee(e,(e=>{const o=e.label&&Us(e.label,e.markdown?Xi.All:Xi.None);if(C(o))if(e.command){const n=e.command;e.burst&&s.push({execute:n,burst:e.burst,label:o}),e.separator&&i.length>0&&i.push(new ya),C(e.icon)?i.push(new fa(e.icon,o,(()=>n(t(),!1)))):i.push(new Xr(o,(()=>n(t(),!1))))}else if(e.templates){if(e.templates.length>0){const n=xa(e.templates,t,[],s);e.separator&&i.length>0&&i.push(new ya),C(e.icon)?i.push(new Ma(e.icon,o,n)):i.push(new va(o,n))}}else i.push(new qr(o))})),i}ds.exchanger=(e,t)=>{if(t instanceof ka){const i=e[e.length-1];if(i instanceof ka){const s={};if(i.each((e=>{const i=t.itemByIdentifier(e.id);i?i.index=e.index:s[e.id]=t.duplicate(e).done})),t.count>0){const s=di(t.firstItem);t.each((t=>{if(i.itemByIdentifier(t.id)){const i={};ee(e,(e=>{if(e instanceof ka){const o=e.itemByIdentifier(t.id);o&&ee(s,(e=>{const s=wi(t,e.property);if(s&&s.isPrimitive){const t=wi(o,e.property);if(t&&t.type===s.type){const t=Ye(o,e.property);(s.optional&&x(t)||"string"===s.type&&C(t)||"number"===s.type&&A(t)||"boolean"===s.type&&T(t))&&(i[e.property]=t)}}}))}})),ee(i,((e,i)=>{Ue(t,i,e)}),{keys:!0})}else t.delete()}))}ee(s,(e=>e()))}}};class Sa extends ds{get editor(){if(!this.orchestratorForEditor)throw new Error("Tripetto: Cannot reference `this.editor` outside the `@editor` decorated function.");return this.orchestratorForEditor}get conditions(){if(!this.orchestratorForConditions)throw new Error("Tripetto: Cannot reference `this.conditions` outside the `@conditions` decorated function.");return this.orchestratorForConditions}get icon(){return this.type.icon}get isRequired(){return!!ue(Ye(e=this,"@signal #required"),(t=>Q(Ye(e,t))))||this.slots.each((e=>e.required));var e}assignedToNode(e){this.node.hook("OnRename","synchronous",(()=>wt("renamed",this)),this),this.slots.hook("OnSlotRequired","synchronous",(()=>this.node.rerender("update")),this),wt("renamed",this);const t=super.assignedToNode(e);return()=>{this.m_sCurrentIcon=this.icon,t()}}draw(e,t,i,s,o,n,r){}rerender(e=!1){this.m_sCurrentIcon!==this.icon&&(this.m_sCurrentIcon=this.icon,e=!0),super.rerender(e)}open(e){return!1}}function Ia(e){switch(e.type){case"node":return t=>{Fe(t,"icon",e.icon),zs(e)(t)};case"condition":return t=>{Fe(t,"icon",e.icon),Fe(t,"autoOpen",e.autoOpen),zs(e)(t)}}}class ka extends Nt{constructor(e,t){super(),this.m_pConstructor=e,this.m_pReference=t}get ref(){return this.m_pReference()}get block(){return this.m_pBlock||(this.ref instanceof Sa||this.ref instanceof Zs?this.ref:"block"in this.ref&&(this.ref.block instanceof Sa||this.ref.block instanceof Zs)&&this.ref.block||void 0)}onDimensionChange(e){super.onDimensionChange(e),yi(this.block&&this.block.map)}setBlock(e){this.m_pBlock=e}insert(e=0,t){const i=this.pushToMatrix(new this.m_pConstructor,{index:e,recalculate:!0,emit:"push"});return t&&t(i),wt("created",i),i}append(e){const t=this.pushToMatrix(new this.m_pConstructor,{index:-1,recalculate:!0,emit:"push"});return e&&e(t),wt("created",t),t}duplicate(e){const t=this.pushToMatrix(new this.m_pConstructor,{index:e.index,recalculate:!0,emit:"push"});return t.hash=e.id,{item:t,done:()=>{wt("created",t)}}}itemByIdentifier(e){let t;return C(e)&&this.each((i=>i.id===e&&(t=i,!0))),t}refresh(){this.each((e=>e.refresh()))}serialize(){const e=[];return this.each((t=>{e.push(t.serialize())})),e.length>0?e:void 0}deserialize(e,t){return this.clear(),ee(e,(e=>{const i=this.pushToMatrix(new this.m_pConstructor,{index:-1,recalculate:!0,emit:"push"}).deserialize(e,t);t.add((()=>wt("created",i)))})),this}}function Na(e,t,i=!0,s){return(o,n,r)=>{const a=Object.getOwnPropertyDescriptor(o,"@signal #supplies"),l={collection:n,type:"#slot"===e?"slot":"collection",reference:t,isSole:e=>T(i)?i:Ze(e,i),isAvailable:e=>!s||Ze(e,s)};a?a.value.push(l):Object.defineProperty(o,"@signal #supplies",{value:[l],writable:!1,enumerable:!1,configurable:!1})}}function _a(e,t,i){return ue(Ye(e,"@signal #supplies"),(e=>e.type===t&&e.reference===i))}yt([gi],ka.prototype,"serialize",null),yt([mi],ka.prototype,"deserialize",null);class La extends ni{constructor(e=3){super(),this.m_pFeature=void 0,this.m_nPosition=0,this.m_nSize=-1,this.m_bInitialized=!1,this.m_bReady=!1,this.m_bActivated=!1,this.m_bVisible=!0,this.m_bEmpty=!1,this.m_sValidation="unknown",this.m_bScrollIntoView=!1,this.m_nModes=e}get isLoading(){return!this.cards||!this.cards.isReady}get cards(){return this.parent}get feature(){return this.m_pFeature}set feature(e){this.m_pFeature||(this.m_pFeature=e)}get stylesheet(){return this.cards?this.cards.stylesheet:So.app}get element(){return this.m_pElement}get context(){return this.m_pContext}get position(){return this.m_nPosition}get tail(){if(this.isInitialized&&this.isObservable)return this.position+e.max(this.m_nSize,0)+(this.cards?this.cards.spacingBetween:0);const t=this.predecessorSibling;return t?t.tail:this.cards?this.cards.spacingTop:0}get modes(){return this.m_nModes}get mode(){return this.cards?this.cards.mode:1}get isModeNormal(){return Q(1&this.mode)}get isModeCompact(){return Q(2&this.mode)}get isDrawn(){return this.m_pElement instanceof dr}get isInitialized(){return this.m_bInitialized}get isReady(){return!(this.isLoading||!this.m_bReady)}get isMeasured(){return this.m_nSize>=0}get isMeasurable(){return!!this.element&&(this.element.hasSelector("visible")||this.element.hasSelector("initializing"))}get isObservable(){return!!(!this.isPopped&&this.isActivated&&this.isVisible&&!this.isEmpty&&this.modes&this.mode)}get isFirstObservable(){if(this.isObservable){let e=this.predecessorSibling;for(;e;){if(e.isObservable)return!1;e=e.predecessorSibling}return!0}return!1}get isLastObservable(){if(this.isObservable){let e=this.successorSibling;for(;e;){if(e.isObservable)return!1;e=e.successorSibling}return!0}return!1}get isActivated(){return this.m_bActivated}get isVisible(){return this.m_bVisible}set isVisible(e){this.m_bVisible!==e&&(this.m_bVisible=e,this.update(!0))}get isEmpty(){return this.m_bEmpty}set isEmpty(e){this.m_bEmpty!==e&&(this.m_bEmpty=e,e?this.update(!0):Pe((()=>{this.update(!0)})))}get validation(){return this.m_sValidation}get isPassed(){return"pass"===this.validation}get isInvalid(){return"invalid"===this.validation}get isFailed(){return"fail"===this.validation}get isAwaiting(){return"await"===this.validation}shift(){if(this.isMeasured){const e=this.cards instanceof Aa&&1===this.cards.type;let t=this.successorSibling,i=this.tail,s=!1;for(;t&&i!==t.position;)t.element&&t.element.position({x:e?i:0,y:e?0:i}),t.m_nPosition=i,i=t.tail,s=!0,t=t.successorSibling;return this.cards&&this.cards.update(),s}return!1}initialize(){if(!this.isLoading&&(this.isInitialized||this.onInit())){const e=()=>{ro((()=>{this.measured(),this.update(!0),this.ready()}))};this.isMeasured?e():no((()=>{this.measure(),e()}))}}update(e){let t="none";this.isMeasured&&(this.cards&&!this.cards.isModeSwapping||(e=!1),this.m_bObservable!==this.isObservable&&(e&&(!this.isObservable&&this.m_bObservable?t="deactivate":this.isObservable&&(t="activate")),this.m_bObservable=this.isObservable,this.isReady&&(this.m_bObservable?this.onShow():this.onHide(),this.cards&&"unknown"!==this.validation&&this.cards.validate())),ro((()=>{if(this.element)if(this.element.selector("visible",this.isObservable),this.element.selector("normal",1===this.mode),this.element.selector("compact",2===this.mode),"deactivate"===t&&this.isReady){const e=this.cards?this.cards.deactivateDelay:-1;this.element.animateSelector("animation-deactivate",-1===e?()=>this.shift():void 0,!0,"synchronous"),this.element.removeSelector("animation-shift"),this.element.removeSelector("animation-activate"),this.element.removeSelector("animation-activate-after-shift"),this.element.positionByTranslate3D=!1,-1!==e&&De((()=>this.shift()),e)}else{const e=this.shift();"activate"===t&&this.isReady&&this.isObservable&&(this.element.animateSelector("animation-activate"+(e?"-after-shift":""),(()=>{this.element&&(this.element.positionByTranslate3D=!0,this.element.addSelectorSafe("animation-shift",!0)),this.m_bScrollIntoView?(this.scrollIntoView(),De((()=>this.onRequestAutoFocus()),300),this.m_bScrollIntoView=!1):this.onRequestAutoFocus()}),!0,"synchronous"),this.element.removeSelector("animation-deactivate"),this.element.removeSelector("animation-shift"),this.element.positionByTranslate3D=!1)}}),!this.element||!this.element.isInDOM))}onShow(){this.cards&&this.cards.onCardShow(this),this.emitHook("OnShow",{card:this})}onHide(){this.cards&&this.cards.onCardHide(this),this.emitHook("OnHide",{card:this})}onActivate(){this.cards&&this.cards.onCardActivate(this),this.emitHook("OnActivate",{card:this})}onDeactivate(){this.cards&&this.cards.onCardDeactivate(this),this.emitHook("OnDeactivate",{card:this})}onDestroy(){this.cards&&this.cards.onCardDestroy(this),this.emitHook("OnDestroy",{card:this})}onMeasure(){return 0}onResize(){this.emitHook("OnResize",{card:this})}onResized(){this.emitHook("OnResized",{card:this})}onValidate(e){return"unknown"}onValidated(){this.emitHook("OnValidated",{card:this})}onReady(){this.emitHook("OnReady",{card:this})}onInit(){return this.m_bInitialized=!0}onMode(){this.update(!1),this.emitHook("OnMode",{card:this})}onRequestFocus(){return!1}onRequestAutoFocus(){return!1}onPop(e){this.destroy(),super.onPop(e)}initialized(){this.m_bInitialized||(this.m_bInitialized=!0,this.cards&&this.cards.initialize(),this.initialize())}measure(t){if(this.isLoading||this.onResize(),A(t))return t!==this.m_nSize&&(this.m_nSize=t,this.isLoading||this.onResized(),!0);if(this.cards&&this.context&&this.isMeasurable){const i=1===this.cards.type;if(t=e.round(i?this.context.rectangleWidth:this.context.rectangleHeight),(t+=this.onMeasure())!==this.m_nSize)return this.m_nSize=t,this.isLoading||this.onResized(),!0}return!1}measured(){if(this.cards&&this.element&&this.isMeasured){const e=1===this.cards.type,t=this.predecessorSibling,i=t?t.tail:this.cards.spacingTop;e?this.element.width=this.m_nSize:this.element.height=this.m_nSize+this.cards.spacingBetween,this.m_nPosition=i,this.element.position({x:e?i:0,y:e?0:i})}}resize(){this.m_pResize||(this.m_pResize=new tt((()=>{this.isReady&&this.cards&&!this.cards.isModeSwapping&&no((()=>{this.element&&(this.element.hasSelector("animation-activate")||this.element.hasSelector("animation-activate-after-shift"))?this.m_pResize.invoke():this.measure()&&ro((()=>{this.measured(),this.shift()}))}))}))),this.m_pResize.invoke()}ready(){ao((()=>{this.element&&this.element.removeSelector("initializing")})),this.m_bReady||(this.m_bReady=!0,this.onReady()),!this.isLoading&&this.isObservable&&this.cards&&"unknown"!==this.validation&&this.cards.validate()}activate(e,t=!1){if(!this.m_bActivated&&(!this.feature||this.feature.isActivated)){if(t&&e.each((e=>!!e.m_bScrollIntoView&&(e.m_bScrollIntoView=!1,!0))),this.m_bActivated=!0,this.m_bScrollIntoView=t,!this.cards||this.isPopped&&this.cards===e){let t=-1;if(this.feature){let i=this.feature.successorSibling;for(;i;){if(i.card&&i.card.cards===e&&!i.card.isPopped){t=i.card.index;break}i=i.successorSibling}}e.pushToMatrix(this,{index:t,recalculate:!0,emit:"push"})}this.m_pElement=this.m_pElement||e.drawCard(this,(t=>{const i=1===e.type;let s=0;if(e.isReady){const e=this.predecessorSibling;e&&(s=e.tail)}t.addSelector("initializing"),t.selector("visible",this.isObservable),t.selector("animation-shift",this.isLoading),t.selector("normal",1===this.mode),t.selector("compact",2===this.mode),t.selector("passed",this.isPassed),t.selector("failed",this.isFailed),t.selector("awaiting",this.isAwaiting),t.position({x:i?s:0,y:i?0:s,translate:this.isLoading?"accelerated":"no"}),t.insert("div",(e=>{this.onDraw(this.m_pContext=e)}))})),this.onActivate(),this.validate(),this.initialize()}return this}deactivate(){return!this.m_bActivated||this.feature&&this.feature.isActivated||(this.m_bActivated=!1,this.isInitialized&&this.update(!0),this.onDeactivate()),this}show(){return this.isVisible=!0,this}hide(){return this.isVisible=!1,this}visible(e,t=!1){return e&&t&&this.cards&&(this.cards.each((e=>!!e.m_bScrollIntoView&&(e.m_bScrollIntoView=!1,!0))),this.m_bScrollIntoView=!0),e?this.show():this.hide()}validate(){return Jr.of({await:e=>this.onValidate(e),promise:e=>{!e.isCanceled&&e.payload&&this.m_sValidation!==e.payload&&(this.m_sValidation=e.payload,this.feature&&(this.feature.validation=e.payload),this.cards&&(ro((()=>{this.element&&(this.element.selector("passed",this.isPassed),this.element.selector("failed",this.isFailed),this.element.selector("awaiting",this.isAwaiting))}),!this.element||!this.element.isInDOM),this.cards.validate(),this.onValidated()))}}),this}focus(e="first"){return!1}scrollIntoView(e,t=!1){return this.cards&&(e?this.cards.scrollElementIntoView(e,void 0,void 0,t):this.cards.scrollCardIntoView(this)),this}destroy(){this.onDestroy(),this.m_pContext=void 0,this.m_nSize=-1,this.m_bActivated=!1,this.m_pResize&&(this.m_pResize.cancel(),this.m_pResize=void 0),this.m_pElement&&(this.m_pElement.destroy(),this.m_pElement=void 0),this.shift(),super.destroy()}}class Ca extends ai{constructor(e,t){super(e),this.m_bOption=!1,this.m_bVisible=!0,this.m_bLocked=!1,this.m_bDisabled=!1,this.m_bActivated=!1,this.m_sValidation="unknown",this.m_sName=t.name,this.m_sType=t.type,this.m_bOption=t.option,this.m_pCard=t.card,this.m_pCard&&(this.m_pCard.feature=this)}get features(){return this.parent}get card(){return this.m_pCard}get element(){return this.m_pElement}get type(){return this.m_sType}get isVisible(){return this.m_bVisible}set isVisible(e){this.m_bVisible!==e&&(this.m_bVisible=e,this.element&&(this.element.selectorSafe("visible",this.isVisible),this.emitHook("OnVisible",{feature:this})))}get isLocked(){return this.m_bLocked}set isLocked(e){this.m_bLocked!==e&&(this.m_bLocked=e,this.element&&(this.element.selectorSafe("locked",this.isLocked),this.isActivated&&!this.isLocked||this.element.removeSelectorSafe("hover-button"),this.m_pOption&&this.m_pOption.selectorSafe("visible",!this.isLocked&&this.isActivated),this.emitHook("OnLock",{feature:this})))}get isDisabled(){return this.m_bDisabled}set isDisabled(e){if(this.m_bDisabled!==e){const t=this.isActivated;this.m_bDisabled=e,this.element&&(this.element.selectorSafe("disabled",this.isDisabled),this.emitHook("OnDisable",{feature:this}),t!==this.isActivated&&this.update())}}get isActivated(){return!this.m_bDisabled&&this.m_bActivated}set isActivated(e){if(this.m_bActivated!==e){const t=this.isActivated;this.m_bActivated=e,t!==this.isActivated&&this.update()}}get validation(){return"unknown"===this.m_sValidation&&this.card?this.card.validation:this.m_sValidation}set validation(e){this.m_sValidation!==e&&(this.m_sValidation=e,ro((()=>{this.element&&(this.element.selector("passed",this.isPassed),this.element.selector("failed",this.isFailed),this.element.selector("awaiting",this.isAwaiting))}),!this.element||!this.element.isInDOM))}get isInvalid(){return"invalid"===this.validation}set isInvalid(e){(e||this.isInvalid)&&(this.validation=e?"invalid":"unknown")}get isPassed(){return"pass"===this.validation}set isPassed(e){(e||this.isPassed)&&(this.validation=e?"pass":"unknown")}get isFailed(){return"fail"===this.validation}set isFailed(e){(e||this.isFailed)&&(this.validation=e?"fail":"unknown")}get isAwaiting(){return"await"===this.validation}set isAwaiting(e){(e||this.isAwaiting)&&(this.validation=e?"await":"unknown")}get name(){return this.m_sName}set name(e){e!==this.m_sName&&(this.m_sName=e,this.m_pLabel&&(this.m_pLabel.text=e))}update(){this.element&&(this.element.selectorSafe("activated",this.isActivated),this.element.selectorSafe("option",this.m_bOption&&this.isActivated),this.isActivated&&!this.isLocked||this.element.removeSelectorSafe("hover-button"),this.m_pOption&&this.m_pOption.selectorSafe("visible",!this.isLocked&&this.isActivated),this.emitHook("OnToggle",{feature:this}),this.card&&(this.isActivated?this.card.activate(this.features.cards,!0):this.card.deactivate()))}draw(e){e&&"card"!==this.type&&(this.m_pElement=e.create("button",(e=>{if(e.tabIndex="toggle"===this.type?this.features.cards.tab:-1,e.addSelector(`${this.type}`),e.selector("visible",this.isVisible),e.selector("locked",this.isLocked),e.selector("disabled",this.isDisabled),e.selector("activated",this.isActivated),e.selector("option",this.m_bOption&&this.isActivated),e.selector("passed",this.isPassed),e.selector("failed",this.isFailed),e.selector("awaiting",this.isAwaiting),this.m_pLabel=this.m_bOption?e.create("span"):e,this.m_pLabel.text=this.name,this.m_bOption&&(this.m_pOption=e.create("div",(t=>{t.selector("visible",!this.isLocked&&this.isActivated),Dr.on(t,(e=>{this.isLocked||this.isDisabled||(this.isActivated=!this.isActivated)})),Lr.pointer(t,(t=>e.selectorSafe("hover-button",t.isHovered)))}))),"toggle"===this.type){let t=!0,i=!0;if(this.predecessorSibling){let e=this.predecessorSibling;for(;e;){if("card"!==e.type){t="static"===e.type;break}e=e.predecessorSibling}}if(this.successorSibling){let e=this.successorSibling;for(;e;){if("card"!==e.type){i="static"===e.type;break}e=e.successorSibling}}e.selector("first",t),e.selector("last",i),Dr.on(e,(e=>{this.isActivated&&this.card&&this.m_bOption?this.card.scrollIntoView():this.isLocked||this.isDisabled||(this.isActivated=!this.isActivated)})),Lr.pointer(e,(t=>e.selectorSafe("hover",(!this.isLocked&&!this.isDisabled||this.m_bOption&&this.isActivated)&&t.isHovered))),Tr.local(e,(t=>{if(t.hasModifiers)return!1;switch(t.key){case"ArrowUp":case"ArrowDown":const i="ArrowDown"===t.key;let s=!1,o=i?this.successorSibling||this.features.firstItem:this.predecessorSibling||this.features.lastItem;for(;o;){if("toggle"===o.type&&o.isVisible)return o.focus(),!0;o=i?o.successorSibling:o.predecessorSibling,o||s||(o=i?this.features.firstItem:this.features.lastItem,s=!0)}break;case"ArrowRight":return!(this.isLocked||!this.isActivated||!this.card||!this.card.onRequestFocus())||this.features.each((e=>!!e.card&&e.card.onRequestFocus()));case"Enter":case" ":if(!this.isLocked&&!this.isDisabled)return this.isActivated=!this.isActivated,!0;break;case"Escape":return e.blur(),!0}return!1}),"keydown")}}))),this.card&&this.card.activate(this.features.cards)}onVisible(e,t="synchronous"){return this.hook("OnVisible",t,(()=>e(this))),this}onToggle(e,t="synchronous"){return this.hook("OnToggle",t,(()=>e(this))),this}onLock(e,t="synchronous"){return this.hook("OnLock",t,(()=>e(this))),this}onDisable(e,t="synchronous"){return this.hook("OnDisable",t,(()=>e(this))),this}visible(e=!0){return this.isVisible=e,this}show(){return this.visible(!0)}hide(){return this.visible(!1)}locked(e=!0){return this.isLocked=e,this}lock(){return this.locked(!0)}unlock(){return this.locked(!1)}disabled(e=!0){return this.isDisabled=e,this}disable(){return this.disabled(!0)}enable(){return this.disabled(!1)}activated(e=!0){return this.isActivated=e,this}activate(){return this.activated(!0)}deactivate(){return this.activated(!1)}style(e){return this.element&&this.element.style(e,this.features.cards.stylesheet),this}focus(){return!("toggle"!==this.type||!this.element||(this.element.focus(),this.scrollIntoView(),0))}scrollIntoView(){this.features.scrollIntoView(this)}}class Da extends ri{constructor(e){super(Ca),this.m_pCards=e}get cards(){return this.m_pCards}get isVisible(){return!!this.m_pLayer&&this.m_pLayer.isVisible}set isVisible(e){this.m_pLayer&&(this.m_pLayer.isVisible=e)}add(e,t,i,s){if(this.cards.isDrawn)throw new Error("UI.Cards.Features.Add: Features can only be added during construction.");return this.appendToMatrix({type:e,name:t,option:i,card:s})}draw(e,t){this.m_pLayer=this.m_pLayer||t.createLayer((t=>{e.appearance&&t.element.style(e.appearance,this.cards.stylesheet),t.context.style({paddingLeft:e.spacing?e.spacing.left:void 0,paddingRight:e.spacing?e.spacing.right:void 0,paddingTop:e.spacing?e.spacing.top:void 0,paddingBottom:e.spacing?e.spacing.bottom:void 0,"> button":{display:"none",position:"relative",textAlign:"left",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",width:"100%",margin:0,border:"none",backgroundColor:"transparent",appearance:"none","> span":{pointerEvents:"none"},"> div":{position:"absolute",display:"none",top:0,right:0,width:e.toggle.option?e.toggle.option.button.width:0,height:"100%",[So.selector("visible")]:{display:"block"}},[So.selector("static")]:X({cursor:"default"},e.static),[So.selector("toggle")]:X({[So.selector("hover")]:e.toggle.hover,"&:focus":X({outline:"0"},e.toggle.focus),[So.selector("activated")]:J(e.toggle.activated?e.toggle.activated.appearance:void 0,{[So.selector("hover")]:e.toggle.activated?e.toggle.activated.hover:void 0,"&:focus":e.toggle.activated?e.toggle.activated.focus:void 0}),[So.selector("option")]:J(e.toggle.option?e.toggle.option.appearance:void 0,{[So.selector("hover")]:e.toggle.option?e.toggle.option.hover:void 0,[So.selector("hover-button")]:e.toggle.option?e.toggle.option.button.hover:void 0,"&:focus":e.toggle.option?e.toggle.option.focus:void 0}),[So.selector("locked")]:X({cursor:"default","*":{cursor:"default"}},e.toggle.locked),[So.selector("passed")]:e.toggle.passed,[So.selector("failed")]:e.toggle.failed,[So.selector("awaiting")]:e.toggle.awaiting,[So.selector("first")]:e.toggle.first,[So.selector("last")]:e.toggle.last},e.toggle.appearance),[So.selector("disabled")]:e.disabled,[So.selector("visible")]:J(e.visible,{display:"block"}),"&::-moz-focus-inner":{border:"none"}}},this.cards.stylesheet),this.each((e=>e.draw(t.context)))}),ta.configuration.width(e.width).alignLeft().visible(1===this.cards.mode).scrollbars({direction:"vertical",style:e.scrollbars,bounceVertical:e.bounce||"yes",blink:e.blink}))}card(e,t=!0){if(e instanceof La)return this.add("card","",!1,e).activated(t);{const t=this.add("card","",!1,e.card).activated(Q(e.activated,!0)).disabled(e.disabled||!1).visible(Q(e.visible,!0)).locked(e.locked||!1);return e.on&&t.onToggle(e.on),e.onVisible&&t.onVisible(e.onVisible),e.onDisable&&t.onDisable(e.onDisable),e.onLock&&t.onLock(e.onLock),t}}feature(e,t,i=!1){if(k(e)){const t=this.add("toggle",e.name,!1,e.card).activated(e.activated||!1).disabled(e.disabled||!1).visible(Q(e.visible,!0)).locked(e.locked||!1);return e.on&&t.onToggle(e.on),e.onVisible&&t.onVisible(e.onVisible),e.onDisable&&t.onDisable(e.onDisable),e.onLock&&t.onLock(e.onLock),t}return this.add("toggle",e,!1,t).activated(i)}option(e,t,i=!1){if(k(e)){const t=this.add("toggle",e.name,!0,e.card).activated(e.activated||!1).disabled(e.disabled||!1).visible(Q(e.visible,!0)).locked(e.locked||!1);return e.on&&t.onToggle(e.on),e.onVisible&&t.onVisible(e.onVisible),e.onDisable&&t.onDisable(e.onDisable),e.onLock&&t.onLock(e.onLock),t}return this.add("toggle",e,!0,t).activated(i)}toggle(e,t=!1){if(k(e)){const t=this.add("toggle",e.name,!1,void 0).activated(e.activated||!1).disabled(e.disabled||!1).visible(Q(e.visible,!0)).locked(e.locked||!1);return e.on&&t.onToggle(e.on),e.onVisible&&t.onVisible(e.onVisible),e.onDisable&&t.onDisable(e.onDisable),e.onLock&&t.onLock(e.onLock),t}return this.add("toggle",e,!1,void 0).activated(t)}static(e){if(k(e)){const t=this.add("static",e.name,!1,void 0).disabled(e.disabled||!1).visible(Q(e.visible,!0));return e.onVisible&&t.onVisible(e.onVisible),e.onDisable&&t.onDisable(e.onDisable),t}return this.add("static",e,!1,void 0)}scrollIntoView(e){this.m_pLayer&&this.m_pLayer.scroll&&e.element&&this.m_pLayer.scroll.scrollToAsset(e.element)}scrollToTopOrBottom(){this.m_pLayer&&this.m_pLayer.scroll&&this.m_pLayer.scroll.scrollToTopOrBottom()}destroy(){this.each((e=>e.destroy())),this.clear("dirty"),this.m_pLayer&&(this.m_pLayer.destroy(),this.m_pLayer=void 0),super.destroy()}}class Aa extends Nt{constructor(...e){super(),this.m_nTab=0,this.m_nMode=1,this.m_bModeSwap=!1,this.m_sValidation="unknown";const t=J(...e),i=t.style||Aa.style||{},s=t.layer instanceof ta?t.layer.stylesheet:void 0;if(!t.layer)throw new Error("UI.Cards: No layer supplied.");if(t.layer.isDrawn)throw new Error("UI.Cards: Invalid layer supplied (layer is already drawn).");if(this.m_pStylesheet=t.stylesheet||s||Aa.stylesheet,this.m_pStyle=i,this.m_pLayer=t.layer,this.m_nTab=Aa.m_nTab,t.mode)switch(t.mode){case"normal":this.m_nMode=1;break;case"compact":this.m_nMode=2;break;default:this.m_nMode=t.mode}Aa.m_nTab+=100,this.layer.hook("OnDraw","synchronous",(()=>this.draw())),this.layer.hook("OnDestroy","synchronous",(()=>this.destroy()))}static get tab(){return Aa.m_nTab>=3e4&&(Aa.m_nTab=0),++Aa.m_nTab}get dimensions(){const e=this.lastItem;return new Ni(0,e?e.tail-this.spacingBetween+this.spacingBottom:0)}get stylesheet(){return this.m_pStylesheet}get layer(){return this.m_pLayer}get features(){if(this.m_pFeatures||!this.m_pStyle.features||this.isDrawn||(this.m_pFeatures=new Da(this)),!this.m_pFeatures)throw new Error("UI.Cards.Features: Features are not available (no styles or features supplied)");return this.m_pFeatures}get isFeaturesSupported(){return this.m_pFeatures instanceof Da}get spacingTop(){return(this.m_pStyle.cards&&this.m_pStyle.cards.spacing?this.m_pStyle.cards.spacing.top:0)||0}get spacingBetween(){return(this.m_pStyle.cards&&this.m_pStyle.cards.spacing?this.m_pStyle.cards.spacing.between:0)||0}get spacingBottom(){return(this.m_pStyle.cards&&this.m_pStyle.cards.spacing?this.m_pStyle.cards.spacing.bottom:0)||0}get deactivateDelay(){return this.m_pStyle.cards&&this.m_pStyle.cards.animations&&this.m_pStyle.cards.animations.deactivate?e.max(G(this.m_pStyle.cards.animations.deactivateDelay,-1),-1):-1}get tab(){return++this.m_nTab}get mode(){return this.m_nMode}set mode(e){e!==this.m_nMode&&(this.m_nMode=e,this.m_bModeSwap=!0,this.m_pFeatures&&(this.m_pFeatures.isVisible=1===this.mode,this.m_pCards&&this.m_pStyle.features&&this.m_pCards.configuration.left(1===this.mode?this.m_pStyle.features.width:0)),this.each((e=>e.onMode())),this.onMode(),this.m_bModeSwap=!1)}get isModeSwapping(){return this.m_bModeSwap}get validation(){return this.m_sValidation}get isInvalid(){return"invalid"===this.validation}get isFailed(){return"fail"===this.validation}get isPassed(){return"pass"===this.validation}get isAwaiting(){return"await"===this.validation}get isDrawn(){return this.layer.isDrawn}get isReady(){return this.m_pCards instanceof ta&&this.m_pCards.isReady}calculated(){let e=!0;this.each((t=>{t.onInit()||t.isInitialized||(e=!1)})),e&&this.measure()}measure(){no((()=>{this.each((e=>{e.measure()})),ro((()=>{this.each((e=>e.measured())),this.m_pCards&&this.m_pCards.done()}))}))}ready(){this.each((e=>{e.ready()}))}autoFocus(){this.each((e=>e.onRequestAutoFocus()))}resize(){no((()=>{this.each((e=>{e.isMeasured&&e.measure()})),ro((()=>{this.each((e=>e.measured()))}))}))}draw(){this.layer.createLayer((t=>{let i=0;this.m_pStyle.cards&&this.m_pStyle.cards.animations&&this.m_pStyle.cards.animations.activate&&(i=e.max(this.m_pStyle.cards.animations.activateDelay||0,0)),this.m_pCards=t,t.onCalculated=()=>this.calculated(),t.onDimensions=()=>this.dimensions,t.onReady=()=>this.ready(),t.onShow=()=>this.autoFocus(),t.onResize=()=>this.resize(),t.wait(),this.m_pStyle.appearance&&t.element.style(this.m_pStyle.appearance,this.stylesheet),t.context.style({"> div":{position:"absolute",left:0,right:0,overflow:"hidden",display:"none","> div":J({paddingLeft:this.m_pStyle.cards&&this.m_pStyle.cards.spacing?this.m_pStyle.cards.spacing.left:void 0,paddingRight:this.m_pStyle.cards&&this.m_pStyle.cards.spacing?this.m_pStyle.cards.spacing.right:void 0},this.m_pStyle.cards?this.m_pStyle.cards.appearance:void 0,{margin:0,padding:0}),[So.selector("normal")]:{"> div":this.m_pStyle.cards?this.m_pStyle.cards.normal:void 0},[So.selector("compact")]:{"> div":this.m_pStyle.cards?this.m_pStyle.cards.compact:void 0},[So.selector("passed")]:{"> div":this.m_pStyle.cards?this.m_pStyle.cards.passed:void 0},[So.selector("failed")]:{"> div":this.m_pStyle.cards?this.m_pStyle.cards.failed:void 0},[So.selector("awaiting")]:{"> div":this.m_pStyle.cards?this.m_pStyle.cards.awaiting:void 0},[So.selector("visible")]:{display:"block"},[So.selector("animation-shift")]:this.m_pStyle.cards&&this.m_pStyle.cards.animations?this.m_pStyle.cards.animations.shift:void 0,[So.selector("animation-activate")]:X({opacity:0},this.m_pStyle.cards&&this.m_pStyle.cards.animations?this.m_pStyle.cards.animations.activate:void 0,{animationDelay:"0",display:"block",overflow:"visible"}),[So.selector("animation-activate-after-shift")]:X({animationDelay:`${e.conform(i/1e3,3)}s`,opacity:0},this.m_pStyle.cards&&this.m_pStyle.cards.animations?this.m_pStyle.cards.animations.activate:void 0,{display:"block",overflow:"visible"}),[So.selector("animation-deactivate")]:J(this.m_pStyle.cards&&this.m_pStyle.cards.animations?this.m_pStyle.cards.animations.deactivate:void 0,{display:"block"}),[So.selector("initializing")]:{display:"block",transition:"none",opacity:0,pointerEvents:"none"}}},this.stylesheet),this.each((e=>{e.activate(this)}))}),ta.configuration.left(1===this.mode&&this.m_pFeatures&&this.m_pStyle.features?this.m_pStyle.features.width:0).scrollbars({direction:"vertical",spacing:this.m_pStyle.spacing,style:this.m_pStyle.scrollbars,bounceVertical:this.m_pStyle.bounce||"yes",blink:this.m_pStyle.blink})),this.m_pFeatures&&this.m_pStyle.features&&this.m_pFeatures.draw(this.m_pStyle.features,this.layer)}onMode(){this.emitHook("OnMode",{cards:this})}onValidated(){this.emitHook("OnValidated",{cards:this})}onDestroy(){this.emitHook("OnDestroy",{cards:this})}initialize(){this.isReady||!this.each((e=>!e.isInitialized))&&this.measure()}drawCard(e,t){if(this.m_pCards)return this.m_pCards.context.create("div",t)}add(e,t=-1){return this.pushToMatrix(e,{index:t,recalculate:!0,emit:"push"})}update(){this.m_pCards&&this.m_pCards.scroll&&this.m_pCards.scroll.update(!0)}validate(){let e="unknown";return this.each((t=>(t.isObservable&&"unknown"!==t.validation&&("await"!==e||t.isInvalid||t.isFailed)&&(e=t.validation),"invalid"===e||"fail"===e))),e!==this.m_sValidation&&(this.m_sValidation=e,this.onValidated()),this.validation}switchToCompactMode(){return this.mode=2,this}switchToNormalMode(){return this.mode=1,this}onCardActivate(e){this.emitHook("OnCardActivate",{cards:this,card:e})}onCardDeactivate(e){this.emitHook("OnCardDeactivate",{cards:this,card:e})}onCardShow(e){this.emitHook("OnCardShow",{cards:this,card:e})}onCardHide(e){this.emitHook("OnCardHide",{cards:this,card:e})}onCardDestroy(e){this.emitHook("OnCardDestroy",{cards:this,card:e})}scrollElementIntoView(e,t,i,s=!1){this.m_pScrollToElement=e,this.m_nScrollToSpacingTop=t,this.m_nScrollToSpacingBottom=i,this.m_pScrollToThrottle=this.m_pScrollToThrottle||new et((()=>{this.m_pCards&&this.m_pCards.scroll&&this.m_pScrollToElement&&this.m_pCards.scroll.scrollToAsset(this.m_pScrollToElement,!0,0,this.m_nScrollToSpacingTop,0,this.m_nScrollToSpacingBottom,s),this.m_pScrollToElement=void 0,this.m_nScrollToSpacingTop=void 0,this.m_nScrollToSpacingBottom=void 0}),1e3/60*2),this.m_pScrollToThrottle.invoke()}scrollCardIntoView(e){e.element&&this.scrollElementIntoView(e.element,e.isFirstObservable?this.spacingTop:this.spacingBetween,e.isLastObservable?this.spacingBottom:this.spacingBetween)}scrollToTopOrBottom(){this.m_pCards&&this.m_pCards.scroll&&this.m_pCards.scroll.scrollToTopOrBottom()}destroy(){this.m_pScrollToThrottle&&(this.m_pScrollToThrottle.cancel(),this.m_pScrollToThrottle=void 0,this.m_pScrollToElement=void 0,this.m_nScrollToSpacingTop=void 0,this.m_nScrollToSpacingBottom=void 0),this.onDestroy(),this.reverseEach((e=>e.destroy())),this.clear("dirty"),this.m_pCards&&(this.m_pCards.destroy(),this.m_pCards=void 0),this.m_pFeatures&&(this.m_pFeatures.destroy(),this.m_pFeatures=void 0),super.destroy()}}Aa.m_nTab=0,Aa.stylesheet=So.app,function(e){e[e.Normal=1]="Normal",e[e.Compact=2]="Compact",e[e.Both=3]="Both"}(da||(da={}));const ja={af:["Afrikaans","Afrikaans"],"af-NA":["Afrikaans (Namibia)","Afrikaans (Namibi)"],agq:["Aghem","Aghem"],ak:["Akan","Akan"],am:["Amharic",""],ar:["Arabic",""],"ar-AE":["Arabic (United Arab Emirates)"," (  )"],"ar-BH":["Arabic (Bahrain)"," ()"],"ar-DJ":["Arabic (Djibouti)"," ()"],"ar-DZ":["Arabic (Algeria)"," ()"],"ar-EG":["Arabic (Egypt)"," ()"],"ar-EH":["Arabic (Western Sahara)"," ( )"],"ar-ER":["Arabic (Eritrea)"," ()"],"ar-IL":["Arabic (Israel)"," ()"],"ar-IQ":["Arabic (Iraq)"," ()"],"ar-JO":["Arabic (Jordan)"," ()"],"ar-KM":["Arabic (Comoros)"," ( )"],"ar-KW":["Arabic (Kuwait)"," ()"],"ar-LB":["Arabic (Lebanon)"," ()"],"ar-LY":["Arabic (Libya)"," ()"],"ar-MA":["Arabic (Morocco)"," ()"],"ar-MR":["Arabic (Mauritania)"," ()"],"ar-OM":["Arabic (Oman)"," ()"],"ar-PS":["Arabic (Palestinian Territories)"," ( )"],"ar-QA":["Arabic (Qatar)"," ()"],"ar-SA":["Arabic (Saudi Arabia)"," (  )"],"ar-SD":["Arabic (Sudan)"," ()"],"ar-SO":["Arabic (Somalia)"," ()"],"ar-SS":["Arabic (South Sudan)"," ( )"],"ar-SY":["Arabic (Syria)"," ()"],"ar-TD":["Arabic (Chad)"," ()"],"ar-TN":["Arabic (Tunisia)"," ()"],"ar-YE":["Arabic (Yemen)"," ()"],as:["Assamese",""],asa:["Asu","Kipare"],ast:["Asturian","asturianu"],az:["Azerbaijani","azrbaycan"],"az-Cyrl":["Azerbaijani (Cyrillic)"," ()"],"az-Latn":["Azerbaijani (Latin)","azrbaycan (latn)"],bas:["Basaa","sa"],be:["Belarusian",""],"be-tarask":["Belarusian",""],bem:["Bemba","Ichibemba"],bez:["Bena","Hibena"],bg:["Bulgarian",""],bm:["Bambara","bamanakan"],bn:["Bangla",""],"bn-IN":["Bangla (India)"," ()"],bo:["Tibetan",""],"bo-IN":["Tibetan (India)"," ()"],br:["Breton","brezhoneg"],brx:["Bodo",""],bs:["Bosnian","bosanski"],"bs-Cyrl":["Bosnian (Cyrillic)"," ()"],"bs-Latn":["Bosnian (Latin)","bosanski (latinica)"],ca:["Catalan","catal"],"ca-AD":["Catalan (Andorra)","catal (Andorra)"],"ca-ES-valencia":["Catalan (Spain)","catal (Espanya)"],"ca-FR":["Catalan (France)","catal (Frana)"],"ca-IT":["Catalan (Italy)","catal (Itlia)"],ccp:["Chakma",""],"ccp-IN":["Chakma (India)"," ()"],ce:["Chechen",""],ceb:["Cebuano","Binisaya"],cgg:["Chiga","Rukiga"],chr:["Cherokee",""],ckb:["Central Kurdish"," "],"ckb-IR":["Central Kurdish (Iran)","  ()"],cs:["Czech","etina"],cy:["Welsh","Cymraeg"],da:["Danish","dansk"],"da-GL":["Danish (Greenland)","dansk (Grnland)"],dav:["Taita","Kitaita"],de:["German","Deutsch"],"de-AT":["German (Austria)","Deutsch (sterreich)"],"de-BE":["German (Belgium)","Deutsch (Belgien)"],"de-CH":["German (Switzerland)","Deutsch (Schweiz)"],"de-IT":["German (Italy)","Deutsch (Italien)"],"de-LI":["German (Liechtenstein)","Deutsch (Liechtenstein)"],"de-LU":["German (Luxembourg)","Deutsch (Luxemburg)"],dje:["Zarma","Zarmaciine"],doi:["Dogri",""],dsb:["Lower Sorbian","dolnoserbina"],dua:["Duala","dul"],dyo:["Jola-Fonyi","joola"],dz:["Dzongkha",""],ebu:["Embu","Kembu"],ee:["Ewe","Eegbe"],"ee-TG":["Ewe (Togo)","Eegbe (Togo nutome)"],el:["Greek",""],"el-CY":["Greek (Cyprus)"," ()"],en:["English","English"],"en-001":["English (world)","English (world)"],"en-150":["English (Europe)","English (Europe)"],"en-AE":["English (United Arab Emirates)","English (United Arab Emirates)"],"en-AG":["English (Antigua & Barbuda)","English (Antigua & Barbuda)"],"en-AI":["English (Anguilla)","English (Anguilla)"],"en-AS":["English (American Samoa)","English (American Samoa)"],"en-AT":["English (Austria)","English (Austria)"],"en-AU":["English (Australia)","English (Australia)"],"en-BB":["English (Barbados)","English (Barbados)"],"en-BE":["English (Belgium)","English (Belgium)"],"en-BI":["English (Burundi)","English (Burundi)"],"en-BM":["English (Bermuda)","English (Bermuda)"],"en-BS":["English (Bahamas)","English (Bahamas)"],"en-BW":["English (Botswana)","English (Botswana)"],"en-BZ":["English (Belize)","English (Belize)"],"en-CA":["English (Canada)","English (Canada)"],"en-CC":["English (Cocos (Keeling) Islands)","English (Cocos (Keeling) Islands)"],"en-CH":["English (Switzerland)","English (Switzerland)"],"en-CK":["English (Cook Islands)","English (Cook Islands)"],"en-CM":["English (Cameroon)","English (Cameroon)"],"en-CX":["English (Christmas Island)","English (Christmas Island)"],"en-CY":["English (Cyprus)","English (Cyprus)"],"en-DE":["English (Germany)","English (Germany)"],"en-DG":["English (Diego Garcia)","English (Diego Garcia)"],"en-DK":["English (Denmark)","English (Denmark)"],"en-DM":["English (Dominica)","English (Dominica)"],"en-ER":["English (Eritrea)","English (Eritrea)"],"en-FI":["English (Finland)","English (Finland)"],"en-FJ":["English (Fiji)","English (Fiji)"],"en-FK":["English (Falkland Islands)","English (Falkland Islands)"],"en-FM":["English (Micronesia)","English (Micronesia)"],"en-GB":["English (United Kingdom)","English (United Kingdom)"],"en-GD":["English (Grenada)","English (Grenada)"],"en-GG":["English (Guernsey)","English (Guernsey)"],"en-GH":["English (Ghana)","English (Ghana)"],"en-GI":["English (Gibraltar)","English (Gibraltar)"],"en-GM":["English (Gambia)","English (Gambia)"],"en-GU":["English (Guam)","English (Guam)"],"en-GY":["English (Guyana)","English (Guyana)"],"en-HK":["English (Hong Kong SAR China)","English (Hong Kong SAR China)"],"en-IE":["English (Ireland)","English (Ireland)"],"en-IL":["English (Israel)","English (Israel)"],"en-IM":["English (Isle of Man)","English (Isle of Man)"],"en-IN":["English (India)","English (India)"],"en-IO":["English (British Indian Ocean Territory)","English (British Indian Ocean Territory)"],"en-JE":["English (Jersey)","English (Jersey)"],"en-JM":["English (Jamaica)","English (Jamaica)"],"en-KE":["English (Kenya)","English (Kenya)"],"en-KI":["English (Kiribati)","English (Kiribati)"],"en-KN":["English (St. Kitts & Nevis)","English (St. Kitts & Nevis)"],"en-KY":["English (Cayman Islands)","English (Cayman Islands)"],"en-LC":["English (St. Lucia)","English (St. Lucia)"],"en-LR":["English (Liberia)","English (Liberia)"],"en-LS":["English (Lesotho)","English (Lesotho)"],"en-MG":["English (Madagascar)","English (Madagascar)"],"en-MH":["English (Marshall Islands)","English (Marshall Islands)"],"en-MO":["English (Macao SAR China)","English (Macao SAR China)"],"en-MP":["English (Northern Mariana Islands)","English (Northern Mariana Islands)"],"en-MS":["English (Montserrat)","English (Montserrat)"],"en-MT":["English (Malta)","English (Malta)"],"en-MU":["English (Mauritius)","English (Mauritius)"],"en-MW":["English (Malawi)","English (Malawi)"],"en-MY":["English (Malaysia)","English (Malaysia)"],"en-NA":["English (Namibia)","English (Namibia)"],"en-NF":["English (Norfolk Island)","English (Norfolk Island)"],"en-NG":["English (Nigeria)","English (Nigeria)"],"en-NL":["English (Netherlands)","English (Netherlands)"],"en-NR":["English (Nauru)","English (Nauru)"],"en-NU":["English (Niue)","English (Niue)"],"en-NZ":["English (New Zealand)","English (New Zealand)"],"en-PG":["English (Papua New Guinea)","English (Papua New Guinea)"],"en-PH":["English (Philippines)","English (Philippines)"],"en-PK":["English (Pakistan)","English (Pakistan)"],"en-PN":["English (Pitcairn Islands)","English (Pitcairn Islands)"],"en-PR":["English (Puerto Rico)","English (Puerto Rico)"],"en-PW":["English (Palau)","English (Palau)"],"en-RW":["English (Rwanda)","English (Rwanda)"],"en-SB":["English (Solomon Islands)","English (Solomon Islands)"],"en-SC":["English (Seychelles)","English (Seychelles)"],"en-SD":["English (Sudan)","English (Sudan)"],"en-SE":["English (Sweden)","English (Sweden)"],"en-SG":["English (Singapore)","English (Singapore)"],"en-SH":["English (St. Helena)","English (St. Helena)"],"en-SI":["English (Slovenia)","English (Slovenia)"],"en-SL":["English (Sierra Leone)","English (Sierra Leone)"],"en-SS":["English (South Sudan)","English (South Sudan)"],"en-SX":["English (Sint Maarten)","English (Sint Maarten)"],"en-SZ":["English (Eswatini)","English (Eswatini)"],"en-TC":["English (Turks & Caicos Islands)","English (Turks & Caicos Islands)"],"en-TK":["English (Tokelau)","English (Tokelau)"],"en-TO":["English (Tonga)","English (Tonga)"],"en-TT":["English (Trinidad & Tobago)","English (Trinidad & Tobago)"],"en-TV":["English (Tuvalu)","English (Tuvalu)"],"en-TZ":["English (Tanzania)","English (Tanzania)"],"en-UG":["English (Uganda)","English (Uganda)"],"en-UM":["English (U.S. Outlying Islands)","English (U.S. Outlying Islands)"],"en-VC":["English (St. Vincent & Grenadines)","English (St. Vincent & Grenadines)"],"en-VG":["English (British Virgin Islands)","English (British Virgin Islands)"],"en-VI":["English (U.S. Virgin Islands)","English (U.S. Virgin Islands)"],"en-VU":["English (Vanuatu)","English (Vanuatu)"],"en-WS":["English (Samoa)","English (Samoa)"],"en-ZA":["English (South Africa)","English (South Africa)"],"en-ZM":["English (Zambia)","English (Zambia)"],"en-ZW":["English (Zimbabwe)","English (Zimbabwe)"],eo:["Esperanto","esperanto"],es:["Spanish","espaol"],"es-419":["Spanish (Latin America)","espaol (Latinoamrica)"],"es-AR":["Spanish (Argentina)","espaol (Argentina)"],"es-BO":["Spanish (Bolivia)","espaol (Bolivia)"],"es-BR":["Spanish (Brazil)","espaol (Brasil)"],"es-BZ":["Spanish (Belize)","espaol (Belice)"],"es-CL":["Spanish (Chile)","espaol (Chile)"],"es-CO":["Spanish (Colombia)","espaol (Colombia)"],"es-CR":["Spanish (Costa Rica)","espaol (Costa Rica)"],"es-CU":["Spanish (Cuba)","espaol (Cuba)"],"es-DO":["Spanish (Dominican Republic)","espaol (Repblica Dominicana)"],"es-EA":["Spanish (Ceuta & Melilla)","espaol (Ceuta y Melilla)"],"es-EC":["Spanish (Ecuador)","espaol (Ecuador)"],"es-GQ":["Spanish (Equatorial Guinea)","espaol (Guinea Ecuatorial)"],"es-GT":["Spanish (Guatemala)","espaol (Guatemala)"],"es-HN":["Spanish (Honduras)","espaol (Honduras)"],"es-IC":["Spanish (Canary Islands)","espaol (Canarias)"],"es-MX":["Spanish (Mexico)","espaol (Mxico)"],"es-NI":["Spanish (Nicaragua)","espaol (Nicaragua)"],"es-PA":["Spanish (Panama)","espaol (Panam)"],"es-PE":["Spanish (Peru)","espaol (Per)"],"es-PH":["Spanish (Philippines)","espaol (Filipinas)"],"es-PR":["Spanish (Puerto Rico)","espaol (Puerto Rico)"],"es-PY":["Spanish (Paraguay)","espaol (Paraguay)"],"es-SV":["Spanish (El Salvador)","espaol (El Salvador)"],"es-US":["Spanish (United States)","espaol (Estados Unidos)"],"es-UY":["Spanish (Uruguay)","espaol (Uruguay)"],"es-VE":["Spanish (Venezuela)","espaol (Venezuela)"],et:["Estonian","eesti"],eu:["Basque","euskara"],ewo:["Ewondo","ewondo"],fa:["Persian",""],"fa-AF":["Persian (Afghanistan)"," ()"],ff:["Fulah","Pulaar"],"ff-Adlm":["Fulah (Adlam)"," ()"],"ff-Adlm-BF":["Fulah (Adlam, Burkina Faso)"," (  )"],"ff-Adlm-CM":["Fulah (Adlam, Cameroon)"," ( )"],"ff-Adlm-GH":["Fulah (Adlam, Ghana)"," ( )"],"ff-Adlm-GM":["Fulah (Adlam, Gambia)"," ( )"],"ff-Adlm-GW":["Fulah (Adlam, Guinea-Bissau)"," ( -)"],"ff-Adlm-LR":["Fulah (Adlam, Liberia)"," ( )"],"ff-Adlm-MR":["Fulah (Adlam, Mauritania)"," ( )"],"ff-Adlm-NE":["Fulah (Adlam, Niger)"," ( )"],"ff-Adlm-NG":["Fulah (Adlam, Nigeria)"," ( )"],"ff-Adlm-SL":["Fulah (Adlam, Sierra Leone)"," ( )"],"ff-Adlm-SN":["Fulah (Adlam, Senegal)"," ( )"],"ff-Latn":["Fulah (Latin)","Pulaar (Latn)"],"ff-Latn-BF":["Fulah (Latin, Burkina Faso)","Pulaar (Latn, Burkibaa Faaso)"],"ff-Latn-CM":["Fulah (Latin, Cameroon)","Pulaar (Latn, Kameruun)"],"ff-Latn-GH":["Fulah (Latin, Ghana)","Pulaar (Latn, Ganaa)"],"ff-Latn-GM":["Fulah (Latin, Gambia)","Pulaar (Latn, Gammbi)"],"ff-Latn-GN":["Fulah (Latin, Guinea)","Pulaar (Latn, Gine)"],"ff-Latn-GW":["Fulah (Latin, Guinea-Bissau)","Pulaar (Latn, Gine-Bisaawo)"],"ff-Latn-LR":["Fulah (Latin, Liberia)","Pulaar (Latn, Liberiyaa)"],"ff-Latn-MR":["Fulah (Latin, Mauritania)","Pulaar (Latn, Muritani)"],"ff-Latn-NE":["Fulah (Latin, Niger)","Pulaar (Latn, Nijeer)"],"ff-Latn-NG":["Fulah (Latin, Nigeria)","Pulaar (Latn, Nijeriyaa)"],"ff-Latn-SL":["Fulah (Latin, Sierra Leone)","Pulaar (Latn, Seraa liyon)"],fi:["Finnish","suomi"],fil:["Filipino","Filipino"],fo:["Faroese","froyskt"],"fo-DK":["Faroese (Denmark)","froyskt (Danmark)"],fr:["French","franais"],"fr-BE":["French (Belgium)","franais (Belgique)"],"fr-BF":["French (Burkina Faso)","franais (Burkina Faso)"],"fr-BI":["French (Burundi)","franais (Burundi)"],"fr-BJ":["French (Benin)","franais (Bnin)"],"fr-BL":["French (St. Barthlemy)","franais (Saint-Barthlemy)"],"fr-CA":["French (Canada)","franais (Canada)"],"fr-CD":["French (Congo - Kinshasa)","franais (Congo-Kinshasa)"],"fr-CF":["French (Central African Republic)","franais (Rpublique centrafricaine)"],"fr-CG":["French (Congo - Brazzaville)","franais (Congo-Brazzaville)"],"fr-CH":["French (Switzerland)","franais (Suisse)"],"fr-CI":["French (Cte dIvoire)","franais (Cte dIvoire)"],"fr-CM":["French (Cameroon)","franais (Cameroun)"],"fr-DJ":["French (Djibouti)","franais (Djibouti)"],"fr-DZ":["French (Algeria)","franais (Algrie)"],"fr-GA":["French (Gabon)","franais (Gabon)"],"fr-GF":["French (French Guiana)","franais (Guyane franaise)"],"fr-GN":["French (Guinea)","franais (Guine)"],"fr-GP":["French (Guadeloupe)","franais (Guadeloupe)"],"fr-GQ":["French (Equatorial Guinea)","franais (Guine quatoriale)"],"fr-HT":["French (Haiti)","franais (Hati)"],"fr-KM":["French (Comoros)","franais (Comores)"],"fr-LU":["French (Luxembourg)","franais (Luxembourg)"],"fr-MA":["French (Morocco)","franais (Maroc)"],"fr-MC":["French (Monaco)","franais (Monaco)"],"fr-MF":["French (St. Martin)","franais (Saint-Martin)"],"fr-MG":["French (Madagascar)","franais (Madagascar)"],"fr-ML":["French (Mali)","franais (Mali)"],"fr-MQ":["French (Martinique)","franais (Martinique)"],"fr-MR":["French (Mauritania)","franais (Mauritanie)"],"fr-MU":["French (Mauritius)","franais (Maurice)"],"fr-NC":["French (New Caledonia)","franais (Nouvelle-Caldonie)"],"fr-NE":["French (Niger)","franais (Niger)"],"fr-PF":["French (French Polynesia)","franais (Polynsie franaise)"],"fr-PM":["French (St. Pierre & Miquelon)","franais (Saint-Pierre-et-Miquelon)"],"fr-RE":["French (Runion)","franais (La Runion)"],"fr-RW":["French (Rwanda)","franais (Rwanda)"],"fr-SC":["French (Seychelles)","franais (Seychelles)"],"fr-SN":["French (Senegal)","franais (Sngal)"],"fr-SY":["French (Syria)","franais (Syrie)"],"fr-TD":["French (Chad)","franais (Tchad)"],"fr-TG":["French (Togo)","franais (Togo)"],"fr-TN":["French (Tunisia)","franais (Tunisie)"],"fr-VU":["French (Vanuatu)","franais (Vanuatu)"],"fr-WF":["French (Wallis & Futuna)","franais (Wallis-et-Futuna)"],"fr-YT":["French (Mayotte)","franais (Mayotte)"],fur:["Friulian","furlan"],fy:["Western Frisian","Frysk"],ga:["Irish","Gaeilge"],"ga-GB":["Irish (United Kingdom)","Gaeilge (an Rocht Aontaithe)"],gd:["Scottish Gaelic","Gidhlig"],gl:["Galician","galego"],gsw:["Swiss German","Schwiizerttsch"],"gsw-FR":["Swiss German (France)","Schwiizerttsch (Frankriich)"],"gsw-LI":["Swiss German (Liechtenstein)","Schwiizerttsch (Lichteschti)"],gu:["Gujarati",""],guz:["Gusii","Ekegusii"],gv:["Manx","Gaelg"],ha:["Hausa","Hausa"],"ha-GH":["Hausa (Ghana)","Hausa (Gana)"],"ha-NE":["Hausa (Niger)","Hausa (Nijar)"],haw:["Hawaiian","lelo Hawaii"],he:["Hebrew",""],hi:["Hindi",""],hr:["Croatian","hrvatski"],"hr-BA":["Croatian (Bosnia & Herzegovina)","hrvatski (Bosna i Hercegovina)"],hsb:["Upper Sorbian","hornjoserbina"],hu:["Hungarian","magyar"],hy:["Armenian",""],ia:["Interlingua","interlingua"],id:["Indonesian","Indonesia"],ig:["Igbo","Igbo"],ii:["Sichuan Yi",""],is:["Icelandic","slenska"],it:["Italian","italiano"],"it-CH":["Italian (Switzerland)","italiano (Svizzera)"],"it-SM":["Italian (San Marino)","italiano (San Marino)"],"it-VA":["Italian (Vatican City)","italiano (Citt del Vaticano)"],ja:["Japanese",""],jgo:["Ngomba","Ndaa"],jmc:["Machame","Kimachame"],jv:["Javanese","Jawa"],ka:["Georgian",""],kab:["Kabyle","Taqbaylit"],kam:["Kamba","Kikamba"],kde:["Makonde","Chimakonde"],kea:["Kabuverdianu","kabuverdianu"],kgp:["Kaingang","kanhgg"],khq:["Koyra Chiini","Koyra ciini"],ki:["Kikuyu","Gikuyu"],kk:["Kazakh"," "],kkj:["Kako","kak"],kl:["Kalaallisut","kalaallisut"],kln:["Kalenjin","Kalenjin"],km:["Khmer",""],kn:["Kannada",""],ko:["Korean",""],"ko-KP":["Korean (North Korea)","()"],kok:["Konkani",""],ks:["Kashmiri",""],"ks-Arab":["Kashmiri (Arabic)"," ()"],ksb:["Shambala","Kishambaa"],ksf:["Bafia","rikpa"],ksh:["Colognian","Klsch"],ku:["Kurdish","kurd"],kw:["Cornish","kernewek"],ky:["Kyrgyz",""],lag:["Langi","Klaangi"],lb:["Luxembourgish","Ltzebuergesch"],lg:["Ganda","Luganda"],lkt:["Lakota","Lakliyapi"],ln:["Lingala","lingla"],"ln-AO":["Lingala (Angola)","lingla (Angla)"],"ln-CF":["Lingala (Central African Republic)","lingla (Repibiki ya Afrka ya Kti)"],"ln-CG":["Lingala (Congo - Brazzaville)","lingla (Kongo)"],lo:["Lao",""],lrc:["Northern Luri"," "],"lrc-IQ":["Northern Luri (Iraq)","  (IQ)"],lt:["Lithuanian","lietuvi"],lu:["Luba-Katanga","Tshiluba"],luo:["Luo","Dholuo"],luy:["Luyia","Luluhia"],lv:["Latvian","latvieu"],mai:["Maithili",""],mas:["Masai","Maa"],"mas-TZ":["Masai (Tanzania)","Maa (Tansania)"],mer:["Meru","Kmr"],mfe:["Morisyen","kreol morisien"],mg:["Malagasy","Malagasy"],mgh:["Makhuwa-Meetto","Makua"],mgo:["Meta","meta"],mi:["Mori","te reo Mori"],mk:["Macedonian",""],ml:["Malayalam",""],mn:["Mongolian",""],mni:["Manipuri",""],"mni-Beng":["Manipuri (Bangla)"," ()"],mr:["Marathi",""],ms:["Malay","Melayu"],"ms-BN":["Malay (Brunei)","Melayu (Brunei)"],"ms-ID":["Malay (Indonesia)","Melayu (Indonesia)"],"ms-SG":["Malay (Singapore)","Melayu (Singapura)"],mt:["Maltese","Malti"],mua:["Mundang","MUNDA"],my:["Burmese",""],mzn:["Mazanderani",""],naq:["Nama","Khoekhoegowab"],nb:["Norwegian Bokml","norsk bokml"],"nb-SJ":["Norwegian Bokml (Svalbard & Jan Mayen)","norsk bokml (Svalbard og Jan Mayen)"],nd:["North Ndebele","isiNdebele"],nds:["Low German","nds"],"nds-NL":["Low German (Netherlands)","nds (NL)"],ne:["Nepali",""],"ne-IN":["Nepali (India)"," ()"],nl:["Dutch","Nederlands"],"nl-AW":["Dutch (Aruba)","Nederlands (Aruba)"],"nl-BE":["Dutch (Belgium)","Nederlands (Belgi)"],"nl-BQ":["Dutch (Caribbean Netherlands)","Nederlands (Caribisch Nederland)"],"nl-CW":["Dutch (Curaao)","Nederlands (Curaao)"],"nl-SR":["Dutch (Suriname)","Nederlands (Suriname)"],"nl-SX":["Dutch (Sint Maarten)","Nederlands (Sint-Maarten)"],nmg:["Kwasio","nmg"],nn:["Norwegian Nynorsk","norsk nynorsk"],nnh:["Ngiemboon","Shw ngiembn"],no:["Norwegian","norsk"],nus:["Nuer","Thok Nath"],nyn:["Nyankole","Runyankore"],om:["Oromo","Oromoo"],"om-KE":["Oromo (Kenya)","Oromoo (Keeniyaa)"],or:["Odia",""],os:["Ossetic",""],"os-RU":["Ossetic (Russia)"," ()"],pa:["Punjabi",""],"pa-Arab":["Punjabi (Arabic)"," ()"],"pa-Guru":["Punjabi (Gurmukhi)"," ()"],pcm:["Nigerian Pidgin","Naijri Pjin"],pl:["Polish","polski"],ps:["Pashto",""],"ps-PK":["Pashto (Pakistan)"," ()"],pt:["Portuguese","portugus"],"pt-AO":["Portuguese (Angola)","portugus (Angola)"],"pt-CH":["Portuguese (Switzerland)","portugus (Sua)"],"pt-CV":["Portuguese (Cape Verde)","portugus (Cabo Verde)"],"pt-GQ":["Portuguese (Equatorial Guinea)","portugus (Guin Equatorial)"],"pt-GW":["Portuguese (Guinea-Bissau)","portugus (Guin-Bissau)"],"pt-LU":["Portuguese (Luxembourg)","portugus (Luxemburgo)"],"pt-MO":["Portuguese (Macao SAR China)","portugus (Macau, RAE da China)"],"pt-MZ":["Portuguese (Mozambique)","portugus (Moambique)"],"pt-PT":["Portuguese (Portugal)","portugus (Portugal)"],"pt-ST":["Portuguese (So Tom & Prncipe)","portugus (So Tom e Prncipe)"],"pt-TL":["Portuguese (Timor-Leste)","portugus (Timor-Leste)"],qu:["Quechua","Runasimi"],"qu-BO":["Quechua (Bolivia)","Runasimi (Bolivia)"],"qu-EC":["Quechua (Ecuador)","Runasimi (Ecuador)"],rm:["Romansh","rumantsch"],rn:["Rundi","Ikirundi"],ro:["Romanian","romn"],"ro-MD":["Romanian (Moldova)","romn (Republica Moldova)"],rof:["Rombo","Kihorombo"],ru:["Russian",""],"ru-BY":["Russian (Belarus)"," ()"],"ru-KG":["Russian (Kyrgyzstan)"," ()"],"ru-KZ":["Russian (Kazakhstan)"," ()"],"ru-MD":["Russian (Moldova)"," ()"],"ru-UA":["Russian (Ukraine)"," ()"],rw:["Kinyarwanda","Kinyarwanda"],rwk:["Rwa","Kiruwa"],sa:["Sanskrit"," "],sah:["Sakha"," "],saq:["Samburu","Kisampur"],sat:["Santali",""],"sat-Olck":["Santali (Ol Chiki)"," ( )"],sbp:["Sangu","Ishisangu"],sc:["Sardinian","sardu"],sd:["Sindhi",""],"sd-Arab":["Sindhi (Arabic)"," ()"],"sd-Deva":["Sindhi (Devanagari)"," ()"],se:["Northern Sami","davvismegiella"],"se-FI":["Northern Sami (Finland)","davvismegiella (Suopma)"],"se-SE":["Northern Sami (Sweden)","davvismegiella (Ruoa)"],seh:["Sena","sena"],ses:["Koyraboro Senni","Koyraboro senni"],sg:["Sango","Sng"],shi:["Tachelhit",""],"shi-Latn":["Tachelhit (Latin)","Tasheliyt (Latn)"],"shi-Tfng":["Tachelhit (Tifinagh)"," (Tfng)"],si:["Sinhala",""],sk:["Slovak","slovenina"],sl:["Slovenian","slovenina"],smn:["Inari Sami","anarkiel"],sn:["Shona","chiShona"],so:["Somali","Soomaali"],"so-DJ":["Somali (Djibouti)","Soomaali (Jabuuti)"],"so-ET":["Somali (Ethiopia)","Soomaali (Itoobiya)"],"so-KE":["Somali (Kenya)","Soomaali (Kenya)"],sq:["Albanian","shqip"],"sq-MK":["Albanian (North Macedonia)","shqip (Maqedonia e Veriut)"],"sq-XK":["Albanian (Kosovo)","shqip (Kosov)"],sr:["Serbian",""],"sr-Cyrl":["Serbian (Cyrillic)"," ()"],"sr-Cyrl-BA":["Serbian (Cyrillic, Bosnia & Herzegovina)"," (,   )"],"sr-Cyrl-ME":["Serbian (Cyrillic, Montenegro)"," (,  )"],"sr-Cyrl-XK":["Serbian (Cyrillic, Kosovo)"," (, )"],"sr-Latn":["Serbian (Latin)","srpski (latinica)"],"sr-Latn-BA":["Serbian (Latin, Bosnia & Herzegovina)","srpski (latinica, Bosna i Hercegovina)"],"sr-Latn-ME":["Serbian (Latin, Montenegro)","srpski (latinica, Crna Gora)"],"sr-Latn-XK":["Serbian (Latin, Kosovo)","srpski (latinica, Kosovo)"],su:["Sundanese","Basa Sunda"],"su-Latn":["Sundanese (Latin)","Basa Sunda (Latin)"],sv:["Swedish","svenska"],"sv-AX":["Swedish (land Islands)","svenska (land)"],"sv-FI":["Swedish (Finland)","svenska (Finland)"],sw:["Swahili","Kiswahili"],"sw-CD":["Swahili (Congo - Kinshasa)","Kiswahili (Jamhuri ya Kidemokrasia ya Kongo)"],"sw-KE":["Swahili (Kenya)","Kiswahili (Kenya)"],"sw-UG":["Swahili (Uganda)","Kiswahili (Uganda)"],ta:["Tamil",""],"ta-LK":["Tamil (Sri Lanka)"," ()"],"ta-MY":["Tamil (Malaysia)"," ()"],"ta-SG":["Tamil (Singapore)"," ()"],te:["Telugu",""],teo:["Teso","Kiteso"],"teo-KE":["Teso (Kenya)","Kiteso (Kenia)"],tg:["Tajik",""],th:["Thai",""],ti:["Tigrinya",""],"ti-ER":["Tigrinya (Eritrea)"," ()"],tk:["Turkmen","trkmen dili"],to:["Tongan","lea fakatonga"],tr:["Turkish","Trke"],"tr-CY":["Turkish (Cyprus)","Trke (Kbrs)"],tt:["Tatar",""],twq:["Tasawaq","Tasawaq senni"],tzm:["Central Atlas Tamazight","Tamazit n lala"],ug:["Uyghur",""],uk:["Ukrainian",""],und:["Unknown language","und"],ur:["Urdu",""],"ur-IN":["Urdu (India)"," ()"],uz:["Uzbek","ozbek"],"uz-Arab":["Uzbek (Arabic)"," ()"],"uz-Cyrl":["Uzbek (Cyrillic)"," ()"],"uz-Latn":["Uzbek (Latin)","ozbek (lotin)"],vai:["Vai",""],"vai-Latn":["Vai (Latin)","Vai (Latn)"],"vai-Vaii":["Vai (Vai)"," (Vaii)"],vi:["Vietnamese","Ting Vit"],vun:["Vunjo","Kyivunjo"],wae:["Walser","Walser"],wo:["Wolof","Wolof"],xh:["Xhosa","isiXhosa"],xog:["Soga","Olusoga"],yav:["Yangben","nuasue"],yi:["Yiddish",""],yo:["Yoruba","d Yorb"],"yo-BJ":["Yoruba (Benin)","d Yorb (Bn)"],yrl:["Nheengatu","nhegatu"],"yrl-CO":["Nheengatu (Colombia)","engat (Kurbiya)"],"yrl-VE":["Nheengatu (Venezuela)","engat (Wenesuera)"],yue:["Cantonese",""],"yue-Hans":["Cantonese (Simplified)"," ()"],"yue-Hant":["Cantonese (Traditional)"," ()"],zgh:["Standard Moroccan Tamazight",""],zh:["Chinese",""],"zh-Hans":["Chinese (Simplified)",""],"zh-Hans-HK":["Chinese (Simplified, Hong Kong SAR China)",""],"zh-Hans-MO":["Chinese (Simplified, Macao SAR China)",""],"zh-Hans-SG":["Chinese (Simplified, Singapore)",""],"zh-Hant":["Chinese (Traditional)",""],"zh-Hant-HK":["Chinese (Traditional, Hong Kong SAR China)",""],"zh-Hant-MO":["Chinese (Traditional, Macao SAR China)",""],zu:["Zulu","isiZulu"]},Ta={locale:"en",domain:"en",direction:"ltr",countryCode:"",country:"",countryNative:"",language:"English",languageNative:"English",translations:{months:{formatted:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nominative:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]}},days:{formatted:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nominative:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},time:{AM:"AM",PM:"PM"}},formats:{date:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},time:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTime:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}"},numbers:{decimals:".",grouping:",",minus:"-"}}};class za{static get locale(){return this.m_pLocale||Ta}static get identifier(){return this.locale.locale}static get domain(){return this.locale.domain}static get countryCode(){return this.locale.countryCode}static get country(){return this.locale.country}static get countryNative(){return this.locale.countryNative}static get language(){return this.locale.language}static get languageNative(){return this.locale.languageNative}static get locales(){const e=[];return ee(ja,((t,i)=>{e.push(i)}),{keys:!0}),e}static get domains(){const e=[];return ee(ja,((t,i)=>{e.push({locale:i,language:t[0],native:t[1]})}),{keys:!0}),e}static isLoaded(e){return C(e)&&k(this.m_pLocales[e.toLowerCase()])}static load(e,t=!0){let i=!1;return ee(z(e)?e:[e],(e=>{K(e,Ta,!1)&&(this.isLoaded(e.locale)||(this.m_pLocales[e.locale.toLowerCase()]=J(e)),i=!0)})),i&&t&&!z(e)&&this.set(e.locale),i}static get(e){return(C(e)?this.m_pLocales[e.toLowerCase()]:void 0)||this.locale}static set(e){return k(this.m_pLocale=this.isLoaded(e)&&this.m_pLocales[e.toLowerCase()].locale===e?this.m_pLocales[e.toLowerCase()]:void 0)}static findDomain(e){if(!e||ja[e])return e||"";e=t.replace(e.toLowerCase(),"_","-"),this.m_pDomains||(this.m_pDomains={},ee(ja,((e,t)=>{this.m_pDomains[t.toLowerCase()]=t}),{keys:!0}));let i=this.m_pDomains[e];for(;!i&&-1!==e.lastIndexOf("-");)e=e.substr(0,e.lastIndexOf("-")),i=this.m_pDomains[e];return i||""}static getDomain(e){e=this.findDomain(e)||this.locale.domain;const t=ja[e];return{locale:e,language:t[0],native:t[1]}}static number(t,i=0,s=!0,o){const n=this.get(o);return e.format(t,i,s?n.formats.numbers.grouping:"",n.formats.numbers.decimals,n.formats.numbers.minus)}static dateTime(e,t=M.now,i=!1,s){const o=this.get(s);return M.format(e,t,i,{monthsFormattedAbbreviated:o.translations.months.formatted.abbreviated,monthsFormattedNarrow:o.translations.months.formatted.narrow,monthsFormattedWide:o.translations.months.formatted.wide,monthsNominativeAbbreviated:o.translations.months.nominative.abbreviated,monthsNominativeNarrow:o.translations.months.nominative.narrow,monthsNominativeWide:o.translations.months.nominative.wide,weekdaysFormattedAbbreviated:o.translations.days.formatted.abbreviated,weekdaysFormattedNarrow:o.translations.days.formatted.narrow,weekdaysFormattedShort:o.translations.days.formatted.short,weekdaysFormattedWide:o.translations.days.formatted.wide,weekdaysNominativeAbbreviated:o.translations.days.nominative.abbreviated,weekdaysNominativeNarrow:o.translations.days.nominative.narrow,weekdaysNominativeShort:o.translations.days.nominative.short,weekdaysNominativeWide:o.translations.days.nominative.wide,AM:o.translations.time.AM,PM:o.translations.time.PM})}static dateFull(e=M.now,t=!1,i){return this.dateTime(this.get(i).formats.date.full,e,t,i)}static dateLong(e=M.now,t=!1,i){return this.dateTime(this.get(i).formats.date.long,e,t,i)}static dateMedium(e=M.now,t=!1,i){return this.dateTime(this.get(i).formats.date.medium,e,t,i)}static dateShort(e=M.now,t=!1,i){return this.dateTime(this.get(i).formats.date.short,e,t,i)}static timeFull(e=M.now,t=!1,i){return this.dateTime(this.get(i).formats.time.full,e,t,i)}static timeLong(e=M.now,t=!1,i){return this.dateTime(this.get(i).formats.time.long,e,t,i)}static timeMedium(e=M.now,t=!1,i){return this.dateTime(this.get(i).formats.time.medium,e,t,i)}static timeShort(e=M.now,t=!1,i){return this.dateTime(this.get(i).formats.time.short,e,t,i)}static dateTimeFull(e=M.now,i=!1,s){const o=this.get(s);return this.dateTime(t.replace(t.replace(o.formats.dateTime.full,"{0}",o.formats.time.full),"{1}",o.formats.date.full),e,i,s)}static dateTimeLong(e=M.now,i=!1,s){const o=this.get(s);return this.dateTime(t.replace(t.replace(o.formats.dateTime.long,"{0}",o.formats.time.long),"{1}",o.formats.date.long),e,i,s)}static dateTimeMedium(e=M.now,i=!1,s){const o=this.get(s);return this.dateTime(t.replace(t.replace(o.formats.dateTime.medium,"{0}",o.formats.time.medium),"{1}",o.formats.date.medium),e,i,s)}static dateTimeShort(e=M.now,i=!1,s){const o=this.get(s);return this.dateTime(t.replace(t.replace(o.formats.dateTime.short,"{0}",o.formats.time.short),"{1}",o.formats.date.short),e,i,s)}get locale(){return this.m_pLocale||za.locale}get identifier(){return this.locale.locale}get domain(){return this.locale.domain}get countryCode(){return this.locale.countryCode}get country(){return this.locale.country}get countryNative(){return this.locale.countryNative}get language(){return this.locale.language}get languageNative(){return this.locale.languageNative}load(e){const t=za.load(e,!1);return this.set(e.locale),t}set(e){return k(this.m_pLocale=za.isLoaded(e)&&za.m_pLocales[e.toLowerCase()].locale===e?za.m_pLocales[e.toLowerCase()]:void 0)}number(e,t=0,i=!0){return za.number(e,t,i,this.identifier)}dateTime(e,t=M.now,i=!1){return za.dateTime(e,t,i,this.identifier)}dateFull(e=M.now,t=!1){return za.dateFull(e,t,this.identifier)}dateLong(e=M.now,t=!1){return za.dateLong(e,t,this.identifier)}dateMedium(e=M.now,t=!1){return za.dateMedium(e,t,this.identifier)}dateShort(e=M.now,t=!1){return za.dateShort(e,t,this.identifier)}timeFull(e=M.now,t=!1){return za.timeFull(e,t,this.identifier)}timeLong(e=M.now,t=!1){return za.timeLong(e,t,this.identifier)}timeMedium(e=M.now,t=!1){return za.timeMedium(e,t,this.identifier)}timeShort(e=M.now,t=!1){return za.timeShort(e,t,this.identifier)}dateTimeFull(e=M.now,t=!1){return za.dateTimeFull(e,t,this.identifier)}dateTimeLong(e=M.now,t=!1){return za.dateTimeLong(e,t,this.identifier)}dateTimeMedium(e=M.now,t=!1){return za.dateTimeMedium(e,t,this.identifier)}dateTimeShort(e=M.now,t=!1){return za.dateTimeShort(e,t,this.identifier)}}za.m_pLocales={};const Ea={"Asian (Chinese, Japanese, Korean)":{rules:["Everything"],expression:"nplurals=1; plural=0;",locales:["zh","ja","ko"],fn:e=>0},Persian:{rules:["Everything"],expression:"nplurals=1; plural=0;",locales:["fa"],fn:e=>0},"Turkic/Altaic (Turkish)":{rules:["Everything"],expression:"nplurals=1; plural=0;",locales:["tr"],fn:e=>0},Thai:{rules:["Everything"],expression:"nplurals=1; plural=0;",locales:["th"],fn:e=>0},Lao:{rules:["Everything"],expression:"nplurals=1; plural=0;",locales:["lo"],fn:e=>0},"Germanic (Danish, Dutch, English, Faroese, Frisian, German, Norwegian, Swedish)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["da","nl","en","fo","fy","de","nn","sv"],fn:e=>1!==e?1:0},"Finno-Ugric (Estonian, Finnish, Hungarian)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["et","fi","hu"],fn:e=>1!==e?1:0},"Language isolate (Basque)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["eu"],fn:e=>1!==e?1:0},"Latin/Greek (Greek)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["el"],fn:e=>1!==e?1:0},"Semitic (Hebrew)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["he"],fn:e=>1!==e?1:0},"Romanic (Italian, Portuguese, Spanish, Catalan)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["it","pt","es","ca"],fn:e=>1!==e?1:0},Vietnamese:{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["vi"],fn:e=>1!==e?1:0},"Romanic (French, Brazilian Portuguese)":{rules:["Is 0 or 1","Everything else"],expression:"nplurals=2; plural=(n > 1);",locales:["fr","pt_BR"],fn:e=>e>1?1:0},Lingala:{rules:["Is 0 or 1","Everything else"],expression:"nplurals=2; plural=(n > 1);",locales:["ln"],fn:e=>e>1?1:0},"Baltic (Latvian, Latgalian)":{rules:["Ends in 0","Ends in 1, excluding 11","Everything else"],expression:"nplurals=3; plural=(n%10==0 || (n%100>=11 && n%100<=19) ? 0 : n%10==1 && n%100!=11 ? 1 : 2);",locales:["lv"],fn:e=>e%10==0||e%100>=11&&e%100<=19?0:e%10==1&&e%100!=11?1:2},"Celtic (Scottish Gaelic)":{rules:["Is 1 or 11","Is 2 or 12","Is 3-10 or 13-19","Everything else"],expression:"nplurals=4; plural=(n==1 || n==11 ? 0 : n==2 || n==12 ? 1 : (n>=3 && n<=10) || (n>=13 && n<=19) ? 2 : 3);",locales:["gd"],fn:e=>1===e||11===e?0:2===e||12===e?1:e>=3&&e<=10||e>=13&&e<=19?2:3},"Romanic (Romanian)":{rules:["Is 1","Is 0 or ends in 01-19, excluding 1","Everything else"],expression:"nplurals=3; plural=(n==1 ? 0 : n==0 || (n!=1 && n%100>=1 && n%100<=19) ? 1 : 2);",locales:["ro"],fn:e=>1===e?0:0===e||1!==e&&e%100>=1&&e%100<=19?1:2},"Baltic (Lithuanian)":{rules:["Ends in 1, excluding 11","Ends in 0 or ends in 11-19","Everything else"],expression:"nplurals=3; plural=(n%10==1 && (n%100<11 || n%100>19) ? 0 : n%10>=2 && n%10<=9 && (n%100<11 || n%100>19) ? 1 : 2);",locales:["lt"],fn:e=>e%10==1&&(e%100<11||e%100>19)?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},Belarusian:{rules:["Ends in 1, excluding 11","Ends in 2-4, excluding 12-14","Everything else"],expression:"nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);",locales:["be"],fn:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2},Russian:{rules:["Ends in 1, excluding 11","Ends in 2-4, excluding 12-14","Everything else"],expression:"nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);",locales:["ru"],fn:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2},Ukrainian:{rules:["Ends in 1, excluding 11","Ends in 2-4, excluding 12-14","Everything else"],expression:"nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);",locales:["uk"],fn:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2},"Slavic (Slovak, Czech)":{rules:["Is 1","Is 2-4","Everything else"],expression:"nplurals=3; plural=(n==1 ? 0 : n>=2 && n<=4 ? 1 : 2);",locales:["sk","cs"],fn:e=>1===e?0:e>=2&&e<=4?1:2},"Slavic (Polish)":{rules:["Is 1","Ends in 2-4, excluding 12-14","Everything else"],expression:"nplurals=3; plural=(n==1 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);",locales:["pl"],fn:e=>1===e?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2},"Slavic (Slovenian, Sorbian)":{rules:["Ends in 01","Ends in 02","Ends in 03-04","Everything else"],expression:"nplurals=4; plural=(n%100==1 ? 0 : n%100==2 ? 1 : n%100>=3 && n%100<=4 ? 2 : 3);",locales:["sl","dsb","hsb"],fn:e=>e%100==1?0:e%100==2?1:e%100>=3&&e%100<=4?2:3},"Celtic (Irish Gaelic)":{rules:["Is 1","Is 2","Is 3-6","Is 7-10","Everything else"],expression:"nplurals=5; plural=(n==1 ? 0 : n==2 ? 1 : n>=3 && n<=6 ? 2 : n>=7 && n<=10 ? 3 : 4);",locales:["ga"],fn:e=>1===e?0:2===e?1:e>=3&&e<=6?2:e>=7&&e<=10?3:4},"Semitic (Arabic)":{rules:["Is 0","Is 1","Is 2","Ends in 03-10","Everything else but is 0 and ends in 00-02, excluding 0-2","Ends in 00-02, excluding 0-2"],expression:"nplurals=6; plural=(n==0 ? 0 : n==1 ? 1 : n==2 ? 2 : n%100>=3 && n%100<=10 ? 3 : n%100>=11 && n%100<=99 ? 4 : 5);",locales:["ar"],fn:e=>0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11&&e%100<=99?4:5},"Semitic (Maltese)":{rules:["Is 1","Is 0 or ends in 01-10, excluding 1","Ends in 11-19","Everything else"],expression:"nplurals=4; plural=(n==1 ? 0 : n==0 || (n%100>=2 && n%100<=10) ? 1 : n%100>=11 && n%100<=19 ? 2 : 3);",locales:["mt"],fn:e=>1===e?0:0===e||e%100>=2&&e%100<=10?1:e%100>=11&&e%100<=19?2:3},Icelandic:{rules:["Ends in 1, excluding 11","Everything else"],expression:"nplurals=2; plural=(n%10==1 && n%100!=11 ? 0 : 1);",locales:["is"],fn:e=>e%10==1&&e%100!=11?0:1},Macedonian:{rules:["Ends in 1, excluding 11","Everything else"],expression:"nplurals=2; plural=(n%10==1 && n%100!=11 ? 0 : 1);",locales:["mk"],fn:e=>e%10==1&&e%100!=11?0:1},"Celtic (Breton)":{rules:["Ends in 1, excluding 11, 71, 91","Ends in 2, excluding 12, 72, 92","Ends in 3, 4 or 9 excluding 13, 14, 19, 73, 74, 79, 93, 94, 99","Ends in 000000","Everything else"],expression:"nplurals=5; plural=(n%10==1 && n%100!=11 && n%100!=71 && n%100!=91 ? 0 : n%10==2 && n%100!=12 && n%100!=72 && n%100!=92 ? 1 : ((n%10>=3 && n%10<=4) || n%10==9) && (n%100<10 || n%100>19) && (n%100<70 || n%100>79) && (n%100<90 || n%100>99) ? 2 : n!=0 && n%1000000==0 ? 3 : 4);",locales:["br"],fn:e=>e%10==1&&e%100!=11&&e%100!=71&&e%100!=91?0:e%10==2&&e%100!=12&&e%100!=72&&e%100!=92?1:(e%10>=3&&e%10<=4||e%10==9)&&(e%100<10||e%100>19)&&(e%100<70||e%100>79)&&(e%100<90||e%100>99)?2:0!==e&&e%1e6==0?3:4},"Ecuador indigenous languages (Shuar)":{rules:["Is 0","Everything else"],expression:"nplurals=2; plural=(n != 0);",locales:[],fn:e=>0!==e?1:0},Welsh:{rules:["Is 0","Is 1","Is 2","Is 3","Is 6","Everything else"],expression:"nplurals=6; plural=(n==0 ? 0 : n==1 ? 1 : n==2 ? 2 : n==3 ? 3 : n==6 ? 4 : 5);",locales:["cy"],fn:e=>0===e?0:1===e?1:2===e?2:3===e?3:6===e?4:5},"Slavic (Bosnian, Croatian, Serbian)":{rules:["Ends in 1, excluding 11","Ends in 2-4, excluding 12-14","Everything else"],expression:"nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);",locales:["bs","hr","sr"],fn:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2}};class Oa{static get rules(){const e=[];return ee(Ea,((t,i)=>{e.push({family:i,rules:t.rules,expression:t.expression,locales:t.locales,fn:t.fn})}),{keys:!0}),e.sort(((e,t)=>e.family.localeCompare(t.family,za.domain,{sensitivity:"base"})))}static get locales(){const e={};return ee(Ea,((t,i)=>{ee(t.locales,(s=>{e[s]={family:i,rules:t.rules,expression:t.expression,locales:t.locales,fn:t.fn}}))}),{keys:!0}),e}static getForLocale(e){return this.locales[e||za.domain]}static getForFamily(e){return ue(this.rules,(t=>t.family===e))}static getForExpression(e){return ue(this.rules,(t=>t.expression===e))||ue(this.rules,(i=>t.removeWhitespaces(i.expression)===t.removeWhitespaces(e)))}}class Pa{constructor(e){this.m_nPlurals=1;const t=(this.m_pTranslation=J(e))[""];if(k(t)){let e=W(t["plural-forms"]);if(C(e)){const t=Oa.getForExpression(e);if(t&&t.rules.length>0)this.m_nPlurals=t.rules.length,this.m_fnPlural=t.fn;else{const t=/nplurals\=(\d+);/;let i;if(e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),/;\s*$/.test(e)||(e=e.concat(";")),i=G(R(e.match(t),1)),i>1&&(e=e.replace(t,""),e=W(R(e.match(/plural\=(.*);/),1)),C(e)&&/^[0-9n\u002b\u002d\u002a\u002f\u0025\u003e\u003c\u003d\u0021\u007e\u007c\u0026\u005e\u0028\u0029\u003a\u003b\u003f\s]+$/.test(e))){const t=new Function("n","return "+e);this.m_nPlurals=i,this.m_fnPlural=e=>G(t(e))}}}}}get plurals(){return this.m_nPlurals}enrich(e,t){ee(e,((e,i)=>{!i||this.m_pTranslation[i]&&!t||(this.m_pTranslation[i]=e)}),{keys:!0})}plural(t){return e.range(this.m_fnPlural?this.m_fnPlural(t):1!==t?1:0,0,this.plurals-1)}translation(e){return this.m_pTranslation[e]}}class Ra{constructor(){this.m_pTranslations={},this.m_pCache={},this.m_sDefault=za.domain,this.m_sCurrent=""}static assert(){return this.m_pTranslations||(this.m_pTranslations=new Ra)}static get domains(){return this.assert().domains}static get default(){return this.assert().default}static set default(e){this.assert().default=e}static get current(){return this.assert().current}static set current(e){this.assert().current=e}static load(e,t=!0,i="enrich"){return this.assert().load(e,t,i)}static unload(e){this.assert().unload(e)}static isLoaded(e){return this.assert().isLoaded(e)}static reset(e=""){this.assert().reset(e)}static translate(e,t,i,s=!1,o="",n=0,...r){return this.assert().translate(e,t,i,s,o,n,...r)}message(e,t,i,s,o){if(e){const n=e.translation((t?t+"":"")+i);if(n){const t=1+(s?e.plural(o):0);if(t<n.length){const e=n[t];if("string"==typeof e)return e;if(Array.isArray(e)&&1===e.length){const t=e[0];if("string"==typeof t)return t}return""}}}return""}find(e,t,i,s,o){if(!e)return"";const n=e+""+t+i+""+(s?"P":"S")+o,r=this.m_pCache[n]||(this.m_pCache[n]=this.message(this.m_pTranslations[e],t,i,s,o));if(r)return r;const a=Ra.m_pAlternatives[e];if(a)return this.find(a.alternative,t,i,s,o);const l=e.lastIndexOf("-"),c=-1!==l?e.substr(0,l):void 0;return Ra.m_pAlternatives[e]={alternative:c},this.find(c,t,i,s,o)}invalidate(e){if(!e)return;const t=e+"";ee(this.m_pCache,((e,i)=>{0===i.indexOf(t)&&$e(this.m_pCache,i)}),{keys:!0})}get domains(){const e=[];return ee(this.m_pTranslations,((t,i)=>{e.push(i)}),{keys:!0}),e}get default(){return this.m_sDefault}set default(e){(e=za.findDomain(e))&&(this.m_sDefault=e)}get current(){return this.m_sCurrent||this.default}set current(e){this.m_sCurrent=za.findDomain(e)}load(e,t,i){let s=!1,o="";return ee(z(e)?e:[e],(e=>{if(k(e)){const t=e[""];if(k(t)){Ue(t,"language",za.findDomain(t.language)||this.current),this.invalidate(t.language);const n="replace"!==i?this.m_pTranslations[t.language]:void 0;n?n.enrich(e,"overwrite"===i):this.m_pTranslations[t.language]=new Pa(e),o||(o=t.language),s=!0}}})),!1===t||!o||!0!==t&&this.m_sCurrent||(this.current=o),s}unload(e){e?(e=za.findDomain(e),this.invalidate(e),$e(this.m_pTranslations,e)):ee(this.m_pTranslations,((e,t)=>{this.invalidate(t),$e(this.m_pTranslations,t)}),{keys:!0})}isLoaded(e){return this.default===e||this.m_pTranslations[za.findDomain(e)]instanceof Pa}reset(e=""){this.unload(),this.current=e}translate(e,t,i,s,o,n,...r){const a=this.find(e,t,i,s,n)||e!==this.default&&this.find(this.default,t,i,s,n)||(s&&1!==n?o:i);return r.length>0?a.replace(/%(\d+)/g,((e,t)=>W(R(r,G(t)-1,e)))):a}}Ra.m_pAlternatives={};class Ha{constructor(e,t){this.m_pLocale=t?za:new za,this.m_pTranslations=e?Ra:new Ra}static get global(){return this.m_pNamespaces[""]||(this.m_pNamespaces[""]=new Ha(!0,!0))}static create(e){return this.m_pNamespaces[e]||(this.m_pNamespaces[e]=new Ha(!1,!1))}static translation(e){return this.m_pNamespaces[e]||(this.m_pNamespaces[e]=new Ha(!1,!0))}get locale(){return this.m_pLocale}get default(){return this.m_pTranslations.default}set default(e){this.m_pTranslations.default=e}get current(){return this.m_pTranslations.current}set current(e){this.m_pTranslations.current=e}get domains(){return this.m_pTranslations.domains}get load(){return(e,t=!0,i="enrich")=>this.m_pTranslations.load(e,t,i)}get unload(){return e=>this.m_pTranslations.unload(e)}get isLoaded(){return e=>this.m_pTranslations.isLoaded(e)}get reset(){return e=>this.m_pTranslations.reset(e)}get gettext(){return(e,...t)=>this.m_pTranslations.translate(this.m_pTranslations.current,"",e,!1,"",0,...t)}get dgettext(){return(e,t,...i)=>this.m_pTranslations.translate(e,"",t,!1,"",0,...i)}get ngettext(){return(e,t,i,...s)=>this.m_pTranslations.translate(this.m_pTranslations.current,"",e,!0,t,i,this.m_pLocale.number(i),...s)}get dngettext(){return(e,t,i,s,...o)=>this.m_pTranslations.translate(e,"",t,!0,i,s,za.number(s,0,!0,e),...o)}get pgettext(){return(e,t,...i)=>this.m_pTranslations.translate(this.m_pTranslations.current,e,t,!1,"",0,...i)}get dpgettext(){return(e,t,i,...s)=>this.m_pTranslations.translate(e,t,i,!1,"",0,...s)}get npgettext(){return(e,t,i,s,...o)=>this.m_pTranslations.translate(this.m_pTranslations.current,e,t,!0,i,s,this.m_pLocale.number(s),...o)}get dnpgettext(){return(e,t,i,s,o,...n)=>this.m_pTranslations.translate(e,t,i,!0,s,o,za.number(o,0,!0,e),...n)}get _(){return(e,...t)=>this.m_pTranslations.translate(this.m_pTranslations.current,"",e,!1,"",0,...t)}get _n(){return(e,t,i,...s)=>this.m_pTranslations.translate(this.m_pTranslations.current,"",e,!0,t,i,this.m_pLocale.number(i),...s)}}function Fa(e,t){let i="";if(S(t))switch(e.type){case"string":case"image":case"icon":case"button":i=W(t);break;case"number":i=za.number(t,G(e.precision));break;case"boolean":i=Q(t)?W(e.labelForTrue,"Yes"):W(e.labelForFalse,"No");break;case"date":switch(W(e.format)){case"full":i=za.dateFull(G(t));break;case"long":i=za.dateLong(G(t));break;case"short":i=za.dateShort(G(t));break;default:i=za.dateMedium(G(t))}break;case"time":switch(W(e.format)){case"full":i=za.timeFull(G(t));break;case"long":i=za.timeLong(G(t));break;case"short":i=za.timeShort(G(t));break;default:i=za.timeMedium(G(t))}break;case"datetime":switch(W(e.format)){case"full":i=za.dateTimeFull(G(t));break;case"long":i=za.dateTimeLong(G(t));break;case"short":i=za.dateTimeShort(G(t));break;default:i=za.dateTimeMedium(G(t))}}return C(i)?(C(e.prefix)&&(i=e.prefix+i),C(e.suffix)&&(i+=e.suffix),i):W(e.default)}function Ua(t,i,s,o,n,r){var a,l;if(!r&&t.isEditing(i))return;const c=t.cell(i);if(!(i.properties.decorator&&Q(i.properties.decorator(c,s,t,i,r))||t.list&&t.list.decorator&&Q(t.list.decorator(c,s,t,i,r)))){switch(i.properties.type){case"image":const u=n?s.firstChild:void 0;u?u.attribute("src",Fa(i.properties,c)):(s.create("img",(t=>{t.height=e.max(G(i.properties.size,o),1),t.set("margin-top",`${e.round((o-t.height)/2)}px`),t.attribute("src",Fa(i.properties,c))})),s.set("padding",0));break;case"icon":case"button":const h=Fa(i.properties,c),d="icon"===i.properties.type?null===(a=t.list)||void 0===a?void 0:a.style.icon:null===(l=t.list)||void 0===l?void 0:l.style.button;if(!n){const t=e.max(G(i.properties.size,o),1);s.backgroundSize({width:t,height:t}),s.set("padding",0),s.set("background-position",`${i.properties.alignment||"left"} center`)}const p=d&&d.class&&h&&0===h.indexOf("data:image/svg+xml;base64,")&&(r&&d.glyph||t.isMoving&&d.moving||t.isSelected&&d.selected||t.isHovered&&d.hover||i.properties.colorize&&i.properties.colorize(h,t,i)||d.default)||void 0;if(p){const e=atob(h.substr(26));s.set("background-image",`url("data:image/svg+xml;base64,${btoa(e.replace("<path ",`<style type="text/css">.${null==d?void 0:d.class}-fill{fill:${p};}.${null==d?void 0:d.class}-stroke{stroke:${p};}</style><path `))}")`)}else s.set("background-image",C(h)?`url("${h}")`:"");break;case"checkbox":case"switch":case"selector":const m=n?s.firstChild:void 0;s.addSelector(i.properties.type),m?"selector"!==i.properties.type&&m.property("checked",Q(c)):(s.create("input",(e=>{e.attribute("type","checkbox"),e.property("disabled",t.isDisabled),t.hook("OnDisable","synchronous",(()=>e.property("disabled",!0))),t.hook("OnEnable","synchronous",(()=>e.property("disabled",!1))),"selector"!==i.properties.type?(e.property("checked",Q(c)),e.on("change",(()=>t.cell(i,e.property("checked")||!1)))):(e.property("checked",t.isSelected),e.on("change",(()=>t.isSelected=e.property("checked")||!1)),t.hook("OnSelect","synchronous",(()=>e.property("checked",!0))),t.hook("OnDeselect","synchronous",(()=>e.property("checked",!1))))})),s.create("span"));break;case"custom":return;default:if(i.properties.markdown){const e=i.properties.markdown(Fa(i.properties,c),t,i);s.markdown(e.parser,e)}else s.text=Fa(i.properties,c)}n||"center"!==i.properties.alignment&&"right"!==i.properties.alignment||s.set("text-align",i.properties.alignment)}}function Ba(t,i,s,o,n,r,a){const l=a>=r;a=e.max(a-r,0);const c=l&&Q(s&&s.expand&&s.collapse&&(n||t.isExpandable||a>0)),u=o*(a+(c?1:0));if(s){let n="";if(o>0){let e=t,i=t.row,r=c?o:0;const l=[];for(;i&&a>0;)l.push(0===l.length?e.isLastVisible?s.ending:s.node:e.isLastVisible?{URL:"",width:s.line.width,height:s.line.height}:s.line),e=i,i=i.row,a--;te(l,(e=>{if(C(e.URL)){let i=e.URL;t.isMoving&&C(e.URLWhileMoving)&&(i=e.URLWhileMoving),n=`url("${i}") no-repeat ${r}px 0px/${e.width}px ${e.height}px`+(""===n?"":",")+n}r+=e.width}))}if(u>0&&c&&t.isExpandable){const i=t.isCollapsed?s.expand:s.collapse;if(i&&C(i.URL)){let s=i.URL;t.isMoving&&C(i.URLWhileMoving)&&(s=i.URLWhileMoving),n=`url("${s}") no-repeat ${e.max(u-i.width,0)}px 0px/${i.width}px ${i.height}px`+(""===n?"":",")+n}}i.set("background",n)}return u}Ha.m_pNamespaces={};class Ya extends Nt{constructor(e){super(0,0,1),this.m_nCount=-1,this.m_nVisible=-1,e instanceof Ga?this.m_pList=e:this.m_pParent=e,this.isSilent=()=>!this.list||!(this.list.isCalculated||this.list.isReady),this.groupedHook("OnDimensionChange","synchronous",(()=>this.recount())),this.groupedHook("OnDimensionChange","framed",(()=>this.onRowsChange())),this.groupedHook("OnItemPush","framed",(()=>this.onRowsInvalidate())),this.hook("OnItemPush","synchronous",(e=>this.onRowPush(e.item))),this.hook("OnItemChange","synchronous",(e=>this.onRowChange(e.item,e.reason,!1))),this.hook("OnItemChange","framed",(e=>this.onRowChange(e.item,e.reason,!0))),this.hook("OnItemPop","framed",(e=>this.onRowPop(e.item)))}get list(){return this.m_pList?this.m_pList:this.row?this.row.list:void 0}get row(){return this.m_pParent}get all(){const e=[];return this.recursiveEach((t=>{e.push(t)}),!1),e}get children(){const e=[];return this.each((t=>{e.push(t)})),e}get countRecursive(){return-1===this.m_nCount&&(this.m_nCount=this.count,this.each((e=>{this.m_nCount+=e.countRecursive}))),this.m_nCount}get countVisible(){return-1===this.m_nVisible&&(this.m_nVisible=0,this.each((e=>{e.isObservable&&(this.m_nVisible+=1+e.countVisible)}))),this.m_nVisible}onRowsChange(){if(this.row){let e=this.row.successorSibling;for(this.row&&this.row.parent&&this.row.parent.onRowsChange();e;)e.onUpdate(32),e=e.successorSibling}else this.list&&(this.list.dimensionsChanged(),this.list.invalidate())}onRowsInvalidate(){this.list&&this.list.unsorted()}onRowPush(e){if(this.list){if(e.isLast&&e.row&&e.row.isDrawn){const t=e.predecessorSibling;e.isFirst?e.row.updateIndentation():t&&t.isDrawn&&t.updateIndentation()}this.list.invalidateRow(e),this.list.isHookAllowed&&(this.list.emitHook("OnAdd",{row:e}),e.emitHook("OnAdd",{row:e}),me(this.list.onAdd,e))}}onRowChange(e,t,i){-193&t&&i===!(5&t)&&(e.onIndex(),e.onUpdate(t)),this.list&&this.list.invalidate(),i&&13&t&&this.onRowsInvalidate()}onRowPop(e){this.list&&this.list.isHookAllowed&&(this.list.emitHook("OnDelete",{row:e}),e.emitHook("OnDelete",{row:e}),pe(this.list.onDelete,e))}invalidate(t,i,s){let o=!1;return i>0&&i>t&&this.each((n=>{if(n.isObservable&&n.tail>=t){const r=e.inRange(n.bottom,t,i,!0,!0);!n.isDrawn&&(r||e.inRange(n.top,t,i,!0,!0)||e.inRange(t,n.top,n.bottom,!0,!0))&&(n.draw(),i+=s,s=0,o=!0),n.rows.count>0&&(r||e.inRange(n.tail,t,i,!0,!0)||e.inRange(t,n.bottom,n.tail,!0,!0))&&n.rows.invalidate(t,i,s)&&(i+=s,s=0,o=!0)}return n.tail>i})),o}recount(){this.m_nCount=-1,this.m_nVisible=-1,this.row&&this.row.parent&&this.row.parent.recount()}recursiveEach(e,t){const i=i=>!!Q(e(i))||i.rows.recursiveEach(e,t);return t?this.reverseEach(i):this.each(i)}recursiveSort(e,i){let s,o=!1;return"undefined"!=typeof Intl&&Intl.Collator&&(s=new Intl.Collator(za.domain,{sensitivity:"base"})),o=this.sort(((o,n)=>{const r=e=>0!==e?e:o.index<n.index?-1:1,a=o.cell(e),l=n.cell(e);if(D(a)&&D(l))return r(i?l-a:a-l);if(T(a)&&T(l))return r(a!==l?(a?1:-1)*(i?-1:1):0);if(a&&l){const e=W(a),o=W(l);if(s)return r(s.compare(e,o)*(i?-1:1));if(t.lowercase(e)<t.lowercase(o))return-1*(i?-1:1);if(t.lowercase(e)>t.lowercase(o))return 1*(i?-1:1)}else{if(a)return-1;if(l)return 1}return r(0)})),this.each((t=>{o=t.rows.recursiveSort(e,i)||o})),o}recursiveFilter(e){let t=0;return this.reverseEach((i=>{i.isExcluded=!e(i),i.isExcluded||(t+=1+i.rows.recursiveFilter(e))})),t}rowAtIndex(e){return this.itemAtIndex(e)}rowFromPoint(t){let i;return this.each((s=>!!e.inRange(t.y,s.top,s.tail)&&(i=e.inRange(t.y,s.top,s.bottom)?s:s.rows.rowFromPoint(t),!0))),i}add(e){return this.pushToMatrix(e.onInit(),{index:-1,recalculate:!0,emit:"push"})}addN(...e){let t=0;return ee(e,(e=>{this.pushToMatrix(e.onInit(),{index:-1,recalculate:!1,emit:"push"}),t++})),this.recalculateMatrix(),t}insert(e){return this.pushToMatrix(e.onInit(),{index:0,recalculate:!0,emit:"push"})}insertN(...e){let t=0;return te(e,(e=>{this.pushToMatrix(e.onInit(),{index:0,recalculate:!1,emit:"push"}),t++})),this.recalculateMatrix(),t}destroy(){this.isSilent=!1,this.clear("fast")}}class Za extends ni{constructor(e){super(),this.m_pCells={},this.m_pRedrawing={},this.m_nPosition=-1,this.m_sStatic="",this.m_bStatic=!1,this.m_bHover=!1,this.m_bMovable=!0,this.m_bMoving=!1,this.m_bSelected=!1,this.m_bDisabled=!1,this.m_bVisible=!0,this.m_bExcluded=!1,this.m_bCollapsedChanged=!1,this.m_bIsEditable=!0,this.m_nEditing=-1,this.m_pRows=new Ya(this),this.m_pIdentifier=e}static get isEditing(){return N(this.m_fnEditor)}static cancelEditor(){this.m_fnEditor&&this.m_fnEditor()}get list(){const e=this.parent?this.parent.list:void 0;if(e&&!e.isDestroyed)return e}get rows(){return this.m_pRows}get parent(){return this.matrix()}get row(){return this.parent?this.parent.row:void 0}set row(e){(this.row!==e||this.isDeleted)&&(e&&!e.isChildOf(this)?this.isDeleted?e.rows.add(this):this.move(e,"lastchild"):this.isDeleted||(this.level=0))}get all(){return this.rows.all}get children(){return this.rows.children}get ancestor(){let e=this.row;for(;e;){if(!e.row)return e;e=e.row}}get predecessorVisible(){let e=this.predecessorSibling;for(;e;){if(e.isObservable)return e;e=e.predecessorSibling}}get successorVisible(){let e=this.successorSibling;for(;e;){if(e.isObservable)return e;e=e.successorSibling}}get first(){return this.rows.firstItem}get last(){const e=this.rows.lastItem;if(e)return e.last}get previous(){const e=this.predecessorSibling;return e?e.last||e:this.row}get next(){const e=this.first||this.successorSibling;if(e)return e;let t=this.row;for(;t;){if(t.successorSibling)return t.successorSibling;t=t.row}}get identifier(){return this.m_pIdentifier||this.uniqueId}get count(){return this.rows.count}get countRecursive(){return this.rows.countRecursive}get countVisible(){return this.isCollapsed?0:this.rows.countVisible}get isFirstVisible(){return!this.predecessorVisible&&this.isObservable}get isLastVisible(){return!this.successorVisible&&this.isObservable}get isPredecessorVisibleAndExpanded(){const e=this.predecessorVisible;return e instanceof Za&&!e.isCollapsed}get position(){let e=0;return this.list&&this.list.each((t=>this===t||(e++,!1))),e}get isDrawn(){return this.m_pRow instanceof dr}get isCalculated(){return-1===this.m_nPosition}get rectangle(){return this.m_pRow?this.m_pRow.rectangle:new _i}get top(){return(-1===this.m_nPosition||this.isPopped)&&(this.predecessorSibling?this.m_nPosition=this.predecessorSibling.tail:this.row?this.m_nPosition=this.row.bottom+(this.list?this.list.rowSpacing:0):this.m_nPosition=0),this.m_nPosition}get bottom(){return this.top+(this.list?this.list.rowHeight:0)}get height(){return this.list&&this.isObservable?(this.countVisible+1)*(this.list.rowHeight+this.list.rowSpacing)-this.list.rowSpacing:0}get tail(){return this.top+this.height+(this.list&&this.isObservable?this.list.rowSpacing:0)}get mean(){return this.top+this.height/2}get level(){let e=0,t=this.row;for(;t;)e++,t=t.row;return e}set level(e){if(!this.isPopped&&this.list)if(e<0&&(e=0),e>this.level){if(0===this.list.maxIndentionDepth||this.level+this.levels<this.list.maxIndentionDepth){const e=this.predecessorVisible;e&&e.rows.pushToMatrix(this,{index:-1,recalculate:!0,emit:"change"})}}else if(e<this.level){let t=this.level-e,i=this.parent,s=0;for(;t>0&&i&&i.row&&i.row.parent;)s=i.row.index+1,i=i.row.parent,t--;i&&i.pushToMatrix(this,{index:s,recalculate:!0,emit:"change"})}}get levels(){let t=0;return this.rows.recursiveEach((i=>{t=e.max(t,i.level)}),!1),t}get depth(){return this.level}get label(){return this.m_sStatic}set label(e){e!==this.m_sStatic&&(this.m_sStatic=e,this.isStatic&&(this.drawStatic(this.m_pRow),this.updateStyles()))}get isLabel(){return this.isStatic&&C(this.label)}get isStatic(){return this.m_bStatic}set isStatic(e){e!==this.m_bStatic&&(this.m_bStatic=e,e&&(this.isSelected=!1),this.drawStatic(this.m_pRow),this.updateStyles())}get isHovered(){return this.m_bHover}get isMovable(){return!Za.isEditing&&this.m_bMovable&&!this.isStatic&&!this.isDisabled}set isMovable(e){e!==this.m_bMovable&&(this.m_bMovable=e)}get isMoving(){return this.m_bMoving}set isMoving(e){e!==this.m_bMoving&&(this.m_bMoving=e,this.updateStyles(),this.indentation(this.level))}get isSelected(){return this.m_bSelected}set isSelected(e){(e=e&&!this.isStatic&&!this.isDisabled)!==this.m_bSelected&&(this.m_bSelected=e,this.closeEditor(),this.isDeleted||(this.updateStyles(),this.list&&this.list.isHookAllowed&&(e?this.emitHook("OnSelect",{row:this}):this.emitHook("OnDeselect",{row:this}))),this.list&&this.list.selectionChanged(this,e))}get isDisabled(){return this.m_bDisabled}set isDisabled(e){e!==this.m_bDisabled&&(this.m_bDisabled=e,e&&(this.isSelected=!1),this.updateStyles(),this.list&&this.list.isHookAllowed&&(e?this.emitHook("OnDisable",{row:this}):this.emitHook("OnEnable",{row:this})))}get isVisible(){return this.m_bVisible}set isVisible(e){e!==this.m_bVisible&&(this.m_bVisible=e,this.updateVisibility(),this.list&&this.list.isHookAllowed&&(e?this.emitHook("OnShow",{row:this}):this.emitHook("OnHide",{row:this})))}get isExcluded(){return this.m_bExcluded}set isExcluded(e){e!==this.m_bExcluded&&(this.m_bExcluded=e,this.updateVisibility(),this.list&&this.list.isHookAllowed&&(e?this.emitHook("OnExclude",{row:this}):this.emitHook("OnInclude",{row:this})))}get isCollapsed(){return!T(this.m_bCollapsed)&&this.list&&(this.m_bCollapsed=this.list.isCollapsed&&this.rows.count>0),Q(this.m_bCollapsed&&this.rows.count>0)}set isCollapsed(e){e!==this.m_bCollapsed&&(this.m_bCollapsed=e,this.m_bCollapsedChanged=!0,this.updateVisibility(),this.isCollapsed&&this.rows.recursiveEach((e=>{e.isSelected=!1}),!1),this.list&&this.list.isHookAllowed&&(this.isCollapsed?this.emitHook("OnCollapse",{row:this}):this.emitHook("OnExpand",{row:this}),this.isCollapsed?this.list.emitHook("OnCollapse",{row:this}):this.list.emitHook("OnExpand",{row:this}),pe(this.isCollapsed?this.list.onCollapse:this.list.onExpand,this)))}get isCollapsedChanged(){return this.m_bCollapsedChanged}get isExpandable(){return this.rows.each((e=>e.isObservable))}get isObservable(){return this.isVisible&&!this.isExcluded}get isHidden(){return!this.isObservable||this.row instanceof Za&&(this.row.isHidden||this.row.isCollapsed)}get isEven(){let e=0;return this.list&&(e=this.list.rowHeight+this.list.rowSpacing),0===this.top||0===e||!(this.top/e%2)}get isDeleted(){return this.isPopped}get isEditable(){return this.m_bIsEditable&&this.isDrawn&&!this.isHidden}set isEditable(e){e!==this.m_bIsEditable&&(this.m_bIsEditable=e)}shift(){let e=this.successorSibling;for(;e;)e.updatePosition(),e=e.successorSibling;this.parent&&this.parent.invalidateMatrix()}indentation(e){this.isDrawn&&ro((()=>{this.list&&this.list.eachColumn((t=>{if(t.allowIndentation){const i=this.cellElement(t);i.parent&&(i.x=Ba(this,i.parent,t.properties.treeImages,t.indentation,t.indentAlways,t.indentOffset,e))}}))}))}updateStyles(e=!1){this.isDrawn&&(ro((()=>{let e=!1,t=!1;this.list&&this.list.isMoving||this.isDisabled||this.isMoving||(e=this.isSelected&&!this.isStatic,t=this.isHovered&&!this.isSelected),this.m_pRow&&(this.m_pRow.selector("hidden",this.isHidden),this.m_pRow.selector("disabled",this.isDisabled),this.m_pRow.selector("static",this.isStatic),this.m_pRow.selector("label",this.isLabel),this.m_pRow.selector("selected",e),this.m_pRow.selector("hover",t),this.m_pRow.selector("moving",this.isMoving))})),this.list&&this.list.style&&(this.list.style.icon||this.list.style.button)&&this.list.eachColumn((e=>{var t,i;((null===(t=this.list)||void 0===t?void 0:t.style.icon)&&"icon"===e.type||(null===(i=this.list)||void 0===i?void 0:i.style.button)&&"button"===e.type)&&this.redraw(e)}))),e&&this.rows.recursiveEach((e=>{e.updateStyles(!0)}),!1)}updatePosition(){this.m_nPosition=-1,this.isDrawn&&ro((()=>{if(this.m_pRow){const e=this.isEven;this.m_pRow.y=this.top,this.m_pRow.selector("odd",!e),this.m_pRow.selector("even",e)}})),this.rows.each((e=>{e.updatePosition()}))}updateVisibility(){this.isObservable||(this.isSelected=!1),this.updateStyles(!0),this.shift(),(this.ancestor||this).updateIndentation()}drawStatic(e){if(this.isLabel)if(this.m_pStatic){if(this.list&&this.list.decorator&&this.row&&Q(this.list.decorator(this.label,this.m_pStatic,this,void 0,!1)))return;this.m_pStatic.text=this.label}else e&&(this.m_pStatic=e.create("label",(e=>{this.list&&this.list.decorator&&Q(this.list.decorator(this.label,e,this,void 0,!1))||(e.text=this.label)})));else this.m_pStatic&&(this.m_pStatic.destroy(),this.m_pStatic=void 0)}drawGlyph(t,i){let s=0,o=0;if(this.list){const n=this.list.rowHeight;this.list.eachColumn((r=>{const a=r.drawGlyph(t,s);this.m_pGlyphCells||(this.m_pGlyphCells={}),this.m_pGlyphCells[r.property]=a.create("div",(t=>{if(t.height=n,r.allowIndentation){const n=e.max(this.depth-r.indentOffset,0),l=n+(r.allowExpander&&(r.indentAlways||this.isExpandable||n>0)?1:0);i&&0===o&&!this.isStatic?(s=l*r.indentation,a.width=r.width-s):t.x=l*r.indentation}Ua(this,r,t,n,!1,!0)})),o++})),this.isLabel&&t.create("label",(e=>{this.list&&this.list.decorator&&Q(this.list.decorator(this.label,e,this,void 0,!0))||(e.text=this.label)}))}return s}onChange(e){const t=e.matrixPrevious;t&&t!==this.rows&&t.row&&(t.row.ancestor||t.row).updateIndentation(),super.onChange(e)}onPop(e){super.onPop(e),this.destroy(),this.list&&(this.ancestor||this).updateIndentation()}onDataChange(e,t){this.emitHook("OnChange",{row:this,property:e,data:t}),this.list&&(this.list.emitHook("OnChange",{row:this,property:e,data:t}),pe(this.list.onChange,this,e,t))}draw(){if(this.list&&this.list.rowsElement)return this.m_pRow||(this.m_pRow=this.list.rowsElement.create("div",(e=>{const t=this.isEven;if(e.positionByTranslate3D=!0,e.y=this.top,e.selector("odd",!t),e.selector("even",t),e.selector("hidden",this.isHidden),e.selector("disabled",this.isDisabled),e.selector("static",this.isStatic),e.selector("label",this.isLabel),e.selector("selected",this.isSelected&&!this.isStatic&&!this.isDisabled&&!this.isMoving),e.selector("hover",this.isHovered&&!this.isSelected&&!this.isDisabled&&!this.isMoving),e.selector("moving",this.isMoving),Lr.pointer(e,(e=>this.onHover(e.isHovered))),this.drawStatic(e),this.list){const t=this.list.rowHeight;this.list.eachColumn((i=>{e.create("div",(e=>{e.addClass(i.class),this.m_pCells[i.property]=e.create("div",(s=>{i.allowIndentation&&(s.x=Ba(this,e,i.properties.treeImages,i.indentation,i.indentAlways,i.indentOffset,this.depth)),Ua(this,i,s,t,!1,!1)}))}))}))}})))}redraw(e,t=!1){if(this.list&&this.isDrawn&&!this.isDeleted){const i=e instanceof Va?e:this.list.column(e);if(i&&!this.m_pRedrawing[i.uniqueId]){const e=this.list.rowHeight;this.m_pRedrawing[i.uniqueId]=!0,ro((()=>{Ua(this,i,this.cellElement(i),e,!t,!1),this.m_pGlyphCells&&Ua(this,i,this.m_pGlyphCells[i.property],e,!0,!0),this.m_pRedrawing[i.uniqueId]=!1})),i.unsorted()}}}cellElement(e){return this.m_pCells[e.property]}cell(e,t){const i=this;if(i[`@list is-column #${e.property}`])return S(t)&&Ue(this,e.property,t),e.properties.modifier?e.properties.modifier(i[e.property],this,e):i[e.property];S(t)&&this.onDataChange(e.property,t)}glyphCreate(e,t,i,s){this.isHidden||(this.m_pGlyph=this.m_pGlyph||dr.create("div",(o=>{const n=this.rectangle,r=this.drawGlyph(o,i);o.addClass(e),o.positionByTranslate3D=!0,o.elevated=!0,o.left=n.left+r,o.top=n.top,o.width=t-r,s&&o.addSelector("following"),this.isStatic&&(o.selector("static",this.isStatic),o.selector("label",this.isLabel))}))),this.isMoving=!0,this.rows.each((i=>i.glyphCreate(e,t,!1,!0)))}glyphMove(e,t){this.m_pGlyph&&this.m_pGlyph.position({x:e,y:t}),this.rows.each((i=>i.glyphMove(e,t)))}glyphDestroy(){this.isMoving=!1,this.m_pGlyphCells=void 0,this.m_pGlyph&&(this.m_pGlyph.destroy(),this.m_pGlyph=void 0),this.rows.each((e=>e.glyphDestroy()))}updateIndentation(){this.indentation(this.level),this.rows.each((e=>{e.updateIndentation()}))}onInit(){return this.m_nPosition=-1,this.m_nEditing=-1,this.m_bHover=!1,this.m_bMoving=!1,this.m_bSelected=!1,this}onUpdate(e){16&e&&this.parent&&this.rows.count>0?this.parent.each((e=>{e.updatePosition()})):this.updatePosition(),1&e&&this.updateStyles(!0),(1&e||this.row)&&(this.ancestor||this).updateIndentation()}onIndex(){this.list&&this.list.isHookAllowed&&(this.list.emitHook("OnIndex",{row:this}),this.emitHook("OnIndex",{row:this}),me(this.list.onIndex,this))}onRefresh(){this.emitHook("OnRefresh",{row:this}),this.list&&this.list.refreshed()}onHover(e,t=!1){!this.isStatic&&this.list&&(t||(e?this.list.rowHovered=this:this.list.rowHovered===this&&(this.list.rowHovered=void 0)),e&&(this.list.isScrolling||this.list.isColumnMovingOrResizing)||(this.m_bHover=e,this.updateStyles()))}onTap(e){return this.m_fnOnTap=e,this}onDoubleTap(e){return this.m_fnOnDoubleTap=e,this}onEnter(e){return this.m_fnOnEnter=e,this}onSelect(e){return this.hook("OnSelect","synchronous",(()=>e(this))),this}onDeselect(e){return this.hook("OnDeselect","synchronous",(()=>e(this))),this}write(e,t){this.redraw(e),this.onDataChange(e,t)}tap(e){if(!this.isDisabled){if("checkbox"===e.properties.type||"switch"===e.properties.type){const t=this.cellElement(e).firstChild;if(t){const i=t.HTMLElementOfType();i&&(i.checked=!i.checked,this.cell(e,i.checked))}return!0}if("selector"===e.properties.type)return this.isSelected=!this.isSelected,!0}if(e.properties.command||e.properties.menu){if(!e.properties.command||this.isDisabled&&"button"!==e.properties.type||e.properties.command(this),e.properties.menu&&(!this.isDisabled||e.properties.menuAlways)&&this.list){const t=this.isSelected;ga.openAtElement(e.properties.menu(this),this.cellElement(e),{stylesheet:this.list.stylesheet,style:e.properties.menuStyle||this.list.style.menu,position:"top",margin:new Li(0,this.list.rowHeight/-2,0,0),onOpen:e.properties.selectOnMenu?()=>this.select():void 0,onClose:()=>{e.properties.selectOnMenu&&!t&&this.deselect()}})}return!0}if(!this.isDisabled){if(this.m_fnOnTap)return Q(this.m_fnOnTap(this,e),!0);this.emitHook("OnTap",{row:this,column:e})}return!1}doubleTap(e){return this.emitHook("OnDoubleTap",{row:this,column:e}),!(!this.m_fnOnDoubleTap||!Q(this.m_fnOnDoubleTap(this,e),!0))||"auto"===e.properties.editable&&this.editor(e)}enter(){return this.m_fnOnEnter?Q(this.m_fnOnEnter(this),!0):(this.emitHook("OnEnter",{row:this}),!1)}static(e=""){return this.label=e,this.isStatic=!0,this}movable(e){return this.isMovable=e,this}select(){return this.isSelected=!0,this}deselect(){return this.isSelected=!1,this}enable(){return this.isDisabled=!1,this}disable(){return this.isDisabled=!0,this}show(){return this.isVisible=!0,this}hide(){return this.isVisible=!1,this}expand(){return this.isCollapsed=!1,this}collapse(){return this.isCollapsed=!0,this}increase(){return this.level++,this}decrease(){return this.level--,this}move(e,t){if(this.list&&this!==e)if("firstchild"===t||"lastchild"===t){if(this.row===e)return this.index="firstchild"!==t&&this.parent&&this.parent.lastItem?this.parent.lastItem.index+1:0,!0;if(0===this.list.maxIndentionDepth||e.level+1+this.levels<=this.list.maxIndentionDepth)return!e.isChildOf(this)&&(e.rows.pushToMatrix(this,{index:"firstchild"===t?0:-1,recalculate:!0,emit:"change"}),!0)}else if("below"===t||"above"===t){if(this.parent===e.parent)return this.moveToItem(e,"above"===t),!0;if(0===this.list.maxIndentionDepth||e.level+this.levels<=this.list.maxIndentionDepth){if(e.parent){if(e.isChildOf(this))return!1;e.parent.pushToMatrix(this,{index:e.index+("above"===t?0:1),recalculate:!0,emit:"change"})}return!0}}return!1}makeLastChildOf(e){return this.move(e,"lastchild")}makeFirstChildOf(e){return this.move(e,"firstchild")}isChildOf(e){let t=this;for(;t;){if(t===e)return!0;t=t.row}return!1}isEditing(e){return this.m_nEditing===e.uniqueId}scrollIntoView(){return this.list&&this.list.scrollIntoView(this),this}delete(e=!0){if(!this.isPopped){if(!e&&this.parent){let e=this.rows.lastItem;for(;e;)this.parent.pushToMatrix(e,{index:this.index+1,recalculate:!0,emit:"change"}),e=this.rows.lastItem}this.pop()}return this}editor(e){if(("yes"===e.properties.editable||"auto"===e.properties.editable)&&this.isEditable){const t=this.cellElement(e),i=this.cell(e);return this.closeEditor(),t.destroyChildren(),t.addSelectorSafe("editor"),t.selectorSafe("editor-selected",this.isSelected),t.create("input",(i=>{const s=i.HTMLElementOfType();this.m_nEditing=e.uniqueId,Za.m_fnEditor=()=>{const s=this.cell(e);Za.m_fnEditor=void 0,this.m_nEditing=-1,i.blur(),i.destroy(),t.removeSelectorSafe("editor"),t.removeSelectorSafe("editor-selected"),this.redraw(e.property,!0),this.emitHook("OnEditEnd",{row:this,property:e.property,data:s}),this.list&&(this.list.emitHook("OnEditEnd",{row:this,property:e.property,data:s}),pe(this.list.onEditEnd,this,e,s),this.list.focus())},i.attribute("type","text"),i.attribute("value",W(this.cell(e))),i.attribute("autocomplete","off"),s&&(i.on(["change","input"],(()=>this.cell(e,s.value))),i.on("focus",(()=>s.select()))),xr.mode(i,"disable"),xr.focus(i,i,(()=>this.closeEditor())),Tr.local(i,(e=>{if(e.hasModifiers)return!1;switch(e.key){case"Escape":case"Enter":return this.closeEditor(),!0}return!1}),"keyup")})),this.emitHook("OnEditStart",{row:this,property:e.property,data:i}),this.list&&(this.list.scroll&&this.list.scroll.scrollToAsset(t),this.list.emitHook("OnEditStart",{row:this,property:e.property,data:i}),pe(this.list.onEditStart,this,e,i)),!0}return!1}editorForColumn(e){if(this.list){const t=this.list.column(e);if(t)return this.editor(t)}return!1}closeEditor(){Za.cancelEditor()}refresh(...e){this.list&&this.isDrawn&&(P(e)>0?ee(e,(e=>this.redraw(e))):this.list.eachColumn((e=>this.redraw(e))),this.onRefresh())}destroy(){this.list&&!this.list.isDestroyed&&(this.isSelected=!1),this.rows.destroy(),this.m_pRow&&(ee(this.m_pCells,(e=>{e.destroy()})),this.m_pRow.destroy(),this.m_pRow=void 0)}}class Va extends ai{constructor(e,t){if(super(e),this.m_bInitializing=!0,this.m_bResizing=!1,this.m_bMoving=!1,this.m_bLabel=!1,this.m_sSorting="no",this.m_bSorting=!1,this.m_pSorting=new et((()=>{this.list.isMoving||this.list.isScrolling||this.columns.isMovingOrResizing||Za.isEditing?(this.m_bSorting=!0,this.m_pSorting.invoke()):this.resort()}),33.333333333333336,!0),this.m_nOffset=-1,this.m_nLeft=0,this.m_nWidth=0,this.m_nWidthFitColumn=0,this.m_nWidthCustom=0,this.m_nWidthInitial=0,this.m_bWidthAbsolute=!0,this.m_pProperties=t,this.m_bVisible=Q(t.visible,!0)&&("selector"!==this.properties.type||this.list.isMultipleSelect),this.m_pRule=this.list.stylesheet.rule({visibility:this.m_bVisible?"inherit":"hidden"}),C(t.width)){const e=t.width;"%"===e.charAt(L(e)-1)&&(this.m_bWidthAbsolute=!1)}if(("yes"===this.properties.editable||"auto"===this.properties.editable)&&"string"!==this.properties.type)throw new Error("UI.List.Column: Only columns of type 'string' are editable.")}get properties(){return this.m_pProperties}get list(){return this.columns.list}get columns(){return this.parent}get predecessor(){let e=this.predecessorSibling;for(;e;){if(e.isVisible)return e;e=e.predecessorSibling}}get successor(){let e=this.successorSibling;for(;e;){if(e.isVisible)return e;e=e.successorSibling}}get resizing(){return this.m_bResizing}set resizing(e){this.m_bResizing=e,this.columns.each((t=>{t.m_pHeader&&t.m_pHeader.selectorSafe("resizing",e&&t===this)}))}get sorting(){return this.m_sSorting}set sorting(e){this.m_sSorting!==e&&(this.m_sSorting=e,"no"===e&&this.m_bSorting&&(this.m_bSorting=!1),ro((()=>{this.m_pHeader&&(this.m_pHeader.selector("sort-ascending","ascending"===this.m_sSorting),this.m_pHeader.selector("sort-descending","descending"===this.m_sSorting))}),!this.m_pHeader||!this.m_pHeader.isInDOM))}get moving(){return this.m_bMoving}set moving(e){this.m_bMoving=e,ro((()=>{this.m_pHeader&&(this.m_pHeader.selectorSafe("moving",e),this.m_pHeader.elevated=e),e||(this.x=this.left)}),!this.m_pHeader||!this.m_pHeader.isInDOM)}get isSorting(){return this.m_bSorting}get isMoving(){return this.moving}get isResizing(){return this.resizing}get isMovingOrResizing(){return this.isMoving||this.isResizing}get isSortedAscending(){return"ascending"===this.sorting}get isSortedDescending(){return"descending"===this.sorting}get isSorted(){return"no"!==this.sorting}get isVisible(){return this.m_bVisible}set isVisible(e){e!==this.m_bVisible&&(this.m_bVisible=e,this.columns.calculate(),ro((()=>{const t=this.predecessor;this.m_pHeader&&(this.m_pHeader.visible=e),this.m_pRule&&this.m_pRule.set("visibility",e?"inherit":"hidden"),this.reflectPosition(!0),t&&t.reflectPosition(!0)})))}get indentation(){return e.max(G(this.properties.indentation),0)}get indentAlways(){return Q(this.properties.indentAlways)&&0===this.indentOffset}get indentOffset(){return e.max(G(this.properties.indentOffset),0)}get allowIndentation(){return this.indentation>0&&"center"!==this.properties.alignment&&"right"!==this.properties.alignment}get allowExpander(){return Q(this.properties.treeImages&&k(this.properties.treeImages.expand)&&k(this.properties.treeImages.collapse))}get x(){return this.m_pHeader?this.m_pHeader.x:0}set x(e){ro((()=>{this.m_pHeader&&(this.m_pHeader.x=e)}),!this.m_pHeader||!this.m_pHeader.isInDOM)}get left(){return this.m_nLeft}get right(){return this.left+this.width}get width(){return this.m_nWidth}set width(e){this.m_bWidthAbsolute=!0,this.m_nWidthCustom=this.resize(e,!0)}get hasAbsoluteWidth(){return this.m_bWidthAbsolute}get class(){return this.m_pRule?this.m_pRule.class:""}get type(){return this.properties.type}get property(){return this.properties.property}get offset(){return this.m_nOffset}get state(){return{property:this.property,index:this.index,width:this.m_nWidthCustom,sorting:this.sorting}}set state(e){this.property===e.property&&(this.index=e.index,e.width>0&&(this.width=e.width),"no"!==e.sorting&&this.sort(e.sorting))}applyStyles(e){e&&this.m_pRule&&(this.m_pRule.styles=e)}removeStyles(e){if(e&&this.m_pRule){const t=J(e);ee(t,(()=>{}),{replace:!0}),this.m_pRule.styles=t}}resizer(e,t){let i;Vr.on({asset:e,direction:"horizontal",edgeScrolling:!1,onStart:()=>{this.resizing=!0,this.applyStyles(t),i=this.width},onMove:e=>{this.width=i+e.diffX,this.columns.update(!1)},onEnd:()=>{this.resizing=!1,this.removeStyles(t),i!==this.width&&(this.m_nWidthInitial=this.width,this.columns.changed()),this.columns.update(!0),this.columns.resize()}}),Dr.double(e,(()=>this.fit()))}mover(t,i){let s,o;Vr.on({asset:t,direction:"horizontal",onStart:()=>{this.moving=!0,this.applyStyles(i),s=this.left,o=!1},onMove:t=>{this.x=e.range(s+t.diffX,0,this.columns.columnsWidth-this.width),this.columns.each((e=>{if(e!==this){const t=e.left+e.width/2;(this.index>e.index&&this.x<t||this.index<e.index&&this.x+this.width>t)&&this.swap(e)&&(o=!0)}}))},onEnd:()=>{this.moving=!1,this.removeStyles(i),o&&this.columns.changed()}})}shift(){let e=this.successorSibling;for(;e;)e.position(),e=e.successorSibling}resize(t,i){return A(this.properties.minWidth,1)&&(t=e.max(t,this.properties.minWidth)),A(this.properties.maxWidth,1)&&(t=e.min(t,this.properties.maxWidth)),(t=e.max(t,e.max(this.m_bLabel?this.columns.columnMinWidth(this.type,this.property):0,1)))!==this.m_nWidth&&(this.m_nWidth=t,0===this.m_nWidthInitial&&(this.m_nWidthInitial=this.m_nWidth),ro((()=>{this.m_pHeader&&(this.m_pHeader.width=this.m_nWidth)}),!this.m_pHeader||!this.m_pHeader.isInDOM),i&&this.shift(),this.isResizing||(this.reflectWidth(),this.columns.resize())),this.isVisible?this.m_nWidth:0}position(){const e=this.predecessor,t=e?e.right:0;t!==this.m_nLeft&&(this.m_nLeft=t,this.moving||(this.x=this.left),this.columns.isResizing||this.reflectPosition()),this.m_bInitializing&&(this.m_bInitializing=!1,ro((()=>{this.m_pHeader&&this.m_pHeader.removeSelector("initializing")}),!this.m_pHeader||!this.m_pHeader.isInDOM))}reflectPosition(e=!1){ro((()=>{if(this.m_pRule&&this.m_pRule.set("left",`${this.m_nLeft}px`),!this.columns.isCalculating){const e=!this.successor&&this.columns.columnsWidth+1>this.columns.headerWidth;this.m_pHeader&&this.m_pHeader.selector("last",e),this.m_pRule&&this.m_pRule.set("border-right",e?"none !important":"")}}),e)}reflectWidth(){ro((()=>{this.m_pRule&&this.m_pRule.set("width",`${this.m_nWidth}px`),this.reflectPosition(!0)}))}drawGlyph(e,t){return e.create("div",(e=>{this.m_pRule&&e.addClass(this.class),e.left=this.m_nLeft-t}))}drawHeader(e,t,i){this.m_pHeader=this.m_pHeader||e.create("div",(e=>{if(e.positionByTranslate3D=!0,e.visible=this.isVisible,e.addSelector(`type-${this.type}`),e.addSelector(`property-${this.property}`),e.addSelector("initializing"),"center"!==this.properties.alignment&&"right"!==this.properties.alignment||e.set("text-align",this.properties.alignment),"selector"===this.properties.type)this.list.hook("OnSelectionMode","synchronous",(()=>this.isVisible=this.list.isMultipleSelect)),e.addSelector("selector"),e.create("input",(e=>{e.attribute("type","checkbox"),e.property("checked",this.list.isAllSelected),e.on("change",(()=>{e.property("checked")?this.list.selectAll():this.list.deselectAll()})),this.list.groupedHook("OnSelectionChange","framed",(()=>e.property("checked",this.list.isAllSelected))),this.list.groupedHook("OnAdd","framed",(()=>e.property("checked",this.list.isAllSelected))),this.list.groupedHook("OnDelete","framed",(()=>e.property("checked",this.list.isAllSelected)))})),e.create("span"),e.create("div"),Dr.on(e,(()=>{this.list.isAllSelected?this.list.deselectAll():this.list.selectAll()}));else{const s=Q(this.properties.sortable),o=Q(this.properties.resizable),n=Q(this.properties.movable);e.selector("sortable",s),e.selector("sort-ascending","ascending"===this.sorting),e.selector("sort-descending","descending"===this.sorting),e.selector("resizable",o),e.selector("movable",n),C(this.properties.name)?(this.m_bLabel=!0,e.text=this.properties.name):(e.addSelector("unlabeled"),this.properties.icon&&e.set("background",`url("${this.properties.icon.URL}") no-repeat ${this.properties.alignment||"left"} center/${this.properties.icon.width}px ${this.properties.icon.height}px`)),e.create("div",(e=>{o&&this.resizer(e,t)})),Dr.on(e,(()=>{this.properties.onTap?this.properties.onTap(this):s?this.sort("ascending"===this.sorting?"descending":"ascending"):this.list.scrollToTopOrBottom()})),(N(this.properties.onTap)||s)&&Dr.double(e,(()=>{this.list.scrollToTopOrBottom()})),n&&this.mover(e,i)}}))}init(){return!this.m_pHeader||!!this.m_pHeader.isInDOM&&(this.m_nWidthFitColumn=e.max(e.ceil(this.m_pHeader.rectangleWidth),this.properties.icon?this.properties.icon.width:0),!0)}calculate(){let e=0;return this.hasAbsoluteWidth?(e=this.m_nWidthCustom>0?this.m_nWidthCustom:A(this.properties.width)?this.properties.width:C(this.properties.width)&&"auto"!==this.properties.width?G(this.properties.width):this.m_nWidthFitColumn,this.resize(e,!1)):0}calculateFromPercentage(t){let i,s;return this.hasAbsoluteWidth?0:(s=W(this.properties.width),i=G(s=s.substr(0,L(s)-1)),this.resize(e.max(e.floor(t/100*e.range(i,1,100)),1),!1))}calculateOptimalWidth(t){const i=this;ro((()=>{this.list.each((e=>{const t=e.cellElement(i);t&&(t.visible=!1,t.right="auto")})),no((()=>{let s=this.m_nWidthFitColumn;this.list.each((t=>{const o=t.cellElement(i);o&&(s=e.max(s,e.ceil(o.x+o.rectangleWidth+1)))})),t(s),ro((()=>{this.list.each((e=>{const t=e.cellElement(i);t&&(t.right="inherit",t.visible=!0)}))})),this.columns.update(!0)}))}))}inRange(t){if(e.inRange(t.x,this.left,this.right))return this}expand(e){e>0&&this.resize(this.width+e,!1)}shrink(e){e>0&&this.resize(this.width-e,!1)}fit(){this.calculateOptimalWidth((e=>{this.width=this.width!==e?e:this.m_nWidthInitial,this.columns.changed()}))}onPush(){this.m_nOffset=this.index}onChange(){this.m_bInitializing||this.position()}unsorted(){return!(!Q(this.properties.sortable)||!this.isSorted||(Q(this.properties.resortOnChange,!0)?(this.m_bSorting=!0,this.m_pSorting.invoke()):this.nosort(),0))}sort(e){if(this.m_pSorting.cancel(),this.m_bSorting=!0,Q(this.properties.sortable)&&"selector"!==this.properties.type){const t=this.sorting===e,i=this.list.rows.recursiveSort(this,"descending"===e);return t||(this.columns.each((e=>{e!==this&&(e.sorting="no")})),this.sorting=e,this.columns.changed()),!i&&t||!this.list.isHookAllowed?this.m_bSorting=!1:(this.list.emitHook("OnSort",{column:this}),pe(this.list.onSort,this),De((()=>{this.m_bSorting=!1}),200)),i}return this.m_bSorting=!1,!1}resort(){return"no"!==this.sorting&&(this.sort(this.sorting),!0)}nosort(){return!!this.isSorted&&(this.m_pSorting.cancel(),this.sorting="no",!0)}refresh(){this.list.each((e=>{e.redraw(this),e.onRefresh()}))}destroy(){this.list.isDestroyed&&(this.m_pSorting.cancel(),this.m_pHeader&&(this.m_pHeader.destroy(),this.m_pHeader=void 0),this.m_pRule&&(this.m_pRule.delete(),this.m_pRule=void 0))}}class Wa extends ri{constructor(e,t,i){super(Va),this.m_pColumns={},this.m_nHeaderWidth=0,this.m_nColumnsWidth=0,this.m_pColumnsMinWidth={},this.m_bColumnsCalculating=!1,this.m_nResizeHandle=0,this.m_nUpdateHandle=0,this.m_pList=e,this.m_fnResize=i,ee(t,(e=>{if("selector"!==e.type||C(e.property)||(e.property=`Selector ${this.uniqueId}`),!C(e.property))throw new Error("UI.List.Column: Invalid column property name.");if(this.m_pColumns[e.property])throw new Error("UI.List.Column: Duplicate column property name supplied.");this.m_pColumns[e.property]=this.appendToMatrix(e)}))}static parseStyles(t,i){return X({textOverflow:"ellipsis",cursor:"default"},t.appearance,{position:"absolute",boxSizing:"border-box",left:0,top:0,bottom:0,overflow:"hidden",whiteSpace:"nowrap","> div":J(t.splitter?t.splitter.appearance:void 0,{position:"absolute",boxSizing:"border-box",right:0,top:0,bottom:0,width:t.splitter?e.max(t.splitter.width,0):"auto"}),[So.selector("initializing")]:{overflow:"visible",textOverflow:"inherit",visibility:"hidden"},[So.selector("last")]:X({borderRight:"none !important"},t.last,{"> div":X({borderRight:"none !important"},t.splitter?t.splitter.last:void 0)}),[So.selector("sortable")]:t.sortable&&t.sortable.appearance,[So.selector("sort-ascending")]:t.sortable&&t.sortable.ascending,[So.selector("sort-descending")]:t.sortable&&t.sortable.descending,[So.selector("resizable")]:J(t.resizable,{"> div":J(t.splitter?t.splitter.resizable:void 0,{visibility:"inherit"})}),[So.selector("movable")]:X({"> div":t.splitter?t.splitter.movable:void 0},t.movable),[So.selector("resizing")]:X({"> div":t.splitter?t.splitter.resizing:void 0},t.resizing?t.resizing.header:void 0),[So.selector("moving")]:X({"> div":t.splitter?t.splitter.moving:void 0},t.moving?t.moving.header:void 0),[So.selector("unlabeled")]:{padding:"0 !important"},[So.selector("selector")]:{textOverflow:"clip",padding:0,"> input[type='checkbox']":{opacity:0,margin:0,padding:0,width:0,height:0,display:"inline",float:"left",appearance:"none"},"> span":X({display:"inline-block",width:(t.selector?e.max(t.selector.width,0):0)||i,height:i},t.selector?t.selector.appearance:void 0,t.selector?t.selector.unchecked:void 0),"input[type='checkbox']:checked + span":t.selector?t.selector.checked:void 0}})}get lastVisibleColumn(){let e=this.lastItem;for(;e;){if(e.isVisible)return e;e=e.predecessorSibling}}get list(){return this.m_pList}get state(){const e=[];return this.each((t=>{e.push(t.state)})),e}set state(e){e.sort(((e,t)=>t.index-e.index)),ee(e,(e=>{const t=this.column(e.property);t&&(t.state=e)}))}get isCalculating(){return this.m_bColumnsCalculating}get columnsWidth(){if(0===this.m_nColumnsWidth){const e=this.lastVisibleColumn;if(e)return this.m_nColumnsWidth=e.right}return this.m_nColumnsWidth}get headerWidth(){return this.m_nHeaderWidth}get rowWidth(){return e.max(this.columnsWidth,this.headerWidth)}get isSorting(){return this.each((e=>e.isSorting))}get isResizing(){return this.each((e=>e.isResizing))}get isMovingOrResizing(){return this.each((e=>e.isMovingOrResizing))}get isEditable(){return this.each((e=>"yes"===e.properties.editable||"auto"===e.properties.editable))}column(e){return this.m_pColumns[e]}columnFromPoint(e){let t;return this.each((i=>(t=i.inRange(e))instanceof Va)),t}columnMinWidth(e,t){return this.m_pColumnsMinWidth[`type-${e}`]||this.m_pColumnsMinWidth[`property-${t}`]||this.m_pColumnsMinWidth.default||0}drawHeader(t,i){let s;return Fe(this.m_pColumnsMinWidth,"default",e.max(i.column.width||0,i.column.splitter?i.column.splitter.width:0)||0),this.m_pHeader=t.create("header",(t=>{t.style([i.appearance,{position:"absolute",boxSizing:"border-box",left:0,top:0,right:0,height:i.height,zIndex:1}],this.list.stylesheet);const o=Wa.parseStyles(i.column,i.height);ee(i.column.types,((t,s)=>{const n=`type-${s}`;Fe(this.m_pColumnsMinWidth,n,e.max(t.width||0,t.splitter?t.splitter.width:0)||0),X(o,{[So.selector(n)]:Wa.parseStyles(t,i.height)})}),{keys:!0}),ee(i.column.properties,((t,s)=>{const n=`property-${s}`;Fe(this.m_pColumnsMinWidth,n,e.max(t.width||0,t.splitter?t.splitter.width:0)||0),X(o,{[So.selector(n)]:Wa.parseStyles(t,i.height)})}),{keys:!0}),s=t.create("div",(e=>{let t,s;e.positionByTranslate3D=!0,i.column.resizing&&(t=J(i.column.resizing.column),$e(t,"left"),$e(t,"width"),$e(t,"visibility")),i.column.moving&&(s=J(i.column.moving.column),$e(s,"left"),$e(s,"width"),$e(s,"visibility")),this.each((i=>i.drawHeader(e,t,s)))}),{position:"absolute",boxSizing:"border-box",left:0,top:0,right:0,bottom:0,"> div":o},this.list.stylesheet)})),s}init(){return!this.each((e=>!e.init()))}calculate(e){let t,i=0,s=this.headerWidth;this.m_bColumnsCalculating=!0,this.m_nColumnsWidth=0,A(e,0)&&(s=this.m_nHeaderWidth=e),this.each((e=>{i+=e.calculate()})),s-=i,this.each((e=>{t||e.hasAbsoluteWidth||!e.isVisible||(t=e),i+=e.calculateFromPercentage(s>0?s:this.headerWidth)})),t&&t.expand(this.headerWidth-i),this.each((e=>e.position())),this.m_bColumnsCalculating=!1,this.lastVisibleColumn&&this.lastVisibleColumn.reflectPosition(),this.resize(!0)}resize(e=!1){this.m_nResizeHandle=_e(this.m_nResizeHandle),e?(this.m_nColumnsWidth=0,this.list.scroll||ro((()=>{this.m_pHeader&&this.m_pHeader.set("width",`${this.rowWidth}px`)}),!this.m_pHeader||!this.m_pHeader.isInDOM),this.m_fnResize(this.columnsWidth)):this.isCalculating||(this.m_nResizeHandle=ke((()=>{this.resize(!0)})))}update(e){this.m_nUpdateHandle=Ae(this.m_nUpdateHandle),e?(this.m_nColumnsWidth=0,this.each((e=>{e.reflectWidth()}))):this.m_nUpdateHandle=De((()=>this.update(!0)),300)}changed(){this.list.isHookAllowed&&(this.list.emitHook("OnColumnsChange",{list:this.list}),pe(this.list.onColumnsChange,this.list))}unsorted(){this.each((e=>e.unsorted()))}resort(){this.each((e=>e.resort()))}nosort(){this.each((e=>e.nosort()))&&this.list.isHookAllowed&&(this.list.emitHook("OnSort",{column:void 0}),pe(this.list.onSort,void 0))}destroy(){this.list.isDestroyed&&(_e(this.m_nResizeHandle),Ae(this.m_nUpdateHandle),this.each((e=>e.destroy())),this.m_pHeader&&(this.m_pHeader.destroy(),this.m_pHeader=void 0))}}class Ga extends vt{constructor(...t){super(),this.m_pScrollIntoView=new et((()=>{if(this.scroll&&this.m_pScrollToRow)if(this.isSorting)this.m_pScrollIntoView.invoke();else{const e=this.m_pScrollToRow.draw();e&&this.scroll.scrollToAsset(e)}}),33.333333333333336,!0),this.m_sState="construction",this.m_nInitialized=0,this.m_pInvalidate=new tt((()=>this.invalidateRows())),this.m_nBuffer=0,this.m_nEmptyStateHeight=0,this.m_nFragment=0,this.m_bMultipleSelect=!1,this.m_bMultipleSelectUsingCtrl=!1,this.m_nSelectionHandle=0,this.m_nHeaderHeight=0,this.m_nRowHeight=0,this.m_nRowSpacing=0,this.m_bRowSpacingAfterLastRow=!1,this.m_nIndentationMax=0,this.m_bCollapsed=!1,this.m_bMoving=!1,this.m_bLazy=!1,this.m_pRefresh=new tt((()=>{this.isHookAllowed&&(this.emitHook("OnRefresh",{list:this}),pe(this.onRefresh,this))})),this.m_bDestroyed=!1;const i=J(...t),s=i.parent instanceof ta?i.parent.stylesheet:void 0;let o;if(this.m_pStyle=i.style||Ga.style||{},this.m_nHeaderHeight=this.style.header?e.max(this.style.header.height,0):0,this.m_nHeaderHeight>0&&this.style.header&&this.style.header.spacing&&(this.m_nHeaderHeight+=e.max(this.style.header.spacing,0)),this.m_nRowHeight=e.max(this.style.row?this.style.row.height:0,1),this.m_nRowSpacing=e.max(G(this.style.row?this.style.row.spacing:0),0),this.m_bRowSpacingAfterLastRow=Q(this.style.row&&this.style.row.spacingAfterLastRow),this.m_nIndentationMax=e.max(G(i.indentationMaxDepth),0),this.m_bCollapsed=Q(i.collapsed),this.m_bMultipleSelect=Q(i.multipleSelect),this.m_bMultipleSelectUsingCtrl=Q(i.multipleSelectUsingCtrl),this.m_fnDecorator=i.decorator,this.m_pStylesheet=i.stylesheet||s||Ga.stylesheet,this.m_pRows=new Ya(this),this.m_pColumns=new Wa(this,i.columns||[],(()=>{ro((()=>{this.m_pElementRows&&(this.m_pElementRows.set("width",`${this.rowWidth}px`),this.scroll&&this.isReady&&this.scroll.update(!1))}),!this.m_pElementRows||!this.m_pElementRows.isInDOM)})),this.onInit=i.onInit,this.onReady=i.onReady,this.onAdd=i.onAdd,this.onChange=i.onChange,this.onIndex=i.onIndex,this.onDelete=i.onDelete,this.onRefresh=i.onRefresh,this.onExpand=i.onExpand,this.onCollapse=i.onCollapse,this.onTap=i.onTap,this.onDoubleTap=i.onDoubleTap,this.onEnter=i.onEnter,this.onSelect=i.onSelect,this.onDeselect=i.onDeselect,this.onSelectionChange=i.onSelectionChange,this.onSelectionMode=i.onSelectionMode,this.onMoveStart=i.onMoveStart,this.onMove=i.onMove,this.onMoveEnd=i.onMoveEnd,this.onMoved=i.onMoved,this.onSort=i.onSort,this.onResize=i.onResize,this.onFocus=i.onFocus,this.onBlur=i.onBlur,this.onColumnsChange=i.onColumnsChange,this.onLazyLoad=i.onLazyLoad,this.onEditStart=i.onEditStart,this.onEditEnd=i.onEditEnd,i.sorting&&this.sort(i.sorting,i.sortingDirection),!i.parent)throw"UI.List: No parent layer or element supplied.";i.parent instanceof ta?(this.m_pLayer=i.parent,this.m_pElement=i.parent.context,i.scrollable=this.m_pLayer.scroll?"no":"yes",i.style&&(i.style.scrollbars=i.style.scrollbars||this.m_pLayer.layers.style.scrollbars),this.m_pLayer.hook("OnCalculated","synchronous",(e=>this.init(e.layer.width,e.layer.height))),this.m_pLayer.hook("OnResize","synchronous",(e=>this.calculate(e.layer.width,e.layer.height))),this.m_pLayer.hook("OnDestroy","synchronous",(()=>this.destroy())),this.m_pLayer.wait((()=>this.isReady))):(this.m_pElement=i.parent,this.m_pElement.visible=!1),this.m_bLazy=Q(i.lazy,!0)&&"yes"===i.scrollable,this.m_pElement.onDestroy=(e,t)=>{t&&this.destroy()},this.m_pElement.style(this.style.appearance||{},this.stylesheet),this.m_pElement.attribute("x-ms-format-detection","none"),this.m_pElementRows=this.m_pElement.create("div",(t=>{const s=Q(i.selectable);Dr.single(t,(t=>{const i=this.m_pColumns.columnFromPoint(t.offset),o=this.rows.rowFromPoint(t.offset);if(o&&i)if(i.allowExpander&&o.isExpandable&&e.inRange(t.offset.x,i.left,i.left+o.cellElement(i).x))o.isCollapsed=!o.isCollapsed;else if(!o.isDisabled&&64&t.buttons||!o.tap(i)){if(s)if(!this.isMultipleSelect&&64&t.buttons&&this.m_bMultipleSelectUsingCtrl&&!o.isSelected&&1===this.selectionCount&&(this.isMultipleSelect=!0),32&t.buttons&&this.m_bMultipleSelectUsingCtrl&&!o.isSelected){let e=o.previous,t=!1;for(;e&&!e.isSelected;)e=e.previous;if(!e)for(e=o.next,t=!0;e&&!e.isSelected;)e=e.next;if(e)for(this.isMultipleSelect=!0;e&&(e.isSelected=!0,e!==o);)e=t?e.previous:e.next;o.isSelected=!0}else o.isSelected=!o.isSelected;(!s||o.isSelected||o.isStatic)&&(this.emitHook("OnTap",{row:o,column:i}),pe(this.onTap,o,i))}})),(Q(i.doubleTappable)||this.m_pColumns.isEditable)&&Dr.double(t,(e=>{const t=this.m_pColumns.columnFromPoint(e.offset),i=this.rows.rowFromPoint(e.offset);i&&t&&!i.isDisabled&&(i.doubleTap(t)||i.isStatic||(!s||this.isMultipleSelect||i.isSelected||(this.deselectAll(),i.isSelected=!0),this.emitHook("OnDoubleTap",{row:i,column:t}),pe(this.onDoubleTap,i,t)))})),C(i.movable)&&"no"!==i.movable&&this.mover(t,"strict"===i.movable,s)}),[this.style.rows,{position:"absolute",visibility:"hidden",boxSizing:"border-box",left:0,top:0,right:0,bottom:0,zIndex:0,[So.selector("visible")]:{visibility:"inherit"},"> div":X({cursor:"default",transition:"transform .2s ease-out, opacity .2s ease-out"},this.style.row?this.style.row.appearance:void 0,{position:"absolute",boxSizing:"border-box",left:0,top:0,right:0,height:this.m_nRowHeight,zIndex:-1,"> div":J(this.style.column?this.style.column.appearance:void 0,{position:"absolute",boxSizing:"border-box",height:this.m_nRowHeight+this.m_nRowSpacing,overflow:"hidden","> div":X({textOverflow:"ellipsis",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",[So.selector("selector")]:{textOverflow:"clip",padding:0,"> input[type='checkbox']":{opacity:0,margin:0,padding:0,width:0,height:0,display:"inline",float:"left",appearance:"none"},"> span":X({display:"inline-block",width:(this.style.selector?e.max(this.style.selector.width,0):0)||this.m_nRowHeight,height:this.m_nRowHeight},this.style.selector?this.style.selector.appearance:void 0,this.style.selector?this.style.selector.unchecked:void 0),"input[type='checkbox']:checked + span":this.style.selector?this.style.selector.checked:void 0},[So.selector("checkbox")]:{textOverflow:"clip",padding:0,"> input[type='checkbox']":{opacity:0,margin:0,padding:0,width:0,height:0,display:"inline",float:"left",appearance:"none"},"> span":X({display:"inline-block",width:(this.style.checkbox?e.max(this.style.checkbox.width,0):0)||this.m_nRowHeight,height:this.m_nRowHeight},this.style.checkbox?this.style.checkbox.appearance:void 0,this.style.checkbox?this.style.checkbox.unchecked:void 0),"input[type='checkbox']:checked + span":this.style.checkbox?this.style.checkbox.checked:void 0},[So.selector("switch")]:{textOverflow:"clip",padding:0,"> input[type='checkbox']":{opacity:0,margin:0,padding:0,width:0,height:0,display:"inline",float:"left",appearance:"none"},"> span":X({display:"inline-block",width:(this.style.switch?e.max(this.style.switch.width,0):0)||this.m_nRowHeight,height:this.m_nRowHeight},this.style.switch?this.style.switch.appearance:void 0,this.style.switch?this.style.switch.off:void 0),"input[type='checkbox']:checked + span":this.style.switch?this.style.switch.on:void 0},[So.selector("editor")]:{textOverflow:"clip",padding:0,"> input[type='text']":X({padding:0,border:"none",resize:"none",cursor:"text",appearance:"none",backgroundColor:"transparent","&::selection":this.style.editor?this.style.editor.selection:void 0,"&::-moz-selection":this.style.editor?this.style.editor.selection:void 0,"&:focus":{outline:"none"},"&::-ms-clear":{display:"none"},"&:invalid":{border:"none",outline:"0"}},this.style.editor?this.style.editor.appearance:void 0,{position:"absolute",display:"block",left:0,top:0,right:0,bottom:0,width:"100%",margin:0,userSelect:"text"})},[So.selector("editor-selected")]:this.style.editor&&this.style.editor.selected?{"> input[type='text']":X({"&::selection":this.style.editor.selected.selection,"&::-moz-selection":this.style.editor.selected.selection},this.style.editor.selected.appearance)}:void 0},this.style.cell?this.style.cell.appearance:void 0,this.cellStyles)}),"> label":J(this.style.cell?this.style.cell.appearance:void 0,this.style.cell&&this.style.cell.static?this.style.cell.static.appearance:void 0,this.style.cell&&this.style.cell.static&&this.style.cell.static.label?this.style.cell.static.label.appearance:void 0,{position:"absolute",left:0,right:0,height:this.m_nRowHeight,overflow:"hidden",visibility:"hidden"}),[So.selector("odd")]:J(this.style.row?this.style.row.odd:void 0,{"> div":J(this.style.column?this.style.column.odd:void 0,{"> div":this.style.cell?this.style.cell.odd:void 0})}),[So.selector("even")]:J(this.style.row?this.style.row.even:void 0,{"> div":J(this.style.column?this.style.column.even:void 0,{"> div":this.style.cell?this.style.cell.even:void 0})}),[So.selector("hover")]:J(this.style.row?this.style.row.hover:void 0,{"> div":J(this.style.column?this.style.column.hover:void 0,{"> div":this.style.cell?this.style.cell.hover:void 0})}),[So.selector("selected")]:J(this.style.row?this.style.row.selected:void 0,{"> div":J(this.style.column?this.style.column.selected:void 0,{"> div":J(this.style.checkbox&&this.style.checkbox.selected?{[So.selector("checkbox")]:{"> span":this.style.checkbox.selected.unchecked,"input[type='checkbox']:checked + span":this.style.checkbox.selected.checked}}:void 0,this.style.switch&&this.style.switch.selected?{[So.selector("checkbox")]:{"> span":this.style.switch.selected.off,"input[type='checkbox']:checked + span":this.style.switch.selected.on}}:void 0,this.style.cell?this.style.cell.selected:void 0)})}),[So.selector("disabled")]:J(this.style.row?this.style.row.disabled:void 0,{"> div":J(this.style.column?this.style.column.disabled:void 0,{"> div":this.style.cell?this.style.cell.disabled:void 0})}),[So.selector("moving")]:J(this.style.row?this.style.row.moving:void 0,{"> div":J(this.style.column?this.style.column.moving:void 0,{"> div":this.style.cell?this.style.cell.moving:void 0})}),[So.selector("static")]:J(this.style.row&&this.style.row.static?this.style.row.static.appearance:void 0,{"> div":J(this.style.column&&this.style.column.static?this.style.column.static.appearance:void 0,{"> div":this.style.cell&&this.style.cell.static?this.style.cell.static.appearance:void 0}),[So.selector("moving")]:J(this.style.row&&this.style.row.static?this.style.row.static.moving:void 0,{"> div":J(this.style.column&&this.style.column.static?this.style.column.static.moving:void 0,{"> div":this.style.cell&&this.style.cell.static?this.style.cell.static.moving:void 0}),"> label":J(this.style.cell&&this.style.cell.static?this.style.cell.static.moving:void 0,this.style.cell&&this.style.cell.static&&this.style.cell.static.label?this.style.cell.static.label.moving:void 0)})}),[So.selector("label")]:{"> label":{visibility:"inherit"},"> div":{visibility:"hidden"}},[So.selector("hidden")]:X({opacity:0,transition:"opacity .2s ease-out, visibility 0s ease 0.2s"},this.style.row?this.style.row.hidden:void 0,{visibility:"hidden"})}),[So.selector("lagging")]:{"> div":J(this.style.row?this.style.row.lagging:void 0,{"> div":J(this.style.column?this.style.column.lagging:void 0,{"> div":this.style.cell?this.style.cell.lagging:void 0}),"> label":J(this.style.cell?this.style.cell.lagging:void 0,this.style.cell&&this.style.cell.static?this.style.cell.static.lagging:void 0,this.style.cell&&this.style.cell.static&&this.style.cell.static.label?this.style.cell.static.label.lagging:void 0),[So.selector("static")]:J(this.style.row&&this.style.row.static?this.style.row.static.lagging:void 0,{"> div":J(this.style.column&&this.style.column.static?this.style.column.static.lagging:void 0,{"> div":this.style.cell&&this.style.cell.static?this.style.cell&&this.style.cell.static.lagging:void 0})})})}}],this.stylesheet),this.m_nHeaderHeight>0&&this.style.header&&(o=this.m_pColumns.drawHeader(this.m_pElement,this.style.header)),this.style.emptyState&&(k(i.emptyStateMessage)&&i.emptyStateMessage.message||C(i.emptyStateMessage))&&("yes"!==i.scrollable&&(this.m_nEmptyStateHeight=k(i.emptyStateMessage)&&e.max(i.emptyStateMessage.height||0,0)||e.max(this.style.emptyState.height||0,0)||this.rowHeight),this.m_pElementEmptyState=this.m_pElement.create("div",(e=>{k(i.emptyStateMessage)?i.emptyStateMessage.markdown?e.markdown(new es(i.emptyStateMessage.message),{target:"blank"}):e.text=i.emptyStateMessage.message:e.text=i.emptyStateMessage}),[this.style.emptyState.appearance,{position:"absolute",visibility:"hidden",boxSizing:"border-box",overflow:"hidden",left:0,top:this.m_nHeaderHeight,right:0,zIndex:0,opacity:0,[So.selector("visible")]:{visibility:"inherit",opacity:1,transform:"opacity .1s"}},this.m_nEmptyStateHeight>0?{height:this.m_nEmptyStateHeight}:{bottom:0}],this.stylesheet)),"horizontal"===i.scrollable||"yes"===i.scrollable?this.m_pScroll=Wr.on({stylesheet:this.stylesheet,asset:this.m_pElement,direction:"yes"===i.scrollable?"bidirectional":"horizontal",bounceHorizontal:"yes",bounceVertical:"yes"===i.scrollable?"always":"no",style:this.style.scrollbars,spacing:new Li(0,this.m_nHeaderHeight,0,0),autoInitialize:!1,hovering:!0,blink:!0,onInit:()=>this.ready(),onViewport:()=>this.layer?this.layer.viewport:void 0,onDimensions:()=>this.dimensions,onHover:e=>this.hover(e),onStart:()=>{this.rowHovered&&this.rowHovered.onHover(!1,!0),this.focus()},onScroll:e=>{o&&(o.x=-e),this.invalidate()},onChange:e=>{this.m_bLazy&&!e.canScrollDown&&(this.m_pLazy=this.m_pLazy||new tt((()=>{this.emitHook("OnLazyLoad",{list:this}),pe(this.onLazyLoad,this)}),100),this.m_pLazy.invoke())},onEnd:()=>{this.rowHovered&&this.rowHovered.onHover(!0,!0)}}):this.m_pElementRows.style({top:this.m_nHeaderHeight},this.stylesheet),this.m_pFocus=(this.scroll?this.scroll.focusController:void 0)||Ar.on(this.m_pElement,this.m_pElement,i.autoFocus?"focus-on-stroke":"no-auto-focus","no-auto-blur"),this.m_pFocus.hook("OnFocus","synchronous",(()=>this.focused())),Tr.local(this.m_pElement,(e=>this.key(e)),"keydown")}get stylesheet(){return this.m_pStylesheet}get style(){return this.m_pStyle}get cellStyles(){return{position:"absolute",left:0,top:0,right:0,height:this.m_nRowHeight,overflow:"hidden",whiteSpace:"nowrap","> img":{border:"none",display:"inline-block","&[src='']":{display:"none"}}}}get glyphStyles(){return this.stylesheet.style([this.style.row?this.style.row.appearance:void 0,this.style.row?this.style.row.selected:void 0,this.style.row&&this.style.row.glyph?this.style.row.glyph.appearance:void 0,{position:"absolute",boxSizing:"border-box",overflow:"hidden",left:0,top:0,height:this.m_nRowHeight,"> div":J(this.style.column?this.style.column.appearance:void 0,this.style.column&&this.style.column.glyph?this.style.column.glyph.appearance:void 0,{position:"absolute",boxSizing:"border-box",height:this.m_nRowHeight,overflow:"hidden","> div":J({textOverflow:"ellipsis",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",cursor:"default",[So.selector("selector")]:{textOverflow:"clip",padding:0,"> input[type='checkbox']":{opacity:0,margin:0,padding:0,width:0,height:0,display:"inline",float:"left",appearance:"none"},"> span":X({display:"inline-block",width:(this.style.selector?e.max(this.style.selector.width,0):0)||this.m_nRowHeight,height:this.m_nRowHeight},this.style.selector?this.style.selector.appearance:void 0,this.style.selector?this.style.selector.unchecked:void 0),"input[type='checkbox']:checked + span":this.style.selector?this.style.selector.checked:void 0},[So.selector("checkbox")]:{textOverflow:"clip",padding:0,"> input[type='checkbox']":{opacity:0,margin:0,padding:0,width:0,height:0,display:"inline",float:"left",appearance:"none"},"> span":X({display:"inline-block",width:(this.style.checkbox?e.max(this.style.checkbox.width,0):0)||this.m_nRowHeight,height:this.m_nRowHeight},this.style.checkbox?this.style.checkbox.appearance:void 0,this.style.checkbox?this.style.checkbox.unchecked:void 0,this.style.checkbox&&this.style.checkbox.selected?this.style.checkbox.selected.unchecked:void 0),"input[type='checkbox']:checked + span":J(this.style.checkbox?this.style.checkbox.checked:void 0,this.style.checkbox&&this.style.checkbox.selected?this.style.checkbox.selected.checked:void 0)},[So.selector("switch")]:{textOverflow:"clip",padding:0,"> input[type='checkbox']":{opacity:0,margin:0,padding:0,width:0,height:0,display:"inline",float:"left",appearance:"none"},"> span":X({display:"inline-block",width:(this.style.switch?e.max(this.style.switch.width,0):0)||this.m_nRowHeight,height:this.m_nRowHeight},this.style.switch?this.style.switch.appearance:void 0,this.style.switch?this.style.switch.off:void 0,this.style.switch&&this.style.switch.selected?this.style.switch.selected.off:void 0),"input[type='checkbox']:checked + span":J(this.style.switch?this.style.switch.on:void 0,this.style.switch&&this.style.switch.selected?this.style.switch.selected.on:void 0)}},this.style.cell?this.style.cell.appearance:void 0,this.style.cell?this.style.cell.selected:void 0,this.style.cell&&this.style.cell.glyph?this.style.cell.glyph.appearance:void 0,this.cellStyles)}),"> label":J(this.style.cell?this.style.cell.appearance:void 0,this.style.cell&&this.style.cell.static?this.style.cell.static.appearance:void 0,this.style.cell&&this.style.cell.static&&this.style.cell.static.label?this.style.cell.static.label.appearance:void 0,this.style.cell&&this.style.cell.glyph&&this.style.cell.glyph.static?this.style.cell.glyph.static.label:void 0,{position:"absolute",left:0,right:0,height:this.m_nRowHeight,overflow:"hidden",visibility:"hidden"}),[So.selector("static")]:J(this.style.row&&this.style.row.static?this.style.row.static.appearance:void 0,this.style.row&&this.style.row.glyph?this.style.row.glyph.static:void 0,{"> div":J(this.style.column&&this.style.column.static?this.style.column.static.appearance:void 0,this.style.column&&this.style.column.glyph?this.style.column.glyph.static:void 0,{"> div":J(this.style.cell&&this.style.cell.static?this.style.cell.static.appearance:void 0,this.style.cell&&this.style.cell.glyph&&this.style.cell.glyph.static?this.style.cell.glyph.static.appearance:void 0)})}),[So.selector("label")]:{"> label":{visibility:"inherit"},"> div":{visibility:"hidden"}},[So.selector("following")]:J(this.style.row&&this.style.row.glyph?this.style.row.glyph.following:void 0,{"> div":J(this.style.column&&this.style.column.glyph?this.style.column.glyph.following:void 0,{"> div":this.style.cell&&this.style.cell.glyph?this.style.cell.glyph.following:void 0})})}])}get layer(){return this.m_pLayer}get scroll(){return this.m_pScroll}get state(){const e=[],t=[],i=[];return this.each((s=>{const o=s.identifier;o&&(s.isSelected&&i.push(o),s.isCollapsedChanged&&(s.isCollapsed?e.push(o):t.push(o)))})),{columns:this.columnsState,selected:i,collapsed:e,expanded:t,scroll:{x:this.scroll?this.scroll.scrollLeft:0,y:this.scroll?this.scroll.scrollTop:0}}}set state(e){this.columnsState=e.columns,this.selectionOfIdentifiers=e.selected,ee(e.collapsed,(e=>{const t=this.rowWithIdentifier(e);t&&(t.isCollapsed=!0)})),ee(e.expanded,(e=>{const t=this.rowWithIdentifier(e);t&&(t.isCollapsed=!1)})),this.scroll&&(e.scroll.x>0||e.scroll.y>0)&&this.scroll.scrollTo(e.scroll.x,e.scroll.y)}get dimensions(){let e=this.rowsHeight;return!(this.m_bRowSpacingAfterLastRow&&e>0)||this.scroll&&this.scroll.vertical||(e+=this.rowSpacing),new Ni(this.m_pColumns.columnsWidth,(e||this.m_nEmptyStateHeight)+(this.scroll&&this.scroll.vertical?0:this.m_nHeaderHeight))}get element(){return this.m_pElement}get rows(){return this.m_pRows}get rowsElement(){return this.m_pFragment||this.m_pElementRows}get rowsHeight(){const e=this.m_pRows.countVisible;return e>0?(this.rowHeight+this.rowSpacing)*e-this.rowSpacing:0}get rowWidth(){return this.m_pColumns.rowWidth}get rowHeight(){return this.m_nRowHeight}get rowSpacing(){return this.m_nRowSpacing}get rowHovered(){return this.m_pRowHovered}set rowHovered(e){this.m_pRowHovered=e}get columnsCount(){return this.m_pColumns.count}get columnsState(){return this.m_pColumns.state}set columnsState(e){this.m_pColumns.state=e}get decorator(){return this.m_fnDecorator}get count(){return this.m_pRows.countRecursive}get all(){return this.m_pRows.all}get children(){return this.m_pRows.children}get selection(){const e=[];return this.each((t=>{t.isSelected&&e.push(t)})),e}get selectionCount(){return P(this.selection)}get selectedRow(){if(1===P(this.selection))return this.selection[0]}get selectionOfIdentifiers(){const e=[];return this.each((t=>{if(t.isSelected){const i=t.identifier;i&&e.push(i)}})),e}set selectionOfIdentifiers(e){let t=0;this.deselectAll(),ee(e,(e=>{const i=this.rowWithIdentifier(e);i&&(1===t&&(this.isMultipleSelect=!0),i.isSelected=!0,t++)}))}get isMultipleSelect(){return this.m_bMultipleSelect}set isMultipleSelect(e){e!==this.m_bMultipleSelect&&(this.m_bMultipleSelect=e,!this.m_bMultipleSelect&&this.selectionCount>1&&this.deselectAll(),this.isHookAllowed&&(this.emitHook("OnSelectionMode",{list:this}),pe(this.onSelectionMode,this)))}get isAllSelected(){return this.m_pRows.count>0&&!this.each((e=>!e.isStatic&&!e.isDisabled&&!e.isSelected))}get maxIndentionDepth(){return this.m_nIndentationMax}get isConstructing(){return"construction"===this.m_sState}get isCalculated(){return"calculated"===this.m_sState}get isReady(){return"ready"===this.m_sState}get isCollapsed(){return this.m_bCollapsed&&!this.isMoving}get hasFocus(){return!!this.m_pFocus&&this.m_pFocus.hasFocus}get isScrolling(){return this.scroll instanceof Zr&&this.scroll.isScrolling}get isColumnMovingOrResizing(){return this.m_pColumns.isMovingOrResizing}get isSorting(){return this.m_pColumns.isSorting}get isMoving(){return this.m_bMoving}get isFiltered(){return this.each((e=>e.isExcluded))}get isDestroyed(){return this.m_bDestroyed}get isHookAllowed(){return this.isReady&&!this.isDestroyed}calculate(t,i){t=e.max(t,0),this.m_pColumns.calculate(e.floor(t)),"calculating"===this.m_sState?(this.resort(),this.m_sState="calculated",this.dimensionsChanged(),this.invalidateRows(i),this.scroll?this.scroll.init():this.ready()):(this.invalidate(),this.scroll&&this.scroll.update(!0))}ready(){this.isCalculated&&(this.m_sState="ready",this.layer?this.layer.done():this.element&&(this.element.visible=!0),this.isHookAllowed&&(this.emitHook("OnReady",{list:this}),pe(this.onReady,this)))}key(e){if(!this.hasFocus||xr.isInput)return!1;if(this.m_bMultipleSelectUsingCtrl&&"a"===e.value&&64&e.modifiers&&this.count>0)return this.selectAll(),!0;if(e.hasModifiers)return!1;switch(e.key){case"ArrowUp":case"ArrowDown":if(this.selectedRow&&!this.isMultipleSelect){const t="ArrowUp"===e.key;let i=t?this.selectedRow.previous:this.selectedRow.next;for(;i;){if(!i.isHidden&&(i.isSelected=!0,i.isSelected))return i.scrollIntoView(),!0;i=t?i.previous:i.next}}break;case"Escape":return this.deselectAll(),!0;case"ArrowRight":case"+":if(this.selectedRow&&this.selectedRow.isExpandable)return this.selectedRow.expand(),!0;break;case"ArrowLeft":case"-":if(this.selectedRow&&this.selectedRow.isExpandable)return this.selectedRow.collapse(),!0;break;case"Enter":return this.selectedRow&&!this.selectedRow.enter()&&(this.emitHook("OnEnter",{row:this.selectedRow}),pe(this.onEnter,this.selectedRow)),!0}return!1}hover(e){this.element&&this.element.selectorSafe("hover",e)}focused(){this.hasFocus?this.emitHook("OnFocus",{list:this}):this.emitHook("OnBlur",{list:this}),pe(this.hasFocus?this.onFocus:this.onBlur,this)}mover(t,i,s){const o=this.glyphStyles;let n,r,a,l,c,u,h;Vr.on({asset:t,onInit:e=>(n=this.rows.rowFromPoint(e.offset),n instanceof Za&&n.isMovable),onStart:()=>!(!n||!Q(pe(this.onMoveStart,n),!0)||(r=0,this.m_pColumns.each((e=>(r=e.indentation)>0)),Lr.stop(),n.glyphCreate(o,this.rowWidth,!i&&r>0,!1),t.addSelectorSafe("lagging"),a=n.index,l=n.top,c=n.height,u=n.depth,h=!0,this.m_bMoving=!0,s&&(this.deselectAll(),n.isSelected=!0),this.emitHook("OnMoveStart",{row:n}),n.emitHook("OnMoveStart",{row:n}),0)),onMove:t=>{let s,o,a=0,d=!i&&n?n.position:0,p=!1;const m=e=>{if(n&&e!==n&&!e.isHidden&&(i||!e.isChildOf(n))){let r;if(i?(r=e.mean,a=e.index,d=n.index):r=e.top+this.rowHeight/2,(d>a&&l+t.diffY<r||d<a&&l+t.diffY+c>r)&&Q(pe(this.onMove,n,e),!0)){if(s=e,o=!i&&d<a&&e.countVisible>0?"firstchild":d>a?"above":"below",d>a||e.isLastOfMatrix)return n.move(s,o)}else if(s&&d<a)return n.move(s,o)}return a++,!1};if(n&&(n.glyphMove(t.moveX,t.moveY),p=i&&n&&n.parent?n.parent.each(m):this.each(m),!i&&r>0)){const i=n.depth;let s;s=t.diffX<0?e.ceil(t.diffX/r):e.floor(t.diffX/r),s=e.max(u+s,0),s!==i&&(s=e.range(s,i-1,i+1),s>i&&n.isPredecessorVisibleAndExpanded?(n.increase(),p=!0):s<i&&n.isLastVisible&&(n.decrease(),p=!0))}p&&h&&(this.m_pColumns.nosort(),h=!1)},onEnd:()=>{n&&this.m_bMoving&&(n.glyphDestroy(),this.emitHook("OnMoveEnd",{row:n,from:a,to:n.index}),n.emitHook("OnMoveEnd",{row:n,from:a,to:n.index}),pe(this.onMoveEnd,n),n.index!==a&&(this.emitHook("OnMove",{row:n,from:a,to:n.index}),n.emitHook("OnMove",{row:n,from:a,to:n.index}),pe(this.onMoved,n,a,n.index))),this.m_bMoving=!1,t.removeSelectorSafe("lagging"),n=void 0}})}createFragment(){return!(!this.isReady&&!this.isCalculated||(this.m_pFragment=this.m_pFragment||new pr,this.m_nFragment++,1!==this.m_nFragment))}reflectFragment(){return this.m_nFragment>0&&(this.m_nFragment--,0===this.m_nFragment)&&(this.m_pFragment&&this.m_pFragment.reflect(this.m_pElementRows),this.m_pFragment=void 0,!0)}invalidateRows(e){if(this.isReady||this.isCalculated){if(this.createFragment(),this.m_bLazy){let t=0,i=0;e?i=e:this.scroll&&(t=this.scroll.scrollTop,i=t+this.scroll.viewport.height);const s=(i-t)/2;this.rows.invalidate(t-s,i+s,s)}else this.rows.recursiveEach((e=>{e.draw()}),!1);this.reflectFragment()}}invalidateRow(e){(this.isReady||this.isCalculated)&&(this.m_bLazy?this.invalidate():e.draw())}invalidate(){this.m_bLazy&&this.isReady&&this.m_pInvalidate.invoke()}dimensionsChanged(){0===this.m_nFragment&&(ro((()=>{this.scroll&&this.scroll.vertical||!this.element||(this.element.height=this.dimensions.height),this.m_pElementRows&&(this.m_pElementRows.height=this.rowsHeight+this.rowSpacing,this.m_pElementRows.selector("visible",this.rowsHeight>0),this.scroll&&this.scroll.vertical&&("no"!==this.scroll.isBounceVertical&&(this.scroll.isBounceVertical=0===this.rowsHeight?"yes":"always"),this.isReady&&this.scroll.update(!0))),this.m_pElementEmptyState&&this.m_pElementEmptyState.selector("visible",0===this.rowsHeight)})),this.isHookAllowed&&(this.emitHook("OnResize",{list:this}),pe(this.onResize,this)))}selectionChanged(e,t){this.isHookAllowed&&(this.m_nSelectionHandle=Ne((()=>{this.emitHook("OnSelectionChange",{list:this}),pe(this.onSelectionChange,this)}),this.m_nSelectionHandle)),t&&!this.isMultipleSelect&&this.each((t=>{t!==e&&(t.isSelected=!1)})),this.isHookAllowed&&(t?this.emitHook("OnSelect",{row:e}):this.emitHook("OnDeselect",{row:e}),pe(t?this.onSelect:this.onDeselect,e))}init(e,t){"construction"===this.m_sState&&(this.emitHook("OnInit",{list:this}),pe(this.onInit,this),this.m_sState="initializing"),"initializing"===this.m_sState&&(this.m_nInitialized=0,this.element&&this.m_pColumns.init()?(this.m_sState="calculating",this.calculate(e||this.element.rectangleWidth,t||this.element.rectangleHeight)):this.m_nInitialized=no((()=>{this.init(e,t)}),this.m_nInitialized))}resize(e,t){this.isReady&&(e&&t?this.calculate(e,t):no((()=>{if(this.element){const i=this.element.rectangle;this.calculate(e||i.width,t||i.height)}})))}column(e){return this.m_pColumns.column(e)}eachColumn(e){this.m_pColumns.each((t=>e(t)))}rowAtIndex(e){let t;if(!(e<0))return this.each((i=>(0===e&&(t=i),e--,t instanceof Za))),t}rowWithIdentifier(e){let t;return this.each((i=>(t=i.identifier===e?i:void 0)instanceof Za)),t}add(e){return this.rows.add(e)}addN(...e){let t=0;return this.buffer(),t=this.rows.addN(...e),this.flush(),t}insert(e){return this.rows.insert(e)}insertN(...e){let t=0;return this.buffer(),t=this.rows.insertN(...e),this.flush(),t}each(e){return this.rows.recursiveEach(e,!1)}eachReverse(e){return this.rows.recursiveEach(e,!0)}buffer(){this.createFragment()&&(this.m_nBuffer=this.rowsHeight)}flush(){this.reflectFragment()&&this.m_nBuffer!==this.rowsHeight&&this.dimensionsChanged()}clear(){this.rows.clear()}sort(e,t="ascending"){const i=this.column(e);i&&i.sort(t)}nosort(){this.m_pColumns.nosort()}resort(){this.m_pColumns.resort()}unsorted(){this.isReady&&this.m_pColumns.unsorted()}selectAll(){this.isMultipleSelect=!0,this.each((e=>{e.isSelected=!0}))}deselectAll(){this.each((e=>{e.isSelected=!1}))}selectMatching(e,t=!0){let i=0;return this.isMultipleSelect=t,this.each((t=>{t.isSelected=e(t),t.isSelected&&i++})),i}expandAll(){this.each((e=>{e.count>0&&e.expand()}))}collapseAll(){this.each((e=>{e.count>0&&e.collapse()}))}filter(e){const t=this.rows.recursiveFilter(e);return this.invalidate(),t}unfilter(){this.each((e=>{e.isExcluded=!1}))}focus(){this.m_pFocus&&this.m_pFocus.focus()}blur(){this.m_pFocus&&this.m_pFocus.blur()}scrollToTop(){this.scroll&&this.scroll.scrollToTop()}scrollToBottom(){this.scroll&&this.scroll.scrollToBottom()}scrollToTopOrBottom(){this.scroll&&this.scroll.scrollToTopOrBottom()}scrollIntoView(e){this.scroll&&(this.m_pScrollToRow=e,this.m_pScrollIntoView.invoke())}refresh(){this.each((e=>e.refresh()))}refreshed(){this.isHookAllowed&&this.m_pRefresh.invoke()}destroy(){this.isDestroyed||(this.m_bDestroyed=!0,this.m_pRefresh.cancel(),this.m_pLazy&&this.m_pLazy.cancel(),lo(this.m_nInitialized),this.m_nSelectionHandle=_e(this.m_nSelectionHandle),this.m_pInvalidate.cancel(),this.m_pRows.destroy(),this.m_pColumns.destroy(),this.m_pScroll&&(this.m_pScroll.destroy(),this.m_pScroll=void 0),this.m_pElementRows&&(this.m_pElementRows.destroy(),this.m_pElementRows=void 0),this.m_pFragment=void 0,this.m_pElement=void 0,this.m_pLayer=void 0)}}function $a(e,t,i){i&&!i.set||St("column",e,t,i,(e=>e.target.write(t,e.newValue))),Object.defineProperty(e,`@list is-column #${t}`,{get:()=>!0,enumerable:!1,configurable:!1})}Ga.stylesheet=So.app;class Qa extends vt{constructor(e){super(),this.m_nTab=0,this.m_sLabelCompact="",this.m_nModes=3,this.m_nIndent=0,this.m_bVisible=!0,this.m_bDisabled=!1,this.m_bLocked=!1,this.m_bRequired=!1,this.m_bGroupVisible=!0,this.m_sValidation="unknown",this.m_bHover=!1,this.m_bFocus=!1,this.m_bFocusAuto=!1,this.m_bFocusAutoSet=!1,this.m_nCursor=-1,this.m_pStyle=e.style,this.m_sStyle=e.styleName||"",this.m_pStyleDefault=e.styleDefault,this.m_bStatic=_(e.label),this.m_sLabel=W(e.label)}get parent(){return this.m_pParent}get element(){return this.m_pElement}get static(){}get isSingleControlInForm(){return this.form instanceof Xa&&1===this.form.count}get isFused(){return this.isSingleControlInForm&&(this.m_bStatic||!this.static)}get form(){return this.m_pForm}set form(e){if(e){if(this.m_pForm)throw new Error("UI.Form.Control: Form is already attached. You can use a control only once.");this.m_pForm=e,this.m_nTab=Aa.tab,this.m_pStyle||(this.m_pStyle=e.styles(this.m_sStyle)||this.m_pStyleDefault),this.onExecute()}}get isFormReady(){return!!this.form&&this.form.isReady}get isFormEnabled(){return!!this.form&&!this.form.isDisabled}get isFormVisible(){return!!this.form&&this.form.isVisible}get isGroupVisible(){return this.m_bGroupVisible}get ref(){return this.m_sReference}get feature(){return this.form?this.form.feature:void 0}get isFeatureEnabled(){return!!this.feature&&this.feature.isActivated}get hasLabel(){return!(!this.m_sLabel&&!this.m_pMarkdownOptions)}get stylesheet(){return this.form?this.form.stylesheet:So.app}get style(){return this.m_pStyle}get modes(){return this.m_nModes}get tab(){return this.m_nTab}get isVisible(){return this.m_bVisible}set isVisible(e){this.visible(e)}get isDisabled(){return this.m_bDisabled}set isDisabled(e){this.disabled(e)}get isLocked(){return this.m_bLocked}set isLocked(e){this.locked(e)}get isRequired(){return this.m_bRequired}set isRequired(e){this.required(e)}get isInteractable(){return this.isObservable&&!this.isDisabled&&!this.isLocked&&this.form instanceof Xa&&this.form.isObservable&&!this.form.isDisabled}get isObservable(){return!!(this.isVisible&&this.isGroupVisible&&this.form&&this.modes&this.form.mode)}get isReadable(){return this.isVisible&&this.isFormVisible&&this.isGroupVisible&&this.isFormEnabled&&!this.isDisabled&&(!this.feature||this.isFeatureEnabled)}get isHovered(){return this.isInteractable&&this.m_bHover}get hasFocus(){return this.isInteractable&&this.m_bFocus}get validation(){return this.m_sValidation}set validation(e){this.m_sValidation!==e&&(this.m_sValidation=e,this.onValidate(),this.updateControl("validation"))}get isPassed(){return"pass"===this.validation}set isPassed(e){(e||this.isPassed)&&(this.validation=e?"pass":"unknown")}get isInvalid(){return"invalid"===this.validation}set isInvalid(e){(e||this.isInvalid)&&(this.validation=e?"invalid":"unknown")}get isFailed(){return"fail"===this.validation}set isFailed(e){(e||this.isFailed)&&(this.validation=e?"fail":"unknown")}get isAwaiting(){return"await"===this.validation}set isAwaiting(e){(e||this.isAwaiting)&&(this.validation=e?"await":"unknown")}cancelValidation(){this.m_pValidationCallback&&(this.m_pValidationCallback.cancel(),this.m_pValidationCallback=void 0)}updateVisibility(){ro((()=>{this.element&&this.element.selector("visible",this.isObservable),this.updateControl("visible")}),!this.element||!this.element.isInDOM),this.form&&this.form.verify()}drawStatic(e){if(this.static){const t=this.form&&this.form.isModeCompact&&C(this.m_sLabelCompact)?this.m_sLabelCompact:this.m_sLabel;this.m_pMarkdownOptions?this.static.markdown(es.parse(t,this.m_pMarkdownOptions),void 0,((e,t)=>{"hyperlink"===t&&xr.mode(e,"disable")})):this.static.text=t,e&&this.form&&this.form.resize()}}updateControl(e){this.form&&this.form.isReady&&("visible"!==e&&"disabled"!==e&&"required"!==e&&"locked"!==e||this.form.resize(),"visible"!==e&&"disabled"!==e&&"locked"!==e&&"focus"!==e||this.form.focusUpdate(),"visible"!==e&&"disabled"!==e&&"locked"!==e||this.onFocusOptions(),this.onChange(e)),ro((()=>this.onUpdate()),!this.element||!this.element.isInDOM,"disabled"===e||"locked"===e)}updateFocus(e,t,i,s){e!==this.m_bFocus&&(this.m_bFocus=e,this.m_nCursor=-1,this.hasFocus?this.onFocus(this.m_bFocusAutoSet):this.onBlur(),this.updateControl("focus"),this.form&&this.form.isReady&&this.hasFocus&&this.form.scrollIntoView(i||this.element,!0),i&&s&&t&&(e?xr.focus(i,s,(()=>this.updateFocus(!1,!1))):xr.blur(i)))}hover(e){this.m_bHover!==e&&(this.m_bHover=e,this.onHover(),this.updateControl("hover"))}keyboard(e,t,i=!1,s){const o="textarea"===e.tagName,n="input"===e.tagName,r="select"===e.tagName;let a=o,l=!1,c=!1,u=!1;if(n){const t=e.property("type")||"";c="checkbox"===t,u="radio"===t,a="text"===t||"password"===t}l=o||n&&!c&&!u,Tr.local(e,(n=>{if(!this.hasFocus)return!1;if(s&&s(n))return!0;if(!n.isKeyDown)return!1;if(!n.hasModifiers&&("ArrowUp"===n.key||"ArrowDown"===n.key||"ArrowLeft"===n.key&&l)){const t="ArrowDown"!==n.key;let i=!1,s=!1;if(l){const o=e.HTMLElementOfType();(a&&o&&o.selectionStart===o.selectionEnd&&(o.selectionStart===(t?0:L(o.value))||o.selectionStart===this.m_nCursor)||!a&&"ArrowLeft"!==n.key)&&("ArrowLeft"===n.key&&this.feature&&(this.feature.focus()||this.feature.features.each((e=>e.focus())))||(i=!0),s=!0),this.m_nCursor=i||!o?-1:G(o.selectionStart)}else r||(i=!this.focusTo(t?"previous":"next"),s=!0);return i&&this.form&&(s=this.form.focusTo(t?"previous":"next")),s}if("ArrowLeft"===n.key&&!n.hasModifiers&&this.feature&&(this.feature.focus()||this.feature.features.each((e=>e.focus()))))return!0;switch(n.key){case"Enter":case" ":if("Enter"===n.key&&(32===n.modifiers||!n.hasModifiers&&(!o||i)&&!r)||" "===n.key&&!n.hasModifiers&&!l&&!r)return!(" "!==n.key&&n.isShift||!(t?t():this.onEnter(e)))||(this.form&&this.form.focusTo("next")||e.blur(),!0);break;case"Escape":if(!n.hasModifiers)return this.onEscape(e)||e.blur(),!0}return!1}))}initialized(){this.form&&this.form.initialized()}onUpdate(){this.element&&this.element.selector("disabled",this.isDisabled)}onExecute(){this.m_fnBind&&(this.m_fnBind(this),this.m_fnBind=void 0),this.m_fnExecute&&(this.m_fnExecute(this),this.m_fnExecute=void 0),this.emitHook("OnExecute",{control:this})}onChange(e){this.emitHook("OnChange",{control:this,change:e})}onHover(){this.emitHook("OnHover",{control:this})}onFocus(e){this.validate("focus"),this.emitHook("OnFocus",{control:this})}onFocusOptions(){this.emitHook("OnFocusOptions",{control:this})}onBlur(){this.validate("blur"),this.emitHook("OnBlur",{control:this})}onEnter(e){return this.emitHook("OnEnter",{control:this}),!1}onEscape(e){return this.emitHook("OnEscape",{control:this}),!1}onEnable(){this.emitHook("OnEnable",{control:this})}onDisable(){this.emitHook("OnDisable",{control:this})}onRequire(){this.emitHook("OnRequire",{control:this})}onOptional(){this.emitHook("OnOptional",{control:this})}onLock(){this.emitHook("OnLock",{control:this})}onUnlock(){this.emitHook("OnUnlock",{control:this})}onValidate(){this.form&&this.form.validate(),this.emitHook("OnValidate",{control:this})}onInit(){return!0}onMeasure(){return 0}onResized(){this.emitHook("OnResized",{control:this})}onFormResize(){this.emitHook("OnFormResize",{control:this})}onFormActivate(){this.emitHook("OnFormActivate",{control:this})}onFormDeactivate(){this.emitHook("OnFormDeactivate",{control:this})}onFormEnable(){this.onFocusOptions(),this.emitHook("OnFormEnable",{control:this})}onFormDisable(){this.onFocusOptions(),this.emitHook("OnFormDisable",{control:this})}onShow(){this.emitHook("OnShow",{control:this})}onHide(){this.emitHook("OnHide",{control:this})}onMode(){C(this.m_sLabelCompact)&&this.drawStatic(!0),this.updateVisibility(),this.emitHook("OnMode",{control:this})}onRequestAutoFocus(){let e=!1;return this.m_bFocusAutoSet=!0,this.m_bFocusAuto&&this.focus()&&(this.emitHook("OnAutoFocus",{control:this}),e=!0),this.m_bFocusAutoSet=!1,e}draw(e){this.form&&(this.m_pParent=e,this.m_pElement=this.onDraw(e),this.drawStatic(!1),this.element&&(this.element.style({display:"none",[So.selector("visible")]:{display:"block"},[So.selector("disabled")]:{cursor:"default !important",pointerEvents:"none","*":{cursor:"default !important",pointerEvents:"none"}}},this.stylesheet),this.m_nIndent>0&&this.element.style({width:`calc(100% - ${this.m_nIndent}px) !important`,marginLeft:`${this.m_nIndent}px !important`},this.stylesheet),this.element.selector("visible",this.isObservable),this.element.selector("disabled",this.isDisabled)),this.validate("initial"))}redraw(){return this.parent&&this.element&&(this.element.destroyChildren(),this.element.destroyAttribute("class"),this.draw(this.element)),this}resize(){this.form&&this.form.isReady&&this.form.resize()}groupVisibility(e){this.m_bGroupVisible!==e&&(this.m_bGroupVisible=e,this.updateVisibility(),this.isObservable?this.onShow():this.onHide(),this.validate("visible"))}label(e){return this.m_sLabel=t.sanitize(e),this.drawStatic(!0),this}labelCompact(e){return this.m_sLabelCompact=t.sanitize(e),this.drawStatic(!0),this}markdown(e){return this.m_pMarkdownOptions=e||{},this.drawStatic(!0),this}visible(e=!0){return this.m_bVisible!==e&&(this.m_bVisible=e,this.updateVisibility(),this.isObservable?this.onShow():this.onHide(),this.validate("visible")),this}show(){return this.visible(!0)}hide(){return this.visible(!1)}disabled(e=!0){return this.m_bDisabled!==e&&(this.m_bDisabled=e,e?this.onDisable():this.onEnable(),this.updateControl("disabled"),this.validate("disabled")),this}disable(){return this.disabled(!0)}enable(){return this.disabled(!1)}required(e=!0){return this.m_bRequired!==e&&(this.m_bRequired=e,e?this.onRequire():this.onOptional(),this.updateControl("required"),this.validate("required")),this}require(){return this.required(!0)}locked(e=!0){return this.m_bLocked!==e&&(this.m_bLocked=e,this.m_bLocked&&(this.m_bHover&&(this.m_bHover=!1,this.onHover()),this.m_bFocus&&(this.m_bFocus=!1,this.onBlur())),e?this.onLock():this.onUnlock(),this.updateControl("locked"),this.validate("locked")),this}readonly(){return this.locked(!0)}lock(){return this.locked(!0)}unlock(){return this.locked(!1)}mode(e){switch(e){case"compact":this.m_nModes=2;break;case"normal":this.m_nModes=1;break;case"both":this.m_nModes=3}return this.onMode(),this}compactModeOnly(){return this.mode("compact")}normalModeOnly(){return this.mode("normal")}indent(e){return this.m_nIndent=e,this}validate(e="revalidate"){return this.cancelValidation(),"unknown"===e||"fail"===e||"invalid"===e||"pass"===e||"await"===e?this.validation=e:this.m_fnAutoValidate&&(this.isFormReady||(e="initial"),this.m_pValidationCallback=Jr.of({await:t=>pe(this.m_fnAutoValidate,this,e,t)||"unknown",promise:e=>{!e.isCanceled&&e.payload&&(this.validation=e.payload)}}),this.m_pValidationCallback.isAlive&&(this.validation="await")),this}autoValidate(e){return this.m_fnAutoValidate=e,this}pass(){return this.validate("pass")}invalid(){return this.validate("invalid")}fail(){return this.validate("fail")}await(){return this.validate("await")}reference(e){return this.m_sReference=e,this}execute(e){return this.m_fnExecute=e,this}bind(e){return this.m_fnBind=e,this}unbind(e){return this.m_fnUnbind=e,this}autoFocus(e=!0){return this.m_bFocusAuto=e,this}focus(e="first"){return!1}focusTo(e){return!1}blur(){}destroy(){this.m_fnUnbind&&(this.m_fnUnbind(this),this.m_fnUnbind=void 0),this.cancelValidation(),this.m_pParent=void 0,this.m_pElement&&(this.m_pElement.destroy(),this.m_pElement=void 0)}}class qa extends vt{constructor(e){super(),this.m_bVisible=!0,this.m_bDisabled=!1,this.m_bLocked=!1,this.m_pControls=e}get isVisible(){return this.m_bVisible}set isVisible(e){this.visible(e)}get isDisabled(){return this.m_bDisabled}set isDisabled(e){this.disabled(e)}get isLocked(){return this.m_bLocked}set isLocked(e){this.locked(e)}get controls(){return this.m_pControls}onShow(){ee(this.m_pControls,(e=>e.groupVisibility(!0))),this.emitHook("OnShow",{group:this})}onHide(){ee(this.m_pControls,(e=>e.groupVisibility(!1))),this.emitHook("OnHide",{group:this})}onEnable(){ee(this.m_pControls,(e=>e.enable())),this.emitHook("OnEnable",{group:this})}onDisable(){ee(this.m_pControls,(e=>e.disable())),this.emitHook("OnDisable",{group:this})}onLock(){ee(this.m_pControls,(e=>e.lock())),this.emitHook("OnLock",{group:this})}onUnlock(){ee(this.m_pControls,(e=>e.unlock())),this.emitHook("OnUnlock",{group:this})}visible(e){return this.m_bVisible!==e&&(this.m_bVisible=e,e?this.onShow():this.onHide()),this}show(){return this.visible(!0)}hide(){return this.visible(!1)}disabled(e){return this.m_bDisabled!==e&&(this.m_bDisabled=e,e?this.onDisable():this.onEnable()),this}disable(){return this.disabled(!0)}enable(){return this.disabled(!1)}locked(e=!0){return this.m_bLocked!==e&&(this.m_bLocked=e,e?this.onLock():this.onUnlock()),this}readonly(){return this.locked(!0)}lock(){return this.locked(!0)}unlock(){return this.locked(!1)}}class Xa extends La{constructor(e){super("normal"===e.mode?1:"compact"===e.mode?2:3),this.m_pControls=[],this.m_bFocus=!1,this.m_pStyle=e.style||Xa.style||{},this.m_sTitle=W(e.title),this.m_pMarkdownOptions=e.markdown?!0===e.markdown?{}:e.markdown:void 0,this.m_bDisabled=Q(e.disabled),ee(e.controls,(e=>{e instanceof qa?this.m_pControls.push(...e.controls):this.m_pControls.push(e)})),this.each((e=>{e.form=this})),this.verify(!1)}get count(){return this.m_pControls.length}get title(){return this.m_sTitle}set title(e){this.m_sTitle!==e&&(this.m_sTitle=e,this.m_pTitle instanceof dr&&(this.m_pMarkdownOptions?this.m_pTitle.markdown(es.parse(this.title,this.m_pMarkdownOptions),void 0,((e,t)=>{"hyperlink"===t&&xr.mode(e,"disable")})):this.m_pTitle.text=this.title))}get isDisabled(){return this.m_bDisabled}set isDisabled(e){this.m_bDisabled!==e&&(this.m_bDisabled=e,ro((()=>{this.m_pFieldset&&(this.m_pFieldset.property("disabled",this.isDisabled),this.m_pFieldset.selector("disabled",this.isDisabled))}),!this.m_pFieldset||!this.m_pFieldset.isInDOM,!0),e?this.onDisable():this.onEnable())}get hasFocus(){return ue(this.m_pControls,(e=>e.hasFocus))instanceof Qa}onDraw(e){C(this.m_sTitle)&&(this.m_pTitle=e.create("h2",(e=>{this.m_pMarkdownOptions?e.markdown(es.parse(this.title,this.m_pMarkdownOptions),void 0,((e,t)=>{"hyperlink"===t&&xr.mode(e,"disable")})):e.text=this.title}),[{display:"block",margin:0,padding:0,cursor:"default"},this.m_pStyle.title,{[So.selector("fused")]:this.m_pStyle.fused?this.m_pStyle.fused.title:void 0}],this.stylesheet)),e.create("form",(e=>{e.attribute("novalidate","novalidate"),e.attribute("autocomplete","off"),this.m_pFieldset=e.append("fieldset",(e=>{e.selector("disabled",this.isDisabled),e.property("disabled",this.isDisabled),this.each((t=>t.draw(e))),1===this.m_pControls.length&&this.m_pControls[0].isFused&&(e.addSelector("fused"),this.m_pTitle&&this.m_pTitle.addSelector("fused"))}),J({display:"block",border:"none",padding:0,margin:0,minWidth:0,webkitMarginBottomCollapse:"separate"},this.m_pStyle.appearance,{[So.selector("fused")]:this.m_pStyle.fused?this.m_pStyle.fused.appearance:void 0,[So.selector("normal")]:this.m_pStyle.normal,[So.selector("compact")]:this.m_pStyle.compact,[So.selector("required")]:this.m_pStyle.required,[So.selector("focus")]:this.m_pStyle.focus,[So.selector("locked")]:this.m_pStyle.locked,[So.selector("passed")]:this.m_pStyle.passed,[So.selector("failed")]:this.m_pStyle.failed,[So.selector("awaiting")]:this.m_pStyle.awaiting,[So.selector("disabled")]:X({cursor:"default !important",pointerEvents:"none","*":{cursor:"default !important",pointerEvents:"none"}},this.m_pStyle.disabled)}),this.stylesheet),e.on("submit",(e=>{dr.stopPropagation(e)}))}),{margin:0,padding:0,display:"block"},this.stylesheet)}onMeasure(){let e=0;return this.each((t=>{e+=t.onMeasure()})),e}onResize(){this.each((e=>{e.onFormResize()})),super.onResize()}onResized(){this.each((e=>{e.onResized()})),super.onResized()}onActivate(){this.each((e=>{e.onFormActivate()})),super.onActivate()}onDeactivate(){this.blur(),this.each((e=>{e.onFormDeactivate()})),super.onDeactivate()}onEnable(){this.each((e=>{e.onFormEnable()})),this.emitHook("OnEnable",{form:this})}onDisable(){this.blur(),this.each((e=>{e.onFormDisable()})),this.emitHook("OnDisable",{form:this})}onShow(){this.each((e=>{e.isVisible&&e.onShow()})),super.onShow()}onHide(){this.blur(),this.each((e=>{e.isVisible&&e.onHide()})),super.onHide()}onFocus(){this.emitHook("OnFocus",{form:this})}onBlur(){this.emitHook("OnBlur",{form:this})}onValidate(){let e="unknown";return ue(this.m_pControls,(t=>("unknown"===t.validation||!t.isObservable||t.isDisabled||t.isLocked||(e="await"===e||t.isAwaiting?"await":t.isPassed?"pass":t.isFailed?"fail":"invalid"),"invalid"===e||"fail"===e))),e}onDestroy(){this.each((e=>{e.destroy()})),this.m_pFieldset=void 0,this.m_pTitle=void 0,super.onDestroy()}onInit(){return!ue(this.m_pControls,(e=>!e.onInit()))&&super.onInit()}onMode(){this.each((e=>{e.onMode()})),super.onMode()}onRequestFocus(){return this.isObservable&&!this.isDisabled?this.focus("first"):super.onRequestFocus()}onRequestAutoFocus(){return this.isObservable&&!this.isDisabled?he(this.m_pControls,(e=>e.onRequestAutoFocus()))instanceof Qa:super.onRequestAutoFocus()}onData(){this.emitHook("OnData",{form:this})}initialized(){ue(this.m_pControls,(e=>!e.onInit()))||super.initialized()}each(e){ee(this.m_pControls,(t=>{e(t)}))}control(e){return R(this.m_pControls,e)}controlWithReference(e){return ue(this.m_pControls,(t=>t.ref===e))}styles(e){if(this.m_pStyle.controls&&C(e))return this.m_pStyle.controls[e]}verify(e=!0){e?(this.m_pVerify||(this.m_pVerify=new tt((()=>this.verify(!1)),"promise")),this.m_pVerify.invoke()):this.isEmpty=!ue(this.m_pControls,(e=>e.isObservable))}focus(e="first"){return!(!this.isObservable||this.isDisabled)&&("last"===e?he:ue)(this.m_pControls,(t=>t.focus(e)))instanceof Qa}focusTo(e){const t=this.m_pControls.length;let i=0,s=!1;for(;i<this.m_pControls.length&&!this.m_pControls[i].hasFocus;i++);if("previous"===e&&i>0||"next"===e&&i<t-1)do{i+="previous"===e?-1:1,s=this.m_pControls[i].focus("previous"===e?"last":"first")}while(!s&&("previous"===e&&i>0||"next"===e&&i<t-1));if(!s){let t="previous"===e?this.predecessorSibling:this.successorSibling;for(;t;){if(t.focus("previous"===e?"last":"first"))return!0;t="previous"===e?t.predecessorSibling:t.successorSibling}}return s}focusUpdate(){this.m_pFocus=this.m_pFocus||new tt((()=>{this.m_pFieldset&&this.m_pFieldset.selectorSafe("focus",this.hasFocus)})),this.m_bFocus!==this.hasFocus&&(this.m_bFocus=!this.m_bFocus,this.m_pFocus.invoke(),this.m_bFocus?this.onFocus():this.onBlur())}blur(){this.each((e=>{e.blur()}))}}class Ja{constructor(e,t,i,s,o){this.paused=!1,this.m_pTarget=e,this.m_sProperty=t,this.m_pInactive=i,this.m_pDefault=s,this.m_fnModifier=o}get inactive(){return this.m_pInactive}get default(){return this.m_pDefault}get value(){return this.m_pTarget[this.m_sProperty]}set value(e){this.paused||(this.m_pTarget[this.m_sProperty]=this.m_fnModifier?this.m_fnModifier(e):e)}}class Ka extends Qa{constructor(e,t,i){super(i),e instanceof Ja?(this.m_pBinding=e,this.m_pData=S(e.value)?e.value:S(e.default)?e.default:t):this.m_pData=e}static bind(e,t,i,s,o){return new Ja(e,t,i,s,o)}dispatch(){this.m_pBinding&&(this.m_pBinding.value=this.isReadable?this.output():this.m_pBinding.inactive),this.onData()}input(e){return e!==this.m_pData&&(this.m_pData=e,this.dispatch()),this.output()}output(){return this.m_pData}onData(){this.validate("data"),this.emitHook("OnData",{control:this,data:this.output()}),this.form&&this.form.onData()}onEnable(){this.dispatch(),super.onEnable()}onDisable(){this.dispatch(),super.onDisable()}onFormActivate(){this.dispatch(),super.onFormActivate()}onFormDeactivate(){this.dispatch(),super.onFormDeactivate()}onFormEnable(){this.dispatch(),super.onFormEnable()}onFormDisable(){this.dispatch(),super.onFormDisable()}onShow(){this.dispatch(),super.onShow()}onHide(){this.dispatch(),super.onHide()}pauseBinding(){return this.m_pBinding&&(this.m_pBinding.paused=!0),this}resumeBinding(){return this.m_pBinding&&(this.m_pBinding.paused=!1),this}refresh(){return this.m_pBinding instanceof Ja&&(S(this.m_pBinding.value)||S(this.m_pBinding.default))&&(this.m_pData=S(this.m_pBinding.value)?this.m_pBinding.value:this.m_pBinding.default,this.dispatch()),this.onData(),this}}class el extends Qa{constructor(e){super(e)}}class tl extends el{constructor(e,t="normal",i){super({label:e,style:i,styleName:"notification",styleDefault:tl.style}),this.m_sType=t}get static(){return this.element}get notificationType(){return this.m_sType}set notificationType(e){this.type(e)}onDraw(e){const t=this.isFused?e:e.create("p");return t.style([{margin:0,padding:0},this.style?this.style.appearance:void 0,this.isFused&&this.style?this.style.fused:void 0,{width:"100%",boxSizing:"border-box",userSelect:"none",cursor:"default",[So.selector("normal")]:this.style?this.style.normal:void 0,[So.selector("info")]:this.style?this.style.info:void 0,[So.selector("success")]:this.style?this.style.success:void 0,[So.selector("warning")]:this.style?this.style.warning:void 0,[So.selector("error")]:this.style?this.style.error:void 0}],this.stylesheet),t.addSelector(this.m_sType),t}type(e){return e!==this.m_sType&&(this.element&&(this.element.removeSelectorSafe(this.m_sType),this.element.addSelectorSafe(e)),this.m_sType=e),this}}const il=Ha.translation("tripetto@4.5.0"),{npgettext:sl,pgettext:ol,_:nl,_n:rl}=il,al="UI.Toolbar.Item: Item is invalid because it is already attached to another toolbar.";class ll{constructor(...e){this.m_pItems={},this.m_bInitialized=!1,this.dispatcher=new vt;const t=J(...e),i=t.style||ll.style||{},s=t.parent instanceof ta?t.parent.stylesheet:void 0,o="vertical"===i.orientation;let n;if(!t.parent)throw new Error("UI.Toolbar: No parent layer or element supplied.");this.m_pStylesheet=t.stylesheet||s||ll.stylesheet,this.m_sOrientation=i.orientation||"horizontal",this.m_pView=t.view,this.onReady=t.onReady,this.onResize=t.onResize,this.onTap=t.onTap,this.onVisibility=t.onVisibility,this.onState=t.onState,this.onSelect=t.onSelect,this.onDestroy=t.onDestroy,t.parent instanceof ta?(this.m_pLayer=t.parent,this.m_pElement=t.parent.context,this.m_pLayer.hook("OnCalculated","synchronous",(()=>this.init())),this.m_pLayer.hook("OnResize","synchronous",(()=>this.update())),this.m_pLayer.hook("OnDestroy","synchronous",(()=>this.destroy())),this.m_pLayer.wait((()=>this.m_bInitialized))):this.m_pElement=t.parent,Lr.pointer(this.m_pElement,(e=>this.hover(e.isHovered))),this.m_pElement.onDestroy=(e,t)=>{t&&this.destroy()},i.scrollable||this.onResize?(n=this.m_pElement.create("div"),this.m_pScroll=(i.scrollbars?Wr:Zr).on({stylesheet:this.stylesheet,classScrollLeft:i.indicators?So.selectorHash("scroll-left-up"):"",classScrollUp:i.indicators?So.selectorHash("scroll-left-up"):"",classScrollRight:i.indicators?So.selectorHash("scroll-right-bottom"):"",classScrollDown:i.indicators?So.selectorHash("scroll-right-bottom"):"",asset:this.m_pElement,direction:o?"vertical":"horizontal",style:i.scrollbars,focus:!1,keyboard:!1,autoInitialize:!this.layer,onInit:this.layer?()=>this.ready():void 0,onViewport:this.layer?()=>this.layer?this.layer.viewport:void 0:void 0,onResize:e=>{this.onResize&&this.onResize(e.width,e.height,this)},passive:Q(i.passive,!0),hovering:!Q(i.passive,!0),blink:Q(i.blink)}),i.indicators&&(this.m_pScrollLeftUp=Gr(this.m_pScroll,o?"up":"left","nav","hover","crawl",i.indicators.begin.appearance,{opacity:0,visibility:"hidden",[So.selector("hover")]:i.indicators.begin.hover,[So.selector("crawl")]:i.indicators.begin.crawl}),this.m_pScrollRightDown=Gr(this.m_pScroll,o?"down":"right","nav","hover","crawl",i.indicators.end.appearance,{opacity:0,visibility:"hidden",[So.selector("hover")]:i.indicators.end.hover,[So.selector("crawl")]:i.indicators.end.crawl}))):(n=this.m_pElement,this.layer||n.style({overflow:"hidden"},this.m_pStylesheet)),this.m_pElement.styleSafe([i.appearance,{[So.selector("hover")]:i.hover,[So.selector("scroll-left-up")]:{"> nav:nth-of-type(1)":{visibility:"inherit",opacity:1}},[So.selector("scroll-right-bottom")]:{"> nav:nth-of-type(2)":{visibility:"inherit",opacity:1}}}],this.m_pStylesheet),n.styleSafe({display:"flex",justifyContent:"space-between",alignItems:"stretch",flexWrap:"nowrap",flexDirection:o?"column":"row",height:o?"100%":"auto",boxSizing:"border-box"},this.m_pStylesheet),this.m_pRegionLeftTop=n.append("div",void 0,[{display:"flex",flex:"1 0 auto",flexWrap:"nowrap",flexDirection:o?"column":"row","> div":{flexShrink:0}},i.spacing?{padding:[i.spacing.top,o?i.spacing.right:0,o?0:i.spacing.bottom,i.spacing.left]}:void 0],this.m_pStylesheet),this.m_pRegionRightBottom=n.append("div",void 0,[{display:"flex",flexWrap:"nowrap",flexDirection:o?"column":"row","> div":{flexShrink:0}},i.spacing?{padding:[o?0:i.spacing.top,i.spacing.right,i.spacing.bottom,o?i.spacing.left:0]}:void 0],this.m_pStylesheet),ee(t.left,(e=>this.addToLeft(e))),ee(t.right,(e=>this.addToRight(e))),ee(t.top,(e=>this.addToTop(e))),ee(t.bottom,(e=>this.addToBottom(e)))}static create(...e){return new ll(...e)}get stylesheet(){return this.m_pStylesheet}get layer(){return this.m_pLayer}get orientation(){return this.m_sOrientation}get scroll(){return this.m_pScroll}get view(){return this.m_pView}set view(e){this.m_pView!==e&&(this.m_pView=e,this.dispatcher.emitHook("OnViewChange",{}),this.update())}init(){this.m_pScroll?this.m_pScroll.init():this.ready()}ready(){this.m_bInitialized||(this.m_bInitialized=!0,pe(this.onReady,this)),this.layer&&this.layer.done()}hover(e){this.m_pElement&&this.m_pElement.selectorSafe("hover",e)}push(e){return Ue(this.m_pItems,e.id,e),e}pop(e){this.dispatcher.unhookContext(e),$e(this.m_pItems,e.id)}get(e){return Ye(this.m_pItems,e)}onItemTap(e){pe(this.onTap,e)}onItemVisibilityChange(e){pe(this.onVisibility,e)}onItemStateChange(e){pe(this.onState,e)}onItemSelectChange(e){pe(this.onSelect,e)}add(e,t="left"){const i="left"===t||"top"===t?this.m_pRegionLeftTop:this.m_pRegionRightBottom;if(e.toolbar===this)return e;if(e.toolbar)throw new Error(al);return i.append(e.type,(t=>e.onDraw(this,t))),this.push(e)}insert(e,t="left"){const i="left"===t||"top"===t?this.m_pRegionLeftTop:this.m_pRegionRightBottom;if(e.toolbar===this)return e;if(e.toolbar)throw new Error(al);return i.insert("div",(t=>e.onDraw(this,t))),this.push(e)}insertAtItem(e,t,i="before"){const s=t.toolbar===this&&t.element&&t.element.parent instanceof dr?t.element.parent:this.m_pRegionLeftTop;if(e.toolbar===this)return e;if(e.toolbar)throw new Error(al);return s.insert("div",(t=>e.onDraw(this,t)),void 0,void 0,t.element?t.element.index+("after"===i?1:0):-1),this.push(e)}addToLeft(e){return this.add(e,"left")}addToRight(e){return this.add(e,"right")}addToTop(e){return this.add(e,"top")}addToBottom(e){return this.add(e,"bottom")}delete(e){e.toolbar===this&&e.delete()}update(){this.m_pScroll&&this.m_pScroll.update(!1)}changeView(e){this.view=e}destroy(){this.m_pElement&&(this.hover(!1),pe(this.onDestroy,this),this.m_pScrollLeftUp&&(this.m_pScrollLeftUp.destroy(),this.m_pScrollLeftUp=void 0),this.m_pScrollRightDown&&(this.m_pScrollRightDown.destroy(),this.m_pScrollRightDown=void 0),this.m_pScroll&&(this.m_pScroll.destroy(),this.m_pScroll=void 0),this.m_pRegionLeftTop.destroy(),this.m_pRegionRightBottom.destroy(),this.m_pElement&&(this.m_pElement.off("mouseenter"),this.m_pElement.off("mouseleave")),this.m_pItems={},this.m_pElement=void 0,this.m_pLayer=void 0)}}ll.stylesheet=So.app;class cl extends ia{constructor(e,t=ia.configuration){super(t),this.m_pProperties=e}get toolbar(){return this.m_pToolbar}onRender(){this.m_pToolbar=new ll(this.m_pProperties,{parent:this.layer})}}class ul{constructor(e={},t="",i=!1){this.m_bVisible=!0,this.m_bDisabled=!1,this.m_bSelected=!1,this.m_bHover=!1,this.m_pStyle=e,this.m_sId=t,this.m_bTappable=i}get style(){return this.m_pStyle}get toolbar(){return this.m_pToolbar}get view(){return this.toolbar&&this.toolbar.view}get element(){return this.m_pElement}get type(){return"div"}get id(){return this.m_sId}set id(e){this.m_sId!==e&&(this.toolbar&&this.toolbar.pop(this),this.m_sId=e,this.toolbar&&this.toolbar.push(this))}get isVisible(){return this.m_bVisible}set isVisible(e){e!==this.m_bVisible&&(this.m_bVisible=e,this.element&&(this.element.removeSelectorSafe("show"),this.element.removeSelectorSafe("hide"),this.element.selectorSafe("hidden",!e),this.element.animateSelector(e?"show":"hide",(()=>this.update()),!0)),this.toolbar&&(this.onVisibilityChange(),this.toolbar.onItemVisibilityChange(this)))}get isDisabled(){return this.m_bDisabled}set isDisabled(e){e!==this.m_bDisabled&&(this.m_bDisabled=e,this.element&&(this.element.removeSelectorSafe("disable"),this.element.removeSelectorSafe("enable"),this.element.selectorSafe("disabled",e),this.element.selectorSafe("hover",!e&&this.m_bHover),this.element.animateSelector(e?"disable":"enable",(()=>this.update()),!0),e&&this.element.removeSelectorSafe("tap")),this.toolbar&&(this.onStateChange(),this.toolbar.onItemStateChange(this)))}get isSelected(){return this.m_bSelected}set isSelected(e){e!==this.m_bSelected&&(this.m_bSelected=e,this.element&&(this.element.removeSelectorSafe("select"),this.element.removeSelectorSafe("deselect"),this.element.selectorSafe("selected",e),this.element.animateSelector(e?"select":"deselect",(()=>this.update()),!0)),this.toolbar&&(this.onSelectChange(),this.toolbar.onItemSelectChange(this)))}get isTappable(){return this.m_bTappable}get tap(){return this.m_pTap}get isExcluded(){return!!(this.m_pExclude&&this.view&&ue(this.m_pExclude,(e=>e===this.toolbar.view)))||!(!this.m_pInclude||this.view&&ue(this.m_pInclude,(e=>e===this.toolbar.view)))}onMouseEnter(){this.m_bHover=!0,this.m_bTappable&&!this.isDisabled&&this.element&&this.element.addSelectorSafe("hover")}onMouseLeave(){this.m_bHover=!1,this.m_bTappable&&this.element&&this.element.removeSelectorSafe("hover")}onTap(){this.toolbar&&this.toolbar.onItemTap(this)}onTapStart(){this.m_bTappable&&!this.isDisabled&&this.isVisible&&this.element&&this.element.addSelectorSafe("tap")}onTapEnd(){this.m_bTappable&&this.element&&this.element.removeSelectorSafe("tap")}onVisibilityChange(){pe(this.isVisible?this.onShow:this.onHide,this)}onStateChange(){pe(this.isDisabled?this.onDisable:this.onEnable,this)}onSelectChange(){pe(this.isSelected?this.onSelect:this.onDeselect,this)}onViewChange(e){return!1}update(){this.m_pToolbar&&this.m_pToolbar.update()}visible(e){return this.isVisible=e,this}show(){return this.isVisible=!0,this}hide(){return this.isVisible=!1,this}disabled(e){return this.isDisabled=e,this}enable(){return this.isDisabled=!1,this}disable(){return this.isDisabled=!0,this}selected(e){return this.isSelected=e,this}select(){return this.isSelected=!0,this}deselect(){return this.isSelected=!1,this}includeInViews(...e){return this.m_pInclude=e,this.element&&(this.element.selector("excluded",this.isExcluded),this.update()),this}excludeInViews(...e){return this.m_pExclude=e,this.element&&(this.element.selector("excluded",this.isExcluded),this.update()),this}onDraw(e,t){this.m_pToolbar=e,this.m_pElement||(this.m_pElement=t,t.style([{backgroundRepeat:"no-repeat",backgroundPosition:"0px 0px",textOverflow:"ellipsis",textAlign:"center",verticalAlign:"top",cursor:"default",transition:"opacity 0.3s"},this.m_pStyle.appearance,{boxSizing:"border-box",width:"fill"===this.m_pStyle.width?"horizontal"===e.orientation?0:"auto":this.m_pStyle.width||"auto",height:"fill"===this.m_pStyle.height?"vertical"===e.orientation?0:"auto":this.m_pStyle.height||"auto",flexGrow:"fill"===("horizontal"===e.orientation?this.m_pStyle.width:this.m_pStyle.height)?1:0,whiteSpace:"nowrap",overflow:"hidden",[So.selector("hidden")+`:not(.${So.selectorHash("hide")})`]:{display:"none"},[So.selector("excluded")]:{display:"none"},[So.selector("selected")]:this.m_pStyle.selected,[So.selector("hover")]:this.m_pStyle.hover,[So.selector("tap")]:this.m_pStyle.tap,[So.selector("disabled")]:X({opacity:.25,cursor:"default !important"},this.m_pStyle.disabled),[So.selector("show")]:this.m_pStyle.animations?this.m_pStyle.animations.show:void 0,[So.selector("hide")]:this.m_pStyle.animations?this.m_pStyle.animations.hide:void 0,[So.selector("select")]:this.m_pStyle.animations?this.m_pStyle.animations.select:void 0,[So.selector("deselect")]:this.m_pStyle.animations?this.m_pStyle.animations.deselect:void 0,[So.selector("enable")]:this.m_pStyle.animations?this.m_pStyle.animations.enable:void 0,[So.selector("disable")]:this.m_pStyle.animations?this.m_pStyle.animations.disable:void 0}],e.stylesheet),t.selector("hidden",!this.m_bVisible),t.selector("disabled",this.m_bDisabled),t.selector("selected",this.m_bSelected),t.selector("excluded",this.isExcluded),e.dispatcher.hook("OnViewChange","synchronous",(()=>{t.selector("excluded",this.isExcluded),this.onViewChange(this.view)&&this.update()})),Lr.pointer(this.m_pElement,void 0,(()=>this.onMouseEnter()),(()=>this.onMouseLeave())),t.onDestroy=(e,t)=>{t&&this.destroy()},this.m_bTappable&&(this.m_pTap=Dr.on(t,(()=>{!this.isDisabled&&this.isVisible&&this.onTap()}),(()=>this.onTapStart()),(()=>this.onTapEnd()))))}delete(){this.element&&(this.element.removeSelectorSafe("show"),this.element.removeSelectorSafe("hide"),this.element.addSelectorSafe("hidden"),this.element.animateSelector("hide",(()=>this.destroy()),!0),pe(this.onDelete,this))}destroy(){this.m_pElement&&(this.m_pElement.destroy(),this.m_pElement=void 0,pe(this.onDestroy,this)),this.m_pToolbar&&(this.m_pToolbar.pop(this),this.m_pToolbar.update(),this.m_pToolbar=void 0)}}class hl extends ul{constructor(e,t="",i,s){super(e,i,N(s)||Q(s)),this.m_sLabel=t,N(s)&&(this.m_fnTapped=s)}get label(){return this.m_sLabel}set label(e){this.m_sLabel!==e&&(this.m_sLabel=e,this.m_pLabel&&(this.m_pLabel.text=e,this.update()))}onTap(){pe(this.m_fnTapped,this),super.onTap()}onDraw(e,t,i){this.m_pLabel=i||t,this.m_pLabel.text=this.m_sLabel,super.onDraw(e,t)}}class dl extends hl{constructor(e,t,i,s){super(e,t,i,s||!0)}}class pl extends hl{constructor(e,t,i,s,o){super(e,t,o,!0),this.m_pOptions=i,this.m_sPosition=s}onTap(){if(this.toolbar&&this.element){const e=N(this.m_pOptions);this.m_pMenu=this.m_pMenu||new ga(N(this.m_pOptions)?this.m_pOptions(this):this.m_pOptions,{stylesheet:this.toolbar.stylesheet,style:this.style.menu,destroyOnClose:e,onOpen:()=>{this.element&&this.element.addSelectorSafe("opened"),this.tap&&this.tap.disable()},onClosing:()=>{this.element&&this.element.removeSelectorSafe("opened")},onClose:()=>{this.element&&this.element.removeSelectorSafe("opened"),this.tap&&this.tap.enable()},onDestroy:e?()=>{this.m_pMenu=void 0}:void 0}),this.m_pMenu&&this.m_pMenu.openAtElement(this.element,this.m_sPosition||("horizontal"===this.toolbar.orientation?"bottom":"right"))}super.onTap()}onVisibilityChange(){!this.isVisible&&this.m_pMenu&&this.m_pMenu.close(),super.onVisibilityChange()}onStateChange(){this.isDisabled&&this.m_pMenu&&this.m_pMenu.close(),super.onSelectChange()}onDraw(e,t,i){super.onDraw(e,t,i),t.style({[So.selector("opened")]:this.style.opened},e.stylesheet)}destroy(){this.m_pOptions=[],this.m_pMenu&&(this.m_pMenu.destroy(),this.m_pMenu=void 0),super.destroy()}}class ml extends hl{constructor(e,t,i,s="blank",o,n){super(e,i,o,!n||(()=>n(this))),this.m_sURL=t,this.m_sTarget=s}get type(){return"a"}get URL(){return this.m_sURL}set URL(e){this.m_sURL!==e&&(this.m_sURL=e,this.element&&this.element.property("href",this.m_sURL))}get target(){return this.m_sTarget}set target(e){this.m_sTarget!==e&&(this.m_sTarget=e,this.element&&this.element.property("target",this.m_sTarget))}onStateChange(){this.element&&this.element.set("pointer-events",this.isDisabled?"none":"auto"),super.onStateChange()}onDraw(e,t,i){xr.mode(t,"disable"),t.attribute("href",this.m_sURL),t.set("pointer-events",this.isDisabled?"none":"auto"),t.on("click",(()=>this.onTap())),"blank"===this.m_sTarget&&t.attribute("target","_blank"),super.onDraw(e,t,i)}}class gl{constructor(e,t,i,s="normal",o,n="left",r="on-when-validated",a=ol("builder","Done"),l=[]){if(this.m_bValidateCloseButton=!1,!(o=o||gl.style))throw new Error("Tripetto: No styles available for the properties layer.");if(this.m_pStyle=gl.style=o,this.m_pLayer=e,this.m_bHeader=_(i),this.m_pReference=t,Xa.style=this.style.forms.form,ga.style=this.style.menu,e.createLayer((e=>{e.element.style({backgroundColor:this.style.forms.background,["right"===n?"borderLeft":"borderRight"]:`1px solid ${this.style.forms.border}`}),this.m_pSplitter=e.element.create("div",void 0,{position:"absolute",left:this.style.forms.cards.features?this.style.forms.cards.features.width-1:0,top:this.m_bHeader&&this.style.forms.header.height||0,bottom:0,width:1,backgroundColor:this.style.forms.border,opacity:0,pointerEvents:"none",[So.selector("visible")]:{opacity:1}})})),this.m_bHeader){const t=e.component(new cl({style:this.style.forms.header.style,left:this.onHeader(i||""),right:[...l,..."disabled"!==r?[this.closeButton=new dl(this.style.forms.header.buttons.close,a,void 0,(()=>this.close()))]:[]]},ta.configuration.left("right"===n?1:0).right("left"===n?1:0).height(this.style.forms.header.height).alignTop()),"floating");Dr.single(t.layer.element,(()=>this.scrollToTopOrBottom())),this.closeButton&&(e.hook("OnBeforeShowPanel","synchronous",(()=>this.closeButton.disable())),e.hook("OnClosePanel","synchronous",(()=>this.closeButton.enable())),"on-when-validated"===r&&(this.m_bValidateCloseButton=!0))}this.onLayer(s),e.hook("OnDestroy","synchronous",(()=>this.onDestroy())),this.m_pReference instanceof ni&&this.m_pReference.hook("OnItemPop","synchronous",(()=>this.close()),this)}get style(){return this.m_pStyle}get layer(){return this.m_pLayer}get cards(){return this.m_pCards}set cards(e){this.m_pCards=e}get ref(){return this.m_pReference}get title(){return this.m_pTitle}onHeader(e){return[this.m_pTitle=new hl(this.style.forms.header.title.withoutIcon,e)]}onLayer(e){this.cards=new Aa({style:Object.assign(Object.assign({},this.style.forms.cards),{spacing:this.m_bHeader&&new Li(0,this.style.forms.header.height,0,0)||void 0}),layer:this.layer,mode:e}),this.onCards(this.cards),this.cards.isFeaturesSupported||0!==this.cards.count||this.cards.add(new Xa({controls:[new tl(ol("builder","There are no properties you can manage here."),"info")]})),this.m_bValidateCloseButton&&this.cards.hook("OnValidated","framed",(e=>this.closeButton.disabled("pass"!==e.cards.validation&&"unknown"!==e.cards.validation))),this.onLayerUpdate()}onLayerUpdate(){if(this.m_pSplitter){const e=!(!this.cards||1!==this.cards.mode||!this.cards.isFeaturesSupported);this.m_pSplitter.selectorSafe("visible",e)}}onDestroy(){this.cards=void 0,this.m_pReference instanceof ni&&this.m_pReference.unhookContext(this)}close(){this.layer.close()}scrollToTopOrBottom(){this.cards&&this.cards.scrollToTopOrBottom()}}class bl{constructor(e,t,i){this.m_pCards=e,this.m_fnClose=i,this.reference=t}get features(){return this.m_pCards.features}get close(){return()=>(this.m_fnClose(),!0)}form(e){const t=new Xa(e);return this.m_pCards.isFeaturesSupported?this.features.card(t).card||t:this.m_pCards.add(t)}collection(e){const t=new Ol(e);return this.m_pCards.isFeaturesSupported?this.features.card(t).card||t:this.m_pCards.add(t)}option(e){const t=Ye(e,"form"),i=Ye(e,"collection"),s=i&&new Ol(i)||t&&new Xa(t);return this.m_pCards.isFeaturesSupported&&0!==this.features.count||this.group(ol("builder","General")),this.features.option({name:e.name,card:s,activated:Q(e.activated,e.locked||!1),visible:e.visible,disabled:e.disabled,locked:e.locked,on:e.on,onVisible:e.onVisible,onDisable:e.onDisable,onLock:e.onLock})}group(e){return this.features.static(e)}}class fl extends gl{static open(e,t,i=""){return new fl(e,t,i)}static openPanel(e,t,i,s=""){return e.createPanel((e=>{this.open(e,t,s)}),ta.configuration.width(i).animation(Br.Zoom).autoCloseChildPanels("stroke"))}constructor(e,t,i=""){super(e,t,t.getTitleOfItem()||i||ol("builder","Properties")),this.item.hook("OnRename","synchronous",(()=>{this.title&&(this.title.label=this.item.getTitleOfItem()||i||ol("builder","Properties"))}),this),this.item.hook("OnItemPop","synchronous",(()=>e.close()),this)}get item(){return this.ref}onCards(e){wt("editor",this.item,Fe(this.item,"orchestratorForEditor",new bl(e,this.item,(()=>this.close()))))}onDestroy(){Fe(this.item,"orchestratorForEditor",void 0),this.item.unhookContext(this),super.onDestroy()}}class yl extends Za{constructor(e,t){super(t.id),this.m_pCollectionCard=e,this.m_pItem=t,this.m_pItem.hook("OnRename","synchronous",(()=>{this.m_pCollectionCard.onRename(this.item),this.refresh("name","icon")}),this),this.m_pItem.hook("OnIcon","synchronous",(()=>this.refresh("icon")),this),this.m_pItem.hook("OnOpen","synchronous",(()=>this.open()),this),this.onTap((()=>this.open()))}get item(){return this.m_pItem}get icon(){return this.item.getIconOfItem()}get name(){return this.item.getNameOfItem()}set name(e){this.item.setNameOfItem(e)}open(){this.m_pCollectionCard.cards&&(this.select(),fl.openPanel(this.m_pCollectionCard.cards.layer,this.item,this.item.getWidthOfItem()||this.m_pCollectionCard.width,this.m_pCollectionCard.placeholder).hook("OnBeforeShow","framed",(e=>this.m_pItem.hook("OnClose","synchronous",(()=>e.layer.close()),this))).hook("OnClose","framed",(()=>{this.deselect(),this.m_pItem.unhook("OnClose",this),this.m_pCollectionCard.onClose(this.item)})),this.m_pCollectionCard.onOpen(this.item))}destroy(){this.m_pItem.unhookContext(this),super.destroy()}}yt([$a],yl.prototype,"icon",null),yt([$a],yl.prototype,"name",null);const vl={fontFamily:"linearicons",speak:"none",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textTransform:"none",lineHeight:1,webkitFontSmoothing:"antialiased",mozOsxFontSmoothing:"grayscale"};let Ml;function wl(e,t=So.app){return t.static("@font-face",{fontFamily:"linearicons",src:`url("${e}linearicons.woff2") format("woff2"),url("${e}linearicons.woff") format("woff"),url("${e}linearicons.ttf") format("truetype")`,fontWeight:"normal",fontStyle:"normal"}),"linearicons"}function xl(e,t,i){const s=Ml||(Ml=So.app.style(vl)),o=t&&i?"":So.app.style({"&:before":{content:`"\\${e.toString(16)}"`}});return t&&(t.addClass(s),i?t.text=String.fromCharCode(e):t.addClass(o)),`${s}${""===o?"":" "+o}`}function Sl(e,t){return J(vl,{"&:before":{content:`"\\${e.toString(16)}"`}},t)}class Il extends Xr{constructor(e,t,i,s=!1){super(t,i,s),this.m_nIcon=e}draw(e,t){t.create("span",(e=>xl(this.m_nIcon,e,!0))),super.draw(e,t)}}class kl extends wa{constructor(e,t,i,s){super(t,i,s),this.m_nIcon=e}draw(e,t){t.create("span",(e=>xl(this.m_nIcon,e,!0))),super.draw(e,t)}}class Nl extends va{constructor(e,t,i,s=!1,o=!0){super(t,i,s,o),this.m_nIcon=e}draw(e,t){t.create("span",(e=>xl(this.m_nIcon,e,!0))),super.draw(e,t)}}const _l={};function Ll(e,t){t instanceof ys||t instanceof Ds||t instanceof yl?xe((()=>t.refresh())):e.destroy()}const Cl=(e,i)=>(s,o)=>o&&s.create("span",(s=>{var n;let r;const a=()=>{const i=t.limit(o.label,32,"...")||ol("builder","Value");r!==i&&(_(r)&&(e instanceof ys||e instanceof Ds)&&e.refreshed(),s.text=r=i)};if(s.onDestroy=()=>function(e,t){t.block&&t.block.node.unhookContext(e),t.slot&&t.slot.unhookContext(e),t.pipe&&t.pipe.unhookContext(e)}(s,o),i&&i(s),o.block&&(o.block.node.hook("OnRename","framed",(()=>a()),s),o.block.node.hook("OnItemPop","synchronous",(()=>Ll(s,e)),s),e instanceof ys||e instanceof Ds||e instanceof yl)){const t=o.block.node.id;_l[t]||(_l[t]={},o.block.node.hook("OnBlockAssign","framed",(()=>{ee(_l[t],(e=>{e.isPopped||e.refresh()}))})),o.block.node.hook("OnItemPop","synchronous",(()=>{delete _l[t]})),(null===(n=o.slot)||void 0===n?void 0:n.slots)&&o.slot.slots.hook("OnItemPush","framed",(()=>{ee(_l[t],(e=>{e.isPopped||e.refresh()}))}))),_l[t][e.hash]||(e.hook("OnItemPop","synchronous",(()=>{_l[t]&&delete _l[t][e.hash]})),_l[t][e.hash]=e)}o.slot&&(o.slot.hook("OnSlotRename","framed",(()=>a()),s),o.slot.hook("OnItemPop","synchronous",(()=>Ll(s,e)),s),o.slot.hook("OnSlotProperty","framed",(e=>{"alias"===e.property&&a()}),s)),o.pipe&&(o.pipe.hook("OnSlotProperty","framed",(e=>{"pipeable"===e.property&&a()}),s),o.pipe.hook("OnItemPop","synchronous",(()=>Ll(s,e)),s)),a()}));function Dl(e,t,i,s,o=Xi.None){e.markdown(t,{features:o,mentions:Cl(i,s)})}class Al extends Ka{constructor(e="singleline",t="",i=2,s){super(t,"",{style:s,styleName:"text",styleDefault:Al.style}),this.m_nFixedLines=0,this.m_nHeight=0,this.m_nMaxLength=0,this.m_bSanitize=!0,this.m_bTrim=!0,this.m_sTransformation="none",this.m_sName="",this.m_sPlaceholder="",this.m_sInputMode="text",this.m_sAutoSelect="auto-focus",this.m_nAutoFill=0,this.m_pChange=new tt((()=>{if(this.m_pText){const e=this.m_pText.property("value");_(e)&&this.input(e)}})),this.m_sType=e,this.m_nLines=i}static createSuggestionsId(){return Bt("TextSuggestions-"+this.m_nSuggestions++)}get isMultiline(){return"multiline"===this.type||"multiline-wo-crlf"===this.type}get static(){return this.m_pStatic}get type(){return this.m_sType}get value(){return this.output()}set value(e){this.input(e)}get suggestion(){const e=this.value&&ue(this.m_pSuggestions,(e=>(_(e)?e:e.name)===this.value))||void 0;return _(e)?{name:e}:e}update(){this.isFormReady&&(this.hasFocus||ro((()=>{if(this.m_pText){const e=this.m_pText.HTMLElementOfType();e&&("email"===this.type&&(e.value=""),e.value!==this.value&&(e.value=this.value))}}),!this.m_pText||!this.m_pText.isInDOM,!0),this.m_nFixedLines||this.autoSize())}cleanValue(e,t){if("multiline-wo-crlf"===this.type&&-1!==e.indexOf("\n")){const i=e.replace(/(\r\n|[\r\n])/g," ");return t&&i!==e&&t(i),i}return e}autoSize(e=!1,t=1){if(this.isMultiline&&this.m_pText&&!this.m_nFixedLines)if(e){const e=this.m_pText.scrollHeight,i=G(this.m_pText.rectangleHeight),s=G(this.m_pText.get("border-top-width",!0))+G(this.m_pText.get("border-bottom-width",!0));this.m_nHeight||(this.m_nHeight=i),e>i?ro((()=>{this.m_pText&&(this.m_pText.height=e+s,this.resize())}),!1,!0):i>this.m_nHeight?ro((()=>{this.m_pText&&(this.m_pText.height=t>this.m_nHeight?this.m_nHeight:i-1),this.autoSize(!0,t+1)}),!1,!0):this.resize()}else this.m_sAutoSize!==this.value&&(this.m_sAutoSize=this.value,no((()=>this.autoSize(!0))))}input(e){return e=this.cleanValue(t.limit(e,this.m_nMaxLength)),this.m_sTransformation&&"none"!==this.m_sTransformation&&(e="uppercase"===this.m_sTransformation?t.uppercase(e):"lowercase"===this.m_sTransformation?t.lowercase(e):t.capitalize(e,"capitalize-words"===this.m_sTransformation?"each-word":"capitalize-sentences"===this.m_sTransformation?"each-sentence":"first-character")),"multiline"===this.m_sType&&this.hasFocus||(this.m_bSanitize?e=t.sanitize(e):this.m_bTrim&&(e=t.trimMultiple(e))),super.input(e)}onDraw(e){const t=e.create("label",(t=>{this.hasLabel&&(this.m_pStatic=t.create("p",void 0,[{margin:0,padding:0},this.style?this.style.label:void 0,this.isSingleControlInForm&&this.style&&this.style.fused?this.style.fused.label:void 0,{width:"100%",userSelect:"none",cursor:"default"}],this.stylesheet));const i=X({textTransform:"none"},this.style&&this.style.placeholder);this.m_pText=t.create(this.isMultiline?"textarea":"input",(i=>{let s;this.isFused||(i.selector("locked",this.isLocked),i.selector("required",this.isRequired),i.selector("failed",this.isFailed),i.selector("passed",this.isPassed),i.selector("awaiting",this.isAwaiting)),this.isMultiline&&i.style({wordWrap:this.m_nFixedLines?"normal":"break-word",whiteSpace:this.m_nFixedLines?"pre":"pre-line",overflowX:"hidden",overflowY:this.m_nFixedLines?"auto":"hidden"},this.stylesheet),this.isMultiline?(i.attribute("rows",W(this.m_nFixedLines||this.m_nLines)),i.attribute("data-gramm","false"),i.text=this.value):(i.attribute("type","password"===this.type||"email"===this.type?this.type:"text"),i.attribute("value",this.value)),i.attribute("autocomplete",C(this.m_sName)?"on":"off"),i.attribute("inputmode",this.m_sInputMode),i.property("spellcheck",!1),i.property("disabled",this.isDisabled),i.property("readOnly",this.isLocked),this.m_nMaxLength>0&&i.attribute("maxlength",W(this.m_nMaxLength)),C(this.m_sName)&&i.attribute("name",this.m_sName),C(this.m_sPlaceholder)&&i.attribute("placeholder",this.m_sPlaceholder),"none"!==this.m_sTransformation&&i.set("text-transform","capitalize-words"===this.m_sTransformation?"capitalize":"lowercase"===this.m_sTransformation?"lowercase":"uppercase"===this.m_sTransformation?"uppercase":"none"),i.on(["change","input"],(()=>{this.cleanValue(i.property("value")||"",(e=>i.property("value",e))),this.m_pChange.invoke()})),xr.mode(i,"input"),Lr.pointer(this.isFused?e:i,(e=>this.hover(e.isHovered))),this.m_pFocus=Ar.on(this.isFused?e:t,i,"focus-on-tap","auto-blur",(s=>{this.updateFocus(s.hasFocus,!0,this.isFused?e:t,i),i.property("spellcheck",s.hasFocus)}),this.tab,(()=>this.isInteractable));let o=0;const n=(e,t,i,n)=>{if(e===o){if(s=void 0,o++,n){const e=this.value;this.value=t.value=e.substr(0,i)+n+e.substr(i),i+=L(n)}t.focus(),t.setSelectionRange(i,i)}};this.keyboard(i,void 0,"multiline-wo-crlf"===this.type,(e=>{if(e.isKeyDown&&s){const t=s(e.value);if(s=void 0,"capture"!==t&&o++,"continue"!==t)return!0}if(this.actionKey&&this.actionProc&&e.isKeyUp&&e.value===this.actionKey){const e=i.HTMLElementOfType();if(e){const t=++o,r=e.selectionStart||0;s=this.actionProc((i=>n(t,e,r,i)),i)||void 0}}return!1}))}),[{border:"none",cursor:"text"},this.style?this.style.appearance:void 0,this.isFused&&this.style&&this.style.fused?this.style.fused.appearance:void 0,{display:"block",width:!this.isFused&&this.m_nWidth?this.m_nWidth:"100%",boxSizing:"border-box",resize:"none",appearance:"none",userSelect:"text",textAlign:this.m_sAlign||"left","&::selection":this.style?this.style.selection:void 0,"&::-moz-selection":this.style?this.style.selection:void 0,"&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"},"&:disabled":{pointerEvents:"none",color:this.style&&this.style.appearance?this.style.appearance.color:void 0},"&:read-only":this.style&&this.style.appearance&&this.style.appearance.color?{color:this.style.appearance.color}:void 0,"&:focus":{outline:"0"},"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::input-placeholder":i,[So.selector("awaiting")]:!this.isFused&&this.style?this.style.awaiting:void 0,[So.selector("failed")]:!this.isFused&&this.style?this.style.failed:void 0,[So.selector("passed")]:!this.isFused&&this.style?this.style.passed:void 0,[So.selector("locked")]:!this.isFused&&this.style?this.style.locked:void 0,[So.selector("hover")]:!this.isFused&&this.style?this.style.hover:void 0,[So.selector("focus")]:!this.isFused&&this.style?this.style.focus:void 0,[So.selector("required")]:!this.isFused&&this.style?this.style.required:void 0}],this.stylesheet)}),{[So.selector("disabled")]:this.style?this.style.disabled:void 0},this.stylesheet);return this.isFused&&(this.style&&this.style.fused&&e.style({[So.selector("failed")]:this.style.fused.failed,[So.selector("passed")]:this.style.fused.passed,[So.selector("awaiting")]:this.style.fused.awaiting,[So.selector("locked")]:this.style.fused.locked,[So.selector("hover")]:this.style.fused.hover,[So.selector("focus")]:this.style.fused.focus,[So.selector("required")]:this.style.fused.required},this.stylesheet),e.selector("locked",this.isLocked),e.selector("required",this.isRequired),e.selector("failed",this.isFailed),e.selector("passed",this.isPassed),e.selector("awaiting",this.isAwaiting)),this.suggestions(this.m_pSuggestions),t}onUpdate(){const e=this.isFused?this.parent:this.m_pText;e&&(e.selector("locked",this.isLocked),e.selector("required",this.isRequired),e.selector("hover",this.isHovered),e.selector("focus",this.hasFocus),e.selector("failed",this.isFailed),e.selector("passed",this.isPassed),e.selector("awaiting",this.isAwaiting)),this.m_pText&&(this.m_pText.property("disabled",this.isDisabled),this.m_pText.property("readOnly",this.isLocked)),super.onUpdate()}onFocus(e){("focus"===this.m_sAutoSelect||e&&"auto-focus"===this.m_sAutoSelect)&&!this.isMultiline&&this.hasFocus&&this.m_pText&&ao((()=>this.select())),super.onFocus(e)}onFocusOptions(){this.m_pFocus&&this.m_pFocus.update(),super.onFocusOptions()}onBlur(){if(this.m_pText){const e=this.m_pText.property("value");_(e)&&this.input(e)!==e&&this.update()}super.onBlur()}onEnter(e){return!(!this.m_fnEnter||!this.m_fnEnter(this))||super.onEnter(e)}onEscape(e){return!(!this.m_fnEscape||!this.m_fnEscape(this))||super.onEscape(e)}onData(){this.update(),this.m_fnChange&&this.m_fnChange(this),super.onData()}onMeasure(){if(this.isMultiline&&C(this.value)&&this.m_pText&&!this.m_nFixedLines){const e=this.m_pText.scrollHeight,t=G(this.m_pText.rectangleHeight),i=G(this.m_pText.get("border-top-width",!0))+G(this.m_pText.get("border-bottom-width",!0));if(this.m_nHeight||(this.m_nHeight=t),e!==t)return ro((()=>{this.m_pText&&(this.m_pText.height=e+i)}),!this.m_pText.isInDOM,!0),e+i-t}return 0}onMode(){this.isMultiline&&this.m_nHeight>0&&ro((()=>{this.m_pText&&(this.m_pText.height=this.m_nHeight)}),!this.m_pText||!this.m_pText.isInDOM,!0),super.onMode()}focus(){return!!this.m_pFocus&&this.m_pFocus.focus()}blur(){this.m_pFocus&&this.m_pFocus.blur()}width(t){return this.m_nWidth=e.max(t,0),this}fixedLines(t){return t=e.max(t,0),this.m_nFixedLines!==t&&(this.m_nFixedLines=t,this.isMultiline&&ro((()=>{this.m_pText&&(this.m_pText.attribute("rows",W(this.m_nFixedLines||this.m_nLines)),this.m_pText.height=this.m_nFixedLines?"auto":0,this.resize(),this.update())}),!this.m_pText||!this.m_pText.isInDOM,!0)),this}align(e){return this.m_sAlign=e,this}sanitize(e=!0){return this.m_bSanitize!==e&&(this.m_bSanitize=e,this.m_bSanitize&&this.input(this.value)),this}trim(e=!0){return this.m_bTrim!==e&&(this.m_bTrim=e,this.m_bTrim&&this.input(this.value)),this}maxLength(t){return t=e.max(t,0),this.m_nMaxLength!==t&&(this.m_nMaxLength=t,ro((()=>{if(this.m_pText){const e=this.m_nMaxLength&&W(this.m_nMaxLength)||"";e?this.m_pText.property("maxLength",e):this.m_pText.HTMLElement&&this.m_pText.HTMLElement.removeAttribute("maxLength")}}),!this.m_pText||!this.m_pText.isInDOM,!0),t>0&&this.input(this.value)),this}name(e){return this.m_sPlaceholder!==e&&(this.m_sName=e,ro((()=>{this.m_pText&&(this.m_pText.property("name",this.m_sName),this.m_pText.property("autocomplete",C(this.m_sName)?"on":"off"))}),!this.m_pText||!this.m_pText.isInDOM,!0)),this}placeholder(e){return this.m_sPlaceholder!==e&&(this.m_sPlaceholder=e,ro((()=>{this.m_pText&&this.m_pText.property("placeholder",this.m_sPlaceholder)}),!this.m_pText||!this.m_pText.isInDOM,!0)),this}inputMode(e){return this.m_sInputMode!==e&&(this.m_sInputMode=e,ro((()=>{this.m_pText&&this.m_pText.property("inputMode",this.m_sInputMode)}),!this.m_pText||!this.m_pText.isInDOM,!0)),this}transformation(e){return this.m_sTransformation!==e&&(this.m_sTransformation=e,this.input(this.value),ro((()=>{if(this.m_pText){let e="none";switch(this.m_sTransformation){case"capitalize-words":e="capitalize";break;case"lowercase":e="lowercase";break;case"uppercase":e="uppercase"}this.m_pText.set("text-transform",e)}}),!this.m_pText||!this.m_pText.isInDOM)),this}autoSelect(e="focus"){return this.m_sAutoSelect=e,this}autoValidate(e=((e,t)=>e.isRequired&&e.isVisible&&!e.isDisabled?C(e.value)?"pass":"initial"===t||"visible"===t||"focus"===t||e.hasFocus?"invalid":"fail":"unknown")){return super.autoValidate(e)}suggestions(e){if(this.m_pSuggestions=e,this.m_pText&&this.m_pText.parent instanceof dr&&(this.m_pSuggestions&&this.m_pSuggestions.length>0||this.m_pSuggestionsElement)){const e=Al.createSuggestionsId();this.m_pSuggestionsElement&&this.m_pSuggestionsElement.destroy(),this.m_pSuggestionsElement=this.m_pText.parent.create("datalist",(t=>{t.attribute("id",e),ee(this.m_pSuggestions,(e=>{t.create("option",(t=>{const i=_(e)?e:e.name;i&&t.attribute("value",i)}))}))})),this.m_pText.attribute("list",e)}return this}enter(e){return this.m_fnEnter=e,this}escape(e){return this.m_fnEscape=e,this}on(e){return this.m_fnChange=e,this}select(){if(this.m_pText){const e=this.m_pText.HTMLElementOfType();e&&e.select()}else this.autoFocus(!0);return this}action(e,t){return this.actionKey=e,this.actionProc=t,this}copyToClipboard(){const e=window;if(e.clipboardData)return void e.clipboardData.setData("Text",this.value);const t=document.createElement("textarea");t.setAttribute("style","width: 1px; border: 0; opacity: 0; pointer-events: none;"),document.body.appendChild(t),t.value=this.value,t.select(),document.execCommand("copy"),document.body.removeChild(t)}destroy(){this.m_nAutoFill=Ee(this.m_nAutoFill),super.destroy()}}Al.m_nSuggestions=0;class jl extends el{constructor(e="",t){super({label:e,style:t,styleName:"static",styleDefault:jl.style})}get static(){return this.element}onDraw(e){return e.create("p",(t=>{const i=So.selectorHash("Static");t.addClass(i),e.style({[`p.${i}.${So.selectorHash("visible")} + p.${i}.${So.selectorHash("visible")}`]:{paddingTop:0}},this.stylesheet)}),[{margin:0,padding:0},this.style?this.style.appearance:void 0,this.isFused&&this.style?this.style.fused:void 0,{width:"100%",boxSizing:"border-box",userSelect:"none",cursor:"default",[So.selector("disabled")]:this.style?this.style.disabled:void 0}],this.stylesheet)}}class Tl extends el{constructor(e,t="normal",i){super({label:e,style:i,styleName:"button",styleDefault:Tl.style}),this.m_sType="normal",this.m_pWidth="auto",this.m_sType=t}get static(){return this.element}get buttonType(){return this.m_sType}set buttonType(e){this.type(e)}onTap(){this.isInteractable&&this.m_fnTap&&this.m_fnTap(this)}onDraw(e){const t=this.m_pButton=this.isFused?e:e.create(this.m_sURL?"a":"button");return t.style([{margin:0,textOverflow:"ellipsis"},this.style?this.style.appearance:void 0,this.isFused&&this.style?this.style.fused:void 0,{width:this.isFused||"full"===this.m_pWidth?"100%":this.m_pWidth,maxWidth:"100%",boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",appearance:"none",userSelect:"none",textDecoration:"none","&:hover":{textDecoration:"none"},"&:disabled":{pointerEvents:"none"},"&:focus":{outline:"0",boxshadow:"none"},"&::-moz-focus-inner":{border:"none"},[So.selector("hover")]:this.style?this.style.hover:void 0,[So.selector("focus")]:this.style?this.style.focus:void 0,[So.selector("tap")]:this.style?this.style.tap:void 0,[So.selector("normal")]:this.style&&this.style.normal?J(this.style.normal.appearance,{[So.selector("hover")]:this.style.normal.hover,[So.selector("focus")]:this.style.normal.focus,[So.selector("tap")]:this.style.normal.tap}):void 0,[So.selector("accept")]:this.style&&this.style.accept?J(this.style.accept.appearance,{[So.selector("hover")]:this.style.accept.hover,[So.selector("focus")]:this.style.accept.focus,[So.selector("tap")]:this.style.accept.tap}):void 0,[So.selector("warning")]:this.style&&this.style.warning?J(this.style.warning.appearance,{[So.selector("hover")]:this.style.warning.hover,[So.selector("focus")]:this.style.warning.focus,[So.selector("tap")]:this.style.warning.tap}):void 0,[So.selector("cancel")]:this.style&&this.style.cancel?J(this.style.cancel.appearance,{[So.selector("hover")]:this.style.cancel.hover,[So.selector("focus")]:this.style.cancel.focus,[So.selector("tap")]:this.style.cancel.tap}):void 0,[So.selector("disabled")]:this.style?this.style.disabled:void 0}],this.stylesheet),t.addSelector(this.m_sType),t.property("disabled",this.isDisabled),!this.isFused&&this.m_sURL&&(t.attribute("href",this.m_sURL),t.attribute("target","blank"===this.m_sTarget?"_blank":"_self"),t.on("click",(()=>{!this.isFused&&this.m_sURL&&this.onTap()}))),xr.mode(t,!this.isFused&&this.m_sURL?"disable":"exclusive"),Lr.on(t,(e=>this.hover(e.isHovered))),Dr.on(t,(()=>this.onTap()),(()=>t.addSelectorSafe("tap")),(()=>t.removeSelectorSafe("tap"))),this.m_pFocus=Ar.on(t,t,"no-auto-focus","auto-blur",(e=>this.updateFocus(e.hasFocus,!0,t,t)),this.tab,(()=>this.isInteractable)),this.keyboard(t),t}onUpdate(){this.element&&(this.element.property("disabled",this.isDisabled),this.element.selector("focus",this.hasFocus),this.element.selector("hover",this.isHovered)),super.onUpdate()}onEnter(){return this.onTap(),!0}onFocusOptions(){this.m_pFocus&&this.m_pFocus.update(),super.onFocusOptions()}focus(){return!!this.m_pFocus&&this.m_pFocus.focus()}blur(){this.m_pFocus&&this.m_pFocus.blur()}type(e){return e!==this.m_sType&&(this.element&&(this.element.removeSelectorSafe(this.m_sType),this.element.addSelectorSafe(e)),this.m_sType=e),this}width(t){return this.m_pWidth=A(t)?e.max(t,0):t,this}on(e){return this.m_fnTap=e,this}url(e,t="blank"){return this.m_sURL===e&&this.m_sTarget===t||(this.m_sURL=e,this.m_sTarget=t,this.m_pButton&&!this.isFused&&(this.m_sURL?(this.m_pButton.attribute("href",this.m_sURL),this.m_pButton.attribute("target","blank"===this.m_sTarget?"_blank":"_self")):(this.m_pButton.destroyAttribute("href"),this.m_pButton.destroyAttribute("target")),xr.mode(this.m_pButton,this.m_sURL?"disable":"exclusive"))),this}onClick(e){return this.url().on(e)}}class zl extends gl{static open(e,t,i,s){return new zl(e,t,i,s)}static openPanel(e,t,i,s){return e.createPanel((e=>{this.open(e,t,i,s)}),ta.configuration.width(400).animation(Br.Zoom).autoCloseChildPanels("stroke"))}constructor(e,t,i,s){super(e,{collection:t,aliases:i,scores:s},ol("builder","Import"))}get collection(){return this.ref.collection}get supportsAliases(){return this.ref.aliases}get supportsScores(){return this.ref.scores}onCards(i){const s=ol("builder","Import"),o=new Tl(s,"normal").on((()=>a())).disable(),n=new Al("multiline").on((()=>{const e=r();o.label(0===e.length?s:sl("builder","Import %1 item","Import %1 items",e.length)),o.disabled(0===e.length)})),r=()=>ce(ie(t.replace(n.value,"\r","\n").split("\n"),(i=>{const s=t.sanitize(i),o=this.supportsAliases&&s.lastIndexOf("<")||0,n=this.supportsAliases?">"===s.charAt(s.length-1)?s.length-1:s.lastIndexOf("> [")>0?s.lastIndexOf("> ["):s.lastIndexOf(">["):-1,r=o>0&&n>0&&o<n&&t.sanitize(s.substring(o+1,n))||void 0,a=this.supportsScores&&s.lastIndexOf("[")||0,l=this.supportsScores?"]"===s.charAt(s.length-1)?s.length-1:s.lastIndexOf("] <")>0?s.lastIndexOf("] <"):s.lastIndexOf("]<"):-1,c=a>0&&l>0&&a<l?$(t.sanitize(s.substring(a+1,l))):void 0;return{name:t.sanitize(r||A(c)?s.substring(0,e.min(r?o:s.length,A(c)?a:s.length)):s),alias:r,score:c}})),(e=>!!e.name)),a=()=>{const e=r();o.disable(),ee(e,(e=>{e.alias&&this.collection.each((t=>t.getAliasOfItem()===e.alias&&(t.setNameOfItem(e.name),A(e.score)&&t.setScoreOfItem(e.score),!0)))||this.collection.each((t=>t.getNameOfItem()===e.name&&(e.alias&&t.setAliasOfItem(e.alias),A(e.score)&&t.setScoreOfItem(e.score),!0)))||this.collection.append((t=>{t.setNameOfItem(e.name),e.alias&&t.setAliasOfItem(e.alias),A(e.score)&&t.setScoreOfItem(e.score)}))})),this.close()};i.add(new Xa({controls:[new jl(ol("builder","Specify the items you wish to import in the input field below, placing each item on a separate row.")+(this.supportsAliases?"\n\n"+ol("builder","To include the identifier of an item add **<***identifier***>** at the end of each row."):"")+(this.supportsScores?"\n\n"+ol("builder","To include the score of an item add **[***score***]** at the end of each row."):"")).markdown()]})),i.add(new Xa({controls:[o,n.autoFocus()]}))}}class El extends gl{static filter(e){return ce(e.all,(e=>!!e.getNameOfItem()))}static count(e){return this.filter(e).length}static open(e,t){return new El(e,t)}static openPanel(e,t){return e.createPanel((e=>{this.open(e,t)}),ta.configuration.width(400).animation(Br.Zoom).autoCloseChildPanels("stroke"))}constructor(e,t){super(e,El.filter(t),sl("builder","Export (%1 item)","Export (%1 items)",El.count(t)))}get items(){return this.ref}onCards(e){const i=ol("builder","Copy to clipboard"),s=new Al("multiline",t.iterateToString(this.items,"\n",(e=>e.getNameOfItem()+(e.getAliasOfItem()&&" <"+e.getAliasOfItem()+">"||"")+(A(e.getScoreOfItem())&&" ["+e.getScoreOfItem()+"]"||"")))).readonly();e.add(new Xa({controls:[new Tl(i).width(200).onClick((e=>{e.type("accept"),e.label(ol("builder"," Copied!")),s.copyToClipboard(),setTimeout((()=>{e.type("normal"),e.label(i)}),1e3)}))]})),e.add(new Xa({controls:[s]}))}}class Ol extends La{constructor(e){super(),this.m_bIsImporting=!1,this.m_pProperties=e,this.m_sBanner=e.banner||"",this.m_bModifier=!!(this.m_pProperties.indicator||this.m_pProperties.showAliases||this.m_pProperties.showScores),this.collection.hook("OnDimensionChange","framed",(()=>this.onCollectionResize()),this),this.collection.hook("OnItemPush","asynchronous",(e=>this.onCollectionPush(e.item)),this),this.collection.hook("OnItemChange","synchronous",(e=>this.onCollectionChange(e)),this),this.collection.hook("OnItemPop","synchronous",(e=>this.onCollectionPop(e.item)),this)}get collection(){return this.m_pProperties.collection}get title(){return`${this.m_pProperties.title} (${il.locale.number(this.collection.count)})`}get allowCleanup(){return!!C(this.m_pProperties.allowCleanup)||Q(this.m_pProperties.allowCleanup,!0)}get unnamedCount(){return ce(this.collection.all,(e=>!e.getNameOfItem())).length}get namedCount(){return ce(this.collection.all,(e=>!!e.getNameOfItem())).length}get duplicateCount(){const e={},t={};return this.collection.each((i=>{const s=i.getNameOfItem(),o=i.getAliasOfItem();let n=!1;s&&(A(e[s])||(e[s]=0),e[s]>0&&(n=!0),e[s]++),!n&&o&&(A(t[o])||(t[o]=0),t[o]++)})),(se(e,((e,t)=>t>1?e+t-1:e),0)||0)+(se(t,((e,t)=>t>1?e+t-1:e),0)||0)}get isManualSortable(){return!this.m_pProperties.sorting||"manual"===this.m_pProperties.sorting}get isAutoSortable(){return this.isManualSortable&&Q(this.m_pProperties.allowAutoSorting,!0)}get icon(){if(this.m_pList){const e=this.m_pList.column("icon");if(e)return e.properties.default}return C(this.m_pProperties.icon)?this.m_pProperties.icon:""}set icon(e){if(this.m_pList){const t=this.m_pList.column("icon");t&&t.properties.default!==e&&(t.properties.default=e,t.refresh())}}get placeholder(){return this.m_pProperties.placeholder||""}get width(){return this.m_pProperties.width||gl.style.forms.width.normal}get banner(){return this.m_sBanner}set banner(e){e!==this.m_sBanner&&(this.m_sBanner=e,this.m_pBanner&&(this.m_pBanner.text=e,ke((()=>{this.resize()}))))}onCollectionResize(){this.m_pTitle&&(this.m_pTitle.label=this.title),this.collection.block&&this.collection.block.rerender(),this.m_pProperties.onResize&&this.m_pProperties.onResize(this.collection)}onCollectionPush(e){this.m_bIsImporting||(this.m_pList&&this.m_pList.add(new yl(this,e)),this.m_pProperties.onAdd&&this.m_pProperties.onAdd(e))}onCollectionChange(e){-193&e.reason&&this.m_pProperties.onReposition&&this.m_pProperties.onReposition(e.item)}onCollectionPop(e){if(this.m_pList){const t=this.m_pList.rowWithIdentifier(e.id);t&&t.delete()}this.m_pProperties.onDelete&&this.m_pProperties.onDelete(e)}onDraw(e){this.m_sBanner&&(this.m_pBanner=e.create("h2",(e=>{e.text=this.m_sBanner}),[{display:"block",margin:0,padding:0,cursor:"default"},gl.style.forms.form.title],this.stylesheet)),e.create("div",(e=>{e.create("div",(e=>{ll.create({stylesheet:this.stylesheet,style:gl.style.forms.collection.header.style,parent:e,left:[this.m_pTitle=new hl(gl.style.forms.collection.header.title,this.title)],right:[...this.m_pProperties.allowImport?[new dl(gl.style.forms.collection.header.import,void 0,void 0,(()=>this.import())),new hl(gl.style.forms.collection.header.splitter)]:[],new pl(gl.style.forms.collection.header.menu,void 0,(()=>{const e=[];this.m_pProperties.menu?e.push(...N(this.m_pProperties.menu)?this.m_pProperties.menu():this.m_pProperties.menu):e.push(new Il(59702,ol("builder","Add"),(()=>this.collection.append())));const t=this.unnamedCount,i=this.m_pProperties.allowExport&&this.namedCount||0,s=this.m_pProperties.allowDedupe&&this.duplicateCount||0;return[...e,...this.isAutoSortable||this.m_pProperties.allowImport||this.m_pProperties.allowExport?[new ya,...this.isAutoSortable?[new Nl(59833,ol("builder","Sort"),[new Il(59829,ol("builder","Ascending"),(()=>this.sort("ascending"))),new Il(59830,ol("builder","Descending"),(()=>this.sort("descending")))],this.collection.count<2)]:[],...this.m_pProperties.allowImport?[new Il(59052,ol("builder","Import"),(()=>this.import()))]:[],...this.m_pProperties.allowExport?[new Il(59053,ol("builder","Export")+(i>0&&` (${il.locale.number(i)})`||""),(()=>this.export()),!i)]:[]]:[],new ya,...this.m_pProperties.allowDedupe?[new Il(59781,ol("builder","Delete duplicates")+(s>0&&` (${il.locale.number(s)})`||""),(()=>this.deduplicate()),!s)]:[],...this.allowCleanup?[new Il(59011,C(this.m_pProperties.allowCleanup)?this.m_pProperties.allowCleanup:ol("builder","Delete unnamed")+(t>0&&` (${il.locale.number(t)})`||""),(()=>this.deleteUnnamed()),!this.unnamedCount)]:[],new Il(59701,ol("builder","Delete all"),(()=>this.deleteAll()),0===this.collection.count)]}),"right")]})}));const t=!this.m_pProperties.allowVariables&&!this.m_pProperties.markdown&&this.m_pProperties.editable;e.create("div",(e=>{this.m_pList=new Ga({stylesheet:this.stylesheet,style:gl.style.forms.collection.list,parent:e,columns:[{property:"icon",type:"icon",alignment:"right",width:36,size:20,visible:!!this.m_pProperties.icon,default:_(this.m_pProperties.icon)&&this.m_pProperties.icon||void 0,colorize:(e,t)=>!C(t.name)&&gl.style.forms.collection.unnamedIcon||void 0},{property:"name",type:"string",width:"100%",sortable:!0,resortOnChange:!this.isManualSortable,default:this.m_pProperties.placeholder,editable:t?"auto":"no",decorator:(e,t)=>t.selectorSafe("unnamed",!C(e)),modifier:this.m_bModifier&&((e,t,i)=>t.name&&t.name+(t.isEditing(i)?"":(this.m_pProperties.indicator&&this.m_pProperties.indicator(t.item)?`#${t.hash}0`:"")+((N(this.m_pProperties.showAliases)?this.m_pProperties.showAliases(t.item):this.m_pProperties.showAliases&&t.item.getAliasOfItem())?`#${t.hash}1`:"")+((N(this.m_pProperties.showScores)?this.m_pProperties.showScores(t.item):this.m_pProperties.showScores&&A(t.item.getScoreOfItem()))?`#${t.hash}2`:""))||"")||void 0,markdown:(this.m_pProperties.allowVariables||this.m_pProperties.markdown||this.m_bModifier)&&((e,t)=>({parser:new es(e,{features:this.m_pProperties.markdown||Xi.None,mentions:this.m_pProperties.allowVariables&&this.collection.block&&gs(this.collection.block)||void 0,references:(this.m_pProperties.indicator||this.m_pProperties.showAliases||this.m_pProperties.showScores)&&{numberOfChars:65,parser:e=>e.substr(0,64)===t.hash&&{shift:65,text:"2"===e.charAt(64)?"score":"1"===e.charAt(64)?"alias":"indicator"}||void 0}||void 0}),features:this.m_pProperties.allowFormatting?Xi.Formatting|Xi.InlineCode:Xi.None,mentions:this.m_pProperties.allowVariables&&Cl(t,(e=>e.addSelector("variable")))||void 0,references:(this.m_pProperties.indicator||this.m_pProperties.showAliases||this.m_pProperties.showScores)&&((e,i,s)=>{const o="indicator"===s?this.m_pProperties.indicator&&this.m_pProperties.indicator(t.item):"score"===s?N(this.m_pProperties.showScores)?this.m_pProperties.showScores(t.item):this.m_pProperties.showScores&&t.item.getScoreOfItem():N(this.m_pProperties.showAliases)?this.m_pProperties.showAliases(t.item):this.m_pProperties.showAliases&&t.item.getAliasOfItem()||void 0;return(o||A(o))&&e.create("span",(e=>{e.text=A(o)?il.locale.number(o,"auto"):o,e.addSelector(s)}))||void 0})||void 0}))||void 0},{property:"menu",type:"button",alignment:"center",width:54,size:20,default:gl.style.forms.collection.assets.menu,menu:e=>[...t?[new Il(59808,ol("builder","Rename"),(()=>e.editorForColumn("name")))]:[],new Il(58893,ol("builder","Properties"),(()=>e.open())),...e.item.getMenuOfItem(),...this.isManualSortable?[new Nl(59709,ol("builder","Move"),[new Il(59713,ol("builder","Up"),(()=>e.moveUpOrDown(!0)),e.isFirstVisible),new Il(59714,ol("builder","Down"),(()=>e.moveUpOrDown(!1)),e.isLastVisible)],e.isFirstVisible&&e.isLastVisible)]:[],new ya,new Il(59701,ol("builder","Delete"),(()=>e.item.pop()))],menuAlways:!0}],onReady:()=>this.initialized(),onResize:()=>this.resize(),onIndex:e=>{e.item.index=e.index},scrollable:"no",movable:this.isManualSortable?"strict":"no",sorting:this.isManualSortable?void 0:"name",sortingDirection:"descending"===this.m_pProperties.sorting?"descending":"ascending",emptyStateMessage:k(this.m_pProperties.emptyMessage)?Object.assign(Object.assign({},this.m_pProperties.emptyMessage),{markdown:!0}):this.m_pProperties.emptyMessage&&{message:this.m_pProperties.emptyMessage,markdown:!0}}),this.collection.each((e=>{this.m_pList&&this.m_pList.add(new yl(this,e))}))}),{position:"relative"},this.stylesheet),e.create("div",(e=>{ll.create({stylesheet:this.stylesheet,style:gl.style.forms.collection.footer.style,parent:e,left:[this.m_pProperties.menu?new pl(gl.style.forms.collection.footer.add,void 0,this.m_pProperties.menu,"right"):new dl(gl.style.forms.collection.footer.add,void 0,void 0,(()=>{const e=this.collection.append();this.m_pProperties.autoOpen&&e.open()}))]})}))}),gl.style.forms.collection.appearance,this.stylesheet)}onResize(){this.m_pList&&this.m_pList.resize(),super.onResize()}onDestroy(){this.collection.unhookContext(this),super.onDestroy()}onInit(){return this.m_pList?(this.m_pList.init(),!1):super.onInit()}onRename(e){this.m_pProperties.onRename&&this.m_pProperties.onRename(e)}onOpen(e){this.m_pProperties.onOpen&&this.m_pProperties.onOpen(e)}onClose(e){this.m_pProperties.onClose&&this.m_pProperties.onClose(e)}measure(){var e;const t=this.m_pList?this.m_pList.dimensions.height:0;return super.measure(gl.style.forms.collection.header.height+t+gl.style.forms.collection.footer.height+((null===(e=this.m_pBanner)||void 0===e?void 0:e.rectangleHeight)||0))}sort(e){this.isManualSortable&&this.m_pList&&this.m_pList.sort("name",e)}deleteUnnamed(){this.collection.each((e=>{C(e.getNameOfItem())||e.pop()}))}deleteAll(){this.collection.clear()}refresh(){var e;null===(e=this.m_pList)||void 0===e||e.refresh()}import(){this.cards&&(this.m_bIsImporting=!0,zl.openPanel(this.cards.layer,this.collection,!!this.m_pProperties.showAliases,!!this.m_pProperties.showScores).onClose=()=>{He((()=>{this.m_bIsImporting=!1,this.collection.each((e=>{var t;(null===(t=this.m_pList)||void 0===t?void 0:t.rowWithIdentifier(e.id))||this.onCollectionPush(e)}))}))})}export(){this.cards&&El.openPanel(this.cards.layer,this.collection)}deduplicate(){this.collection.each((e=>{if(!e.isDeleted){const t=e.getNameOfItem(),i=e.getAliasOfItem();(t||i)&&this.collection.each((s=>{!s.isDeleted&&(t&&s.getNameOfItem()===t||i&&s.getAliasOfItem()===i)&&s.id!==e.id&&s.delete()}))}}))}aliases(e){return e!==this.m_pProperties.showAliases&&(Fe(this.m_pProperties,"showAliases",e),this.refresh()),this}scores(e){return e!==this.m_pProperties.showScores&&(Fe(this.m_pProperties,"showScores",e),this.refresh()),this}indicators(e){return e!==this.m_pProperties.indicator&&(Fe(this.m_pProperties,"indicator",e),this.refresh()),this}}function Pl(e,t){const i=Ye(e,t);return i instanceof ka&&i||void 0}var Rl=Object.freeze({__proto__:null,of:function(e,t,i=!1){return new ka(e,(()=>!i&&"ref"in t?t.ref:t))},get:Pl,find:function(e,t){const i=t instanceof Sa?t:e instanceof Yi?void 0:e.block instanceof Sa&&e.block||void 0;if(i){const t=e instanceof Yi?e:e.slot||"pipe"in e&&e.pipe||void 0;if("dynamic"===(null==t?void 0:t.kind))for(const s in i)if(-1===s.indexOf(" ")&&0!==s.indexOf("m_")){const o=Ye(i,s),n="type"in e&&e||void 0;if(o instanceof ka&&o.each((e=>{var s;return n?"slot"===n.type&&e.id===n.reference||"pipe"===n.type&&(null===(s=i.slots.select(e.id,"dynamic"))||void 0===s?void 0:s.isPipe(n.id)):e.id===t.reference}))){const e=_a(i,"collection",s);if(e&&e.isAvailable(i)){const t=Pl(i,e.collection);return t?{name:e.collection,collection:t,origin:!1,sole:e.isSole(i)}:void 0}return{name:s,collection:o,origin:!0,sole:!0}}}const s=(null==t?void 0:t.reference)||"";if(s){const e=_a(i,"slot",s);if(e&&e.isAvailable(i)){const t=Pl(i,e.collection);if(t)return{name:e.collection,collection:t,origin:!1,sole:e.isSole(i)}}}}},Provider:ka,Item:Ys,Card:Ol});class Hl extends Ka{constructor(e,t,i){super(t,void 0,{style:i,styleName:"dropdown",styleDefault:Hl.style}),this.m_pWidth="auto",this.m_strPlaceholder="",this.m_pDefault=t instanceof Ja?t.default:void 0,N(e)?e((e=>{this.m_pOptions=this.prepareOptions(e),this.createOptions(this.m_pDropdown)})):z(e)&&(this.m_pOptions=this.prepareOptions(e))}get static(){return this.m_pStatic}get value(){return this.output()}set value(e){this.input(e)}prepareOptions(e){const t=[];let i=0;return ee(e,(e=>{_(e.optGroup)?t.push({type:"optGroup",id:W(i++),label:e.optGroup,value:this.m_pDefault,disabled:!1,indent:0}):t.push({type:"option",id:W(i++),label:e.label,value:e.value,disabled:e.disabled,indent:e.indent})})),t}optionToValue(e){if(""!==e){const t=ue(this.m_pOptions,(t=>t.id===e));if(t)return t.value}return this.m_pDefault}createOptions(e){if(e&&this.m_pOptions){const i=e.HTMLElement;if(i){const s=document.createDocumentFragment();let o,n,r;if(C(this.m_strPlaceholder)){const e=document.createElement("option");this.style&&this.style.placeholder&&(e.className=this.stylesheet.style(this.style.placeholder)),e.text=this.m_strPlaceholder,e.value="",n=e,s.appendChild(e)}ee(this.m_pOptions,(e=>{switch(e.type){case"option":const i=document.createElement("option");i.text=t.fill("",3*(e.indent||0))+e.label,i.value=e.id,i.disabled=Q(e.disabled),i.disabled||(n||(n=i),r||e.value!==this.value||(r=i)),(o||s).appendChild(i);break;case"optGroup":C(e.label)?(o=document.createElement("optgroup"),o.label=e.label,s.appendChild(o)):o=void 0}})),r=r||n,r&&(e.selector("placeholder",""===r.value),r.selected=!0,this.input(this.optionToValue(r.value))),i.appendChild(s)}}}onDraw(e){const t=e.create("label",(t=>{this.hasLabel&&(this.m_pStatic=t.create("p",void 0,[{margin:0,padding:0},this.style?this.style.label:void 0,this.isSingleControlInForm&&this.style&&this.style.fused?this.style.fused.label:void 0,{width:"100%",userSelect:"none",cursor:"default"}],this.stylesheet)),this.m_pDropdown=t.create("select",(t=>{this.isFused||(t.selector("locked",this.isLocked),t.selector("required",this.isRequired),t.selector("failed",this.isFailed),t.selector("passed",this.isPassed),t.selector("awaiting",this.isAwaiting)),this.createOptions(t),t.property("disabled",this.isDisabled||this.isLocked),t.on(["change"],(()=>{this.input(this.optionToValue(t.property("value")||""))})),xr.mode(t,"input"),Lr.pointer(this.isFused?e:t,(e=>this.hover(e.isHovered))),this.m_pFocus=Ar.on(this.isFused?e:t,t,"no-auto-focus","auto-blur",(i=>this.updateFocus(i.hasFocus,!0,this.isFused?e:t,t)),this.tab,(()=>this.isInteractable)),this.keyboard(t)}),[{border:"none",cursor:"default"},this.style?this.style.appearance:void 0,this.isFused&&this.style&&this.style.fused?this.style.fused.appearance:void 0,{display:"block",width:this.isFused||"full"===this.m_pWidth?"100%":this.m_pWidth,maxWidth:"100%",boxSizing:"border-box",resize:"none",appearance:"none","&::-ms-expand":{display:"none"},"&:invalid":{border:"none",outline:"0"},"&:disabled":{pointerEvents:"none"},"&:focus":{border:"none",outline:"0"},option:this.style?this.style.options:void 0,optgroup:X({fontWeight:"bold"},this.style?this.style.optGroups:void 0),[So.selector("placeholder")]:this.style?this.style.placeholder:void 0,[So.selector("awaiting")]:!this.isFused&&this.style?this.style.awaiting:void 0,[So.selector("failed")]:!this.isFused&&this.style?this.style.failed:void 0,[So.selector("passed")]:!this.isFused&&this.style?this.style.passed:void 0,[So.selector("locked")]:!this.isFused&&this.style?this.style.locked:void 0,[So.selector("hover")]:!this.isFused&&this.style?this.style.hover:void 0,[So.selector("focus")]:!this.isFused&&this.style?this.style.focus:void 0,[So.selector("required")]:!this.isFused&&this.style?this.style.required:void 0}],this.stylesheet)}),{[So.selector("disabled")]:this.style?this.style.disabled:void 0},this.stylesheet);return this.isFused&&(this.style&&this.style.fused&&e.style({[So.selector("failed")]:this.style.fused.failed,[So.selector("passed")]:this.style.fused.passed,[So.selector("awaiting")]:this.style.fused.awaiting,[So.selector("locked")]:this.style.fused.locked,[So.selector("hover")]:this.style.fused.hover,[So.selector("focus")]:this.style.fused.focus,[So.selector("required")]:this.style.fused.required},this.stylesheet),e.selector("locked",this.isLocked),e.selector("required",this.isRequired),e.selector("failed",this.isFailed),e.selector("passed",this.isPassed),e.selector("awaiting",this.isAwaiting)),t}onUpdate(){const e=this.isFused?this.parent:this.m_pDropdown;e&&(e.selector("locked",this.isLocked),e.selector("required",this.isRequired),e.selector("focus",this.hasFocus),e.selector("hover",this.isHovered),e.selector("failed",this.isFailed),e.selector("passed",this.isPassed),e.selector("awaiting",this.isAwaiting)),this.m_pDropdown&&this.m_pDropdown.property("disabled",this.isDisabled||this.isLocked),super.onUpdate()}onFocusOptions(){this.m_pFocus&&this.m_pFocus.update(),super.onFocusOptions()}onData(){ro((()=>{if(this.m_pDropdown){const e=this.m_pDropdown.HTMLElementOfType();if(e){let t=R(e.options,e.selectedIndex);t&&this.value!==this.optionToValue(t.value)&&(t=ue(e.options,(e=>e&&this.value===this.optionToValue(e.value)||!1)),t&&(t.selected=!0)),this.m_pDropdown.selector("placeholder",!!t&&""===t.value)}}}),!this.m_pDropdown||!this.m_pDropdown.isInDOM,!0),this.m_fnChange&&this.m_fnChange(this),super.onData()}select(e){return this.value=e,this}focus(){return!!this.m_pFocus&&this.m_pFocus.focus()}blur(){this.m_pFocus&&this.m_pFocus.blur()}width(t){return this.m_pWidth=A(t)?e.max(t,0):t,this}placeholder(e){return this.m_strPlaceholder!==e&&(this.m_strPlaceholder=e,ro((()=>{this.m_pPlaceholder&&(this.m_pPlaceholder.text=e)}),!1,!0)),this}on(e){return this.m_fnChange=e,this}optionLabel(e,i){e=void 0!==e?e:this.value;const s=ue(this.m_pOptions,(t=>"option"===t.type&&t.value===e));if(s){if(_(i)&&(Fe(s,"label",i),this.m_pDropdown)){const e=this.m_pDropdown.HTMLElementOfType();if(e){const i=ue(e.options,(e=>!!e&&this.optionToValue(e.value)===s.value));i&&ro((()=>{i&&(i.text=t.fill("",3*(s.indent||0))+s.label)}),!this.m_pDropdown.isInDOM,!0)}}return s.label}return""}optionDisabled(e,t){e=void 0!==e?e:this.value;const i=ue(this.m_pOptions,(t=>"option"===t.type&&t.value===e));if(i){if(T(t)){if(this.m_pDropdown){const e=this.m_pDropdown.HTMLElementOfType();if(e){const s=ue(e.options,(e=>!!e&&this.optionToValue(e.value)===i.value));s&&ro((()=>{s&&(s.disabled=t)}),!this.m_pDropdown.isInDOM,!0)}}Fe(i,"disabled",t)}return Q(i.disabled)}return!1}options(e){if(this.m_pOptions=this.prepareOptions(e),this.m_pDropdown){const e=this.m_pDropdown.HTMLElementOfType();e&&ro((()=>{e.innerHTML=dr.sanitize(""),this.createOptions(this.m_pDropdown)}),!this.m_pDropdown.isInDOM,!0)}return this}}class Fl extends Ka{constructor(e,t,i){super(t,void 0,{style:i,styleName:"radiobutton",styleDefault:Fl.style}),this.m_pButtons=e,this.m_sName=Bt(`Radiobutton-${Fl.enumerator.n}`)}get static(){return this.m_pStatic}get value(){return this.output()}set value(e){this.input(e)}updateButtons(){ro((()=>{let e=!1;ee(this.m_pButtons,(t=>{t.input&&(t.input.property("checked",!e&&t.value===this.value),e=e||t.value===this.value)}))}),!this.element||!this.element.isInDOM,!0)}onDraw(e){const t=e.create("fieldset",(e=>{let t,i=!1;this.hasLabel&&(this.m_pStatic=e.create("p",void 0,[{margin:0,padding:0},this.style&&this.style.label,this.isSingleControlInForm&&this.style&&this.style.fused&&this.style.fused.label||void 0,{width:"100%",userSelect:"none",cursor:"default"}],this.stylesheet)),ee(this.m_pButtons,(s=>{e.create("label",(e=>{Fe(s,"disabled",Q(s.disabled)),Fe(s,"visible",Q(s.visible,!0)),Fe(s,"element",e),Fe(s,"input",e.create("input",(o=>{o.attribute("type","radio"),o.attribute("name",this.m_sName),o.property("disabled",s.disabled),s.visible&&!s.disabled&&(t=t||s,i||s.value!==this.value||(o.property("checked",!0),i=!0)),Dr.on(e,(()=>{this.isInteractable&&!s.disabled&&(this.value=s.value)})),Lr.pointer(e,(t=>e.selectorSafe("hover",this.isInteractable&&!s.disabled&&t.isHovered))),Fe(s,"focus",Ar.on(e,o,"no-auto-focus","auto-blur",(t=>{this.updateFocus(t.hasFocus,!0,e,o),e.selectorSafe("focus",t.hasFocus)}),this.tab,(()=>this.isInteractable&&!s.disabled))),this.keyboard(o,(()=>(this.value=s.value,!0)))}),{opacity:0,display:"inline",float:"left",appearance:"none"},this.stylesheet)),e.create("span",(e=>{Fe(s,"elementLabel",e),s.markdown?e.markdown(es.parse(s.label,!T(s.markdown)&&s.markdown||void 0),void 0,((e,t)=>{"hyperlink"===t&&xr.mode(e,"disable")})):e.text=s.label})),s.description&&e.create("div",(e=>{Fe(s,"elementDescription",e),s.markdown?e.markdown(es.parse(s.description,!T(s.markdown)&&s.markdown||void 0),void 0,((e,t)=>{"hyperlink"===t&&xr.mode(e,"disable")})):e.text=s.description})),e.selector("visible",s.visible),e.selector("disabled",s.disabled),xr.mode(e,"exclusive")}),{display:"none",width:"100%",boxSizing:"border-box","> span":X({cursor:"default"},this.style&&this.style.radiobutton&&this.style.radiobutton.label,{display:"block",boxSizing:"border-box",backgroundRepeat:"no-repeat"}),div:this.style&&this.style.radiobutton&&this.style.radiobutton.description,"> input:checked + span":this.style&&this.style.radiobutton&&this.style.radiobutton.checked,"> input:not(:checked) + span":this.style&&this.style.radiobutton&&this.style.radiobutton.unchecked,[So.selector("hover")]:{"> span":this.style&&this.style.radiobutton&&this.style.radiobutton.hover&&this.style.radiobutton.hover.label,"> input:checked + span":this.style&&this.style.radiobutton&&this.style.radiobutton.hover&&this.style.radiobutton.hover.checked,"> input:not(:checked) + span":this.style&&this.style.radiobutton&&this.style.radiobutton.hover&&this.style.radiobutton.hover.unchecked},[So.selector("focus")]:{"> span":this.style&&this.style.radiobutton&&this.style.radiobutton.focus&&this.style.radiobutton.focus.label,"> input:checked + span":this.style&&this.style.radiobutton&&this.style.radiobutton.focus&&this.style.radiobutton.focus.checked,"> input:not(:checked) + span":this.style&&this.style.radiobutton&&this.style.radiobutton.focus&&this.style.radiobutton.focus.unchecked},[So.selector("disabled")]:{cursor:"default",pointerEvents:"none","> span":X({cursor:"default",pointerEvents:"none"},this.style&&this.style.radiobutton&&this.style.radiobutton.disabled&&this.style.radiobutton.disabled.label),"> input:checked + span":this.style&&this.style.radiobutton&&this.style.radiobutton.disabled&&this.style.radiobutton.disabled.checked,"> input:not(:checked) + span":this.style&&this.style.radiobutton&&this.style.radiobutton.disabled&&this.style.radiobutton.disabled.unchecked},[So.selector("visible")]:{display:"block"}},this.stylesheet)})),!i&&t&&(this.value=t.value),e.style([{padding:0,margin:0,border:"none"},this.style&&this.style.appearance,this.isFused&&this.style&&this.style.fused&&this.style.fused.appearance||void 0,{minWidth:0,webkitMarginBottomCollapse:"separate",[So.selector("required")]:!this.isSingleControlInForm&&this.style&&this.style.required||void 0,[So.selector("awaiting")]:this.style&&this.style.awaiting,[So.selector("failed")]:this.style&&this.style.failed,[So.selector("passed")]:this.style&&this.style.passed,[So.selector("locked")]:this.style&&this.style.locked,[So.selector("disabled")]:this.style&&this.style.disabled}],this.stylesheet),e.selector("locked",this.isLocked),e.selector("failed",this.isFailed),e.selector("passed",this.isPassed),e.selector("awaiting",this.isAwaiting),this.isSingleControlInForm||e.selector("required",this.isRequired)}));return this.isSingleControlInForm&&(this.style&&this.style.fused&&e.style({[So.selector("required")]:this.style.fused.required},this.stylesheet),e.selector("required",this.isRequired)),t}onUpdate(){const e=this.isSingleControlInForm?this.parent:this.element;e&&e.selector("required",this.isRequired),this.element&&(this.element.selector("locked",this.isLocked),this.element.selector("failed",this.isFailed),this.element.selector("passed",this.isPassed),this.element.selector("awaiting",this.isAwaiting)),super.onUpdate()}onFocusOptions(){ee(this.m_pButtons,(e=>{e.focus&&e.focus.update()})),super.onFocusOptions()}onData(){this.updateButtons(),this.m_fnChange&&this.m_fnChange(this),super.onData()}onDisable(){ee(this.m_pButtons,(e=>{e.element&&(e.element.removeSelectorSafe("hover"),e.element.removeSelectorSafe("focus"))})),this.blur(),super.onDisable()}onLock(){ee(this.m_pButtons,(e=>{e.element&&(e.element.removeSelectorSafe("hover"),e.element.removeSelectorSafe("focus"))})),this.blur(),super.onLock()}select(e){return this.value=e,this}focus(e="first"){if(this.isInteractable){const t=("last"===e?he:ue)(this.m_pButtons,(e=>Q(e.visible&&!e.disabled&&e.input)));if(t&&t.input)return t.input.focus()}return!1}focusTo(e){if(this.isInteractable&&this.hasFocus){let t=-1;if(ue(this.m_pButtons,(e=>(t++,Q(e.focus&&e.focus.hasFocus)))),-1!==t){let i;for("previous"===e?t--:t++,i=R(this.m_pButtons,t);i;){if(i.visible&&!i.disabled&&i.input&&i.input.focus())return!0;"previous"===e?t--:t++,i=R(this.m_pButtons,t)}}}return ve((()=>this.updateButtons())),!1}blur(){ee(this.m_pButtons,(e=>{e.input&&e.input.blur()}))}on(e){return this.m_fnChange=e,this}buttonLabel(e,t){e=void 0!==e?e:this.value;const i=ue(this.m_pButtons,(t=>t.value===e));return i?(C(t)&&(Fe(i,"label",t),i.elementLabel&&(i.markdown?i.elementLabel.markdown(es.parse(i.label,!T(i.markdown)&&i.markdown||void 0),void 0,((e,t)=>{"hyperlink"===t&&xr.mode(e,"disable")})):i.elementLabel.text=i.label),this.updateControl("visible")),i.label):""}buttonDescription(e,t){e=void 0!==e?e:this.value;const i=ue(this.m_pButtons,(t=>t.value===e));return i?(_(t)&&(Fe(i,"description",t),i.elementDescription&&(i.markdown?i.elementDescription.markdown(es.parse(i.description,!T(i.markdown)&&i.markdown||void 0),void 0,((e,t)=>{"hyperlink"===t&&xr.mode(e,"disable")})):i.elementDescription.text=i.description,i.elementDescription.set("display",C(t)?"block":"none")),this.updateControl("visible")),i.label):""}buttonDisabled(e,t){e=void 0!==e?e:this.value;const i=ue(this.m_pButtons,(t=>t.value===e));if(i){if(T(t)){if(Fe(i,"disabled",t),i.element&&(i.element.selectorSafe("disabled",i.disabled),i.disabled&&(i.element.removeSelectorSafe("hover"),i.element.removeSelectorSafe("focus"),i.focus&&i.focus.blur())),ro((()=>{i.input&&i.input.property("disabled",Q(i.disabled))}),!i.input||!i.input.isInDOM,!0),i.disabled&&this.value===i.value){const e=ue(this.m_pButtons,(e=>Q(e.visible&&!e.disabled)));e&&(this.value=e.value)}this.updateControl("disabled")}return Q(i.disabled)}return!1}buttonVisible(e,t){e=void 0!==e?e:this.value;const i=ue(this.m_pButtons,(t=>t.value===e));if(i){if(T(t)){if(Fe(i,"visible",t),i.element&&(i.element.selectorSafe("visible",i.visible),i.visible||(i.element.removeSelectorSafe("hover"),i.element.removeSelectorSafe("focus"),i.focus&&i.focus.blur())),!i.visible&&this.value===i.value){const e=ue(this.m_pButtons,(e=>Q(e.visible&&!e.disabled)));e&&(this.value=e.value)}this.updateControl("visible")}return Q(i.visible)}return!1}}Fl.enumerator=new l;class Ul extends el{constructor(e="large",t){super({style:t,styleName:"spacer",styleDefault:Ul.style}),this.m_sType=e}onDraw(e){return e.create("p",(t=>{const i=So.selectorHash("Spacer");t.addClass(i),e.style({[`p.${i}.${So.selectorHash("visible")} + p.${i}.${So.selectorHash("visible")}`]:{display:"none"}},this.stylesheet)}),{height:this.style?"large"===this.m_sType?this.style.large:this.style.small:0,padding:0,margin:0,visibility:"hidden",userSelect:"none"},this.stylesheet)}}class Bl extends gl{constructor(e,t,i,s={},o,n,r,a,l="left",c=[]){super(e,{contract:t,l10n:Object.assign({},s),builder:i},r||ol("builder","Language settings"),"compact",a,l,"always-on",ol("builder","Close"),c),this.cache={},this.onChange=o,this.onTranslation=n,e.onClose=()=>this.whenClosed&&this.whenClosed()}verifyStrings(){if(this.ref.contract.strings){const e=this.ref.l10n.translations&&(z(this.ref.l10n.translations)?this.ref.l10n.translations:[this.ref.l10n.translations])||[];ee(e,(e=>{ee(e,((t,i)=>{""===i||ue(this.ref.contract.strings,(e=>i===(z(e)?e[0]:e)))||$e(e,i)}),{keys:!0})}));const t=ce(e,(e=>{let t=!1;return ee(e,((e,i)=>{i&&(t=!0)}),{keys:!0}),t}));0===t.length?$e(this.ref.l10n,"translations"):1===t.length?Fe(this.ref.l10n,"translations",t[0]):Fe(this.ref.l10n,"translations",t)}}getTranslation(e,t,i){const s=R(e[t],i);return"string"==typeof s?s:z(s)&&1===s.length&&"string"==typeof s[0]?s[0]:void 0}fetchTranslation(e){return function(e,t,i,s){return new(i||(i=Promise))((function(t,o){function n(e){try{a(s.next(e))}catch(e){o(e)}}function r(e){try{a(s.throw(e))}catch(e){o(e)}}function a(e){var s;e.done?t(e.value):(s=e.value,s instanceof i?s:new i((function(e){e(s)}))).then(n,r)}a((s=s.apply(e,[])).next())}))}(this,0,void 0,(function*(){let[t]=yield Promise.all([Promise.resolve(this.cache[e]||e&&N(this.onTranslation)&&this.onTranslation(e)||void 0)]);if(z(t))if(t.length>0){const e=t;t=e[0];for(let i=1;i<e.length;i++)t=Object.assign(Object.assign({},t),e[i])}else t=void 0;return this.cache[e]=t||{}}))}onCards(e){var i;let s,o,n,r;const a=new tt((()=>{this.ref.contract.contract&&Fe(this.ref.l10n,"contract",{name:this.ref.contract.contract.name,version:ss(this.ref.contract.contract.version)&&this.ref.contract.contract.version||"0.0.0"}),this.onChange&&this.onChange(this.ref.l10n,o?J(this.ref.l10n,{language:o.value}):this.ref.l10n)}));this.layer.hook("OnClose","synchronous",(()=>{a.cancel(),this.onChange&&this.onChange(this.ref.l10n,this.ref.l10n)}));const l=()=>{const e=this.ref.l10n.translations&&(z(this.ref.l10n.translations)?this.ref.l10n.translations:[this.ref.l10n.translations])||[];let i=`:${t.iterateToString(e,":",(e=>e[""]&&e[""].language||""))}:`;const s=ie(ce(e,(e=>!(!e[""]||!e[""].language))),(e=>({label:za.getDomain(e[""].language).language,value:e[""].language||""}))).sort(((e,t)=>e.label.localeCompare(t.label))),o=[...s];return this.ref.contract.availableTranslations&&ee(this.ref.contract.availableTranslations,(e=>{-1===i.indexOf(`:${e}:`)&&(o.push({label:za.getDomain(e).language,value:e}),i+=e+":")})),o.sort(((e,t)=>e.label.localeCompare(t.label))),{languages:[...o.length>0?[{optGroup:ol("builder","Available translations")}]:[],...o,{optGroup:ol("builder","Languages without a translation")},...ie(ce(za.domains,(e=>-1===e.locale.indexOf("-")&&-1===i.indexOf(`:${e.locale}:`))),(e=>({label:e.locale===il.current&&e.native||e.language||e.locale,value:e.locale}))).sort(((e,t)=>e.label.localeCompare(t.label))),{optGroup:ol("builder","Additional regions and dialects")},...ie(ce(za.domains,(e=>-1!==e.locale.indexOf("-")&&-1===i.indexOf(`:${e.locale}:`))),(e=>({label:e.locale===il.current&&e.native||e.language||e.locale,value:e.locale}))).sort(((e,t)=>e.label.localeCompare(t.label)))],translations:s,default:this.ref.builder&&this.ref.builder.language||this.ref.l10n.language&&"auto"!==this.ref.l10n.language&&this.ref.l10n.language||s.length>0&&s[0].value||il.current}};this.verifyStrings();const c=l();if(this.ref.builder)e.add(new Xa({title:ol("builder","Form language"),controls:[new jl(ol("builder","Here you specify the language that you have used in the texts of your form. If no language is specified, Tripetto will try to select an appropriate translation automatically.")),new Hl([{optGroup:ol("builder","Languages")},...ie(ce(za.domains,(e=>-1===e.locale.indexOf("-"))),(e=>({label:e.locale===il.current&&e.native||e.language||e.locale,value:e.locale}))).sort(((e,t)=>e.label.localeCompare(t.label))),{optGroup:ol("builder","Additional regions and dialects")},...ie(ce(za.domains,(e=>-1!==e.locale.indexOf("-"))),(e=>({label:e.locale===il.current&&e.native||e.language||e.locale,value:e.locale}))).sort(((e,t)=>e.label.localeCompare(t.label)))],this.ref.builder.language).placeholder(ol("builder","No language specified")).on((e=>{e.value!==this.ref.builder.language&&(this.ref.builder.language=e.value),n&&n.visible(!e.value),e.value&&o&&(o.value=e.value),s&&s.visible(!!e.value),a.invoke()}))]}));else if(P(this.ref.contract.availableTranslations)>0){const t=ol("builder","Always use a fixed translation.");r=new Hl(c.languages,this.ref.l10n.language&&"auto"!==this.ref.l10n.language?this.ref.l10n.language:il.current).visible(this.ref.l10n.language&&"auto"!==this.ref.l10n.language||!1).label(ol("builder","Available translations:")).indent(32).on((()=>{r&&(r.isVisible&&(Fe(this.ref.l10n,"language",r.value||"auto"),r.hasFocus&&r.value&&o&&(o.value=r.value)),n&&n.visible(!r.isVisible),a.invoke())}));const i=new Fl([{label:ol("builder","Automatic"),description:ol("builder","Use the best available translation based on browser language."),value:"auto"},{label:ol("builder","Manual"),description:t,value:"manual"}],this.ref.l10n.language&&"auto"!==this.ref.l10n.language?"manual":"auto").on((e=>{var i;if(e.buttonDescription("manual","auto"===e.value?t:""),r&&r.visible("manual"===e.value),s&&s.visible("manual"===e.value),o){const t="auto"===e.value?null===(i=this.ref.builder)||void 0===i?void 0:i.language:null==r?void 0:r.value;t&&(o.value=t)}Fe(this.ref.l10n,"language","manual"===e.value&&r?r.value:"auto"),a.invoke()}));e.add(new Xa({title:ol("builder","Language selection"),controls:[new jl(ol("builder","Specifies the language of common labels and messages in the runner. Things like buttons, supporting texts and notifications (all the labels that aren't defined in your form itself).")),i,r]}))}else $e(this.ref.l10n,"language");if(P(this.ref.contract.strings)){const s={},u=[];let h="";const d=()=>{const e=l();r&&r.options(e.languages),o&&o.options(e.languages)},p=e=>{if(this.ref.l10n.translations){if(z(this.ref.l10n.translations))return ue(this.ref.l10n.translations,(t=>t[""]&&t[""].language===e));if(this.ref.l10n.translations[""]&&this.ref.l10n.translations[""].language===e)return this.ref.l10n.translations}},m=new tt((()=>{g(!1),a.invoke()}),"promise"),g=e=>{const i=f.value&&Oa.getForFamily(f.value),n=i&&i.rules.length||1,r=p(o&&o.value||""),a=o&&o.value&&za.getDomain(o.value);v.title=a&&t.capitalize(a.native||a.language)||ol("builder","Messages"),!e&&r&&r[""]&&(i?Fe(r[""],"plural-forms",i.expression):$e(r[""],"plural-forms"),f.isVisible&&i?Fe(r[""],"plural-family",i.family):$e(r[""],"plural-family")),ee(s,((e,t)=>{if(e.control.value=r&&this.getTranslation(r,t,1)||"",e.control.placeholder(e.placeholder),e.plurals.length>0){e.control.label(ol("builder","Plural message: *%1*",i&&n>1?i.rules[0]:ol("builder","Singular")));for(let s=0;s<e.plurals.length;s++){const o=n>=s+2;e.plurals[s].control.visible(o),e.plurals[s].control.placeholder(e.plurals[s].label),e.plurals[s].control.value=r&&this.getTranslation(r,t,2+s)||"",o&&e.plurals[s].control.label(ol("builder","Plural message: *%1*",i&&i.rules[s+1]||ol("builder","Plural")))}}}),{keys:!0}),xe((()=>this.fetchTranslation(o&&o.value||"").then((e=>{if(y.isVisible&&e&&e[""]&&e[""]["plural-forms"]){const t=Oa.getForExpression(e[""]["plural-forms"]);t&&(y.visible(!1),f.value=t.family)}ee(s,((t,i)=>{const s=this.getTranslation(e,i,1);s&&t.control.placeholder(s);for(let s=0;s<t.plurals.length;s++)if(n>=s+2){const o=this.getTranslation(e,i,2+s);o&&t.plurals[s].control.placeholder(o)}}),{keys:!0})}))))},b=(e,t,i)=>{xe((()=>{let s=p(o&&o.value||"");if(t&&!s){const e=f.value&&Oa.getForFamily(f.value);s={"":{language:o&&o.value||""}},e&&Fe(s[""],"plural-forms",e.expression),f.isVisible&&e?Fe(s[""],"plural-family",e.family):$e(s[""],"plural-family"),this.ref.l10n.translations?z(this.ref.l10n.translations)?this.ref.l10n.translations.push(s):Fe(this.ref.l10n,"translations",[J(this.ref.l10n.translations),s]):Fe(this.ref.l10n,"translations",s),d()}if(s&&((s[e]||(s[e]=[null,""]))[i+1]=t,!t&&s[e])&&!ue(s[e],(e=>C(e)))){$e(s,e);const t=Object.keys(s);(0===t.length||1===t.length&&""===t[0])&&(z(this.ref.l10n.translations)&&this.ref.l10n.translations.length>1?(Fe(this.ref.l10n,"translations",ce(this.ref.l10n.translations,(e=>!e[""]||e[""].language!==(o&&o.value||"")))),1===this.ref.l10n.translations.length&&Fe(this.ref.l10n,"translations",this.ref.l10n.translations[0])):$e(this.ref.l10n,"translations"),d())}a.invoke()}))};o=new Hl(c.languages,c.default).label(ol("builder","**Languages** | Select the language you want to edit labels for")).markdown().on((e=>{const t=Oa.getForLocale(e.value||"en");if(y.visible(!t),t)f.value=t.family;else{const t=e.value&&p(e.value)||void 0,i=t&&t[""]&&t[""]["plural-family"]&&Oa.getForFamily(t[""]["plural-family"]);f.value=i&&i.family}m.invoke()})),n=e.add(new Xa({title:ol("builder","Translations"),controls:[new jl(ol("builder","You can specify your own labels and messages for different languages. This way, you can customize the translations we supply. You can also add your own translations for languages that don't have a translation yet.")),o]})).visible(!(null===(i=this.ref.builder)||void 0===i?void 0:i.language));const f=new Hl(ie(Oa.rules,(e=>({label:e.family,value:e.family}))),void 0).label(ol("builder","**Plural rules** | Specifies the plural form to use ([learn more](https://developer.mozilla.org/en-US/docs/Mozilla/Localization/Localization_and_Plurals))")).markdown().placeholder(ol("builder","Select the plural form for this language...")).on((()=>m.invoke())),y=new qa([f,new Ul]).hide();ee(this.ref.contract.strings.sort(((e,t)=>("string"==typeof e?e:e[0]).localeCompare("string"==typeof t?t:t[0]))),(e=>{const t="string"==typeof e?e:e[0],i=t.substr(t.indexOf("")+1),o=t.substr(0,t.indexOf("")).substr(t.indexOf("|")+1),n=[],r=new Al("singleline").placeholder(i).markdown().on((e=>b(t,e.value,0))),a=[];if(o!==h&&(o&&(u.length>0&&u.push(new Ul),u.push(new jl("**"+ol("builder",o.replace("|","** | ").replace(/\|/g," | "))).markdown())),h=o),"string"!=typeof e&&e[1]){const i=e[1].substr(e[1].indexOf("")+1);r.label(ol("builder","Singular"));for(let e=1;e<=5;e++){const s=new Al("singleline").placeholder(i).visible(1===e).label("?").markdown().on((i=>b(t,i.value,e)));a.push(s),n.push({control:s,label:i})}}u.push(r,...a),s[t]={placeholder:i,control:r,plurals:n}}));const v=new Xa({title:ol("builder","Messages"),controls:[y,...u]});g(!0),e.add(v)}if(this.ref.contract.customLocale){const t=ol("builder","Always use a fixed locale."),i=new Hl(ie(za.domains,(e=>({label:e.locale===il.current&&e.native||e.language||e.locale,value:e.locale}))).sort(((e,t)=>e.label.localeCompare(t.label))),this.ref.l10n.locale&&"auto"!==this.ref.l10n.locale?this.ref.l10n.locale:this.ref.l10n.language&&"auto"!==this.ref.l10n.language?this.ref.l10n.language:il.locale.locale.locale).visible(this.ref.l10n.locale&&"auto"!==this.ref.l10n.locale||!1).label(ol("builder","Available locales:")).indent(32).on((()=>{i.isFormVisible&&i.isObservable&&(Fe(this.ref.l10n,"locale",i.value||"auto"),a.invoke())}));s=e.add(new Xa({title:ol("builder","Locale"),controls:[new jl(ol("builder","The locale is used to format things like dates and numbers.")),new Fl([{label:ol("builder","Automatic"),description:ol("builder","Use the locale of the browser."),value:"auto"},{label:ol("builder","Manual"),description:t,value:"manual"}],this.ref.l10n.locale&&"auto"!==this.ref.l10n.locale?"manual":"auto").on((e=>{if("manual"===e.value&&(!this.ref.l10n.locale||"auto"===this.ref.l10n.locale)){const e=this.ref.builder?this.ref.builder.language:"auto"!==this.ref.l10n.language&&this.ref.l10n.language;e&&(i.value=e)}i.visible("manual"===e.value),e.buttonDescription("manual","auto"===e.value?t:""),e.isFormVisible?Fe(this.ref.l10n,"locale","manual"===e.value?i.value:"auto"):$e(this.ref.l10n,"locale"),a.invoke()})),i]})).visible(this.ref.builder?!!this.ref.builder.language:this.ref.l10n.language&&"auto"!==this.ref.l10n.language||!1)}else $e(this.ref.l10n,"locale")}}class Yl{constructor(e,t,i){this.m_pLoader=dr.create("div",(i=>{i.style({position:"absolute",left:0,right:0,top:0,bottom:0,height:t,margin:"auto auto",textAlign:"center"});for(let s=1;s<=3;s++)i.create("div",(i=>{i.style({width:t,height:t,backgroundColor:e,borderRadius:"100%",display:"inline-block",margin:"0 2px",animation:`${So.app.animation({"0%, 80%, 100%":{transform:"scale(0)"},"40%":{transform:"scale(1)"}})} 1.4s ease-in-out ${1===s?"-0.32s":2===s?"-0.16s":"0s"} infinite both`})}))}),i)}static create(e,t,i){return new Yl(e,t,i)}destroy(){this.m_pLoader.destroy()}}class Zl extends Ka{constructor(e,t=!1,i){super(t,!1,{label:e,style:i,styleName:"checkbox",styleDefault:Zl.style})}get static(){return this.m_pStatic}get isChecked(){return this.output()}set isChecked(e){this.input(e)}onDraw(e){return this.isFused&&(this.style&&this.style.fused&&e.style({[So.selector("required")]:this.style.fused.required,[So.selector("hover")]:this.style.fused.hover&&J(this.style.fused.hover.appearance,{span:J(this.style.fused.hover.label,{[So.selector("unchecked")]:this.style.fused.hover.unchecked,[So.selector("checked")]:this.style.fused.hover.checked})}),[So.selector("focus")]:this.style.fused.focus&&J(this.style.fused.focus.appearance,{span:J(this.style.fused.focus.label,{[So.selector("unchecked")]:this.style.fused.focus.unchecked,[So.selector("checked")]:this.style.fused.focus.checked})})},this.stylesheet),e.selector("required",this.isRequired)),e.create("label",(t=>{this.m_pCheckbox=t.create("input",(i=>{i.attribute("type","checkbox"),i.property("checked",this.isChecked),i.property("disabled",this.isDisabled||this.isLocked),i.property("readonly",this.isLocked),this.m_pFocus=Ar.on(this.isFused?e:t,i,"no-auto-focus","auto-blur",(s=>this.updateFocus(s.hasFocus,!0,this.isFused?e:t,i)),this.tab,(()=>this.isInteractable)),this.keyboard(i)}),{opacity:0,display:"inline",float:"left",appearance:"none"},this.stylesheet),this.m_pStatic=t.append("span",(e=>{e.selector("checked",this.isChecked),e.selector("unchecked",!this.isChecked)})),this.m_sDescription&&t.append("div",(e=>e.text=this.m_sDescription||"")),t.selector("failed",this.isFailed),t.selector("passed",this.isPassed),t.selector("awaiting",this.isAwaiting),t.selector("locked",this.isLocked),this.isFused||t.selector("required",this.isRequired),xr.mode(t,"exclusive"),Lr.pointer(this.isFused?e:t,(e=>this.hover(e.isHovered))),Dr.on(this.isFused?e:t,(()=>this.toggle()))}),[this.style&&this.style.appearance,this.isFused&&this.style&&this.style.fused&&this.style.fused.appearance||void 0,{width:!this.isFused&&this.m_nWidth?this.m_nWidth:"100%",boxSizing:"border-box","> span":X({cursor:"default"},this.style&&this.style.label,{display:"block",boxSizing:"border-box",backgroundRepeat:"no-repeat",[So.selector("unchecked")]:this.style&&this.style.unchecked,[So.selector("checked")]:this.style&&this.style.checked}),"> div":this.style&&this.style.description,[So.selector("required")]:this.style&&this.style.required&&J(this.style.required.appearance,{span:J(this.style.required.label,{[So.selector("unchecked")]:this.style.required.unchecked,[So.selector("checked")]:this.style.required.checked}),div:this.style.required.description}),[So.selector("hover")]:this.style&&this.style.hover&&J(this.style.hover.appearance,{span:J(this.style.hover.label,{[So.selector("unchecked")]:this.style.hover.unchecked,[So.selector("checked")]:this.style.hover.checked}),div:this.style.hover.description}),[So.selector("focus")]:this.style&&this.style.focus&&J(this.style.focus.appearance,{span:J(this.style.focus.label,{[So.selector("unchecked")]:this.style.focus.unchecked,[So.selector("checked")]:this.style.focus.checked}),div:this.style.focus.description}),[So.selector("failed")]:this.style&&this.style.failed&&J(this.style.failed.appearance,{span:J(this.style.failed.label,{[So.selector("unchecked")]:this.style.failed.unchecked,[So.selector("checked")]:this.style.failed.checked}),div:this.style.failed.description}),[So.selector("passed")]:this.style&&this.style.passed&&J(this.style.passed.appearance,{span:J(this.style.passed.label,{[So.selector("unchecked")]:this.style.passed.unchecked,[So.selector("checked")]:this.style.passed.checked}),div:this.style.passed.description}),[So.selector("awaiting")]:this.style&&this.style.awaiting&&J(this.style.awaiting.appearance,{span:J(this.style.awaiting.label,{[So.selector("unchecked")]:this.style.awaiting.unchecked,[So.selector("checked")]:this.style.awaiting.checked}),div:this.style.awaiting.description}),[So.selector("locked")]:this.style&&this.style.locked&&J(this.style.locked.appearance,{span:J(this.style.locked.label,{[So.selector("unchecked")]:this.style.locked.unchecked,[So.selector("checked")]:this.style.locked.checked}),div:this.style.locked.description}),[So.selector("disabled")]:this.style&&this.style.disabled&&J(this.style.disabled.appearance,{span:J(this.style.disabled.label,{[So.selector("unchecked")]:this.style.disabled.unchecked,[So.selector("checked")]:this.style.disabled.checked}),div:this.style.disabled.description})}],this.stylesheet)}onUpdate(){const e=this.isFused?this.parent:this.element;this.m_pCheckbox&&(this.m_pCheckbox.property("disabled",this.isDisabled||this.isLocked),this.m_pCheckbox.property("readonly",this.isLocked)),this.element&&(this.element.selector("failed",this.isFailed),this.element.selector("passed",this.isPassed),this.element.selector("awaiting",this.isAwaiting),this.element.selector("locked",this.isLocked)),e&&(e.selector("required",this.isRequired),e.selector("hover",this.isHovered),e.selector("focus",this.hasFocus)),super.onUpdate()}onEnter(){return this.toggle(),!0}onFocusOptions(){this.m_pFocus&&this.m_pFocus.update(),super.onFocusOptions()}onData(){ro((()=>{this.m_pStatic&&(this.m_pStatic.selector("checked",this.isChecked),this.m_pStatic.selector("unchecked",!this.isChecked))}),!this.m_pStatic||!this.m_pStatic.isInDOM,!0),this.m_fnToggle&&this.m_fnToggle(this),super.onData()}checked(e=!0){return this.isChecked=e,this}check(){return this.isChecked=!0,this}uncheck(){return this.isChecked=!1,this}toggle(){return this.isInteractable&&(this.isChecked=!this.isChecked),this}focus(){return!!this.m_pFocus&&this.m_pFocus.focus()}blur(){this.m_pFocus&&this.m_pFocus.blur()}description(e){return this.m_sDescription=e,this}width(t){return this.m_nWidth=e.max(t,0),this}on(e){return this.m_fnToggle=e,this}}class Vl extends Ka{constructor(e=0,t){super(e,0,{style:t,styleName:"numeric",styleDefault:Vl.style}),this.m_bAlignLeftOnFocus=!0,this.m_nPrecision=0,this.m_nDigits=0,this.m_bThousands=!0,this.m_sPrefix="",this.m_sSuffix="",this.m_sAutoSelect="auto-focus",this.m_pChange=new tt((()=>{if(this.m_pNumber&&this.hasFocus){const e=this.m_pNumber.property("value");this.input(0===this.m_nPrecision?G(e):$(e))}}))}get stepSize(){return"auto"!==this.m_nPrecision&&this.m_nPrecision>0?`0.${t.fill("0",this.m_nPrecision-1)}1`:"1"}get static(){return this.m_pStatic}get value(){return this.output()}set value(e){this.input(e)}get string(){const i=this.m_nDigits>0?t.padLeft(this.value,"0",this.m_nDigits,!1,!0):this.m_sDecimal||this.m_sThousands?e.format(this.value,this.m_nPrecision,this.m_bThousands?this.m_sThousands||za.locale.formats.numbers.grouping:"",this.m_sDecimal||za.locale.formats.numbers.decimals,za.locale.formats.numbers.minus):za.number(this.value,this.m_nPrecision,this.m_bThousands);return(1!==this.value&&_(this.m_sPrefixPlural)?this.m_sPrefixPlural:this.m_sPrefix)+i+(1!==this.value&&_(this.m_sSuffixPlural)?this.m_sSuffixPlural:this.m_sSuffix)}update(){ro((()=>{if(this.m_pNumber){const t=this.m_pNumber.HTMLElementOfType();t&&(this.hasFocus||(t.type="text"),t.value=this.hasFocus?0===this.value?"":e.format(this.value,this.m_nPrecision,"","."):this.string,this.hasFocus&&(t.type="number"))}}),!this.m_pNumber||!this.m_pNumber.isInDOM||this.hasFocus,!0)}input(t){return t="auto"!==this.m_nPrecision?e.conform(t,this.m_nPrecision):t,A(this.m_nMin)&&(t=e.max(t,this.m_nMin)),A(this.m_nMax)&&(t=e.min(t,this.m_nMax)),super.input(t)}onDraw(e){(A(this.m_nMin)||A(this.m_nMax)||0!==this.m_nPrecision)&&this.input(this.value);const t=e.create("label",(t=>{this.hasLabel&&(this.m_pStatic=t.create("p",void 0,[{margin:0,padding:0},this.style?this.style.label:void 0,this.isSingleControlInForm&&this.style&&this.style.fused?this.style.fused.label:void 0,{width:"100%",userSelect:"none",cursor:"default"}],this.stylesheet)),this.m_pNumber=t.create("input",(i=>{this.isFused||(i.selector("locked",this.isLocked),i.selector("required",this.isRequired),i.selector("failed",this.isFailed),i.selector("passed",this.isPassed),i.selector("awaiting",this.isAwaiting)),i.attribute("type","text"),i.attribute("inputmode",A(this.m_nMin)&&this.m_nMin>=0?"decimal":"numeric"),i.attribute("value",this.string),i.attribute("autocomplete","off"),i.attribute("lang",za.domain||"en"),i.property("step",this.stepSize),i.property("spellcheck",!1),i.property("disabled",this.isDisabled),i.property("readOnly",this.isLocked),i.on(["change","input"],(()=>this.m_pChange.invoke())),xr.mode(i,"input"),Lr.pointer(this.isFused?e:i,(e=>this.hover(e.isHovered))),this.m_pFocus=Ar.on(this.isFused?e:t,i,"focus-on-tap","auto-blur",(s=>{this.updateFocus(s.hasFocus,!0,this.isFused?e:t,i)}),this.tab,(()=>this.isInteractable)),this.keyboard(i)}),[{border:"none",cursor:"text"},this.style?this.style.appearance:void 0,this.isFused&&this.style&&this.style.fused?this.style.fused.appearance:void 0,{display:"block",width:!this.isFused&&this.m_nWidth?this.m_nWidth:"100%",boxSizing:"border-box",resize:"none",appearance:"none",mozAppearance:"textfield",userSelect:"text",textAlign:this.m_sAlign||"left","&::selection":this.style?this.style.selection:void 0,"&::-moz-selection":this.style?this.style.selection:void 0,"&::-webkit-inner-spin-button":{appearance:"none",margin:0},"&::-webkit-outer-spin-button":{appearance:"none",margin:0},"&::-ms-clear":{display:"none"},"&:invalid":{border:"none",outline:"0"},"&:disabled":{pointerEvents:"none",color:this.style&&this.style.appearance?this.style.appearance.color:void 0},"&:read-only":this.style&&this.style.appearance&&this.style.appearance.color?{color:this.style.appearance.color}:void 0,"&:focus":{border:"none",outline:"0",textAlign:this.m_bAlignLeftOnFocus?"left":this.m_sAlign||"left"},"&::-webkit-input-placeholder":this.style?this.style.placeholder:void 0,"&::-moz-placeholder":this.style?this.style.placeholder:void 0,"&:-moz-placeholder":this.style?this.style.placeholder:void 0,"&:-ms-input-placeholder":this.style?this.style.placeholder:void 0,"&::input-placeholder":this.style?this.style.placeholder:void 0,[So.selector("awaiting")]:!this.isFused&&this.style?this.style.awaiting:void 0,[So.selector("failed")]:!this.isFused&&this.style?this.style.failed:void 0,[So.selector("passed")]:!this.isFused&&this.style?this.style.passed:void 0,[So.selector("locked")]:!this.isFused&&this.style?this.style.locked:void 0,[So.selector("hover")]:!this.isFused&&this.style?this.style.hover:void 0,[So.selector("focus")]:!this.isFused&&this.style?this.style.focus:void 0,[So.selector("required")]:!this.isFused&&this.style?this.style.required:void 0}],this.stylesheet)}),{[So.selector("disabled")]:this.style?this.style.disabled:void 0},this.stylesheet);return this.isFused&&(this.style&&this.style.fused&&e.style({[So.selector("failed")]:this.style.fused.failed,[So.selector("passed")]:this.style.fused.passed,[So.selector("awaiting")]:this.style.fused.awaiting,[So.selector("locked")]:this.style.fused.locked,[So.selector("hover")]:this.style.fused.hover,[So.selector("focus")]:this.style.fused.focus,[So.selector("required")]:this.style.fused.required},this.stylesheet),e.selector("locked",this.isLocked),e.selector("required",this.isRequired),e.selector("failed",this.isFailed),e.selector("passed",this.isPassed),e.selector("awaiting",this.isAwaiting)),t}onUpdate(){const e=this.isFused?this.parent:this.m_pNumber;e&&(e.selector("locked",this.isLocked),e.selector("required",this.isRequired),e.selector("hover",this.isHovered),e.selector("focus",this.hasFocus),e.selector("failed",this.isFailed),e.selector("passed",this.isPassed),e.selector("awaiting",this.isAwaiting)),this.m_pNumber&&(this.m_pNumber.property("disabled",this.isDisabled),this.m_pNumber.property("readOnly",this.isLocked)),super.onUpdate()}onFocus(e){this.update(),("focus"===this.m_sAutoSelect||e&&"auto-focus"===this.m_sAutoSelect)&&this.hasFocus&&this.m_pNumber&&ao((()=>this.select())),super.onFocus(e)}onFocusOptions(){this.m_pFocus&&this.m_pFocus.update(),super.onFocusOptions()}onBlur(){this.update(),super.onBlur()}onEnter(e){return!(!this.m_fnEnter||!this.m_fnEnter(this))||super.onEnter(e)}onEscape(e){return!(!this.m_fnEscape||!this.m_fnEscape(this))||super.onEscape(e)}onData(){this.hasFocus||this.update(),this.m_fnChange&&this.m_fnChange(this),super.onData()}focus(){return!!this.m_pFocus&&this.m_pFocus.focus()}blur(){this.m_pFocus&&this.m_pFocus.blur()}width(t){return this.m_nWidth=e.max(t,0),this}align(e){return this.m_sAlign=e,this}alignLeftOnFocus(e){return this.m_bAlignLeftOnFocus=e,this}min(e){return e=A(e)?e:void 0,this.m_nMin!==e&&(this.m_nMin=e,(0!==this.m_nPrecision||this.element)&&this.input(this.value),this.m_pNumber&&this.m_pNumber.property("inputMode",A(this.m_nMin)&&this.m_nMin>=0?"decimal":"numeric")),this}max(e){return e=A(e)?e:void 0,this.m_nMax!==e&&(this.m_nMax=e,(0!==this.m_nPrecision||this.element)&&this.input(this.value)),this}precision(t){if(t="auto"===t?"auto":e.max(t,0),this.m_nPrecision!==t){const e=this.value;this.m_nPrecision=t,this.m_pNumber&&this.m_pNumber.property("step",this.stepSize),this.input(this.value)===e&&this.update()}return this}decimalSign(e){return this.m_sDecimal!==e&&(this.m_sDecimal=e||void 0,this.update()),this}digits(t){return t=e.max(t,0),this.m_nDigits!==t&&(this.m_nDigits=t,this.update()),this}thousands(e,t){return this.m_bThousands===e&&this.m_sThousands===t||(this.m_bThousands=e,this.m_sThousands=t||void 0,this.update()),this}prefix(e){return this.m_sPrefix!==e&&(this.m_sPrefix=e,this.update()),this}prefixPlural(e){return this.m_sPrefixPlural!==e&&(this.m_sPrefixPlural=e,this.update()),this}suffix(e){return this.m_sSuffix!==e&&(this.m_sSuffix=e,this.update()),this}suffixPlural(e){return this.m_sSuffixPlural!==e&&(this.m_sSuffixPlural=e,this.update()),this}autoSelect(e="focus"){return this.m_sAutoSelect=e,this}enter(e){return this.m_fnEnter=e,this}escape(e){return this.m_fnEscape=e,this}on(e){return this.m_fnChange=e,this}select(){if(this.m_pNumber){const e=this.m_pNumber.HTMLElementOfType();e&&e.select()}else this.autoFocus(!0);return this}}class Wl extends gl{constructor(e,t,i={},s,o,n=!1,r=!0,a,l,c,u="left",h=[]){super(e,{contract:t,styles:Object.assign({},i),tier:s,hideInaccessibleOptions:n,allowReset:r,onReset:a},l||ol("builder","Style settings"),"compact",c,u,"always-on",ol("builder","Close"),h),this.onChange=o,e.onClose=()=>this.whenClosed&&this.whenClosed()}static addStyleElement(e,t,i,s){switch(e.type){case"label":return[new Al("singleline",W(t)).label(e.label||"").placeholder(e.description||ol("builder","Specify a label")).disabled(!i).on((e=>s(e.value,e)))];case"color":return[new Al("singleline",W(t)).label(e.label||"").placeholder(e.description||ol("builder","Specify hex color or color name")).disabled(!i).on((e=>s(e.value,e)))];case"image":return[new Al("singleline",W(t)).sanitize(!1).trim(!1).label(e.label||"").placeholder(e.description||"https://").inputMode("url").disabled(!i).on((e=>s(e.value,e)))];case"checkbox":return[new Zl(e.label||e.description||"",Q(t)).description(e.label&&e.description||"").disabled(!i).on((e=>s(e.isChecked,e)))];case"number":return[new Vl(G(t)).label(e.label||"").min(e.min).max(e.max).width(e.width||0).prefix(e.prefix||"").suffix(e.suffix||"").disabled(!i).on((e=>s(e.value,e)))];case"dropdown":const o=ue(e.options,(e=>"value"in e&&!x(e.value))),n=o&&"value"in o&&A(o.value),r=ue(e.options,(e=>!(!("custom"in e)||!e.custom))),a=r&&"custom"in r&&ei(r.custom)||"",l=a&&(A(t)||_(t))&&!ue(e.options,(e=>"value"in e&&e.value===t))||!1,c=new Hl(ie(e.options,(e=>"custom"in e&&e.custom?{label:e.custom,value:a}:e)),l?a:n?G(t):W(t)).label(e.label||"").width(e.width||"auto").disabled(!i).on((e=>{u&&u.visible(e.value===a),u&&e.value===a||s(e.value||(n?0:""),e)})),u=a&&(n?new Vl(l?G(t):0).visible(l).disabled(!i).on((e=>{c.value===a&&s(e.value,c)})):new Al("singleline",l?W(t):"").placeholder(r&&"custom"in r&&r.custom||"").visible(l).disabled(!i).on((e=>{c.value===a&&s(e.value,c)})));return u?[c,u]:[c];case"radiobuttons":const h=R(e.buttons,0),d=h&&A(h.value);return[new Fl(e.buttons||[],d?G(t):W(t)).label(e.label||"").disabled(!i).on((e=>s(e.value||(d?0:""),e)))];case"static":return[new jl(e.label).markdown().disabled(!i)]}}static getValue(e,t){return T(e)||A(e)||e?e:"default"in t?t.default:void 0}onCards(e){const t={},i={},s={},o=[],n=this.ref.allowReset&&new Tl(ol("builder","Reset"),"cancel").on((e=>{const t=()=>{ee(o,(e=>{e.control instanceof Zl?e.control.isChecked=Q(e.value):e.control.value=A(e.control.value)?G(e.value):W(e.value)}))};e.disable(),this.ref.onReset?this.ref.onReset((i=>{i?t():e.enable()})):t()})),r=new tt((()=>{n&&n.disabled(!ue(o,(e=>e.control instanceof Zl?e.control.isChecked!==Q(e.value):e.control.value!==(A(e.control.value)?G(e.value):W(e.value))))),this.onChange&&this.onChange(this.ref.styles)})),a=(...e)=>{ee(e,(e=>{e&&(s[e]=!0)})),xe((()=>{this.ref.contract.contract&&Fe(this.ref.styles,"contract",{name:this.ref.contract.contract.name,version:ss(this.ref.contract.contract.version)&&this.ref.contract.contract.version||"0.0.0"}),ee(s,((e,o)=>{e&&(s[o]=!1,ee(i[o],(e=>{if(e.group&&(e.group.isDisabled||!e.group.isVisible))return;const i=e.observe&&(!z(e.observe)||e.observe.length>0)&&!ue(z(e.observe)?e.observe:[e.observe],(e=>{const i=t[e.property];if(i&&i.isVisible&&!i.isDisabled){const t=i instanceof Zl?i.isChecked:i.value;if(T(e.defined)&&e.defined===(T(t)||A(t)||C(t)))return!1;if(z(e.value)?S(ue(e.value,(e=>e===t))):S(e.value)&&e.value===t)return!1}return!0}));switch(e.action){case"enable":e.control.disabled(!i);break;case"disable":e.control.disabled(i);break;case"show":e.control.visible(i);break;case"hide":e.control.visible(!i)}})))}),{keys:!0}),r.invoke()}))},l=s=>ee(ce(this.ref.contract.styles,(e=>Q(e.additional)===s&&!e.optional&&(!this.ref.hideInaccessibleOptions||"premium"===this.ref.tier||"standard"===this.ref.tier&&"standard"===e.tier||!e.tier))),(s=>{const n=this.ref.hideInaccessibleOptions&&"premium"!==this.ref.tier?ce(s.elements,(e=>"standard"===this.ref.tier&&"standard"===e.tier||!e.tier)):s.elements;e.add(new Xa({title:s.title||1===n.length&&"static"!==n[0].type&&n[0].label||"",disabled:!("premium"===this.ref.tier||"standard"===this.ref.tier&&"standard"===s.tier||!s.tier),controls:[].concat(...ie(n,(e=>{const r=s.name?k(Ye(this.ref.styles,s.name))&&Ye(this.ref.styles,s.name)||Ue(this.ref.styles,s.name,{}):this.ref.styles,l="name"in e&&e.name||"",c=l&&(s.name&&`${s.name}.`||"")+l||"",u="premium"===this.ref.tier||"standard"===this.ref.tier&&"standard"===e.tier||!e.tier,h=Wl.addStyleElement(1===n.length&&"static"!==n[0].type?Object.assign(Object.assign({},e),{label:""}):e,Wl.getValue(Ye(r,l),e),u,((t,i)=>{!i.isVisible||i.isDisabled&&!(i instanceof Zl)||_(t)&&!t?$e(r,l):Ue(r,l,t),a(c,...ie(e.dependency&&(z(e.dependency.observe)&&e.dependency.observe||e.dependency.observe&&[e.dependency.observe])||[],(e=>e.property)))}));if(c&&h.length>=1&&!(h[0]instanceof jl)){if(t[c])throw new Error(`Styles contract is invalid (duplicate property '${c}')`);t[c]=h[0],o.push({control:h[0],value:"default"in e?e.default:void 0})}return u&&e.dependency&&ee(z(e.dependency.observe)?e.dependency.observe:[e.dependency.observe],(t=>{t.property!==c&&(i[t.property]||(i[t.property]=[])).push(...ie(h,(t=>J(e.dependency,{control:t}))))})),h})))}))})),c=[];l(!1),ee(ce(this.ref.contract.styles,(e=>(!this.ref.hideInaccessibleOptions||"premium"===this.ref.tier||"standard"===this.ref.tier&&"standard"===e.tier||!e.tier)&&e.optional||!1)),(e=>{const s=this.ref.hideInaccessibleOptions&&"premium"!==this.ref.tier?ce(e.elements,(e=>"standard"===this.ref.tier&&"standard"===e.tier||!e.tier)):e.elements;if(s.length>0){const n="premium"===this.ref.tier||"standard"===this.ref.tier&&"standard"===e.tier||!e.tier,r=new Zl(e.title||"",n&&(e.name?k(Ye(this.ref.styles,e.name)):!!ue(s,(e=>!x("name"in e&&e.name?Ye(this.ref.styles,e.name):void 0))))).disabled(!n).description(e.description||"").markdown().on((t=>{l.visible(t.isVisible&&t.isChecked),l.disabled(t.isDisabled),l.isVisible&&!l.isDisabled||(e.name?$e(this.ref.styles,e.name):ee(s,(e=>{"name"in e&&e.name&&$e(this.ref.styles,e.name)}))),e.name&&a(e.name,...ie(e.dependency&&(z(e.dependency.observe)&&e.dependency.observe||e.dependency.observe&&[e.dependency.observe])||[],(e=>e.property)))})),l=new qa([].concat(...ie(s,(s=>{const o="name"in s&&s.name||"",n=o&&(e.name&&`${e.name}.`||"")+o||"",c="premium"===this.ref.tier||"standard"===this.ref.tier&&"standard"===s.tier||!s.tier,u=Wl.addStyleElement(s,Wl.getValue(r.isChecked&&o?Ye(e.name?Ye(this.ref.styles,e.name):this.ref.styles,o):void 0,s),c,((t,i)=>{if(o){const l=e.name?Ye(this.ref.styles,e.name):this.ref.styles;r.isChecked&&i.isVisible&&(!i.isDisabled||i instanceof Zl)&&(!_(t)||t)?Ue(l||e.name&&Ue(this.ref.styles,e.name,{}),o,t):$e(l,o),a(n,...ie(s.dependency&&(z(s.dependency.observe)&&s.dependency.observe||s.dependency.observe&&[s.dependency.observe])||[],(e=>e.property)))}}));if(ee(u,(e=>e.indent(32))),n&&u.length>=1&&!(u[0]instanceof jl)){if(t[n])throw new Error(`Styles contract is invalid (duplicate property '${n}')`);t[n]=u[0]}return c&&s.dependency&&ee(z(s.dependency.observe)?s.dependency.observe:[s.dependency.observe],(e=>{e.property!==n&&(i[e.property]||(i[e.property]=[])).push(...ie(u,(e=>({action:s.dependency.action,observe:s.dependency.observe,control:e,get group(){return l}}))))})),u})))).visible(r.isChecked);if(e.name){if(t[e.name])throw new Error(`Styles contract is invalid (duplicate property '${e.name}')`);t[e.name]=r}n&&e.dependency&&ee(z(e.dependency.observe)?e.dependency.observe:[e.dependency.observe],(t=>{t.property!==e.name&&(i[t.property]||(i[t.property]=[])).push(J(e.dependency,{control:r}))})),l.controls.length>0&&(c.push(r,l),o.push({control:r,value:!1}))}})),c.length>0&&e.add(new Xa({title:ol("builder","Customize"),controls:c})),l(!0),n&&o.length>0&&e.add(new Xa({title:ol("builder","Danger zone"),controls:[n]}))}}class Gl extends ia{constructor(e){super(ia.configuration.width(e.width).height(e.height).left(e.margin).right(e.margin).top(e.margin).bottom(e.margin).animation(Br.Zoom).overlay().capture().style({overlay:{appearance:e.overlay}})),this.m_pStyle=e}static open(e,t){return e.component(new Gl(t),"popup")}markdown(e,t){e.markdown(es.parse(t,{features:Xi.Formatting}))}block(e,t,i,s){e.create("div",(e=>{e.create("div",(e=>e.text=t),this.m_pStyle.blocks.title),e.create("div",(e=>e.text=i),this.m_pStyle.blocks.subtitle),e.create("div",(e=>this.markdown(e,s)),this.m_pStyle.blocks.text)}),this.m_pStyle.blocks.appearance)}onRender(){this.layer.context.style(this.m_pStyle.appearance),this.layer.context.create("div",(e=>{e.text=ol("builder:tutorial","Cheatsheet")}),this.m_pStyle.title),this.layer.context.create("div",(e=>this.markdown(e,ol("builder:tutorial","**Tap**: A brief touch with a single finger or a mouseclick."))),this.m_pStyle.help),this.layer.context.create("div",(e=>this.markdown(e,ol("builder:tutorial","**Press**: A single finger held onto the screen or the left mouse button kept pressed."))),this.m_pStyle.help),this.layer.createLayer((e=>{e.context.create("div",(e=>{this.block(e,ol("builder:tutorial","Panning"),ol("builder:tutorial","Press + drag"),ol("builder:tutorial","To pan the drawing board when a form structure exceeds the screen size **press and drag** it in the desired direction. Or use the scrollbars.")),this.block(e,ol("builder:tutorial","Arranging"),ol("builder:tutorial","Press + hold + drag"),ol("builder:tutorial","To move an item on the drawing board **press + hold** it briefly to unlock, and **drag** it to the desired position. Release to drop and relock.")),this.block(e,ol("builder:tutorial","Zooming"),ol("builder:tutorial","Double tap (or pinch)"),ol("builder:tutorial","To swiftly zoom in on and out of a specific area on the drawing board **double tap** it. Pinch to zoom works for touch devices. Or use the slider.")),this.block(e,ol("builder:tutorial","Adding and editing"),ol("builder:tutorial","Single tap"),ol("builder:tutorial","To add pages and junctions **tap** the dotted squares and diamonds. To add blocks to a page **tap** the page footer. **Tap** any item to edit it."))}),this.m_pStyle.blocks.row)}),ta.configuration.scrollbars({style:this.m_pStyle.scrollbars}).top(this.m_pStyle.spacing)),this.layer.context.create("div",(e=>{xl(59690,e),Dr.single(e,(()=>this.layer.close()),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[this.m_pStyle.close.appearance,{[So.selector("hover")]:this.m_pStyle.close.hover,[So.selector("tap")]:this.m_pStyle.close.tap}])}}class $l extends Ri{constructor(e,t){super(e),this.m_pRef=t}get parent(){return this.matrix()}get workspace(){return this.grid}get collection(){return this.ancestor}get ref(){return this.m_pRef}set ref(e){this.m_pRef!==e&&(this.m_pRef=e,this.rerender("update"),this.workspace&&this.workspace.detectChange())}serialize(){return super.serialize()}deserialize(e,t){return super.deserialize(e,t)}delete(){return this.pop(),this}}yt([bi,pi],$l.prototype,"ref",null);class Ql extends Pi{constructor(e,t,i){super(e,t,i,"horizontal"),this.hook("OnDimensionChange","synchronous",(()=>this.detectChange())),this.hook("OnItemChange","synchronous",(()=>this.detectChange()))}detectChange(){const e=this.parent;if(e instanceof ql){const t=e.workspace;t&&t.detectChange()}}append(){return this.appendItem(new $l(this))}insert(){return this.insertItem(new $l(this))}insertBefore(e){return this.insertItemAtIndex(new $l(this),e.index)}insertAfter(e){return this.insertItemAtIndex(new $l(this),e.index+1)}deserialize(e,...t){return ee(t,(t=>{this.appendItem(new $l(this)).deserialize(t,e)})),this}}class ql extends Oi{constructor(e){super(e,Ql,$l),this.m_sName=""}get parent(){return this.matrix()}get workspace(){return this.grid}get tiles(){return this.children}get name(){return this.m_sName}set name(e){this.m_sName!==e&&(this.m_sName=e,this.rerender("update"),this.workspace&&this.workspace.detectChange())}onPushOrPop(){super.onPushOrPop(),this.rerender("refresh")}serialize(){return super.serialize("tiles")}deserialize(e,t){return super.deserialize(e,t,"tiles")}delete(){return this.pop(),this}}yt([bi,pi],ql.prototype,"name",null);class Xl extends Ei{constructor(e,t){super(e,t,"horizontal"),this.hook("OnDimensionChange","synchronous",(()=>t.detectChange())),this.hook("OnItemChange","synchronous",(()=>t.detectChange()))}append(){return this.appendItem(new ql(this))}insert(){return this.insertItem(new ql(this))}insertBefore(e){return this.insertItemAtIndex(new ql(this),e.index)}insertAfter(e){return this.insertItemAtIndex(new ql(this),e.index+1)}deserialize(e,...t){return ee(t,(t=>{this.appendItem(new ql(this)).deserialize(t,e)})),this}}class Jl extends zi{constructor(e){super(Xl,ql,e),this.m_sName="",this.m_bLoading=!1,this.m_pChange=new tt((()=>{this.m_bLoading||(this.emitHook("OnChange",{workspace:this}),this.onChanged&&this.onChanged(this))}),"frame")}static create(e){return new Jl(e)}get collections(){return this.children}get name(){return this.m_sName}set name(e){this.m_sName!==e&&(this.m_sName=e,this.emitHook("OnRename",{workspace:this}),this.rerender("update"),this.detectChange())}detectChange(){return this.m_pChange.invoke(),this}serialize(){return super.serialize("collections")}deserialize(e){return super.deserialize(e,new it,"collections")}load(e){return this.m_bLoading=!0,this.deserialize(e),Re((()=>{this.m_bLoading=!1})),this}save(){return this.serialize()}destroy(){this.m_bLoading=!0,super.destroy()}}yt([bi,pi],Jl.prototype,"name",null);var Kl,ec=Object.freeze({__proto__:null,Cards:Aa,Card:La,Features:Da,Feature:Ca,get CardMode(){return da},Controller:gl,L10nEditor:Bl,List:Ga,ListComponent:class extends ia{constructor(e,t=ia.configuration){super(t),this.m_pProperties=e}get list(){return this.m_pList}onRender(){this.m_pList=new Ga(this.m_pProperties,{parent:this.layer})}},ListColumn:Va,ListRow:Za,ListRowTyped:class extends Za{constructor(e,t){super(t),this.m_pData=e,this.m_pCopy=J(e)}get data(){return this.m_pData}set data(e){this.m_pData=e,this.update()}cell(e,t){return S(t)?(Ue(this.data,e.property,t),this.write(e.property,t),t):this.data[e.property]||super.cell(e,t)}update(){const e=J(this.m_pData);this.list&&this.list.eachColumn((t=>{this.m_pCopy[t.property]!==e[t.property]&&this.write(t.property,e[t.property])})),this.m_pCopy=e}},ListRowArray:class extends Za{constructor(e,...t){super(e),this.m_pCopy=[],this.m_pData=t}get data(){return this.m_pData}set data(e){this.m_pData=e,this.update()}cell(t,i){return e.inRange(t.offset,0,this.m_pData.length)?S(i)?(this.m_pData[t.offset]=i,this.write(t.property,i),i):this.m_pData[t.offset]:super.cell(t,i)}update(){this.list&&this.list.eachColumn((t=>{e.inRange(t.offset,0,this.m_pData.length)&&this.m_pCopy[t.offset]!==this.m_pData[t.offset]&&this.write(t.property,this.m_pData[t.offset])})),this.m_pCopy=this.m_pData}},ListRowStatic:class extends Za{constructor(e,i,...s){super(i),this.static(e),this.m_sSortColumns=`\n${t.iterateToString(s,"\n")}\n`}cell(e){return-1!==this.m_sSortColumns.indexOf(`\n${e.property}\n`)?this.label:void 0}},column:$a,identifier:function(e,t,i){if("Identifier"!==t){if(i&&N(i.value))throw new Error(`The decorator '@identifier' can only be used on properties, but '${t}' seems to be a method.`);Object.defineProperty(e,"Identifier",{get:function(){const e=Ye(this,t);return _(e)||A(e)?e:void 0},enumerable:!0,configurable:!0})}},update:function(...e){return(t,i,s)=>{St("update",t,i,s,(t=>t.target.refresh(...e)))}},refresh:function(e,t,i){St("refresh",e,t,i,(e=>e.target.refresh()))},Loader:Yl,MenuItemWithIcon:Il,MenuLinkWithIcon:kl,MenuSubmenuWithIcon:Nl,Menu:ga,MenuOption:Qr,MenuItem:Xr,MenuItemWithImage:fa,MenuLabel:qr,MenuSeparator:ya,MenuSubmenu:va,MenuSubmenuWithImage:Ma,MenuLink:wa,MenuLinkWithImage:class extends wa{constructor(e,t,i,s="blank"){super(t,i,s),this.m_sImage=e}draw(e,t,i){ba(e,t,this.m_sImage),super.draw(e,t,i),!i&&e.style.options&&e.style.options.image&&t.style(J(e.style.options.image.appearance,{"> span:first-child":e.style.options.image.image,[So.selector("disabled")]:e.style.options.image.disabled,[So.selector("hover")]:e.style.options.image.hover,[So.selector("selected")]:e.style.options.image.selected,[So.selector("tapped")]:e.style.options.image.tapped}),e.stylesheet)}},Scrollbars:Wr,scrollbarsButton:Gr,StylesEditor:Wl,Toolbar:ll,ToolbarComponent:cl,ToolbarItem:ul,ToolbarStatic:hl,ToolbarButton:dl,ToolbarMenu:pl,ToolbarLink:ml,Tutorial:Gl,Collection:ql,Collections:Xl,Tile:$l,Tiles:Ql,Workspace:Jl}),tc=Object.freeze({__proto__:null}),ic=Object.freeze({__proto__:null});class sc extends Ka{constructor(e,t){super(e,void 0,{style:t,styleName:"datetime",styleDefault:sc.style}),this.m_sZone="local",this.m_pWidth="auto",this.m_nFeatures=35,this.m_nYearFrom=1900,this.m_nYearTo=(new Date).getFullYear(),this.m_nInterval=5,this.m_strPlaceholder="",this.m_pPlanes=[]}get date(){if(A(this.value)){const e=new Date(this.value);if("UTC"===this.m_sZone){const t=new Date(0);return t.setFullYear(e.getUTCFullYear()),t.setMonth(e.getUTCMonth()),t.setDate(e.getUTCDate()),t.setHours(e.getUTCHours()),t.setMinutes(e.getUTCMinutes()),t.setSeconds(e.getUTCSeconds()),t.setMilliseconds(e.getUTCMilliseconds()),t}return e}return new Date}get static(){return this.m_pStatic}get value(){return this.output()}set value(e){this.input(e)}get hasValue(){return A(this.value)}get dayOfMonth(){return this.date.getDate()}set dayOfMonth(e){const t=this.date;t.setDate(e),this.value=t.getTime()}get month(){return this.date.getMonth()}set month(e){const t=this.date;for(t.setMonth(e);t.getMonth()!==e;)t.setTime(t.getTime()-864e5);this.value=t.getTime()}get year(){return this.date.getFullYear()}set year(t){const i=this.date,s=i.getMonth();for(t=e.range(t,this.m_nYearFrom,this.m_nYearTo),i.setFullYear(t);i.getMonth()!==s;)i.setTime(i.getTime()-864e5);this.value=i.getTime()}get hour(){return this.date.getHours()}set hour(e){const t=this.date;t.setHours(e),this.value=t.getTime()}get minute(){return this.date.getMinutes()}set minute(e){const t=this.date;t.setMinutes(e),this.value=t.getTime()}get second(){return this.date.getSeconds()}set second(e){const t=this.date;t.setSeconds(e),this.value=t.getTime()}createPlane(e,t){e.addSelector("plane"),this.m_pPlanes.push({element:e,focus:Ar.on(e,e,"no-auto-focus","auto-blur",(t=>{this.updateFocus(t.hasFocus,!0,e,e),e.selectorSafe("focus",t.hasFocus)}),this.tab,(()=>this.isInteractable&&this.hasValue))}),Lr.pointer(e,(t=>e.selectorSafe("hover",!this.isLocked&&t.isHovered))),Dr.on(e,(()=>t())),this.keyboard(e,(()=>(t(),!0)))}updatePlanes(){this.isRequired&&!this.hasValue&&(this.value=M.now);const e=this.hasValue;this.m_pDate&&this.m_pDate.selectorSafe("visible",e),this.m_pTime&&this.m_pTime.selectorSafe("visible",e),this.m_pSplitter&&this.m_pSplitter.selectorSafe("visible",e),this.m_pPlaceholder&&this.m_pPlaceholder.selectorSafe("visible",!e),this.m_pWeekday&&(this.m_pWeekday.text=za.dateTime("EEEE",this.date.getTime())),this.m_pDayOfMonth&&(this.m_pDayOfMonth.text=W(this.dayOfMonth)),this.m_pMonth&&(this.m_pMonth.text=za.dateTime("MMMM",this.date.getTime())),this.m_pYear&&(this.m_pYear.text=W(this.year)),this.m_pHour&&(this.m_pHour.text=t.padLeft(this.hour,"0",2)),this.m_pMinute&&(this.m_pMinute.text=t.padLeft(this.minute,"0",2)),this.m_pSecond&&(this.m_pSecond.text=t.padLeft(this.second,"0",2))}selectPlane(e,t,i){if(!this.isDisabled&&!this.isLocked&&P(e)>0){const s=this.hasFocus?ue(this.m_pPlanes,(e=>e.element===t)):void 0;i instanceof _i?ga.open(e,i,{position:"bottom",style:this.style&&this.style.plane?this.style.plane.selector:void 0,onOpen:()=>t.addSelectorSafe("selected"),onClose:()=>{t.removeSelectorSafe("selected"),s&&s.focus.focus()}}):ga.openAtElement(e,t,{position:i,style:this.style&&this.style.plane?this.style.plane.selector:void 0,onOpen:()=>t.addSelectorSafe("selected"),onClose:()=>{t.removeSelectorSafe("selected"),s&&s.focus.focus()}})}}input(e){if(A(e)){const t=new Date(e);if(14&this.m_nFeatures||t.setHours(0),10&this.m_nFeatures||t.setMinutes(0),2&this.m_nFeatures||t.setSeconds(0),t.setMilliseconds(0),"UTC"===this.m_sZone){const i=new Date(0);i.setUTCFullYear(t.getFullYear()),i.setUTCMonth(t.getMonth()),i.setUTCDate(t.getDate()),i.setUTCHours(t.getHours()),i.setUTCMinutes(t.getMinutes()),i.setUTCSeconds(t.getSeconds()),i.setUTCMilliseconds(0),e=i.getTime()}else e=t.getTime()}return super.input(e)}onDraw(e){const t=e.create("label",(t=>{this.hasLabel&&(this.m_pStatic=t.create("p",void 0,[{margin:0,padding:0},this.style?this.style.label:void 0,this.isSingleControlInForm&&this.style&&this.style.fused?this.style.fused.label:void 0,{width:"100%",userSelect:"none",cursor:"default"}],this.stylesheet)),this.m_pDateTime=t.create("div",(t=>{this.isFused||(t.selector("locked",this.isLocked),t.selector("required",this.isRequired),t.selector("failed",this.isFailed),t.selector("passed",this.isPassed),t.selector("awaiting",this.isAwaiting)),this.m_pPlaceholder=t.create("div",(e=>{e.selector("text",C(this.m_strPlaceholder)),this.style&&this.style.placeholder&&e.style([this.style.placeholder.appearance,{[So.selector("text")]:this.style.placeholder.text}],this.stylesheet),e.text=this.m_strPlaceholder})),1&this.m_nFeatures&&(this.m_pDate=t.create("div",(e=>{this.style&&this.style.date&&e.style(this.style.date,this.stylesheet),32&this.m_nFeatures&&(this.m_pWeekday=e.create("div",(e=>{this.createPlane(e,(()=>this.showWeekdaySelector()))}))),this.m_pDayOfMonth=e.create("div",(e=>{this.createPlane(e,(()=>this.showDayOfMonthSelector()))})),this.m_pMonth=e.create("div",(e=>{this.createPlane(e,(()=>this.showMonthSelector()))})),this.m_pYear=e.create("div",(e=>{this.createPlane(e,(()=>this.showYearSelector()))}))}))),14&this.m_nFeatures&&(1&this.m_nFeatures&&(this.m_pSplitter=t.create("div",(e=>e.addSelector("splitter")))),this.m_pTime=t.create("div",(e=>{this.style&&this.style.time&&this.style.time.appearance&&e.style(this.style.time.appearance,this.stylesheet),this.m_pHour=e.create("div",(e=>{this.createPlane(e,(()=>this.showHourSelector()))})),e.create("div",(e=>{this.style&&this.style.time&&this.style.time.hourMinuteSeparator&&e.style(this.style.time.hourMinuteSeparator,this.stylesheet)})),e.create("div",(e=>{10&this.m_nFeatures?(this.m_pMinute=e,this.createPlane(e,(()=>this.showMinuteSelector()))):(e.addSelector("plane"),e.text="00")})),2&this.m_nFeatures&&(e.create("div",(e=>{this.style&&this.style.time&&this.style.time.minuteSecondSeparator&&e.style(this.style.time.minuteSecondSeparator,this.stylesheet)})),this.m_pSecond=e.create("div",(e=>{this.createPlane(e,(()=>this.showSecondSelector()))})))}))),Lr.pointer(this.isFused?e:t,(e=>this.hover(e.isHovered))),Dr.on(this.isFused?e:t,(e=>{(void 0===this.value||!this.style||e.offset.x<=this.style.height)&&this.showOptions()}))}),[this.style?this.style.appearance:void 0,this.isFused&&this.style&&this.style.fused?this.style.fused.appearance:void 0,{display:"inline-block",maxWidth:"100%",width:this.isFused||"full"===this.m_pWidth?"100%":this.m_pWidth,height:this.style?this.style.height:"auto",overflow:"hidden",whiteSpace:"nowrap","> div":{display:"none","> div":{display:"inline-block",[So.selector("plane")]:this.style&&this.style.plane?this.style.plane.appearance:void 0,[So.selector("focus")]:this.style&&this.style.plane?this.style.plane.focus:void 0,[So.selector("hover")]:this.style&&this.style.plane?this.style.plane.hover:void 0,[So.selector("selected")]:this.style&&this.style.plane?this.style.plane.selected:void 0},[So.selector("visible")]:{display:"inline-block"},[So.selector("splitter")]:{width:this.style&&this.style.spacing?this.style.spacing:0}},[So.selector("awaiting")]:!this.isFused&&this.style?this.style.awaiting:void 0,[So.selector("failed")]:!this.isFused&&this.style?this.style.failed:void 0,[So.selector("passed")]:!this.isFused&&this.style?this.style.passed:void 0,[So.selector("locked")]:!this.isFused&&this.style?this.style.locked:void 0,[So.selector("hover")]:!this.isFused&&this.style?this.style.hover:void 0,[So.selector("focus")]:!this.isFused&&this.style?this.style.focus:void 0,[So.selector("required")]:!this.isFused&&this.style?this.style.required:void 0}],this.stylesheet),this.updatePlanes()}),{[So.selector("disabled")]:this.style?this.style.disabled:void 0},this.stylesheet);return this.isFused&&(this.style&&this.style.fused&&e.style({[So.selector("failed")]:this.style.fused.failed,[So.selector("passed")]:this.style.fused.passed,[So.selector("awaiting")]:this.style.fused.awaiting,[So.selector("locked")]:this.style.fused.locked,[So.selector("hover")]:this.style.fused.hover,[So.selector("focus")]:this.style.fused.focus,[So.selector("required")]:this.style.fused.required},this.stylesheet),e.selector("locked",this.isLocked),e.selector("required",this.isRequired),e.selector("failed",this.isFailed),e.selector("passed",this.isPassed),e.selector("awaiting",this.isAwaiting)),t}onChange(e){"required"===e&&this.updatePlanes(),super.onChange(e)}onUpdate(){const e=this.isFused?this.parent:this.m_pDateTime;e&&(e.selector("locked",this.isLocked),e.selector("required",this.isRequired),e.selector("hover",this.isHovered),e.selector("focus",this.hasFocus),e.selector("failed",this.isFailed),e.selector("passed",this.isPassed),e.selector("awaiting",this.isAwaiting)),this.m_pDateTime&&!this.isFused&&this.m_pDateTime.selector("focus",this.hasFocus),super.onUpdate()}onDisable(){ee(this.m_pPlanes,(e=>{e.element.removeSelectorSafe("hover"),e.element.removeSelectorSafe("focus")})),this.blur(),super.onDisable()}onLock(){ee(this.m_pPlanes,(e=>{e.element.removeSelectorSafe("hover"),e.element.removeSelectorSafe("focus")})),this.blur(),super.onLock()}onData(){this.updatePlanes(),this.m_fnChange&&this.m_fnChange(this),super.onData()}onFocusOptions(){ee(this.m_pPlanes,(e=>e.focus.update())),super.onFocusOptions()}focus(e="first"){if(this.isInteractable&&this.hasValue){const t=R(this.m_pPlanes,"first"===e?0:P(this.m_pPlanes)-1);if(t)return t.focus.focus()}return!1}focusTo(e){if(this.isInteractable&&this.hasValue&&this.hasFocus){let t=-1;if(ue(this.m_pPlanes,(e=>(t++,e.focus.hasFocus))),-1!==t){let i;for("previous"===e?t--:t++,i=R(this.m_pPlanes,t);i;){if(i.element.focus())return!0;"previous"===e?t--:t++,i=R(this.m_pPlanes,t)}}}return!1}blur(){ee(this.m_pPlanes,(e=>{e.element.blur()}))}width(t){return this.m_pWidth=A(t)?e.max(t,0):t,this}placeholder(e){return this.m_strPlaceholder!==e&&(this.m_strPlaceholder=e,this.m_pPlaceholder&&(this.m_pPlaceholder.selectorSafe("text",C(e)),this.m_pPlaceholder.text=e)),this}on(e){return this.m_fnChange=e,this}zone(e){return this.m_sZone=e,this}features(e){return this.m_nFeatures=e,15&this.m_nFeatures||(this.m_nFeatures|=35),this.redraw()}years(t,i){const s=2*(new Date).getFullYear();return this.m_nYearFrom=e.range(t,0,s),this.m_nYearTo=e.range(i,this.m_nYearFrom,s),this}interval(t){return this.m_nInterval=e.max(t,1),this}showOptions(){const e=this.isFused?this.parent:this.m_pDateTime;if(e){const t=[];!this.isRequired&&this.style&&this.style.labels&&t.push(new Xr(this.style.labels.enable,(()=>this.value=M.now),void 0!==this.value),new Xr(this.style.labels.disable,(()=>this.value=void 0),void 0===this.value)),-17&this.m_nFeatures&&this.style&&this.style.labels.reset&&(this.isRequired||t.push(new ya),t.push(new Xr(this.style.labels.reset,(()=>this.value=M.now)))),no((()=>{const i=e.rectangle;this.style&&(i.width=this.style.height),this.selectPlane(t,e,i)}))}}showWeekdaySelector(){if(this.m_pWeekday){const e=[],t=this.date;for(;0!==t.getDay();)t.setTime(t.getTime()-864e5);for(let i=0;i<7;i++){for(;t.getDay()!==i;)t.setTime(t.getTime()+864e5);const s=t.getTime();e.push(new Xr(za.dateFull(t.getTime()),(()=>this.value=s)))}this.selectPlane(e,this.m_pWeekday,"bottom")}}showDayOfMonthSelector(){if(this.m_pDayOfMonth){const e=[],t=this.date,i=t.getMonth();for(t.setDate(1);t.getMonth()===i;){const i=t.getDate();e.push(new Xr(`${i}`,(()=>this.dayOfMonth=i))),t.setDate(i+1)}this.selectPlane(e,this.m_pDayOfMonth,"bottom")}}showMonthSelector(){if(this.m_pMonth){const e=[],t=new Date;for(let i=0;i<12;i++)t.setMonth(i),e.push(new Xr(za.dateTime("MMMM",t.getTime()),(()=>this.month=i)));this.selectPlane(e,this.m_pMonth,"bottom")}}showYearSelector(){if(this.m_pYear){const e=[];for(let t=this.m_nYearTo;t>=this.m_nYearFrom;t--)e.push(new Xr(W(t),(()=>this.year=t)));this.selectPlane(e,this.m_pYear,"bottom")}}showHourSelector(){if(this.m_pHour){const e=[];for(let i=0;i<24;i++)e.push(new Xr(t.padLeft(i,"0",2),(()=>this.hour=i)));this.selectPlane(e,this.m_pHour,"bottom")}}showMinuteSelector(){if(this.m_pMinute){const e=[];for(let i=0;i<60;i+=this.m_nInterval)e.push(new Xr(t.padLeft(i,"0",2),(()=>this.minute=i)));this.selectPlane(e,this.m_pMinute,"bottom")}}showSecondSelector(){if(this.m_pSecond){const e=[];for(let i=0;i<60;i+=this.m_nInterval)e.push(new Xr(t.padLeft(i,"0",2),(()=>this.second=i)));this.selectPlane(e,this.m_pSecond,"bottom")}}}!function(e){e[e.Date=1]="Date",e[e.Time=2]="Time",e[e.TimeHoursOnly=4]="TimeHoursOnly",e[e.TimeHoursAndMinutesOnly=8]="TimeHoursAndMinutesOnly",e[e.NoResetOption=16]="NoResetOption",e[e.Weekday=32]="Weekday",e[e.Default=35]="Default"}(Kl||(Kl={}));const oc=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class nc extends Qa{constructor(e,t=!1,i){super({style:i,styleName:"HTML",styleDefault:nc.style}),this.m_sHTML=e,this.m_bInteractive=t}get HTML(){return this.m_sHTML}set HTML(e){this.m_sHTML!==e&&(this.m_sHTML=e,this.element&&(this.element.HTML=this.m_sHTML,this.update()))}onDraw(e){return e.create("div",(e=>{e.HTML=this.m_sHTML,xr.mode(e,this.m_bInteractive?"disable":"input")}),[{userSelect:"none",cursor:"default"},this.style?this.style.appearance:void 0,this.isFused&&this.style?this.style.fused:void 0,{width:"100%",boxSizing:"border-box"}],this.stylesheet)}update(){this.resize(),this.emitHook("OnUpdate",{HTML:this})}}var rc=Object.freeze({__proto__:null,Form:Xa,Binding:Ja,Control:Qa,DataControl:Ka,StaticControl:el,Group:qa,Button:Tl,Checkbox:Zl,DateTime:sc,get DateTimeFeatures(){return Kl},Dropdown:Hl,Email:class extends Al{constructor(e="",t){super("email",e,1,t),this.inputMode("email"),this.name("email"),this.placeholder("name@domain")}autoValidate(e=(()=>"pass")){return super.autoValidate(((t,i,s)=>{let o="unknown";if(this.isVisible&&!this.isDisabled)if(C(this.value)){if(o="initial"===i||"visible"===i||"focus"===i||this.hasFocus?"invalid":"fail",oc.test(this.value))return Jr.of({await:t=>e(this,i,t),promise:e=>s.return(e.payload)}),s}else this.isRequired&&(o="initial"===i||"visible"===i||"focus"===i||this.hasFocus?"invalid":"fail");return o}))}},HTML:nc,Notification:tl,Numeric:Vl,Radiobutton:Fl,Spacer:Ul,Static:jl,Text:Al});class ac extends Di{constructor(e,t,i,s){if(super(e,t),this.m_bGuides=!1,this.m_bMoving=!1,this.m_pLayer=i,this.m_bMovable=s,this.m_bFollowing=!1,this.m_bEnsuing=!1,t.ancestor&&t.ancestor.layout instanceof ac){const e=t.ancestor.layout;this.m_bFollowing=e.isMoving||e.isFollowing,this.m_bEnsuing=e.isEnsuing}}get layer(){return this.m_pLayer}get stylesheet(){return this.renderer.stylesheet}get style(){return this.renderer.style}get element(){return this.m_pElement}get moveArea(){return new Ii}get guides(){return this.m_pGuides}get isMoving(){return this.m_bMoving}get isFollowing(){return this.m_bFollowing&&!this.m_bMoving}get isEnsuing(){return this.m_bEnsuing&&!this.m_bMoving&&!this.m_bFollowing}get isHoverAllowed(){return!this.m_bMoving&&!this.m_bFollowing&&!this.m_bEnsuing}updateRulers(){this.m_pRulers&&ro((()=>{this.parent.rectangles.each(((e,t)=>{if(this.m_pRulers){const i=this.m_pRulers[t];i&&(i.x=e.left,i.y=e.top,i.width=e.width,i.height=e.height)}}),this.parent.zoom)}))}toggleRulers(){this.m_pRulers&&ro((()=>{this.parent.rectangles.each(((e,t)=>{if(this.m_pRulers){const e=this.m_pRulers[t];e&&(e.visible=!e.visible)}}))}))}enableRulers(e="rgba(255,0,0,0.5)",t=!0){this.m_pRulers||(this.parent.rectangles.each(((i,s)=>{this.m_pRulers=this.m_pRulers||{},this.m_pRulers[s]=dr.create("div",(o=>{o.positioning="absolute",o.width=i.width,o.height=i.height,o.set("border",`1px ${"children"===s?"dotted":"dashed"} ${e}`),o.set("contains","strict"),o.pointerEvents=!1,o.zIndex=dr.ZINDEX_ELEVATED,o.visible=t,o.position({x:i.left,y:i.top,translate:"accelerated"})}),this.layer.context)}),this.parent.zoom),Re((()=>{this.element&&Dr.double(this.element,(()=>this.toggleRulers()))})))}render(e){"render"!==e&&this.m_pElement?("refresh"===e&&this.m_pElement.destroyChildren(),ro((()=>{this.draw(this.parent.left,this.parent.top,this.parent.width,this.parent.height,this.parent.zoom,this.parent.z,"update"===e)}),!this.m_pElement.isInDOM)):(this.m_pElement&&(this.m_pElement.destroy(),this.m_pElement=void 0),dr.create("div",(e=>{this.m_pElement=e,e.style({position:"absolute",transformOrigin:"0 0 0",contain:"strict"},this.layer.stylesheet),e.width=this.parent.width,e.height=this.parent.height,e.zIndex=this.parent.z,e.position({x:this.parent.left,y:this.parent.top,z:this.parent.zoom,translate:"accelerated"}),this.draw(this.parent.left,this.parent.top,this.parent.width,this.parent.height,this.parent.zoom,this.parent.z,!1),this.m_bMovable&&(this.m_pMove=Vr.on({asset:this.element,area:()=>this.moveArea,onInit:e=>this.parent.onMoveInit(e.delay,e.offset),onStart:e=>this.parent.onMoveStart(e.offset),onMove:e=>this.parent.onMove(e.diffX,e.diffY,e.offset),onEnd:e=>this.parent.onMoveEnd(e.isDragging)}))}),this.layer.context))}position(e,t,i,s){ro((()=>{this.element&&this.element.position({x:e,y:t,z:i})}),!this.element||!this.element.isInDOM),this.updateRulers()}resize(e,t,i,s){"zoom"!==s&&ro((()=>{this.element&&(this.element.width=e,this.element.height=t)}),!this.element||!this.element.isInDOM),this.updateRulers()}zIndex(e){ro((()=>{this.element&&(this.element.zIndex=e)}),!this.element||!this.element.isInDOM),super.zIndex(e)}moving(e){if(this.m_bMoving!==e&&(this.m_bMoving=e,!e||this.isMoving)){if(this.parent.forEachDescendant((t=>{const i=t.layout;i&&i.following(e)})),this.parent.grid){const t=this.parent.grid.layout;t&&t.ensuing(e)}return!0}return!1}following(e){return!(this.m_bFollowing===e||(this.m_bFollowing=e,e&&!this.isFollowing)||(this.parent.forEachDescendant((t=>{const i=t.layout;i&&i.following(e)})),0))}ensuing(e){return!(this.m_bEnsuing===e||(this.m_bEnsuing=e,e&&!this.isEnsuing)||(this.parent.forEachDescendant((t=>{const i=t.layout;i&&i.ensuing(e)})),0))}onElevate(e){ro((()=>{this.element&&(this.element.elevated=e)}),!this.element||!this.element.isInDOM),super.onElevate(e)}onIsMoveIn(e,t,i){return this.parent.rectangles.isCoordinateIn(e,t)}onMoveStart(e){return this.moving(!0),this.onGuides(),super.onMoveStart(e)}onMoveEnd(e){this.moving(!1),this.guidesDestroy(),super.onMoveEnd(e)}onGuides(t,i=!1){if(this.guidesDestroy(),this.parent.forEachDescendant((e=>{const t=e.layout;t&&t.onGuides()})),this.m_bGuides=!1,this.m_pGuides=t,this.m_pGuides){if(this.m_pGuides.pointerEvents=!1,i&&this.parent.ancestor){let t=0;this.parent.ancestor.forEachDescendantRecursive((i=>{t=e.max(t,i.z+1)})),this.m_pGuides.zIndex=t}else this.m_pGuides.zIndex=this.parent.z;this.parent.guides()}this.m_bGuides=!0}onGuidesChange(e,t,i,s,o,n){ro((()=>{this.guides&&(this.guides.position({x:t,y:i,z:n,translate:"accelerated"}),this.guides.width=s,this.guides.height=o)}),!this.m_bGuides||!this.guides||!this.guides.isInDOM),super.onGuidesChange(e,t,i,s,o,n)}guidesDestroy(){this.parent.forEachDescendant((e=>{const t=e.layout;t&&t.guidesDestroy()})),this.m_pGuides&&(this.m_pGuides.destroy(),this.m_pGuides=void 0)}destroy(){this.m_pMove&&this.m_pMove.cancel(),ee(this.m_pRulers,(e=>{e.destroy()})),this.guidesDestroy(),this.m_pElement&&(this.m_pElement.destroy(),this.m_pElement=void 0)}}class lc extends class{constructor(...e){this.m_pLayouts=e}get grid(){return this.m_pGrid}set grid(e){e&&e!==this.m_pGrid&&(this.m_pGrid=e,this.onInit())}provider(e){const t=ue(this.m_pLayouts,(t=>e instanceof t.type));if(t)return t;throw new Error("Grid.Renderer: No layout provider found for the specified type.")}onInit(){}onResize(e,t,i,s){}onMoveStart(){}onMove(){}onMoveEnd(){}}{constructor(t,i,s){if(super(...t),this.m_bZooming=!1,this.m_bMoving=!1,!s)throw new Error("Layers.Grid.Renderer: No valid styles supplied.");this.m_pLayer=i,this.m_pStyle=s,i.wait(),i.hook("OnCalculated","synchronous",(()=>{this.render(),ke((()=>i.done()))})),i.hook("OnDestroy","synchronous",(()=>this.destroy())),i.scroll&&(i.scroll.onDimensions=()=>{const e=this.grid;return e?new Ni(e.rectangles.dimensions.width,e.rectangles.dimensions.height):new Ni},i.scroll.onZoomStart=e=>this.onZoomStart(e),i.scroll.onZoom=e=>this.onZoom(e),i.scroll.onZoomEnd=e=>this.onZoomEnd(e),i.scroll.onZoomBounderies=(t,i)=>e.range(t,i.zoomFit,1),i.scroll.onZoomWheel=(e,t)=>(1-t.zoomFit)/10)}get layer(){return this.m_pLayer}get stylesheet(){return this.layer.stylesheet}get style(){return this.m_pStyle}get isZooming(){return this.m_bZooming}get isMoving(){return this.m_bMoving}destroy(){const e=this.grid;e&&e.destroy()}layout(e){return new(this.provider(e).layout)(this,e,this.layer)}onResize(e,t,i,s){this.layer.scroll&&"zoom"!==s&&!this.isMoving&&this.layer.scroll.update(),super.onResize(e,t,i,s)}onZoomStart(e){this.m_bZooming=!0}onZoom(e){const t=this.grid;t&&t.forEachDescendantRecursive((t=>{t.zoom=e}))}onZoomEnd(e){this.m_bZooming=!1}onMoveStart(){this.m_bMoving=!0,this.layer.scrollbars&&this.layer.scrollbars.show(!0),super.onMoveStart()}onMoveEnd(){this.m_bMoving=!1,this.layer.scrollbars&&this.layer.scrollbars.show(!1),this.layer.scroll&&this.layer.scroll.update(),super.onMoveEnd()}}class cc extends ac{moving(e){return!!super.moving(e)&&(this.element&&this.element.selector("moving",this.isMoving),!0)}following(e){return!!super.following(e)&&(this.element&&this.element.selector("following",this.isFollowing),!0)}ensuing(e){return!!super.ensuing(e)&&(this.element&&this.element.selector("ensuing",this.isEnsuing),!0)}animate(e){const t=this.parent.grid;if(t&&t.layout instanceof cc){const e=t.layout.style.map.animateDuration||0;e>0&&(t.layout.ensuing(!0),De((()=>{t.layout instanceof cc&&t.layout.ensuing(!1)}),e))}return e()}scrollIntoView(){const e=this.layer.scroll,t=this.element;e&&t&&e.scrollToAsset(t,!0,this.style.map.spacing&&this.style.map.spacing.left,this.style.map.spacing&&this.style.map.spacing.top,this.style.map.spacing&&this.style.map.spacing.right,this.style.map.spacing&&this.style.map.spacing.bottom)}}class uc extends gl{constructor(e,t,i){if(super(e,t,ol("builder","Branch properties"),"compact",t.layout instanceof cc&&t.layout.style),t.layout instanceof cc){const s=t.layout.renderer;e.hook("OnShow","framed",(()=>s.onEdit("start","branch",t))),e.hook("OnClose","framed",(()=>s.onEdit("end","branch",t))),e.hook("OnClose","synchronous",(()=>{uc.m_pEditor&&uc.m_pEditor.branch===t&&(uc.m_pEditor=void 0)})),i&&t.layout.scrollIntoView()}}static open(e,t,i=!1){return new uc(e,t,i)}static openPanel(e,t,i=!1){if(this.m_pEditor&&this.m_pEditor.branch===t)return this.m_pEditor.layer;const s=t.layout&&t.layout.style;return(this.m_pEditor={branch:t,layer:e.createPanel((e=>{this.open(e,t,i)}),ta.configuration.width(s?s.forms.width.small:0).animation(Br.Zoom).autoCloseChildPanels("stroke"))}).layer}get branch(){return this.ref}onCards(e){var t;const i=(null===(t=this.branch.layout)||void 0===t?void 0:t.renderer).supportsEpilogue,s=[],o=new Tl(ol("builder","Edit closing message")).indent(32).on((()=>{this.branch.layout instanceof Cc&&this.branch.layout.epilogue()})).visible(i&&"epilogue"===this.branch.terminator);this.branch.map&&this.branch.map.forEach((e=>{(C(e.name)||this.branch.jump===e)&&s.push({label:C(e.name)?e.name:ol("builder","Unnamed section"),value:e})}),"clusters",this.branch,!0),e.add(new Xa({title:ol("builder","Name"),controls:[new Al("singleline",Al.bind(this.branch,"name","",void 0,(e=>e||void 0))).autoFocus().autoSelect().bind((e=>this.branch.hook("OnRename","asynchronous",(()=>e.refresh()),e))).unbind((e=>this.branch.unhookContext(e)))]})),e.add(new Xa({title:ol("builder","Follow this branch"),controls:[new Fl([{label:ol("builder","For the first condition match (logical OR)"),value:"first"},{label:ol("builder","When all conditions match (logical AND)"),value:"all"},{label:ol("builder","When none of the conditions match (logical NOT)"),value:"none"},{label:ol("builder","For each condition match (iteration)"),value:"each"}],Fl.bind(this.branch,"culling","first")).bind((e=>this.branch.hook("OnCullingChange","asynchronous",(()=>e.refresh()),e))).unbind((e=>this.branch.unhookContext(e)))]})),e.add(new Xa({title:ol("builder","At the end of this branch"),controls:[new Fl([{label:ol("builder","Continue with the next section or branch"),value:"continuous"},{label:ol("builder","Jump to a specific point"),value:"jump",visible:P(s)>0},{label:ol("builder","Jump to the end"),value:"abort"},...i?[{label:ol("builder","End with closing message"),value:"epilogue"}]:[]],Fl.bind(this.branch,"terminator","continuous")).on((e=>{o.visible("epilogue"===e.value),n.visible("jump"===e.value)})).bind((e=>this.branch.hook("OnTerminatorChange","asynchronous",(()=>{e.refresh();const t=n.control(0);t&&t.refresh()}),e))).unbind((e=>this.branch.unhookContext(e))),o]}));const n=e.add(new Xa({title:ol("builder","Jump to"),controls:[new Hl(s,Hl.bind(this.branch,"jump",void 0))]})).visible("jump"===this.branch.terminator)}}class hc{constructor(e,t,i,s=!1,o=!1){this.m_pTemplates=[],this.m_pNode=e,this.m_sLabel=t,this.m_sIcon=i,this.m_bMarkdown=s,this.m_bSeparator=o}static create(e){return new hc(e)}get templates(){return ie(this.m_pTemplates,(e=>e instanceof hc?{label:e.m_sLabel||"",markdown:e.m_bMarkdown,icon:e.m_sIcon,templates:e.templates,separator:e.m_bSeparator}:e))}template(e){const t=e.markdown||e.label||e.condition.label,i=!!e.markdown,s=e.icon||e.condition.icon,o=e.props&&e.props.slot instanceof Yi&&e.props.slot.pipeable?"pipe":"branch"===e.burst?"branch":e.burst?"branches":void 0,n=e.separator;return this.m_pTemplates.push({label:t,markdown:i,icon:s,burst:o,separator:n,command:(t,i)=>{const s=t.assignBlock(e.condition);s&&(s.node=this.m_pNode,ee(e.props,((e,t)=>Fe(s,t,e)),{keys:!0}),!i&&Q(e.autoOpen,s instanceof Zs&&s.type.autoOpen||!1)&&s.condition.layout instanceof Wh&&s.condition.layout.edit())}}),this}custom(e,t,i,s=!1){return this.m_pTemplates.push({label:e,markdown:s,icon:i,command:t}),this}group(e,t,i,s){const o=new hc(this.m_pNode,e,t,i,s);return this.m_pTemplates.push(o),o}}let dc;function pc(e){return dc&&dc[e]||void 0}function mc(e){if(e instanceof Ds)return e;if(e instanceof ys){if(!e.cluster)throw new Error("Tripetto: Node not connected to cluster!");e=e.cluster}return e instanceof Ms&&(e=e.branches.append()),e.conditions.append()}function gc(e){const t=hc.create(e.node);return wt("conditions",e,Fe(e,"orchestratorForConditions",t)),Fe(e,"orchestratorForConditions",void 0),t.templates}function bc(e){e instanceof Zs&&e.type.autoOpen&&e.condition.layout instanceof Wh&&e.condition.layout.edit()}function fc(e,t){if(e instanceof ys){const i=[],s=xa(e.block instanceof Sa&&gc(e.block)||[],(()=>t.animate((()=>mc(e)))),[],i);if(e.cluster&&i.length>1){const o=e.cluster;if(s.push(new ya),ue(i,(e=>"branches"!==e.burst))){const e=ue(i,(e=>"pipe"===e.burst));s.push(new Nl(58923,ol("builder","Quick add (%1)",il.locale.number(i.length)),[new Il(59721,ol("builder","In separate branches"),(()=>t.animate((()=>{ee(i,(e=>{const t=o.branches.append();t.name=e.label,e.execute(t.conditions.append(),!0)}))})))),new Il(e?59118:59117,ol("builder","In a single branch"),(()=>t.animate((()=>{const t=o.branches.append();t.culling=e?"each":"first",ee(i,(i=>{i.burst===(e?"pipe":"branch")&&i.execute(t.conditions.append(),!0)}))}))))]))}else s.push(new Il(58923,ol("builder","Quick add (%1)",il.locale.number(i.length)),(()=>t.animate((()=>{ee(i,(e=>{const t=o.branches.append();t.name=e.label,e.execute(t.conditions.append(),!0)}))})))))}return s}const i=[],s=e.map,o=cs.active.conditionBlocks.for("*"),n=cs.active.conditionBlocks.for("cluster"),r=cs.active.conditionBlocks.for("node"),a=cs.active.conditionBlocks.for("branch"),l=e instanceof Ds||e instanceof js?e.cluster:e;if(l&&l.nodes.each((s=>{if(s.block instanceof Sa){const o=[],n=xa(gc(s.block),(()=>t.animate((()=>mc(e)))),[],o);if(n.length>0){if(!(e instanceof Ds)&&o.length>1)if(n.push(new ya),e instanceof Ms&&ue(o,(e=>"branches"!==e.burst))){const e=ue(o,(e=>"pipe"===e.burst));n.push(new Nl(58923,ol("builder","Quick add (%1)",il.locale.number(o.length)),[new Il(59721,ol("builder","In separate branches"),(()=>t.animate((()=>{const e=s.cluster;e&&ee(o,(t=>{const i=e.branches.append();i.name=t.label,t.execute(i.conditions.append(),!0)}))})))),new Il(e?59118:59117,ol("builder","In a single branch"),(()=>t.animate((()=>{const t=s.cluster;if(t){const i=t.branches.append();i.culling=e?"each":"first",ee(o,(t=>{t.burst===(e?"pipe":"branch")&&t.execute(i.conditions.append(),!0)}))}}))))]))}else n.push(new Il(58923,ol("builder","Quick add (%1)",il.locale.number(o.length)),(()=>t.animate((()=>{ee(o,(t=>t.execute(mc(e),!0)))})))));i.push(new Ma(`${s.block.icon}`,s.alias||s.label||s.block.label,n))}}})),i.length>0&&i.push(new ya),e instanceof Ms&&i.push(new Il(59719,ol("builder","Empty branch"),(()=>t.animate((()=>e.branches.append()))))),o.length>0&&(ee(o,(s=>{i.push(new fa(s.icon,s.label,(()=>t.animate((()=>bc(mc(e).assignBlock(s)))))))})),e instanceof js&&i.push(new ya)),s&&i.push(new Nl(59767,ol("builder","Blocks"),(()=>{const i=[],o={};return s.forEach((i=>{if(i.block instanceof Sa){const s=[],n=xa(gc(i.block),(()=>t.animate((()=>mc(e)))),[],s);if(n.length>0){let r="",a=i.cluster;for(;a&&""===r;)r=a.name||"",a=a.branch&&a.branch.cluster;if(!(e instanceof Ds)&&s.length>1)if(n.push(new ya),e instanceof Ms&&ue(s,(e=>"branches"!==e.burst))){const e=ue(s,(e=>"pipe"===e.burst));n.push(new Nl(58923,ol("builder","Quick add (%1)",il.locale.number(s.length)),[new Il(59721,ol("builder","In separate branches"),(()=>t.animate((()=>{const e=i.cluster;e&&ee(s,(t=>{const i=e.branches.append();i.name=t.label,t.execute(i.conditions.append(),!0)}))})))),new Il(e?59118:59117,ol("builder","In a single branch"),(()=>t.animate((()=>{const t=i.cluster;if(t){const i=t.branches.append();i.culling=e?"each":"first",ee(s,(t=>{t.burst===(e?"pipe":"branch")&&t.execute(i.conditions.append(),!0)}))}}))))]))}else n.push(new Il(58923,ol("builder","Quick add (%1)",il.locale.number(s.length)),(()=>t.animate((()=>{ee(s,(t=>t.execute(mc(e),!0)))})))));(o[r]||(o[r]=[])).push(new Ma(`${i.block.icon}`,i.alias||i.label||i.block.label,n))}}}),"nodes"),ee(o,((e,t)=>{""!==t&&i.push(new qr(t),...e)}),{keys:!0}),o[""]&&i.push(new qr(ol("builder","Unnamed sections")),...o[""]),i.length>0?i:[new Il(59674,ol("builder","No blocks available..."),void 0,!0)]}))),n.length>0||r.length>0||a.length>0){const o=[];n.length>0&&(o.push(new qr(ol("builder","Sections"))),ee(n,(i=>{o.push(new Ma(i.icon,i.label,(()=>{const o=[],n=e instanceof Ms&&e||void 0;return n&&o.push(new Il(59256,n.name||ol("builder","This section"),(()=>t.animate((()=>{const t=mc(e).assignBlock(i);t&&(t.cluster=n,bc(t))}))))),s&&s.forEach((s=>{s.name&&(n&&1===o.length&&o.push(new ya),o.push(new Xr(s.name,(()=>t.animate((()=>{const t=mc(e).assignBlock(i);t&&(t.cluster=s)}))))))}),"clusters"),o})))}))),r.length>0&&(o.push(new qr(ol("builder","Nodes"))),ee(r,(i=>{o.push(new Ma(i.icon,i.label,(()=>{const o=[],n={};return s&&s.forEach((s=>{if(s.label){let o="",r=s.cluster;for(;r&&""===o;)o=r.name||"",r=r.branch&&r.branch.cluster;(n[o]||(n[o]=[])).push(new Xr(s.alias||s.label,(()=>t.animate((()=>{const t=mc(e).assignBlock(i);t&&(t.node=s,bc(t))})))))}}),"nodes"),ee(n,((e,t)=>{""!==t&&o.push(new qr(t),...e)}),{keys:!0}),n[""]&&o.push(new qr(ol("builder","Unnamed sections")),...n[""]),o})))}))),a.length>0&&(o.push(new qr(ol("builder","Branches"))),ee(a,(i=>{o.push(new Ma(i.icon,i.label,(()=>{const o=[],n={};if(s&&s.forEach((s=>{if(s.name&&s.cluster){let o="",r=s.cluster;for(;r&&""===o;)o=r.name||"",r=r.branch&&r.branch.cluster;(n[o]||(n[o]=[])).push(new Xr(s.name,(()=>t.animate((()=>{const t=mc(e).assignBlock(i);t&&(t.branch=s,bc(t))})))))}}),"branches"),ee(n,((e,t)=>{""!==t&&o.push(new qr(t),...e)}),{keys:!0}),n[""]&&o.push(new qr(ol("builder","Unnamed sections")),...n[""]),e instanceof js||e instanceof Ds){const s=e instanceof js?e:e.branch;s&&(o.length&&o.splice(0,0,new ya),o.splice(0,0,new Il(59256,s.name||ol("builder","This branch"),(()=>t.animate((()=>{const t=mc(e).assignBlock(i);t&&(t.branch=s,bc(t))}))))))}return o.length>0?o:[new Il(59674,ol("builder","No branches available..."),void 0,!0)]})))}))),o.length&&i.push(new Nl(59321,ol("builder","Other"),o))}if(i.length>0){const e=pc("conditions");e&&i.push(new ya,new kl(59699,ol("builder","Help with branch conditions"),e,"blank"))}return i}function yc(e){let t=0,i=0,s=0,o=0,n=0,r=0,a=0,l=0;if("horizontal"===e.orientation){if(i=e.thickness/2,"center"===e.alignment){const t=e.spacing?e.spacing.top:0;i=t+(e.height-(e.spacing?e.spacing.bottom:0)-t)/2}else"bottom"===e.alignment?i=e.height-(e.spacing?e.spacing.bottom:0)-i:i+=e.spacing?e.spacing.top:0;o=r=l=i,t+=e.spacing&&e.spacing.left>0?e.spacing.left:0,t+="begin-with-gap"===e.dotted?e.thickness:0,e.break?(s=e.break.from,n=s+e.break.size+("begin-with-gap"===e.dotted?e.thickness:0),a=e.width-(e.spacing?e.spacing.right:0)):s=e.width-(e.spacing?e.spacing.right:0)}else{if(t=e.thickness/2,"center"===e.alignment){const i=e.spacing?e.spacing.left:0;t=i+(e.width-(e.spacing?e.spacing.right:0)-i)/2}else"right"===e.alignment?t=e.width-(e.spacing?e.spacing.right:0)-t:t+=e.spacing?e.spacing.left:0;s=n=a=t,i+=e.spacing&&e.spacing.top>0?e.spacing.top:0,i+="begin-with-gap"===e.dotted?e.thickness:0,e.break?(o=e.break.from,r=o+e.break.size+("begin-with-gap"===e.dotted?e.thickness:0),l=e.height-(e.spacing?e.spacing.bottom:0)):o=e.height-(e.spacing?e.spacing.bottom:0)}const c=` stroke="${e.color}"`,u=` stroke-width="${e.thickness}"`,h=e.dotted&&"no"!==e.dotted?` stroke-dasharray="${e.thickness},${e.thickness}"`:"";let d=`<path d="M${t},${i}H${s}V${o}`;switch(n===a&&r===l||(d+=`M${n},${r}H${a}V${l}`),e.arrows){case"begin":"vertical"===e.orientation?d+=`M${t-4},${i+4+e.thickness/2}l4,-4l4,4`:d+=`M${t+4+e.thickness/2},${i-4}l-4,4l4,4`;break;case"end":"vertical"===e.orientation?d+=`M${s-4},${(l||o)-4-e.thickness/2}l4,4l4,-4`:d+=`M${(a||s)-4-e.thickness/2},${o-4}l4,4l-4,4`}return d+=`" fill="none"${c}${u}${h} stroke-miterlimit="10" />`,d}function vc(e,t){const i=`${e}`;if(0===i.indexOf("data:image/svg+xml;base64,")){const e=atob(i.substr(26)).replace("</svg>",`<style type="text/css">.tripetto-fill{fill:${t};}.tripetto-stroke{stroke:${t};}</style></svg>`);return`data:image/svg+xml;base64,${btoa(e)}`}return i}function Mc(e){const t=e.match(/\/\/(?:www\.)?vimeo\.com\/(?:channels\/staffpicks\/)?([-\w]+)/i);return t&&2===t.length&&t[1]||""}function wc(e){const t=e.match(/youtu(?:.*\/v\/|.*v\=|\.be\/)([A-Za-z0-9_\-]{11})/);return t&&2===t.length&&t[1]||""}function xc(e,t){var i,s,o,n;const r=[],a=e instanceof ws?e:e.map,l=t&&t.mode||"all",c=t&&t.pipes||"include",u=t&&t.references&&t.references.length>0&&t.references||void 0,h=t&&t.include&&t.include.length>0&&t.include||void 0,d=t&&t.exclude&&t.exclude.length>0&&t.exclude||void 0,p=t&&t.blocks&&t.blocks.length>0&&ie(t.blocks,(e=>_(e)?e:e.identifier))||void 0;if(a){const t=e instanceof Sa?e.node:e instanceof ys?e:e instanceof Zs&&"validated"!==l&&"self"!==l&&e.node||void 0,m=!t&&e instanceof Zs?e.condition:e instanceof Ds?e:void 0;let g=t;if(m){const e=[],t=i=>{if(!i)return;let s;return e.push(i),i.branches.reverseEach((i=>{var o;let n=i.clusters.lastItem;for(;n;){if(s=!ue(e,(e=>e===n))&&t(n)||void 0,s)return!0;n=(null==n?void 0:n.predecessor)||(null===(o=n.branch)||void 0===o?void 0:o.cluster)}return!1})),s||i.nodes.lastItem};g=(null===(i=m.cluster)||void 0===i?void 0:i.nodes.lastItem)||t((null===(s=m.cluster)||void 0===s?void 0:s.predecessor)||(null===(n=null===(o=m.cluster)||void 0===o?void 0:o.branch)||void 0===n?void 0:n.cluster))}if(!g&&("validated"===l||"self"===l))return[];a.forEach((e=>{if("validated"===l&&e===t)return!0;if("exclude"===l&&e===g)return!1;if(e.block instanceof Sa&&(!p||ue(p,(t=>e.blockTypeIdentifier===t)))){const t=e.block,i=[],s={};if(t.slots.each((e=>{const o=(t.slots.count<=1||!t.slots.each((t=>t.alias===e.alias&&t.id!==e.id))?e.alias:"")||e.name||e.label||"";if(o&&(!T(e.pipeable)||e.pipeable)&&(!h||ue(h,(t=>e.id===t)))&&(!d||!ue(d,(t=>e.id===t)))){if("exclude"!==c&&e.pipeable&&!T(e.pipeable)){const o=e.pipeable.pipe||"";if("exclude-consumed-slots"===c)return;if(u&&o&&!ue(u,(e=>o===e)))return;if(s[o]||(i.push({type:"pipe",block:t,id:e.pipe(),reference:o,slot:e,label:e.pipeable.label||e.label||"",alias:e.pipeable.alias}),s[o]=!0),"include-consumed-slots"!==c)return}"only"!==c&&(u&&!ue(u,(t=>e.reference===t))||i.push({type:"slot",block:t,id:e.id,reference:e.reference,slot:e,label:o,alias:e.alias||e.name||void 0}))}})),i.length>0){const s=1===i.length&&("dynamic"!==i[0].slot.kind||"pipe"===i[0].type),o=(s?i[0].alias:"")||Ve(t,"alias")||e.label;o&&r.push({type:s&&i[0].type||"group",block:t,label:o,icon:t.icon,id:s&&i[0].id||void 0,reference:s&&i[0].reference||void 0,slot:s&&i[0].slot||void 0,slots:!s&&i||void 0})}}return"self"===l&&e===t||("validated"===l||"self"===l)&&e===g}),"nodes")}return r.length>0&&r||void 0}function Sc(e){return e instanceof Vi?59801:e instanceof Qi||e instanceof qi?59816:e instanceof Gi||e instanceof $i?"calculator"===e.reference?59238:"counter"===e.reference?59694:"score"===e.reference?59105:59771:e instanceof Wi?59273:59158}const Ic=(e,t,i)=>(s,o)=>{let n;const r=[];if(e instanceof Ys){if(!(e.ref instanceof ys||e.ref instanceof Sa||e.ref instanceof Ds||e.ref instanceof Zs||e.ref instanceof ws))return;e=e.ref}ee(xc(e,{mode:t,pipes:"include-consumed-slots"}),(e=>{var t,i,o;if((null===(t=e.block.node.cluster)||void 0===t?void 0:t.id)!==n){const t=null===(i=e.block.node.cluster)||void 0===i?void 0:i.name;r.length>0&&r.push(new ya),t&&r.push(new qr(t)),n=null===(o=e.block.node.cluster)||void 0===o?void 0:o.id}r.push(e.slots?new Ma(`${e.icon}`,e.label,(e=>{const t=[],i=ce(e,(e=>"pipe"===e.type));return i.length>0&&(1===i.length?t.push(new Il(58923,ol("builder","Automatic text value"),(()=>s(i[0].id)))):t.push(...ie(i,(e=>new Il(59772,e.label,(()=>s(e.id))))))),ee([ce(e,(e=>{var t;return"slot"===e.type&&"static"===(null===(t=e.slot)||void 0===t?void 0:t.kind)})),ce(e,(e=>{var t;return"slot"===e.type&&"dynamic"===(null===(t=e.slot)||void 0===t?void 0:t.kind)})),ce(e,(e=>{var t;return"slot"===e.type&&"feature"===(null===(t=e.slot)||void 0===t?void 0:t.kind)})),ce(e,(e=>{var t;return"slot"===e.type&&"meta"===(null===(t=e.slot)||void 0===t?void 0:t.kind)}))],(e=>{e.length>0&&(t.length>0&&t.push(new ya),t.push(...ie(e,(e=>e.slot?new Il(Sc(e.slot),e.label,(()=>s(e.id))):new Xr(e.label,(()=>s(e.id)))))))})),t})(e.slots)):new fa(`${e.icon}`,e.label,(()=>s(e.id))))}));const a=i&&i(r,s)||r;if(a.length>0){const e=ga.openAtElement(a,o,{position:"bottom",autoFocus:!1,onClosing:()=>{e.isOptionTapped||s()}});return t=>"ArrowDown"===t?(e.focus(),"capture"):(e.close(!0),"Escape"===t?"cancel":"continue")}},kc=Ic,Nc=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$|(^\@[A-Fa-f0-9]{64})/i,_c=(e,t)=>[new fa("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTcuNSAxOS4wODVjLS40MDEgMC0uNzc4LS4xNTYtMS4wNjEtLjQzOGwtNS4wODYtNS4wODZjLS4yODMtLjI4My0uNDM4LS42NTktLjQzOC0xLjA2MXMuMTU2LS43NzguNDM4LTEuMDYxbDguNTg2LTguNTg2Yy40ODctLjQ4NyAxLjM3Mi0uODU0IDIuMDYxLS44NTRoNC41Yy44MjcgMCAxLjUuNjczIDEuNSAxLjV2NC41YzAgLjY4OC0uMzY3IDEuNTc0LS44NTMgMi4wNjFsLTguNTg2IDguNTg2YTEuNDg4IDEuNDg4IDAgMCAxLTEuMDYxLjQzOHpNMTIgM2MtLjQxNSAwLTEuMDYuMjY3LTEuMzUzLjU2MWwtOC41ODYgOC41ODZjLS4wOTQuMDk0LS4xNDUuMjE5LS4xNDUuMzU0cy4wNTIuMjYuMTQ1LjM1M2w1LjA4NiA1LjA4NmMuMDk0LjA5NC4yMTkuMTQ1LjM1NC4xNDVzLjI2LS4wNTIuMzU0LS4xNDVsOC41ODYtOC41ODZjLjI5My0uMjkzLjU2MS0uOTM5LjU2MS0xLjM1NFYzLjVhLjUuNSAwIDAgMC0uNS0uNWgtNC41eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48cGF0aCBkPSJNMTQuNSA3Yy0uODI3IDAtMS41LS42NzMtMS41LTEuNVMxMy42NzMgNCAxNC41IDRzMS41LjY3MyAxLjUgMS41UzE1LjMyNyA3IDE0LjUgN3ptMC0yYS41LjUgMCAxIDAgMCAxIC41LjUgMCAwIDAgMC0xeiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48L3N2Zz4=",ol("builder","Identification number"),(()=>t(ei("id")))),...e.length>0?[new ya,...e]:[]];class Lc extends gl{constructor(e,t,i,s){if(super(e,{ref:t,epilogue:J(t.epilogue||{}),button:J(t.epilogue&&t.epilogue.button||{}),allowUndefined:i},ol("builder","Closing message"),"normal",t.layout instanceof cc&&t.layout.style),this.onChange=[],t.layout){const i=t.layout.renderer;e.hook("OnShow","framed",(()=>i.onEdit("start","epilogue",Object.assign(Object.assign({},t.epilogue),{branch:this.ref.ref instanceof js&&this.ref.ref.id||void 0}),(e=>{this.onChange.push(e)})))),e.hook("OnClose","framed",(()=>{this.onChange.splice(0,this.onChange.length),i.onEdit("end","epilogue",Object.assign(Object.assign({},t.epilogue),{branch:this.ref.ref instanceof js&&this.ref.ref.id||void 0}))})),e.hook("OnClose","synchronous",(()=>{Lc.m_pEditor&&Lc.m_pEditor.ref===t&&(Lc.m_pEditor=void 0)}))}s&&this.onChange.push(s)}static sanitize(e){let t;return ee(Object.keys(e),(i=>{const s=Be(e,i);x(s)||_(s)&&!s||Fe(t||(t={}),i,s)})),t}static open(e,t,i,s){return new Lc(e,t,i,s)}static openPanel(e,t,i,s){if(this.m_pEditor&&this.m_pEditor.ref===t)return this.m_pEditor.layer;const o=t.layout&&t.layout.style;return(this.m_pEditor={ref:t,layer:e.createPanel((e=>{this.open(e,t,i,s)}),ta.configuration.width(o?o.forms.width.normal:0).animation(Br.Zoom).autoCloseChildPanels("stroke"))}).layer}get epilogue(){return this.ref.epilogue}onCards(e){const t=this.ref.ref instanceof ws?this.ref.ref:this.ref.ref.map,i=new tt((()=>{if(!e.isFailed){const e=Lc.sanitize(this.epilogue.redirectUrl?{redirectUrl:this.epilogue.redirectUrl}:J(this.epilogue,{button:this.ref.button.label&&this.ref.button.url&&this.ref.button.target?{label:this.ref.button.label,url:this.ref.button.url,target:this.ref.button.target}:void 0}))||(this.ref.allowUndefined?void 0:{});if(!K(e,this.ref.ref.epilogue,!0)){const t=Object.assign(Object.assign({},e),{branch:this.ref.ref instanceof js&&this.ref.ref.id||void 0});this.ref.ref.epilogue=e,ee(this.onChange,(e=>{e(t)}))}}}));if(!t)return;const s=pc("epilogue");e.features.card(new Xa({title:ol("builder","Explanation"),controls:[new jl(ol("builder","The closing message is typically shown when a user completes a form or survey. It depends on the runner how this closing message is presented to the user. At the left side of the screen you can select the features you want to activate for the closing message%1.",s?` ([${ol("builder","learn more")}](${s}))`:"")).markdown()]})),e.features.static(ol("builder","Message text"));const o=e.features.option({name:ol("builder","Text"),card:new Xa({title:ol("builder","Text"),controls:[new Al("multiline",Al.bind(this.epilogue,"title",void 0)).placeholder(ol("builder","Type here (hit @ to insert a variable)")).action("@",Ic(t,"all",_c)).on((()=>i.invoke()))]}),activated:!!this.epilogue.title,disabled:!!this.epilogue.redirectUrl}),n=e.features.option({name:ol("builder","Description"),card:new Xa({title:ol("builder","Description"),controls:[new Al("multiline",Al.bind(this.epilogue,"description",void 0)).placeholder(ol("builder","Type here (hit @ to insert a variable)")).action("@",Ic(t,"all",_c)).on((()=>i.invoke()))]}),activated:!!this.epilogue.description,disabled:!!this.epilogue.redirectUrl});e.features.static(ol("builder","More options"));const r=e.features.option({name:ol("builder","Image"),card:new Xa({title:ol("builder","Image"),controls:[new Al("singleline",Al.bind(this.epilogue,"image",void 0)).inputMode("url").placeholder("https://").action("@",Ic(t,"all",_c)).on((()=>i.invoke())).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)||e.value.length>23&&0===e.value.indexOf("data:image/jpeg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/png;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/svg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/gif;base64,")||e.value.length>1&&"/"===e.value.charAt(0)?"pass":"fail"))]}),activated:!!this.epilogue.image,disabled:!!this.epilogue.redirectUrl}),a=e.features.option({name:ol("builder","Video"),card:new Xa({title:ol("builder","Video"),controls:[new Al("singleline",Al.bind(this.epilogue,"video",void 0)).inputMode("url").placeholder("https://").action("@",Ic(t,"all",_c)).on((()=>i.invoke())).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)&&(wc(e.value)||Mc(e.value))?"pass":"fail")),new jl(ol("builder","Currently [YouTube](https://youtube.com) and [Vimeo](https://vimeo.com) videos are supported. Just click the share button of your video and paste the resulting embed link in the field above.")).markdown()]}),activated:!!this.epilogue.video,disabled:!!this.epilogue.redirectUrl}),l=e.features.option({name:ol("builder","Button"),card:new Xa({title:ol("builder","Button"),controls:[new Al("singleline",Al.bind(this.ref.button,"label",void 0)).label(ol("builder","Label")).action("@",Ic(t,"all",_c)).placeholder(ol("builder","Type here (hit @ to insert a variable)")).on((()=>i.invoke())),new Al("singleline",Al.bind(this.ref.button,"url",void 0)).label(ol("builder","URL")).inputMode("url").action("@",Ic(t,"all",_c)).placeholder("https://").on((()=>i.invoke())).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)?"pass":"fail")),new Hl([{label:ol("builder","Same tab/window"),value:"self"},{label:ol("builder","New tab/window"),value:"blank"}],Hl.bind(this.ref.button,"target",void 0,"self")).label(ol("builder","Open in")).on((()=>i.invoke()))]}),activated:!!this.epilogue.button,disabled:!!this.epilogue.redirectUrl}),c=e.features.option({name:ol("builder","Repeatability"),card:new Xa({title:ol("builder","Repeatability"),controls:[new Zl(ol("builder","Form is repeatable"),Al.bind(this.epilogue,"repeatable",void 0,!0)).on((()=>i.invoke())),new jl(ol("builder","When a form is repeatable, the user can fill out the same form again after a form is submitted."))]}),activated:T(this.epilogue.repeatable),disabled:!!this.epilogue.redirectUrl});e.features.option({name:ol("builder","Redirect"),card:new Xa({title:ol("builder","Redirect to a custom URL"),controls:[new Al("singleline",Al.bind(this.epilogue,"redirectUrl",void 0)).inputMode("url").action("@",Ic(t,"all",_c)).placeholder("https://").on((()=>i.invoke())).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)?"pass":"fail")),new jl(ol("builder","The user will navigate to the supplied redirect URL right after the form is submitted. There is no visible closing message."))]}),activated:!!this.epilogue.redirectUrl,on:e=>{o.disabled(e.isActivated),n.disabled(e.isActivated),r.disabled(e.isActivated),l.disabled(e.isActivated),a.disabled(e.isActivated),c.disabled(e.isActivated)}})}}class Cc extends cc{constructor(e,t,i){super(e,t,i,!0),this.m_sBackground="",this.branch.hook("OnTerminatorChange","synchronous",(()=>this.terminator())),this.branch.hook("OnCullingChange","synchronous",(()=>this.culling())),this.branch.hook("OnItemChange","synchronous",(e=>{4&e.reason&&this.connectors()}))}get configuration(){const e=(this.style.map.branches.junction.width-this.style.map.branches.junction.size)/2;return new Ci([{name:"self",minWidth:this.style.map.clusters.width+this.style.map.branches.junction.width},{name:"children",spacingTop:this.style.map.branches.top+this.style.map.branches.header.height+this.style.map.branches.footer.height,spacingBottom:this.style.map.clusters.junction.height+this.style.map.branches.terminators.height+2*this.style.map.connectors.spacing,spacingLeft:e,spacingRight:this.style.map.branches.junction.width-e,align:["self"]}])}get branch(){return this.parent}get branches(){return this.branch.parent}get x(){const e=this.branch.cluster;return e?e.rectangles.rectangle("self").right-(this.style.map.branches.junction.width-this.style.map.branches.junction.size)/2:0}get y(){const e=this.branch.cluster;return e?e.rectangles.rectangle("self").bottom-1.5*this.style.map.clusters.footer.height:0}get moveArea(){return new Ii(this.style.map.branches.left*this.branch.zoom,this.style.map.branches.top*this.branch.zoom,(this.branch.rectangles.rectangle("self").width-this.style.map.branches.width-this.style.map.branches.left)*this.branch.zoom,(this.branch.rectangles.rectangle("self").height-this.style.map.branches.header.height-this.style.map.branches.top)*this.branch.zoom)}junctionTop(){return this.branch.rectangles.rectangle("children").bottom-this.branch.rectangles.rectangle("self").top}conditionsHeight(){const e=this.branch.conditions.firstItem,t=this.branch.conditions.lastItem;let i=this.style.map.branches.header.height+this.style.map.branches.footer.height;return e&&t&&(i+=t.rectangles.bottom-e.rectangles.top),i}culling(){this.m_pCulling&&(this.m_pCulling.selector("first","first"===this.branch.culling),this.m_pCulling.selector("each","each"===this.branch.culling),this.m_pCulling.selector("all","all"===this.branch.culling),this.m_pCulling.selector("none","none"===this.branch.culling))}background(){if(!this.m_pConnectorHorizontal)return;const e=this.drawBranchConnector(!1);e!==this.m_sBackground&&(this.m_sBackground=e,ur.background(this.m_pConnectorHorizontal,this.branch.rectangles.rectangle("self").width,this.style.map.branches.top,this.m_sBackground,!0,!1))}terminator(){this.m_pTerminator&&(this.m_pTerminator.selector("continuous","continuous"===this.branch.terminator),this.m_pTerminator.selector("jump","jump"===this.branch.terminator),this.m_pTerminator.selector("abort","abort"===this.branch.terminator),this.m_pTerminator.selector("epilogue","epilogue"===this.branch.terminator)),this.connectors()}connectors(){if(this.branch.parent){const e=this.branch.parent.cluster.layout;e&&e.connectors()}}backgroundImage(e){return e&&`url("${e}")`||"none"}drawBranchConnector(e){const t=this.branch.rectangles.rectangle("self"),i=this.configuration.spacingLeft("children"),s=this.style.map.branches.culling;return(!e&&this.branch.isMoving?"":yc({orientation:"horizontal",alignment:"top",color:e?this.style.map.connectors.guides:this.style.map.connectors.branch,width:t.width-this.style.map.branches.junction.size-this.style.map.connectors.spacing,height:this.style.map.branches.top,dotted:e?"begin-with-dot":"no",thickness:this.style.map.connectors.thickness,spacing:new Li(this.style.map.connectors.spacing+(!e&&this.branch.isFirst?i:0),(this.style.map.nodes.height-this.style.map.connectors.thickness)/2,0,0),break:{from:i+this.style.map.clusters.width/2-s.width/2-this.style.map.connectors.spacing,size:s.width+2*this.style.map.connectors.spacing}}))+yc({orientation:"vertical",alignment:"center",color:e?this.style.map.connectors.guides:this.style.map.connectors.branch,width:i+this.style.map.clusters.width,height:this.style.map.branches.top,arrows:e?"no":"end",dotted:e?"begin-with-dot":"no",thickness:this.style.map.connectors.thickness,spacing:new Li(i,this.style.map.nodes.height/2+s.height/2+this.style.map.connectors.spacing,0,this.style.map.connectors.spacing)})}drawClusterConnector(e){return yc({orientation:"vertical",alignment:"center",width:this.style.map.clusters.junction.width,height:this.style.map.clusters.junction.height,color:e?this.style.map.connectors.guides:this.style.map.connectors.cluster,thickness:this.style.map.connectors.thickness,arrows:e?"no":"end",dotted:e?"begin-with-dot":"no",spacing:new Li(0,this.style.map.clusters.junction.size+(this.style.map.clusters.junction.height-this.style.map.clusters.junction.size)/2+this.style.map.connectors.spacing,0,this.style.map.connectors.spacing)})}draw(t,i,s,o,n,r,a){if(this.element&&!a){const t=this.conditionsHeight(),i=this.style.map.branches.culling,s=this.style.map.branches.terminators;this.element.style({[So.selector("moving")]:this.style.map.branches.moving,[So.selector("following")]:this.style.map.branches.following,[So.selector("ensuing")]:this.style.map.branches.ensuing},this.stylesheet),this.m_pConnectorHorizontal=this.element.create("div",void 0,{position:"absolute",left:0,right:0,top:0,height:this.style.map.branches.top},this.stylesheet),this.m_pCulling=this.element.create("div",(e=>{e.addSelector(this.branch.culling),Dr.on(e,(()=>this.cullingMenu()),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),{position:"absolute",left:this.configuration.spacingLeft("children")+(this.style.map.clusters.width-i.width)/2,top:(this.style.map.nodes.height-i.height)/2,width:i.width,height:i.height,transition:"background-image .2s",backgroundRepeat:"no-repeat",[So.selector("first")]:{backgroundImage:this.backgroundImage(i.first.image),[So.selector("hover")]:{backgroundImage:this.backgroundImage(i.first.hover||i.first.image)},[So.selector("tap")]:{backgroundImage:this.backgroundImage(i.first.tap||i.first.image)},[So.selector("selected")]:{backgroundImage:this.backgroundImage(i.first.selected||i.first.image)}},[So.selector("each")]:{backgroundImage:this.backgroundImage(i.each.image),[So.selector("hover")]:{backgroundImage:this.backgroundImage(i.each.hover||i.each.image)},[So.selector("tap")]:{backgroundImage:this.backgroundImage(i.each.tap||i.each.image)},[So.selector("selected")]:{backgroundImage:this.backgroundImage(i.each.selected||i.each.image)}},[So.selector("all")]:{backgroundImage:this.backgroundImage(i.all.image),[So.selector("hover")]:{backgroundImage:this.backgroundImage(i.all.hover||i.all.image)},[So.selector("tap")]:{backgroundImage:this.backgroundImage(i.all.tap||i.all.image)},[So.selector("selected")]:{backgroundImage:this.backgroundImage(i.all.selected||i.all.image)}},[So.selector("none")]:{backgroundImage:this.backgroundImage(i.none.image),[So.selector("hover")]:{backgroundImage:this.backgroundImage(i.none.hover||i.none.image)},[So.selector("tap")]:{backgroundImage:this.backgroundImage(i.none.tap||i.none.image)},[So.selector("selected")]:{backgroundImage:this.backgroundImage(i.none.selected||i.none.image)}}},this.stylesheet),this.element.create("div",(e=>{Dr.on(e,(()=>this.animate((()=>this.branch.insertAfter()))),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),{position:"absolute",right:-this.configuration.spacingLeft("children"),top:(this.style.map.nodes.height-this.style.map.branches.junction.height)/2,width:this.style.map.branches.junction.width,height:this.style.map.branches.junction.height,backgroundImage:this.backgroundImage(this.style.map.branches.junction.image),backgroundRepeat:"no-repeat",transition:"background-image .2s",[So.selector("hover")]:{backgroundImage:this.backgroundImage(this.style.map.branches.junction.hover||this.style.map.branches.junction.image)},[So.selector("tap")]:{backgroundImage:this.backgroundImage(this.style.map.branches.junction.tap||this.style.map.branches.junction.image)}},this.stylesheet);const n=ur.createBase64(this.style.map.clusters.width,100,yc({orientation:"vertical",alignment:"center",width:this.style.map.clusters.width,height:100,thickness:this.style.map.connectors.thickness,color:this.style.map.connectors.cluster}));this.m_pConnectorVertical=this.element.create("div",(i=>{i.positionByTranslate3D=!0,i.y=this.style.map.branches.top+t+this.style.map.connectors.spacing,i.height=e.max(this.branch.rectangles.spacingTop("children")-i.y+(this.style.map.clusters.junction.height-this.style.map.clusters.junction.size)/2-this.style.map.connectors.spacing,0)}),{position:"absolute",left:this.configuration.spacingLeft("children"),top:0,width:this.style.map.clusters.width,backgroundImage:this.backgroundImage(n),backgroundRepeat:"repeat-y",backgroundPosition:"top center"},this.stylesheet),this.background(),this.m_pConditions=this.element.create("div",(e=>{e.height=t,e.create("div",(e=>{this.m_pLabel=e.create("div",void 0,[this.style.map.branches.header.label.appearance,{[So.selector("named")]:this.style.map.branches.header.label.named}],this.stylesheet),this.m_pButton=e.create("div",(e=>{xl(59881,e),Dr.single(e,(()=>this.contextMenu()),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[this.style.map.branches.header.button.appearance,{[So.selector("hover")]:this.style.map.branches.header.button.hover,[So.selector("tap")]:this.style.map.branches.header.button.tap,[So.selector("selected")]:this.style.map.branches.header.button.selected}],this.stylesheet),Dr.single(e,(()=>this.edit()))}),this.style.map.branches.header.appearance,this.stylesheet),e.create("div",(e=>{xl(59702,e),Dr.on(e,(()=>{const t=fc(this.branch,this);ga.openAtElement(t.length>0?t:[new Il(59674,ol("builder","No conditions available..."),void 0,!0)],e,{style:this.style.menu,position:"bottom",onOpen:()=>e.addSelectorSafe("selected"),onClose:()=>e.removeSelectorSafe("selected")})}),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[this.style.map.branches.footer.appearance,{[So.selector("hover")]:this.style.map.branches.footer.hover,[So.selector("tap")]:this.style.map.branches.footer.tap,[So.selector("selected")]:this.style.map.branches.footer.selected}],this.stylesheet)}),[this.style.map.branches.appearance,{position:"absolute",left:this.style.map.branches.left,top:this.style.map.branches.top,width:this.style.map.branches.width}],this.stylesheet),this.m_pJunctionCluster=this.element.create("div",(e=>{const t=ur.createBase64(this.style.map.clusters.junction.width,this.style.map.clusters.junction.height,this.drawClusterConnector(!1));e.create("div",void 0,{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundImage:this.backgroundImage(t),backgroundRepeat:"no-repeat"},this.stylesheet),e.bottom=o-this.junctionTop()-this.style.map.clusters.junction.height,Dr.on(e,(()=>this.animate((()=>this.branch.clusters.append()))),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),{position:"absolute",left:this.configuration.spacingLeft("children")+(this.style.map.clusters.width-this.style.map.clusters.junction.width)/2,bottom:0,width:this.style.map.clusters.junction.width,height:this.style.map.clusters.junction.height,backgroundImage:this.backgroundImage(this.style.map.clusters.junction.image),backgroundRepeat:"no-repeat",transition:"background-image .2s",[So.selector("hover")]:{backgroundImage:this.backgroundImage(this.style.map.clusters.junction.hover||this.style.map.clusters.junction.image)},[So.selector("tap")]:{backgroundImage:this.backgroundImage(this.style.map.clusters.junction.tap||this.style.map.clusters.junction.image)}},this.stylesheet),this.m_pTerminator=this.element.create("div",(e=>{e.bottom=o-this.junctionTop()-this.style.map.clusters.junction.height-s.height,e.addSelector(this.branch.terminator),Dr.on(e,(()=>this.terminatorMenu()),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),{position:"absolute",left:this.configuration.spacingLeft("children")+(this.style.map.clusters.width-s.width)/2,bottom:0,width:s.width,height:s.height,transition:"background-image .2s",backgroundRepeat:"no-repeat",[So.selector("continuous")]:{backgroundImage:this.backgroundImage(s.continuous.image),[So.selector("hover")]:{backgroundImage:this.backgroundImage(s.continuous.hover||s.continuous.image)},[So.selector("tap")]:{backgroundImage:this.backgroundImage(s.continuous.tap||s.continuous.image)},[So.selector("selected")]:{backgroundImage:this.backgroundImage(s.continuous.selected||s.continuous.image)}},[So.selector("jump")]:{backgroundImage:this.backgroundImage(s.jump.image),[So.selector("hover")]:{backgroundImage:this.backgroundImage(s.jump.hover||s.jump.image)},[So.selector("tap")]:{backgroundImage:this.backgroundImage(s.jump.tap||s.jump.image)},[So.selector("selected")]:{backgroundImage:this.backgroundImage(s.jump.selected||s.jump.image)}},[So.selector("abort")]:{backgroundImage:this.backgroundImage(s.abort.image),[So.selector("hover")]:{backgroundImage:this.backgroundImage(s.abort.hover||s.abort.image)},[So.selector("tap")]:{backgroundImage:this.backgroundImage(s.abort.tap||s.abort.image)},[So.selector("selected")]:{backgroundImage:this.backgroundImage(s.abort.selected||s.abort.image)}},[So.selector("epilogue")]:{backgroundImage:this.backgroundImage(s.epilogue.image),[So.selector("hover")]:{backgroundImage:this.backgroundImage(s.epilogue.hover||s.epilogue.image)},[So.selector("tap")]:{backgroundImage:this.backgroundImage(s.epilogue.tap||s.epilogue.image)},[So.selector("selected")]:{backgroundImage:this.backgroundImage(s.epilogue.selected||s.epilogue.image)}}},this.stylesheet),this.style.map.rulers&&!a&&this.enableRulers("rgba(255,0,0,0.5)")}this.m_pLabel&&(this.m_pLabel.selector("named",C(this.branch.name)),this.m_pLabel.text=C(this.branch.name)?this.branch.name:ol("builder","Unnamed branch"))}resize(t,i,s,o){super.resize(t,i,s,o),"zoom"!==o&&("width"!==o&&"redraw"!==o||this.background(),ro((()=>{const t=this.conditionsHeight(),s=this.junctionTop();this.m_pConditions&&(this.m_pConditions.height=t),this.m_pConnectorVertical&&(this.m_pConnectorVertical.y=this.style.map.branches.top+t+this.style.map.connectors.spacing,this.m_pConnectorVertical.height=e.max(this.branch.rectangles.spacingTop("children")-this.m_pConnectorVertical.y+(this.style.map.clusters.junction.height-this.style.map.clusters.junction.size)/2-this.style.map.connectors.spacing,0)),this.m_pJunctionCluster&&(this.m_pJunctionCluster.bottom=i-s-this.style.map.clusters.junction.height),this.m_pTerminator&&(this.m_pTerminator.bottom=i-s-this.style.map.clusters.junction.height-this.style.map.branches.terminators.height)}),!this.m_pConditions||!this.m_pConditions.isInDOM),this.connectors())}onFirst(){super.onLast(),this.background()}onGuides(){super.onGuides(dr.create("div",(e=>{const t=this.style.map.branches.culling;e.create("div",void 0,{position:"absolute",left:0,right:0,top:0,height:this.style.map.branches.top,backgroundImage:this.backgroundImage(ur.createBase64(this.branch.rectangles.rectangle("self").width,this.style.map.branches.top,this.drawBranchConnector(!0))),backgroundRepeat:"no-repeat",backgroundPosition:"right top"},this.stylesheet),e.create("div",void 0,{position:"absolute",left:this.configuration.spacingLeft("children")+(this.style.map.clusters.width-t.width)/2,top:(this.style.map.nodes.height-t.height)/2,width:t.width,height:t.height,backgroundImage:this.backgroundImage("all"===this.branch.culling?t.all.guide:"none"===this.branch.culling?t.none.guide:"each"===this.branch.culling?t.each.guide:t.first.guide),backgroundRepeat:"no-repeat"},this.stylesheet),e.create("div",void 0,{position:"absolute",right:(this.style.map.branches.junction.width-this.style.map.branches.junction.size)/-2,top:(this.style.map.nodes.height-this.style.map.branches.junction.height)/2,width:this.style.map.branches.junction.width,height:this.style.map.branches.junction.height,backgroundImage:this.backgroundImage(this.style.map.branches.junction.guide),backgroundRepeat:"no-repeat"},this.stylesheet),e.create("div",void 0,{position:"absolute",left:this.configuration.spacingLeft("children")+(this.style.map.clusters.width-this.style.map.clusters.junction.width)/2,bottom:this.style.map.branches.terminators.height+2*this.style.map.connectors.spacing,width:this.style.map.clusters.junction.width,height:this.style.map.clusters.junction.height,backgroundImage:this.backgroundImage(this.style.map.clusters.junction.guide),backgroundRepeat:"no-repeat"},this.stylesheet),e.create("div",void 0,{position:"absolute",left:this.configuration.spacingLeft("children")+(this.style.map.clusters.width-this.style.map.clusters.junction.width)/2,bottom:this.style.map.branches.terminators.height+2*this.style.map.connectors.spacing,width:this.style.map.clusters.junction.width,height:this.style.map.clusters.junction.height,backgroundImage:this.backgroundImage(ur.createBase64(this.style.map.clusters.junction.width,this.style.map.clusters.junction.height,yc({orientation:"vertical",alignment:"center",width:this.style.map.clusters.junction.width,height:this.style.map.clusters.junction.height,color:this.style.map.connectors.guides,thickness:this.style.map.connectors.thickness,dotted:"begin-with-dot",spacing:new Li(0,this.style.map.clusters.junction.size+(this.style.map.clusters.junction.height-this.style.map.clusters.junction.size)/2+this.style.map.connectors.spacing,0,this.style.map.connectors.spacing)}))),backgroundRepeat:"no-repeat"},this.stylesheet),e.create("div",void 0,[this.style.map.branches.guides&&this.style.map.branches.guides.appearance,{position:"absolute",left:this.style.map.branches.left,top:this.style.map.branches.top,width:this.style.map.branches.width,height:this.conditionsHeight(),"> div":{position:"absolute",left:-this.style.map.connectors.thickness,bottom:0,width:this.style.map.branches.width,height:0,backgroundImage:this.backgroundImage(ur.createBase64(this.style.map.branches.width,100,yc({orientation:"vertical",alignment:"center",width:this.style.map.branches.width,height:100,thickness:this.style.map.connectors.thickness,color:this.style.map.connectors.guides,dotted:"begin-with-dot"}))),backgroundRepeat:"repeat-y",backgroundPosition:"center top"}}],this.stylesheet).create("div")}),this.layer.context,void 0,{position:"absolute",contain:"strict",transformOrigin:"0 0 0",backgroundImage:this.backgroundImage("abort"===this.branch.terminator?this.style.map.branches.terminators.abort.guide:"epilogue"===this.branch.terminator?this.style.map.branches.terminators.epilogue.guide:"jump"===this.branch.terminator?this.style.map.branches.terminators.jump.guide:this.style.map.branches.terminators.continuous.guide),backgroundRepeat:"no-repeat",backgroundPosition:`left ${this.configuration.spacingLeft("children")+(this.style.map.clusters.width-this.style.map.branches.terminators.width)/2}px bottom ${2*this.style.map.connectors.spacing}px`,[So.selector("visible")]:this.style.map.branches.guides&&this.style.map.branches.guides.visible,[So.selector("invisible")]:this.style.map.branches.guides&&this.style.map.branches.guides.invisible,[So.selector("first")]:{"> div:first-child":{left:this.configuration.spacingLeft("children")+this.style.map.connectors.spacing}}},this.stylesheet))}onGuidesChange(t,i,s,o,n,r){if(this.guides){const i=this.guides.lastChild;if(i){const t=i.firstChild;if(t){const i=e.max(this.branch.rectangles.spacingTop("children")-(this.style.map.branches.top+this.conditionsHeight()+this.style.map.connectors.spacing)+(this.style.map.clusters.junction.height-this.style.map.clusters.junction.size)/2-this.style.map.connectors.spacing,0);t.height=i,t.bottom=-i-2*this.style.map.connectors.spacing}}this.guides.selectorSafe("invisible",!t),this.guides.selectorSafe("first",this.branch.isFirst),Pe((()=>{this.guides&&(this.guides.selectorSafe("visible",t),this.guides.selectorSafe("invisible",!t))}))}super.onGuidesChange(t,i,s,o,n,r)}onMoveExpansion(e,t,i){return new Ii(0,0,i instanceof js?e-i.left/this.branch.zoom:0,0)}onIsMoveIn(t,i,s){if(s instanceof Ms){const s=this.branch.rectangles.rectangle("children");return!!e.inRange(t,s.left,s.left+this.style.map.clusters.width)&&!!e.inRange(i,s.top,s.bottom+this.style.map.clusters.junction.height+this.style.map.branches.terminators.height)}if(s instanceof Ds){const s=this.branch.rectangles.rectangle("children").left+(this.style.map.nodes.width-this.style.map.branches.width)/2;return!!e.inRange(t,s,s+this.style.map.branches.width)&&!!e.inRange(i,this.branch.rectangles.rectangle("self").top+this.style.map.branches.top,this.branch.rectangles.rectangle("self").top+this.branch.spacing+this.branch.offset)}return this.branch.rectangles.isCoordinateInRectangle("self",t,i)}moving(e){return!!super.moving(e)&&(this.background(),this.connectors(),!0)}edit(){uc.openPanel(this.layer,this.branch)}contextMenu(){const e=fc(this.branch,this),t=this.m_pButton;t&&ga.openAtElement([...e.length>0?[new qr(ol("builder","Condition")),...e,new ya]:[],new qr(ol("builder","Branch")),new Il(58893,ol("builder","Properties"),(()=>this.edit())),new Nl(59710,ol("builder","Move"),[new Il(59715,ol("builder","Left"),(()=>this.animate((()=>this.branch.index--))),this.branch.isFirst),new Il(59716,ol("builder","Right"),(()=>this.animate((()=>this.branch.index++))),this.branch.isLast)],this.branch.isFirst&&this.branch.isLast),new Il(59064,ol("builder","Duplicate"),(()=>this.branch.duplicate())),new ya,new Il(59701,ol("builder","Delete"),(()=>this.animate((()=>this.branch.delete()))))],t,{style:this.style.menu,position:"right-from-center",onOpen:()=>t.addSelectorSafe("selected"),onClose:()=>t.removeSelectorSafe("selected")})}cullingMenu(){const e=this.m_pCulling;if(!e)return;const t=pc("culling");ga.openAtElement([new qr(ol("builder","Follow this branch")),new fa(this.style.map.branches.culling.first.icon,ol("builder","For the first condition match (logical OR)"),(()=>this.branch.culling="first"),"first"===this.branch.culling),new fa(this.style.map.branches.culling.all.icon,ol("builder","When all conditions match (logical AND)"),(()=>this.branch.culling="all"),"all"===this.branch.culling),new fa(this.style.map.branches.culling.none.icon,ol("builder","When no conditions match (logical NOT)"),(()=>this.branch.culling="none"),"none"===this.branch.culling),new fa(this.style.map.branches.culling.each.icon,ol("builder","For each condition match (iteration)"),(()=>this.branch.culling="each"),"each"===this.branch.culling),...t?[new ya,new kl(59699,ol("builder","Help with branch behavior"),t,"blank")]:[]],e,{style:this.style.menu,position:"top-from-center",onOpen:()=>e.addSelectorSafe("selected"),onClose:()=>e.removeSelectorSafe("selected")})}terminatorMenu(){const e=[],t=this.m_pTerminator,i=this.renderer.supportsEpilogue;if(!t)return;this.branch.map&&this.branch.map.forEach(((t,i)=>{(C(t.name)||this.branch.jump===t)&&e.push(new Xr(C(t.name)?t.name:ol("builder","Unnamed section"),(()=>this.branch.jump=t),this.branch.jump===t))}),"clusters",this.branch,!0);const s=pc("terminators");ga.openAtElement([...i&&"epilogue"===this.branch.terminator?[new qr(ol("builder","Closing message")),new Il(58893,ol("builder","Edit closing message"),(()=>this.epilogue()))]:[],new qr(ol("builder","At the end of this branch")),new Il(59714,ol("builder","Continue with the next section or branch"),(()=>this.branch.terminator="continuous"),"continuous"===this.branch.terminator),new Nl(59720,ol("builder","Jump to a specific point"),[...e]),new Il(59646,ol("builder","Jump to end"),(()=>this.branch.terminator="abort"),"abort"===this.branch.terminator),...i?[new Il(59350,ol("builder","End with closing message"),(()=>{this.branch.terminator="epilogue",this.branch.epilogue&&!K(this.branch.epilogue,{},!0)||this.epilogue()}),"epilogue"===this.branch.terminator),...s?[new ya,new kl(59699,ol("builder","Help with branch endings"),s,"blank")]:[]]:[]],t,{style:this.style.menu,position:"bottom-from-center",onOpen:()=>t.addSelectorSafe("selected"),onClose:()=>t.removeSelectorSafe("selected")})}epilogue(){Lc.openPanel(this.layer,this.branch,!1)}destroy(){this.m_pConditions=void 0,this.m_pLabel=void 0,this.m_pButton=void 0,this.m_pConnectorHorizontal=void 0,this.m_pConnectorVertical=void 0,this.m_pJunctionCluster=void 0,this.m_pTerminator=void 0,super.destroy()}}class Dc extends gl{constructor(e,t,i){if(super(e,t,ol("builder","Section properties"),"compact",t.layout instanceof cc&&t.layout.style),t.layout instanceof cc){const s=t.layout.renderer;e.hook("OnShow","framed",(()=>s.onEdit("start","cluster",t))),e.hook("OnClose","framed",(()=>s.onEdit("end","cluster",t))),e.hook("OnClose","synchronous",(()=>{Dc.m_pEditor&&Dc.m_pEditor.cluster===t&&(Dc.m_pEditor=void 0)})),i&&t.layout.scrollIntoView()}}static open(e,t,i=!1){return new Dc(e,t,i)}static openPanel(e,t,i=!1){if(this.m_pEditor&&this.m_pEditor.cluster===t)return this.m_pEditor.layer;const s=t.layout&&t.layout.style;return(this.m_pEditor={cluster:t,layer:e.createPanel((e=>{this.open(e,t,i)}),ta.configuration.width(s?s.forms.width.small:0).animation(Br.Zoom).autoCloseChildPanels("stroke"))}).layer}get cluster(){return this.ref}onCards(e){e.add(new Xa({title:ol("builder","Name"),controls:[new Al("singleline",Al.bind(this.cluster,"name","",void 0,(e=>e||void 0))).autoFocus().autoSelect()]}))}}class Ac extends cc{constructor(e,t,i){super(e,t,i,!0),this.m_sConnectors=""}get connectorDimensions(){const t=this.cluster.rectangles.rectangleApplied("self"),i=this.cluster.rectangles.rectangleApplied("children"),s=e.max(t.right,i.right)-t.left,o=(this.style.map.clusters.junction.height-this.style.map.clusters.junction.size)/2+(i.bottom>t.bottom?i.bottom-t.bottom+this.cluster.rectangles.spacingBottom("children"):0);return new Ni(s,o)}get configuration(){return new Ci([{name:"self",spacingTop:this.style.map.clusters.junction.height,minWidth:this.style.map.clusters.width,maxWidth:this.style.map.clusters.width,minHeight:this.style.map.clusters.header.height+this.style.map.clusters.footer.height},{name:"children",spacingLeft:(this.style.map.clusters.width-this.style.map.nodes.width)/2,spacingRight:(this.style.map.clusters.width-this.style.map.nodes.width)/2,spacingTop:this.style.map.clusters.junction.height+this.style.map.clusters.header.height,spacingBottom:this.style.map.clusters.footer.height,align:["self"]}])}get cluster(){return this.parent}get clusters(){return this.cluster.parent}get moveArea(){return new Ii(0,0,0,(this.cluster.rectangles.rectangle("self").height-this.style.map.clusters.header.height)*this.cluster.zoom)}branchJunction(){this.m_pBranch&&(this.m_pBranch.selector("visible",!this.cluster.hasBranches),this.m_pBranch.selector("moving",this.isMoving),this.m_pBranch.selector("following",this.isFollowing))}drawConnectors(e){const t=this.cluster.rectangles.rectangleApplied("self"),i=this.connectorDimensions;let s=yc({orientation:"vertical",alignment:"center",width:this.style.map.clusters.width,height:i.height,thickness:this.style.map.connectors.thickness,color:e?this.style.map.connectors.guides:this.style.map.connectors.cluster,spacing:new Li(0,this.style.map.connectors.spacing,0,this.style.map.connectors.spacing),dotted:this.cluster.hasBranches||e?"begin-with-dot":"no"});const o=this.style.map.connectors.padding,n=this.style.map.connectors.radius;let r=this.style.map.clusters.width/2,a=i.height-this.style.map.connectors.spacing,l="",c=!0;if(this.cluster.branches.each((e=>{if(!e.isMoving&&"continuous"===e.terminator){const i=e.rectangles.rectangle("children"),s=i.left+this.style.map.clusters.width/2-t.left,u=i.bottom-t.bottom+this.style.map.clusters.junction.height+this.style.map.branches.terminators.height+this.style.map.connectors.spacing;l+=`M${r},${a}`,c&&(l+=`L${r},${a-o}`,l+=`a${n},${n},0,0,1,${n},-${n}`,a=a-o-n,c=!1),r=s-n,l+=`L${r},${a}`,l+=`a${n},${n},0,0,0,${n},-${n}`,l+=`L${s},${u}`}})),""!==l){const t=e?this.style.map.connectors.guides:this.style.map.connectors.cluster;s+=`<path d="${l}" fill="none" `,s+=`stroke="${t}" stroke-width="${this.style.map.connectors.thickness}"`+(e?` stroke-dasharray="${this.style.map.connectors.thickness},${this.style.map.connectors.thickness}"`:"")+" />"}return s}drawConnector(e){return yc({orientation:"vertical",alignment:"center",width:this.style.map.clusters.junction.width,height:this.style.map.clusters.junction.height,color:e?this.style.map.connectors.guides:this.style.map.connectors.cluster,thickness:this.style.map.connectors.thickness,arrows:e?"no":"end",dotted:e?"begin-with-dot":"no",spacing:new Li(0,this.style.map.clusters.junction.size+(this.style.map.clusters.junction.height-this.style.map.clusters.junction.size)/2+this.style.map.connectors.spacing,0,this.style.map.connectors.spacing)})}draw(e,t,i,s,o,n,r){this.element&&!r&&(this.element.style([{contain:"size layout"},this.style.map.clusters.appearance,{[So.selector("moving")]:this.style.map.clusters.moving,[So.selector("following")]:this.style.map.clusters.following,[So.selector("ensuing")]:this.style.map.clusters.ensuing}],this.stylesheet),this.element.create("div",(e=>{this.m_pConnectors=e,this.connectors()}),{position:"absolute",left:-this.style.map.clusters.borderSize,bottom:0,pointerEvents:"none",backgroundPosition:"left bottom"},this.stylesheet),this.element.create("div",(e=>{this.m_pLabel=e.create("div",void 0,[this.style.map.clusters.header.label.appearance,{[So.selector("named")]:this.style.map.clusters.header.label.named}],this.stylesheet),this.m_pButton=e.create("div",(e=>{xl(59881,e),Dr.on(e,(()=>this.contextMenu()),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[this.style.map.clusters.header.button.appearance,{[So.selector("hover")]:this.style.map.clusters.header.button.hover,[So.selector("tap")]:this.style.map.clusters.header.button.tap,[So.selector("selected")]:this.style.map.clusters.header.button.selected}],this.stylesheet),Dr.single(e,(()=>this.edit()))}),this.style.map.clusters.header.appearance,this.stylesheet),this.element.create("div",(e=>{xl(59702,e),Dr.on(e,(()=>this.animate((()=>this.cluster.nodes.append()))),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[this.style.map.clusters.footer.appearance,{[So.selector("hover")]:this.style.map.clusters.footer.hover,[So.selector("tap")]:this.style.map.clusters.footer.tap}],this.stylesheet),this.style.map.clusters.branch.enabled&&(this.m_pBranch=this.element.create("div",(e=>{Dr.on(e,(()=>this.animate((()=>this.cluster.branches.append()))),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),{position:"absolute",right:-this.style.map.clusters.branch.width,bottom:(this.style.map.clusters.footer.height-this.style.map.clusters.branch.height)/2-1,width:this.style.map.clusters.branch.width,height:this.style.map.clusters.branch.height,backgroundImage:`url("${this.style.map.clusters.branch.image}")`,backgroundRepeat:"no-repeat",transition:"background-image .2s, opacity .2s",opacity:0,touchAction:"none",[So.selector("visible")]:{opacity:1,touchAction:"auto"},[So.selector("hover")]:{backgroundImage:`url("${this.style.map.clusters.branch.hover||this.style.map.clusters.branch.image}")`},[So.selector("tap")]:{backgroundImage:`url("${this.style.map.clusters.branch.tap||this.style.map.clusters.branch.image}")`},[So.selector("moving")]:{opacity:0},[So.selector("following")]:{opacity:0}},this.stylesheet),this.branchJunction()),this.element.create("div",(e=>{const t=ur.createBase64(this.style.map.clusters.junction.width,this.style.map.clusters.junction.height,this.drawConnector(!1));e.create("div",void 0,{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundImage:`url("${t}")`,backgroundRepeat:"no-repeat"},this.stylesheet),Dr.on(e,(()=>this.animate((()=>this.cluster.insertBefore().nodes.append()))),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),{position:"absolute",left:this.style.map.clusters.junction.left,top:this.style.map.clusters.junction.top,width:this.style.map.clusters.junction.width,height:this.style.map.clusters.junction.height,backgroundImage:`url("${this.style.map.clusters.junction.image}")`,backgroundRepeat:"no-repeat",transition:"background-image .2s",[So.selector("hover")]:{backgroundImage:`url("${this.style.map.clusters.junction.hover||this.style.map.clusters.junction.image}")`},[So.selector("tap")]:{backgroundImage:`url("${this.style.map.clusters.junction.tap||this.style.map.clusters.junction.image}")`}},this.stylesheet),this.style.map.rulers&&this.enableRulers("rgba(0,0,255,0.5)")),this.m_pLabel&&(this.m_pLabel.selector("named",C(this.cluster.name)),this.m_pLabel.text=C(this.cluster.name)?this.cluster.name:ol("builder","Unnamed section"))}beforeResize(t){const i=t.isRectangleAligned("self","children"),s=this.cluster.nodes.firstItem;if(i){const i=this.cluster.nodes.lastItem;t.minHeight("self",t.maxHeight("self",this.style.map.clusters.header.height+this.style.map.clusters.footer.height)),s&&i&&t.minHeight("self",t.maxHeight("self",e.max(i.rectangles.rectangle("self").bottom+i.rectangles.spacingBottom("self")-(s.rectangles.rectangle("self").top-s.rectangles.spacingTop("self"))+t.spacingVertical("children")-t.spacingVertical("self"),0)))}if(this.cluster.hasBranches){let i,o=0,n=0,r=0,a=0;this.cluster.branches.each((t=>{i||(i=t),t.position(),o=e.max(t.rectangles.right,o),n=e.max(t.rectangles.bottom,n)})),s?(r=o-s.rectangles.left,a=n-s.rectangles.top):i&&i.layout instanceof Cc&&(r=o-i.rectangles.left+i.layout.x-this.cluster.rectangles.rectangle("self").left-this.cluster.rectangles.spacingLeft("children"),a=n-i.rectangles.top),t.rectangleWidth("children",r),t.rectangleHeight("children",a)}super.beforeResize(t)}resize(e,t,i,s){super.resize(e,t,i,s),"zoom"!==s&&this.connectors()}connectors(){if(this.m_pConnectors){const e=this.drawConnectors(!1),t=this.connectorDimensions;e===this.m_sConnectors&&this.m_pConnectors.width===t.width&&this.m_pConnectors.height===t.height||(this.m_sConnectors=e,this.m_pConnectors.bottom=-t.height-this.style.map.clusters.borderSize,ur.background(this.m_pConnectors,t.width,t.height,e,!0,!0))}this.branchJunction()}onGuides(){super.onGuides(dr.create("div",(e=>{const t=this.connectorDimensions;e.create("div",void 0,{position:"absolute",left:0,bottom:-t.height,width:t.width,height:t.height,backgroundImage:`url("${ur.createBase64(t.width,t.height,this.drawConnectors(!0))}")`,backgroundRepeat:"no-repeat"},this.stylesheet);const i=this.isMoving?this.style.map.clusters.junction.image:this.style.map.clusters.junction.guide;e.create("div",(e=>{const t=ur.createBase64(this.style.map.clusters.junction.width,this.style.map.clusters.junction.height,yc({orientation:"vertical",alignment:"center",width:this.style.map.clusters.junction.width,height:this.style.map.clusters.junction.height,color:this.style.map.connectors.guides,thickness:this.style.map.connectors.thickness,dotted:"begin-with-dot",spacing:new Li(0,this.style.map.clusters.junction.size+(this.style.map.clusters.junction.height-this.style.map.clusters.junction.size)/2+this.style.map.connectors.spacing,0,this.style.map.connectors.spacing)}));e.create("div",void 0,{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundImage:`url("${t}")`,backgroundPosition:"center top",backgroundRepeat:"no-repeat"},this.stylesheet)}),{position:"absolute",left:0,right:0,top:-this.style.map.clusters.junction.height,height:this.style.map.clusters.junction.height,backgroundImage:`url("${i}")`,backgroundPosition:"center top",backgroundRepeat:"no-repeat"},this.stylesheet),e.create("div",void 0,[this.style.map.clusters.guides&&this.style.map.clusters.guides.appearance,{position:"absolute",left:0,right:0,top:0,bottom:0}],this.stylesheet)}),this.layer.context,void 0,{position:"absolute",contain:"size layout",transformOrigin:"0 0 0",[So.selector("visible")]:this.style.map.clusters.guides&&this.style.map.clusters.guides.visible,[So.selector("invisible")]:this.style.map.clusters.guides&&this.style.map.clusters.guides.invisible},this.stylesheet))}onGuidesChange(e,t,i,s,o,n){this.guides&&(this.guides.selectorSafe("invisible",!e),Pe((()=>{this.guides&&(this.guides.selectorSafe("visible",e),this.guides.selectorSafe("invisible",!e))}))),super.onGuidesChange(e,t,i,s,o,n)}onMoveExpansion(e,t,i){return i instanceof js&&this.cluster.hasBranches?new Ii(0,0,e-i.left/this.cluster.zoom,0):new Ii(0,0,0,0)}onIsMoveIn(t,i,s){if(s instanceof js){const o=this.cluster.rectangles.rectangle("self"),n=this.cluster.rectangles.rectangle("children"),r=this.cluster.branches.firstItem,a=t-s.left/this.cluster.zoom;let l=n.bottom;return r&&(l=r.rectangles.rectangle("children").top+this.style.map.clusters.junction.height),!(!e.inRange(t,o.left,o.right+a)||!e.inRange(i,o.top,o.bottom))||!(!e.inRange(t,e.max(n.left,o.right),n.right+a)||!e.inRange(i,n.top,l))}return this.cluster.rectangles.isCoordinateInRectangle("self",t,i)}moving(e){return!!super.moving(e)&&(this.branchJunction(),!0)}following(e){return!!super.following(e)&&(this.branchJunction(),!0)}edit(){Dc.openPanel(this.layer,this.cluster)}contextMenu(){const e=this.m_pButton,t=fc(this.cluster,this);e&&ga.openAtElement([...t.length>0?[new qr(ol("builder","Add branch")),...t,new ya]:[],new qr(ol("builder","Item")),new Il(59647,ol("builder","Insert"),(()=>this.animate((()=>this.cluster.nodes.insert())))),new Il(59648,ol("builder","Append"),(()=>this.animate((()=>this.cluster.nodes.append())))),new ya,new qr(ol("builder","Section")),new Il(58893,ol("builder","Properties"),(()=>this.edit())),new Nl(59709,ol("builder","Move"),[new Il(59713,ol("builder","Up"),(()=>this.animate((()=>this.cluster.index--))),this.cluster.isFirst),new Il(59714,ol("builder","Down"),(()=>this.animate((()=>this.cluster.index++))),this.cluster.isLast)],this.cluster.isFirst&&this.cluster.isLast),new Il(59064,ol("builder","Duplicate"),(()=>this.cluster.duplicate())),new ya,new Il(59701,ol("builder","Delete"),(()=>this.animate((()=>this.cluster.delete()))))],e,{style:this.style.menu,position:"right-from-center",onOpen:()=>e.addSelectorSafe("selected"),onClose:()=>e.removeSelectorSafe("selected")})}destroy(){this.m_pConnectors=void 0,this.m_pLabel=void 0,this.m_pButton=void 0,super.destroy()}}class jc extends hl{constructor(e,t,i){super(e.forms.header.title.withIcon,i),this.m_sColor=e.forms.header.title.color,this.m_sIcon=t}get icon(){return this.m_sIcon}set icon(e){this.m_sIcon=e,this.element&&this.element.set("background-image",`url("${vc(this.m_sIcon,this.m_sColor)}")`)}onDraw(e,t){super.onDraw(e,t),t.set("background-image",`url("${vc(this.m_sIcon,this.m_sColor)}")`)}}function Tc(e,t){const i=()=>{t.scores&&ee(t.scores,(e=>{e.precision((null==n?void 0:n.precision)||0),e.digits((null==n?void 0:n.digits)||0),e.decimalSign((null==n?void 0:n.decimal)||""),e.thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||""),e.prefix((null==n?void 0:n.prefix)||""),e.prefixPlural((null==n?void 0:n.prefixPlural)||void 0),e.suffix((null==n?void 0:n.suffix)||""),e.suffixPlural((null==n?void 0:n.suffixPlural)||void 0)})),t.collection&&t.collection.refresh()},s=e=>null==n?void 0:n.toString(e.getScoreOfItem()||0),o=e=>{y instanceof Ca?y.disabled(!n):y instanceof La&&(!e&&n&&t.pair instanceof La?ke((()=>{y.visible(!0,!0)})):y.visible(!!n)),t.collection&&t.collection.scores(n&&s)};let n=t.target.slots.select(t.reference,"feature");const r=new Hl([{label:"#.#",value:"."},{label:"#,#",value:","}],(null==n?void 0:n.decimal)||".").label(ol("builder","Decimal sign")).indent(32).on((e=>{n&&(n.decimal=e.isObservable&&!e.isDisabled?e.value:void 0,i())})).disabled(!(null==n?void 0:n.precision)),a=new qa([r,new Hl([{label:ol("builder","None"),value:void 0},{label:"#,###",value:","},{label:"#.###",value:"."}],null==n?void 0:n.separator).label(ol("builder","Thousands separator")).indent(32).on((e=>{n&&(n.separator=e.isObservable?e.value:void 0,i())})),new jl(ol("builder","**Note:** These signs are used to format the number in de dataset. When the number is displayed in a runner, the appropriate user locale might be applied making it seem like changing these settings has no effect.")).markdown().indent(32)]).visible((null==n?void 0:n.exportable)&&!(null==n?void 0:n.digits)&&(_(null==n?void 0:n.separator)||_(null==n?void 0:n.decimal))||!1),l=new Zl(ol("builder","Signs"),_(null==n?void 0:n.separator)||_(null==n?void 0:n.decimal)).disabled(((null==n?void 0:n.digits)||0)>0).visible(n?!1!==n.exportable:t.exportable).on((e=>{a.visible(e.isObservable&&!e.isDisabled&&e.isChecked)})),c=new Hl([{optGroup:ol("builder","Decimals")},{label:"#",value:0},{label:"#.#",value:1},{label:"#.##",value:2},{label:"#.###",value:3},{label:"#.####",value:4},{label:"#.#####",value:5},{label:"#.######",value:6},{label:"#.#######",value:7},{label:"#.########",value:8},{optGroup:ol("builder","Digits")},{label:"##",value:-2},{label:"###",value:-3},{label:"####",value:-4},{label:"#####",value:-5},{label:"######",value:-6},{label:"#######",value:-7},{label:"########",value:-8},{label:"#########",value:-9},{label:"##########",value:-10},{label:"###########",value:-11},{label:"############",value:-12},{label:"#############",value:-13},{label:"##############",value:-14},{label:"###############",value:-15},{label:"################",value:-16}],((null==n?void 0:n.digits)?-(null==n?void 0:n.digits):null==n?void 0:n.precision)||0).on((e=>{n&&(n.precision=e.isObservable&&D(e.value)&&e.value>=0?e.value:void 0,n.digits=e.isObservable&&D(e.value)&&e.value<0?-e.value:void 0,i()),r.disabled(!(null==n?void 0:n.precision)),l.disabled(((null==n?void 0:n.digits)||0)>0)})).indent(32).visible(D(null==n?void 0:n.precision)||D(null==n?void 0:n.digits)),u=new qa([new Al("singleline",(null==n?void 0:n.alias)||"").placeholder(ol("builder","Type alias identifier here...")).indent(32).on((e=>{n&&(n.alias=e.isObservable&&e.value||void 0)})),new jl(ol("builder","This alias will be used as identifier in the dataset.")).indent(32)]).visible(!!(null==n?void 0:n.alias)),h=new Al("singleline",null==n?void 0:n.prefix).sanitize(!1).indent(32).on((e=>{n&&(n.prefix=e.isObservable?e.value:void 0,i())})),d=new Al("singleline",null==n?void 0:n.prefixPlural).indent(64).sanitize(!1).placeholder(ol("builder","Prefix when value is plural")).on((e=>{n&&(n.prefixPlural=e.isObservable?e.value:void 0,i())})).visible(_(null==n?void 0:n.prefixPlural)),p=new qa([h,new Zl(ol("builder","Specify different prefix for plural values"),_(null==n?void 0:n.prefixPlural)).on((e=>{h.placeholder(e.isChecked&&ol("builder","Prefix when value is singular")||""),d.visible(e.isChecked)})).indent(32),d]).visible(_(null==n?void 0:n.prefix)),m=new Al("singleline",null==n?void 0:n.suffix).sanitize(!1).indent(32).on((e=>{n&&(n.suffix=e.isObservable?e.value:void 0,i())})),g=new Al("singleline",null==n?void 0:n.suffixPlural).indent(64).sanitize(!1).placeholder(ol("builder","Suffix when value is plural")).on((e=>{n&&(n.suffixPlural=e.isObservable?e.value:void 0,i())})).visible(_(null==n?void 0:n.suffixPlural)),b=new qa([m,new Zl(ol("builder","Specify different suffix for plural values"),_(null==n?void 0:n.suffixPlural)).on((e=>{m.placeholder(e.isChecked&&ol("builder","Suffix when value is singular")||""),g.visible(e.isChecked)})).indent(32),g]).visible(_(null==n?void 0:n.suffix)),f=e.option({name:t.name,form:{title:t.title||t.name,controls:[...t.description?[new jl(t.description).markdown()]:[],...t.scores?[...t.scores,new jl(ol("builder","Options"))]:[],new Zl(ol("builder","Make exportable and include in the dataset"),n?!1!==n.exportable:t.exportable).on((e=>{l.visible(e.isChecked),n&&(n.exportable=e.isChecked)})),new Zl(ol("builder","Format"),D(null==n?void 0:n.precision)||D(null==n?void 0:n.digits)).on((e=>{c.visible(e.isChecked)})),c,new Zl(ol("builder","Prefix"),_(null==n?void 0:n.prefix)).on((e=>{p.visible(e.isChecked)})),p,new Zl(ol("builder","Suffix"),_(null==n?void 0:n.suffix)).on((e=>{b.visible(e.isChecked)})),b,l,a,new Zl(ol("builder","Alias"),!!(null==n?void 0:n.alias)).on((e=>u.visible(e.isChecked))),u]},activated:!!n}).onToggle((e=>{e.isActivated&&!n?n=t.target.slots.feature({type:$i,reference:t.reference,label:t.label,exportable:!!t.exportable,exchange:["alias","exportable","precision","digits","decimal","separator","prefix","prefixPlural","suffix","suffixPlural"]}):!e.isActivated&&n&&(t.target.slots.delete(n.id),n=void 0),o(!1)})),y=t.pair instanceof La||t.pair instanceof Ca?t.pair:t.pair&&t.pair();return i(),o(!0),f}function zc(e){return e.block?"headless"===e.block.type.kind:"static"!==e.type&&"undefined"!==e.type}function Ec(e){return zc(e)?ol("builder","Status"):ol("builder","Visibility")}function Oc(e){return zc(e)?ol("builder","Ignore this item in the form"):ol("builder","Do not display in the form")}class Pc extends bl{constructor(){super(...arguments),this.groups={general:()=>this.group(ol("builder","General")),settings:()=>this.group(ol("builder","Settings")),options:()=>this.group(ol("builder","Options"))}}alias(e){return function(e,t){const i={get alias(){return(N(t)?t():t).alias},set alias(e){(N(t)?t():t).alias=e}};return e.option({name:ol("builder","Alias"),form:{title:ol("builder","Alias"),controls:[new Al("singleline",Al.bind(i,"alias",void 0)),new jl(ol("builder","This alias will be used as identifier of the item in the dataset instead of the title/name of the item."))]},activated:_(i.alias)})}(this,e)}description(e,t,i=!0){return function(e,t=!1,i=ol("builder","Description"),s=!0){if(e.reference instanceof ds||e.reference instanceof ys){const o=e.reference instanceof ys?e.reference:e.reference.node,n=new Al("multiline",Al.bind(o,"description",void 0)).placeholder(ol("builder","Type here..."));return s&&n.action("@",Ic(o,"exclude"===s||"validated"===s?s:"all")),e.option({name:i,form:{title:i,controls:[n]},activated:_(o.description)||t,locked:t})}throw new Error("Tripetto: The `description` feature can only be used on nodes.")}(this,e,t,i)}explanation(){return function(e){if(e.reference instanceof ds||e.reference instanceof ys){const t=e.reference instanceof ys?e.reference:e.reference.node;return e.option({name:ol("builder","Help text"),form:{title:ol("builder","Help text"),controls:[new Al("multiline",Al.bind(t,"explanation",void 0)).placeholder(ol("builder","Type help text here...")).action("@",Ic(t)),new jl(ol("builder","This additional explanation can be used to help the respondent to understand the question."))]},activated:_(t.explanation)})}throw new Error("Tripetto: The `explanation` feature can only be used on nodes.")}(this)}name(e,t,i,s=!0){return this.m_pName=function(e,t=!0,i=!0,s=ol("builder","Text"),o=!0){if(e.reference instanceof ds||e.reference instanceof ys){const n=e.reference instanceof ys?e.reference:e.reference.node,r=()=>"note"===n.type?ol("builder","Note"):Q(n.nameVisible,!0)?s:ol("builder","Name"),a=()=>{l.feature&&(l.feature.name=r(),l.form&&(l.form.title=r()))},l=new Al(i?"multiline":"singleline",Al.bind(n,"name",void 0)).autoFocus(!C(n.name));return t||(n.nameVisible=void 0),n.hook("OnTypeChange","synchronous",(()=>a()),e),o?l.placeholder(ol("builder","Type here (hit @ to insert a variable)")).action("@",Ic(n,"exclude"===o||"validated"===o?o:"all")):l.placeholder(ol("builder","Type here...")),e.option({name:r(),form:{title:r(),controls:[l,...t?[new Zl(ol("builder","Show this text in form"),Zl.bind(n,"nameVisible",void 0,!0)).on((()=>a()))]:[]]},locked:!0})}throw new Error("Tripetto: The `name` feature can only be used on nodes.")}(this,e,t,i,s),this.m_pName}placeholder(...e){return function(e,t,...i){if(e.reference instanceof ds||e.reference instanceof ys||e.reference instanceof Yi){const s=e.reference instanceof ys||e.reference instanceof Yi?e.reference:e.reference.node;t&&(t.locked(!C(s.placeholder)),t.isLocked||_(s.name)||t.deactivate());const o=new Al("singleline",Al.bind(s,"placeholder",void 0)).placeholder(ol("builder","Type placeholder text here...")).on((()=>{t&&(t.locked(!C(s.placeholder)),n.locked(!C(s.name)&&C(s.placeholder)),t.isLocked&&t.activate())})),n=e.option({name:ol("builder","Placeholder"),form:{title:ol("builder","Placeholder"),controls:[o,...i,new jl(ol("builder","A placeholder text is displayed inside an empty input control in the form and can be used to give the respondent a clue on what can be filled in."))]},activated:_(s.placeholder),locked:t&&C(s.placeholder)&&!t.isActivated});if(t&&t.card instanceof Xa){const e=t.card.control(0);e&&e.hook("OnData","synchronous",(()=>{n.locked(!C(s.name)&&C(s.placeholder))}))}return s instanceof ys&&o.action("@",Ic(s)),n}throw new Error("Tripetto: The `placeholder` feature can only be used on nodes or slots.")}(this,this.m_pName,...e)}required(e,t,i){return function(e,t,i=ol("builder","Item is required and cannot be skipped"),s){const o={get required(){return(N(t)?t():t).required},set required(e){(N(t)?t():t).required=e}};let n=o.required;return e.option({name:ol("builder","Required"),form:{title:ol("builder","Required"),controls:[new Zl(i,Zl.bind(o,"required",void 0,!0)).on((e=>{s&&n!==o.required&&s(n=o.required)}))]},activated:T(o.required)})}(this,e,t,i)}exportable(e,t=!0,i){return function(e,t,i=!0,s=ol("builder","Include in the dataset"),o=ol("builder","Exclude from the dataset")){const n=[];let r=!1;if(!N(t)&&"ref"in t)ee(t.props,(e=>{n.push(new Zl(e.label,Zl.bind(t.ref,e.name,void 0,i))),r=r||T(Ye(t.ref,e.name))}));else{const e={get exportable(){return(N(t)?t():t).exportable},set exportable(e){(N(t)?t():t).exportable=e}};n.push(new Fl([{label:s,value:!0},{label:o,value:!1}],Fl.bind(e,"exportable",void 0,i))),r=T(e.exportable)}return e.option({name:ol("builder","Exportability"),form:{title:ol("builder","Exportability"),controls:n},activated:r})}(this,e,t,i)}transformations(e){return function(e,t){const i={get transformation(){return(N(t)?t():t).transformation},set transformation(e){(N(t)?t():t).transformation=e}};return e.option({name:ol("builder","Transform"),form:{title:ol("builder","Transform"),controls:[new Fl([{label:ol("builder","Do nothing"),value:"none"},{label:ol("builder","Capitalize first character"),value:"capitalize"},{label:ol("builder","Capitalize first character of each sentence"),value:"capitalize-sentences"},{label:ol("builder","Capitalize each word"),value:"capitalize-words"},{label:ol("builder","Convert all characters to lowercase"),value:"lowercase"},{label:ol("builder","Convert all characters to uppercase"),value:"uppercase"}],Fl.bind(i,"transformation",void 0)).label(ol("builder","Apply the following transformation to the text value:"))]},activated:_(i.transformation)})}(this,e)}visibility(){return function(e){if(e.reference instanceof ds||e.reference instanceof ys){let t;const i=e.reference instanceof ys?e.reference:e.reference.node,s=e.option({name:Ec(i),form:{title:Ec(i),controls:[t=new Zl(Oc(i),Zl.bind(i,"disabled",void 0))]},activated:T(i.disabled)});return i.hook("OnDisable","synchronous",(()=>{t.pauseBinding(),t.checked(!!i.disabled),i.disabled&&s.activate(),t.resumeBinding()}),e),i.hook("OnTypeChange","synchronous",(()=>{s.name=Ec(i),s.card instanceof Xa&&(s.card.title=Ec(i)),t.label(Oc(i))}),e),s}throw new Error("Tripetto: The `visibility` feature can only be used on nodes.")}(this)}scores(e){return function(e,t){const i=Tc(e,Object.assign(Object.assign({exportable:!0},t),{collection:t.collection instanceof Ca?t.collection.card instanceof Ol&&t.collection.card||void 0:t.collection,reference:"score",label:ol("builder","Score"),name:ol("builder","Score"),title:ol("builder","Score")}));return t.collection instanceof Ca&&(i.disabled(!t.collection.isActivated),t.collection.hook("OnToggle","synchronous",(()=>{var e,s;i.isDisabled=!(null===(e=t.collection)||void 0===e?void 0:e.isActivated)||!(null===(s=t.collection)||void 0===s?void 0:s.isVisible)})),t.collection.hook("OnVisible","synchronous",(()=>{var e,s;i.isDisabled=!(null===(e=t.collection)||void 0===e?void 0:e.isActivated)||!(null===(s=t.collection)||void 0===s?void 0:s.isVisible)}))),i}(this,e)}numeric(e){return Tc(this,e)}}class Rc extends el{constructor(e,t=!1,i){super({style:i,styleName:"buttons",styleDefault:Rc.style}),this.m_pElements=[],this.m_pButtons=e,this.m_bAnimated=t}onDraw(e){var t,i;const s=this.isFused?e:e.create("div"),o=e=>{this.m_bAnimated&&(e.style({visibility:"hidden",[So.selector("animated")]:{visibility:"inherit"},[So.selector("animate")]:{"@keyframes":{from:{opacity:0,transform:"translate3d(0, 200%, 0)"},to:{opacity:1,transform:"translate3d(0, 0, 0)"}},opacity:0,animationDuration:".15s",animationDelay:.02*++r+"s",animationTimingFunction:"ease-out"}}),this.m_pElements.push(e))};let n,r=0;return s.style([{margin:0},this.style?this.style.appearance:void 0,this.isFused&&this.style?this.style.fused:void 0,{width:"100%",maxWidth:"100%",boxSizing:"border-box",display:"flex"}],this.stylesheet),ee(this.m_pButtons,(e=>{var t,i,r,a,l,c,u,h,d,p,m,g,b,f,y,v,M,w,x,S,I;C(e)&&s.create("div",(t=>{t.text=e,o(t)}),[null===(t=this.style)||void 0===t?void 0:t.group,{display:"block",width:"100%"}],this.stylesheet),!_(e)&&n||(n=s.create("div",void 0,{display:"flex",flexDirection:"row",flexWrap:"wrap",marginRight:-((null===(r=null===(i=this.style)||void 0===i?void 0:i.button)||void 0===r?void 0:r.spacing)||0),"&:last-child":{marginBottom:-((null===(l=null===(a=this.style)||void 0===a?void 0:a.button)||void 0===l?void 0:l.spacing)||0)}},this.stylesheet)),!_(e)&&n&&n.create("button",(t=>{var i,s,n,r;e.image&&t.create("span",void 0,[null===(s=null===(i=this.style)||void 0===i?void 0:i.button)||void 0===s?void 0:s.image,{display:"inline-block",backgroundRepeat:"no-repeat",backgroundImage:`url("${e.image}")`}],this.stylesheet),t.property("disabled",e.disabled||!1),t.textAppend(e.label),e.badge&&t.append("span",(t=>{t.text=e.badge||""}),null===(r=null===(n=this.style)||void 0===n?void 0:n.button)||void 0===r?void 0:r.badge,this.stylesheet),xr.mode(t,"exclusive"),Lr.on(t,(e=>t.toggleSelectorSafe("hover",e.isHovered))),Dr.on(t,(()=>e.on()),(()=>t.addSelectorSafe("tap")),(()=>t.removeSelectorSafe("tap"))),o(t)}),[{margin:0,textOverflow:"ellipsis",flexGrow:1,display:"flex",justifyContent:"left",alignItems:"center"},null===(u=null===(c=this.style)||void 0===c?void 0:c.button)||void 0===u?void 0:u.appearance,{width:"auto",maxWidth:`calc(50% - ${(null===(d=null===(h=this.style)||void 0===h?void 0:h.button)||void 0===d?void 0:d.spacing)||0}px)`,boxSizing:"border-box",whiteSpace:"nowrap",overflow:"hidden",appearance:"none",userSelect:"none",textDecoration:"none",marginRight:(null===(m=null===(p=this.style)||void 0===p?void 0:p.button)||void 0===m?void 0:m.spacing)||0,marginBottom:(null===(b=null===(g=this.style)||void 0===g?void 0:g.button)||void 0===b?void 0:b.spacing)||0,flexWrap:"nowrap","&:hover":{textDecoration:"none"},"&:focus":{outline:"0",boxshadow:"none"},"&::-moz-focus-inner":{border:"none"},[So.selector("hover")]:null===(y=null===(f=this.style)||void 0===f?void 0:f.button)||void 0===y?void 0:y.hover,[So.selector("focus")]:null===(M=null===(v=this.style)||void 0===v?void 0:v.button)||void 0===M?void 0:M.focus,[So.selector("tap")]:null===(x=null===(w=this.style)||void 0===w?void 0:w.button)||void 0===x?void 0:x.tap,"&:disabled":Object.assign({pointerEvents:"none"},null===(I=null===(S=this.style)||void 0===S?void 0:S.button)||void 0===I?void 0:I.disabled)}],this.stylesheet)})),this.m_bAnimated&&(null===(i=null===(t=this.form)||void 0===t?void 0:t.cards)||void 0===i||i.layer.hook("OnShow","framed",(()=>{var e,t;ee(this.m_pElements,(e=>{e.animateSelector("animate",void 0,!0),e.addSelectorSafe("animated")})),null===(t=null===(e=this.form)||void 0===e?void 0:e.cards)||void 0===t||t.layer.unhookContext(this)}),this)),s}}const Hc="rgba(44,64,90,0.96)",Fc="rgba(0,106,194,0.8)",Uc="rgb(0,106,194)",Bc="rgb(255,255,255)",Yc="rgba(255,255,255,0.25)",Zc="rgba(0,106,194,0.9)",Vc="rgba(255,255,255,0.7)",Wc="rgba(255,255,255,0.2)",Gc="rgba(255,255,255,1)",$c="rgba(255,255,255,1)",Qc="rgba(129,201,37,0.2)",qc="rgb(129,201,37)",Xc="rgb(255,255,255)",Jc="rgb(183,210,229)",Kc="rgba(255,255,255,0.8)",eu="rgba(0,106,194,0.9)",tu="rgba(255,255,255,0.8)",iu={Splitter:"rgb(216,229,238)",Label:"rgba(63,83,110,0.48)",LabelNamed:"rgba(63,83,110,1)",Button:{Background:"transparent",BackgroundHover:"rgb(141,171,196)",BackgroundTap:"rgb(141,171,196)",BackgroundSelected:"rgb(141,171,196)",Color:"rgb(141,171,196)",ColorHover:"rgb(255,255,255)",ColorTap:"rgb(255,255,255)",ColorSelected:"rgb(255,255,255)"}},su={Splitter:"rgb(216,229,238)",Color:"rgb(0,147,238)"},ou={Background:"transparent",Border:"rgb(183,210,229)"},nu="rgb(250,251,252)",ru="rgb(183,210,229)",au="rgba(250,251,252,0.8)",lu="rgba(0,106,194,0.9)",cu="rgba(250,251,252,0.8)",uu={Splitter:"rgb(216,229,238)",Label:"rgba(63,83,110,0.48)",LabelNamed:"rgba(63,83,110,1)",Button:{Background:"transparent",BackgroundHover:"rgb(141,171,196)",BackgroundTap:"rgb(141,171,196)",BackgroundSelected:"rgb(141,171,196)",Color:"rgb(141,171,196)",ColorHover:"rgb(255,255,255)",ColorTap:"rgb(255,255,255)",ColorSelected:"rgb(255,255,255)"}},hu={Splitter:"rgb(216,229,238)",Color:"rgb(0,147,238)"},du={Background:"transparent",Border:"rgb(183,210,229)"},pu="rgb(250,251,252)",mu="rgba(250,251,252,0.8)",gu="rgba(0,106,194,0.9)",bu="rgba(250,251,252,0.6)",fu="rgba(63,83,110,1)",yu="rgba(63,83,110,0.48)",vu="rgb(168,198,223)",Mu="rgb(229,238,245)",wu="rgb(229,238,245)",xu="rgb(216,229,238)",Su={Background:"transparent",Border:"rgb(183,210,229)"},Iu="rgb(255,255,255)",ku="rgba(255,255,255,0.8)",Nu="rgba(0,106,194,0.9)",_u="rgba(255,255,255,0.6)",Lu="rgba(63,83,110,0.48)",Cu="rgba(63,83,110,1)",Du="rgb(141,171,196)",Au="rgb(168,198,223)",ju="rgb(78,206,61)",Tu="rgb(253,123,31)",zu="rgb(229,238,245)",Eu="rgb(216,229,238)",Ou={Background:"transparent",BackgroundHover:"rgb(141,171,196)",BackgroundTap:"rgb(141,171,196)",BackgroundSelected:"rgb(141,171,196)",Color:"rgb(141,171,196)",ColorHover:"rgb(255,255,255)",ColorTap:"rgb(255,255,255)",ColorSelected:"rgb(255,255,255)"},Pu={Background:"transparent",Border:"rgb(183,210,229)"},Ru="rgb(129,201,38)",Hu="rgb(129,201,38)",Fu="rgb(183,210,229)",Uu={Color:"rgba(44,64,90,0.2)",Hover:"rgba(44,64,90,0.2)",Focus:"rgba(44,64,90,0.4)",Drag:"rgba(44,64,90,0.6)",Crawl:"rgba(44,64,90,0.6)"},Bu={Crawl:"rgba(44,64,90,0.1)"},Yu="rgba(44,64,90,0.6)",Zu="rgb(255,255,255)",Vu="rgb(216,229,238)",Wu="rgba(250,251,252,0.9)",Gu="rgb(44,64,89)",$u={Background:"rgb(0,147,238)",BackgroundHover:"rgb(2,133,215)",BackgroundTap:"rgb(0,121,197)",Face:"rgb(255,255,255)"},Qu={Background:"rgb(78,206,61)",BackgroundHover:"rgb(64,183,48)",BackgroundTap:"rgb(57,161,43)",Face:"rgb(255,255,255)"},qu={Background:"rgb(253,123,31)",BackgroundHover:"rgb(252,107,3)",BackgroundTap:"rgb(227,96,2)",Face:"rgb(255,255,255)"},Xu={Background:"rgb(255,21,31)",BackgroundHover:"rgb(230,0,11)",BackgroundTap:"rgb(204,0,10)",Face:"rgb(255,255,255)"},Ju={Border:"rgb(197,217,232)",Background:"rgb(255,255,255)",BackgroundHover:"rgb(225,236,245)",BackgroundTap:"rgb(197,217,232)",Face:"rgb(0,147,238)"},Ku="rgb(141,171,196)",eh="rgb(44,64,90)",th={Background:"rgb(236,245,253)",Face:"rgb(0,147,238)"},ih="rgb(251,252,253)",sh="rgb(183,210,229)",oh="rgb(44,64,89)",nh="rgb(255,255,255)",rh="rgb(236,245,253)",ah="rgb(236,245,253)",lh="rgb(168,198,223)",ch="rgb(168,198,223)",uh="rgb(168,198,223)",hh="rgb(141,171,196)",dh="rgb(0,147,238)",ph="rgb(141,171,196)",mh="rgb(63,83,110)",gh="rgb(255,21,31)",bh="rgb(255,21,31)",fh={Background:"rgb(0,147,238)",Color:"rgb(255,255,255)"},yh={Background:"rgb(102,102,102)",Face:"rgb(255,255,255)"},vh={Background:"rgb(0,147,238)",Face:"rgb(255,255,255)"},Mh={Background:"rgb(78,206,61)",Face:"rgb(255,255,255)"},wh={Background:"rgb(253,123,31)",Face:"rgb(255,255,255)"},xh={Background:"rgb(255,21,31)",Face:"rgb(255,255,255)"},Sh={Color:"rgba(216,229,238,0.8)",Hover:"rgba(216,229,238,0.8)",Focus:"rgba(216,229,238,1)",Drag:"rgba(216,229,238,1)",Crawl:"rgba(216,229,238,1)"},Ih={Crawl:"rgba(216,229,238,0.2)"},kh="rgba(216,229,238,0.6)",Nh="rgb(44,64,89)",_h="rgb(168,198,223)",Lh="rgb(216,229,239)",Ch="rgb(251,252,253)",Dh="rgb(236,245,253)",Ah="rgb(0,147,238)",jh="rgba(0,147,238,0.8)",Th="rgb(63,83,110)",zh="rgba(168,198,223,0.5)",Eh="rgb(255,255,255)",Oh="rgba(255,255,255,0.8)",Ph="rgb(168,198,223)",Rh="#3F536E",Hh="#3F536E",Fh="#8DABC4",Uh="#3F536E",Bh="#E5EEF5";class Yh extends gl{constructor(e,t,i){if(super(e,t,"",void 0,t.layout instanceof cc&&t.layout.style),t.hook("OnBlockChange","synchronous",(()=>this.onBlockChange()),this),t.hook("OnTypeChange","synchronous",(()=>this.onTypeChange()),this),e.hook("OnBeforeShowPanel","synchronous",(()=>this.typeButtonDisabled(!0))),e.hook("OnClosePanel","synchronous",(()=>this.typeButtonDisabled(!1))),t.layout instanceof cc){const s=t.layout.renderer;e.hook("OnShow","framed",(()=>s.onEdit("start","node",t))),e.hook("OnClose","framed",(()=>s.onEdit("end","node",t))),i&&t.layout.scrollIntoView()}e.hook("OnClose","synchronous",(()=>{Yh.m_pEditor&&Yh.m_pEditor.node===t&&(Yh.m_pEditor=void 0)}))}static open(e,t,i=!1){return new Yh(e,t,i)}static openPanel(e,t,i=!1){if(this.m_pEditor&&this.m_pEditor.node===t)return this.m_pEditor.layer;const s=t.layout&&t.layout.style;return(this.m_pEditor={node:t,layer:e.createPanel((e=>{this.open(e,t,i)}),ta.configuration.width(s?s.forms.width.normal:0).animation(Br.Zoom).autoCloseChildPanels("stroke"))}).layer}get node(){return this.ref}get typeIcon(){switch(this.node.type){case"undefined":case"static":return this.style.map.blocks.static;case"branch":return this.style.map.blocks.branch;case"note":return this.style.map.blocks.note;case"error":return this.style.map.blocks.error;default:return this.node.type.icon}}get typeLabel(){switch(this.node.type){case"undefined":case"static":return ol("builder","Static text");case"branch":return ol("builder","Branch");case"note":return ol("builder","Note");case"error":return ol("builder","Invalid block");default:return this.node.type.label}}typeButtonDisabled(e){this.m_pTypeButton&&this.m_pTypeButton.disabled(e)}onBlockChange(){const e=this.node.block&&this.node.block.type;if(e!==this.m_pType||!this.m_pBlock){const t=this.node.renderer instanceof Qh&&this.node.renderer.tier||void 0,i=t&&(null==e?void 0:e.flag(t.name))&&"enabled"!==t.mode;this.m_pType=e,this.m_pBlock&&this.m_pBlock.close(),this.m_pBlock=this.layer.createLayer((e=>{const s=this.cards=new Aa({style:Object.assign(Object.assign({},this.style.forms.cards),{spacing:new Li(0,this.style.forms.header.height,0,0)}),layer:e});i?t&&(t.message?t.message(new Pc(s,this.node,(()=>this.close()))):function(e,t){e.form({controls:[new tl(ol("builder","Not all properties are shown, because the block '%1' is not available in the tier '%2'.",e.reference.blockTypeIdentifier,t.name),"error")]})}(new Pc(s,this.node,(()=>this.close())),t)):(this.node.block instanceof Sa&&wt("editor",this.node.block,Fe(this.node.block,"orchestratorForEditor",new Pc(s,this.node.block,(()=>this.close())))),s.isFeaturesSupported||0!==s.count||function(e){e.reference.isBlockInvalid&&e.form({controls:[new tl(ol("builder","Not all properties are shown, because the block '%1' is not available.",e.reference.blockTypeIdentifier),"error")]}),e.name(),e.description(),function(e){const t=cs.active.nodeBlocks.all,i=e.reference.renderer instanceof Qh&&e.reference.renderer.tier||void 0,s=[],o=[];ee(ce(t,(e=>"ui"===e.kind)),(t=>{const o=i&&t.flag(i.name)||!1;o&&"hidden"===(null==i?void 0:i.mode)||s.push({label:t.label,image:t.icon&&vc(t.icon,mh),badge:o&&(null==i?void 0:i.name)||void 0,disabled:o&&"disabled"===(null==i?void 0:i.mode)&&!(null==i?void 0:i.message),on:()=>e.reference.assignBlock(t)})})),ee(ce(t,(e=>"headless"===e.kind)),(t=>{const s=i&&t.flag(i.name)||!1;s&&"hidden"===(null==i?void 0:i.mode)||o.push({label:t.label,image:t.icon&&vc(t.icon,mh),badge:s&&(null==i?void 0:i.name)||void 0,disabled:s&&"disabled"===(null==i?void 0:i.mode)&&!(null==i?void 0:i.message),on:()=>e.reference.assignBlock(t)})})),(s.length>0||o.length>0)&&e.option({name:ol("builder","Type"),activated:!e.reference.name&&!e.reference.description,form:{title:ol("builder","Type"),controls:[new Rc([...s,...s.length>0&&o.length>0?[ol("builder","Action")]:[],...o],!e.reference.name&&!e.reference.description)]}})}(e),e.groups.options(),e.visibility()}(new Pc(s,this.node,(()=>this.close())))),this.onLayerUpdate(),e.hook("OnDestroy","synchronous",(()=>this.node.unhookContext(s))),this.closeButton&&(this.closeButton.disabled("pass"!==this.cards.validation&&"unknown"!==this.cards.validation),this.cards.hook("OnValidated","framed",(e=>this.closeButton.disabled("pass"!==e.cards.validation&&"unknown"!==e.cards.validation))))}),ta.configuration.animation(Br.Fade))}}onTypeChange(){this.m_pTypeLabel&&(this.m_pTypeLabel.icon=this.typeIcon,this.m_pTypeLabel.label=this.typeLabel)}onHeader(){return[this.m_pTypeLabel=new jc(this.style,this.typeIcon,this.typeLabel),this.m_pTypeButton=new pl(this.style.forms.header.buttons.type,ol("builder","Change type"),(()=>{const e=[new fa(`${this.style.map.blocks.static}`,ol("builder","Static text"),(()=>this.node.unassignBlock()),!this.node.hasBlock)],t=cs.active.nodeBlocks.all,i=ce(t,(e=>"ui"===e.kind)),s=ce(t,(e=>"headless"===e.kind)),o=this.node.renderer instanceof Qh&&this.node.renderer.tier||void 0;let n=!0;return ee(i,(t=>{const i=o&&t.flag(o.name)||!1;i&&"hidden"===(null==o?void 0:o.mode)||(n&&(e.push(new ya),n=!1),e.push(new fa(t.icon,t.label,(()=>this.node.assignBlock(t)),t.identifier===this.node.blockTypeIdentifier||i&&"disabled"===(null==o?void 0:o.mode)&&!(null==o?void 0:o.message)).badge(i&&(null==o?void 0:o.name)||"")))})),s.length>0&&(n=!0,ee(s,(t=>{const i=o&&t.flag(o.name)||!1;i&&"hidden"===(null==o?void 0:o.mode)||(n&&(e.push(new ya,new qr(ol("builder","Actions"))),n=!1),e.push(new fa(t.icon,t.label,(()=>this.node.assignBlock(t)),t.identifier===this.node.blockTypeIdentifier||i&&"disabled"===(null==o?void 0:o.mode)&&!(null==o?void 0:o.message)).badge(i&&(null==o?void 0:o.name)||"")))}))),e})).disabled(this.node.isBlockInvalid)]}onLayer(){this.onBlockChange()}onCards(){}onDestroy(){this.node.block instanceof Sa&&Fe(this.node.block,"orchestratorForEditor",void 0),this.node.unhookContext(this),super.onDestroy()}}class Zh extends cc{constructor(e,t,i){super(e,t,i,!0),this.m_sBackground=""}get configuration(){return new Ci([{name:"self",width:this.style.map.nodes.width,height:this.style.map.nodes.height},{name:"children",spacingLeft:this.style.map.nodes.width-(this.style.map.branches.junction.width-this.style.map.branches.junction.size)/2+(this.style.map.clusters.width-this.style.map.nodes.width)/2}])}get node(){return this.parent}get nodes(){return this.node.parent}background(){if(!this.element)return;const e=this.node.isLast,t=yc({orientation:"horizontal",alignment:"bottom",color:e?this.style.map.nodes.separator.last:this.style.map.nodes.separator.between,width:this.style.map.nodes.width,height:this.style.map.nodes.height,thickness:1,spacing:new Li(e?0:16,0,e?0:16,0)});t!==this.m_sBackground&&(this.m_sBackground=t,ur.background(this.element,this.style.map.nodes.width,this.style.map.nodes.height,this.m_sBackground,!0,!1))}draw(e,t,i,s,o,n,r){var a;const l=!!this.node.disabled,c=this.node.block instanceof Sa&&this.node.block.isRequired,u=C(this.node.label);let h,d,p,m;if(this.element){switch(this.node.type){case"undefined":d=ol("builder","Tap or click to change"),p=ol("builder","No behavior specified"),m=this.style.map.blocks.undefined;break;case"static":d=ol("builder","No title specified"),p=ol("builder","Static text"),m=this.style.map.blocks.static;break;case"branch":d=ol("builder","No description specified"),p=ol("builder","Branch"),m=this.style.map.blocks.branch;break;case"note":d="",p=ol("builder","Note"),m=this.style.map.blocks.note;break;case"error":d="",p=ol("builder","Invalid block"),m=this.style.map.blocks.error;break;default:d=ol("builder","No name specified"),p=this.node.block?this.node.block.label:this.node.type.label,m=this.node.block instanceof Sa?this.node.block.icon:""}r||(this.element.style([this.style.map.nodes.appearance,{[So.selector("named")]:this.style.map.nodes.named,[So.selector("required")]:this.style.map.nodes.required,[So.selector("moving")]:this.style.map.nodes.moving,[So.selector("following")]:this.style.map.nodes.following,[So.selector("ensuing")]:this.style.map.nodes.ensuing,[So.selector("disabled")]:this.style.map.nodes.disabled}],this.stylesheet),this.background(),this.style.map.rulers&&this.enableRulers("rgba(0,255,0,0.5)")),this.node.block instanceof Sa&&(h=this.node.block.draw(this.element,i,s,r,l,c,u),h&&(this.m_pIcon=h.icon,this.m_pLabel=h.label,this.m_pType=h.type,this.m_pButton=h.button)),h||r||(this.m_pIcon=this.element.create("div",void 0,[this.style.map.nodes.icon.appearance,{[So.selector("required")]:this.style.map.nodes.icon.required}],this.stylesheet),this.m_pLabel=this.element.create("div",void 0,[this.style.map.nodes.label.appearance,{[So.selector("named")]:this.style.map.nodes.label.named,[So.selector("required")]:this.style.map.nodes.label.required,[So.selector("variable","span")]:this.style.map.nodes.label.variable}],this.stylesheet),this.m_pType=this.element.create("div",void 0,this.style.map.nodes.type,this.stylesheet),this.m_pButton=this.element.create("div",(e=>{xl(59881,e),Dr.single(e,(()=>this.contextMenu()),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[this.style.map.nodes.button.appearance,{[So.selector("hover")]:this.style.map.nodes.button.hover,[So.selector("tap")]:this.style.map.nodes.button.tap,[So.selector("selected")]:this.style.map.nodes.button.selected}],this.stylesheet)),this.element.selector("disabled",l),this.element.selector("required",c),this.element.selector("named",u),this.m_pLabel&&(this.m_pLabel.selector("required",c),this.m_pLabel.selector("named",u),u?Dl(this.m_pLabel,this.node.labelMarkdown,this.node,(e=>e.addSelector("variable")),!0===(null===(a=this.node.block)||void 0===a?void 0:a.allowMarkdown)?Xi.Formatting|Xi.InlineCode:Xi.None):this.m_pLabel.text=d),this.m_pType&&(this.m_pType.text=p),this.m_pIcon&&(this.m_pIcon.selector("required",c),this.m_pIcon.set("background-image",`url("${vc(m,this.style.map.nodes.icon.color)}")`)),r||Dr.single(this.element,(()=>this.edit()))}}onPush(){super.onPush(),this.background()}onLast(){super.onLast(),this.background()}onGuides(){super.onGuides(this.isMoving&&dr.create("div",(e=>e.create("div",void 0,[{position:"absolute",left:0,right:0,top:0,bottom:0},this.style.map.nodes.guides&&this.style.map.nodes.guides.appearance],this.stylesheet)),this.layer.context,void 0,{position:"absolute",contain:"strict",transformOrigin:"0 0 0",[So.selector("visible")]:this.style.map.nodes.guides&&this.style.map.nodes.guides.visible,[So.selector("invisible")]:this.style.map.nodes.guides&&this.style.map.nodes.guides.invisible},this.stylesheet)||void 0,!0)}onGuidesChange(e,t,i,s,o,n){this.guides&&(this.guides.selectorSafe("invisible",!e),Pe((()=>{this.guides&&(this.guides.selectorSafe("visible",e),this.guides.selectorSafe("invisible",!e))}))),super.onGuidesChange(e,t,i,s,o,n)}edit(){this.node.block instanceof Sa&&this.node.block.open(this.layer)||Yh.openPanel(this.layer,this.node)}contextMenu(){const e=this.m_pButton,t=!this.node.isFirst,i=!!this.node.successor,s=fc(this.node,this),o=[new fa(`${this.style.map.blocks.static}`,ol("builder","Static text"),(()=>this.node.unassignBlock()),!this.node.hasBlock)];if(!e)return;const n=cs.active.nodeBlocks.all,r=ce(n,(e=>"ui"===e.kind)),a=ce(n,(e=>"headless"===e.kind)),l=this.renderer instanceof Qh&&this.renderer.tier||void 0;let c=!0;ee(r,(e=>{const t=l&&e.flag(l.name)||!1;t&&"hidden"===(null==l?void 0:l.mode)||(c&&(o.push(new ya),c=!1),o.push(new fa(e.icon,e.label,(()=>this.node.assignBlock(e)),e.identifier===this.node.blockTypeIdentifier||t&&"disabled"===(null==l?void 0:l.mode)&&!(null==l?void 0:l.message)).badge(t&&(null==l?void 0:l.name)||"")))})),a.length>0&&(c=!0,ee(a,(e=>{const t=l&&e.flag(l.name)||!1;t&&"hidden"===(null==l?void 0:l.mode)||(c&&(o.push(new ya,new qr(ol("builder","Actions"))),c=!1),o.push(new fa(e.icon,e.label,(()=>this.node.assignBlock(e)),e.identifier===this.node.blockTypeIdentifier||t&&"disabled"===(null==l?void 0:l.mode)&&!(null==l?void 0:l.message)).badge(t&&(null==l?void 0:l.name)||"")))})));const u=pc("branches");ga.openAtElement([...s.length>0?[new qr(ol("builder","Add branch")),...s,...u?[...s.length<2||!(s[s.length-2]instanceof ya)?[new ya]:[],new kl(59699,ol("builder","Help with branches"),u,"blank")]:[],new ya]:[],new qr(ol("builder","Item")),new Il(58893,ol("builder","Properties"),(()=>this.edit())),new Nl(59691,ol("builder","Type"),o,this.node.isBlockInvalid),...this.node.disabled?[new Il(59045,ol("builder","Enable"),(()=>this.node.enable()))]:[new Il(59046,ol("builder","Disable"),(()=>this.node.disable()))],new Nl(59709,ol("builder","Move"),[new Il(59713,ol("builder","Up"),(()=>this.animate((()=>this.node.index--))),!t),new Il(59714,ol("builder","Down"),(()=>this.animate((()=>this.node.index++))),!i)],!t&&!i),new Il(59064,ol("builder","Duplicate"),(()=>this.node.duplicate())),new ya,new Il(59701,ol("builder","Delete"),(()=>this.animate((()=>this.node.delete()))))],e,{style:this.style.menu,position:"right-from-center",onOpen:()=>e.addSelectorSafe("selected"),onClose:()=>e.removeSelectorSafe("selected")})}destroy(){this.m_pIcon=void 0,this.m_pLabel=void 0,this.m_pType=void 0,this.m_pButton=void 0,super.destroy()}}class Vh extends gl{constructor(e,t,i){if(super(e,t,"",void 0,t.layout instanceof cc&&t.layout.style),t.hook("OnBlockChange","synchronous",(()=>this.close()),this),t.layout instanceof cc){const s=t.layout.renderer;e.hook("OnShow","framed",(()=>s.onEdit("start","condition",t))),e.hook("OnClose","framed",(()=>s.onEdit("end","condition",t))),e.hook("OnClose","synchronous",(()=>{Vh.m_pEditor&&Vh.m_pEditor.condition===t&&(Vh.m_pEditor=void 0)})),i&&t.layout.scrollIntoView()}}static open(e,t,i=!1){return new Vh(e,t,i)}static openPanel(e,t,i=!1){if(this.m_pEditor&&this.m_pEditor.condition===t)return this.m_pEditor.layer;const s=t.layout&&t.layout.style;return(this.m_pEditor={condition:t,layer:e.createPanel((e=>{this.open(e,t,i)}),ta.configuration.width(s?s.forms.width.small:0).animation(Br.Zoom).autoCloseChildPanels("stroke"))}).layer}get condition(){return this.ref}get typeIcon(){return!this.condition.isBlockInvalid&&this.condition.block instanceof Zs?this.condition.block.type.icon:this.style.map.blocks.error}get typeLabel(){return this.condition.isBlockInvalid?ol("builder","Invalid block"):this.condition.block instanceof Zs?this.condition.block.title||this.condition.block.type.label:ol("builder","Condition properties")}onHeader(){return[new jc(this.style,this.typeIcon,this.typeLabel)]}onCards(e){this.condition.isBlockInvalid&&e.add(new Xa({controls:[new tl(ol("builder","Not all properties are shown, because the block '%1' is not available.",this.condition.blockTypeIdentifier),"error")]})),this.condition.block instanceof Zs&&wt("editor",this.condition.block,Fe(this.condition.block,"orchestratorForEditor",new bl(e,this.condition.block,(()=>this.close()))))}onDestroy(){this.condition.block instanceof Zs&&Fe(this.condition.block,"orchestratorForEditor",void 0),this.condition.unhookContext(this),super.onDestroy()}}class Wh extends cc{constructor(e,t,i){super(e,t,i,!0),this.m_sBackground=""}get configuration(){return new Ci([{name:"self",width:this.style.map.conditions.width,height:this.style.map.conditions.height}])}get condition(){return this.parent}get conditions(){return this.condition.parent}get x(){const e=this.condition.branch;return e?e.rectangles.rectangle("self").left+(this.style.map.branches.junction.width-this.style.map.branches.junction.size)/2+(this.style.map.clusters.width-this.style.map.conditions.width)/2:0}get y(){const e=this.condition.branch;return e?e.rectangles.rectangle("self").top+this.style.map.branches.top+this.style.map.branches.header.height:0}background(){if(!this.element)return;const e=this.condition.isLast,t=yc({orientation:"horizontal",alignment:"bottom",color:e?this.style.map.conditions.separator.last:this.style.map.conditions.separator.between,width:this.style.map.conditions.width,height:this.style.map.conditions.height,thickness:1,spacing:new Li(e?0:16,0,e?0:16,0)});t!==this.m_sBackground&&(this.m_sBackground=t,ur.background(this.element,this.style.map.conditions.width,this.style.map.conditions.height,this.m_sBackground,!0,!1))}draw(e,t,i,s,o,n,r){var a;const l=!!this.condition.disabled,c=C(this.condition.name),u=this.condition.block instanceof Zs?this.condition.block.icon:this.condition.isBlockInvalid?this.style.map.blocks.error:this.style.map.blocks.undefined;let h;this.element&&(r||(this.element.style([this.style.map.conditions.appearance,{[So.selector("named")]:this.style.map.conditions.named,[So.selector("moving")]:this.style.map.conditions.moving,[So.selector("following")]:this.style.map.conditions.following,[So.selector("ensuing")]:this.style.map.conditions.ensuing,[So.selector("disabled")]:this.style.map.conditions.disabled}],this.stylesheet),this.background(),this.style.map.rulers&&this.enableRulers("rgba(0,255,255,0.5)")),this.condition.block instanceof Zs&&(h=this.condition.block.draw(this.element,i,s,r),h&&(this.m_pIcon=h.icon,this.m_pText=h.text,this.m_pName=h.name,this.m_pLabel=h.label,this.m_pButton=h.button)),h||r||(this.m_pIcon=this.element.create("div",void 0,this.style.map.conditions.icon.appearance,this.stylesheet),this.m_pText=this.element.create("div",(e=>{this.m_pName=e.create("span",void 0,this.style.map.conditions.text.name,this.stylesheet),this.m_pLabel=e.create("span",void 0,this.style.map.conditions.text.label,this.stylesheet)}),[this.style.map.conditions.text.appearance,{[So.selector("named")]:this.style.map.conditions.text.named,[So.selector("variable","span")]:this.style.map.conditions.text.variable,code:this.style.map.conditions.text.variable}],this.stylesheet),this.m_pButton=this.element.create("div",(e=>{xl(59881,e),Dr.single(e,(()=>this.contextMenu()),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[this.style.map.conditions.button.appearance,{[So.selector("hover")]:this.style.map.conditions.button.hover,[So.selector("tap")]:this.style.map.conditions.button.tap,[So.selector("selected")]:this.style.map.conditions.button.selected}],this.stylesheet)),this.element.selector("disabled",l),this.element.selector("named",c),this.m_pIcon&&this.m_pIcon.set("background-image",`url("${vc(u,this.style.map.conditions.icon.color)}")`),this.m_pText&&this.m_pText.selector("named",c),this.m_pName&&(c?Dl(this.m_pName,this.condition.nameMarkdown,this.condition,(e=>e.addSelector("variable")),!0===(null===(a=this.condition.block)||void 0===a?void 0:a.allowMarkdown)?Xi.Formatting|Xi.InlineCode:Xi.None):this.m_pName.text=this.condition.isBlockInvalid?ol("builder","Unknown condition"):ol("builder","Unnamed")),this.m_pLabel&&(this.m_pLabel.visible=C(this.m_pLabel.text=this.condition.label)),r||Dr.single(this.element,(()=>this.edit())))}onPush(){super.onPush(),this.background()}onLast(){super.onLast(),this.background()}onGuides(){super.onGuides(this.isMoving&&dr.create("div",(e=>e.create("div",void 0,[{position:"absolute",left:0,right:0,top:0,bottom:0},this.style.map.conditions.guides&&this.style.map.conditions.guides.appearance],this.stylesheet)),this.layer.context,void 0,{position:"absolute",contain:"strict",transformOrigin:"0 0 0",[So.selector("visible")]:this.style.map.conditions.guides&&this.style.map.conditions.guides.visible,[So.selector("invisible")]:this.style.map.conditions.guides&&this.style.map.conditions.guides.invisible},this.stylesheet)||void 0,!0)}onGuidesChange(e,t,i,s,o,n){this.guides&&(this.guides.selectorSafe("invisible",!e),Pe((()=>{this.guides&&(this.guides.selectorSafe("visible",e),this.guides.selectorSafe("invisible",!e))}))),super.onGuidesChange(e,t,i,s,o,n)}edit(){this.condition.block instanceof Zs&&this.condition.block.open(this.layer)||Vh.openPanel(this.layer,this.condition)}contextMenu(){const e=this.m_pButton;e&&ga.openAtElement([new qr(ol("builder","Condition")),new Il(58893,ol("builder","Properties"),(()=>this.edit())),new Nl(59691,ol("builder","Type"),fc(this.condition,this),this.condition.isBlockInvalid),...this.condition.disabled?[new Il(59045,ol("builder","Enable"),(()=>this.condition.enable()))]:[new Il(59046,ol("builder","Disable"),(()=>this.condition.disable()))],new Nl(59709,ol("builder","Move"),[new Il(59713,ol("builder","Up"),(()=>this.animate((()=>this.condition.index--))),this.condition.isFirst),new Il(59714,ol("builder","Down"),(()=>this.animate((()=>this.condition.index++))),this.condition.isLast)],this.condition.isFirst&&this.condition.isLast),new Il(59064,ol("builder","Duplicate"),(()=>this.condition.duplicate())),new ya,new Il(59701,ol("builder","Delete"),(()=>this.animate((()=>this.condition.delete()))))],e,{style:this.style.menu,position:"right-from-center",onOpen:()=>e.addSelectorSafe("selected"),onClose:()=>e.removeSelectorSafe("selected")})}destroy(){this.m_pIcon=void 0,this.m_pText=void 0,this.m_pName=void 0,this.m_pLabel=void 0,this.m_pButton=void 0,super.destroy()}}class Gh extends gl{constructor(e,t,i){if(super(e,{map:t,prologue:J(t.prologue||{})},ol("builder","Welcome message"),"normal",t.layout instanceof cc&&t.layout.style),this.onChange=[],t.layout){const i=t.layout.renderer;e.hook("OnShow","framed",(()=>i.onEdit("start","prologue",t.prologue,(e=>{this.onChange.push(e)})))),e.hook("OnClose","framed",(()=>{this.onChange.splice(0,this.onChange.length),i.onEdit("end","prologue",t.prologue)})),e.hook("OnClose","synchronous",(()=>{Gh.m_pEditor&&Gh.m_pEditor.map===t&&(Gh.m_pEditor=void 0)}))}i&&this.onChange.push(i)}static sanitize(e){let t;return ee(Object.keys(e),(i=>{const s=Be(e,i);x(s)||_(s)&&!s||Fe(t||(t={}),i,s)})),t}static open(e,t,i){return new Gh(e,t,i)}static openPanel(e,t,i){if(this.m_pEditor&&this.m_pEditor.map===t)return this.m_pEditor.layer;const s=t.layout&&t.layout.style;return(this.m_pEditor={map:t,layer:e.createPanel((e=>{this.open(e,t,i)}),ta.configuration.width(s?s.forms.width.normal:0).animation(Br.Zoom).autoCloseChildPanels("stroke"))}).layer}get prologue(){return this.ref.prologue}onCards(e){const t=new tt((()=>{if(!e.isFailed){const e=Gh.sanitize(J(this.prologue));K(e,this.ref.map.prologue,!0)||(this.ref.map.prologue=e,ee(this.onChange,(e=>{e(this.ref.map.prologue)})))}})),i=pc("prologue");e.features.card(new Xa({title:ol("builder","Explanation"),controls:[new jl(ol("builder","The welcome message is typically shown at the beginning of a form or survey. It depends on the runner how this welcome message is presented to the user. At the left side of the screen you can select the features you want to activate for the welcome message%1.",i?` ([${ol("builder","learn more")}](${i}))`:"")).markdown()]})),e.features.static(ol("builder","Message text")),e.features.option({name:ol("builder","Text"),card:new Xa({title:ol("builder","Text"),controls:[new Al("multiline",Al.bind(this.prologue,"title",void 0)).placeholder(ol("builder","Type here...")).on((()=>t.invoke()))]}),activated:!!this.prologue.title}),e.features.option({name:ol("builder","Description"),card:new Xa({title:ol("builder","Description"),controls:[new Al("multiline",Al.bind(this.prologue,"description",void 0)).placeholder(ol("builder","Type here...")).on((()=>t.invoke()))]}),activated:!!this.prologue.description}),e.features.static(ol("builder","More options")),e.features.option({name:ol("builder","Image"),card:new Xa({title:ol("builder","Image"),controls:[new Al("singleline",Al.bind(this.prologue,"image",void 0)).inputMode("url").placeholder("https://").on((()=>t.invoke())).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)||e.value.length>23&&0===e.value.indexOf("data:image/jpeg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/png;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/svg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/gif;base64,")||e.value.length>1&&"/"===e.value.charAt(0)?"pass":"fail"))]}),activated:!!this.prologue.image}),e.features.option({name:ol("builder","Video"),card:new Xa({title:ol("builder","Video"),controls:[new Al("singleline",Al.bind(this.prologue,"video",void 0)).inputMode("url").placeholder("https://").on((()=>t.invoke())).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)&&(wc(e.value)||Mc(e.value))?"pass":"fail")),new jl(ol("builder","Currently [YouTube](https://youtube.com) and [Vimeo](https://vimeo.com) videos are supported. Just click the share button of your video and paste the resulting embed link in the field above.")).markdown()]}),activated:!!this.prologue.video}),e.features.option({name:ol("builder","Button"),card:new Xa({title:ol("builder","Button"),controls:[new Al("singleline",Al.bind(this.prologue,"button",void 0)).placeholder(ol("builder","Type here...")).on((()=>t.invoke())),new jl(ol("builder","Some runners will show a button along with the welcome message. When a user clicks this button, the form will appear/begin. Here you can change the default text that is displayed inside that button."))]}),activated:!!this.prologue.button})}}class $h extends cc{constructor(e,t,i){super(e,t,i,!1)}get configuration(){return new Ci([{name:"self",minWidth:this.style.map.clusters.width,maxWidth:this.style.map.clusters.width},{name:"children",spacingTop:this.style.map.start.height,spacingBottom:this.style.map.clusters.junction.height+this.style.map.end.height,align:["self"]}])}get map(){return this.parent}draw(e,t,i,s,o,n,r){if(this.element&&!r){const e=this.style.map.start.height+(this.style.map.clusters.junction.height-this.style.map.clusters.junction.size)/2,t=this.style.map.end.height+(this.style.map.clusters.junction.height-this.style.map.clusters.junction.size)/2,i=this.renderer;this.element.style({[So.selector("ensuing")]:this.style.map.ensuing},this.stylesheet),this.m_pStart=this.element.create("div",i.supportsPrologue&&(e=>{e.selector("prologue",!!this.map.prologue),Dr.on(e,(()=>this.prologue()),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))})||void 0,{position:"absolute",left:(this.style.map.clusters.width-this.style.map.start.width)/2,top:0,width:this.style.map.start.width,height:e,backgroundImage:`url("${this.style.map.start.image}")`,backgroundRepeat:"no-repeat",[So.selector("prologue")]:{backgroundImage:`url("${this.style.map.start.prologue||this.style.map.start.image}")`},[So.selector("hover")]:{backgroundImage:`url("${this.style.map.start.hover||this.style.map.start.image}")`},[So.selector("tap")]:{backgroundImage:`url("${this.style.map.start.tap||this.style.map.start.image}")`}},this.stylesheet),this.m_pEnd=this.element.create("div",i.supportsEpilogue&&(e=>{e.selector("epilogue",!!this.map.epilogue),Dr.on(e,(()=>this.epilogue()),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))})||void 0,{position:"absolute",left:(this.style.map.clusters.width-this.style.map.end.width)/2,bottom:0,width:this.style.map.end.width,height:t,backgroundImage:`url("${this.style.map.end.image}")`,backgroundRepeat:"no-repeat",[So.selector("epilogue")]:{backgroundImage:`url("${this.style.map.end.epilogue||this.style.map.end.image}")`},[So.selector("hover")]:{backgroundImage:`url("${this.style.map.end.hover||this.style.map.end.image}")`},[So.selector("tap")]:{backgroundImage:`url("${this.style.map.end.tap||this.style.map.end.image}")`}},this.stylesheet),this.element.create("div",(e=>{Dr.on(e,(()=>this.animate((()=>{const e=this.map.clusters.append();1===this.map.clusters.count&&e.nodes.append()}))),(()=>e.addSelectorSafe("tap")),(()=>e.removeSelectorSafe("tap"))),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),{position:"absolute",left:(this.style.map.clusters.width-this.style.map.clusters.junction.width)/2,bottom:this.style.map.end.height,width:this.style.map.clusters.junction.width,height:this.style.map.clusters.junction.height,backgroundImage:`url("${this.style.map.clusters.junction.image}")`,backgroundRepeat:"no-repeat",transition:"background-image .2s",[So.selector("hover")]:{backgroundImage:`url("${this.style.map.clusters.junction.hover||this.style.map.clusters.junction.image}")`},[So.selector("tap")]:{backgroundImage:`url("${this.style.map.clusters.junction.tap||this.style.map.clusters.junction.image}")`}},this.stylesheet),this.style.map.rulers&&this.enableRulers("rgba(0,0,0,0.5)")}}onMoveExpansion(e,t,i){return new Ii(0,0,i instanceof js?e-i.left/this.map.zoom:0,0)}onIsMoveIn(t,i,s){if(s instanceof Ms){const s=this.map.rectangles.rectangle("self"),o=this.map.rectangles.rectangle("children");return!!e.inRange(t,s.left,s.right)&&!!e.inRange(i,o.top,s.bottom)}return!1}prologue(){Gh.openPanel(this.layer,this.map,(()=>{this.m_pStart&&this.m_pStart.selectorSafe("prologue",!!this.map.prologue)}))}epilogue(){Lc.openPanel(this.layer,this.map,!0,(()=>{this.m_pEnd&&this.m_pEnd.selectorSafe("epilogue",!!this.map.epilogue)}))}}class Qh extends lc{constructor(e,t,i,s,o,n,...r){super([{layout:$h,type:ws},{layout:Cc,type:js},{layout:Ac,type:Ms},{layout:Zh,type:ys},{layout:Wh,type:Ds}],e,t),this.m_bPanes=!0;const a=e=>ee(r,(t=>{!t||e&&!this.m_bPanes||(t.isVisible=e)}));this.m_pTier=i,this.m_pPanes=new tt(a,250),this.supportsPrologue=s,this.supportsEpilogue=o,e.hook("OnBeforeShowPanel","synchronous",(()=>{a(!1),this.m_bPanes=!1,this.m_pPanes.invoke(!1)})),e.hook("OnClosePanel","synchronous",(()=>{this.m_bPanes=!0,this.m_pPanes.invoke(!0)})),this.m_fnOnEdit=n}get map(){return this.grid}get tier(){return this.m_pTier}render(){this.map&&this.map.render(!0)}onMoveStart(){this.m_pPanes.invoke(!1),super.onMoveStart()}onMoveEnd(){this.m_pPanes.invoke(!0),super.onMoveEnd()}onEdit(e,t,i,s){this.m_fnOnEdit&&this.m_fnOnEdit(e,t,i,s)}}var qh,Xh=Object.freeze({__proto__:null,Map:$h,Cluster:Ac,Node:Zh,Branch:Cc,Condition:Wh}),Jh=Object.freeze({__proto__:null,TAP_DOUBLE_TIMEOUT:300,TAP_SINGLE_DOUBLE_GAP:200,TAP_SINGLE_TIMEOUT:300,Tap:Dr,Hover:Lr,Keyboard:Tr});function Kh(e,t,i,s=!1,...o){const n=[],r=[];if(ee(xc(e,{mode:s?"self":"validated",pipes:"include-consumed-slots",exclude:ce(o,(e=>!!e))}),(e=>{if(e.slots){const s=[];ee(e.slots,(e=>{e.id&&e.slot&&(!t||t(e.slot,"pipe"===e.type))&&(s.push({label:e.label+("pipe"===e.type?` (${ol("builder","pipe")})`:""),value:e.id}),i===e.id&&(i=""))})),s.length&&r.push({optGroup:e.label},...s)}else e.id&&e.slot&&(!t||t(e.slot,"pipe"===e.type))&&(n.push({label:e.label+("pipe"===e.type?` (${ol("builder","pipe")})`:""),value:e.id}),i===e.id&&(i=""))})),i){const t=ms(e,i);t&&r.push({optGroup:ol("builder","Upcoming")},{label:t.label,value:i})}return[...n,...r]}function ed(e){return(t,i)=>{if(!e)throw new Error("Tripetto: You need to specify a valid reference for the `@metadata` decorator.");const s="@metadata #"+e;if(Object.getOwnPropertyDescriptor(t,s))throw new Error(`Tripetto: The decorator \`@metadata("${e}")\` is already used.`);Object.defineProperty(t,s,{value:i,writable:!1,enumerable:!1,configurable:!1})}}function td(e,t){if(t){const i=Ve(e,"@metadata #"+t);if(i){const t=Ye(e,i);if(k(t))return t}}}class id{static get isReady(){return this.m_bReady}static get isError(){return this.m_bError}static load(e,t){return this.m_bReady=!1,function(e,t){return function(){function i(e,t,i){return e.call.apply(e.bind,arguments)}function s(e,t,i){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function o(e,t,n){return(o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:s).apply(null,arguments)}var n=Date.now||function(){return+new Date};function r(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var a=!!e.FontFace;function l(e,t,i,s){if(t=e.c.createElement(t),i)for(var o in i)i.hasOwnProperty(o)&&("style"==o?t.style.cssText=i[o]:t.setAttribute(o,i[o]));return s&&t.appendChild(e.c.createTextNode(s)),t}function c(e,t,i){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(i,e.lastChild)}function u(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t,i){t=t||[],i=i||[];for(var s=e.className.split(/\s+/),o=0;o<t.length;o+=1){for(var n=!1,r=0;r<s.length;r+=1)if(t[o]===s[r]){n=!0;break}n||s.push(t[o])}for(t=[],o=0;o<s.length;o+=1){for(n=!1,r=0;r<i.length;r+=1)if(s[o]===i[r]){n=!0;break}n||t.push(s[o])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(e,t){for(var i=e.className.split(/\s+/),s=0,o=i.length;s<o;s++)if(i[s]==t)return!0;return!1}function p(e,t,i){function s(){u&&o&&n&&(u(r),u=null)}t=l(e,"link",{rel:"stylesheet",href:t,media:"all"});var o=!1,n=!0,r=null,u=i||null;a?(t.onload=function(){o=!0,s()},t.onerror=function(){o=!0,r=Error("Stylesheet failed to load"),s()}):setTimeout((function(){o=!0,s()}),0),c(e,"head",t)}function m(e,t,i,s){var o=e.c.getElementsByTagName("head")[0];if(o){var n=l(e,"script",{src:t}),r=!1;return n.onload=n.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i&&i(null),n.onload=n.onreadystatechange=null,"HEAD"==n.parentNode.tagName&&o.removeChild(n))},o.appendChild(n),setTimeout((function(){r||(r=!0,i&&i(Error("Script load timeout")))}),s||5e3),n}return null}function g(){this.a=0,this.c=null}function b(e){return e.a++,function(){e.a--,y(e)}}function f(e,t){e.c=t,y(e)}function y(e){0==e.a&&e.c&&(e.c(),e.c=null)}function v(e){this.a=e||"-"}function M(e,t){this.c=e,this.f=4,this.a="n";var i=(t||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function w(e){var t=[];e=e.split(/,\s*/);for(var i=0;i<e.length;i++){var s=e[i].replace(/['"]/g,"");-1!=s.indexOf(" ")||/^\d/.test(s)?t.push("'"+s+"'"):t.push(s)}return t.join(",")}function x(e){return e.a+e.f}function S(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function I(e){var t=4,i="n",s=null;return e&&((s=e.match(/(normal|oblique|italic)/i))&&s[1]&&(i=s[1].substr(0,1).toLowerCase()),(s=e.match(/([1-9]00|normal|bold)/i))&&s[1]&&(/bold/i.test(s[1])?t=7:/[1-9]00/.test(s[1])&&(t=parseInt(s[1].substr(0,1),10)))),i+t}function k(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new v("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function N(e){if(e.g){var t=d(e.f,e.a.c("wf","active")),i=[],s=[e.a.c("wf","loading")];t||i.push(e.a.c("wf","inactive")),h(e.f,i,s)}_(e,"inactive")}function _(e,t,i){e.j&&e.h[t]&&(i?e.h[t](i.c,x(i)):e.h[t]())}function L(){this.c={}}function C(e,t){this.c=e,this.f=t,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function D(e){c(e.c,"body",e.a)}function A(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(e.c)+";font-style:"+S(e)+";font-weight:"+e.f+"00;"}function j(e,t,i,s,o,n){this.g=e,this.j=t,this.a=s,this.c=i,this.f=o||3e3,this.h=n||void 0}function T(e,t,i,s,o,n,r){this.v=e,this.B=t,this.c=i,this.a=s,this.s=r||"BESbswy",this.f={},this.w=o||3e3,this.u=n||null,this.m=this.j=this.h=this.g=null,this.g=new C(this.c,this.s),this.h=new C(this.c,this.s),this.j=new C(this.c,this.s),this.m=new C(this.c,this.s),e=A(e=new M(this.a.c+",serif",x(this.a))),this.g.a.style.cssText=e,e=A(e=new M(this.a.c+",sans-serif",x(this.a))),this.h.a.style.cssText=e,e=A(e=new M("serif",x(this.a))),this.j.a.style.cssText=e,e=A(e=new M("sans-serif",x(this.a))),this.m.a.style.cssText=e,D(this.g),D(this.h),D(this.j),D(this.m)}v.prototype.c=function(e){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},j.prototype.start=function(){var e=this.c.o.document,t=this,i=n(),s=new Promise((function(s,o){!function r(){n()-i>=t.f?o():e.fonts.load(function(e){return S(e)+" "+e.f+"00 300px "+w(e.c)}(t.a),t.h).then((function(e){1<=e.length?s():setTimeout(r,25)}),(function(){o()}))}()})),o=null,r=new Promise((function(e,i){o=setTimeout(i,t.f)}));Promise.race([r,s]).then((function(){o&&(clearTimeout(o),o=null),t.g(t.a)}),(function(){t.j(t.a)}))};var z={D:"serif",C:"sans-serif"},E=null;function O(){if(null===E){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(e.navigator.userAgent);E=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return E}function P(e,t,i){for(var s in z)if(z.hasOwnProperty(s)&&t===e.f[z[s]]&&i===e.f[z[s]])return!0;return!1}function R(e){var t,i=e.g.a.offsetWidth,s=e.h.a.offsetWidth;(t=i===e.f.serif&&s===e.f["sans-serif"])||(t=O()&&P(e,i,s)),t?n()-e.A>=e.w?O()&&P(e,i,s)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?H(e,e.v):H(e,e.B):function(e){setTimeout(o((function(){R(this)}),e),50)}(e):H(e,e.v)}function H(e,t){setTimeout(o((function(){u(this.g.a),u(this.h.a),u(this.j.a),u(this.m.a),t(this.a)}),e),0)}function F(e,t,i){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=i}T.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=n(),R(this)};var U=null;function B(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&h(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),_(e,"active")):N(e.a))}function Y(e){this.j=e,this.a=new L,this.h=0,this.f=this.g=!0}function Z(t,i,s,n,r){var a=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=r||null,l=n||{};if(0===s.length&&a)N(i.a);else{i.f+=s.length,a&&(i.j=a);var c,u=[];for(c=0;c<s.length;c++){var d=s[c],p=l[d.c],m=i.a,g=d;if(m.g&&h(m.f,[m.a.c("wf",g.c,x(g).toString(),"loading")]),_(m,"fontloading",g),m=null,null===U)if(e.FontFace){g=/Gecko.*Firefox\/(\d+)/.exec(e.navigator.userAgent);var b=/OS X.*Version\/10\..*Safari/.exec(e.navigator.userAgent)&&/Apple/.exec(e.navigator.vendor);U=g?42<parseInt(g[1],10):!b}else U=!1;m=U?new j(o(i.g,i),o(i.h,i),i.c,d,i.s,p):new T(o(i.g,i),o(i.h,i),i.c,d,i.s,t,p),u.push(m)}for(c=0;c<u.length;c++)u[c].start()}}),0)}function V(e,t){this.c=e,this.a=t}function W(e,t){this.c=e,this.a=t}function G(e,t){this.c=e||$,this.a=[],this.f=[],this.g=t||""}F.prototype.g=function(e){var t=this.a;t.g&&h(t.f,[t.a.c("wf",e.c,x(e).toString(),"active")],[t.a.c("wf",e.c,x(e).toString(),"loading"),t.a.c("wf",e.c,x(e).toString(),"inactive")]),_(t,"fontactive",e),this.m=!0,B(this)},F.prototype.h=function(e){var t=this.a;if(t.g){var i=d(t.f,t.a.c("wf",e.c,x(e).toString(),"active")),s=[],o=[t.a.c("wf",e.c,x(e).toString(),"loading")];i||s.push(t.a.c("wf",e.c,x(e).toString(),"inactive")),h(t.f,s,o)}_(t,"fontinactive",e),B(this)},Y.prototype.load=function(e){this.c=new r(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,i){var s=[],o=i.timeout;!function(e){e.g&&h(e.f,[e.a.c("wf","loading")]),_(e,"loading")}(t),s=function(e,t,i){var s,o=[];for(s in t)if(t.hasOwnProperty(s)){var n=e.c[s];n&&o.push(n(t[s],i))}return o}(e.a,i,e.c);var n=new F(e.c,t,o);for(e.h=s.length,t=0,i=s.length;t<i;t++)s[t].load((function(t,i,s){Z(e,n,t,i,s)}))}(this,new k(this.c,e),e)},V.prototype.load=function(e){function t(){if(n["__mti_fntLst"+s]){var i,o=n["__mti_fntLst"+s](),r=[];if(o)for(var a=0;a<o.length;a++){var l=o[a].fontfamily;null!=o[a].fontStyle&&null!=o[a].fontWeight?(i=o[a].fontStyle+o[a].fontWeight,r.push(new M(l,i))):r.push(new M(l))}e(r)}else setTimeout((function(){t()}),50)}var i=this,s=i.a.projectId,o=i.a.version;if(s){var n=i.c.o;m(this.c,(i.a.api||"https://fast.fonts.net/jsapi")+"/"+s+".js"+(o?"?v="+o:""),(function(o){o?e([]):(n["__MonotypeConfiguration__"+s]=function(){return i.a},t())})).id="__MonotypeAPIScript__"+s}else e([])},W.prototype.load=function(e){var t,i,s=this.a.urls||[],o=this.a.families||[],n=this.a.testStrings||{},r=new g;for(t=0,i=s.length;t<i;t++)p(this.c,s[t],b(r));var a=[];for(t=0,i=o.length;t<i;t++)if((s=o[t].split(":"))[1])for(var l=s[1].split(","),c=0;c<l.length;c+=1)a.push(new M(s[0],l[c]));else a.push(new M(s[0]));f(r,(function(){e(a,n)}))};var $="https://fonts.googleapis.com/css";function Q(e){this.f=e,this.a=[],this.c={}}var q={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},X={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},J={i:"i",italic:"i",n:"n",normal:"n"},K=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function ee(e,t){this.c=e,this.a=t}var te={Arimo:!0,Cousine:!0,Tinos:!0};function ie(e,t){this.c=e,this.a=t}function se(e,t){this.c=e,this.f=t,this.a=[]}ee.prototype.load=function(e){var t=new g,i=this.c,s=new G(this.a.api,this.a.text),o=this.a.families;!function(e,t){for(var i=t.length,s=0;s<i;s++){var o=t[s].split(":");3==o.length&&e.f.push(o.pop());var n="";2==o.length&&""!=o[1]&&(n=":"),e.a.push(o.join(n))}}(s,o);var n=new Q(o);!function(e){for(var t=e.f.length,i=0;i<t;i++){var s=e.f[i].split(":"),o=s[0].replace(/\+/g," "),n=["n4"];if(2<=s.length){var r;if(r=[],a=s[1])for(var a,l=(a=a.split(",")).length,c=0;c<l;c++){var u;if((u=a[c]).match(/^[\w-]+$/))if(null==(h=K.exec(u.toLowerCase())))u="";else{if(u=null==(u=h[2])||""==u?"n":J[u],null==(h=h[1])||""==h)h="4";else var h=X[h]||(isNaN(h)?"4":h.substr(0,1));u=[u,h].join("")}else u="";u&&r.push(u)}0<r.length&&(n=r),3==s.length&&(r=[],0<(s=(s=s[2])?s.split(","):r).length&&(s=q[s[0]])&&(e.c[o]=s))}for(e.c[o]||(s=q[o])&&(e.c[o]=s),s=0;s<n.length;s+=1)e.a.push(new M(o,n[s]))}}(n),p(i,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,i=[],s=0;s<t;s++)i.push(e.a[s].replace(/ /g,"+"));return t=e.c+"?family="+i.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(s),b(t)),f(t,(function(){e(n.a,n.c,te)}))},ie.prototype.load=function(e){var t=this.a.id,i=this.c.o;t?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){t=i.Typekit.config.fn;for(var s=[],o=0;o<t.length;o+=2)for(var n=t[o],r=t[o+1],a=0;a<r.length;a++)s.push(new M(n,r[a]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(s)}}),2e3):e([])},se.prototype.load=function(e){var t=this.f.id,i=this.c.o,s=this;t?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[t]=function(t,i){for(var o=0,n=i.fonts.length;o<n;++o){var r=i.fonts[o];s.a.push(new M(r.name,I("font-weight:"+r.weight+";font-style:"+r.style)))}e(s.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var oe=new Y(e);oe.a.c.custom=function(e,t){return new W(t,e)},oe.a.c.fontdeck=function(e,t){return new se(t,e)},oe.a.c.monotype=function(e,t){return new V(t,e)},oe.a.c.typekit=function(e,t){return new ie(t,e)},oe.a.c.google=function(e,t){return new ee(t,e)};var ne={load:o(oe.load,oe)};"function"==typeof define&&define.amd?define((function(){return ne})):void 0!==t&&t.exports?t.exports=ne:(e.WebFont=ne,e.WebFontConfig&&oe.load(e.WebFontConfig))}(),t.exports}("undefined"==typeof window&&{}||window,"undefined"==typeof module&&{exports:{}}||module).load({classes:!1,custom:{families:e},active:()=>{Re((()=>{this.m_bReady=!0,t(!this.m_bError)}))},inactive:()=>{this.m_bReady=!0,t(!1)},fontinactive:()=>{this.m_bError=!0},timeout:9e4}),!0}}function sd(e,t,i){St("affects#refresh",e,t,i,(e=>e.target.refresh()))}function od(e,...t){switch(e){case"#name":case"#label":case"#icon":return function(e){return(t,i,s)=>{t instanceof Ys?St(`affects${e}`,t,i,s,(t=>{t.target instanceof Ys&&t.target.isInitialized&&("#icon"===e?t.target.emitHook("OnIcon",{item:t.target}):t.target.emitHook("OnRename",{item:t.target}))})):(_s("#label"===e?"#label":"#name")(t,i,s),Mt("created",t,i,{value:function(){const e=this;if(e instanceof Sa||e instanceof Zs){const t=Ye(e,i);t instanceof ka&&t.setBlock(e)}}}))}}(e);case"#condition":return _s("#condition");case"#slots":return _s("#slots");case"#required":return _s("#required");case"#collection":return i=t[0]||"",(e,t,s)=>{St(`affects#collection:${i}`,e,t,s,(e=>{if(!(e.target instanceof Sa)||e.target.isInitialized){const t=Ye(e.target,i);t instanceof ka&&t.refresh()}}))};case"#refresh":return sd}var i}function nd(e,t,i){Mt("conditions",e,t,i,"single")}function rd(e,t,i){Mt("created",e,t,i)}function ad(e,t){if("#"!==e.charAt(0))throw new Error("Tripetto: The name of the collection in the `@collection` decorator should begin with `#`!");return(i,s)=>{const o="@definition #collections",n=Object.getOwnPropertyDescriptor(i,o),r={collection:e.substr(1),property:s,mode:t||"rw"};n&&z(n.value)?n.value.push(r):Object.defineProperty(i,o,{value:[r],writable:!1,enumerable:!1,configurable:!1})}}function ld(e,t,i){Mt("deleted",e,t,i)}function cd(e,t,i){Mt("editor",e,t,i)}function ud(e,t,i){i&&!i.set||St("name",e,t,i,(e=>{e.target.parent&&e.target.isInitialized&&e.target.emitHook("OnRename",{item:e.target})})),Object.defineProperty(e,"@name",{get:function(){return t},enumerable:!1,configurable:!1})}function hd(e,t,i){Object.defineProperty(e,"@icon",{get:function(){return t},enumerable:!1,configurable:!1})}function dd(e,t,i){i&&!i.set||St("name",e,t,i,(e=>{e.target.parent&&e.target.isInitialized&&e.target.emitHook("OnRename",{item:e.target})})),Object.defineProperty(e,"@alias",{get:function(){return t},enumerable:!1,configurable:!1})}function pd(e,t,i){i&&!i.set||St("name",e,t,i,(e=>{e.target.parent&&e.target.isInitialized&&e.target.emitHook("OnRename",{item:e.target})})),Object.defineProperty(e,"@score",{get:function(){return t},enumerable:!1,configurable:!1})}function md(e,t){Object.defineProperty(e,"@title",{get:function(){return t},enumerable:!1,configurable:!1})}function gd(e,t){Object.defineProperty(e,"@menu",{get:function(){return t},enumerable:!1,configurable:!1})}function bd(e,t){Object.defineProperty(e,"@width",{get:function(){return t},enumerable:!1,configurable:!1})}function fd(e,t,i){Mt("refreshed",e,t,i)}function yd(e,t,i){Mt("renamed",e,t,i)}function vd(e,t,i){Mt("reordered",e,t,i)}id.m_bReady=!1,id.m_bError=!1;class Md extends dl{constructor(e,t,i){super(e.navigator.button,void 0,void 0,i),this.m_pIcon=t}onDraw(e,t){super.onDraw(e,t),A(this.m_pIcon)?t.create("i",(e=>xl(this.m_pIcon,e))):C(this.m_pIcon)&&t.set("background-image",`url("${this.m_pIcon}")`)}}class wd extends ml{constructor(e,t,i,s="blank"){super(e.navigator.button,i,void 0,s),this.m_pIcon=t}onDraw(e,t){super.onDraw(e,t),A(this.m_pIcon)?t.create("i",(e=>xl(this.m_pIcon,e))):t.set("background-image",`url("${this.m_pIcon}")`)}}class xd extends ul{constructor(e){super(e.navigator.separator)}}class Sd{constructor(...e){this.m_bVisible=!0,this.m_nTrack=0,this.m_nThumb=0;const t=J(...e),i=t.style||Sd.style,s=t.layer?t.layer.stylesheet:void 0,o=t.target instanceof Zr?t.target:t.target instanceof ta?t.target.scroll:void 0;if(!i)throw new Error("UI.Zoombar: No styles supplied.");if(!t.layer)throw new Error("UI.Zoombar: No parent layer supplied.");if(!o)throw new Error("UI.Zoombar: No target supplied.");if(this.m_pStylesheet=t.stylesheet||s||Sd.stylesheet,this.m_pLayer=t.layer,this.m_pTarget=o,this.m_nTrack=i.track.height,this.m_nThumb=i.thumb.height,this.m_pLayer.isVisible=!1,this.element.styleSafe([i.appearance,{[So.selector("hover")]:i.hover,[So.selector("crawl")]:i.crawl}],this.stylesheet),this.element.create("div",(e=>{e.append("div",(t=>{this.m_pTrack=t.create("div",(t=>{t.position({x:0,y:0,translate:"accelerated"}),t.create("div"),t.create("div"),Lr.pointer(this.element,(t=>e.selectorSafe("hover",t.isHovered)))}))}),{position:"absolute",left:(i.width-i.track.width)/2,top:i.track.upper&&i.track.upper.offset||0,width:i.track.width,bottom:i.track.lower&&i.track.lower.offset||0,overflow:"hidden","> div":{position:"absolute",left:0,right:0,height:2*i.track.height-i.thumb.height,"> div:first-child":J(i.track.upper?i.track.upper.appearance:void 0,{position:"absolute",borderRadius:0,left:0,right:0,top:-i.track.height+i.thumb.height/2,height:i.track.height-i.thumb.height/2}),"> div:last-child":J(i.track.lower?i.track.lower.appearance:void 0,{position:"absolute",borderRadius:0,left:0,right:0,top:i.thumb.height/2,height:i.track.height-i.thumb.height/2})}},this.stylesheet),e.create("div",void 0,[i.track.upper?i.track.upper.appearance:void 0,{position:"absolute",left:(i.width-i.track.width)/2,top:0,width:i.track.width,height:i.track.upper&&i.track.upper.offset||0}],this.stylesheet),e.create("div",void 0,[i.track.lower?i.track.lower.appearance:void 0,{position:"absolute",left:(i.width-i.track.width)/2,bottom:0,width:i.track.width,height:i.track.lower&&i.track.lower.offset||0}],this.stylesheet),this.m_pThumb=e.create("div",(t=>{t.create("div",(s=>{if(i.thumb.buttons){if(i.thumb.buttons.max){const e=i.thumb.buttons.max;this.m_pMax=s.append("div",(e=>{e.selector("disabled",!this.m_pTarget.canZoomIn),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[e.appearance,{position:"absolute",left:0,right:0,top:0,height:i.thumb.height/3,[So.selector("hover")]:e.hover,[So.selector("disabled")]:e.disabled}],this.stylesheet)}if(i.thumb.buttons.fit){const e=i.thumb.buttons.fit;this.m_pFit=s.append("div",(e=>{e.selector("disabled",this.m_pTarget.isZoomFitHorizontal),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[e.appearance,{position:"absolute",left:0,right:0,top:i.thumb.height/3,height:i.thumb.height/3,[So.selector("hover")]:e.hover,[So.selector("disabled")]:e.disabled}],this.stylesheet)}if(i.thumb.buttons.min){const e=i.thumb.buttons.min;this.m_pMin=s.append("div",(e=>{e.selector("disabled",!this.m_pTarget.canZoomOut),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[e.appearance,{position:"absolute",left:0,right:0,bottom:0,height:i.thumb.height/3,[So.selector("hover")]:e.hover,[So.selector("disabled")]:e.disabled}],this.stylesheet)}}Lr.pointer(t,(t=>{s.selectorSafe("hover",t.isHovered),e.selectorSafe("focus",t.isHovered)})),this.thumb(t,s)}),[i.thumb.appearance,{position:"absolute",left:(i.width-i.thumb.width)/2,width:i.thumb.width,height:i.thumb.height,[So.selector("hover")]:i.thumb.hover,[So.selector("grab")]:i.thumb.grab}],this.stylesheet),t.position({x:0,y:0,translate:"accelerated"})}),{position:"absolute",left:0,right:0,height:i.thumb.height},this.stylesheet),this.track(i,e)}),{position:"absolute",left:0,right:0,top:(i.height-i.track.height)/2,height:i.track.height,[So.selector("crawl-in")]:{"> div:first-child > div > div:first-child":i.track.upper?i.track.upper.crawl:void 0,"> div:nth-child(2)":i.track.upper?i.track.upper.crawl:void 0},[So.selector("crawl-out")]:{"> div:first-child > div > div:last-child":i.track.lower?i.track.lower.crawl:void 0,"> div:nth-child(3)":i.track.lower?i.track.lower.crawl:void 0}},this.stylesheet),i.zoomIn){const e=i.zoomIn;this.m_pIn=this.element.create("div",(e=>{e.selector("disabled",!this.m_pTarget.canZoomIn),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[e.appearance,{position:"absolute",left:(i.width-e.width)/2,top:0,height:e.height,width:e.width,[So.selector("hover")]:e.hover,[So.selector("crawl")]:e.crawl,[So.selector("disabled")]:e.disabled}],this.stylesheet)}if(i.zoomOut){const e=i.zoomOut;this.m_pOut=this.element.create("div",(e=>{e.selector("disabled",!this.m_pTarget.canZoomOut),Lr.pointer(e,(t=>e.selectorSafe("hover",t.isHovered)))}),[e.appearance,{position:"absolute",left:(i.width-e.width)/2,top:i.height-e.height,height:e.height,width:e.width,[So.selector("hover")]:e.hover,[So.selector("crawl")]:e.crawl,[So.selector("disabled")]:e.disabled}],this.stylesheet)}this.m_pTarget.hook("OnZoomChange","synchronous",(e=>this.position(e.zoom))),this.m_pTarget.hook("OnZoomStart","framed",(()=>this.update(!1))),this.m_pTarget.hook("OnZoomEnd","framed",(()=>this.update(!1))),this.m_pTarget.hook("OnScrollInit","synchronous",(()=>this.update())),this.m_pTarget.hook("OnScrollResize","framed",(()=>this.update())),Lr.pointer(this.element,(e=>this.element.selectorSafe("hover",e.isHovered))),Rr.on(this.element,(e=>{e.wheel>0?this.m_pTarget.zoomIn():this.m_pTarget.zoomOut()}))}static create(...e){return new Sd(...e)}get element(){return this.m_pLayer.context}get diff(){return this.m_pTarget.zoomMax-this.m_pTarget.zoomMin}get size(){return this.m_nTrack-this.m_nThumb}get stylesheet(){return this.m_pStylesheet}get isVisible(){return this.m_bVisible}set isVisible(e){this.m_bVisible!==e&&(this.m_bVisible=e,this.update())}thumb(t,i){let s,o,n;const r=()=>{i.addSelectorSafe("grab"),this.m_pMax&&this.m_pMax.removeSelectorSafe("hover"),this.m_pFit&&this.m_pFit.removeSelectorSafe("hover"),this.m_pMin&&this.m_pMin.removeSelectorSafe("hover")};Vr.on({asset:t,prioritize:!0,onStart:()=>{s=this.size-this.size/this.diff*(this.m_pTarget.zoom-this.m_pTarget.zoomMin),o=M.precise,n=Le((()=>{o=0,n=0,r()}),300)},onMove:t=>{if(0===o||Math.abs(t.diffY)>5||M.elapsed(o,!0)>300){const i=e.range(s+t.diffY,0,this.size),a=this.m_pTarget.zoomMin+this.diff/this.size*(this.size-i);0!==o&&(o=0,r()),0!==n&&(n=Ce(n)),this.position(this.m_pTarget.zoom=a)}},onEnd:e=>{if(i.removeSelectorSafe("grab"),n=Ce(n),M.elapsed(o,!0)<=300){const i=t.rectangleLeft+e.offset.x+e.diffX,s=t.rectangleTop+e.offset.y+e.diffY;this.m_pMax&&this.m_pMax.rectangle.isIn(i,s)?this.m_pTarget.zoom<1?this.m_pTarget.zoomToActual():this.m_pTarget.zoomToMax():this.m_pFit&&this.m_pFit.rectangle.isIn(i,s)?this.m_pTarget.zoomToFitHorizontal():this.m_pMin&&this.m_pMin.rectangle.isIn(i,s)&&(this.m_pTarget.zoom>1?this.m_pTarget.zoomToActual():this.m_pTarget.zoomToMin())}}})}track(e,t){let i,s,o;Vr.on({asset:this.element,prioritize:!0,onStart:n=>{let r="stop";const a=()=>{if(0!==o&&M.elapsed(o,!0)>300&&(o=0),0===o){const s=(e.height-e.track.height)/2+this.size-this.size/this.diff*(this.m_pTarget.zoom-this.m_pTarget.zoomMin),o=i<s?"in":i>s+e.thumb.height?"out":"stop";o!==r&&(r=o,this.element.addSelectorSafe("crawl"),t.selectorSafe("crawl-in","in"===r),t.selectorSafe("crawl-out","out"===r),this.m_pIn&&this.m_pIn.selectorSafe("crawl","in"===r),this.m_pOut&&this.m_pOut.selectorSafe("crawl","out"===r),this.m_pTarget.zoomCrawl(r,1500))}s=ke((()=>a()))};i=n.offset.y,o=M.precise,a()},onMove:e=>{i=e.offset.y+e.diffY},onEnd:()=>{if(s=_e(s),M.elapsed(o,!0)<=300){const t=(e.height-e.track.height)/2+this.size-this.size/this.diff*(this.m_pTarget.zoom-this.m_pTarget.zoomMin);i<t?this.m_pTarget.zoomIn():i>t+e.thumb.height&&this.m_pTarget.zoomOut()}this.m_pTarget.zoomCrawlStop(),this.element.removeSelectorSafe("crawl"),t.removeSelectorSafe("crawl-in"),t.removeSelectorSafe("crawl-out"),this.m_pIn&&this.m_pIn.removeSelectorSafe("crawl"),this.m_pOut&&this.m_pOut.removeSelectorSafe("crawl")}})}position(t=this.m_pTarget.zoom){ro((()=>{const i=e.range(e.round(this.size-this.size/this.diff*(t-this.m_pTarget.zoomMin)),0,this.size);this.m_pThumb.position({x:0,y:i}),this.m_pTrack.position({x:0,y:i})}))}update(e=!0){e&&this.position(),this.m_pIn&&this.m_pIn.selectorSafe("disabled",!this.m_pTarget.canZoomIn),this.m_pMax&&this.m_pMax.selectorSafe("disabled",!this.m_pTarget.canZoomIn),this.m_pFit&&this.m_pFit.selectorSafe("disabled",this.m_pTarget.isZoomFitHorizontal),this.m_pMin&&this.m_pMin.selectorSafe("disabled",!this.m_pTarget.canZoomOut),this.m_pOut&&this.m_pOut.selectorSafe("disabled",!this.m_pTarget.canZoomOut),this.m_pLayer.isVisible=this.isVisible&&this.m_pTarget.canZoom}}Sd.stylesheet=So.app;class Id extends ia{constructor(e,t=ia.configuration){super(t),this.m_pProperties=e;const i=e.style||Sd.style;i&&t.width(i.width).minWidth(i.width).height(i.height).minHeight(i.height)}get zoombar(){return this.m_pZoombar}onRender(){this.m_pZoombar=new Sd(this.m_pProperties,{layer:this.layer})}}class kd extends ia{constructor(e,t,i,s,o,n,r,a,l,c,u,h,d,p){super(u&&h||ta.configuration.applicationRole().style({layer:{appearance:{"*":{webkitTouchCallout:"none",webkitTapHighlightColor:"transparent",touchAction:"none",textRendering:"optimizeLegibility",userSelect:"none",boxSizing:"border-box",cursor:"default","&:focus":{outline:"none"}},"input[type='text']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='password']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='email']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},"input[type='search']":{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}},textarea:{userSelect:"text",cursor:"text",resize:"none","&::-ms-clear":{display:"none"},"&:invalid":{outline:"0"}}}},applyToChildren:!1}).animation(r&&Br.Zoom||void 0)),this.m_pStyle=e,this.m_pTier=t,this.m_pNavigation=i,this.m_bZoombar=n,this.m_sZoom=a,this.m_bCentering=l,this.m_sAlign=c,this.m_bPrologue=s,this.m_bEpilogue=o,this.m_fnOnEdit=d,this.m_fnOnClose=p,this.m_pParent=u}get parent(){return this.m_pParent||this.layer}get map(){return this.m_pMap}onRender(){const e=this.layer.createChain(ta.configuration.layout("hbca"));if(!e)throw new Error("Tripetto: Workspace layer could not be created!");this.parent.hook("OnClose","synchronous",(()=>this.m_fnOnClose())),e.createPanel((e=>{var t,i,s;this.m_pMap=ws.create(new Qh(e,this.m_pStyle,this.m_pTier,this.m_bPrologue,this.m_bEpilogue,this.m_fnOnEdit,this.m_pNavigation.length>0&&this.layer.component((t=this.m_pStyle,i=this.m_pNavigation,s=this.m_sAlign,new cl({style:t.navigator.style,right:i},ta.configuration.left(t.navigator.spacing).right(t.navigator.spacing).alignHorizontal(s).width(se(i,((e,t)=>e+G(t.style.width)),0)||0).top(t.navigator.spacing).height(t.navigator.height).alignTop().animation(Br.Zoom))),"floating").layer||void 0,this.m_bZoombar&&this.layer.component(new Id({target:e,style:this.m_pStyle.zoombar},ta.configuration.alignHorizontal(this.m_sAlign).top(2*this.m_pStyle.navigator.spacing+this.m_pStyle.navigator.height).left(this.m_pStyle.navigator.spacing).right(this.m_pStyle.navigator.spacing).heightThreshold(3*this.m_pStyle.navigator.spacing+this.m_pStyle.navigator.height+this.m_pStyle.zoombar.height,((e,t)=>e.visible("below"!==t))).alignBottom().bottom(this.m_pStyle.navigator.spacing).animation(Br.Zoom)),"floating").zoombar||void 0),{name:rp,version:ap})}),ta.configuration.scrollbars({style:this.m_pStyle.map.scrollbars,bounceHorizontal:"always",bounceVertical:"always",centering:this.m_bCentering,spacing:this.m_pStyle.map.spacing,zoomAnimations:!0,zoomDimensions:!0,zoomOnPinch:!0,zoomOnWheel:!0,zoomOnDoubleTap:!0,zoomInitialize:!0,zoomToFit:"fit"===this.m_sZoom?"all":"fit-horizontal"===this.m_sZoom?"horizontal":"fit-vertical"===this.m_sZoom&&"vertical"}).autoCloseChildPanels("tap"))}close(){this.parent.close()}tutorial(){Gl.open(this.layer,this.m_pStyle.tutorial)}}class Nd{static get isLoaded(){return this.m_bLoaded}static use(e,t,i,s,o=!0,n=!1){const a=e=>{this.m_bLoaded=!0,s(e)};if(this.m_bLoaded=!1,t)switch(i){case"umd":a(!!cs.activateOrLoadUMD(e,r,"Tripetto",t,o,n));break;case"url":cs.activateOrLoadURL(e,r,"Tripetto","tripetto#loader",t,(e=>a(!!e)),o,n)}else cs.activate(e),a(!0)}}Nd.m_bLoaded=!1;class _d extends gl{constructor(e,t){if(super(e,t,ol("builder","Form properties"),"compact",t.layout instanceof cc&&t.layout.style),t.layout){const i=t.layout.renderer;e.hook("OnShow","framed",(()=>i.onEdit("start","properties",this.ref))),e.hook("OnClose","framed",(()=>{i.onEdit("end","properties",this.ref)})),e.hook("OnClose","synchronous",(()=>{_d.m_pEditor&&_d.m_pEditor.map===t&&(_d.m_pEditor=void 0)}))}}static open(e,t){return new _d(e,t)}static openPanel(e,t){if(this.m_pEditor&&this.m_pEditor.map===t)return this.m_pEditor.layer;const i=t.layout&&t.layout.style;return(this.m_pEditor={map:t,layer:e.createPanel((e=>{this.open(e,t)}),ta.configuration.width(i?i.forms.width.small:0).animation(Br.Zoom).autoCloseChildPanels("stroke"))}).layer}get map(){return this.ref}onCards(e){e.add(new Xa({title:ol("builder","Name"),controls:[new Al("singleline",Al.bind(this.map,"name","",void 0,(e=>e||void 0))).escape((()=>(this.close(),!0))).enter((()=>(this.close(),!0))).placeholder(ol("builder","Unnamed")).autoFocus().autoSelect()]})),e.add(new Xa({title:ol("builder","Description"),controls:[new Al("multiline-wo-crlf",Al.bind(this.map,"description","",void 0,(e=>e||void 0)))]})),e.add(new Xa({title:ol("builder","Keywords"),controls:[new Al("multiline-wo-crlf",t.iterateToString(this.map.keywords||[],", ")).on((e=>{const i=[];ee(t.replace(e.value,";",",").split(","),(e=>{const s=t.sanitize(e);s&&i.push(s)})),this.map.keywords=i.length>0&&i||void 0})).transformation("lowercase").placeholder(ol("builder","Separate keywords with a comma or semicolon"))]})),e.add(new Xa({title:ol("builder","Language"),controls:[new jl(ol("builder","Here you specify the language that you have used in the texts of your form.")),new Hl([{optGroup:ol("builder","Languages")},...ie(ce(za.domains,(e=>-1===e.locale.indexOf("-"))),(e=>({label:e.locale===il.current&&e.native||e.language||e.locale,value:e.locale}))).sort(((e,t)=>e.label.localeCompare(t.label))),{optGroup:ol("builder","Additional regions and dialects")},...ie(ce(za.domains,(e=>-1!==e.locale.indexOf("-"))),(e=>({label:e.locale===il.current&&e.native||e.language||e.locale,value:e.locale}))).sort(((e,t)=>e.label.localeCompare(t.label)))],Hl.bind(this.map,"language",void 0)).placeholder(ol("builder","No language specified"))]}))}}!function(e){e.thin=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Thin",src:`url("${e}thin.woff2") format("woff2"),url("${e}thin.woff") format("woff"),url("${e}thin.ttf") format("truetype")`,fontWeight:100,fontStyle:"normal"}),"Roboto Thin"},e.thinItalic=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Thin Italic",src:`url("${e}thin-italic.woff2") format("woff2"),url("${e}thin-italic.woff") format("woff"),url("${e}thin-italic.ttf") format("truetype")`,fontWeight:100,fontStyle:"italic"}),"Roboto Thin Italic"},e.light=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Light",src:`url("${e}light.woff2") format("woff2"),url("${e}light.woff") format("woff"),url("${e}light.ttf") format("truetype")`,fontWeight:300,fontStyle:"normal"}),"Roboto Light"},e.lightItalic=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Light Italic",src:`url("${e}light-italic.woff2") format("woff2"),url("${e}light-italic.woff") format("woff"),url("${e}light-italic.ttf") format("truetype")`,fontWeight:300,fontStyle:"italic"}),"Roboto Light Italic"},e.regular=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Regular",src:`url("${e}regular.woff2") format("woff2"),url("${e}regular.woff") format("woff"),url("${e}regular.ttf") format("truetype")`,fontWeight:"normal",fontStyle:"normal"}),"Roboto Regular"},e.regularItalic=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Regular Italic",src:`url("${e}regular-italic.woff2") format("woff2"),url("${e}regular-italic.woff") format("woff"),url("${e}regular-italic.ttf") format("truetype")`,fontWeight:"normal",fontStyle:"italic"}),"Roboto Regular Italic"},e.medium=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Medium",src:`url("${e}medium.woff2") format("woff2"),url("${e}medium.woff") format("woff"),url("${e}medium.ttf") format("truetype")`,fontWeight:500,fontStyle:"normal"}),"Roboto Medium"},e.mediumItalic=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Medium Italic",src:`url("${e}medium-italic.woff2") format("woff2"),url("${e}medium-italic.woff") format("woff"),url("${e}medium-italic.ttf") format("truetype")`,fontWeight:500,fontStyle:"italic"}),"Roboto Medium Italic"},e.bold=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Bold",src:`url("${e}bold.woff2") format("woff2"),url("${e}bold.woff") format("woff"),url("${e}bold.ttf") format("truetype")`,fontWeight:"bold",fontStyle:"normal"}),"Roboto Bold"},e.boldItalic=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Bold Italic",src:`url("${e}bold-italic.woff2") format("woff2"),url("${e}bold-italic.woff") format("woff"),url("${e}bold-italic.ttf") format("truetype")`,fontWeight:"bold",fontStyle:"italic"}),"Roboto Bold Italic"},e.black=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Black",src:`url("${e}black.woff2") format("woff2"),url("${e}black.woff") format("woff"),url("${e}black.ttf") format("truetype")`,fontWeight:900,fontStyle:"normal"}),"Roboto Black"},e.blackItalic=function(e,t=So.app){return t.static("@font-face",{fontFamily:"Roboto Black Italic",src:`url("${e}black-italic.woff2") format("woff2"),url("${e}black-italic.woff") format("woff"),url("${e}black-italic.ttf") format("truetype")`,fontWeight:900,fontStyle:"italic"}),"Roboto Black Italic"}}(qh||(qh={}));const Ld={families:e=>[qh.regular(`${e}roboto/`),qh.light(`${e}roboto/`),qh.medium(`${e}roboto/`)],Menu:{Static:{Face:"Roboto Light",Size:18},item:{Face:"Roboto Regular",Size:15}},Header:{Title:{Face:"Roboto Light",Size:24},Status:{Face:"Roboto Regular",Size:12}},Buttons:{Face:"Roboto Light",Size:15},Map:{Branch:{Face:"Roboto Regular",Size:16},Cluster:{Face:"Roboto Regular",Size:16},Condition:{Face:"Roboto Regular",Size:16},Node:{Label:{Face:"Roboto Regular",Size:16},Type:{Face:"Roboto Regular",Size:14}}},Forms:{Header:{Face:"Roboto Light",Size:18},Features:{Static:{Face:"Roboto Regular",Size:13},Toggle:{Face:"Roboto Regular",Size:14}},Title:{Face:"Roboto Light",Size:18},Label:{Face:"Roboto Regular",Size:13,Lineheight:"20px"},Control:{Face:"Roboto Regular",Size:15,Lineheight:"22px"},Optgroup:{Face:"Roboto Medium"}},Collections:{Title:{Face:"Roboto Light",Size:16},Rows:{Face:"Roboto Regular",Size:14}},Tutorial:{Title:{Face:"Roboto Medium",Size:40},Help:{Face:"Roboto Light",Size:14},Blocks:{Title:{Face:"Roboto Light",Size:18},Subtitle:{Face:"Roboto Light",Size:13},Text:{Face:"Roboto Light",Size:12}}}},Cd={menu:{outer:{padding:8,transformOrigin:"50% 50% 0"},inner:{backgroundColor:Hc,borderRadius:4,boxShadow:"0 0 6px 0px #0000006b"},open:ca(),close:ra(),context:{transformOrigin:"0 0 0"},top:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iMTYiIGhlaWdodD0iOCI+PHBhdGggZmlsbD0icmdiYSg0NCw2NCw5MCwwLjkpIiBkPSJNMTYgMCA4IDggMCAweiIvPjwvc3ZnPg==")'},bottom:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iMTYiIGhlaWdodD0iOCI+PHBhdGggZmlsbD0icmdiYSg0NCw2NCw5MCwwLjkpIiBkPSJtMCA4IDgtOCA4IDh6Ii8+PC9zdmc+")'},left:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iOCIgaGVpZ2h0PSIxNiI+PHBhdGggZmlsbD0icmdiYSg0NCw2NCw5MCwwLjkpIiBkPSJtMCAwIDggOC04IDh6Ii8+PC9zdmc+")'},right:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iOCIgaGVpZ2h0PSIxNiI+PHBhdGggZmlsbD0icmdiYSg0NCw2NCw5MCwwLjkpIiBkPSJNOCAxNiAwIDhsOC04eiIvPjwvc3ZnPg==")'}},options:{label:{appearance:{fontFamily:Ld.Menu.Static.Face,fontSize:Ld.Menu.Static.Size,color:"rgba(255,255,255,0.7)",padding:"14px 16px 0",borderTop:"none",height:40}},separator:{appearance:{height:3,padding:"1px 0px","&:first-child":{display:"none"}},separator:{height:1,width:"100%",backgroundColor:"rgba(255,255,255,0.25)"}},item:{appearance:{fontFamily:Ld.Menu.item.Face,fontSize:Ld.Menu.item.Size,color:Bc,padding:"9px 32px 9px 16px",margin:0,"> span:first-child":{float:"left",fontSize:14,margin:"2px 14px 0 0"}},badge:{marginLeft:8,fontSize:9,textTransform:"uppercase",backgroundColor:"#ffd700",color:"#423700",padding:"2px 5px",borderRadius:4,position:"relative",top:-2},disabled:{color:Yc},hover:{backgroundColor:Zc},selected:{backgroundColor:Zc},tapped:function(e,t="0.3s",...i){return X({"@keyframes":{"0%":{backgroundColor:"transparent"},"33%":{backgroundColor:e},"66%":{backgroundColor:"transparent"},"100%":{backgroundColor:e}},backgroundColor:e,animationDuration:t},...[])}(Zc)},image:{appearance:{},image:{width:20,height:20,margin:"1px 11px -9px -4px",backgroundSize:"16px 16px"},paths:{class:"tripetto",normal:Bc,disabled:Yc}},submenu:{appearance:{paddingRight:32,backgroundRepeat:"no-repeat",backgroundPosition:"right center",backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0ZGRiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJtMTMuMiAxMC4zIDUuNiA1LjctNS42IDUuNyIvPjwvc3ZnPg==")'},disabled:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiPjxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0icmdiYSgyNTUsMjU1LDI1NSwuMjUpIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Im0xMy4yIDEwLjMgNS42IDUuNy01LjYgNS43Ii8+PC9zdmc+")'}}},indicators:{up:{appearance:{left:8,right:8,top:8,height:32,borderRadius:4,borderBottomLeftRadius:0,borderBottomRightRadius:0,background:`url("data:image/svg+xml;base64,PHN2ZyBpbWFnZS1yZW5kZXJpbmc9Im9wdGltaXplUXVhbGl0eSIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iNTQ4IDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgNTQ4IDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Im01NTggMTUuNiA2LTYgNiA2LS40LjQtNS42LTUuNi01LjYgNS42LS40LS40eiIvPjwvc3ZnPg==") no-repeat center center, linear-gradient(${Hc}, rgba(44,64,90,0))`,transition:"opacity .3s ease-out, visibility .3s"}},down:{appearance:{left:8,right:8,bottom:8,height:32,borderRadius:4,borderTopLeftRadius:0,borderTopRightRadius:0,background:`url("data:image/svg+xml;base64,PHN2ZyBpbWFnZS1yZW5kZXJpbmc9Im9wdGltaXplUXVhbGl0eSIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iNTQ4IDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgNTQ4IDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGZpbGw9IiNGRkYiIGQ9Im01NzAgMTYuNC02IDYtNi02IC40LS40IDUuNiA1LjYgNS42LTUuNi40LjR6Ii8+PC9zdmc+") no-repeat center center, linear-gradient(rgba(44,64,90,0), ${Hc})`,transition:"opacity .3s ease-out, visibility .3s"}}},overlay:{appearance:{backgroundColor:"rgba(0,0,0,0.75)"},open:na(),close:ra()},scrollbars:{track:{size:16,appearance:{transition:"opacity .3s ease-out, visibility .3s ease-out",borderTopRightRadius:4,borderBottomRightRadius:4}},thumb:{size:4,min:48,appearance:{backgroundColor:Fc},hover:{backgroundColor:Uc},horizontal:{transition:"height .2s ease-out, background-color .2s ease-out"},vertical:{transition:"width .2s ease-out, background-color .2s ease-out"}},offset:new Li(8,8,8,8)},scrollbarsInteractable:!0,maxWidth:400,delegateWidths:!0},Dd={width:56,height:320,appearance:{backgroundColor:"rgba(44,64,90,0.8)",boxShadow:"0 0 20px 0px rgba(0,0,0,.25)",borderRadius:8,transition:"background-color .2s ease-out"},hover:{backgroundColor:"rgba(44,64,90,0.9)"},track:{width:8,height:224,upper:{offset:4,appearance:{borderRadius:"4px 4px 0 0",backgroundColor:Qc,transition:"background-color .2s ease-out",cursor:"zoom-in"}},lower:{offset:4,appearance:{borderRadius:"0 0 4px 4px",backgroundColor:qc,transition:"background-color .2s ease-out",cursor:"zoom-out"}}},thumb:{width:32,height:96,appearance:{backgroundColor:"rgb(255,255,255)",boxShadow:"0 0 5px rgb(60, 60, 60)",borderRadius:16,transition:"background-color .2s ease-out","*":{cursor:"-webkit-grab"}},grab:{"*":{cursor:"-webkit-grabbing"}},buttons:{max:{appearance:{background:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1ODAiIGhlaWdodD0iNTgwIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIHZpZXdCb3g9IjAgMCA1ODAwIDU4MDAiPjxwYXRoIGQ9Im02NjkgNDIxMCAyMjMxLTIyMzIgMjIzMSAyMjMyLTE0MSAxNDEtMjA5MC0yMDkwTDgxMCA0MzUxbC0xNDEtMTQxem0wLTEwMDBMMjkwMCA5NzhsMjIzMSAyMjMyLTE0MSAxNDEtMjA5MC0yMDkwTDgxMCAzMzUxbC0xNDEtMTQxeiIvPjwvc3ZnPg==") no-repeat center 5px',backgroundSize:"24px 24px"},disabled:{opacity:.2}},fit:{appearance:{background:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1ODAiIGhlaWdodD0iNTgwIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIHZpZXdCb3g9IjAgMCA1ODAwIDU4MDAiPjxwYXRoIGQ9Ik0zMDAgMzEwMGg2MDB2MjAwSDMwMHYtMjAwem0yMjAwIDBoMzAwMHYyMDBIMjUwMHYtMjAwem0tMjAwLTgwMHYxNTQxbC02MDAgNjAwLTYwMC02MDBWMjMwMGgxMjAwem0tMjAwIDIwMGgtODAwdjEyNTlsNDAwIDQwMCA0MDAtNDAwVjI1MDB6Ii8+PC9zdmc+") no-repeat center center',backgroundSize:"24px 24px"},disabled:{opacity:.2}},min:{appearance:{background:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1ODAiIGhlaWdodD0iNTgwIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIHZpZXdCb3g9IjAgMCA1ODAwIDU4MDAiPjxwYXRoIGQ9Ik01MTMxIDI0OTAgMjkwMCA0NzIyIDY2OSAyNDkwbDE0MS0xNDEgMjA5MCAyMDkwIDIwOTAtMjA5MCAxNDEgMTQxem0wLTEwMDBMMjkwMCAzNzIyIDY2OSAxNDkwbDE0MS0xNDEgMjA5MCAyMDkwIDIwOTAtMjA5MCAxNDEgMTQxeiIvPjwvc3ZnPg==") no-repeat center 3px',backgroundSize:"24px 24px"},disabled:{opacity:.2}}}},zoomIn:{width:56,height:48,appearance:{background:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjRkZGIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0wIDhoMTZtLTggOFYwIi8+PC9zdmc+") no-repeat center center',backgroundSize:"15px 15px",opacity:.7,cursor:"zoom-in"},hover:{opacity:1},crawl:{opacity:1},disabled:{cursor:"default"}},zoomOut:{width:56,height:48,appearance:{background:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjRkZGIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0wIDhoMTYiLz48L3N2Zz4=") no-repeat center center',backgroundSize:"15px 15px",opacity:.7,cursor:"zoom-out"},hover:{opacity:1},crawl:{opacity:1},disabled:{cursor:"default"}}},Ad={height:64,style:{orientation:"horizontal",spacing:new Li(8,12,15,12),appearance:{backgroundColor:Wu,borderBottom:`1px solid ${Vu}`,backdropFilter:"blur(3px)"}},title:{color:Gu,withIcon:{width:"fill",appearance:{backgroundPosition:"0 center",backgroundSize:"24px 24px",fontFamily:Ld.Forms.Header.Face,fontSize:Ld.Forms.Header.Size,color:Gu,textAlign:"left",marginLeft:16,marginRight:8,paddingTop:9,paddingLeft:40}},withoutIcon:{width:"fill",appearance:{fontFamily:Ld.Forms.Header.Face,fontSize:Ld.Forms.Header.Size,color:Gu,textAlign:"left",marginLeft:24,marginRight:8,paddingTop:9}}},buttons:{type:{height:40,appearance:{fontFamily:Ld.Buttons.Face,fontSize:Ld.Buttons.Size,color:Ju.Face,textAlign:"left",backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTAgNmEuNS41IDAgMCAxIC44NTMtLjM1NGw4LjY0NiA4LjY0NiA4LjY0Ni04LjY0NmEuNS41IDAgMCAxIC43MDcuNzA3bC05IDlhLjUuNSAwIDAgMS0uNzA3IDBsLTktOWEuNDk4LjQ5OCAwIDAgMS0uMTQ2LS4zNTR6IiBmaWxsPSIjMDA5M0VFIi8+PC9zdmc+")',backgroundSize:"16px 16px",backgroundPosition:"right 16px center",backgroundColor:Ju.Background,border:`1px solid ${Ju.Border}`,borderRadius:4,marginLeft:4,padding:"10px 40px 0px 20px",transition:"background .1s ease-in-out, opacity .1s ease-in-out"},hover:{backgroundColor:Ju.BackgroundHover},tap:{backgroundColor:Ju.BackgroundTap},opened:{backgroundColor:Ju.BackgroundTap},menu:Cd},close:{height:40,appearance:{backgroundColor:Qu.Background,fontFamily:Ld.Buttons.Face,fontSize:Ld.Buttons.Size,color:Qu.Face,borderRadius:4,padding:"11px 24px 10px 24px",margin:"0 8px",transition:"background .1s ease-in-out, opacity .1s ease-in-out"},disabled:{opacity:.3},hover:{backgroundColor:Qu.BackgroundHover},tap:{backgroundColor:Qu.BackgroundTap},animations:{enable:ha()}}}};function jd(e,t,i,s,o,n,r,a){return{track:{size:16,appearance:{transition:"opacity .3s ease-out, visibility .3s ease-out, background-color .2s ease-out, border-color .2s ease-out"},crawl:{backgroundColor:n},spacing:a},thumb:{size:8,min:48,appearance:{backgroundColor:e},horizontal:{transition:"height .2s ease-out, background-color .2s ease-out"},vertical:{transition:"width .2s ease-out, background-color .2s ease-out"},hover:{backgroundColor:t},focus:{backgroundColor:i},drag:{backgroundColor:s},crawl:{backgroundColor:o}},corner:{appearance:{border:`1px dotted ${r}`,transition:"opacity .3s ease-out, visibility .3s ease-out, background-color .2s ease-out, border-color .2s ease-out, width .2s ease-out, height .2s ease-out"}}}}const Td={width:200,spacing:{top:Ad.height,left:16,right:17,bottom:16},static:{padding:"40px 16px 13px",fontFamily:Ld.Forms.Features.Static.Face,fontSize:Ld.Forms.Features.Static.Size,color:Ku},toggle:{appearance:{height:40,width:"auto",maxWidth:"100%",padding:"0 16px 0",margin:"4px 0 0",fontFamily:Ld.Forms.Features.Toggle.Face,fontSize:Ld.Forms.Features.Toggle.Face,color:eh,borderRadius:4},locked:{color:th.Face,background:`${th.Background} url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE0LjUgOEgxNFY2LjVDMTQgNC4wMTkgMTEuOTgxIDIgOS41IDJTNSA0LjAxOSA1IDYuNVY4aC0uNUMzLjY3MyA4IDMgOC42NzMgMyA5LjV2OGMwIC44MjcuNjczIDEuNSAxLjUgMS41aDEwYy44MjcgMCAxLjUtLjY3MyAxLjUtMS41di04YzAtLjgyNy0uNjczLTEuNS0xLjUtMS41ek02IDYuNUM2IDQuNTcgNy41NyAzIDkuNSAzUzEzIDQuNTcgMTMgNi41VjhINlY2LjV6bTkgMTFhLjUuNSAwIDAgMS0uNS41aC0xMGEuNS41IDAgMCAxLS41LS41di04YS41LjUgMCAwIDEgLjUtLjVoMTBhLjUuNSAwIDAgMSAuNS41djh6IiBmaWxsPSIjMDA5M0VFIi8+PC9zdmc+") no-repeat right 8px center`,backgroundSize:"16px 16px",paddingRight:40},activated:{appearance:{color:th.Face,backgroundColor:th.Background}},option:{button:{width:40,hover:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0ibTEwLjcwNyAxMC41IDUuNjQ2LTUuNjQ2YS41LjUgMCAwIDAtLjcwNy0uNzA3TDEwIDkuNzkzIDQuMzU0IDQuMTQ3YS41LjUgMCAwIDAtLjcwNy43MDdMOS4yOTMgMTAuNWwtNS42NDYgNS42NDZhLjUuNSAwIDAgMCAuNzA4LjcwN2w1LjY0Ni01LjY0NiA1LjY0NiA1LjY0NmEuNDk4LjQ5OCAwIDAgMCAuNzA4IDAgLjUuNSAwIDAgMCAwLS43MDdMMTAuNzA5IDEwLjV6IiBmaWxsPSIjRkYxNTFGIi8+PC9zdmc+")'}},appearance:{color:th.Face,background:`${th.Background} url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0ibTEwLjcwNyAxMC41IDUuNjQ2LTUuNjQ2YS41LjUgMCAwIDAtLjcwNy0uNzA3TDEwIDkuNzkzIDQuMzU0IDQuMTQ3YS41LjUgMCAwIDAtLjcwNy43MDdMOS4yOTMgMTAuNWwtNS42NDYgNS42NDZhLjUuNSAwIDAgMCAuNzA4LjcwN2w1LjY0Ni01LjY0NiA1LjY0NiA1LjY0NmEuNDk4LjQ5OCAwIDAgMCAuNzA4IDAgLjUuNSAwIDAgMCAwLS43MDdMMTAuNzA5IDEwLjV6IiBmaWxsPSIjMDA5M0VFIi8+PC9zdmc+") no-repeat right 8px center`,backgroundSize:"16px 16px",paddingRight:40,transition:"padding .2s ease-out"}},hover:{color:th.Face,backgroundColor:th.Background,transition:"padding .2s ease-out"},focus:{textDecoration:"underline"}},disabled:{opacity:.2},scrollbars:jd(Sh.Color,Sh.Hover,Sh.Focus,Sh.Drag,Sh.Crawl,Ih.Crawl,kh,new Li(0,Ad.height+1,2,1)),bounce:"yes"},zd={features:Td,cards:{spacing:{left:32,right:33,top:38,between:38,bottom:38},animations:{shift:{transition:"transform .15s"},activate:ca(),activateDelay:50,deactivate:ua(),deactivateDelay:100}},scrollbars:jd(Sh.Color,Sh.Hover,Sh.Focus,Sh.Drag,Sh.Crawl,Ih.Crawl,kh,new Li(0,1,2,1)),bounce:"yes"},Ed={appearance:{height:40,marginBottom:8,padding:"11px 24px",fontFamily:Ld.Forms.Control.Face,fontSize:Ld.Forms.Control.Size,textAlign:"center",verticalAlign:"top",borderRadius:4,border:"none",transition:"background .1s ease-in-out"},fused:{padding:"11px 24px !important",marginBottom:0},disabled:{opacity:.2},focus:{textDecoration:"underline"},normal:{appearance:{backgroundColor:$u.Background,color:$u.Face},hover:{backgroundColor:$u.BackgroundHover},tap:{backgroundColor:$u.BackgroundTap}},accept:{appearance:{backgroundColor:Qu.Background,color:Qu.Face},hover:{backgroundColor:Qu.BackgroundHover},tap:{backgroundColor:Qu.BackgroundTap}},warning:{appearance:{backgroundColor:qu.Background,color:qu.Face},hover:{backgroundColor:qu.BackgroundHover},tap:{backgroundColor:qu.BackgroundTap}},cancel:{appearance:{backgroundColor:Xu.Background,color:Xu.Face},hover:{backgroundColor:Xu.BackgroundHover},tap:{backgroundColor:Xu.BackgroundTap}}},Od={button:{spacing:8,appearance:{height:40,padding:"0 12px",fontFamily:Ld.Forms.Control.Face,fontSize:Ld.Forms.Control.Size,color:mh,borderRadius:4,border:`1px solid ${sh} !important`,backgroundColor:ih,transition:"background .1s ease-in-out, border .1s ease-in-out"},hover:{backgroundColor:rh,border:`1px solid ${uh} !important`},tap:{backgroundColor:rh,border:`1px solid ${uh} !important`},disabled:{opacity:.2},image:{marginRight:8,width:20,height:20,backgroundSize:"20px 20px",position:"relative",top:-1},badge:{marginLeft:8,fontSize:9,textTransform:"uppercase",backgroundColor:"#ffd700",color:"#423700",padding:"2px 5px",borderRadius:4}},fused:{padding:0,marginBottom:0,border:"none",backgroundColor:"transparent"},disabled:{opacity:.2},group:{fontFamily:Ld.Forms.Title.Face,fontSize:Ld.Forms.Title.Size,color:oh,fontWeight:"normal",paddingBottom:8,paddingTop:24}};var Pd="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHJlY3QgeD0iLjUiIHk9Ii41IiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHJ4PSI0IiByeT0iNCIgZmlsbD0iI0VDRjVGRCIgc3Ryb2tlPSIjQThDNkRGIi8+PC9zdmc+",Rd="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHJlY3QgeD0iLjUiIHk9Ii41IiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHJ4PSI0IiByeT0iNCIgZmlsbD0iI0E4QzZERiIvPjxwYXRoIGQ9Ik04LjUgMTQuNWEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTMtM2EuNS41IDAgMCAxIC43MDctLjcwN2wyLjY0NiAyLjY0NiA2LjY0Ni02LjY0NmEuNS41IDAgMCAxIC43MDcuNzA3bC03IDdhLjQ5OC40OTggMCAwIDEtLjM1NC4xNDZ6IiBmaWxsPSIjZmZmIi8+PC9zdmc+";const Hd={appearance:{marginBottom:8,minHeight:32},label:{padding:"6px 0 4px 32px",backgroundPosition:"0 6px",backgroundSize:"20px 20px",fontFamily:Ld.Forms.Control.Face,fontSize:Ld.Forms.Control.Size,lineHeight:Ld.Forms.Control.Lineheight,color:mh,transition:"background .1s ease-in-out",a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},description:{padding:"0 0 6px 32px",fontFamily:Ld.Forms.Label.Face,fontSize:Ld.Forms.Label.Size,lineHeight:Ld.Forms.Label.Lineheight,color:hh,a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},unchecked:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHJlY3QgeD0iLjUiIHk9Ii41IiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHJ4PSI0IiByeT0iNCIgZmlsbD0iI0ZGRiIgc3Ryb2tlPSIjQThDNkRGIi8+PC9zdmc+")'},checked:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHJlY3QgeD0iLjUiIHk9Ii41IiB3aWR0aD0iMTkiIGhlaWdodD0iMTkiIHJ4PSI0IiByeT0iNCIgZmlsbD0iIzAwOTNFRSIvPjxwYXRoIGQ9Ik04LjUgMTQuNWEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTMtM2EuNS41IDAgMCAxIC43MDctLjcwN2wyLjY0NiAyLjY0NiA2LjY0Ni02LjY0NmEuNS41IDAgMCAxIC43MDcuNzA3bC03IDdhLjQ5OC40OTggMCAwIDEtLjM1NC4xNDZ6IiBmaWxsPSIjZmZmIi8+PC9zdmc+")'},disabled:{appearance:{opacity:.2},label:{color:"rgb(0,0,0)"},description:{color:"rgb(0,0,0)"}},focus:{label:{textDecoration:"underline"}},hover:{unchecked:{backgroundImage:`url("${Pd}")`},checked:{backgroundImage:`url("${Rd}")`}},fused:{appearance:{marginBottom:0,minHeight:40,padding:"10px 16px",borderRadius:4,backgroundColor:ih},focus:{label:{textDecoration:"underline"}},hover:{unchecked:{backgroundImage:`url("${Pd}")`},checked:{backgroundImage:`url("${Rd}")`}}}};var Fd;!function(e){var t;e.Lock='url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE0LjUgOEgxNFY2LjVDMTQgNC4wMTkgMTEuOTgxIDIgOS41IDJTNSA0LjAxOSA1IDYuNVY4aC0uNUMzLjY3MyA4IDMgOC42NzMgMyA5LjV2OGMwIC44MjcuNjczIDEuNSAxLjUgMS41aDEwYy44MjcgMCAxLjUtLjY3MyAxLjUtMS41di04YzAtLjgyNy0uNjczLTEuNS0xLjUtMS41ek02IDYuNUM2IDQuNTcgNy41NyAzIDkuNSAzUzEzIDQuNTcgMTMgNi41VjhINlY2LjV6bTkgMTFhLjUuNSAwIDAgMS0uNS41aC0xMGEuNS41IDAgMCAxLS41LS41di04YS41LjUgMCAwIDEgLjUtLjVoMTBhLjUuNSAwIDAgMSAuNS41djh6IiBmaWxsPSIjQThDNkRGIi8+PC9zdmc+")',(t=e.Validation||(e.Validation={})).Passed='url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTkuNSAyMGMtMi41MzggMC00LjkyMy0uOTg4LTYuNzE4LTIuNzgyUzAgMTMuMDM4IDAgMTAuNTAxYzAtMi41MzguOTg4LTQuOTIzIDIuNzgyLTYuNzE4UzYuOTYyIDEgOS41IDFjMi41MzggMCA0LjkyMy45ODggNi43MTggMi43ODNTMTkgNy45NjMgMTkgMTAuNTAxcy0uOTg4IDQuOTIzLTIuNzgyIDYuNzE3QTkuNDM4IDkuNDM4IDAgMCAxIDkuNSAyMHptMC0xOEM0LjgxMyAyIDEgNS44MTMgMSAxMC41UzQuODEzIDE5IDkuNSAxOXM4LjUtMy44MTMgOC41LTguNVMxNC4xODcgMiA5LjUgMnoiIGZpbGw9IiM0RUNFM0QiLz48cGF0aCBkPSJNNy41IDE0LjVhLjUwMi41MDIgMCAwIDEtLjM1NC0uMTQ2bC0zLTNhLjUuNSAwIDAgMSAuNzA3LS43MDdsMi42NDYgMi42NDYgNi42NDYtNi42NDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNyA3YS40OTguNDk4IDAgMCAxLS4zNTQuMTQ2eiIgZmlsbD0iIzRFQ0UzRCIvPjwvc3ZnPg==")',t.Failed='url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0ibTE0LjMzMiAxNC4xMjYtNC4wOC0zLjYyNiA0LjA4LTMuNjI2YS41LjUgMCAwIDAtLjY2NC0uNzQ4TDkuNSA5LjgzMSA1LjMzMiA2LjEyNmEuNS41IDAgMSAwLS42NjQuNzQ4bDQuMDggMy42MjYtNC4wOCAzLjYyNmEuNS41IDAgMCAwIC42NjQuNzQ4TDkuNSAxMS4xNjlsNC4xNjggMy43MDVhLjUuNSAwIDEgMCAuNjY0LS43NDh6IiBmaWxsPSIjRkYxNTFGIi8+PHBhdGggZD0iTTkuNSAyMGMtMi41MzggMC00LjkyMy0uOTg4LTYuNzE4LTIuNzgyUzAgMTMuMDM4IDAgMTAuNTAxYzAtMi41MzguOTg4LTQuOTIzIDIuNzgyLTYuNzE4UzYuOTYyIDEgOS41IDFjMi41MzggMCA0LjkyMy45ODggNi43MTggMi43ODNTMTkgNy45NjMgMTkgMTAuNTAxcy0uOTg4IDQuOTIzLTIuNzgyIDYuNzE3QTkuNDM4IDkuNDM4IDAgMCAxIDkuNSAyMHptMC0xOEM0LjgxMyAyIDEgNS44MTMgMSAxMC41UzQuODEzIDE5IDkuNSAxOXM4LjUtMy44MTMgOC41LTguNVMxNC4xODcgMiA5LjUgMnoiIGZpbGw9IiNGRjE1MUYiLz48L3N2Zz4=")',t.Awaiting='url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2IDMuNVYzYzAtLjM5Mi0uMjQxLS43MzMtLjcxNy0xLjAxNC0uMzQ0LS4yMDMtLjgyMS0uMzgyLTEuNDE5LS41MzEtMS4xNzItLjI5My0yLjcyMi0uNDU0LTQuMzY0LS40NTRzLTMuMTkyLjE2MS00LjM2NC40NTRjLS41OTguMTQ5LTEuMDc1LjMyOC0xLjQxOS41MzFDMy4yNDEgMi4yNjcgMyAyLjYwOCAzIDN2LjVhNi41MTMgNi41MTMgMCAwIDAgNCA2LjAwMnYxLjk5N2E2LjUxMyA2LjUxMyAwIDAgMC00IDYuMDAydi41YzAgLjM5Mi4yNDEuNzMzLjcxNyAxLjAxNC4zNDQuMjAzLjgyMS4zODIgMS40MTkuNTMxQzYuMzA4IDE5LjgzOSA3Ljg1OCAyMCA5LjUgMjBzMy4xOTItLjE2MSA0LjM2NC0uNDU0Yy41OTgtLjE0OSAxLjA3NS0uMzI4IDEuNDE5LS41MzEuNDc2LS4yODEuNzE3LS42MjMuNzE3LTEuMDE0di0uNWE2LjUxMyA2LjUxMyAwIDAgMC00LTYuMDAyVjkuNTAyQTYuNTEzIDYuNTEzIDAgMCAwIDE2IDMuNXpNNS42MTIgMi4zNjlDNi42NzggMi4xMzEgOC4wNTkgMiA5LjUgMnMyLjgyMy4xMzEgMy44ODguMzY5YzEuMTUuMjU3IDEuNDk4LjUzNCAxLjU4OS42MzEtLjA5MS4wOTctLjQzOS4zNzQtMS41ODkuNjMxQzEyLjMyMiAzLjg2OSAxMC45NDEgNCA5LjUgNHMtMi44MjMtLjEzMS0zLjg4OC0uMzY5QzQuNDYyIDMuMzc0IDQuMTE0IDMuMDk3IDQuMDIzIDNjLjA5MS0uMDk3LjQzOS0uMzc0IDEuNTg5LS42MzF6bTUuNzIxIDkuOTQ0QTUuNTEgNS41MSAwIDAgMSAxNSAxNy41di40NzNjLS4wNDIuMDU3LS4zMjQuMzctMS42MTIuNjU3LTEuMDY2LjIzOC0yLjQ0Ny4zNjktMy44ODguMzY5cy0yLjgyMy0uMTMxLTMuODg4LS4zNjljLTEuMjg3LS4yODgtMS41Ny0uNi0xLjYxMi0uNjU3VjE3LjVhNS41MDkgNS41MDkgMCAwIDEgMy42NjctNS4xODcuNS41IDAgMCAwIC4zMzMtLjQ3MVY5LjE1OWEuNS41IDAgMCAwLS4zMzMtLjQ3MSA1LjUxMyA1LjUxMyAwIDAgMS0zLjYyNC00LjUwNmMuMy4xMzUuNjY2LjI1NyAxLjA5My4zNjRDNi4zMDggNC44MzkgNy44NTggNSA5LjUgNXMzLjE5Mi0uMTYxIDQuMzY0LS40NTRhNi41NDggNi41NDggMCAwIDAgMS4wOTMtLjM2NCA1LjUxMSA1LjUxMSAwIDAgMS0zLjYyNCA0LjUwNi41LjUgMCAwIDAtLjMzMy40NzF2Mi42ODNhLjUuNSAwIDAgMCAuMzMzLjQ3MXoiIGZpbGw9IiNBOEM2REYiLz48cGF0aCBkPSJNMTMuNjY3IDE2LjUyOUMxMS40MDUgMTUuNzMgMTAgMTMuODAzIDEwIDExLjVWOC40NzVhNC45NTUgNC45NTUgMCAwIDAgMS43MjMtLjQ5NS41LjUgMCAwIDAtLjQ0NS0uODk1Yy0uNTU1LjI3Ni0xLjE1My40MTYtMS43NzguNDE2cy0xLjIyMy0uMTQtMS43NzgtLjQxNmEuNS41IDAgMCAwLS40NDUuODk1QTQuOTI4IDQuOTI4IDAgMCAwIDkgOC40NzVWMTEuNWMwIDIuMzAyLTEuNDA1IDQuMjI5LTMuNjY3IDUuMDI5YS40OTkuNDk5IDAgMCAwIC4wNTguOTU5Yy45ODIuMjIgMi40NzcuNTEyIDQuMTA5LjUxMnMzLjEyNy0uMjkyIDQuMTA5LS41MTJhLjUuNSAwIDAgMCAuMDU4LS45NTl6TTkuNSAxN2MtLjg3NyAwLTEuNzAxLS4wODctMi40MzctLjIwNWE2LjQzIDYuNDMgMCAwIDAgMS43MTEtMS41NzVjLjI5My0uMzkxLjUzNi0uODEyLjcyNi0xLjI1NC4xOS40NDIuNDMzLjg2My43MjYgMS4yNTRhNi40MzIgNi40MzIgMCAwIDAgMS43MTEgMS41NzVjLS43MzYuMTE3LTEuNTYuMjA1LTIuNDM3LjIwNXoiIGZpbGw9IiNBOEM2REYiLz48L3N2Zz4=")'}(Fd||(Fd={}));const Ud={height:40,appearance:{marginBottom:8,padding:"6px 12px",fontFamily:Ld.Forms.Control.Face,fontSize:Ld.Forms.Control.Size,lineHeight:Ld.Forms.Control.Lineheight,color:mh,backgroundColor:nh,backgroundRepeat:"no-repeat",borderRadius:4,border:`1px solid ${lh} !important`,transition:"background-color .1s ease-in-out, color .1s ease-in-out, border-right .15s ease-in-out"},spacing:12,placeholder:{appearance:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgMkgxNnYtLjVhLjUuNSAwIDAgMC0xIDBWMkg1di0uNWEuNS41IDAgMCAwLTEgMFYySDEuNUMuNjczIDIgMCAyLjY3MyAwIDMuNXYxNGMwIC44MjcuNjczIDEuNSAxLjUgMS41aDE3Yy44MjcgMCAxLjUtLjY3MyAxLjUtMS41di0xNGMwLS44MjctLjY3My0xLjUtMS41LTEuNXptLTE3IDFINHYxLjVhLjUuNSAwIDAgMCAxIDBWM2gxMHYxLjVhLjUuNSAwIDAgMCAxIDBWM2gyLjVhLjUuNSAwIDAgMSAuNS41VjZIMVYzLjVhLjUuNSAwIDAgMSAuNS0uNXptMTcgMTVoLTE3YS41LjUgMCAwIDEtLjUtLjVWN2gxOHYxMC41YS41LjUgMCAwIDEtLjUuNXoiIGZpbGw9IiNBOEM2REYiLz48cGF0aCBkPSJtMTAuNzA3IDEyLjUgMi42NDYtMi42NDZhLjUuNSAwIDAgMC0uNzA3LS43MDdMMTAgMTEuNzkzIDcuMzU0IDkuMTQ3YS41LjUgMCAwIDAtLjcwNy43MDdMOS4yOTMgMTIuNWwtMi42NDYgMi42NDZhLjUuNSAwIDAgMCAuNzA4LjcwN2wyLjY0Ni0yLjY0NiAyLjY0NiAyLjY0NmEuNDk4LjQ5OCAwIDAgMCAuNzA4IDAgLjUuNSAwIDAgMCAwLS43MDdMMTAuNzA5IDEyLjV6IiBmaWxsPSIjQThDNkRGIi8+PC9zdmc+")',backgroundSize:"20px 20px",backgroundRepeat:"no-repeat",backgroundPosition:"0px 2px",height:24,minWidth:23},text:{padding:2,paddingLeft:30,paddingRight:0,color:ph}},date:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgMkgxNnYtLjVhLjUuNSAwIDAgMC0xIDBWMkg1di0uNWEuNS41IDAgMCAwLTEgMFYySDEuNUMuNjczIDIgMCAyLjY3MyAwIDMuNXYxNGMwIC44MjcuNjczIDEuNSAxLjUgMS41aDE3Yy44MjcgMCAxLjUtLjY3MyAxLjUtMS41di0xNGMwLS44MjctLjY3My0xLjUtMS41LTEuNXptLTE3IDFINHYxLjVhLjUuNSAwIDAgMCAxIDBWM2gxMHYxLjVhLjUuNSAwIDAgMCAxIDBWM2gyLjVhLjUuNSAwIDAgMSAuNS41VjZIMVYzLjVhLjUuNSAwIDAgMSAuNS0uNXptMTcgMTVoLTE3YS41LjUgMCAwIDEtLjUtLjVWN2gxOHYxMC41YS41LjUgMCAwIDEtLjUuNXoiIGZpbGw9IiNBOEM2REYiLz48cGF0aCBkPSJNOC41IDE1LjVhLjUwMi41MDIgMCAwIDEtLjM1NC0uMTQ2bC0yLTJhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS42NDYgMS42NDYgNC42NDYtNC42NDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNSA1YS40OTguNDk4IDAgMCAxLS4zNTQuMTQ2eiIgZmlsbD0iI0E4QzZERiIvPjwvc3ZnPg==")',backgroundSize:"20px 20px",backgroundRepeat:"no-repeat",backgroundPosition:"0px 2px",paddingLeft:22,height:24},time:{appearance:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2LjIxOCAzLjc4MkMxNC40MjQgMS45ODggMTIuMDM4IDEgOS41IDFzLTQuOTIzLjk4OC02LjcxOCAyLjc4MkMuOTg4IDUuNTc2IDAgNy45NjIgMCAxMC40OTlzLjk4OCA0LjkyMyAyLjc4MiA2LjcxOCA0LjE4IDIuNzgyIDYuNzE4IDIuNzgyIDQuOTIzLS45ODggNi43MTgtMi43ODJTMTkgMTMuMDM3IDE5IDEwLjQ5OXMtLjk4OC00LjkyMy0yLjc4Mi02LjcxN3pNOS41IDE5QzQuODEzIDE5IDEgMTUuMTg3IDEgMTAuNVM0LjgxMyAyIDkuNSAyIDE4IDUuODEzIDE4IDEwLjUgMTQuMTg3IDE5IDkuNSAxOXoiIGZpbGw9IiNBOEM2REYiLz48cGF0aCBkPSJNMTUuMTI5IDcuMjVhLjUuNSAwIDAgMC0uNjgzLS4xODNsLTQuOTIgMi44NDEtMy44MzUtMi42ODVhLjUuNSAwIDAgMC0uNTczLjgxOWw0LjA5NiAyLjg2OC4wMDMuMDAyLjAyNi4wMTYuMDA3LjAwNC4wMjcuMDE0LjAwNi4wMDMuMDMxLjAxNC4wMTkuMDA3LjAxNC4wMDUuMDIuMDA2LjAxMy4wMDMuMDIuMDA1LjAxNC4wMDMuMDE5LjAwMy4wMTguMDAyLjAxNi4wMDJhLjQwOS40MDkgMCAwIDAgLjA5Mi0uMDAyaC4wMDFhLjUzLjUzIDAgMCAwIC4wNTUtLjAxbC4wMDQtLjAwMWEuMzMzLjMzMyAwIDAgMCAuMDU4LS4wMTkuMzk2LjM5NiAwIDAgMCAuMDQ3LS4wMjFsLjAwOS0uMDA1LjAxNy0uMDA5IDUuMTk2LTNhLjUuNSAwIDAgMCAuMTgzLS42ODN6IiBmaWxsPSIjQThDNkRGIi8+PC9zdmc+")',backgroundSize:"20px 20px",backgroundRepeat:"no-repeat",backgroundPosition:"0px 2px",paddingLeft:22,height:24},hourMinuteSeparator:{width:4,paddingLeft:4,"&:after":{content:'":"'}},minuteSecondSeparator:{width:4,paddingLeft:4,"&:after":{content:'":"'}}},plane:{appearance:{backgroundColor:"rgba(168,198,223,0.1)",borderRadius:4,marginLeft:8,padding:"2px 8px 2px 8px"},hover:{backgroundColor:"rgba(168,198,223,0.4)"},selected:{backgroundColor:fh.Background,color:fh.Color},focus:{backgroundColor:fh.Background,color:fh.Color}},label:{fontFamily:Ld.Forms.Label.Face,fontSize:Ld.Forms.Label.Size,lineHeight:Ld.Forms.Label.Lineheight,color:hh,padding:"0 0 6px",a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},disabled:{opacity:.2},required:{borderRight:`3px solid ${gh} !important`},hover:{backgroundColor:rh,border:`1px solid ${uh} !important`},focus:{backgroundColor:ah,border:`1px solid ${ch} !important`},awaiting:{backgroundImage:Fd.Validation.Awaiting,backgroundPosition:"right 6px top 9px",backgroundSize:"19px 19px",paddingRight:42},failed:{backgroundImage:Fd.Validation.Failed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",border:`1px solid ${bh} !important`,paddingRight:42},passed:{backgroundImage:Fd.Validation.Passed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",paddingRight:42},locked:{backgroundImage:Fd.Lock,backgroundPosition:"right 7px top 8px",backgroundSize:"20px 20px",paddingRight:42},fused:{appearance:{minHeight:38,border:"none !important",backgroundColor:"transparent !important",marginBottom:0,padding:"9px 12px"},required:{borderRight:`3px solid ${gh} !important`},locked:{"> label > *":{backgroundImage:Fd.Lock,backgroundPosition:"right 7px top 8px",backgroundSize:"20px 20px",paddingRight:42}},focus:{backgroundColor:ah,border:`1px solid ${ch} !important`},hover:{backgroundColor:rh,border:`1px solid ${uh} !important`},passed:{"> label > *":{backgroundImage:Fd.Validation.Passed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",paddingRight:42}},failed:{"> label > *":{backgroundImage:Fd.Validation.Failed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",paddingRight:42},border:`1px solid ${bh} !important`},awaiting:{"> label > *":{backgroundImage:Fd.Validation.Awaiting,backgroundPosition:"right 6px top 9px",backgroundSize:"19px 19px",paddingRight:42}}},labels:{enable:ol("builder","Set date"),disable:ol("builder","Remove date"),reset:ol("builder","Set to now")}},Bd={appearance:{height:40,marginBottom:8,padding:"0 42px 0 16px",fontFamily:Ld.Forms.Control.Face,fontSize:Ld.Forms.Control.Size,color:mh,borderRadius:4,border:`1px solid ${lh} !important`,background:`${nh} url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTAgNmEuNS41IDAgMCAxIC44NTMtLjM1NGw4LjY0NiA4LjY0NiA4LjY0Ni04LjY0NmEuNS41IDAgMCAxIC43MDcuNzA3bC05IDlhLjUuNSAwIDAgMS0uNzA3IDBsLTktOWEuNDk4LjQ5OCAwIDAgMS0uMTQ2LS4zNTR6IiBmaWxsPSIjQThDNkRGIi8+PC9zdmc+") no-repeat right 10px top 11px`,backgroundSize:"16px 16px",transition:"background-color .1s ease-in-out, color .1s ease-in-out, border-right .15s ease-in-out"},options:{color:mh},optGroups:{fontFamily:Ld.Forms.Optgroup.Face,color:mh},placeholder:{color:ph},label:{fontFamily:Ld.Forms.Label.Face,fontSize:Ld.Forms.Label.Size,lineHeight:Ld.Forms.Label.Lineheight,color:hh,padding:"0 0 6px",a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},disabled:{opacity:.2},required:{borderRight:`3px solid ${gh} !important`},locked:{backgroundImage:Fd.Lock,backgroundPosition:"right 7px top 8px",backgroundSize:"20px 20px"},focus:{backgroundColor:ah,border:`1px solid ${ch} !important`},hover:{backgroundColor:rh,border:`1px solid ${uh} !important`},passed:{backgroundImage:Fd.Validation.Passed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px"},failed:{backgroundImage:Fd.Validation.Failed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",border:`1px solid ${bh} !important`},awaiting:{backgroundImage:Fd.Validation.Awaiting,backgroundPosition:"right 6px top 9px",backgroundSize:"19px 19px"},fused:{appearance:{height:38,border:"none !important",backgroundColor:"transparent !important",marginBottom:0},required:{borderRight:`3px solid ${gh} !important`},locked:{select:{backgroundImage:Fd.Lock,backgroundPosition:"right 7px top 8px",backgroundSize:"20px 20px"}},focus:{backgroundColor:ah,border:`1px solid ${ch} !important`},hover:{backgroundColor:rh,border:`1px solid ${uh} !important`},passed:{select:{backgroundImage:Fd.Validation.Passed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px"}},failed:{select:{backgroundImage:Fd.Validation.Failed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px"},border:`1px solid ${bh} !important`},awaiting:{select:{backgroundImage:Fd.Validation.Awaiting,backgroundPosition:"right 6px top 9px",backgroundSize:"19px 19px"}}}},Yd={appearance:{minHeight:40,marginBottom:8,padding:"9px 16px 9px 37px",fontFamily:Ld.Forms.Control.Face,fontSize:Ld.Forms.Control.Size,lineHeight:Ld.Forms.Control.Lineheight,borderRadius:4,border:"none",backgroundSize:"19px 19px",backgroundPosition:"10px 10px",backgroundRepeat:"no-repeat",a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},fused:{padding:"9px 16px 9px 37px !important",marginBottom:0},normal:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE5LjM4OSAzLjA5OUMxOC44MTEgMS4zNjQgMTguMDQzIDEgMTcuNSAxbC0uMDM1LjAwMWMtLjU1My4wMTItMS41MzYuMjk5LTMuMDA4LjczMS0zLjA4NC45MDMtNy43NDQgMi4yNjktMTIuNDU4IDIuMjY5LTEuMTQgMC0yIDEuNTA1LTIgMy41cy44NiAzLjUgMiAzLjVjLjM2OSAwIC43MzguMDA4IDEuMTA1LjAyNGwxLjY2NiA2LjYyOGMuMTkuNzU2Ljk0OSAxLjM0OCAxLjcyOSAxLjM0OGgxLjMxM2MuNDMzIDAgLjgwMS0uMTggMS4wMDgtLjQ5NXMuMjI5LS43MjMuMDYtMS4xMjFsLTIuNTc3LTYuMDQ4YzMuMTM2LjQ2MiA2LjAyMiAxLjMwOCA4LjE1NCAxLjkzMiAxLjQ3Mi40MzEgMi40NTUuNzE5IDMuMDA4LjczMWwuMDM1LjAwMWMuNTQyIDAgMS4zMS0uMzY0IDEuODg5LTIuMDk5LjM5NC0xLjE4My42MTEtMi43NDYuNjExLTQuNDAxcy0uMjE3LTMuMjE4LS42MTEtNC40MDF6TTE2IDcuNWMwLS41MTMuMDIyLTEuMDE1LjA2NC0xLjQ5Ni41MTMuMDUyLjkzNi43MTYuOTM2IDEuNDk2cy0uNDIyIDEuNDQ1LS45MzYgMS40OTZBMTcuMjUzIDE3LjI1MyAwIDAgMSAxNiA3LjV6bS0xNSAwQzEgNS45NzQgMS41OTIgNSAyIDVjMS4xMzUgMCAyLjI2NC0uMDc2IDMuMzY4LS4yMDRDNS4xMzEgNS41NTQgNSA2LjQ5MyA1IDcuNXMuMTMgMS45NDYuMzY4IDIuNzA0QTI5LjI5NyAyOS4yOTcgMCAwIDAgMiAxMGMtLjQwOCAwLTEtLjk3NC0xLTIuNXptNi45NjEgMTAuMjc2Yy4wNDEuMDk2LjAzOC4xNi4wMjYuMTc4UzcuOTE4IDE4IDcuODEzIDE4SDYuNWMtLjMxOSAwLS42ODEtLjI4Mi0uNzU5LS41OTJsLTEuNTg4LTYuMzE5Yy4zMzUuMDI3LjY2OS4wNTkgMSAuMDk3bDIuODA4IDYuNTl6bS0xLjQ3Mi03LjQyM0M2LjE4NSA5LjY2NiA2IDguNjA1IDYgNy41YzAtMS4xMjIuMTgtMi4xNjMuNDg4LTIuODUyIDMuMTg1LS40NzMgNi4wOTYtMS4zMjUgOC4yNS0xLjk1Ny40MTUtLjEyMi44MTEtLjIzOCAxLjE3MS0uMzM5YTYuNTE5IDYuNTE5IDAgMCAwLS4yOTguNzQ3QzE1LjIxNyA0LjI4MiAxNSA1Ljg0NSAxNSA3LjVzLjIxNyAzLjIxOC42MTEgNC40MDFjLjA5NS4yODQuMTk1LjUzMi4yOTguNzQ3LS4zNi0uMTAxLS43NTYtLjIxNy0xLjE3MS0uMzM5LTIuMTU1LS42MzEtNS4wNjUtMS40ODQtOC4yNS0xLjk1N3ptMTEuOTUxIDEuMjMyYy0uMzczIDEuMTItLjc3OCAxLjQxNS0uOTQgMS40MTVzLS41NjctLjI5Ni0uOTQtMS40MTVhOS45NDcgOS45NDcgMCAwIDEtLjM3NS0xLjU5NmMuNDg2LS4wNTYuOTQzLS4zMzEgMS4yNzYtLjc3NUMxNy44MDkgOC43NSAxOCA4LjE0MSAxOCA3LjVzLS4xOTItMS4yNTEtLjUzOS0xLjcxNGMtLjMzMy0uNDQ0LS43OS0uNzE5LTEuMjc2LS43NzUuMDkzLS41ODYuMjE5LTEuMTI2LjM3NS0xLjU5Ni4zNzMtMS4xMi43NzgtMS40MTYuOTQtMS40MTZzLjU2Ny4yOTYuOTQgMS40MTVjLjM2MSAxLjA4NC41NiAyLjUzNC41NiA0LjA4NXMtLjE5OSAzLjAwMS0uNTYgNC4wODV6IiBmaWxsPSIjRkZGIi8+PC9zdmc+")',backgroundColor:yh.Background,color:yh.Face},info:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2LjIxOCAzLjc4MkMxNC40MjQgMS45ODggMTIuMDM4IDEgOS41IDFzLTQuOTIzLjk4OC02LjcxOCAyLjc4MlMwIDcuOTYyIDAgMTAuNDk5cy45ODggNC45MjMgMi43ODIgNi43MTggNC4xOCAyLjc4MiA2LjcxOCAyLjc4MiA0LjkyMy0uOTg4IDYuNzE4LTIuNzgyUzE5IDEzLjAzNyAxOSAxMC40OTlzLS45ODgtNC45MjMtMi43ODItNi43MTd6TTkuNSAxOUM0LjgxMyAxOSAxIDE1LjE4NyAxIDEwLjVTNC44MTMgMiA5LjUgMmM0LjY4NyAwIDguNSAzLjgxMyA4LjUgOC41UzE0LjE4NyAxOSA5LjUgMTl6IiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTkuNSAxOGEuNS41IDAgMCAxLS41LS41di0xYS41LjUgMCAwIDEgMSAwdjFhLjUuNSAwIDAgMS0uNS41em0wLTNhLjUuNSAwIDAgMS0uNS0uNXYtMTBhLjUuNSAwIDAgMSAxIDB2MTBhLjUuNSAwIDAgMS0uNS41eiIgZmlsbD0iI0ZGRiIvPjwvc3ZnPg==")',backgroundColor:vh.Background,color:vh.Face},success:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTkuNSAyMGMtMi41MzggMC00LjkyMy0uOTg4LTYuNzE4LTIuNzgyUzAgMTMuMDM4IDAgMTAuNTAxYzAtMi41MzguOTg4LTQuOTIzIDIuNzgyLTYuNzE4UzYuOTYyIDEgOS41IDFjMi41MzggMCA0LjkyMy45ODggNi43MTggMi43ODNTMTkgNy45NjMgMTkgMTAuNTAxcy0uOTg4IDQuOTIzLTIuNzgyIDYuNzE3QTkuNDM4IDkuNDM4IDAgMCAxIDkuNSAyMHptMC0xOEM0LjgxMyAyIDEgNS44MTMgMSAxMC41UzQuODEzIDE5IDkuNSAxOXM4LjUtMy44MTMgOC41LTguNVMxNC4xODcgMiA5LjUgMnoiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNNy41IDE0LjVhLjUwMi41MDIgMCAwIDEtLjM1NC0uMTQ2bC0zLTNhLjUuNSAwIDAgMSAuNzA3LS43MDdsMi42NDYgMi42NDYgNi42NDYtNi42NDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNyA3YS40OTguNDk4IDAgMCAxLS4zNTQuMTQ2eiIgZmlsbD0iI0ZGRiIvPjwvc3ZnPg==")',backgroundColor:Mh.Background,color:Mh.Face},warning:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgMTlILjVhLjUuNSAwIDAgMS0uNDM2LS43NDZsOS0xNmEuNTAxLjUwMSAwIDAgMSAuODcyIDBsOSAxNkEuNTAzLjUwMyAwIDAgMSAxOC41IDE5ek0xLjM1NSAxOGgxNi4yOUw5LjUgMy41MiAxLjM1NSAxOHoiIGZpbGw9IiNGRkYiLz48cGF0aCBkPSJNOS41IDE0YS41LjUgMCAwIDEtLjUtLjV2LTVhLjUuNSAwIDAgMSAxIDB2NWEuNS41IDAgMCAxLS41LjV6bTAgM2EuNS41IDAgMCAxLS41LS41di0xYS41LjUgMCAwIDEgMSAwdjFhLjUuNSAwIDAgMS0uNS41eiIgZmlsbD0iI0ZGRiIvPjwvc3ZnPg==")',backgroundColor:wh.Background,color:wh.Face},error:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0ibTE0LjMzMiAxNC4xMjYtNC4wOC0zLjYyNiA0LjA4LTMuNjI2YS41LjUgMCAwIDAtLjY2NC0uNzQ4TDkuNSA5LjgzMSA1LjMzMiA2LjEyNmEuNS41IDAgMSAwLS42NjQuNzQ4bDQuMDggMy42MjYtNC4wOCAzLjYyNmEuNS41IDAgMCAwIC42NjQuNzQ4TDkuNSAxMS4xNjlsNC4xNjggMy43MDVhLjUuNSAwIDEgMCAuNjY0LS43NDh6IiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTkuNSAyMGMtMi41MzggMC00LjkyMy0uOTg4LTYuNzE4LTIuNzgyUzAgMTMuMDM4IDAgMTAuNTAxYzAtMi41MzguOTg4LTQuOTIzIDIuNzgyLTYuNzE4UzYuOTYyIDEgOS41IDFjMi41MzggMCA0LjkyMy45ODggNi43MTggMi43ODNTMTkgNy45NjMgMTkgMTAuNTAxcy0uOTg4IDQuOTIzLTIuNzgyIDYuNzE3QTkuNDM4IDkuNDM4IDAgMCAxIDkuNSAyMHptMC0xOEM0LjgxMyAyIDEgNS44MTMgMSAxMC41UzQuODEzIDE5IDkuNSAxOXM4LjUtMy44MTMgOC41LTguNVMxNC4xODcgMiA5LjUgMnoiIGZpbGw9IiNGRkYiLz48L3N2Zz4=")',backgroundColor:xh.Background,color:xh.Face}},Zd={appearance:{minHeight:40,marginBottom:8,padding:"8px 16px",fontFamily:Ld.Forms.Control.Face,fontSize:Ld.Forms.Control.Size,lineHeight:Ld.Forms.Control.Lineheight,color:mh,backgroundColor:nh,backgroundRepeat:"no-repeat",borderRadius:4,border:`1px solid ${lh} !important`,transition:"background-color .1s ease-in-out, color .1s ease-in-out, border-right .15s ease-in-out",caretColor:fh.Background},placeholder:{color:ph},label:{fontFamily:Ld.Forms.Label.Face,fontSize:Ld.Forms.Label.Size,lineHeight:Ld.Forms.Label.Lineheight,color:hh,padding:"0 0 6px",a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},disabled:{opacity:.2},selection:{color:fh.Color,backgroundColor:fh.Background},required:{borderRight:`3px solid ${gh} !important`},locked:{backgroundImage:Fd.Lock,backgroundPosition:"right 7px top 8px",backgroundSize:"20px 20px",paddingRight:42},focus:{backgroundColor:ah,border:`1px solid ${ch} !important`},hover:{backgroundColor:rh,border:`1px solid ${uh} !important`},passed:{backgroundImage:Fd.Validation.Passed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",paddingRight:42},failed:{backgroundImage:Fd.Validation.Failed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",border:`1px solid ${bh} !important`,paddingRight:42},awaiting:{backgroundImage:Fd.Validation.Awaiting,backgroundPosition:"right 6px top 9px",backgroundSize:"19px 19px",paddingRight:42},fused:{appearance:{minHeight:38,border:"none !important",backgroundColor:"transparent !important",marginBottom:0},required:{borderRight:`3px solid ${gh} !important`},locked:{"> label > *":{backgroundImage:Fd.Lock,backgroundPosition:"right 7px top 8px",backgroundSize:"20px 20px",paddingRight:42}},focus:{backgroundColor:ah,border:`1px solid ${ch} !important`},hover:{backgroundColor:rh,border:`1px solid ${uh} !important`},passed:{"> label > *":{backgroundImage:Fd.Validation.Passed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",paddingRight:42}},failed:{"> label > *":{backgroundImage:Fd.Validation.Failed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",paddingRight:42},border:`1px solid ${bh} !important`},awaiting:{"> label > *":{backgroundImage:Fd.Validation.Awaiting,backgroundPosition:"right 6px top 9px",backgroundSize:"19px 19px",paddingRight:42}}}},Vd={appearance:{marginBottom:8},label:{fontFamily:Ld.Forms.Label.Face,fontSize:Ld.Forms.Label.Size,lineHeight:Ld.Forms.Label.Lineheight,color:hh,padding:"0 0 6px",a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},radiobutton:{label:{padding:"6px 0 4px 32px",backgroundPosition:"0 6px",backgroundSize:"20px 20px",fontFamily:Ld.Forms.Control.Face,fontSize:Ld.Forms.Control.Size,lineHeight:Ld.Forms.Control.Lineheight,color:mh,transition:"background .1s ease-in-out",a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},description:{padding:"0px 0 6px 32px",fontFamily:Ld.Forms.Label.Face,fontSize:Ld.Forms.Label.Size,lineHeight:Ld.Forms.Label.Lineheight,color:hh,a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},unchecked:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iOS41IiBmaWxsPSIjRkZGIiBzdHJva2U9IiNBOEM2REYiLz48L3N2Zz4=")'},checked:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iOS41IiBmaWxsPSIjRkZGIiBzdHJva2U9IiNBOEM2REYiLz48Y2lyY2xlIGN4PSIxMCIgY3k9IjEwIiByPSI0LjUiIGZpbGw9IiMwMDkzRUUiLz48L3N2Zz4=")'},hover:{unchecked:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iOS41IiBmaWxsPSIjRUNGNUZEIiBzdHJva2U9IiNBOEM2REYiLz48L3N2Zz4=")'},checked:{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iOS41IiBmaWxsPSIjRUNGNUZEIiBzdHJva2U9IiNBOEM2REYiLz48Y2lyY2xlIGN4PSIxMCIgY3k9IjEwIiByPSI0LjUiIGZpbGw9IiMwMDkzRUUiLz48L3N2Zz4=")'}},focus:{label:{textDecoration:"underline"}},disabled:{label:{opacity:.2}}},disabled:{opacity:.2},fused:{appearance:{marginBottom:0,padding:"10px 16px",borderRadius:4,backgroundColor:ih}}},Wd={appearance:{padding:"0 0 8px",fontFamily:Ld.Forms.Label.Face,fontSize:Ld.Forms.Label.Size,lineHeight:Ld.Forms.Label.Lineheight,color:hh,a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},fused:{minHeight:40,padding:"16px",borderRadius:4,backgroundColor:ih},disabled:{opacity:.2}},Gd={appearance:{minHeight:40,marginBottom:8,padding:"8px 16px",fontFamily:Ld.Forms.Control.Face,fontSize:Ld.Forms.Control.Size,lineHeight:Ld.Forms.Control.Lineheight,color:mh,backgroundColor:nh,backgroundRepeat:"no-repeat",borderRadius:4,border:`1px solid ${lh} !important`,transition:"background-color .1s ease-in-out, color .1s ease-in-out, border-right .15s ease-in-out",caretColor:fh.Background},placeholder:{color:ph},label:{fontFamily:Ld.Forms.Label.Face,fontSize:Ld.Forms.Label.Size,lineHeight:Ld.Forms.Label.Lineheight,color:hh,padding:"0 0 6px",a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},disabled:{opacity:.2},selection:{color:fh.Color,backgroundColor:fh.Background},required:{borderRight:`3px solid ${gh} !important`},locked:{backgroundImage:Fd.Lock,backgroundPosition:"right 7px top 8px",backgroundSize:"20px 20px",paddingRight:42},focus:{backgroundColor:ah,border:`1px solid ${ch} !important`},hover:{backgroundColor:rh,border:`1px solid ${uh} !important`},passed:{backgroundImage:Fd.Validation.Passed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",paddingRight:42},failed:{backgroundImage:Fd.Validation.Failed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",border:`1px solid ${bh} !important`,paddingRight:42},awaiting:{backgroundImage:Fd.Validation.Awaiting,backgroundPosition:"right 6px top 9px",backgroundSize:"19px 19px",paddingRight:42},fused:{appearance:{minHeight:38,border:"none !important",backgroundColor:"transparent !important",marginBottom:0},required:{borderRight:`3px solid ${gh} !important`},locked:{"> label > *":{backgroundImage:Fd.Lock,backgroundPosition:"right 7px top 8px",backgroundSize:"20px 20px",paddingRight:42}},focus:{backgroundColor:ah,border:`1px solid ${ch} !important`},hover:{backgroundColor:rh,border:`1px solid ${uh} !important`},passed:{"> label > *":{backgroundImage:Fd.Validation.Passed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",paddingRight:42}},failed:{"> label > *":{backgroundImage:Fd.Validation.Failed,backgroundPosition:"right 9px top 9px",backgroundSize:"19px 19px",paddingRight:42},border:`1px solid ${bh} !important`},awaiting:{"> label > *":{backgroundImage:Fd.Validation.Awaiting,backgroundPosition:"right 6px top 9px",backgroundSize:"19px 19px",paddingRight:42}}}},$d={background:Zu,border:Vu,header:Ad,cards:zd,form:{title:{fontFamily:Ld.Forms.Title.Face,fontSize:Ld.Forms.Title.Size,color:oh,fontWeight:"normal",paddingBottom:8,a:{cursor:"pointer",textDecoration:"none",color:dh,"&:hover":{textDecoration:"underline",color:dh}}},appearance:{backgroundColor:ih,border:`1px solid ${sh}`,borderRadius:4,padding:"16px 16px 8px"},disabled:{opacity:.25},fused:{title:{fontFamily:Ld.Forms.Title.Face,fontSize:Ld.Forms.Title.Size,color:oh,fontWeight:"normal",paddingBottom:8},appearance:{backgroundColor:nh,padding:0}},controls:{button:Ed,buttons:Od,checkbox:Hd,datetime:Ud,dropdown:Bd,notification:Yd,numeric:Zd,radiobutton:Vd,spacer:{large:32,small:8},static:Wd,text:Gd}},collection:{appearance:{border:`1px solid ${sh}`,borderRadius:4},header:{height:48,style:{orientation:"horizontal",scrollable:!1,appearance:{height:47,borderBottom:`1px solid ${Lh}`}},title:{width:"fill",appearance:{fontFamily:Ld.Collections.Title.Face,fontSize:Ld.Collections.Title.Size,color:Nh,fontWeight:"normal",textAlign:"left",padding:"14px 16px 0"}},menu:{width:56,height:47,appearance:Sl(59691,{fontSize:20,paddingTop:12,color:_h}),hover:Sl(59691,{fontSize:20,paddingTop:12,color:Nh}),menu:Cd},import:{width:56,height:47,appearance:Sl(59052,{fontSize:20,paddingTop:12,color:_h}),hover:Sl(59052,{fontSize:20,paddingTop:12,color:Nh})},splitter:{width:1,height:46,appearance:{backgroundColor:Lh}}},list:{appearance:{overflow:"hidden"},rows:{backgroundColor:Ch,backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MSIgaGVpZ2h0PSI0MSI+PHBhdGggZD0iTTAgNDAuNWg0MXoiIHN0cm9rZT0iI0U1RUVGNSIvPjwvc3ZnPg==")',backgroundRepeat:"repeat",borderBottom:`1px solid ${Lh}`},row:{height:40,spacing:1,spacingAfterLastRow:!0,hover:{backgroundColor:Dh},selected:{backgroundColor:Ah},glyph:{appearance:{backgroundColor:jh}}},cell:{appearance:{fontFamily:Ld.Collections.Rows.Face,fontSize:Ld.Collections.Rows.Size,color:Th,padding:"11px 16px 0",[So.selector("unnamed")]:{color:zh},[So.selector("variable","span")]:{backgroundColor:"rgb(216, 228, 238)",borderRadius:2,position:"relative",top:-1,padding:"3px 5px",fontSize:11,fontFamily:"monospace",fontWeight:"normal",fontStyle:"normal"},[So.selector("indicator","span")]:{backgroundColor:"rgb(255,255,255)",border:"1px solid rgb(216, 228, 238)",borderRadius:10,position:"relative",top:-1,padding:"2px 5px",marginLeft:8,fontSize:11,fontFamily:"monospace",fontWeight:"normal",fontStyle:"normal"},[So.selector("alias","span")]:{border:"1px solid rgb(216, 228, 238)",borderRadius:2,borderStyle:"dashed",position:"relative",top:-1,padding:"2px 5px",marginLeft:8,fontSize:11,fontFamily:"monospace",fontWeight:"normal",fontStyle:"normal","&:before":Object.assign(Object.assign({},vl),{fontSize:12,position:"relative",left:-2,top:2,content:'"\\e755"'})},[So.selector("score","span")]:{border:"1px solid rgb(216, 228, 238)",borderRadius:10,borderStyle:"dashed",position:"relative",top:-1,padding:"2px 5px",marginLeft:8,fontSize:11,fontFamily:"monospace",fontWeight:"normal",fontStyle:"normal","&:before":Object.assign(Object.assign({},vl),{fontSize:12,position:"relative",top:2,marginRight:3,content:'"\\e6e1"'})},code:{backgroundColor:"rgb(216, 228, 238)",borderRadius:2,position:"relative",top:-1,padding:"3px 5px",fontSize:11,fontFamily:"monospace",fontWeight:"normal",fontStyle:"normal"}},selected:{color:Eh,[So.selector("variable","span")]:{color:Ah,backgroundColor:Eh},[So.selector("indicator","span")]:{color:Eh,borderColor:Eh,backgroundColor:"transparent"},[So.selector("alias","span")]:{color:Eh,borderColor:Eh,backgroundColor:"transparent"},[So.selector("score","span")]:{color:Eh,borderColor:Eh,backgroundColor:"transparent"},code:{color:Ah,backgroundColor:Eh}},moving:{opacity:.1},glyph:{appearance:{color:Oh,cursor:"move !important",[So.selector("variable","span")]:{color:Ah,backgroundColor:Eh,opacity:.8},[So.selector("indicator","span")]:{color:Eh,borderColor:Eh,backgroundColor:"transparent",opacity:.8},[So.selector("alias","span")]:{color:Eh,borderColor:Eh,backgroundColor:"transparent",opacity:.8},[So.selector("score","span")]:{color:Eh,borderColor:Eh,backgroundColor:"transparent",opacity:.8},code:{color:Ah,backgroundColor:Eh,opacity:.8}}}},icon:{class:"tripetto",default:Ah,selected:Eh,glyph:Oh},button:{class:"tripetto",default:Ph,hover:Th,selected:Eh,glyph:Oh},editor:{appearance:{fontFamily:Ld.Collections.Rows.Face,fontSize:Ld.Collections.Rows.Size,color:Th,padding:"0 16px 0",height:39,caretColor:Ah},selection:{color:Eh,backgroundColor:Ah},selected:{appearance:{color:Eh},selection:{backgroundColor:Eh,color:Ah}}},emptyState:{height:41,appearance:{backgroundColor:Ch,borderBottom:`1px solid ${Lh}`,fontFamily:Ld.Collections.Rows.Face,fontSize:Ld.Collections.Rows.Size,color:Th,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center","> p":{margin:0,padding:0},"> p + p":{marginTop:"8px"}}},menu:Cd},footer:{height:39,style:{orientation:"horizontal",scrollable:!1,appearance:{height:38}},add:{width:"fill",height:39,appearance:Sl(59702,{fontSize:16,paddingTop:12,color:"rgb(0,147,238)"})}},assets:{menu:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTkuNSAyMGMtMi41MzggMC00LjkyMy0uOTg4LTYuNzE4LTIuNzgyUzAgMTMuMDM4IDAgMTAuNTAxYzAtMi41MzguOTg4LTQuOTIzIDIuNzgyLTYuNzE4UzYuOTYyIDEgOS41IDFjMi41MzggMCA0LjkyMy45ODggNi43MTggMi43ODNTMTkgNy45NjMgMTkgMTAuNTAxcy0uOTg4IDQuOTIzLTIuNzgyIDYuNzE3QTkuNDM4IDkuNDM4IDAgMCAxIDkuNSAyMHptMC0xOEM0LjgxMyAyIDEgNS44MTMgMSAxMC41UzQuODEzIDE5IDkuNSAxOXM4LjUtMy44MTMgOC41LTguNVMxNC4xODcgMiA5LjUgMnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE0LjUgOGgtMTBhLjUuNSAwIDAgMSAwLTFoMTBhLjUuNSAwIDAgMSAwIDF6bTAgM2gtMTBhLjUuNSAwIDAgMSAwLTFoMTBhLjUuNSAwIDAgMSAwIDF6bTAgM2gtMTBhLjUuNSAwIDAgMSAwLTFoMTBhLjUuNSAwIDAgMSAwIDF6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg=="},unnamedIcon:zh},width:{normal:Td.width+520,small:520,compact:240}},Qd={height:56,spacing:32,style:{orientation:"horizontal",appearance:{backgroundColor:"rgba(44,64,90,0.8)",boxShadow:"0 0 20px 0px rgba(0,0,0,.25)",borderRadius:8,transition:"background-color .2s ease-out"},hover:{backgroundColor:"rgba(44,64,90,0.9)"},scrollable:!0},button:{width:56,height:56,appearance:{color:Vc,backgroundPosition:"17px 17px",backgroundRepeat:"no-repeat",backgroundSize:"24px 24px",transition:"color .1s ease-in-out","> i":{float:"left",fontSize:20,margin:"18px 18px"}},disabled:{color:Wc,opacity:1},hover:{color:Gc},tap:{color:$c},animations:{enable:ha()}},separator:{width:1,height:40,appearance:{backgroundColor:"rgba(255,255,255,0.2)",margin:"8px 0"}}},qd="cubic-bezier(0.0, 0.0, 0.2, 1)",Xd={width:398,height:96,appearance:{backgroundColor:Iu},disabled:{"> div":{opacity:.2}},moving:{backgroundColor:ku,boxShadow:`0 0 10px 3px ${Nu}`},following:{backgroundColor:_u},ensuing:{transition:`transform .2s ${qd}`},label:{appearance:{position:"absolute",left:116,right:70,top:37,height:39,overflow:"hidden",fontFamily:Ld.Map.Node.Label.Face,fontSize:Ld.Map.Node.Label.Size,color:Lu,transition:"color 0.2s ease"},variable:{backgroundColor:"rgb(216, 228, 238)",borderRadius:5,position:"relative",top:-2,padding:"2px 5px",fontSize:10,fontWeight:"normal"},named:{color:Cu}},type:{position:"absolute",left:116,right:70,top:18,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontFamily:Ld.Map.Node.Type.Face,fontSize:Ld.Map.Node.Type.Size,color:Du},icon:{color:Au,appearance:{position:"absolute",left:8,top:8,width:88,height:79,borderRight:`2px solid ${ju}`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"36px 36px"},required:{borderRight:`2px solid ${Tu}`}},button:{appearance:{position:"absolute",right:11,top:24,width:48,height:48,borderRadius:24,padding:16,fontSize:16,backgroundColor:Ou.Background,color:Ou.Color,transition:"background-color .2s, color .2s"},hover:{backgroundColor:Ou.BackgroundHover,color:Ou.ColorHover},tap:{backgroundColor:Ou.BackgroundTap,color:Ou.ColorTap},selected:{backgroundColor:Ou.BackgroundSelected,color:Ou.ColorSelected}},separator:{between:zu,last:Eu},guides:{appearance:{left:2,right:2,top:2,bottom:2,border:`2px dotted ${Pu.Border}`,backgroundColor:Pu.Background},visible:{opacity:1,transition:`transform .2s ${qd}`},invisible:{"> div":{"@keyframes":{"0%":{transform:"scale(1,1)"},"100%":{transform:"scale(1,0)"}},animationDuration:".2s",animationTimingFunction:qd,transformOrigin:"0 0 0"},opacity:0,transition:`opacity .2s ${qd}`}}},Jd=Xd.width+4,Kd={width:Jd,borderSize:1,junction:{width:64,height:64,size:32,left:(Jd-64)/2-1,top:-65,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9IjE3IiB5PSIxNyIgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiByeD0iNCIgcnk9IjQiIGZpbGw9IiNGRkYiIHN0cm9rZT0iIzgxQzkyNiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtZGFzaGFycmF5PSIyLDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuOCIvPjxwYXRoIGQ9Ik00MC41MjYgMzEuNTI2aC04LjA1MnYtOC4wNTJhLjQ3NC40NzQgMCAwIDAtLjk0OCAwdjguMDUyaC04LjA1MmEuNDc0LjQ3NCAwIDAgMCAwIC45NDhoOC4wNTJ2OC4wNTJhLjQ3NC40NzQgMCAwIDAgLjk0OCAwdi04LjA1Mmg4LjA1MmEuNDc0LjQ3NCAwIDAgMCAwLS45NDhaIiBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDouOTk5OTk5ODIiLz48L3N2Zz4=",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9IjE3IiB5PSIxNyIgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiByeD0iNCIgcnk9IjQiIGZpbGw9IiNGRkYiIHN0cm9rZT0iIzgxQzkyNiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtZGFzaGFycmF5PSIyLDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuOCIvPjxyZWN0IHg9IjIwIiB5PSIyMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMiIgcnk9IjIiIGZpbGw9IiM4MUM5MjYiLz48cGF0aCBkPSJNNDAuNTI2IDMxLjUyNmgtOC4wNTJ2LTguMDUyYS40NzQuNDc0IDAgMCAwLS45NDggMHY4LjA1MmgtOC4wNTJhLjQ3NC40NzQgMCAwIDAgMCAuOTQ4aDguMDUydjguMDUyYS40NzQuNDc0IDAgMCAwIC45NDggMHYtOC4wNTJoOC4wNTJhLjQ3NC40NzQgMCAwIDAgMC0uOTQ4WiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ljk5OTk5OTgyIi8+PC9zdmc+",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9IjE3IiB5PSIxNyIgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiByeD0iNCIgcnk9IjQiIGZpbGw9IiNGRkYiIHN0cm9rZT0iIzgxQzkyNiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtZGFzaGFycmF5PSIyLDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuOCIvPjxyZWN0IHg9IjIwIiB5PSIyMCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMiIgcnk9IjIiIGZpbGw9IiM4MUM5MjYiLz48cGF0aCBkPSJNNDAuNTI2IDMxLjUyNmgtOC4wNTJ2LTguMDUyYS40NzQuNDc0IDAgMCAwLS45NDggMHY4LjA1MmgtOC4wNTJhLjQ3NC40NzQgMCAwIDAgMCAuOTQ4aDguMDUydjguMDUyYS40NzQuNDc0IDAgMCAwIC45NDggMHYtOC4wNTJoOC4wNTJhLjQ3NC40NzQgMCAwIDAgMC0uOTQ4WiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ljk5OTk5OTgyIi8+PC9zdmc+",guide:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9IjE3IiB5PSIxNyIgd2lkdGg9IjMwIiBoZWlnaHQ9IjMwIiByeD0iNCIgcnk9IjQiIGZpbGw9IiNGRkYiIHN0cm9rZT0iIzgxQzkyNiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtZGFzaGFycmF5PSIyLDIiIHN0eWxlPSJzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuODtzdHJva2U6I2I3ZDJlNTtzdHJva2Utb3BhY2l0eToxO2ZpbGw6bm9uZSIvPjwvc3ZnPg=="},appearance:{backgroundColor:nu,border:`1px solid ${ru}`,borderRadius:4},header:{height:72,appearance:{position:"absolute",left:0,right:0,top:0,height:71,borderBottom:`1px solid ${uu.Splitter}`},label:{appearance:{position:"absolute",left:24,top:25,right:72,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontFamily:Ld.Map.Cluster.Face,fontSize:Ld.Map.Cluster.Size,color:uu.Label,transition:"color 0.2s ease"},named:{color:uu.LabelNamed}},button:{appearance:{position:"absolute",right:11,top:11,width:48,height:48,borderRadius:24,padding:16,fontSize:16,backgroundColor:uu.Button.Background,color:uu.Button.Color,transition:"background-color .2s, color .2s"},hover:{backgroundColor:uu.Button.BackgroundHover,color:uu.Button.ColorHover},tap:{backgroundColor:uu.Button.BackgroundTap,color:uu.Button.ColorTap},selected:{backgroundColor:uu.Button.BackgroundSelected,color:uu.Button.ColorSelected}}},footer:{height:48,appearance:{position:"absolute",left:0,right:0,bottom:0,height:48,borderTop:`1px solid ${hu.Splitter}`,color:hu.Color,fontSize:20,textAlign:"center",padding:13},hover:{},tap:{}},moving:{backgroundColor:au,boxShadow:`0 0 10px 3px ${lu}`,"> div:first-child":{opacity:0},"> div:last-child":{opacity:0}},following:{backgroundColor:cu,"> div:first-child":{opacity:.8},"> div:last-child":{opacity:.8}},ensuing:{transition:`transform .2s ${qd}, height .2s ${qd}`,"> div:first-child":{transition:"height .2s"}},branch:{enabled:!0,width:64,height:64,size:42,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9Ii0xNSIgeT0iMzAuMjU1IiB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHJ4PSI0IiByeT0iNCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6I2I3ZDJlNTtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuNzk5OTk5OTUiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBkPSJNNDAuNTI2IDMxLjUyNmgtOC4wNTJ2LTguMDUyYS40NzQuNDc0IDAgMCAwLS45NDggMHY4LjA1MmgtOC4wNTJhLjQ3NC40NzQgMCAwIDAgMCAuOTQ4aDguMDUydjguMDUyYS40NzQuNDc0IDAgMCAwIC45NDggMHYtOC4wNTJoOC4wNTJhLjQ3NC40NzQgMCAwIDAgMC0uOTQ4WiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ljk5OTk5OTgyIi8+PHBhdGggc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2I3ZDJlNTtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5OjIsMjtzdHJva2UtZGFzaG9mZnNldDowO3N0cm9rZS1vcGFjaXR5OjEiIGQ9Ik0xMiAzMkgyIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiLz48cGF0aCBkPSJNNDAuNTI2IDMxLjUyNmgtOC4wNTJ2LTguMDUyYS40NzQuNDc0IDAgMCAwLS45NDggMHY4LjA1MmgtOC4wNTJhLjQ3NC40NzQgMCAwIDAgMCAuOTQ4aDguMDUydjguMDUyYS40NzQuNDc0IDAgMCAwIC45NDggMHYtOC4wNTJoOC4wNTJhLjQ3NC40NzQgMCAwIDAgMC0uOTQ4WiIgc3R5bGU9ImZpbGw6I2I3ZDJlNTtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ljk5OTk5OTgyIi8+PC9zdmc+",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9Ii0xNSIgeT0iMzAuMjU1IiB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHJ4PSI0IiByeT0iNCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzgxYzkyNjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuNzk5OTk5OTUiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cmVjdCB4PSItMTIiIHk9IjMzLjI1NSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMiIgcnk9IjIiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiIHN0eWxlPSJmaWxsOiM4MWM5MjYiLz48cGF0aCBkPSJNNDAuNTI2IDMxLjUyNmgtOC4wNTJ2LTguMDUyYS40NzQuNDc0IDAgMCAwLS45NDggMHY4LjA1MmgtOC4wNTJhLjQ3NC40NzQgMCAwIDAgMCAuOTQ4aDguMDUydjguMDUyYS40NzQuNDc0IDAgMCAwIC45NDggMHYtOC4wNTJoOC4wNTJhLjQ3NC40NzQgMCAwIDAgMC0uOTQ4WiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ljk5OTk5OTgyIi8+PHBhdGggc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzgxYzkyNjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5OjIsMjtzdHJva2UtZGFzaG9mZnNldDowIiBkPSJNMTIgMzJIMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PC9zdmc+",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9Ii0xNSIgeT0iMzAuMjU1IiB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHJ4PSI0IiByeT0iNCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzgxYzkyNjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuNzk5OTk5OTUiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cmVjdCB4PSItMTIiIHk9IjMzLjI1NSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMiIgcnk9IjIiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiIHN0eWxlPSJmaWxsOiM4MWM5MjYiLz48cGF0aCBkPSJNNDAuNTI2IDMxLjUyNmgtOC4wNTJ2LTguMDUyYS40NzQuNDc0IDAgMCAwLS45NDggMHY4LjA1MmgtOC4wNTJhLjQ3NC40NzQgMCAwIDAgMCAuOTQ4aDguMDUydjguMDUyYS40NzQuNDc0IDAgMCAwIC45NDggMHYtOC4wNTJoOC4wNTJhLjQ3NC40NzQgMCAwIDAgMC0uOTQ4WiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ljk5OTk5OTgyIi8+PHBhdGggc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzgxYzkyNjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDoxMDtzdHJva2UtZGFzaGFycmF5OjIsMjtzdHJva2UtZGFzaG9mZnNldDowIiBkPSJNMTIgMzJIMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PC9zdmc+"},guides:{appearance:{backgroundColor:du.Background,border:`2px dotted ${du.Border}`,borderRadius:4},visible:{opacity:1,transition:`transform .2s ${qd}`},invisible:{"> div":{"@keyframes":{"0%":{transform:"scale(1,1)"},"100%":{transform:"scale(1,0)"}},animationDuration:".2s",animationTimingFunction:qd,transformOrigin:"0 0 0"},opacity:0,transition:`opacity .2s ${qd}`}}},ep={width:318,height:48,appearance:{backgroundColor:pu},moving:{backgroundColor:mu,boxShadow:`0 0 10px 3px ${gu}`},following:{backgroundColor:bu},ensuing:{transition:`transform .2s ${qd}`},disabled:{"> div":{opacity:.2}},icon:{color:vu,appearance:{position:"absolute",left:0,top:8,bottom:8,width:48,borderRight:`1px solid ${Mu}`,backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"24px 24px"}},text:{appearance:{position:"absolute",left:60,right:72,top:15,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontFamily:Ld.Map.Condition.Face,fontSize:Ld.Map.Condition.Size,color:yu,transition:"color 0.2s ease"},named:{color:fu},label:{color:"rgb(255,255,255)",marginLeft:10,backgroundColor:fu,borderRadius:5,position:"relative",top:-2,padding:"2px 5px",fontSize:10},variable:{backgroundColor:"rgb(216, 228, 238)",borderRadius:5,position:"relative",top:-2,padding:"2px 5px",fontSize:10,fontWeight:"normal",[So.selector("variable","span")]:{backgroundColor:"rgba(255,255,255,.4)",top:0,padding:"0 2px"}}},button:{appearance:{position:"absolute",right:14,top:3,width:42,height:42,borderRadius:21,padding:13,fontSize:16,backgroundColor:Ou.Background,color:Ou.Color,transition:"background-color .2s, color .2s"},hover:{backgroundColor:Ou.BackgroundHover,color:Ou.ColorHover},tap:{backgroundColor:Ou.BackgroundTap,color:Ou.ColorTap},selected:{backgroundColor:Ou.BackgroundSelected,color:Ou.ColorSelected}},separator:{between:wu,last:xu},guides:{appearance:{left:2,right:2,top:2,bottom:2,border:`2px dotted ${Su.Border}`,backgroundColor:Su.Background},visible:{opacity:1,transition:`transform .2s ${qd}`},invisible:{"> div":{"@keyframes":{"0%":{transform:"scale(1,1)"},"100%":{transform:"scale(1,0)"}},animationDuration:".2s",animationTimingFunction:qd,transformOrigin:"0 0 0"},opacity:0,transition:`opacity .2s ${qd}`}}},tp=ep.width+4,ip={width:tp,left:(Kd.width-tp)/2+11,top:116,culling:{width:64,height:64,first:{image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiM4MWM5MjY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDouMDA2NjY2Njc7c2hhcGUtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbiIgZD0iTTI2LjY2NyAyMGMxLjkxMyAwIDMuNzI2LjQ0NyA1LjMzMyAxLjI0NyAxLjYwNy0uOCAzLjQyLTEuMjQ3IDUuMzMzLTEuMjQ3IDYuNjI3IDAgMTIgNS4zNzMgMTIgMTJzLTUuMzczIDEyLTEyIDEyYy0xLjkxMyAwLTMuNzI2LS40NDctNS4zMzMtMS4yNDctMS42MDcuOC0zLjQyIDEuMjQ3LTUuMzMzIDEuMjQ3LTYuNjI3IDAtMTItNS4zNzMtMTItMTJzNS4zNzMtMTIgMTItMTJ6bS0zLjc0IDMuNDQ3YTkuNDkyIDkuNDkyIDAgMCAxIDMuMzgtLjc3NGwxLjQ0LS4wNTMtLjg5NCAxLjEzM0ExMy4yNiAxMy4yNiAwIDAgMCAyNCAzMmMwIDMuMDEzLjk5MyA1Ljg4IDIuODUzIDguMjQ3bC44OTQgMS4xMzMtMS40NC0uMDUzYy00Ljk4LS4xOTQtOC45NzQtNC4yODctOC45NzQtOS4zMjdhOS4zMzIgOS4zMzIgMCAwIDEgNS41OTQtOC41NTN6bTEwLjQ4Ni0xLjM3NEExMS45ODYgMTEuOTg2IDAgMCAxIDM4LjY2NyAzMmMwIDMuOTkzLTEuOTY3IDcuNjg3LTUuMjU0IDkuOTI3YTEwLjc3IDEwLjc3IDAgMCAwIDMuOTIuNzRDNDMuMjI3IDQyLjY2NyA0OCAzNy44OTMgNDggMzJzLTQuNzczLTEwLjY2Ny0xMC42NjctMTAuNjY3YTEwLjc3IDEwLjc3IDAgMCAwLTMuOTIuNzR6bS0yLjgyNiAxOS44NTRBMTEuOTg2IDExLjk4NiAwIDAgMSAyNS4zMzMgMzJjMC0zLjk5MyAxLjk2Ny03LjY4NyA1LjI1NC05LjkyN2ExMC42MiAxMC42MiAwIDAgMC0zLjkyLS43NEMyMC43NzMgMjEuMzMzIDE2IDI2LjEwNyAxNiAzMnM0Ljc3MyAxMC42NjcgMTAuNjY3IDEwLjY2N2ExMC43NyAxMC43NyAwIDAgMCAzLjkyLS43NHpNMzIgMjIuNzZBMTAuNjY3IDEwLjY2NyAwIDAgMCAyNi42NjcgMzJjMCAzLjgyNyAyLjA0IDcuMzMzIDUuMzMzIDkuMjRBMTAuNjY3IDEwLjY2NyAwIDAgMCAzNy4zMzMgMzJjMC0zLjgyNy0yLjA0LTcuMzMzLTUuMzMzLTkuMjR6Ii8+PC9zdmc+",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MjAiIGhlaWdodD0iNTIwIiB2aWV3Qm94PSIwIDAgNTIwMCA1MjAwIiBzdHlsZT0iY2xpcC1ydWxlOm5vbnplcm87ZmlsbC1ydWxlOm5vbnplcm87aW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTtzaGFwZS1yZW5kZXJpbmc6Z2VvbWV0cmljUHJlY2lzaW9uO3RleHQtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbiI+PHBhdGggZD0iTTE4MDAgODAwYzI4NyAwIDU1OSA2NyA4MDAgMTg3IDI0MS0xMjAgNTEzLTE4NyA4MDAtMTg3IDk5NCAwIDE4MDAgODA2IDE4MDAgMTgwMHMtODA2IDE4MDAtMTgwMCAxODAwYy0yODcgMC01NTktNjctODAwLTE4Ny0yNDEgMTIwLTUxMyAxODctODAwIDE4N0M4MDYgNDQwMCAwIDM1OTQgMCAyNjAwUzgwNiA4MDAgMTgwMCA4MDBabS01NjEgNTE3YzE2Mi03MCAzMzQtMTA5IDUwNy0xMTZsMjE2LTgtMTM0IDE3MGMtMjc5IDM1NS00MjggNzg1LTQyOCAxMjM3czE0OSA4ODIgNDI4IDEyMzdsMTM0IDE3MC0yMTYtOGMtNzQ3LTI5LTEzNDYtNjQzLTEzNDYtMTM5OSAwLTU2MCAzMzItMTA2MSA4MzktMTI4M1ptMTU3My0yMDZjNDkzIDMzNiA3ODggODkwIDc4OCAxNDg5cy0yOTUgMTE1My03ODggMTQ4OWMxODIgNzEgMzgwIDExMSA1ODggMTExIDg4NCAwIDE2MDAtNzE2IDE2MDAtMTYwMHMtNzE2LTE2MDAtMTYwMC0xNjAwYy0yMDggMC00MDYgNDAtNTg4IDExMXptLTQyNCAyOTc4Yy00OTMtMzM2LTc4OC04OTAtNzg4LTE0ODlzMjk1LTExNTMgNzg4LTE0ODljLTE4Mi03Mi0zODAtMTExLTU4OC0xMTEtODg0IDAtMTYwMCA3MTYtMTYwMCAxNjAwczcxNiAxNjAwIDE2MDAgMTYwMGMyMDggMCA0MDYtNDAgNTg4LTExMXptMjEyLTI4NzVjLTQ5NCAyODYtODAwIDgxMi04MDAgMTM4NnMzMDYgMTEwMCA4MDAgMTM4NmM0OTQtMjg2IDgwMC04MTIgODAwLTEzODZzLTMwNi0xMTAwLTgwMC0xMzg2eiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MSIvPjwvc3ZnPg==",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",selected:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",guide:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNiN2QyZTU7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5OjIsMjtzdHJva2Utb3BhY2l0eToxO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1kYXNob2Zmc2V0OjAiIHJ5PSIzLjk5NiIgcng9IjMuOTk2IiBoZWlnaHQ9IjQ2LjE4OCIgd2lkdGg9IjQ2LjE4OCIgeT0iMjIuMTYxIiB4PSItMjMuMDk0IiB0cmFuc2Zvcm09InJvdGF0ZSgtNDUpIi8+PHBhdGggc3R5bGU9ImZpbGw6I2I3ZDJlNTtzdHJva2Utd2lkdGg6LjAwNjY2NjY3O2ZpbGwtb3BhY2l0eToxIiBkPSJNMjYuNjY3IDIwYzEuOTEzIDAgMy43MjYuNDQ3IDUuMzMzIDEuMjQ3IDEuNjA3LS44IDMuNDItMS4yNDcgNS4zMzMtMS4yNDcgNi42MjcgMCAxMiA1LjM3MyAxMiAxMnMtNS4zNzMgMTItMTIgMTJjLTEuOTEzIDAtMy43MjYtLjQ0Ny01LjMzMy0xLjI0Ny0xLjYwNy44LTMuNDIgMS4yNDctNS4zMzMgMS4yNDctNi42MjcgMC0xMi01LjM3My0xMi0xMnM1LjM3My0xMiAxMi0xMnptLTMuNzQgMy40NDdhOS40OTIgOS40OTIgMCAwIDEgMy4zOC0uNzc0bDEuNDQtLjA1My0uODk0IDEuMTMzQTEzLjI2IDEzLjI2IDAgMCAwIDI0IDMyYzAgMy4wMTMuOTkzIDUuODggMi44NTMgOC4yNDdsLjg5NCAxLjEzMy0xLjQ0LS4wNTNjLTQuOTgtLjE5NC04Ljk3NC00LjI4Ny04Ljk3NC05LjMyN2E5LjMzMiA5LjMzMiAwIDAgMSA1LjU5NC04LjU1M3ptMTAuNDg2LTEuMzc0QTExLjk4NiAxMS45ODYgMCAwIDEgMzguNjY3IDMyYzAgMy45OTMtMS45NjcgNy42ODctNS4yNTQgOS45MjdhMTAuNzcgMTAuNzcgMCAwIDAgMy45Mi43NEM0My4yMjcgNDIuNjY3IDQ4IDM3Ljg5MyA0OCAzMnMtNC43NzMtMTAuNjY3LTEwLjY2Ny0xMC42NjdhMTAuNzcgMTAuNzcgMCAwIDAtMy45Mi43NHptLTIuODI2IDE5Ljg1NEExMS45ODYgMTEuOTg2IDAgMCAxIDI1LjMzMyAzMmMwLTMuOTkzIDEuOTY3LTcuNjg3IDUuMjU0LTkuOTI3YTEwLjYyIDEwLjYyIDAgMCAwLTMuOTItLjc0QzIwLjc3MyAyMS4zMzMgMTYgMjYuMTA3IDE2IDMyczQuNzczIDEwLjY2NyAxMC42NjcgMTAuNjY3YTEwLjc3IDEwLjc3IDAgMCAwIDMuOTItLjc0ek0zMiAyMi43NkExMC42NjcgMTAuNjY3IDAgMCAwIDI2LjY2NyAzMmMwIDMuODI3IDIuMDQgNy4zMzMgNS4zMzMgOS4yNEExMC42NjcgMTAuNjY3IDAgMCAwIDM3LjMzMyAzMmMwLTMuODI3LTIuMDQtNy4zMzMtNS4zMzMtOS4yNHoiLz48L3N2Zz4="},each:{image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiM4MWM5MjY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmO3N0cm9rZS13aWR0aDouMDA2NjY2Njc7ZmlsbC1vcGFjaXR5OjEiIGQ9Ik0yNi42NjcgMjBjMS45MTMgMCAzLjcyNi40NDcgNS4zMzMgMS4yNDcgMS42MDctLjggMy40Mi0xLjI0NyA1LjMzMy0xLjI0NyA2LjYyNyAwIDEyIDUuMzczIDEyIDEycy01LjM3MyAxMi0xMiAxMmMtMS45MTMgMC0zLjcyNi0uNDQ3LTUuMzMzLTEuMjQ3LTEuNjA3LjgtMy40MiAxLjI0Ny01LjMzMyAxLjI0Ny02LjYyNyAwLTEyLTUuMzczLTEyLTEyczUuMzczLTEyIDEyLTEyem0yLjI3MyAxNi4wODdBOS4zMTggOS4zMTggMCAwIDEgMjggMzJjMC0xLjQ2Ny4zNC0yLjg1My45NC00LjA4Ny43NjctMS41NjYgMS43MTMtMi41MzMgMy4wNi0zLjU4Ni40NC4zNC44NzMuNjggMS4yNjcgMS4wNzNBOS4zMTQgOS4zMTQgMCAwIDEgMzYgMzJjMCAyLjM4Ny0uOTEzIDQuNzgtMi43MzMgNi42LS4zOTQuMzkzLS44MjcuNzMzLTEuMjY3IDEuMDczLTEuMzQ3LTEuMDUzLTIuMjkzLTIuMDItMy4wNi0zLjU4NnptOC43NTMtMTMuNDE0QTkuMzM3IDkuMzM3IDAgMCAxIDQ2LjY2NyAzMmE5LjMzNyA5LjMzNyAwIDAgMS04Ljk3NCA5LjMyN2wtMS40NC4wNTMuODk0LTEuMTMzQTEzLjI2IDEzLjI2IDAgMCAwIDQwIDMyYzAtMy4wMTMtLjk5My01Ljg4LTIuODUzLTguMjQ3bC0uODk0LTEuMTMzem0tMTEuMzg2IDAgMS40NC0uMDUzLS44OTQgMS4xMzNBMTMuMjYgMTMuMjYgMCAwIDAgMjQgMzJjMCAzLjAxMy45OTMgNS44OCAyLjg1MyA4LjI0N2wuODk0IDEuMTMzLTEuNDQtLjA1M2MtNC45OC0uMTk0LTguOTc0LTQuMjg3LTguOTc0LTkuMzI3czMuOTk0LTkuMTMzIDguOTc0LTkuMzI3em03LjEwNi0uNkExMS45ODYgMTEuOTg2IDAgMCAxIDM4LjY2NyAzMmMwIDMuOTkzLTEuOTY3IDcuNjg3LTUuMjU0IDkuOTI3YTEwLjc3IDEwLjc3IDAgMCAwIDMuOTIuNzRDNDMuMjI3IDQyLjY2NyA0OCAzNy44OTMgNDggMzJzLTQuNzczLTEwLjY2Ny0xMC42NjctMTAuNjY3YTEwLjc3IDEwLjc3IDAgMCAwLTMuOTIuNzR6bS0yLjgyNiAxOS44NTRhMTIuMDI4IDEyLjAyOCAwIDAgMS0xLjc0LTEuNDRBMTEuOTYxIDExLjk2MSAwIDAgMSAyNS4zMzMgMzJjMC0zLjMxMyAxLjM0LTYuMzEzIDMuNTE0LTguNDg3YTEyLjAyOCAxMi4wMjggMCAwIDEgMS43NC0xLjQ0IDEwLjYyIDEwLjYyIDAgMCAwLTMuOTItLjc0QzIwLjc3MyAyMS4zMzMgMTYgMjYuMTA3IDE2IDMyczQuNzczIDEwLjY2NyAxMC42NjcgMTAuNjY3YTEwLjc3IDEwLjc3IDAgMCAwIDMuOTItLjc0ek0zMiAyMi43NmExMC41MyAxMC41MyAwIDAgMC0yLjIwNyAxLjdBMTAuNjA5IDEwLjYwOSAwIDAgMCAyNi42NjcgMzJhMTAuNjEgMTAuNjEgMCAwIDAgMy4xMjYgNy41NGMuNjU0LjY2IDEuNCAxLjIzMyAyLjIwNyAxLjdBMTAuNjY3IDEwLjY2NyAwIDAgMCAzNy4zMzMgMzJjMC0zLjgyNy0yLjA0LTcuMzMzLTUuMzMzLTkuMjR6Ii8+PC9zdmc+",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MjAiIGhlaWdodD0iNTIwIiB2aWV3Qm94PSIwIDAgNTIwMCA1MjAwIiBzdHlsZT0iY2xpcC1ydWxlOm5vbnplcm87ZmlsbC1ydWxlOm5vbnplcm87aW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTtzaGFwZS1yZW5kZXJpbmc6Z2VvbWV0cmljUHJlY2lzaW9uO3RleHQtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbiI+PHBhdGggZD0iTTE4MDAgODAwYzI4NyAwIDU1OSA2NyA4MDAgMTg3IDI0MS0xMjAgNTEzLTE4NyA4MDAtMTg3IDk5NCAwIDE4MDAgODA2IDE4MDAgMTgwMHMtODA2IDE4MDAtMTgwMCAxODAwYy0yODcgMC01NTktNjctODAwLTE4Ny0yNDEgMTIwLTUxMyAxODctODAwIDE4N0M4MDYgNDQwMCAwIDM1OTQgMCAyNjAwUzgwNiA4MDAgMTgwMCA4MDBabTM0MSAyNDEzYy05MC0xODUtMTQxLTM5My0xNDEtNjEzczUxLTQyOCAxNDEtNjEzYzExNS0yMzUgMjU3LTM4MCA0NTktNTM4IDY2IDUxIDEzMSAxMDIgMTkwIDE2MSAyNzMgMjczIDQxMCA2MzIgNDEwIDk5MHMtMTM3IDcxNy00MTAgOTkwYy01OSA1OS0xMjQgMTEwLTE5MCAxNjEtMjAyLTE1OC0zNDQtMzAzLTQ1OS01Mzh6bTEzMTMtMjAxMmM3NTEgMjkgMTM0NiA2NDcgMTM0NiAxMzk5cy01OTUgMTM3MC0xMzQ2IDEzOTlsLTIxNiA4IDEzNC0xNzBjMjc5LTM1NSA0MjgtNzg1IDQyOC0xMjM3cy0xNDktODgyLTQyOC0xMjM3bC0xMzQtMTcwem0tMTcwOCAwIDIxNi04LTEzNCAxNzBjLTI3OSAzNTUtNDI4IDc4NS00MjggMTIzN3MxNDkgODgyIDQyOCAxMjM3bDEzNCAxNzAtMjE2LThjLTc0Ny0yOS0xMzQ2LTY0My0xMzQ2LTEzOTlzNTk5LTEzNzAgMTM0Ni0xMzk5Wm0xMDY2LTkwYzQ5MyAzMzYgNzg4IDg5MCA3ODggMTQ4OXMtMjk1IDExNTMtNzg4IDE0ODljMTgyIDcxIDM4MCAxMTEgNTg4IDExMSA4ODQgMCAxNjAwLTcxNiAxNjAwLTE2MDBzLTcxNi0xNjAwLTE2MDAtMTYwMGMtMjA4IDAtNDA2IDQwLTU4OCAxMTF6bS00MjQgMjk3OGMtOTQtNjQtMTgxLTEzNi0yNjEtMjE2LTMyNi0zMjYtNTI3LTc3Ni01MjctMTI3M3MyMDEtOTQ3IDUyNy0xMjczYzgwLTgwIDE2Ny0xNTIgMjYxLTIxNi0xODItNzItMzgwLTExMS01ODgtMTExLTg4NCAwLTE2MDAgNzE2LTE2MDAgMTYwMHM3MTYgMTYwMCAxNjAwIDE2MDBjMjA4IDAgNDA2LTQwIDU4OC0xMTF6bTIxMi0yODc1Yy0xMjEgNzAtMjMzIDE1Ni0zMzEgMjU1LTI5MCAyODktNDY5IDY4OS00NjkgMTEzMXMxNzkgODQyIDQ2OSAxMTMxYzk4IDk5IDIxMCAxODUgMzMxIDI1NSA0OTQtMjg2IDgwMC04MTIgODAwLTEzODZzLTMwNi0xMTAwLTgwMC0xMzg2eiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MSIvPjwvc3ZnPg==",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",selected:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",guide:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNiN2QyZTU7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5OjIsMjtzdHJva2Utb3BhY2l0eToxO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1kYXNob2Zmc2V0OjAiIHJ5PSIzLjk5NiIgcng9IjMuOTk2IiBoZWlnaHQ9IjQ2LjE4OCIgd2lkdGg9IjQ2LjE4OCIgeT0iMjIuMTYxIiB4PSItMjMuMDk0IiB0cmFuc2Zvcm09InJvdGF0ZSgtNDUpIi8+PHBhdGggc3R5bGU9ImZpbGw6I2I3ZDJlNTtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6LjAwNjY2NjY3O3NoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iIGQ9Ik0yNi42NjcgMjBjMS45MTMgMCAzLjcyNi40NDcgNS4zMzMgMS4yNDcgMS42MDctLjggMy40Mi0xLjI0NyA1LjMzMy0xLjI0NyA2LjYyNyAwIDEyIDUuMzczIDEyIDEycy01LjM3MyAxMi0xMiAxMmMtMS45MTMgMC0zLjcyNi0uNDQ3LTUuMzMzLTEuMjQ3LTEuNjA3LjgtMy40MiAxLjI0Ny01LjMzMyAxLjI0Ny02LjYyNyAwLTEyLTUuMzczLTEyLTEyczUuMzczLTEyIDEyLTEyem0yLjI3MyAxNi4wODdBOS4zMTggOS4zMTggMCAwIDEgMjggMzJjMC0xLjQ2Ny4zNC0yLjg1My45NC00LjA4Ny43NjctMS41NjYgMS43MTMtMi41MzMgMy4wNi0zLjU4Ni40NC4zNC44NzMuNjggMS4yNjcgMS4wNzNBOS4zMTQgOS4zMTQgMCAwIDEgMzYgMzJjMCAyLjM4Ny0uOTEzIDQuNzgtMi43MzMgNi42LS4zOTQuMzkzLS44MjcuNzMzLTEuMjY3IDEuMDczLTEuMzQ3LTEuMDUzLTIuMjkzLTIuMDItMy4wNi0zLjU4NnptOC43NTMtMTMuNDE0QTkuMzM3IDkuMzM3IDAgMCAxIDQ2LjY2NyAzMmE5LjMzNyA5LjMzNyAwIDAgMS04Ljk3NCA5LjMyN2wtMS40NC4wNTMuODk0LTEuMTMzQTEzLjI2IDEzLjI2IDAgMCAwIDQwIDMyYzAtMy4wMTMtLjk5My01Ljg4LTIuODUzLTguMjQ3bC0uODk0LTEuMTMzem0tMTEuMzg2IDAgMS40NC0uMDUzLS44OTQgMS4xMzNBMTMuMjYgMTMuMjYgMCAwIDAgMjQgMzJjMCAzLjAxMy45OTMgNS44OCAyLjg1MyA4LjI0N2wuODk0IDEuMTMzLTEuNDQtLjA1M2MtNC45OC0uMTk0LTguOTc0LTQuMjg3LTguOTc0LTkuMzI3czMuOTk0LTkuMTMzIDguOTc0LTkuMzI3em03LjEwNi0uNkExMS45ODYgMTEuOTg2IDAgMCAxIDM4LjY2NyAzMmMwIDMuOTkzLTEuOTY3IDcuNjg3LTUuMjU0IDkuOTI3YTEwLjc3IDEwLjc3IDAgMCAwIDMuOTIuNzRDNDMuMjI3IDQyLjY2NyA0OCAzNy44OTMgNDggMzJzLTQuNzczLTEwLjY2Ny0xMC42NjctMTAuNjY3YTEwLjc3IDEwLjc3IDAgMCAwLTMuOTIuNzR6bS0yLjgyNiAxOS44NTRhMTIuMDI4IDEyLjAyOCAwIDAgMS0xLjc0LTEuNDRBMTEuOTYxIDExLjk2MSAwIDAgMSAyNS4zMzMgMzJjMC0zLjMxMyAxLjM0LTYuMzEzIDMuNTE0LTguNDg3YTEyLjAyOCAxMi4wMjggMCAwIDEgMS43NC0xLjQ0IDEwLjYyIDEwLjYyIDAgMCAwLTMuOTItLjc0QzIwLjc3MyAyMS4zMzMgMTYgMjYuMTA3IDE2IDMyczQuNzczIDEwLjY2NyAxMC42NjcgMTAuNjY3YTEwLjc3IDEwLjc3IDAgMCAwIDMuOTItLjc0ek0zMiAyMi43NmExMC41MyAxMC41MyAwIDAgMC0yLjIwNyAxLjdBMTAuNjA5IDEwLjYwOSAwIDAgMCAyNi42NjcgMzJhMTAuNjEgMTAuNjEgMCAwIDAgMy4xMjYgNy41NGMuNjU0LjY2IDEuNCAxLjIzMyAyLjIwNyAxLjdBMTAuNjY3IDEwLjY2NyAwIDAgMCAzNy4zMzMgMzJjMC0zLjgyNy0yLjA0LTcuMzMzLTUuMzMzLTkuMjR6Ii8+PC9zdmc+"},all:{image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiM4MWM5MjY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDouMDA2NjY2NjciIGQ9Ik0yNi42NjcgMjBjMS45MTMgMCAzLjcyNi40NDcgNS4zMzMgMS4yNDcgMS42MDctLjggMy40Mi0xLjI0NyA1LjMzMy0xLjI0NyA2LjYyNyAwIDEyIDUuMzczIDEyIDEycy01LjM3MyAxMi0xMiAxMmMtMS45MTMgMC0zLjcyNi0uNDQ3LTUuMzMzLTEuMjQ3LTEuNjA3LjgtMy40MiAxLjI0Ny01LjMzMyAxLjI0Ny02LjYyNyAwLTEyLTUuMzczLTEyLTEyczUuMzczLTEyIDEyLTEyem0yLjI3MyAxNi4wODdBOS4zMTggOS4zMTggMCAwIDEgMjggMzJjMC0xLjQ2Ny4zNC0yLjg1My45NC00LjA4Ny43NjctMS41NjYgMS43MTMtMi41MzMgMy4wNi0zLjU4Ni40NC4zNC44NzMuNjggMS4yNjcgMS4wNzNBOS4zMTQgOS4zMTQgMCAwIDEgMzYgMzJjMCAyLjM4Ny0uOTEzIDQuNzgtMi43MzMgNi42LS4zOTQuMzkzLS44MjcuNzMzLTEuMjY3IDEuMDczLTEuMzQ3LTEuMDUzLTIuMjkzLTIuMDItMy4wNi0zLjU4NlptNC40NzMtMTQuMDE0QTExLjk4NiAxMS45ODYgMCAwIDEgMzguNjY3IDMyYzAgMy45OTMtMS45NjcgNy42ODctNS4yNTQgOS45MjdhMTAuNzcgMTAuNzcgMCAwIDAgMy45Mi43NEM0My4yMjcgNDIuNjY3IDQ4IDM3Ljg5MyA0OCAzMnMtNC43NzMtMTAuNjY3LTEwLjY2Ny0xMC42NjdhMTAuNzcgMTAuNzcgMCAwIDAtMy45Mi43NHptLTIuODI2IDE5Ljg1NEExMS45ODYgMTEuOTg2IDAgMCAxIDI1LjMzMyAzMmMwLTMuOTkzIDEuOTY3LTcuNjg3IDUuMjU0LTkuOTI3YTEwLjYyIDEwLjYyIDAgMCAwLTMuOTItLjc0QzIwLjc3MyAyMS4zMzMgMTYgMjYuMTA3IDE2IDMyczQuNzczIDEwLjY2NyAxMC42NjcgMTAuNjY3YTEwLjc3IDEwLjc3IDAgMCAwIDMuOTItLjc0ek0zMiAyMi43NkExMC42NjcgMTAuNjY3IDAgMCAwIDI2LjY2NyAzMmMwIDMuODI3IDIuMDQgNy4zMzMgNS4zMzMgOS4yNEExMC42NjcgMTAuNjY3IDAgMCAwIDM3LjMzMyAzMmMwLTMuODI3LTIuMDQtNy4zMzMtNS4zMzMtOS4yNHoiLz48L3N2Zz4=",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MjAiIGhlaWdodD0iNTIwIiB2aWV3Qm94PSIwIDAgNTIwMCA1MjAwIiBzdHlsZT0iY2xpcC1ydWxlOm5vbnplcm87ZmlsbC1ydWxlOm5vbnplcm87aW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTtzaGFwZS1yZW5kZXJpbmc6Z2VvbWV0cmljUHJlY2lzaW9uO3RleHQtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbiI+PHBhdGggZD0iTTE4MDAgODAwYzI4NyAwIDU1OSA2NyA4MDAgMTg3IDI0MS0xMjAgNTEzLTE4NyA4MDAtMTg3IDk5NCAwIDE4MDAgODA2IDE4MDAgMTgwMHMtODA2IDE4MDAtMTgwMCAxODAwYy0yODcgMC01NTktNjctODAwLTE4Ny0yNDEgMTIwLTUxMyAxODctODAwIDE4N0M4MDYgNDQwMCAwIDM1OTQgMCAyNjAwUzgwNiA4MDAgMTgwMCA4MDBabTM0MSAyNDEzYy05MC0xODUtMTQxLTM5My0xNDEtNjEzczUxLTQyOCAxNDEtNjEzYzExNS0yMzUgMjU3LTM4MCA0NTktNTM4IDY2IDUxIDEzMSAxMDIgMTkwIDE2MSAyNzMgMjczIDQxMCA2MzIgNDEwIDk5MHMtMTM3IDcxNy00MTAgOTkwYy01OSA1OS0xMjQgMTEwLTE5MCAxNjEtMjAyLTE1OC0zNDQtMzAzLTQ1OS01Mzh6bTY3MS0yMTAyYzQ5MyAzMzYgNzg4IDg5MCA3ODggMTQ4OXMtMjk1IDExNTMtNzg4IDE0ODljMTgyIDcxIDM4MCAxMTEgNTg4IDExMSA4ODQgMCAxNjAwLTcxNiAxNjAwLTE2MDBzLTcxNi0xNjAwLTE2MDAtMTYwMGMtMjA4IDAtNDA2IDQwLTU4OCAxMTF6bS00MjQgMjk3OGMtNDkzLTMzNi03ODgtODkwLTc4OC0xNDg5czI5NS0xMTUzIDc4OC0xNDg5Yy0xODItNzItMzgwLTExMS01ODgtMTExLTg4NCAwLTE2MDAgNzE2LTE2MDAgMTYwMHM3MTYgMTYwMCAxNjAwIDE2MDBjMjA4IDAgNDA2LTQwIDU4OC0xMTF6bTIxMi0yODc1Yy00OTQgMjg2LTgwMCA4MTItODAwIDEzODZzMzA2IDExMDAgODAwIDEzODZjNDk0LTI4NiA4MDAtODEyIDgwMC0xMzg2cy0zMDYtMTEwMC04MDAtMTM4NnoiIHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjEiLz48L3N2Zz4=",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",selected:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",guide:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNiN2QyZTU7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5OjIsMjtzdHJva2Utb3BhY2l0eToxO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1kYXNob2Zmc2V0OjAiIHJ5PSIzLjk5NiIgcng9IjMuOTk2IiBoZWlnaHQ9IjQ2LjE4OCIgd2lkdGg9IjQ2LjE4OCIgeT0iMjIuMTYxIiB4PSItMjMuMDk0IiB0cmFuc2Zvcm09InJvdGF0ZSgtNDUpIi8+PHBhdGggc3R5bGU9ImZpbGw6I2I3ZDJlNTtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6LjAwNjY2NjY3IiBkPSJNMjYuNjY3IDIwYzEuOTEzIDAgMy43MjYuNDQ3IDUuMzMzIDEuMjQ3IDEuNjA3LS44IDMuNDItMS4yNDcgNS4zMzMtMS4yNDcgNi42MjcgMCAxMiA1LjM3MyAxMiAxMnMtNS4zNzMgMTItMTIgMTJjLTEuOTEzIDAtMy43MjYtLjQ0Ny01LjMzMy0xLjI0Ny0xLjYwNy44LTMuNDIgMS4yNDctNS4zMzMgMS4yNDctNi42MjcgMC0xMi01LjM3My0xMi0xMnM1LjM3My0xMiAxMi0xMnptMi4yNzMgMTYuMDg3QTkuMzE4IDkuMzE4IDAgMCAxIDI4IDMyYzAtMS40NjcuMzQtMi44NTMuOTQtNC4wODcuNzY3LTEuNTY2IDEuNzEzLTIuNTMzIDMuMDYtMy41ODYuNDQuMzQuODczLjY4IDEuMjY3IDEuMDczQTkuMzE0IDkuMzE0IDAgMCAxIDM2IDMyYzAgMi4zODctLjkxMyA0Ljc4LTIuNzMzIDYuNi0uMzk0LjM5My0uODI3LjczMy0xLjI2NyAxLjA3My0xLjM0Ny0xLjA1My0yLjI5My0yLjAyLTMuMDYtMy41ODZabTQuNDczLTE0LjAxNEExMS45ODYgMTEuOTg2IDAgMCAxIDM4LjY2NyAzMmMwIDMuOTkzLTEuOTY3IDcuNjg3LTUuMjU0IDkuOTI3YTEwLjc3IDEwLjc3IDAgMCAwIDMuOTIuNzRDNDMuMjI3IDQyLjY2NyA0OCAzNy44OTMgNDggMzJzLTQuNzczLTEwLjY2Ny0xMC42NjctMTAuNjY3YTEwLjc3IDEwLjc3IDAgMCAwLTMuOTIuNzR6bS0yLjgyNiAxOS44NTRBMTEuOTg2IDExLjk4NiAwIDAgMSAyNS4zMzMgMzJjMC0zLjk5MyAxLjk2Ny03LjY4NyA1LjI1NC05LjkyN2ExMC42MiAxMC42MiAwIDAgMC0zLjkyLS43NEMyMC43NzMgMjEuMzMzIDE2IDI2LjEwNyAxNiAzMnM0Ljc3MyAxMC42NjcgMTAuNjY3IDEwLjY2N2ExMC43NyAxMC43NyAwIDAgMCAzLjkyLS43NHpNMzIgMjIuNzZBMTAuNjY3IDEwLjY2NyAwIDAgMCAyNi42NjcgMzJjMCAzLjgyNyAyLjA0IDcuMzMzIDUuMzMzIDkuMjRBMTAuNjY3IDEwLjY2NyAwIDAgMCAzNy4zMzMgMzJjMC0zLjgyNy0yLjA0LTcuMzMzLTUuMzMzLTkuMjR6Ii8+PC9zdmc+"},none:{image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiM4MWM5MjY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDouMDA2NjY2NjciIGQ9Ik0yNi42NjcgMjBjMS45MTMgMCAzLjcyNi40NDcgNS4zMzMgMS4yNDcgMS42MDctLjggMy40Mi0xLjI0NyA1LjMzMy0xLjI0NyA2LjYyNyAwIDEyIDUuMzczIDEyIDEycy01LjM3MyAxMi0xMiAxMmMtMS45MTMgMC0zLjcyNi0uNDQ3LTUuMzMzLTEuMjQ3LTEuNjA3LjgtMy40MiAxLjI0Ny01LjMzMyAxLjI0Ny02LjYyNyAwLTEyLTUuMzczLTEyLTEyczUuMzczLTEyIDEyLTEyem02Ljc0NiAyLjA3M0ExMS45ODYgMTEuOTg2IDAgMCAxIDM4LjY2NyAzMmMwIDMuOTkzLTEuOTY3IDcuNjg3LTUuMjU0IDkuOTI3YTEwLjc3IDEwLjc3IDAgMCAwIDMuOTIuNzRDNDMuMjI3IDQyLjY2NyA0OCAzNy44OTMgNDggMzJzLTQuNzczLTEwLjY2Ny0xMC42NjctMTAuNjY3YTEwLjc3IDEwLjc3IDAgMCAwLTMuOTIuNzR6bS0yLjgyNiAxOS44NTRBMTEuOTg2IDExLjk4NiAwIDAgMSAyNS4zMzMgMzJjMC0zLjk5MyAxLjk2Ny03LjY4NyA1LjI1NC05LjkyN2ExMC42MiAxMC42MiAwIDAgMC0zLjkyLS43NEMyMC43NzMgMjEuMzMzIDE2IDI2LjEwNyAxNiAzMnM0Ljc3MyAxMC42NjcgMTAuNjY3IDEwLjY2N2ExMC43NyAxMC43NyAwIDAgMCAzLjkyLS43NHpNMzIgMjIuNzZBMTAuNjY3IDEwLjY2NyAwIDAgMCAyNi42NjcgMzJjMCAzLjgyNyAyLjA0IDcuMzMzIDUuMzMzIDkuMjRBMTAuNjY3IDEwLjY2NyAwIDAgMCAzNy4zMzMgMzJjMC0zLjgyNy0yLjA0LTcuMzMzLTUuMzMzLTkuMjR6Ii8+PC9zdmc+",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MjAiIGhlaWdodD0iNTIwIiB2aWV3Qm94PSIwIDAgNTIwMCA1MjAwIiBzdHlsZT0iY2xpcC1ydWxlOm5vbnplcm87ZmlsbC1ydWxlOm5vbnplcm87aW1hZ2UtcmVuZGVyaW5nOm9wdGltaXplUXVhbGl0eTtzaGFwZS1yZW5kZXJpbmc6Z2VvbWV0cmljUHJlY2lzaW9uO3RleHQtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbiI+PHBhdGggZD0iTTE4MDAgODAwYzI4NyAwIDU1OSA2NyA4MDAgMTg3IDI0MS0xMjAgNTEzLTE4NyA4MDAtMTg3IDk5NCAwIDE4MDAgODA2IDE4MDAgMTgwMHMtODA2IDE4MDAtMTgwMCAxODAwYy0yODcgMC01NTktNjctODAwLTE4Ny0yNDEgMTIwLTUxMyAxODctODAwIDE4N0M4MDYgNDQwMCAwIDM1OTQgMCAyNjAwUzgwNiA4MDAgMTgwMCA4MDBabTEwMTIgMzExYzQ5MyAzMzYgNzg4IDg5MCA3ODggMTQ4OXMtMjk1IDExNTMtNzg4IDE0ODljMTgyIDcxIDM4MCAxMTEgNTg4IDExMSA4ODQgMCAxNjAwLTcxNiAxNjAwLTE2MDBzLTcxNi0xNjAwLTE2MDAtMTYwMGMtMjA4IDAtNDA2IDQwLTU4OCAxMTF6bS00MjQgMjk3OGMtNDkzLTMzNi03ODgtODkwLTc4OC0xNDg5czI5NS0xMTUzIDc4OC0xNDg5Yy0xODItNzItMzgwLTExMS01ODgtMTExLTg4NCAwLTE2MDAgNzE2LTE2MDAgMTYwMHM3MTYgMTYwMCAxNjAwIDE2MDBjMjA4IDAgNDA2LTQwIDU4OC0xMTF6bTIxMi0yODc1Yy00OTQgMjg2LTgwMCA4MTItODAwIDEzODZzMzA2IDExMDAgODAwIDEzODZjNDk0LTI4NiA4MDAtODEyIDgwMC0xMzg2cy0zMDYtMTEwMC04MDAtMTM4NnoiIHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjEiLz48L3N2Zz4=",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",selected:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLWxpbmVjYXA6YnV0dCIgcnk9IjMuOTk2IiByeD0iMy45OTYiIGhlaWdodD0iNDYuMTg4IiB3aWR0aD0iNDYuMTg4IiB5PSIyMi4xNjEiIHg9Ii0yMy4wOTQiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNNDEuMTI4IDIyLjg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzOS4wMiAyMmMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wyNC4xNDkgMzUuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTYuMTgzbC0yLjAwMyA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0yNy43MzIgMzkuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek00MC40MiAyNi4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",guide:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIgc3R5bGU9InNoYXBlLXJlbmRlcmluZzpnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNiN2QyZTU7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5OjIsMjtzdHJva2Utb3BhY2l0eToxO3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1kYXNob2Zmc2V0OjAiIHJ5PSIzLjk5NiIgcng9IjMuOTk2IiBoZWlnaHQ9IjQ2LjE4OCIgd2lkdGg9IjQ2LjE4OCIgeT0iMjIuMTYxIiB4PSItMjMuMDk0IiB0cmFuc2Zvcm09InJvdGF0ZSgtNDUpIi8+PHBhdGggc3R5bGU9ImZpbGw6I2I3ZDJlNTtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6LjAwNjY2NjY3IiBkPSJNMjYuNjY3IDIwYzEuOTEzIDAgMy43MjYuNDQ3IDUuMzMzIDEuMjQ3IDEuNjA3LS44IDMuNDItMS4yNDcgNS4zMzMtMS4yNDcgNi42MjcgMCAxMiA1LjM3MyAxMiAxMnMtNS4zNzMgMTItMTIgMTJjLTEuOTEzIDAtMy43MjYtLjQ0Ny01LjMzMy0xLjI0Ny0xLjYwNy44LTMuNDIgMS4yNDctNS4zMzMgMS4yNDctNi42MjcgMC0xMi01LjM3My0xMi0xMnM1LjM3My0xMiAxMi0xMnptNi43NDYgMi4wNzNBMTEuOTg2IDExLjk4NiAwIDAgMSAzOC42NjcgMzJjMCAzLjk5My0xLjk2NyA3LjY4Ny01LjI1NCA5LjkyN2ExMC43NyAxMC43NyAwIDAgMCAzLjkyLjc0QzQzLjIyNyA0Mi42NjcgNDggMzcuODkzIDQ4IDMycy00Ljc3My0xMC42NjctMTAuNjY3LTEwLjY2N2ExMC43NyAxMC43NyAwIDAgMC0zLjkyLjc0em0tMi44MjYgMTkuODU0QTExLjk4NiAxMS45ODYgMCAwIDEgMjUuMzMzIDMyYzAtMy45OTMgMS45NjctNy42ODcgNS4yNTQtOS45MjdhMTAuNjIgMTAuNjIgMCAwIDAtMy45Mi0uNzRDMjAuNzczIDIxLjMzMyAxNiAyNi4xMDcgMTYgMzJzNC43NzMgMTAuNjY3IDEwLjY2NyAxMC42NjdhMTAuNzcgMTAuNzcgMCAwIDAgMy45Mi0uNzR6TTMyIDIyLjc2QTEwLjY2NyAxMC42NjcgMCAwIDAgMjYuNjY3IDMyYzAgMy44MjcgMi4wNCA3LjMzMyA1LjMzMyA5LjI0QTEwLjY2NyAxMC42NjcgMCAwIDAgMzcuMzMzIDMyYzAtMy44MjctMi4wNC03LjMzMy01LjMzMy05LjI0eiIvPjwvc3ZnPg=="}},terminators:{width:48,height:48,continuous:{image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IGZpbGw9IiM4MUM5MjYiIHJ5PSI0IiByeD0iNCIgaGVpZ2h0PSI0OCIgd2lkdGg9IjQ4Ii8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MSIgZD0ibTI0LjM4MSAzMy44NCA2LjQ4Ny02LjQ4NWEuNTQuNTQgMCAwIDAtLjc2NS0uNzY0bC01LjU2MyA1LjU2MlYxNC41NDFhLjU0LjU0IDAgMCAwLTEuMDggMHYxNy42MTJsLTUuNTY0LTUuNTYyYS41NC41NCAwIDAgMC0uNzY0Ljc2NWw2LjQ4NiA2LjQ4NmMuMjExLjIxLjU1NC4yMS43NjUgMHoiLz48L3N2Zz4=",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgeD0iMSIgeT0iMSIgd2lkdGg9IjQ2IiBoZWlnaHQ9IjQ2IiByeD0iMy44NCIgcnk9IjMuODQiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNMzMuMTI4IDE0Ljg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzMS4wMiAxNGMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wxNi4xNDkgMjcuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTcuMTgzbC0yLjAwMiA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0xOS43MzIgMzEuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek0zMi40MiAxOC4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgeD0iMSIgeT0iMSIgd2lkdGg9IjQ2IiBoZWlnaHQ9IjQ2IiByeD0iMy44NCIgcnk9IjMuODQiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNMzMuMTI4IDE0Ljg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzMS4wMiAxNGMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wxNi4xNDkgMjcuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTcuMTgzbC0yLjAwMiA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0xOS43MzIgMzEuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek0zMi40MiAxOC4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",selected:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjxyZWN0IHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgeD0iMSIgeT0iMSIgd2lkdGg9IjQ2IiBoZWlnaHQ9IjQ2IiByeD0iMy44NCIgcnk9IjMuODQiLz48cGF0aCBzdHlsZT0iZmlsbDojODFjOTI2O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNMzMuMTI4IDE0Ljg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzMS4wMiAxNGMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wxNi4xNDkgMjcuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTcuMTgzbC0yLjAwMiA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0xOS43MzIgMzEuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3ek0zMi40MiAxOC4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",guide:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjxyZWN0IHN0eWxlPSJmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNiN2QyZTU7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5OjEuOTk5OTk5OTgsMS45OTk5OTk5ODtzdHJva2UtZGFzaG9mZnNldDowO3N0cm9rZS1vcGFjaXR5OjEiIHg9IjEiIHk9IjEiIHdpZHRoPSI0NiIgaGVpZ2h0PSI0NiIgcng9IjMuODMzIiByeT0iMy44MzMiLz48cGF0aCBzdHlsZT0iZmlsbDojYjdkMmU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJtMjQuMzgxIDMzLjg0IDYuNDg3LTYuNDg1YS41NC41NCAwIDAgMC0uNzY1LS43NjRsLTUuNTYzIDUuNTYyVjE0LjU0MWEuNTQuNTQgMCAwIDAtMS4wOCAwdjE3LjYxMmwtNS41NjQtNS41NjJhLjU0LjU0IDAgMCAwLS43NjQuNzY1bDYuNDg2IDYuNDg2Yy4yMTEuMjEuNTU0LjIxLjc2NSAweiIvPjwvc3ZnPg=="},jump:{image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IGZpbGw9IiM4MUM5MjYiIHJ5PSIyNCIgcng9IjI0IiBoZWlnaHQ9IjQ4IiB3aWR0aD0iNDgiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxLjAwMDAwMDEyIiBkPSJNMzUuMzk5IDE2LjhoLTcuMmEuNi42IDAgMCAwIDAgMS4yaDUuNzUxTDIyLjIgMjkuNzUybC05LjE3NS05LjE3NmEuNi42IDAgMCAwLS44NDkuODQ5bDkuNiA5LjZhLjYwMy42MDMgMCAwIDAgLjg1IDBMMzQuOCAxOC44NXY1Ljc1YS42LjYgMCAwIDAgMS4yIDB2LTcuMmEuNi42IDAgMCAwLS42LS42WiIvPjwvc3ZnPg==",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSIyNCIgcng9IjI0IiBoZWlnaHQ9IjQ2IiB3aWR0aD0iNDYiIHk9IjEiIHg9IjEiIHN0eWxlPSJmaWxsOiNmZmY7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIHN0eWxlPSJmaWxsOiM4MWM5MjY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEiIGQ9Ik0zMy4xMjggMTQuODczQTIuOTU5IDIuOTU5IDAgMCAwIDMxLjAyIDE0Yy0uNzk2IDAtMS41NDQuMzEtMi4xMDYuODczTDE2LjE0OSAyNy42MzlhLjQ5Ny40OTcgMCAwIDAtLjExNy4xODNsLTIuMDAyIDUuNTA3YS41LjUgMCAwIDAgLjY0Mi42NGw1LjUwNy0yLjAwMmEuNTEuNTEgMCAwIDAgLjE4My0uMTE2bDEyLjc2Ni0xMi43NjZjLjU2My0uNTYzLjg3Mi0xLjMxLjg3Mi0yLjEwNyAwLS43OTYtLjMxLTEuNTQ0LS44NzItMi4xMDZaTTE5LjczMiAzMS4wNjVsLTQuMzk0IDEuNTk4IDEuNTk4LTQuMzk1IDExLjA4Mi0xMS4wODIgMi43OTYgMi43OTd6TTMyLjQyIDE4LjM3N2wtLjg5Ny44OTctMi43OTctMi43OTYuODk4LS44OThjLjM3My0uMzczLjg3LS41NzggMS4zOTctLjU3OC41MjggMCAxLjAyNS4yMDUgMS4zOTguNTc4LjM3My4zNzQuNTc5Ljg3LjU3OSAxLjM5OCAwIC41MjgtLjIwNiAxLjAyNC0uNTc5IDEuMzk4eiIvPjwvc3ZnPg==",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSIyNCIgcng9IjI0IiBoZWlnaHQ9IjQ2IiB3aWR0aD0iNDYiIHk9IjEiIHg9IjEiIHN0eWxlPSJmaWxsOiNmZmY7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIHN0eWxlPSJmaWxsOiM4MWM5MjY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEiIGQ9Ik0zMy4xMjggMTQuODczQTIuOTU5IDIuOTU5IDAgMCAwIDMxLjAyIDE0Yy0uNzk2IDAtMS41NDQuMzEtMi4xMDYuODczTDE2LjE0OSAyNy42MzlhLjQ5Ny40OTcgMCAwIDAtLjExNy4xODNsLTIuMDAyIDUuNTA3YS41LjUgMCAwIDAgLjY0Mi42NGw1LjUwNy0yLjAwMmEuNTEuNTEgMCAwIDAgLjE4My0uMTE2bDEyLjc2Ni0xMi43NjZjLjU2My0uNTYzLjg3Mi0xLjMxLjg3Mi0yLjEwNyAwLS43OTYtLjMxLTEuNTQ0LS44NzItMi4xMDZaTTE5LjczMiAzMS4wNjVsLTQuMzk0IDEuNTk4IDEuNTk4LTQuMzk1IDExLjA4Mi0xMS4wODIgMi43OTYgMi43OTd6TTMyLjQyIDE4LjM3N2wtLjg5Ny44OTctMi43OTctMi43OTYuODk4LS44OThjLjM3My0uMzczLjg3LS41NzggMS4zOTctLjU3OC41MjggMCAxLjAyNS4yMDUgMS4zOTguNTc4LjM3My4zNzQuNTc5Ljg3LjU3OSAxLjM5OCAwIC41MjgtLjIwNiAxLjAyNC0uNTc5IDEuMzk4eiIvPjwvc3ZnPg==",selected:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSIyNCIgcng9IjI0IiBoZWlnaHQ9IjQ2IiB3aWR0aD0iNDYiIHk9IjEiIHg9IjEiIHN0eWxlPSJmaWxsOiNmZmY7c3Ryb2tlOiM4MWM5MjY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtmaWxsLW9wYWNpdHk6MSIvPjxwYXRoIHN0eWxlPSJmaWxsOiM4MWM5MjY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEiIGQ9Ik0zMy4xMjggMTQuODczQTIuOTU5IDIuOTU5IDAgMCAwIDMxLjAyIDE0Yy0uNzk2IDAtMS41NDQuMzEtMi4xMDYuODczTDE2LjE0OSAyNy42MzlhLjQ5Ny40OTcgMCAwIDAtLjExNy4xODNsLTIuMDAyIDUuNTA3YS41LjUgMCAwIDAgLjY0Mi42NGw1LjUwNy0yLjAwMmEuNTEuNTEgMCAwIDAgLjE4My0uMTE2bDEyLjc2Ni0xMi43NjZjLjU2My0uNTYzLjg3Mi0xLjMxLjg3Mi0yLjEwNyAwLS43OTYtLjMxLTEuNTQ0LS44NzItMi4xMDZaTTE5LjczMiAzMS4wNjVsLTQuMzk0IDEuNTk4IDEuNTk4LTQuMzk1IDExLjA4Mi0xMS4wODIgMi43OTYgMi43OTd6TTMyLjQyIDE4LjM3N2wtLjg5Ny44OTctMi43OTctMi43OTYuODk4LS44OThjLjM3My0uMzczLjg3LS41NzggMS4zOTctLjU3OC41MjggMCAxLjAyNS4yMDUgMS4zOTguNTc4LjM3My4zNzQuNTc5Ljg3LjU3OSAxLjM5OCAwIC41MjgtLjIwNiAxLjAyNC0uNTc5IDEuMzk4eiIvPjwvc3ZnPg==",guide:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSIyNCIgcng9IjI0IiBoZWlnaHQ9IjQ2IiB3aWR0aD0iNDYiIHk9IjEiIHg9IjEiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiNiN2QyZTU7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5OjIsMjtzdHJva2Utb3BhY2l0eToxO3N0cm9rZS1kYXNob2Zmc2V0OjAiLz48cGF0aCBzdHlsZT0iZmlsbDojYjdkMmU1O2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxLjAwMDAwMDEyIiBkPSJNMzUuMzk5IDE2LjhoLTcuMmEuNi42IDAgMCAwIDAgMS4yaDUuNzUxTDIyLjIgMjkuNzUybC05LjE3NS05LjE3NmEuNi42IDAgMCAwLS44NDkuODQ5bDkuNiA5LjZhLjYwMy42MDMgMCAwIDAgLjg1IDBMMzQuOCAxOC44NXY1Ljc1YS42LjYgMCAwIDAgMS4yIDB2LTcuMmEuNi42IDAgMCAwLS42LS42WiIvPjwvc3ZnPg=="},abort:{image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSI0IiByeD0iNCIgaGVpZ2h0PSI0OCIgd2lkdGg9IjQ4IiBmaWxsPSIjRkQ3QjFGIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2Utd2lkdGg6MSIgZD0iTTE1LjMzMyAzMlYxNmMwLTEuMTAzLjg5OC0yIDItMmgxMy4zMzRjMS4xMDIgMCAyIC44OTcgMiAydjUuMzMzYS42NjcuNjY3IDAgMCAxLTEuMzM0IDBWMTZhLjY2Ny42NjcgMCAwIDAtLjY2Ni0uNjY3SDE3LjMzM2EuNjY3LjY2NyAwIDAgMC0uNjY2LjY2N3YxNmMwIC4zNjguMjk4LjY2Ny42NjYuNjY3aDEzLjMzNGEuNjY3LjY2NyAwIDAgMCAuNjY2LS42Njd2LTUuMzMzYS42NjcuNjY3IDAgMCAxIDEuMzM0IDBWMzJjMCAxLjEwMy0uODk4IDItMiAySDE3LjMzM2MtMS4xMDIgMC0yLS44OTctMi0yeiIvPjxwYXRoIHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlLXdpZHRoOjEiIGQ9Im0zNy4xMzggMjguNDcgNC00YS42NjcuNjY3IDAgMCAwIDAtLjk0MmwtNC00YS42NjcuNjY3IDAgMCAwLS45NDIuOTQzbDIuODYxIDIuODYySDI0YS42NjcuNjY3IDAgMCAwIDAgMS4zMzRoMTUuMDU3bC0yLjg2MSAyLjg2MmEuNjYzLjY2MyAwIDAgMCAwIC45NDJjLjI2LjI2LjY4Mi4yNi45NDIgMHoiLz48L3N2Zz4=",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSI0IiByeD0iNCIgaGVpZ2h0PSI0NiIgd2lkdGg9IjQ2IiB5PSIxIiB4PSIxIiBzdHlsZT0iZmlsbDojZmZmO3N0cm9rZTojZmQ3YjFmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmQ3YjFmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNMzMuMTI4IDE0Ljg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzMS4wMiAxNGMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wxNi4xNDkgMjcuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTcuMTgzbC0yLjAwMiA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0xOS43MzIgMzEuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3Wk0zMi40MiAxOC4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSI0IiByeD0iNCIgaGVpZ2h0PSI0NiIgd2lkdGg9IjQ2IiB5PSIxIiB4PSIxIiBzdHlsZT0iZmlsbDojZmZmO3N0cm9rZTojZmQ3YjFmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmQ3YjFmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNMzMuMTI4IDE0Ljg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzMS4wMiAxNGMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wxNi4xNDkgMjcuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTcuMTgzbC0yLjAwMiA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0xOS43MzIgMzEuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3Wk0zMi40MiAxOC4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",selected:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSI0IiByeD0iNCIgaGVpZ2h0PSI0NiIgd2lkdGg9IjQ2IiB5PSIxIiB4PSIxIiBzdHlsZT0iZmlsbDojZmZmO3N0cm9rZTojZmQ3YjFmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmQ3YjFmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNMzMuMTI4IDE0Ljg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzMS4wMiAxNGMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wxNi4xNDkgMjcuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTcuMTgzbC0yLjAwMiA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0xOS43MzIgMzEuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3Wk0zMi40MiAxOC4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",guide:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjxyZWN0IHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiNiN2QyZTU7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5OjIsMjtzdHJva2Utb3BhY2l0eToxO3N0cm9rZS1kYXNob2Zmc2V0OjAiIHg9IjEiIHk9IjEiIHdpZHRoPSI0NiIgaGVpZ2h0PSI0NiIgcng9IjQiIHJ5PSI0Ii8+PHBhdGggc3R5bGU9ImZpbGw6I2I3ZDJlNTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2Utd2lkdGg6MSIgZD0iTTE1LjMzMyAzMlYxNmMwLTEuMTAzLjg5OC0yIDItMmgxMy4zMzRjMS4xMDIgMCAyIC44OTcgMiAydjUuMzMzYS42NjcuNjY3IDAgMCAxLTEuMzM0IDBWMTZhLjY2Ny42NjcgMCAwIDAtLjY2Ni0uNjY3SDE3LjMzM2EuNjY3LjY2NyAwIDAgMC0uNjY2LjY2N3YxNmMwIC4zNjguMjk4LjY2Ny42NjYuNjY3aDEzLjMzNGEuNjY3LjY2NyAwIDAgMCAuNjY2LS42Njd2LTUuMzMzYS42NjcuNjY3IDAgMCAxIDEuMzM0IDBWMzJjMCAxLjEwMy0uODk4IDItMiAySDE3LjMzM2MtMS4xMDIgMC0yLS44OTctMi0yeiIvPjxwYXRoIHN0eWxlPSJmaWxsOiNiN2QyZTU7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlLXdpZHRoOjEiIGQ9Im0zNy4xMzggMjguNDcgNC00YS42NjcuNjY3IDAgMCAwIDAtLjk0MmwtNC00YS42NjcuNjY3IDAgMCAwLS45NDIuOTQzbDIuODYxIDIuODYySDI0YS42NjcuNjY3IDAgMCAwIDAgMS4zMzRoMTUuMDU3bC0yLjg2MSAyLjg2MmEuNjYzLjY2MyAwIDAgMCAwIC45NDJjLjI2LjI2LjY4Mi4yNi45NDIgMHoiLz48L3N2Zz4="},epilogue:{image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSI0IiByeD0iNCIgaGVpZ2h0PSI0OCIgd2lkdGg9IjQ4IiBmaWxsPSIjRkQ3QjFGIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MS4xNzYzMzIyNCIgZD0iTTEzLjQxMyAzNC45OTlhLjU4OC41ODggMCAwIDEtLjMwMi0xLjA5MyA3LjMwNiA3LjMwNiAwIDAgMCAzLjEwNi0zLjc0Yy0yLjE2Mi0xLjY1NS0zLjM5Mi0zLjk0NS0zLjM5Mi02LjM0MiAwLTEuMjEuMzAzLTIuMzg0LjkwMy0zLjQ4Ny41NzItMS4wNTIgMS4zODgtMS45OTQgMi40MjUtMi44QzE4LjI1NSAxNS45IDIxLjA0MiAxNSAyNCAxNWMyLjk1OSAwIDUuNzQ1LjkwMSA3Ljg0NyAyLjUzNiAxLjAzNy44MDYgMS44NTMgMS43NDggMi40MjUgMi44MDEuNiAxLjEwMi45MDMgMi4yNzUuOTAzIDMuNDg3YTcuMjI3IDcuMjI3IDAgMCAxLS45MDMgMy40ODZjLS41NzIgMS4wNTItMS4zODggMS45OTQtMi40MjUgMi44MDEtMi4xMDIgMS42MzUtNC44ODggMi41MzYtNy44NDcgMi41MzZhMTMuODkgMTMuODkgMCAwIDEtMy41NDgtLjQ1M2MtLjUwNC4zMzctMS40NDguOTMzLTIuNTc1IDEuNDk0LTEuNzUuODctMy4yNTEgMS4zMTItNC40NjMgMS4zMTJaTTI0IDE2LjE3OGMtNS41MTMgMC05Ljk5OSAzLjQzLTkuOTk5IDcuNjQ2IDAgMi4xMzUgMS4xODIgNC4xOSAzLjI0MiA1LjYzN2EuNTkuNTkgMCAwIDEgLjIzLjYzNGMtLjEzNy41MTMtLjYwNSAxLjkyLTEuODU4IDMuMjggMS41MzItLjUzNyAzLjE4MS0xLjQ2OCA0LjM5OS0yLjMwNS4xNDQtLjEuMzI1LS4xMy40OTUtLjA4MSAxLjExNS4zMTggMi4yOS40OCAzLjQ5MS40OCA1LjUxNCAwIDkuOTk5LTMuNDMgOS45OTktNy42NDUgMC00LjIxNi00LjQ4NS03LjY0Ni05Ljk5OS03LjY0NnoiLz48L3N2Zz4=",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSI0IiByeD0iNCIgaGVpZ2h0PSI0NiIgd2lkdGg9IjQ2IiB5PSIxIiB4PSIxIiBzdHlsZT0iZmlsbDojZmZmO3N0cm9rZTojZmQ3YjFmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmQ3YjFmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNMzMuMTI4IDE0Ljg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzMS4wMiAxNGMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wxNi4xNDkgMjcuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTcuMTgzbC0yLjAwMiA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0xOS43MzIgMzEuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3Wk0zMi40MiAxOC4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSI0IiByeD0iNCIgaGVpZ2h0PSI0NiIgd2lkdGg9IjQ2IiB5PSIxIiB4PSIxIiBzdHlsZT0iZmlsbDojZmZmO3N0cm9rZTojZmQ3YjFmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmQ3YjFmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNMzMuMTI4IDE0Ljg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzMS4wMiAxNGMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wxNi4xNDkgMjcuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTcuMTgzbC0yLjAwMiA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0xOS43MzIgMzEuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3Wk0zMi40MiAxOC4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",selected:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iNDgiIHdpZHRoPSI0OCIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPjxyZWN0IHJ5PSI0IiByeD0iNCIgaGVpZ2h0PSI0NiIgd2lkdGg9IjQ2IiB5PSIxIiB4PSIxIiBzdHlsZT0iZmlsbDojZmZmO3N0cm9rZTojZmQ3YjFmO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7ZmlsbC1vcGFjaXR5OjEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmQ3YjFmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDoxIiBkPSJNMzMuMTI4IDE0Ljg3M0EyLjk1OSAyLjk1OSAwIDAgMCAzMS4wMiAxNGMtLjc5NiAwLTEuNTQ0LjMxLTIuMTA2Ljg3M0wxNi4xNDkgMjcuNjM5YS40OTcuNDk3IDAgMCAwLS4xMTcuMTgzbC0yLjAwMiA1LjUwN2EuNS41IDAgMCAwIC42NDIuNjRsNS41MDctMi4wMDJhLjUxLjUxIDAgMCAwIC4xODMtLjExNmwxMi43NjYtMTIuNzY2Yy41NjMtLjU2My44NzItMS4zMS44NzItMi4xMDcgMC0uNzk2LS4zMS0xLjU0NC0uODcyLTIuMTA2ek0xOS43MzIgMzEuMDY1bC00LjM5NCAxLjU5OCAxLjU5OC00LjM5NSAxMS4wODItMTEuMDgyIDIuNzk2IDIuNzk3Wk0zMi40MiAxOC4zNzdsLS44OTcuODk3LTIuNzk3LTIuNzk2Ljg5OC0uODk4Yy4zNzMtLjM3My44Ny0uNTc4IDEuMzk3LS41NzguNTI4IDAgMS4wMjUuMjA1IDEuMzk4LjU3OC4zNzMuMzc0LjU3OS44Ny41NzkgMS4zOTggMCAuNTI4LS4yMDYgMS4wMjQtLjU3OSAxLjM5OHoiLz48L3N2Zz4=",guide:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiPjxyZWN0IHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiNiN2QyZTU7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5OjIsMjtzdHJva2Utb3BhY2l0eToxO3N0cm9rZS1kYXNob2Zmc2V0OjAiIHg9IjEiIHk9IjEiIHdpZHRoPSI0NiIgaGVpZ2h0PSI0NiIgcng9IjQiIHJ5PSI0Ii8+PHBhdGggc3R5bGU9ImZpbGw6I2I3ZDJlNTtzdHJva2Utd2lkdGg6MS4xNzYzMzIyNDtmaWxsLW9wYWNpdHk6MSIgZD0iTTEzLjQxMyAzNC45OTlhLjU4OC41ODggMCAwIDEtLjMwMi0xLjA5MyA3LjMwNiA3LjMwNiAwIDAgMCAzLjEwNi0zLjc0Yy0yLjE2Mi0xLjY1NS0zLjM5Mi0zLjk0NS0zLjM5Mi02LjM0MiAwLTEuMjEuMzAzLTIuMzg0LjkwMy0zLjQ4Ny41NzItMS4wNTIgMS4zODgtMS45OTQgMi40MjUtMi44QzE4LjI1NSAxNS45IDIxLjA0MiAxNSAyNCAxNWMyLjk1OSAwIDUuNzQ1LjkwMSA3Ljg0NyAyLjUzNiAxLjAzNy44MDYgMS44NTMgMS43NDggMi40MjUgMi44MDEuNiAxLjEwMi45MDMgMi4yNzUuOTAzIDMuNDg3YTcuMjI3IDcuMjI3IDAgMCAxLS45MDMgMy40ODZjLS41NzIgMS4wNTItMS4zODggMS45OTQtMi40MjUgMi44MDEtMi4xMDIgMS42MzUtNC44ODggMi41MzYtNy44NDcgMi41MzZhMTMuODkgMTMuODkgMCAwIDEtMy41NDgtLjQ1M2MtLjUwNC4zMzctMS40NDguOTMzLTIuNTc1IDEuNDk0LTEuNzUuODctMy4yNTEgMS4zMTItNC40NjMgMS4zMTJaTTI0IDE2LjE3OGMtNS41MTMgMC05Ljk5OSAzLjQzLTkuOTk5IDcuNjQ2IDAgMi4xMzUgMS4xODIgNC4xOSAzLjI0MiA1LjYzN2EuNTkuNTkgMCAwIDEgLjIzLjYzNGMtLjEzNy41MTMtLjYwNSAxLjkyLTEuODU4IDMuMjggMS41MzItLjUzNyAzLjE4MS0xLjQ2OCA0LjM5OS0yLjMwNS4xNDQtLjEuMzI1LS4xMy40OTUtLjA4MSAxLjExNS4zMTggMi4yOS40OCAzLjQ5MS40OCA1LjUxNCAwIDkuOTk5LTMuNDMgOS45OTktNy42NDUgMC00LjIxNi00LjQ4NS03LjY0Ni05Ljk5OS03LjY0NnoiLz48L3N2Zz4="}},junction:{width:64,height:64,size:42,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9Ii0xNSIgeT0iMzAuMjU1IiB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHJ4PSI0IiByeT0iNCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzgxYzkyNjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuNzk5OTk5OTUiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cGF0aCBkPSJNNDAuNTI2IDMxLjUyNmgtOC4wNTJ2LTguMDUyYS40NzQuNDc0IDAgMCAwLS45NDggMHY4LjA1MmgtOC4wNTJhLjQ3NC40NzQgMCAwIDAgMCAuOTQ4aDguMDUydjguMDUyYS40NzQuNDc0IDAgMCAwIC45NDggMHYtOC4wNTJoOC4wNTJhLjQ3NC40NzQgMCAwIDAgMC0uOTQ4WiIgc3R5bGU9ImZpbGw6IzgxYzkyNjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ljk5OTk5OTgyIi8+PC9zdmc+",hover:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9Ii0xNSIgeT0iMzAuMjU1IiB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHJ4PSI0IiByeT0iNCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzgxYzkyNjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuNzk5OTk5OTUiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cmVjdCB4PSItMTIiIHk9IjMzLjI1NSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMiIgcnk9IjIiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiIHN0eWxlPSJmaWxsOiM4MWM5MjYiLz48cGF0aCBkPSJNNDAuNTI2IDMxLjUyNmgtOC4wNTJ2LTguMDUyYS40NzQuNDc0IDAgMCAwLS45NDggMHY4LjA1MmgtOC4wNTJhLjQ3NC40NzQgMCAwIDAgMCAuOTQ4aDguMDUydjguMDUyYS40NzQuNDc0IDAgMCAwIC45NDggMHYtOC4wNTJoOC4wNTJhLjQ3NC40NzQgMCAwIDAgMC0uOTQ4WiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ljk5OTk5OTgyIi8+PC9zdmc+",tap:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9Ii0xNSIgeT0iMzAuMjU1IiB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHJ4PSI0IiByeT0iNCIgc3R5bGU9ImZpbGw6I2ZmZjtzdHJva2U6IzgxYzkyNjtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuNzk5OTk5OTUiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiLz48cmVjdCB4PSItMTIiIHk9IjMzLjI1NSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiByeD0iMiIgcnk9IjIiIHRyYW5zZm9ybT0icm90YXRlKC00NSkiIHN0eWxlPSJmaWxsOiM4MWM5MjYiLz48cGF0aCBkPSJNNDAuNTI2IDMxLjUyNmgtOC4wNTJ2LTguMDUyYS40NzQuNDc0IDAgMCAwLS45NDggMHY4LjA1MmgtOC4wNTJhLjQ3NC40NzQgMCAwIDAgMCAuOTQ4aDguMDUydjguMDUyYS40NzQuNDc0IDAgMCAwIC45NDggMHYtOC4wNTJoOC4wNTJhLjQ3NC40NzQgMCAwIDAgMC0uOTQ4WiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6Ljk5OTk5OTgyIi8+PC9zdmc+",guide:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNjQiIGhlaWdodD0iNjQiPjxyZWN0IHg9Ii0xNSIgeT0iMzAuMjU1IiB3aWR0aD0iMzAiIGhlaWdodD0iMzAiIHJ4PSI0IiByeT0iNCIgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6I2I3ZDJlNTtzdHJva2Utd2lkdGg6MjtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6MiwyO3N0cm9rZS1kYXNob2Zmc2V0OjIuNzk5OTk5OTU7c3Ryb2tlLW9wYWNpdHk6MSIgdHJhbnNmb3JtPSJyb3RhdGUoLTQ1KSIvPjwvc3ZnPg=="},appearance:{backgroundColor:Xc,border:`1px solid ${Jc}`,borderRadius:4},header:{height:72,appearance:{position:"absolute",left:0,right:0,top:0,height:71,borderBottom:`1px solid ${iu.Splitter}`},label:{appearance:{position:"absolute",left:24,top:25,right:72,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontFamily:Ld.Map.Branch.Face,fontSize:Ld.Map.Branch.Size,color:iu.Label,transition:"color 0.2s ease"},named:{color:iu.LabelNamed}},button:{appearance:{position:"absolute",right:11,top:11,width:48,height:48,borderRadius:24,padding:16,fontSize:16,backgroundColor:iu.Button.Background,color:iu.Button.Color,transition:"background-color .2s, color .2s"},hover:{backgroundColor:iu.Button.BackgroundHover,color:iu.Button.ColorHover},tap:{backgroundColor:iu.Button.BackgroundTap,color:iu.Button.ColorTap},selected:{backgroundColor:iu.Button.BackgroundSelected,color:iu.Button.ColorSelected}}},footer:{height:48,appearance:{position:"absolute",left:0,right:0,bottom:0,height:48,borderTop:`1px solid ${su.Splitter}`,color:su.Color,fontSize:20,textAlign:"center",padding:13},hover:{},tap:{},selected:{}},moving:{"> div":{opacity:.8},"> div:nth-child(3)":{opacity:0},"> div:nth-child(5)":{opacity:1,backgroundColor:Kc,boxShadow:`0 0 10px 3px ${eu}`}},following:{"> div":{opacity:.8},"> div:nth-child(5)":{opacity:1,backgroundColor:tu}},ensuing:{transition:`transform .2s ${qd}, height .2s ${qd}, width .2s ${qd}`,"> div:nth-child(4)":{transition:"height .2s"},"> div:nth-child(5)":{transition:`height .2s ${qd}`}},guides:{appearance:{backgroundColor:ou.Background,border:`2px dotted ${ou.Border}`,borderRadius:4},visible:{opacity:1,transition:`transform .2s ${qd}`},invisible:{opacity:0}}},sp={rulers:!1,spacing:new Li(32,32,32,32),scrollbars:jd(Uu.Color,Uu.Hover,Uu.Focus,Uu.Drag,Uu.Crawl,Bu.Crawl,Yu,new Li(-32,-32,-32,-32)),animateDuration:300,clusters:Kd,nodes:Xd,branches:ip,conditions:ep,connectors:{thickness:2,spacing:2,radius:32,padding:0,branch:Ru,cluster:Hu,guides:Fu},start:{width:48,height:48,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNDgiIGhlaWdodD0iNjQiPjxyZWN0IHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgcng9IjQiIHJ5PSI0IiBmaWxsPSIjODFDOTI2Ii8+PHBhdGggZD0iTTI0IDUwdjEyIiBmaWxsPSJub25lIiBzdHJva2U9IiM4MUM5MjYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MSIgZD0iTTIxLjUyOSAxOS41MjhhLjY2Ny42NjcgMCAwIDAgMCAuOTQzbDIuODYxIDIuODYxSDhhLjY2Ny42NjcgMCAwIDAgMCAxLjMzM2gxNi4zOWwtMi44NjEgMi44NjJhLjY2Ny42NjcgMCAwIDAgLjk0Mi45NDJsNC00YS42Ny42NyAwIDAgMCAwLS45NDRsLTQtNGEuNjY3LjY2NyAwIDAgMC0uOTQyIDB6Ii8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MSIgZD0iTTMyLjY2NyAxNnYxNmMwIDEuMTAzLS44OTggMi0yIDJIMTcuMzMzYy0xLjEwMiAwLTItLjg5Ny0yLTJ2LTUuMzMzYS42NjcuNjY3IDAgMCAxIDEuMzM0IDBWMzJjMCAuMzY4LjI5OC42NjcuNjY2LjY2N2gxMy4zMzRhLjY2Ny42NjcgMCAwIDAgLjY2Ni0uNjY3VjE2YS42NjcuNjY3IDAgMCAwLS42NjYtLjY2N0gxNy4zMzNhLjY2Ny42NjcgMCAwIDAtLjY2Ni42Njd2NS4zMzNhLjY2Ny42NjcgMCAwIDEtMS4zMzQgMFYxNmMwLTEuMTAzLjg5OC0yIDItMmgxMy4zMzRjMS4xMDIgMCAyIC44OTcgMiAyeiIvPjwvc3ZnPg==",prologue:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNDgiIGhlaWdodD0iNjQiPjxyZWN0IHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgcng9IjQiIHJ5PSI0IiBmaWxsPSIjODFDOTI2Ii8+PHBhdGggZD0iTTI0IDUwdjEyIiBmaWxsPSJub25lIiBzdHJva2U9IiM4MUM5MjYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MS4xNzYzMzIyNDtzaGFwZS1yZW5kZXJpbmc6Z2VvbWV0cmljUHJlY2lzaW9uIiBkPSJNMTMuNDEzIDM1LjE5OWEuNTg4LjU4OCAwIDAgMS0uMzAyLTEuMDkzIDcuMzA2IDcuMzA2IDAgMCAwIDMuMTA2LTMuNzRjLTIuMTYyLTEuNjU1LTMuMzkyLTMuOTQ1LTMuMzkyLTYuMzQyIDAtMS4yMS4zMDMtMi4zODQuOTAzLTMuNDg3LjU3Mi0xLjA1MiAxLjM4OC0xLjk5NCAyLjQyNS0yLjhDMTguMjU1IDE2LjEgMjEuMDQyIDE1LjIgMjQgMTUuMmMyLjk1OSAwIDUuNzQ1LjkwMSA3Ljg0NyAyLjUzNiAxLjAzNy44MDYgMS44NTMgMS43NDggMi40MjUgMi44MDEuNiAxLjEwMi45MDMgMi4yNzUuOTAzIDMuNDg3YTcuMjI3IDcuMjI3IDAgMCAxLS45MDMgMy40ODZjLS41NzIgMS4wNTItMS4zODggMS45OTQtMi40MjUgMi44MDEtMi4xMDIgMS42MzUtNC44ODggMi41MzYtNy44NDcgMi41MzZhMTMuODkgMTMuODkgMCAwIDEtMy41NDgtLjQ1M2MtLjUwNC4zMzctMS40NDguOTMzLTIuNTc1IDEuNDk0LTEuNzUuODctMy4yNTEgMS4zMTItNC40NjMgMS4zMTJaTTI0IDE2LjM3OGMtNS41MTMgMC05Ljk5OSAzLjQzLTkuOTk5IDcuNjQ2IDAgMi4xMzUgMS4xODIgNC4xOSAzLjI0MiA1LjYzN2EuNTkuNTkgMCAwIDEgLjIzLjYzNGMtLjEzNy41MTMtLjYwNSAxLjkyLTEuODU4IDMuMjggMS41MzItLjUzNyAzLjE4MS0xLjQ2OCA0LjM5OS0yLjMwNS4xNDQtLjEuMzI1LS4xMy40OTUtLjA4MSAxLjExNS4zMTggMi4yOS40OCAzLjQ5MS40OCA1LjUxNCAwIDkuOTk5LTMuNDMgOS45OTktNy42NDUgMC00LjIxNi00LjQ4NS03LjY0Ni05Ljk5OS03LjY0NnoiLz48L3N2Zz4=",hover:"data:image/svg+xml;base64,PHN2ZyBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdmlld0JveD0iMCAwIDQ4IDY0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHg9Ii45NiIgeT0iLjk2IiB3aWR0aD0iNDYuMDgiIGhlaWdodD0iNDYuMDgiIHJ4PSI0IiByeT0iNCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjODFjOTI2IiBzdHJva2Utd2lkdGg9IjEuOTIiLz48cGF0aCBkPSJNMjQgNTB2MTIiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzgxYzkyNiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBkPSJNMjEuNTI5IDE5LjUyOGEuNjY3LjY2NyAwIDAgMCAwIC45NDNsMi44NjEgMi44NjFIOGEuNjY3LjY2NyAwIDAgMCAwIDEuMzMzaDE2LjM5bC0yLjg2MSAyLjg2MmEuNjY3LjY2NyAwIDAgMCAuOTQzLjk0Mmw0LTRhLjY3LjY3IDAgMCAwIDAtLjk0NGwtNC00YS42NjcuNjY3IDAgMCAwLS45NDMgMHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMzIuNjY3IDE2djE2YzAgMS4xMDMtLjg5NyAyLTIgMkgxNy4zMzRjLTEuMTAzIDAtMi0uODk3LTItMnYtNS4zMzNhLjY2Ny42NjcgMCAwIDEgMS4zMzMgMFYzMmMwIC4zNjguMjk5LjY2Ny42NjcuNjY3aDEzLjMzM2EuNjY3LjY2NyAwIDAgMCAuNjY3LS42NjdWMTZhLjY2Ny42NjcgMCAwIDAtLjY2Ny0uNjY3SDE3LjMzNGEuNjY3LjY2NyAwIDAgMC0uNjY3LjY2N3Y1LjMzM2EuNjY3LjY2NyAwIDAgMS0xLjMzMyAwVjE2YzAtMS4xMDMuODk3LTIgMi0yaDEzLjMzM2MxLjEwMyAwIDIgLjg5NyAyIDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTMzLjEyOCAxNC44NzNjLS41NjMtLjU2My0xLjMxLS44NzItMi4xMDctLjg3MnMtMS41NDQuMzEtMi4xMDYuODcyTDE2LjE0OSAyNy42MzlhLjQ5Ny40OTcgMCAwIDAtLjExNi4xODNMMTQuMDMgMzMuMzNhLjUuNSAwIDAgMCAuNjQyLjY0bDUuNTA3LTIuMDAyYS41MS41MSAwIDAgMCAuMTgzLS4xMTZsMTIuNzY2LTEyLjc2NmMuNTYzLS41NjIuODcyLTEuMzEuODcyLTIuMTA2IDAtLjc5Ni0uMzEtMS41NDQtLjg3Mi0yLjEwN3pNMTkuNzMyIDMxLjA2NWwtNC4zOTQgMS41OTggMS41OTctNC4zOTQgMTEuMDgyLTExLjA4MyAyLjc5NyAyLjc5N3ptMTIuNjg3LTEyLjY4OC0uODk3Ljg5Ny0yLjc5Ny0yLjc5Ni44OTctLjg5OGMuMzc0LS4zNzMuODctLjU3OCAxLjM5OC0uNTc4czEuMDI1LjIwNSAxLjM5OC41NzhjLjM3NC4zNzQuNTc5Ljg3LjU3OSAxLjM5OHMtLjIwNSAxLjAyNS0uNTc5IDEuMzk4eiIgZmlsbD0iIzgxYzkyNiIvPjwvc3ZnPg==",tap:"data:image/svg+xml;base64,PHN2ZyBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdmlld0JveD0iMCAwIDQ4IDY0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHg9Ii45NiIgeT0iLjk2IiB3aWR0aD0iNDYuMDgiIGhlaWdodD0iNDYuMDgiIHJ4PSI0IiByeT0iNCIgZmlsbD0iI2ZmZiIgc3Ryb2tlPSIjODFjOTI2IiBzdHJva2Utd2lkdGg9IjEuOTIiLz48cGF0aCBkPSJNMjQgNTB2MTIiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzgxYzkyNiIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiLz48cGF0aCBkPSJNMjEuNTI5IDE5LjUyOGEuNjY3LjY2NyAwIDAgMCAwIC45NDNsMi44NjEgMi44NjFIOGEuNjY3LjY2NyAwIDAgMCAwIDEuMzMzaDE2LjM5bC0yLjg2MSAyLjg2MmEuNjY3LjY2NyAwIDAgMCAuOTQzLjk0Mmw0LTRhLjY3LjY3IDAgMCAwIDAtLjk0NGwtNC00YS42NjcuNjY3IDAgMCAwLS45NDMgMHoiIGZpbGw9IiNmZmYiLz48cGF0aCBkPSJNMzIuNjY3IDE2djE2YzAgMS4xMDMtLjg5NyAyLTIgMkgxNy4zMzRjLTEuMTAzIDAtMi0uODk3LTItMnYtNS4zMzNhLjY2Ny42NjcgMCAwIDEgMS4zMzMgMFYzMmMwIC4zNjguMjk5LjY2Ny42NjcuNjY3aDEzLjMzM2EuNjY3LjY2NyAwIDAgMCAuNjY3LS42NjdWMTZhLjY2Ny42NjcgMCAwIDAtLjY2Ny0uNjY3SDE3LjMzNGEuNjY3LjY2NyAwIDAgMC0uNjY3LjY2N3Y1LjMzM2EuNjY3LjY2NyAwIDAgMS0xLjMzMyAwVjE2YzAtMS4xMDMuODk3LTIgMi0yaDEzLjMzM2MxLjEwMyAwIDIgLjg5NyAyIDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTMzLjEyOCAxNC44NzNjLS41NjMtLjU2My0xLjMxLS44NzItMi4xMDctLjg3MnMtMS41NDQuMzEtMi4xMDYuODcyTDE2LjE0OSAyNy42MzlhLjQ5Ny40OTcgMCAwIDAtLjExNi4xODNMMTQuMDMgMzMuMzNhLjUuNSAwIDAgMCAuNjQyLjY0bDUuNTA3LTIuMDAyYS41MS41MSAwIDAgMCAuMTgzLS4xMTZsMTIuNzY2LTEyLjc2NmMuNTYzLS41NjIuODcyLTEuMzEuODcyLTIuMTA2IDAtLjc5Ni0uMzEtMS41NDQtLjg3Mi0yLjEwN3pNMTkuNzMyIDMxLjA2NWwtNC4zOTQgMS41OTggMS41OTctNC4zOTQgMTEuMDgyLTExLjA4MyAyLjc5NyAyLjc5N3ptMTIuNjg3LTEyLjY4OC0uODk3Ljg5Ny0yLjc5Ny0yLjc5Ni44OTctLjg5OGMuMzc0LS4zNzMuODctLjU3OCAxLjM5OC0uNTc4czEuMDI1LjIwNSAxLjM5OC41NzhjLjM3NC4zNzQuNTc5Ljg3LjU3OSAxLjM5OHMtLjIwNSAxLjAyNS0uNTc5IDEuMzk4eiIgZmlsbD0iIzgxYzkyNiIvPjwvc3ZnPg=="},end:{width:48,height:48,image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJzaGFwZS1yZW5kZXJpbmc6Z2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNDgiIGhlaWdodD0iNjQiPjxyZWN0IHN0eWxlPSJmaWxsOiNmZDdiMWYiIHk9IjE2IiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHJ4PSI0IiByeT0iNCIvPjxwYXRoIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTI0IDJ2MTIiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiNmZDdiMWY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLW9wYWNpdHk6MSIvPjxwYXRoIHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOm5vbnplcm87c3Ryb2tlLXdpZHRoOjEiIGQ9Ik0xNS4zMzMgNDhWMzJjMC0xLjEwMy44OTgtMiAyLTJoMTMuMzM0YzEuMTAyIDAgMiAuODk3IDIgMnY1LjMzM2EuNjY3LjY2NyAwIDAgMS0xLjMzNCAwVjMyYS42NjcuNjY3IDAgMCAwLS42NjYtLjY2N0gxNy4zMzNhLjY2Ny42NjcgMCAwIDAtLjY2Ni42Njd2MTZjMCAuMzY4LjI5OC42NjcuNjY2LjY2N2gxMy4zMzRhLjY2Ny42NjcgMCAwIDAgLjY2Ni0uNjY3di01LjMzM2EuNjY3LjY2NyAwIDAgMSAxLjMzNCAwVjQ4YzAgMS4xMDMtLjg5OCAyLTIgMkgxNy4zMzNjLTEuMTAyIDAtMi0uODk3LTItMnoiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZS13aWR0aDoxIiBkPSJtMzcuMTM4IDQ0LjQ3IDQtNGEuNjY3LjY2NyAwIDAgMCAwLS45NDJsLTQtNGEuNjY3LjY2NyAwIDAgMC0uOTQyLjk0M2wyLjg2MSAyLjg2MkgyNGEuNjY3LjY2NyAwIDAgMCAwIDEuMzM0aDE1LjA1N2wtMi44NjEgMi44NjJhLjY2My42NjMgMCAwIDAgMCAuOTQyYy4yNi4yNi42ODIuMjYuOTQyIDB6Ii8+PC9zdmc+",epilogue:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHN0eWxlPSJzaGFwZS1yZW5kZXJpbmc6Z2VvbWV0cmljUHJlY2lzaW9uIiB3aWR0aD0iNDgiIGhlaWdodD0iNjQiPjxyZWN0IHN0eWxlPSJmaWxsOiNmZDdiMWYiIHk9IjE2IiB3aWR0aD0iNDgiIGhlaWdodD0iNDgiIHJ4PSI0IiByeT0iNCIvPjxwYXRoIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTI0IDJ2MTIiIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiNmZDdiMWY7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLW9wYWNpdHk6MSIvPjxwYXRoIHN0eWxlPSJmaWxsOiNmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjEuMTc2MzMyMjQiIGQ9Ik0xMy40MTMgNTAuOTk5YS41ODguNTg4IDAgMCAxLS4zMDItMS4wOTMgNy4zMDYgNy4zMDYgMCAwIDAgMy4xMDYtMy43NGMtMi4xNjItMS42NTUtMy4zOTItMy45NDUtMy4zOTItNi4zNDIgMC0xLjIxLjMwMy0yLjM4NC45MDMtMy40ODcuNTcyLTEuMDUyIDEuMzg4LTEuOTk0IDIuNDI1LTIuOEMxOC4yNTUgMzEuOSAyMS4wNDIgMzEgMjQgMzFjMi45NTkgMCA1Ljc0NS45MDEgNy44NDcgMi41MzYgMS4wMzcuODA2IDEuODUzIDEuNzQ4IDIuNDI1IDIuODAxLjYgMS4xMDIuOTAzIDIuMjc1LjkwMyAzLjQ4N2E3LjIyNyA3LjIyNyAwIDAgMS0uOTAzIDMuNDg2Yy0uNTcyIDEuMDUyLTEuMzg4IDEuOTk0LTIuNDI1IDIuODAxLTIuMTAyIDEuNjM1LTQuODg4IDIuNTM2LTcuODQ3IDIuNTM2YTEzLjg5IDEzLjg5IDAgMCAxLTMuNTQ4LS40NTNjLS41MDQuMzM3LTEuNDQ4LjkzMy0yLjU3NSAxLjQ5NC0xLjc1Ljg3LTMuMjUxIDEuMzEyLTQuNDYzIDEuMzEyWk0yNCAzMi4xNzhjLTUuNTEzIDAtOS45OTkgMy40My05Ljk5OSA3LjY0NiAwIDIuMTM1IDEuMTgyIDQuMTkgMy4yNDIgNS42MzdhLjU5LjU5IDAgMCAxIC4yMy42MzRjLS4xMzcuNTEzLS42MDUgMS45Mi0xLjg1OCAzLjI4IDEuNTMyLS41MzcgMy4xODEtMS40NjggNC4zOTktMi4zMDUuMTQ0LS4xLjMyNS0uMTMuNDk1LS4wODEgMS4xMTUuMzE4IDIuMjkuNDggMy40OTEuNDggNS41MTQgMCA5Ljk5OS0zLjQzIDkuOTk5LTcuNjQ1IDAtNC4yMTYtNC40ODUtNy42NDYtOS45OTktNy42NDZ6Ii8+PC9zdmc+",hover:"data:image/svg+xml;base64,PHN2ZyBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdmlld0JveD0iMCAwIDQ4IDY0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHg9Ii45NiIgeT0iMTYuOTYiIHdpZHRoPSI0Ni4wOCIgaGVpZ2h0PSI0Ni4wOCIgcng9IjQiIHJ5PSI0IiBmaWxsPSIjZmZmIiBzdHJva2U9IiNmZDdiMWYiIHN0cm9rZS13aWR0aD0iMS45MiIvPjxwYXRoIGQ9Ik0yNCAydjEyIiBmaWxsPSJub25lIiBzdHJva2U9IiNmZDdiMWYiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTE1LjMzMyA0OFYzMmMwLTEuMTAzLjg5Ny0yIDItMmgxMy4zMzNjMS4xMDMgMCAyIC44OTcgMiAydjUuMzMzYS42NjcuNjY3IDAgMCAxLTEuMzMzIDBWMzJhLjY2Ny42NjcgMCAwIDAtLjY2Ny0uNjY3SDE3LjMzM2EuNjY3LjY2NyAwIDAgMC0uNjY3LjY2N3YxNmMwIC4zNjguMjk5LjY2Ny42NjcuNjY3aDEzLjMzM2EuNjY3LjY2NyAwIDAgMCAuNjY3LS42Njd2LTUuMzMzYS42NjcuNjY3IDAgMCAxIDEuMzMzIDBWNDhjMCAxLjEwMy0uODk3IDItMiAySDE3LjMzM2MtMS4xMDMgMC0yLS44OTctMi0yeiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0zNy4xMzggNDQuNDcxIDQtNGEuNjY3LjY2NyAwIDAgMCAwLS45NDNsLTQtNGEuNjY3LjY2NyAwIDAgMC0uOTQzLjk0M2wyLjg2MiAyLjg2M0gyNGEuNjY3LjY2NyAwIDAgMCAwIDEuMzMzaDE1LjA1N2wtMi44NjIgMi44NjNhLjY2My42NjMgMCAwIDAgMCAuOTQxYy4yNi4yNi42ODMuMjYuOTQzIDB6IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTMzLjEyOCAzMC44NzNjLS41NjMtLjU2My0xLjMxLS44NzItMi4xMDctLjg3MnMtMS41NDQuMzEtMi4xMDYuODcyTDE2LjE0OSA0My42MzlhLjQ5Ny40OTcgMCAwIDAtLjExNi4xODNMMTQuMDMgNDkuMzNhLjUuNSAwIDAgMCAuNjQyLjY0bDUuNTA3LTIuMDAyYS41MS41MSAwIDAgMCAuMTgzLS4xMTZsMTIuNzY2LTEyLjc2NmMuNTYzLS41NjIuODcyLTEuMzEuODcyLTIuMTA2IDAtLjc5Ni0uMzEtMS41NDQtLjg3Mi0yLjEwN3pNMTkuNzMyIDQ3LjA2NWwtNC4zOTQgMS41OTggMS41OTctNC4zOTQgMTEuMDgyLTExLjA4MyAyLjc5NyAyLjc5N3ptMTIuNjg3LTEyLjY4OC0uODk3Ljg5Ny0yLjc5Ny0yLjc5Ni44OTctLjg5OGMuMzc0LS4zNzMuODctLjU3OCAxLjM5OC0uNTc4czEuMDI1LjIwNSAxLjM5OC41NzhjLjM3NC4zNzQuNTc5Ljg3LjU3OSAxLjM5OHMtLjIwNSAxLjAyNS0uNTc5IDEuMzk4eiIgZmlsbD0iI2ZkN2IxZiIvPjwvc3ZnPg==",tap:"data:image/svg+xml;base64,PHN2ZyBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdmlld0JveD0iMCAwIDQ4IDY0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHg9Ii45NiIgeT0iMTYuOTYiIHdpZHRoPSI0Ni4wOCIgaGVpZ2h0PSI0Ni4wOCIgcng9IjQiIHJ5PSI0IiBmaWxsPSIjZmZmIiBzdHJva2U9IiNmZDdiMWYiIHN0cm9rZS13aWR0aD0iMS45MiIvPjxwYXRoIGQ9Ik0yNCAydjEyIiBmaWxsPSJub25lIiBzdHJva2U9IiNmZDdiMWYiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIyIi8+PHBhdGggZD0iTTE1LjMzMyA0OFYzMmMwLTEuMTAzLjg5Ny0yIDItMmgxMy4zMzNjMS4xMDMgMCAyIC44OTcgMiAydjUuMzMzYS42NjcuNjY3IDAgMCAxLTEuMzMzIDBWMzJhLjY2Ny42NjcgMCAwIDAtLjY2Ny0uNjY3SDE3LjMzM2EuNjY3LjY2NyAwIDAgMC0uNjY3LjY2N3YxNmMwIC4zNjguMjk5LjY2Ny42NjcuNjY3aDEzLjMzM2EuNjY3LjY2NyAwIDAgMCAuNjY3LS42Njd2LTUuMzMzYS42NjcuNjY3IDAgMCAxIDEuMzMzIDBWNDhjMCAxLjEwMy0uODk3IDItMiAySDE3LjMzM2MtMS4xMDMgMC0yLS44OTctMi0yeiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Im0zNy4xMzggNDQuNDcxIDQtNGEuNjY3LjY2NyAwIDAgMCAwLS45NDNsLTQtNGEuNjY3LjY2NyAwIDAgMC0uOTQzLjk0M2wyLjg2MiAyLjg2M0gyNGEuNjY3LjY2NyAwIDAgMCAwIDEuMzMzaDE1LjA1N2wtMi44NjIgMi44NjNhLjY2My42NjMgMCAwIDAgMCAuOTQxYy4yNi4yNi42ODMuMjYuOTQzIDB6IiBmaWxsPSIjZmZmIi8+PHBhdGggZD0iTTMzLjEyOCAzMC44NzNjLS41NjMtLjU2My0xLjMxLS44NzItMi4xMDctLjg3MnMtMS41NDQuMzEtMi4xMDYuODcyTDE2LjE0OSA0My42MzlhLjQ5Ny40OTcgMCAwIDAtLjExNi4xODNMMTQuMDMgNDkuMzNhLjUuNSAwIDAgMCAuNjQyLjY0bDUuNTA3LTIuMDAyYS41MS41MSAwIDAgMCAuMTgzLS4xMTZsMTIuNzY2LTEyLjc2NmMuNTYzLS41NjIuODcyLTEuMzEuODcyLTIuMTA2IDAtLjc5Ni0uMzEtMS41NDQtLjg3Mi0yLjEwN3pNMTkuNzMyIDQ3LjA2NWwtNC4zOTQgMS41OTggMS41OTctNC4zOTQgMTEuMDgyLTExLjA4MyAyLjc5NyAyLjc5N3ptMTIuNjg3LTEyLjY4OC0uODk3Ljg5Ny0yLjc5Ny0yLjc5Ni44OTctLjg5OGMuMzc0LS4zNzMuODctLjU3OCAxLjM5OC0uNTc4czEuMDI1LjIwNSAxLjM5OC41NzhjLjM3NC4zNzQuNTc5Ljg3LjU3OSAxLjM5OHMtLjIwNSAxLjAyNS0uNTc5IDEuMzk4eiIgZmlsbD0iI2ZkN2IxZiIvPjwvc3ZnPg=="},blocks:{undefined:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTkuNSAxN2EuNS41IDAgMCAxLS41LS41di0zYS41LjUgMCAwIDEgLjUtLjVjMy4wMzMgMCA1LjUtMi40NjcgNS41LTUuNVMxMi41MzMgMiA5LjUgMiA0IDQuNDY3IDQgNy41YS41LjUgMCAwIDEtMSAwQzMgMy45MTYgNS45MTYgMSA5LjUgMVMxNiAzLjkxNiAxNiA3LjVhNi41MDkgNi41MDkgMCAwIDEtNiA2LjQ4MVYxNi41YS41LjUgMCAwIDEtLjUuNXptMCAzYS41LjUgMCAwIDEtLjUtLjV2LTFhLjUuNSAwIDAgMSAxIDB2MWEuNS41IDAgMCAxLS41LjV6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",error:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1ODAiIGhlaWdodD0iNTgwIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIHZpZXdCb3g9IjAgMCA1ODAwIDU4MDAiPjxwYXRoIGNsYXNzPSJ0cmlwZXR0by1maWxsIiBkPSJNMjgwMCA0NTAwaDIwMHYyMDBoLTIwMHYtMjAwem0yMDAtMjQwMHYyMDAwaC0yMDBWMjEwMGgyMDB6bTYzLTEzMjdjLTM0LTYwLTk0LTk0LTE2My05NHMtMTI5IDM0LTE2MyA5NEw0MjkgNDgyNmMtMzQgNTgtMzkgMTI4LTUgMTg3IDM4IDY3IDEwMiA4NyAxNzYgODdsNDYzMyAyYzYyIDAgMTE2LTI3IDE0Ny04MyAzMy02MSAyNi0xMzQtOS0xOTNMMzA2MyA3NzN6bTE3My05OCAyMzA4IDQwNTFjMTQ4IDI1NS03IDU3NS0zMTEgNTc1bC00NjUyLTFjLTMwMCAxLTQ3NC0zMTctMzI1LTU3NEwyNTY0IDY3NWMxNTAtMjY0IDUyNS0yNTggNjcyIDB6Ii8+PC9zdmc+",static:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0ibTYuOTYgMTYuMzAzLTEuMjg0LTIuOTk2LS4wMDItLjAwNC0xLjcxNC00YS41LjUgMCAwIDAtLjkyIDBsLTEuNzE0IDQtLjAwMi4wMDRMLjA0IDE2LjMwM2EuNS41IDAgMSAwIC45Mi4zOTRMMi4xMTYgMTRoMi43NjlsMS4xNTYgMi42OTdhLjUuNSAwIDAgMCAuNjU3LjI2Mi41MDEuNTAxIDAgMCAwIC4yNjMtLjY1N3pNMi41NDQgMTNsLjk1Ni0yLjIzMUw0LjQ1NiAxM0gyLjU0NHptMTcuNDE4IDMuMzA4LTIuMDgzLTUtLjAwMi0uMDA0LTIuOTE1LTYuOTk2YS41MDIuNTAyIDAgMCAwLS45MjQgMGwtMi45MTUgNi45OTYtLjAwMi4wMDQtMi4wODMgNWEuNS41IDAgMCAwIC45MjMuMzg1bDEuOTU1LTQuNjkyaDUuMTY3bDEuOTU1IDQuNjkyYS41LjUgMCAxIDAgLjkyMy0uMzg1ek0xMi4zMzMgMTEgMTQuNSA1LjhsMi4xNjcgNS4yaC00LjMzM3oiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",note:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTS41IDE5YS41LjUgMCAwIDEtLjI1Ny0uOTI5IDYuMjExIDYuMjExIDAgMCAwIDIuNjQxLTMuMTc5QzEuMDQ2IDEzLjQ4NSAwIDExLjUzOCAwIDkuNWMwLTEuMDI5LjI1OC0yLjAyNi43NjgtMi45NjQuNDg2LS44OTQgMS4xOC0xLjY5NSAyLjA2MS0yLjM4MUM0LjYxNiAyLjc2NSA2Ljk4NSAxLjk5OSA5LjUgMS45OTlzNC44ODQuNzY2IDYuNjcxIDIuMTU2Yy44ODEuNjg1IDEuNTc1IDEuNDg2IDIuMDYxIDIuMzgxLjUxLjkzNy43NjggMS45MzQuNzY4IDIuOTY0cy0uMjU4IDIuMDI2LS43NjggMi45NjRjLS40ODYuODk0LTEuMTggMS42OTUtMi4wNjEgMi4zODEtMS43ODcgMS4zOS00LjE1NiAyLjE1Ni02LjY3MSAyLjE1Ni0xLjAzMyAwLTIuMDQ3LS4xMjktMy4wMTYtLjM4NWEyMC43NCAyMC43NCAwIDAgMS0yLjE4OSAxLjI3Yy0xLjQ4OC43NC0yLjc2NCAxLjExNS0zLjc5NCAxLjExNXptOS0xNkM0LjgxMyAzIDEgNS45MTYgMSA5LjVjMCAxLjgxNSAxLjAwNSAzLjU2MiAyLjc1NiA0Ljc5Mi4xNzIuMTIxLjI1LjMzNi4xOTYuNTM5LS4xMTcuNDM2LS41MTUgMS42MzMtMS41OCAyLjc4OCAxLjMwMi0uNDU2IDIuNzA0LTEuMjQ3IDMuNzM5LTEuOTU5YS40OTkuNDk5IDAgMCAxIC40MjEtLjA2OUM3LjQ4IDE1Ljg2MiA4LjQ3OSAxNiA5LjUgMTZjNC42ODcgMCA4LjUtMi45MTYgOC41LTYuNVMxNC4xODcgMyA5LjUgM3oiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTEzLjUgN2gtOGEuNS41IDAgMCAxIDAtMWg4YS41LjUgMCAwIDEgMCAxem0wIDJoLThhLjUuNSAwIDAgMSAwLTFoOGEuNS41IDAgMCAxIDAgMXptMCAyaC04YS41LjUgMCAwIDEgMC0xaDhhLjUuNSAwIDAgMSAwIDF6bS0yIDJoLTZhLjUuNSAwIDAgMSAwLTFoNmEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",branch:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgMWgtNWEuNS41IDAgMCAwIDAgMWgzLjc5M2wtOC4xNDYgOC4xNDZhLjUuNSAwIDAgMC0uMTQ2LjM1NHY5YS41LjUgMCAwIDAgMSAwdi04Ljc5M2w4LThWNi41YS41LjUgMCAwIDAgMSAwdi01YS41LjUgMCAwIDAtLjUtLjV6TTcuODU0IDguMTQ2IDEuNzA4IDJoMy43OTNhLjUuNSAwIDAgMCAwLTFoLTVhLjUuNSAwIDAgMC0uNS41djVhLjUuNSAwIDAgMCAxIDBWMi43MDdsNi4xNDYgNi4xNDZhLjQ5OC40OTggMCAwIDAgLjcwOCAwIC41LjUgMCAwIDAgMC0uNzA3eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48L3N2Zz4="},ensuing:{transition:`height .2s ${qd}`}},op={width:993,height:448,margin:16,spacing:150,appearance:{backgroundColor:"rgb(255,255,255)",boxShadow:"0 0 20px 0 rgba(0,0,0,.1), 0 0 20px 0 rgba(0,0,0,.2)",borderRadius:8},overlay:{backgroundColor:"rgba(0,0,0,.2)"},scrollbars:jd(Uu.Color,Uu.Hover,Uu.Focus,Uu.Drag,Uu.Crawl,Bu.Crawl,Yu),title:{fontFamily:Ld.Tutorial.Title.Face,fontSize:Ld.Tutorial.Title.Size,color:Rh,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",padding:"32px 64px 20px"},help:{fontFamily:Ld.Tutorial.Help.Face,fontSize:Ld.Tutorial.Help.Size,color:"#8DABC4",padding:"2px 24px",textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},blocks:{row:{display:"flex",flexDirection:"row",padding:"24px 16px"},appearance:{display:"inline-block",minWidth:240,padding:"90px 24px 16px",borderRight:`1px solid ${Bh}`,backgroundRepeat:"no-repeat",backgroundPosition:"91px 0",backgroundSize:"80px 80px","&:last-child":{borderRight:"none"},"&:nth-child(1)":{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDBtbSIgaGVpZ2h0PSI0MG1tIiB2aWV3Qm94PSIwIDAgNDAgNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTExLjIwMiA3LjU4YTQuMTAxIDQuMTAxIDAgMCAwLTQuMTAxIDQuMTAxIDQuMTAxIDQuMTAxIDAgMCAwIDIuNTQ2IDMuNzkzdi0zLjAzYzAtLjkzLjQ2NS0xLjU0OCAxLjY3Mi0xLjU0OCAxLjIwNyAwIDEuNjcxLjYxOCAxLjY3MSAxLjU0OHYyLjkyNWE0LjEwMSA0LjEwMSAwIDAgMCAyLjMxMy0zLjY4OCA0LjEwMSA0LjEwMSAwIDAgMC00LjEwMS00LjF6IiBmaWxsPSIjOGRhYmM0Ii8+PGcgZmlsbD0ibm9uZSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9Ii43MDYiPjxnIHN0cm9rZT0iIzE5MTkxOSI+PHBhdGggZD0iTTEyLjk5MiAyMS4wNjl2LTguNDRjMC0uOTMtLjQ2NC0xLjU0OC0xLjY3Mi0xLjU0OC0xLjIwNyAwLTEuNjcxLjYxOS0xLjY3MSAxLjU0OXYxMi41MDNtOS40MjMtMi43MXYtMy4wMzRjMC0xLjI4My0uMy0yLjEwNi0xLjQzOS0yLjIxNC0uOTYyLS4wOTItMS40MzcuMjkzLTEuNDM3LjI5MyIvPjxwYXRoIGQ9Ik0xOS4wNzIgMTguODg2YzEuNjgxLS4yODEgMi4yMS42NCAyLjMwMyAyLjExNC4wOTMgMS40NzMuMTI4IDIuMjc0LjEyOCA0LjEzMyAwIDQuNDgyLTIuNDYzIDcuMDU3LTIuNDYzIDcuMDU3TTkuNTA2IDE5LjkwM2MtLjE3OC0uMDU0LS42OS0uMTAzLTEuMDYxLS4xMDMtLjgzOCAwLTEuNDY4LjY2Mi0xLjU5NCAxLjg0NiAwIDAtLjE2NyAxLjIzLS4xOTMgMi44NDMtLjAzNSAyLjA5Mi4zMzcgMy4wMjQgMS4xNyA0LjIyNSAxLjE0MyAxLjY1MSAzLjUxNiAzLjUzMiAzLjUxNiAzLjUzMm00Ljk4OC0xMC44NjNWMTguNTdjMC0xLjI4My0uMzQ3LTIuNDM2LTEuNjY5LTIuNDM2LTEuMTIxIDAtMS42NjkuMjk0LTEuNjY5LjI5NCIvPjwvZz48cGF0aCBkPSJNMjAuNjkyIDguMjk2djYuMzgybS0xLjMxLTUuMzk0IDEuMzA4LTEuMzA4IDEuMzA4IDEuMzA4bS4wMDQgNC40MDUtMS4zMDggMS4zMDgtMS4zMDgtMS4zMDhtLTEuODg0LTIuMjAyaDYuMzhtLTUuMzkgMS4zMDctMS4zMDgtMS4zMDggMS4zMDgtMS4zMDZtNC40LS4wMDEgMS4zMDggMS4zMDgtMS4zMDggMS4zMDYiIHN0cm9rZT0iIzhkYWJjNCIvPjwvZz48L3N2Zz4=")'},"&:nth-child(2)":{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDBtbSIgaGVpZ2h0PSI0MG1tIiB2aWV3Qm94PSIwIDAgNDAgNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTI0LjA4OSAxMS42MzhhMy41MjUgMy41MjUgMCAxIDEtNy4wNTEgMCAzLjUyNiAzLjUyNiAwIDAgMSA3LjA1IDB6IiBmaWxsPSJub25lIiBzdHJva2U9IiM4ZGFiYzQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIuODg3Ii8+PHBhdGggZD0iTTIyLjE3OSAxMS42MzhoLTEuNTV2LTEuNTQ5IiBmaWxsPSJub25lIiBzdHJva2U9IiM4ZGFiYzQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIuODg3Ii8+PHBhdGggZD0iTTExLjIwNyA3LjU4YTQuMTAxIDQuMTAxIDAgMCAwLTQuMTAxIDQuMTAyIDQuMTAxIDQuMTAxIDAgMCAwIDIuNTQ2IDMuNzkzdi0zLjAzYzAtLjkzLjQ2NC0xLjU0OSAxLjY3MS0xLjU0OSAxLjIwOCAwIDEuNjcyLjYxOSAxLjY3MiAxLjU0OXYyLjkyNGE0LjEwMSA0LjEwMSAwIDAgMCAyLjMxMy0zLjY4NyA0LjEwMSA0LjEwMSAwIDAgMC00LjEwMS00LjEwMXoiIGZpbGw9IiM4ZGFiYzQiLz48ZyBmaWxsPSJub25lIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iLjcwNiI+PGcgc3Ryb2tlPSIjMTkxOTE5Ij48cGF0aCBkPSJNMTIuOTkgMjEuMDY5di04LjQ0YzAtLjkzLS40NjQtMS41NDgtMS42Ny0xLjU0OC0xLjIwOCAwLTEuNjcyLjYxOC0xLjY3MiAxLjU0OXYxMi41MDNtOS40MjEtMi43MDl2LTMuMDM1YzAtMS4yODMtLjMtMi4xMDUtMS40MzktMi4yMTMtLjk2Mi0uMDkyLTEuNDM3LjI5Mi0xLjQzNy4yOTIiLz48cGF0aCBkPSJNMTkuMDY5IDE4Ljg4NmMxLjY4LS4yODEgMi4yMS42NCAyLjMwMiAyLjExNC4wOTQgMS40NzMuMTI5IDIuMjczLjEyOSA0LjEzMiAwIDQuNDgzLTIuNDYzIDcuMDU3LTIuNDYzIDcuMDU3TTkuNTA2IDE5LjkwM2MtLjE3OC0uMDU0LS42OS0uMTA0LTEuMDYxLS4xMDQtLjgzOCAwLTEuNDY4LjY2My0xLjU5NSAxLjg0NyAwIDAtLjE2NyAxLjIzLS4xOTMgMi44NDMtLjAzNCAyLjA5Mi4zMzggMy4wMjMgMS4xNzIgNC4yMjUgMS4xNDIgMS42NSAzLjUxNSAzLjUzMiAzLjUxNSAzLjUzMm00Ljk4NS0xMC44NjNWMTguNTdjMC0xLjI4My0uMzQ4LTIuNDM2LTEuNjctMi40MzYtMS4xMiAwLTEuNjY4LjI5My0xLjY2OC4yOTMiLz48L2c+PHBhdGggZD0iTTI5LjY4OSA4LjI5NnY2LjM4MW0tMS4zMS01LjM5MyAxLjMwOC0xLjMwOCAxLjMwNyAxLjMwOG0uMDA1IDQuNDA2LTEuMzA4IDEuMzA4LTEuMzA4LTEuMzA4bS0xLjg4NC0yLjIwM2g2LjM4bS01LjM5IDEuMzA3LTEuMzA4LTEuMzA4IDEuMzA4LTEuMzA2bTQuNCAwIDEuMzA4IDEuMzA3LTEuMzA4IDEuMzA3IiBzdHJva2U9IiM4ZGFiYzQiLz48L2c+PC9zdmc+")'},"&:nth-child(3)":{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDBtbSIgaGVpZ2h0PSI0MG1tIiB2aWV3Qm94PSIwIDAgNDAgNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9Ii43MDYiPjxnIHN0cm9rZT0iIzE5MTkxOSI+PHBhdGggZD0iTTEyLjk5MiAyMS4wNjl2LTguNDRjMC0uOTMtLjQ2NC0xLjU0OC0xLjY3Mi0xLjU0OC0xLjIwNyAwLTEuNjcuNjE5LTEuNjcgMS41NDl2MTIuNTAzbTkuNDIyLTIuNzF2LTMuMDM0YzAtMS4yODMtLjMtMi4xMDYtMS40MzctMi4yMTQtLjk2Mi0uMDkyLTEuNDM5LjI5My0xLjQzOS4yOTMiLz48cGF0aCBkPSJNMTkuMDcyIDE4Ljg4NmMxLjY4MS0uMjgxIDIuMjEyLjY0IDIuMzA0IDIuMTE0YTUzLjc4IDUzLjc4IDAgMCAxIC4xMjcgNC4xMzNjMCA0LjQ4Mi0yLjQ2MSA3LjA1Ny0yLjQ2MSA3LjA1N005LjUwNiAxOS45MDNjLS4xNzgtLjA1NC0uNjg5LS4xMDMtMS4wNi0uMTAzLS44MzggMC0xLjQ2Ny42NjItMS41OTUgMS44NDYgMCAwLS4xNjYgMS4yMy0uMTkzIDIuODQzLS4wMzMgMi4wOTIuMzM5IDMuMDI0IDEuMTcgNC4yMjUgMS4xNDUgMS42NTEgMy41MTYgMy41MzIgMy41MTYgMy41MzJtNC45ODgtMTAuODYzVjE4LjU3YzAtMS4yODMtLjM0Ny0yLjQzNi0xLjY2OS0yLjQzNi0xLjEyMyAwLTEuNjcuMjk0LTEuNjcuMjk0Ii8+PC9nPjxwYXRoIGQ9Ik03LjA0NyAxMi42NzVhNC4yNzIgNC4yNzIgMCAwIDEgOC41NDQgMCIgc3Ryb2tlPSIjOGRhYmM0Ii8+PHBhdGggZD0iTTQuNTYzIDEyLjY3NWE2Ljc1NyA2Ljc1NyAwIDEgMSAxMy41MTQgMCIgc3Ryb2tlPSIjOGRhYmM0Ii8+PC9nPjwvc3ZnPg==")'},"&:nth-child(4)":{backgroundImage:'url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDBtbSIgaGVpZ2h0PSI0MG1tIiB2aWV3Qm94PSIwIDAgNDAgNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9Ii43MDYiPjxnIHN0cm9rZT0iIzE5MTkxOSI+PHBhdGggZD0iTTEyLjk5MiAyMS4wNjl2LTguNDRjMC0uOTMtLjQ2NC0xLjU0OC0xLjY3Mi0xLjU0OC0xLjIwNyAwLTEuNjcuNjE5LTEuNjcgMS41NDl2MTIuNTAzbTkuNDIyLTIuNzF2LTMuMDM0YzAtMS4yODMtLjMtMi4xMDYtMS40MzctMi4yMTQtLjk2Mi0uMDkyLTEuNDM5LjI5My0xLjQzOS4yOTMiLz48cGF0aCBkPSJNMTkuMDcyIDE4Ljg4NmMxLjY4MS0uMjgxIDIuMjEyLjY0IDIuMzA0IDIuMTE0YTUzLjc4IDUzLjc4IDAgMCAxIC4xMjcgNC4xMzNjMCA0LjQ4Mi0yLjQ2MSA3LjA1Ny0yLjQ2MSA3LjA1N005LjUwNiAxOS45MDNjLS4xNzgtLjA1NC0uNjg5LS4xMDMtMS4wNi0uMTAzLS44MzggMC0xLjQ2Ny42NjItMS41OTUgMS44NDYgMCAwLS4xNjYgMS4yMy0uMTkzIDIuODQzLS4wMzMgMi4wOTIuMzM5IDMuMDI0IDEuMTcgNC4yMjUgMS4xNDUgMS42NTEgMy41MTYgMy41MzIgMy41MTYgMy41MzJtNC45ODgtMTAuODYzVjE4LjU3YzAtMS4yODMtLjM0Ny0yLjQzNi0xLjY2OS0yLjQzNi0xLjEyMyAwLTEuNjcuMjk0LTEuNjcuMjk0Ii8+PC9nPjxwYXRoIGQ9Ik03LjA0NyAxMi42NzVhNC4yNzIgNC4yNzIgMCAwIDEgOC41NDQgMCIgc3Ryb2tlPSIjOGRhYmM0Ii8+PC9nPjwvc3ZnPg==")'}},title:{fontFamily:Ld.Tutorial.Blocks.Title.Face,fontSize:Ld.Tutorial.Blocks.Title.Size,color:Hh,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap"},subtitle:{marginTop:4,fontFamily:Ld.Tutorial.Blocks.Subtitle.Face,fontSize:Ld.Tutorial.Blocks.Subtitle.Size,color:Fh,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap"},text:{marginTop:12,lineHeight:"20px",fontFamily:Ld.Tutorial.Blocks.Text.Face,fontSize:Ld.Tutorial.Blocks.Text.Size,color:Uh,textAlign:"center"}},close:{appearance:{position:"absolute",right:8,top:8,width:48,height:48,borderRadius:24,padding:"11px 12px",fontSize:25,color:Rh},hover:{backgroundColor:Rh,color:"rgb(255,255,255)"},tap:{backgroundColor:Rh,color:"rgb(255,255,255)"}}},np={background:"rgb(236,245,253)",loader:{color:"rgb(44,64,90)",size:15},fonts:Ld.families,menu:Cd,zoombar:Dd,forms:$d,navigator:Qd,map:sp,tutorial:op},rp="tripetto",ap="4.5.0",lp="https://tripetto.com",cp="https://docs.tripetto.com",up=`https://unpkg.com/${rp}@${ap}/fonts/`;class hp extends vt{constructor(e){super(),this.m_bOpen=!1,this.m_pProperties=e||{}}static open(e,t){return new hp(t).open(e)}get style(){return this.m_pProperties.style||np}get panel(){if(this.m_pPlugin&&this.m_pPlugin.map){const e=this.m_pPlugin.map.renderer;if(e instanceof Qh)return e.layer}}get layer(){return this.m_pPlugin&&this.m_pPlugin.layer||void 0}get definition(){if(this.m_pPlugin&&this.m_pPlugin.map)return this.m_pPlugin.map.definition}set definition(e){e?this.load(e):this.clear()}get name(){return this.m_pPlugin&&this.m_pPlugin.map&&this.m_pPlugin.map.name||""}set name(e){this.m_pPlugin&&this.m_pPlugin.map&&(this.m_pPlugin.map.name=e)}get language(){return this.m_pPlugin&&this.m_pPlugin.map&&this.m_pPlugin.map.language||""}set language(e){this.m_pPlugin&&this.m_pPlugin.map&&(this.m_pPlugin.map.language=e)}run(){if(!this.m_bOpen)return;const e=T(this.m_pProperties.supportURL)&&!this.m_pProperties.supportURL?"":W(this.m_pProperties.supportURL,cp),t=Q(this.m_pProperties.disableRestoreButton,!0),i=Q(this.m_pProperties.disableClearButton,!0),s=[];var o;this.m_pProperties.helpTopics&&(o=this.m_pProperties.helpTopics,dc=o),this.m_pProperties.disableLogo||s.push(new wd(this.style,"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIj48ZGVmcz48Y2xpcFBhdGggY2xpcFBhdGhVbml0cz0idXNlclNwYWNlT25Vc2UiIGlkPSJhIj48cGF0aCBkPSJNMCA2MTJoNzkyVjBIMFoiLz48L2NsaXBQYXRoPjwvZGVmcz48ZyBjbGlwLXBhdGg9InVybCgjYSkiIHRyYW5zZm9ybT0ibWF0cml4KDIuODk5NzYgMCAwIC0yLjg4MzczIC0yOTguMzE0IDExMzIuNDIpIj48cGF0aCBkPSJtMCAwIDQxLjcxMiAyNC4wODMtMjAuODU2IDEyLjA0MUwtLjAwMSA0OC4xNjVaIiBzdHlsZT0iZmlsbDojODgyODhmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMzAuNzk4IDM0NC41MjgpIi8+PHBhdGggZD0ibTAgMCA0MS43MTMgMjQuMDgzTDAgNDguMTY2WiIgc3R5bGU9ImZpbGw6I2NhMWYyNTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg5LjA4NSAzMjAuNDQ1KSIvPjxwYXRoIGQ9Im0wIDAgMjAuODU2LTEyLjA0Mi0uMDAxIDQ4LjE2NUwwIDI0LjA4MmwtMjAuODU2LTEyLjA0WiIgc3R5bGU9ImZpbGw6I2NlM2Q5NTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjA5Ljk0MiAzNTYuNTcpIi8+PHBhdGggZD0iTTAgMHY0OC4xNjVsLTQxLjcxMS0yNC4wODJaIiBzdHlsZT0iZmlsbDojZGExZTI1O2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxODkuMDg1IDMyMC40NDUpIi8+PHBhdGggZD0ibTAgMCAyMC44NTUgMTIuMDQxIDIwLjg1NyAxMi4wNDItMjAuODU3IDEyLjA0MUwtLjAwMSA0OC4xNjVaIiBzdHlsZT0iZmlsbDojZWQyNTI0O2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDcuMzc0IDM0NC41MjgpIi8+PHBhdGggZD0ibTAgMC0uMDAxIDI1Ljc3N3YyMi4zODhsLTIwLjg1Ni0xMi4wNDEtMjAuODU2LTEyLjA0MVoiIHN0eWxlPSJmaWxsOiNmMDYwMjI7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE0Ny4zNzQgMzQ0LjUyOCkiLz48cGF0aCBkPSJtMCAwLTQxLjcxMi0yNC4wODNMMC00OC4xNjZ2MjQuMDgzeiIgc3R5bGU9ImZpbGw6IzAwNjQ5MztmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjc1LjMwMyAzNjMuODAzKSIvPjxwYXRoIGQ9Im0wIDAtNDEuNzExIDI0LjA4M3YtNDguMTY1bDIwLjg1NSAxMi4wNHoiIHN0eWxlPSJmaWxsOiMwMDdmYjQ7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3NS4zMDMgMzE1LjYzNykiLz48cGF0aCBkPSJNMCAwdjI0LjA4MkwtNDEuNzEzIDAgMC0yNC4wODNaIiBzdHlsZT0iZmlsbDojMDBhMWI2O2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMzMuNTkxIDMxNS42MzgpIi8+PHBhdGggZD0ibTAgMCAuMDAxLTQ4LjE2NSA0MS43MTIgMjQuMDgzLTIwLjg1NyAxMi4wNDF6IiBzdHlsZT0iZmlsbDojMDBiMGQ0O2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOTEuODc4IDMxNS42MzgpIi8+PHBhdGggZD0ibTAgMC0yMC44NTUtMTIuMDQxIDQxLjcxMS0yNC4wODN2NDguMTY2eiIgc3R5bGU9ImZpbGw6IzRhYzRkYztmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjEyLjczNSAyNzkuNTE0KSIvPjxwYXRoIGQ9Im0wIDAtMjIuNTgxIDEzLjAzNy0xOS4xMyAxMS4wNDYtLjAwMS00OC4xNjYgMjAuODU2IDEyLjA0MnoiIHN0eWxlPSJmaWxsOiMyY2I4OWE7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIzMy41OSAyNDMuMzkpIi8+PHBhdGggZD0ibTAgMC00MS43MTMgMjQuMDgzdi00OC4xNjZaIiBzdHlsZT0iZmlsbDojZjM3YjIwO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDQuNTg4IDMzOS43MjgpIi8+PHBhdGggZD0ibTAgMC00MS43MTMtMjQuMDgzIDIwLjg1Ni0xMi4wNDJMMC00OC4xNjZaIiBzdHlsZT0iZmlsbDojZjY5MjFlO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZTpub25lIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNDQuNTg4IDMzOS43MjgpIi8+PHBhdGggZD0ibTAgMC0uMDAxLTI0LjA4M0wwLTQ4LjE2Nmw0MS43MTEgMjQuMDgzWiIgc3R5bGU9ImZpbGw6I2ZmY2MwNztmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ0LjU4OCAzMzkuNzI4KSIvPjxwYXRoIGQ9Im0wIDAtMjAuODU2LTEyLjA0MSA0MS43MTMtMjQuMDgyLS4wMDEgNDguMTY0WiIgc3R5bGU9ImZpbGw6I2ZmZTcwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTY1LjQ0NCAzMDMuNjAzKSIvPjxwYXRoIGQ9Im0wIDAgLjAwMSA0OC4xNjYtNDEuNzEzLTI0LjA4NCAyMC44NTYtMTIuMDQxWiIgc3R5bGU9ImZpbGw6I2EwY2MzYTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTg2LjMgMjE5LjMxNSkiLz48cGF0aCBkPSJtMCAwIDE5LjUwNiAxMS4yNjMgMjIuMjA3IDEyLjgyMS0yMC44NTcgMTIuMDRMMCA0OC4xNjZWMjQuMDgzWiIgc3R5bGU9ImZpbGw6I2I3ZDMzNDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTQ0LjU4NyAyNDMuMzk3KSIvPjwvZz48L3N2Zz4=",lp)),this.m_pProperties.disableSaveButton&&t&&i||(s.length>0&&s.push(new xd(this.style)),this.m_pProperties.disableSaveButton||s.push(this.m_pSave=new Md(this.style,59054,(()=>this.save())).disable()),t||s.push(this.m_pRestore=new Md(this.style,59608,(()=>this.restore())).disable()),i||s.push(new Md(this.style,59009,(()=>this.clear())))),this.m_pProperties.disableEditButton&&!this.m_pProperties.previewURL||(s.length>0&&s.push(new xd(this.style)),this.m_pProperties.disableEditButton||s.push(new Md(this.style,58893,(()=>this.edit()))),this.m_pProperties.previewURL&&s.push(new wd(this.style,59288,this.m_pProperties.previewURL))),""===e&&this.m_pProperties.disableTutorialButton||(s.length>0&&s.push(new xd(this.style)),""!==e&&s.push(new wd(this.style,59154,e)),this.m_pProperties.disableTutorialButton||s.push(new Md(this.style,59699,(()=>{this.m_pPlugin&&Gl.open(this.m_pPlugin.layer,this.style.tutorial)})))),this.m_pProperties.disableCloseButton||(s.length>0&&s.push(new xd(this.style)),s.push(new Md(this.style,59701,(()=>this.close())))),this.m_pPlugin=(this.m_pProperties.layer||(this.m_pHost=this.m_pHost||new oa({parent:this.m_pProperties.element&&on.of(this.m_pProperties.element)||void 0}))).component(new kd(this.style,this.m_pProperties.tier,s,!this.m_pProperties.disablePrologue,!this.m_pProperties.disableEpilogue,!this.m_pProperties.disableZoombar,!this.m_pProperties.disableOpenCloseAnimation,this.m_pProperties.zoom||"fit",Q(this.m_pProperties.centering,!0),this.m_pProperties.controls||"right",this.m_pProperties.layer,this.m_pProperties.layerConfiguration,((e,t,i,s)=>{let o;switch(t){case"properties":case"branch":case"cluster":case"node":case"condition":o={action:e,type:t,ref:i};break;case"prologue":case"epilogue":o={action:e,type:t,ref:i,subscribe:s}}this.emitHook("OnEdit",{builder:this,data:o}),this.m_pProperties.onEdit&&this.m_pProperties.onEdit(o)}),(()=>{this.m_pPlugin=void 0,this.emitHook("OnClose",{builder:this}),this.onClose&&this.onClose(this),this.m_pProperties.onClose&&this.m_pProperties.onClose(this)}))),this.m_pPlugin.layer.element.styles={backgroundColor:this.style.background},this.m_pPlugin.layer.hook("OnShow","synchronous",(()=>{this.emitHook("OnOpen",{builder:this}),this.onOpen&&this.onOpen(this),this.m_pProperties.onOpen&&this.m_pProperties.onOpen(this),this.m_pProperties.showTutorial&&this.m_pPlugin&&this.m_pPlugin.tutorial()})),this.m_pPlugin.layer.hook("OnCalculated","synchronous",(()=>{var e;if(null===(e=this.m_pPlugin)||void 0===e?void 0:e.map){const e=this.m_pPlugin.map;this.emitHook("OnPreview",{builder:this,get definition(){return e.definition}}),this.m_pProperties.onPreview&&this.m_pProperties.onPreview(e.definition,this)}})),this.m_pPlugin.layer.hook("OnReady","synchronous",(()=>{if(this.definition&&this.emitHook("OnReady",{builder:this,definition:this.definition}),this.onReady&&this.onReady(this),this.m_pProperties.onReady&&this.m_pProperties.onReady(this),this.definition&&(this.emitHook("OnRename",{builder:this,get definition(){return this.definition},name:this.name}),this.m_pPlugin&&this.m_pPlugin.map)){const e=this.m_pPlugin.map;this.m_pPlugin.map.hook("OnRename","synchronous",(()=>{this.emitHook("OnRename",{builder:this,get definition(){return e.definition},name:this.name})})),this.m_pPlugin.map.hook("OnChange","synchronous",(()=>{if(this.emitHook("OnChange",{builder:this,get definition(){return e.definition}}),this.emitHook("OnPreview",{builder:this,get definition(){return e.definition}}),this.onChange||this.m_pProperties.onChange||this.m_pProperties.onPreview){const t=e.definition;this.onChange&&this.onChange(t,this),this.m_pProperties.onChange&&this.m_pProperties.onChange(t,this),this.m_pProperties.onPreview&&this.m_pProperties.onPreview(t,this)}this.m_pSave&&this.m_pSave.enable(),this.m_pRestore&&this.m_pRestore.enable()}))}})),this.m_pProperties.layer||this.m_pProperties.element&&"body"!==on.of(this.m_pProperties.element).tagName||(go.attachListener(window,"resize",(()=>this.resize()),void 0,this),go.attachListener(window,"orientationchange",(()=>this.resize()),void 0,this),this.m_pPlugin.layer.hook("OnClose","synchronous",(()=>{go.detachListener(window,"resize",this),go.detachListener(window,"orientationchange",this)}))),this.m_pPlugin.map&&(this.m_pPlugin.map.hook("OnError","synchronous",(e=>{this.emitHook("OnError",{builder:this,erroneousBlocks:e.erroneousBlocks,get missingBlockTypes(){return e.missingBlockTypes}}),this.onError&&this.onError(e.erroneousBlocks,e.missingBlockTypes,this),this.m_pProperties.onError&&this.m_pProperties.onError(e.erroneousBlocks,e.missingBlockTypes,this)})),this.m_pDefinition?this.m_pPlugin.map.definition=this.m_pDefinition:this.m_pDefinition=this.m_pPlugin.map.definition)}open(e){if(!this.m_bOpen){const t=this.m_pProperties.fonts||up;this.m_bOpen=!0,this.m_pDefinition=e,this.emitHook("OnLoad",{builder:this}),this.onLoad&&this.onLoad(this),this.m_pProperties.onLoad&&this.m_pProperties.onLoad(this),e&&this.m_pPlugin&&this.m_pPlugin.map&&!K(this.m_pPlugin.map.definition,e,!0)&&(this.emitHook("OnChange",{builder:this,definition:e}),this.emitHook("OnPreview",{builder:this,definition:e}),this.onChange&&this.onChange(e,this),this.m_pProperties.onChange&&this.m_pProperties.onChange(e,this),this.m_pProperties.onPreview&&this.m_pProperties.onPreview(e,this)),this.m_pProperties.locale&&il.locale.load(this.m_pProperties.locale),this.m_pProperties.translations&&il.load(this.m_pProperties.translations),this.m_pProperties.tier&&this.m_pProperties.tier.name&&cs.flag(this.m_pProperties.tier.name,...this.m_pProperties.tier.blocks),!this.m_pProperties.layer||"inherit"!==t||this.m_pProperties.namespace?No.run({first:()=>{if(this.m_pProperties.namespace){const e=this.m_pProperties.namespace.identifier;Nd.use(e,this.m_pProperties.namespace.umd||this.m_pProperties.namespace.url,this.m_pProperties.namespace.umd?"umd":this.m_pProperties.namespace.url?"url":void 0,(t=>{var i;t?(null===(i=this.m_pProperties.namespace)||void 0===i?void 0:i.onLoad)&&this.m_pProperties.namespace.onLoad(cs.get(e)):console.error(`Tripetto: Namespace '${e}' is not loaded!`),No.observe()}))}return"inherit"===t||id.load([wl(`${t}linearicons/`),...this.style.fonts?this.style.fonts(t):[]],(e=>{e||console.error(`Tripetto: Not all fonts could be loaded from '${t}'!`),No.observe()}))},when:()=>("inherit"===t||id.isReady)&&(!this.m_pProperties.namespace||Nd.isLoaded),do:()=>this.run(),desktopClass:!this.m_pProperties.element}):this.run()}return this}resize(){return this.m_pHost&&this.m_pHost.update(),this}load(e){return this.m_pDefinition=e,this.m_pPlugin&&this.m_pPlugin.map&&(this.m_pPlugin.map.definition=e,this.emitHook("OnChange",{builder:this,definition:e}),this.emitHook("OnPreview",{builder:this,definition:e}),this.onChange&&this.onChange(e,this),this.m_pProperties.onChange&&this.m_pProperties.onChange(e,this),this.m_pProperties.onPreview&&this.m_pProperties.onPreview(e,this)),this.m_pSave&&this.m_pSave.disable(),this.m_pRestore&&this.m_pRestore.disable(),this}reload(){return this.m_pPlugin&&this.m_pPlugin.map&&this.m_pPlugin.map.reload(),this}restore(){return this.m_pDefinition&&(this.m_pPlugin&&this.m_pPlugin.map&&(this.m_pPlugin.map.definition=this.m_pDefinition),this.m_pSave&&this.m_pSave.disable(),this.m_pRestore&&this.m_pRestore.disable()),this}save(){return this.m_pPlugin&&this.m_pPlugin.map&&(this.m_pDefinition=this.m_pPlugin.map.definition),this.m_pSave&&this.m_pSave.disable(),this.m_pRestore&&this.m_pRestore.disable(),this.m_pDefinition&&(this.emitHook("OnSave",{builder:this,definition:this.m_pDefinition}),this.onSave&&this.onSave(this.m_pDefinition,this),this.m_pProperties.onSave&&this.m_pProperties.onSave(this.m_pDefinition,this)),this.m_pDefinition}edit(e="properties",t){if(this.m_pPlugin&&this.m_pPlugin.map){const i=this.m_pPlugin.map.renderer;if(i instanceof Qh){const s=i.layer;"properties"===e?_d.openPanel(s,this.m_pPlugin.map):"prologue"===e&&!this.m_pProperties.disablePrologue&&this.m_pPlugin.map.layout instanceof $h?this.m_pPlugin.map.layout.prologue():"epilogue"===e&&!t&&!this.m_pProperties.disableEpilogue&&this.m_pPlugin.map.layout instanceof $h?this.m_pPlugin.map.layout.epilogue():this.m_pPlugin.map.forEach((i=>i.id===t&&(i instanceof js?"branch"===e?uc.openPanel(s,i,!0):"epilogue"===e&&!this.m_pProperties.disableEpilogue&&i.layout instanceof Cc&&i.layout.epilogue():i instanceof Ms&&"cluster"===e?Dc.openPanel(s,i,!0):i instanceof ys&&"node"===e?Yh.openPanel(s,i,!0):i instanceof Ds&&"condition"===e&&Vh.openPanel(s,i,!0),!0)))}}return this}clear(){return this.m_pPlugin&&this.m_pPlugin.map&&this.m_pPlugin.map.reset(),this}close(){return this.m_bOpen=!1,this.m_pPlugin&&this.m_pPlugin.close(),this}useNamespace(e,t,i,s=!0,o=!1){return new Promise(((n,r)=>{Nd.use(e,t,i,(t=>{var i;t&&(null===(i=this.m_pProperties.namespace)||void 0===i?void 0:i.onLoad)&&this.m_pProperties.namespace.onLoad(cs.get(e)),this.reload(),t?n():r()}),s,o)}))}tutorial(){return this.m_pPlugin&&this.m_pPlugin.tutorial(),this}createPanel(e,t="normal"){let i;return Z(this.panel).createPanel((t=>{i=e(t,this,this.style)}),ta.configuration.width("normal"===t?this.style.forms.width.normal:"small"===t?this.style.forms.width.small:"compact"===t?this.style.forms.width.compact:t).animation(Br.Zoom).autoCloseChildPanels("stroke")),i}stylesEditor(e,t,i,s,o=!1,n=!0,r){return this.createPanel(((a,l,c)=>new Wl(a,e,t,i,s,o,n,r,void 0,c)),400)}l10nEditor(e,t,i,s){return this.createPanel(((o,n,r)=>new Bl(o,e,n,t,i,s,void 0,r)),600)}}dr.setTrustedTypesPolicy("tripetto");var dp,pp,mp=Object.freeze({__proto__:null,get NAME(){return by},get VERSION(){return fy},get Slots(){return Cb},get SHA2(){return Xg},get AES(){return gy},get L10n(){return qb},get Context(){return jb},get Data(){return Eb},get Errors(){return Lb},get Instance(){return Ub},get Value(){return Tb},get Slot(){return Mb},get Condition(){return ef},get ConditionBlock(){return Mf},get ConditionBlocksNamespace(){return wf},get Branch(){return tf},get Cluster(){return sf},get RunnerFoundation(){return Ff},get Node(){return vf},get NodeBlock(){return ff},get HeadlessBlock(){return yf},get NodeBlocksNamespace(){return Af},get markdownify(){return df},get markdownifyTo(){return gf},get markdownifyToString(){return pf},get markdownifyToPlainText(){return bf},get markdownifyToURL(){return mf},get MarkdownFeatures(){return of},get isVariable(){return lf},get Storyline(){return Lf},get Moment(){return _f},get Import(){return Nf},get Export(){return kf},get Namespaces(){return jf},get mountNamespace(){return Tf},get unmountNamespace(){return zf},get tripetto(){return Uf},get block(){return Uf},get condition(){return Bf},get validator(){return Yf},get destroy(){return Zf},get fingerprint(){return Rf},get calculateFingerprintAndStencil(){return Pf},get stencil(){return Vf},get checksum(){return Wf},get powSolve(){return Kf},get powVerify(){return ey},get powHashRate(){return ty},get powSpentTime(){return iy},get powDuration(){return sy},get Await(){return ab},get Callback(){return rb},get arrayItem(){return Wp},get arraySize(){return Vp},get assert(){return Jp},get call(){return wm},get callAsync(){return xm},get callBind(){return km},get callEx(){return Im},get callFunction(){return Nm},get callPromise(){return Sm},get cancelFrame(){return Em},get cancelInterval(){return Um},get cancelPromise(){return jm},get cancelTick(){return Cm},get cancelTimeout(){return Pm},get cancelUIInterval(){return Ym},get cancelUITimeout(){return Hm},get cast(){return Kp},get castToBoolean(){return sm},get castToFloat(){return im},get castToNumber(){return tm},get castToString(){return em},get clone(){return om},get compare(){return am},get count(){return gm},get createInstanceOf(){return sg},get each(){return lm},get eachReverse(){return cm},get extend(){return nm},get extendImmutable(){return rm},get filter(){return fm},get find(){return Mm},get findFirst(){return ym},get findLast(){return vm},get firstArrayItem(){return Gp},get forEach(){return bm},get get(){return qm},get getAny(){return Xm},get getBoolean(){return Jm},get getFloat(){return tg},get getNumber(){return eg},get getString(){return Km},get has(){return dm},get hasOneOrMore(){return mm},get hasOnly(){return pm},get isArray(){return Bp},get isArrayOrCollection(){return Zp},get isBoolean(){return Up},get isCollection(){return Yp},get isDate(){return Qp},get isDefined(){return Ap},get isError(){return Xp},get isFilledString(){return Pp},get isFloat(){return Fp},get isFunction(){return zp},get isNull(){return jp},get isNumber(){return Rp},get isNumberFinite(){return Hp},get isObject(){return Tp},get isRegEx(){return qp},get isString(){return Ep},get isUndefined(){return Dp},get lastArrayItem(){return $p},get map(){return um},get noop(){return Cp},get reduce(){return hm},get scheduleAction(){return Gm},get scheduleAndCancelFrame(){return zm},get scheduleAndCancelPromise(){return Am},get scheduleAndCancelTick(){return Lm},get scheduleAnimation(){return Vm},get scheduleEvent(){return Wm},get scheduleFrame(){return Tm},get scheduleInterval(){return Fm},get scheduleNumberOfFrames(){return Zm},get schedulePromise(){return Dm},get scheduleTick(){return _m},get scheduleTimeout(){return Om},get scheduleUIInterval(){return Bm},get scheduleUITimeout(){return Rm},get set(){return $m},get setAny(){return Qm},get stringLength(){return Op},get Console(){return og},get Environment(){return ng},get Num(){return dp},get Str(){return pp},get DateTime(){return Lp},get Flags(){return rg},get Enumerator(){return bp},get Debounce(){return cg},get Limiter(){return ag},get Throttle(){return lg},get Stack(){return ug},get DEBUG(){return hg},get disableDebugging(){return pg},get enableDebugging(){return dg}});!function(e){function t(e,t){const i=Math.pow(10,t||0);return Hp(e)?Math.round(tm((e*i).toFixed(1)))/i:0}e.round=function(e){return Hp(e)?Math.round(e):0},e.floor=function(e){return Hp(e)?Math.floor(e):0},e.ceil=function(e){return Hp(e)?Math.ceil(e):0},e.conform=t,e.positive=function(e){return Hp(e)&&e>0?e:0},e.negative=function(e){return Hp(e)&&e<0?e:0},e.max=function(e,t){return Hp(e)&&Hp(t)?Math.max(e,t):Hp(e)?e:Hp(t)?t:0},e.maxL=function(...e){const t=Vp(e);let i=NaN;if(t>0)for(let s=0;s<t;s++){const t=e[s];Hp(t)&&(!Hp(i)||t>i)&&(i=t)}return Hp(i)?i:0},e.min=function(e,t){return Hp(e)&&Hp(t)?Math.min(e,t):Hp(e)?e:Hp(t)?t:0},e.minL=function(...e){const t=Vp(e);let i=NaN;if(t>0)for(let s=0;s<t;s++){const t=e[s];Hp(t)&&(!Hp(i)||t<i)&&(i=t)}return Hp(i)?i:0},e.range=function(e,t,i){return Hp(e)?(Hp(i)&&t>i&&(t=i),Hp(t)&&e<t?t:Hp(i)&&e>i?i:e):Hp(t)?t:Hp(i)?i:0},e.inRange=function(e,t,i,s=!0,o=!1){return Hp(e)&&(s?e>=t:e>t)&&(o?e<=i:e<i)},e.format=function(e,i=0,s=",",o=".",n="-"){let r,a,l,c="";if(-1!==`${e="auto"===i?im(e):t(im(e),i)}`.indexOf("e"))if(-1!==`${e}`.indexOf("e-")){const t=e;for(let i=20;i>=0&&(e=t.toFixed(i).replace(/(0*$)/g,"")||"0",parseFloat(e)!==t);i--);}else e=e<0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER;if(r=em(e).replace("-",n).split("."),a=r[0],l=Vp(r)>=2?r[1]:"",Pp(s))for(let e=Op(a)-1,t=0;e>=0;e--)c=a.charAt(e)+(3===t&&a.charAt(e)!==n?s:"")+c,3===t&&(t=0),t++;else c=a;if(("auto"===i||i>0)&&((l||"auto"!==i)&&(c+=o+l),"auto"!==i))for(i-=Op(l);i>0;)c+="0",i--;return c}}(dp||(dp={})),function(e){function t(e){return Pp(e)?e.toLowerCase():""}function i(e){return Pp(e)?e.replace(/(^\s*)|(\s*$)/g,""):""}function s(e){return Pp(e)?e.replace(/(\s*$)/g,""):""}function o(e){return Pp(e)?e.replace(/[^\S\r\n\.]{2,}/g," ").replace(/\n[^\S\r\n\.]/g,"\n"):""}function n(e){return o(i(e))}function r(e,t,i=""){return e=em(e),Hp(t)&&t>0&&t<Op(e)?Pp(i)?s(e.substr(0,t))+i:e.substr(0,t):e}function a(e,i,s="",o=!1){let n="",r=0;return e=em(e),i=em(i),lm(o?t(e).split(t(i)):e.split(i),(t=>{const o=Op(t);n+=(r>0?s:"")+e.substr(r,o),r+=o+Op(i)})),n}function l(e,t="",i,...s){let o="";if(e){let a,l;Yp(e)?a=e:Bp(e)||(l=Object.keys(e));const c=(l||a||e).length;for(let u=0;u<c;u++)o+=(""===o?"":t)+em(i?wm(i,...(n=l?l[u]:u,r=s.slice(0),Ep(n)?r.unshift(e[n]):a?r.unshift(a.item(n)):r.unshift(e[n]),r)):l?e[l[u]]:a?a.item(u):e[u])}var n,r;return o}e.lowercase=t,e.uppercase=function(e){return Pp(e)?e.toUpperCase():""},e.capitalize=function(e,i="first-character",s=!1){if(s&&(e=t(e)),Pp(e)){const t="each-sentence"===i?e.split("."):[e];return lm(t,(e=>{let t="";if("each-word"!==i){let i=e.toString(),s=0;for(;s<Op(i);){const e=i.charAt(s);if(" "!==e&&"\t"!==e&&"\r"!==e&&"\n"!==e&&"."!==e){i=i.substr(0,s)+i.substr(s,1).toUpperCase()+i.substr(s+1);break}s++}t+=(0===s?" ":"")+i}else t=e.replace(/(^|[\s`~!@#$%^&+\-*=_()[\]{};:'"\\|,<.>\/?])[^\s`~!@#$%^&+\-*=_()[\]{};:'"\\|,<.>\/?]/g,(e=>e.toUpperCase()));return t}),{replace:!0}),n(l(t,"."))}return""},e.trim=i,e.trimLeft=function(e){return Pp(e)?e.replace(/(^\s*)/g,""):""},e.trimRight=s,e.trimMultiple=o,e.sanitize=n,e.removeWhitespaces=function(e){return Pp(e)?e.replace(/\s/g,""):""},e.limit=r,e.replace=a,e.replaceMultiple=function(e,t,i,s){return e=em(e),lm(t,(t=>{e=a(e,t,i,s)})),e},e.makeHTMLSafe=function(e){return em(e).replace(/[<>]/g,(e=>"<"===e?"&lt;":"&gt;"))},e.CRLFToHTML=function(e){return em(e).replace(/(\r\n|[\r\n])/g,"<br />")},e.iterateToString=l,e.extract=function(e,i){const s=em(i.left);if(e=em(e),Pp(s)){const o=(i.ignoreCase?t(e):e).indexOf(i.ignoreCase?t(s):s);if(-1!==o&&""!==(e=e.substr(o+Op(s)))){const s=Pp(i.right)?i.fromEnd?(i.ignoreCase?t(e):e).lastIndexOf(i.ignoreCase?t(i.right):i.right):(i.ignoreCase?t(e):e).indexOf(i.ignoreCase?t(i.right):i.right):Op(e);if(-1!==s)return e.substr(0,s)}}return""},e.fill=function(e,t){let i="";for(e=em(e),t=tm(t);t>0;)i+=e,t--;return i},e.padLeft=function(e,t,i,s,o){let n=em(o||Hp(e)?tm(e):e);if(Ep(t)&&Hp(i)&&Op(t)>=1){let r,a="";if(r=(o||Hp(e))&&"-"===n.charAt(0),s&&Op(n)>i)return n.substr(Op(n)-i);if(Op(n)>=i)return n;r&&(n=n.substr(1));do{a+=t}while(Op(a)<i);return(r?"-":"")+(a+n).substr(Op(a+n)+(r?1:0)-i)}return n},e.padRight=function(e,t,i,s){let o=em(e);if(Ep(t)&&Hp(i)&&Op(t)>=1){if(o=em(o),s&&Op(o)>i)return r(o,i);if(Op(o)>=i)return o;for(;Op(o)<i;)o=r(o+t,i)}return o},e.djb2Hash=function(e,t=""){const i=Op(e);let s=0,o=5381;for(;s<i;)o=33*o^e.charCodeAt(s),s++;return t+(o>>>0).toString(36)}}(pp||(pp={}));class gp{constructor(e){this.m_fnScheduler=e,this.m_pStack=[],this.m_nCall=0,this.m_nOffset=0}call(){const e=this.m_pStack.length;for(let t=0;t<e;t++){const e=this.m_pStack[t];e&&e.callee&&e.callee(...e.arguments)}this.m_pStack.splice(0,e),this.m_pStack.length>0?(this.m_nOffset=this.m_nCall-this.m_pStack.length+1,this.m_fnScheduler((()=>this.call()))):this.m_nOffset=0}schedule(e,...t){return e?(this.m_nCall++,this.m_pStack.push({callee:e,arguments:t}),0===this.m_nOffset&&(this.m_nOffset=this.m_nCall,this.m_fnScheduler((()=>this.call()))),this.m_nCall):0}cancel(e){this.m_nOffset>0&&e>=this.m_nOffset&&e<=this.m_nCall&&(this.m_pStack[e-this.m_nOffset]=void 0)}}class bp{constructor(){this.m_nEnumerator=0}static get n(){return this.m_nEnumerator===Number.MAX_VALUE&&(this.m_nEnumerator=0),++this.m_nEnumerator}get n(){return this.m_nEnumerator===Number.MAX_VALUE&&(this.m_nEnumerator=0),++this.m_nEnumerator}set n(e){e>this.m_nEnumerator&&e<=Number.MAX_VALUE&&(this.m_nEnumerator=e)}static recycle(){this.m_nEnumerator=Number.MAX_VALUE}recycle(){this.m_nEnumerator=Number.MAX_VALUE}}bp.m_nEnumerator=0;const fp="undefined"!=typeof process&&process&&process.nextTick?e=>{process.nextTick(e)}:"undefined"!=typeof Promise&&Promise?e=>{Promise.resolve().then(e)}:e=>{setTimeout(e,0)},yp="undefined"!=typeof Promise&&Promise?e=>{Promise.resolve().then(e)}:"undefined"!=typeof process&&process&&process.nextTick?e=>{process.nextTick(e)}:e=>{setTimeout(e,0)},vp="undefined"!=typeof requestAnimationFrame?e=>requestAnimationFrame(e)||0:e=>setTimeout(e,1e3/60)||0,Mp="undefined"!=typeof window,wp="undefined"==typeof window&&"undefined"!=typeof process,xp="undefined"!=typeof self&&"function"==typeof postMessage,Sp=new gp(fp),Ip=new gp(vp),kp=new gp(yp),Np={},_p=new bp;class Lp{constructor(e=new Date){e instanceof Lp?this.m_pDate=new Date(e.time):Qp(e)?this.m_pDate=new Date(e.getTime()):this.m_pDate=new Date(e)}static get now(){return Date.now()}static get precise(){return"undefined"!=typeof performance&&performance.now?performance.now():Date.now()}static get UTC(){return this.now-60*(new Date).getTimezoneOffset()*1e3}static get today(){const e=new Date;return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getTime()}static get UTCToday(){const e=new Date,t=new Date;return t.setUTCFullYear(e.getFullYear()),t.setUTCMonth(e.getMonth()),t.setUTCDate(e.getDate()),t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0),t.getTime()}static isFuture(e){return this.now<e}static isPast(e){return this.now>=e}static elapsed(e,t=!1){return(sm(t)?this.precise:this.now)-e}static timerReset(){const e=this.m_nStamp;return this.m_nStamp=this.precise,e}static get timerElapsed(){return this.precise-this.timerReset()}static get timerStamp(){return this.formatElapsed()}static format(e="dd-MM-yyyy HH:mm:ss.SSS",t=this.now,i=!1,s){const o=new Date(t);return pp.sanitize(e.replace(/('[^']+')|('')|(HH)|(H)|(hh)|(h)|(mm)|(m)|(ss)|(s)|(SSS)|(S)|(zzzz)|(z)|(dd)|(d)|(MMMMM)|(MMMM)|(MMM)|(MM)|(M)|(LLLLL)|(LLLL)|(LLL)|(EEEEE)|(EEEE)|(EEE)|(EE)|(E)|(ccccc)|(cccc)|(ccc)|(cc)|(yyyy)|(yy)|(y)|(a)/g,(e=>{switch(e){case"HH":return pp.padLeft(em(i?o.getUTCHours():o.getHours()),"0",2);case"H":return em(i?o.getUTCHours():o.getHours());case"hh":return pp.padLeft(em(((i?o.getUTCHours():o.getHours())+11)%12+1),"0",2);case"h":return em(((i?o.getUTCHours():o.getHours())+11)%12+1);case"a":return s?em((i?o.getUTCHours():o.getHours())>=12?s.PM:s.AM):"";case"mm":return pp.padLeft(em(i?o.getUTCMinutes():o.getMinutes()),"0",2);case"m":return em(i?o.getUTCMinutes():o.getMinutes());case"ss":return pp.padLeft(em(i?o.getUTCSeconds():o.getSeconds()),"0",2);case"s":return em(i?o.getUTCSeconds():o.getSeconds());case"SSS":return pp.padLeft(em(i?o.getUTCMilliseconds():o.getMilliseconds()),"0",3);case"S":return em(i?o.getUTCMilliseconds():o.getMilliseconds());case"z":case"zzzz":return"";case"dd":return pp.padLeft(em(i?o.getUTCDate():o.getDate()),"0",2);case"d":return em(i?o.getUTCDate():o.getDate());case"yyyy":case"y":return em(i?o.getUTCFullYear():o.getFullYear());case"yy":return pp.padLeft(em(i?o.getUTCFullYear():o.getFullYear()),"0",2,!0);case"MMMMM":return em(Wp(s?s.monthsFormattedNarrow:void 0,i?o.getUTCMonth():o.getMonth(),"?"));case"MMMM":return em(Wp(s?s.monthsFormattedWide:void 0,i?o.getUTCMonth():o.getMonth(),"?"));case"MMM":return em(Wp(s?s.monthsFormattedAbbreviated:void 0,i?o.getUTCMonth():o.getMonth(),"?"));case"MM":return pp.padLeft(em((i?o.getUTCMonth():o.getMonth())+1),"0",2);case"M":return em((i?o.getUTCMonth():o.getMonth())+1);case"LLLLL":return em(Wp(s?s.monthsNominativeNarrow:void 0,i?o.getUTCMonth():o.getMonth(),"?"));case"LLLL":return em(Wp(s?s.monthsNominativeWide:void 0,i?o.getUTCMonth():o.getMonth(),"?"));case"LLL":return em(Wp(s?s.monthsNominativeAbbreviated:void 0,i?o.getUTCMonth():o.getMonth(),"?"));case"EEEEE":return em(Wp(s?s.weekdaysFormattedNarrow:void 0,i?o.getUTCDay():o.getDay(),"?"));case"EEEE":return em(Wp(s?s.weekdaysFormattedWide:void 0,i?o.getUTCDay():o.getDay(),"?"));case"EEE":return em(Wp(s?s.weekdaysFormattedAbbreviated:void 0,i?o.getUTCDay():o.getDay(),"?"));case"EE":return em(Wp(s?s.weekdaysFormattedShort:void 0,i?o.getUTCDay():o.getDay(),"?"));case"E":return em(i?o.getUTCDay():o.getDay());case"ccccc":return em(Wp(s?s.weekdaysNominativeNarrow:void 0,i?o.getUTCDay():o.getDay(),"?"));case"cccc":return em(Wp(s?s.weekdaysNominativeWide:void 0,i?o.getUTCDay():o.getDay(),"?"));case"ccc":return em(Wp(s?s.weekdaysNominativeAbbreviated:void 0,i?o.getUTCDay():o.getDay(),"?"));case"cc":return em(Wp(s?s.weekdaysNominativeShort:void 0,i?o.getUTCDay():o.getDay(),"?"));case"''":return"'"}return e.replace(/'/g,"")})))}static formatElapsed(e="H'h':mm'm':ss's'.SSS'ms'.uuu's'",t,i,s){let o,n,r,a,l,c;return t=dp.conform(im(t,this.timerElapsed),3),o=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4),r=Math.floor(t%36e5%6e4/1e3),c=em(dp.conform(t%36e5%6e4%1e3,3)).split("."),a=c[0],l=Vp(c)>=2?c[1]:"0",pp.sanitize(e.replace(/('[^']+')|('')|(HH)|(H)|(hh)|(h)|(mm)|(m)|(ss)|(s)|(SSS)|(S)|(uuu)|(u)|(zzzz)|(z)|(dd)|(d)|(MMMMM)|(MMMM)|(MMM)|(MM)|(M)|(LLLLL)|(LLLL)|(LLL)|(EEEEE)|(EEEE)|(EEE)|(EE)|(E)|(ccccc)|(cccc)|(ccc)|(cc)|(yyyy)|(yy)|(y)|(a)/g,(e=>{switch(e){case"HH":return pp.padLeft(em(o),"0",2);case"H":return em(o);case"hh":return pp.padLeft(em((o+11)%12+1),"0",2);case"h":return em((o+11)%12+1);case"a":return em(o>=12?s:i);case"mm":return pp.padLeft(em(n),"0",2);case"m":return em(n);case"ss":return pp.padLeft(em(r),"0",2);case"s":return em(r);case"SSS":return pp.padLeft(a,"0",3);case"S":return a;case"uuu":return pp.padLeft(l,"0",3);case"u":return l;case"z":case"zzzz":return"";case"''":return"'"}return e.replace(/'/g,"")})))}static get log(){return this.format("dd-MM-yyyy HH:mm:ss.SSS")}static get logTime(){return this.format("HH:mm:ss.SSS")}get date(){return this.m_pDate}get time(){return this.date.getTime()}set time(e){this.m_pDate=new Date(e)}}function Cp(){}function Dp(e){return void 0===e}function Ap(e){return!Dp(e)}function jp(e){return Dp(e)||"object"==typeof e&&null===e}function Tp(e){return"object"==typeof e&&null!==e&&!Bp(e)}function zp(e){return"function"==typeof e}function Ep(e){return"string"==typeof e}function Op(e){return Ep(e)?e.length:0}function Pp(e){return Op(e)>0}function Rp(e){return"number"==typeof e&&!isNaN(e)}function Hp(e,t,i){return"number"==typeof e&&isFinite(e)&&("number"!=typeof t||e>=t)&&("number"!=typeof i||e<=i)}function Fp(e,t,i){return"number"==typeof e&&isFinite(e)&&e%1!=0&&("number"!=typeof t||e>=t)&&("number"!=typeof i||e<=i)}function Up(e){return"boolean"==typeof e}function Bp(e){return Array.isArray(e)}function Yp(e){return(Tp(e)||Bp(e)||zp(e))&&"number"==typeof e.length&&"function"==typeof e.item}function Zp(e){return Bp(e)||Yp(e)}function Vp(e){return Bp(e)||Yp(e)?e.length:Tp(e)?Vp(Object.keys(e)):0}function Wp(e,t,i){if(t=tm(t),e)if(Bp(e)){if(t>=0&&t<Vp(e))return e[t]}else if(Yp(e)){if(t>=0&&t<Vp(e))return e.item(t)}else if(Tp(e)){const i=Object.keys(e);if(t>=0&&t<Vp(i))return e[i[t]]}return Ap(i)?i:void 0}function Gp(e,t){if(e)if(Bp(e)){if(Vp(e)>0)return e[0]}else if(Yp(e)){if(Vp(e)>0)return e.item(0)}else if(Tp(e)){const t=Object.keys(e);if(Vp(t)>0)return e[t[0]]}return Ap(t)?t:void 0}function $p(e,t){if(e)if(Bp(e)){const t=Vp(e);if(t>0)return e[t-1]}else if(Yp(e)){const t=Vp(e);if(t>0)return e.item(t-1)}else if(Tp(e)){const t=Object.keys(e),i=Vp(t);if(i>0)return e[t[i-1]]}return Ap(t)?t:void 0}function Qp(e){return Tp(e)&&"[object Date]"===Object.prototype.toString.call(e)}function qp(e){return Tp(e)&&"[object RegExp]"===Object.prototype.toString.call(e)}function Xp(e){return e instanceof Error}function Jp(e,t){if(jp(e))throw new Error(t||"Assert failed!");return e}function Kp(e){return e}function em(e,t){return Ep(e)?e:Ap(e)&&!jp(e)&&zp(e.toString)?e.toString():Ep(t)?t:""}function tm(e,t){if(Hp(e))return Math.round(e);if(Up(e))return e?1:0;if(Ap(e)&&!jp(e)&&zp(e.toString)){const t=parseFloat(e.toString().replace(/[^-e\d.]/g,""));if(Hp(t))return Math.round(t)}return Hp(t)?Math.round(t):0}function im(e,t){if(Hp(e))return parseFloat(`${e}`);if(Up(e))return e?1:0;if(Ap(e)&&!jp(e)&&zp(e.toString)){const t=parseFloat(e.toString().replace(/[^-e\d.]/g,""));if(Hp(t))return t}return Hp(t)?t:0}function sm(e,t){if(Up(e))return e;if(Hp(e))return!!e;if(Ap(e)&&!jp(e)&&zp(e.toString)){const t=e.toString();return!("0"===t||"false"===t.toLowerCase())}return!!t}function om(e){return Object.create(e)}function nm(e,...t){const i=e;return lm(t,(e=>{lm(e,((e,t)=>{Tp(e)&&Tp(i[t])?nm(i[t],e):i[t]=e}),{keys:!0})})),i}function rm(...e){const t={};return lm(e,(e=>{lm(e,((e,i)=>{Tp(e)&&Tp(t[i])?t[i]=rm(t[i],e):t[i]=e}),{keys:!0})})),t}function am(e,t,i){if(Tp(e)||Bp(e)){let s,o,n=!1,r=!1;if(Tp(e)!==Tp(t)||Bp(e)!==Bp(t))return!1;if(Yp(e)?n=!0:Bp(e)||(s=Object.keys(e)),Yp(t)?r=!0:Bp(t)||(o=Object.keys(t)),n!==r||Bp(s)!==Bp(o)||(s||e).length!==(o||t).length)return!1;const a=(s||e).length;for(let l=0;l<a;l++){const a=s?s[l]:l,c=o?o[l]:l;if(a!==c||!am(n?e.item(a):e[a],r?t.item(c):t[c],i))return!1}return!0}return!(typeof e!=typeof t||jp(e)!==jp(t)||i&&e!==t)}function lm(e,t,i){if(e&&t){const s=i&&i.arguments?i.arguments:void 0,o=!(!i||!i.replace);let n;if(n=i&&i.keys?s?(e,i)=>t(e,i,...s):(e,i)=>t(e,i):s?e=>t(e,...s):e=>t(e),Bp(e))e.forEach(((t,i)=>{const s=n(t,i);o&&(e[i]=s)}));else if(Yp(e)){const t=e,i=t.length;for(let e=0;e<i;e++)n(t.item(e),e)}else Object.keys(e).forEach((t=>{const i=n(e[t],t);o&&(e[t]=i)}))}return e}function cm(e,t,i){if(e){let n,r;Yp(e)?n=e:Bp(e)||(r=Object.keys(e));for(let a=(r||n||e).length-1;a>=0;a--){const l=wm(t,...(s=r?r[a]:a,o=i&&i.arguments?i.arguments.slice(0):[],i&&i.keys&&o.unshift(s),Ep(s)?o.unshift(e[s]):n?o.unshift(n.item(s)):o.unshift(e[s]),o));i&&i.replace&&!n&&(r?e[r[a]]=l:e[a]=l)}}var s,o;return e}function um(e,t,...i){const s=[];if(e){let r,a;Yp(e)?r=e:Bp(e)||(a=Object.keys(e));const l=(a||r||e).length;for(let c=0;c<l;c++)s.push(wm(t,...(o=a?a[c]:c,n=i.slice(0),Ep(o)?n.unshift(e[o]):r?n.unshift(r.item(o)):n.unshift(e[o]),n)))}var o,n;return s}function hm(e,t,i,...s){if(e){let r,a;Yp(e)?r=e:Bp(e)||(a=Object.keys(e));const l=(a||r||e).length;for(let c=0;c<l;c++)i=wm(t,...(o=a?a[c]:c,n=s.slice(0),Ep(o)?n.unshift(e[o]):r?n.unshift(r.item(o)):n.unshift(e[o]),n.unshift(i),n))}var o,n;return i}function dm(e,t,i=!1){if(e){let s,o;Yp(e)?s=e:Bp(e)||(o=Object.keys(e));const n=(o||s||e).length;for(let r=0;r<n;r++){let n=!1;if(n=sm(wm(t,o?e[o[r]]:s?s.item(r):e[r])),i===n)return i}return!i}return!1}function pm(e,t){return dm(e,t,!1)}function mm(e,t){return dm(e,t,!0)}function gm(e,t){let i=0;if(e){let s,o;Yp(e)?s=e:Bp(e)||(o=Object.keys(e));const n=(o||s||e).length;for(let r=0;r<n;r++){let n=!0;zp(t)&&(n=sm(wm(t,o?e[o[r]]:s?s.item(r):e[r]))),n&&i++}}return i}function bm(e,t,i){const s=!(!i||"first"!==i.return),o=!(!i||"last"!==i.return);let n;if(i&&i.return&&"matches"!==i.return||(n=[]),e){let l,c;Yp(e)?l=e:Bp(e)||(c=Object.keys(e));const u=(c||l||e).length;for(let h=o?u-1:0;o&&h>=0||!o&&h<u;o?h--:h++){let u=!0;if(u=sm(wm(t,c?e[c[h]]:l?l.item(h):e[h])),u){if(i&&zp(i.do)){const t=wm(i.do,...(r=c?c[h]:h,a=i&&i.arguments?i.arguments.slice(0):[],Ep(r)?a.unshift(e[r]):l?a.unshift(l.item(r)):a.unshift(e[r]),a));i&&i.replace&&!l&&(c?e[c[h]]=t:e[h]=t)}if(s||o)return c?e[c[h]]:l?l.item(h):e[h];n&&(c?n.push(e[c[h]]):l?n.push(l.item(h)):n.push(e[h]))}}}var r,a;return n}function fm(e,t){return bm(e,t)}function ym(e,t){return bm(e,t,{return:"first"})}function vm(e,t){return bm(e,t,{return:"last"})}function Mm(e,t){if(e){let i,s;Yp(e)?i=e:Bp(e)||(s=Object.keys(e));const o=(s||i||e).length;for(let n=0;n<o;n++){let o=!0;if(o=sm(wm(t,s?e[s[n]]:i?i.item(n):e[n])),o)return s?s[n]:n}}}function wm(e,...t){if(e)return e(...t)}function xm(e,...t){Sp.schedule(e,...t)}function Sm(e,...t){kp.schedule(e,...t)}function Im(e,t,...i){t?wm(e,...i):xm(e,...i)}function km(e,t,...i){if(e&&t)return e.bind(t)(...i)}function Nm(e,...t){if(zp(e))return e(...t)}function _m(e,...t){return Sp.schedule(e,...t)}function Lm(e,t,...i){return Cm(t),_m(e,...i)}function Cm(e){return Sp.cancel(e),0}function Dm(e,...t){return kp.schedule(e,...t)}function Am(e,t,...i){return jm(t),Dm(e,...i)}function jm(e){return kp.cancel(e),0}function Tm(e,...t){return Ip.schedule(e,...t)}function zm(e,t,...i){return Em(t),Tm(e,...i)}function Em(e){return Ip.cancel(e),0}function Om(e,t,...i){return((e,t=0)=>setTimeout(e,t)||0)((()=>e(...i)),t)}function Pm(e){return 0!==e&&clearTimeout(e),0}function Rm(e,t,...i){const s=_p.n+1,o=em(s),n=Lp.precise,r=()=>{Np[o]&&(Lp.elapsed(n,!0)>=t?(Np[o](...i),ig(Np,o)):Tm(r))};return Np[o]=e,Tm(r),s}function Hm(e){return 0!==e&&ig(Np,em(e)),0}function Fm(e,t,...i){return((e,t=0)=>setInterval(e,t)||0)((()=>e(...i)),t)}function Um(e){return 0!==e&&clearInterval(e),0}function Bm(e,t,...i){const s=_p.n+1,o=em(s);let n=Lp.precise;const r=()=>{Np[o]&&(Lp.elapsed(n,!0)>=t&&(Np[o](...i),n=Lp.precise),Tm(r))};return Np[o]=e,Tm(r),s}function Ym(e){return 0!==e&&ig(Np,em(e)),0}function Zm(e,t,...i){e&&(t>0?Tm((()=>Zm(e,--t,...i))):e(...i))}function Vm(e,...t){Zm(e,2,...t)}function Wm(e,...t){Zm(e,2,...t)}function Gm(e,...t){Zm(e,5,...t)}function $m(e,t,i){return e[t]=i}function Qm(e,t,i){return(Tp(e)||zp(e))&&Pp(t)?e[t]=i:i}function qm(e,t){return e[t]}function Xm(e,t){if(e&&Pp(t))return e[t]}function Jm(e,t,i=!1){return sm(Xm(e,t),i)}function Km(e,t,i=""){return em(Xm(e,t),i)}function eg(e,t,i=0){return tm(Xm(e,t),i)}function tg(e,t,i=0){return im(Xm(e,t),i)}function ig(e,t){return!!(e&&Pp(t)&&Ap(e[t]))&&delete e[t]}function sg(e,...t){return new e(...t)}var og,ng;Lp.m_nStamp=0,function(e){function t(){return pp.padRight(Lp.logTime," ",16,!0)}function i(e){return pp.padRight(e," ",23,!0)}e.time=t,e.module=i,e.log=function(e,s){return t()+i(e)+s}}(og||(og={})),function(e){e.isBrowser=Mp,e.isNode=wp,e.isWebWorker=xp}(ng||(ng={}));class rg{constructor(){this.m_nFlag=1}get flag(){const e=this.m_nFlag;return this.m_nFlag=this.m_nFlag<<1,e}static convert(...e){let t=1;return hm(e,((e,i)=>(e|=i?t:0,t*=2,e)),0)||0}static has(e,t){let i=1;if(t>0)for(;--t;)i*=2;return sm(e&i)}}class ag{constructor(e,t,i){this.m_pArguments=[],this.m_nTime=0,this.m_nHandle=0,this.m_bPromise=!1,this.m_bFrame=!1,this.m_bDoubleFrame=!1,this.m_sHold=!1,this.m_bThrottle="debounce"!==e,this.m_bDelay="throttle-delay"===e,this.m_fnCallback=t,this.m_nTimeout="tick"!==i&&"promise"!==i&&"frame"!==i&&"double-frame"!==i&&i||0,this.m_bPromise="promise"===i,this.m_bFrame="frame"===i||"double-frame"===i,this.m_bDoubleFrame="double-frame"===i}call(){this.m_nHandle=0,this.m_fnCallback(...this.m_pArguments)}invoke(...e){if(!this.m_sHold&&this.m_bThrottle&&this.m_nTimeout>0){if(!this.m_bDelay)return void(Lp.elapsed(this.m_nTime,!0)>=this.m_nTimeout&&(this.m_pArguments=e,this.m_nTime=Lp.precise,this.call()));0!==this.m_nHandle&&Lp.elapsed(this.m_nTime,!0)>=this.m_nTimeout&&(this.cancel(),this.call())}this.m_pArguments=e,this.m_bThrottle||this.cancel(),this.m_sHold?this.m_sHold="hold":0===this.m_nHandle&&(this.m_nTime=Lp.precise,this.m_nTimeout>0?this.m_nHandle=Om((()=>this.call()),this.m_nTimeout):this.m_bPromise?this.m_nHandle=Dm((()=>this.call())):this.m_bFrame?this.m_nHandle=Tm((()=>{this.m_bDoubleFrame?this.m_nHandle=Tm((()=>this.call())):this.call()})):this.m_nHandle=_m((()=>this.call())))}cancel(){const e=this.m_nTimeout>0?Pm:this.m_bPromise?jm:this.m_bFrame?Em:Cm;this.m_nHandle=e(this.m_nHandle)}flush(){this.m_sHold=!1,0!==this.m_nHandle&&(this.cancel(),this.call())}hold(){this.m_sHold=this.m_sHold||(0===this.m_nHandle?"catch":"hold"),this.cancel()}release(e=!1){if(this.m_sHold){const t="hold"===this.m_sHold;this.m_sHold=!1,t&&(e?this.call():this.invoke(...this.m_pArguments))}}}class lg extends ag{constructor(e,t="frame",i=!0){super(i?"throttle-delay":"throttle",e,t)}}class cg extends ag{constructor(e,t="frame"){super("debounce",e,t)}}class ug{constructor(){this.m_pStack=[]}add(e){this.m_pStack.push(e)}flush(){const e=this.m_pStack.length;for(let t=0;t<e;t++)this.m_pStack[t]()}clear(){this.m_pStack=[]}flushAndClear(){this.flush(),this.clear()}}let hg=!1;function dg(){hg=!0}function pg(){hg=!1}class mg{constructor(){this.m_pHooks={},this.m_nHookTimeout=0,this.m_nHookFrame=0,this.m_nHookBuffer=0}get isHookBufferEnabled(){return this.m_nHookBuffer>0}getHooks(e){const t=this.m_pHooks[e];if(t)return t}prepareHookPayload(e,t,i){return e.hook={name:t,type:i},e}scheduleHook(e){"framed"===e?this.m_nHookFrame=zm((()=>this.invokeHook(e)),this.m_nHookFrame):this.m_nHookTimeout=Lm((()=>this.invokeHook(e)),this.m_nHookTimeout)}invokeHook(e){const t=new ug;lm(this.m_pHooks,((i,s)=>{lm(i,(i=>{i.type===e&&lm(i.payloads.splice(0,i.payloads.length),(e=>{t.add((()=>i.hook(this.prepareHookPayload(e,s,i.type))))}))}))}),{keys:!0}),t.flush()}attachHook(e,t,i,s,o){(this.getHooks(e)||(this.m_pHooks[e]=[])).push({hook:i,payloads:[],type:t,group:s,context:o})}hook(e,t,i,s){return this.attachHook(e,t,i,!1,s),this}groupedHook(e,t,i,s){return this.attachHook(e,t,i,!0,s),this}emitHook(e,t,i="fifo"){const s=this.getHooks(e);if(s){const o=new ug;return lm(s,(s=>{"synchronous"!==s.type||this.isHookBufferEnabled?(s.group&&s.payloads.length>0?s.payloads[0]=t:"lifo"===i?s.payloads.splice(0,0,t):s.payloads.push(t),"synchronous"===s.type||this.isHookBufferEnabled||this.scheduleHook(s.type)):o.add((()=>s.hook(this.prepareHookPayload(t,e,"synchronous"))))})),o.flush(),!0}return!1}bufferHooks(){this.m_nHookTimeout=Cm(this.m_nHookTimeout),this.m_nHookFrame=Em(this.m_nHookFrame),this.m_nHookBuffer++}flushHooks(){if(this.m_nHookBuffer>0&&(this.m_nHookBuffer--,0===this.m_nHookBuffer)){const e=new ug;lm(this.m_pHooks,((t,i)=>{lm(t,(t=>{"synchronous"===t.type?lm(t.payloads.splice(0,t.payloads.length),(s=>{e.add((()=>t.hook(this.prepareHookPayload(s,i,t.type))))})):this.scheduleHook(t.type)}))}),{keys:!0}),e.flush()}}unhook(e,t){const i=this.getHooks(e);if(i){let s=!1;if(t){let e=i.length;for(;e--;){const o=i[e];o.context!==t&&o.hook!==t||(i.splice(e,1),s=!0)}}return t&&0!==i.length?s:(ig(this.m_pHooks,e),!0)}return!1}unhookContext(e){let t=!1;return lm(this.m_pHooks,((i,s)=>{let o=i.length;for(;o--;)i[o].context===e&&(i.splice(o,1),t=!0);0===i.length&&ig(this.m_pHooks,s)}),{keys:!0}),t}destroy(){const e=new ug;this.m_nHookTimeout=Cm(this.m_nHookTimeout),this.m_nHookFrame=Em(this.m_nHookFrame),this.m_nHookBuffer=0,lm(this.m_pHooks,((t,i)=>{lm(t,(t=>{lm(t.payloads.splice(0,t.payloads.length),(s=>{e.add((()=>t.hook(this.prepareHookPayload(s,i,t.type))))}))}))}),{keys:!0}),this.m_pHooks={},e.flush()}}function gg(e,t,i,s,o="multiple"){if(!s||!zp(s.value))throw new Error(`The '@${e}' decorator can only be applied to a method but '${i}' seems to be a property.`);const n=`@marker @${e}`,r=`@marker @${e} #${i}`,a=Object.getOwnPropertyDescriptor(t,n);if(Object.getOwnPropertyDescriptor(t,r))throw new Error(`Decorator '@${e}' is already applied to the method '${i}'.`);if("single"===o&&a)throw new Error(`Decorator '@${e}' is already used in this class, but can only be applied once.`);Object.defineProperty(t,r,{value:!0,writable:!1,enumerable:!1,configurable:!1}),a?a.value.push(s.value):Object.defineProperty(t,n,{value:[s.value],writable:!1,enumerable:!1,configurable:!1})}function bg(e,t,...i){const s=Xm(t,`@marker @${e}`);if(s){const e=s.length;if(1===e)return km(s[0],t,...i);for(let o=0;o<e;o++)km(s[o],t,...i)}}function fg(e,t,i,s,o){const n={target:t,property:i,oldValue:s,newValue:o};lm(Xm(t,e),(e=>{km(e,t,n)}))}class yg{constructor(){this.m_pStack=[]}push(e){this.m_pStack.push(e)}flush(){let e=this.m_pStack.shift();for(;e;)e(),e=this.m_pStack.shift()}}class vg extends mg{constructor(e=0,t=0,i=1){super(),this.m_nCurrentCount=0,this.m_pCursor={column:0,row:0,index:0},this.m_bSilent=!1,this.m_pItems=[],this.m_nUniqueId=vg.enumerator.n,this.m_nType=e,this.m_nOrientation=t,this.m_nColumns=this.m_nCurrentColumns=0===this.type?Math.max(i,1):0,this.m_nRows=this.m_nCurrentRows=1===this.type?Math.max(i,1):0}get uniqueId(){return this.m_nUniqueId}get type(){return this.m_nType}set type(e){this.m_nType!==e&&(this.m_nType=e,this.recalculate(new yg,0,"change",-1,32).flush())}get orientation(){return this.m_nOrientation}set orientation(e){if(this.m_nOrientation!==e){const t=new yg;this.m_nOrientation=e,this.reindex(t,0,-1,"change",-1,32),t.flush()}}get columns(){return this.m_nColumns}set columns(e){this.m_nType=0,e!==this.m_nColumns&&(this.m_nColumns=Math.max(e,1),this.recalculate(new yg,0,"change",-1,32).flush())}get rows(){return this.m_nRows}set rows(e){this.m_nType=1,e!==this.m_nRows&&(this.m_nRows=Math.max(e,1),this.recalculate(new yg,0,"change",-1,32).flush())}get count(){return this.m_pItems.length}get all(){return this.m_pItems}get currentItem(){return this.itemAtIndex(this.safeCursor.index)}get firstItem(){return this.itemAtIndex(0)}get lastItem(){return this.itemAtIndex(this.count-1)}get lastItemInFirstRow(){return this.lastItemInRow(0)}get lastItemInFirstColumn(){return this.lastItemInColumn(0)}get cursor(){return this.m_pCursor}set cursor(e){const t=this.m_pCursor.column,i=this.m_pCursor.row;this.m_pCursor=this.getSafeCursor(e),this.m_pCursor.column===t&&this.m_pCursor.row===i||this.isSilent||this.onCursorChange({matrix:this,cursor:this.cursor})}get safeCursor(){return this.m_pCursor}get isCursorAtFirstColumn(){return 0===this.cursor.column}get isCursorAtLastColumn(){return this.cursor.column===this.columns-1}get isCursorAtEndColumn(){return this.cursor.column===this.columns}get isCursorAtFirstRow(){return 0===this.cursor.row}get isCursorAtLastRow(){return this.cursor.row===this.rows-1}get isCursorAtEndRow(){return this.cursor.row===this.rows}get isCursorAtFirst(){return 0===this.cursor.index}get isCursorAtLast(){return this.cursor.index===this.count-1}get isCursorAtEnd(){return this.cursor.index===this.count}get isSilent(){return zp(this.m_bSilent)?this.m_bSilent():this.m_bSilent}set isSilent(e){this.m_bSilent=e}isValidIndex(e,t=!1){return Hp(e)&&e>=0&&e<this.count+(t?1:0)}reindex(e,t,i,s,o,n){let r=!1;for(t=dp.max(t,0),i=this.isValidIndex(i)?i+1:this.count,o=this.isValidIndex(o)?o:-1,this.isSilent&&(s="nothing");t<i;)r=this.m_pItems[t].reindex(e,this,t,"nothing"!==s?o===t?s:"auto":"nothing",n)||r,t++;return r}recalculate(e,t,i,s,o){const n="nothing"!==i&&!this.isSilent,r=this.count;switch(this.m_nType){case 0:0===this.m_nColumns&&(this.m_nColumns=1),this.m_nRows=Math.max(Math.ceil(r/this.m_nColumns),r>0?1:0);break;case 1:0===this.m_nRows&&(this.m_nRows=1),this.m_nColumns=Math.max(Math.ceil(r/this.m_nRows),r>0?1:0);break;case 2:this.m_nColumns=this.m_nRows=Math.max(Math.ceil(Math.sqrt(r)),r>0?1:0);break;case 3:case 4:for(this.m_nColumns=this.m_nRows=Math.max(Math.floor(Math.sqrt(r)),r>0?1:0);this.m_nColumns*this.m_nRows<r;)for(3===this.m_nType?this.m_nColumns++:this.m_nRows++;this.m_nColumns*this.m_nRows<r;)4===this.m_nType?this.m_nColumns++:this.m_nRows++}return n&&(this.bufferHooks(),(1===this.m_nOrientation&&this.m_nColumns!==this.m_nCurrentColumns||0===this.m_nOrientation&&this.m_nRows!==this.m_nCurrentRows)&&(t=0),this.isValidIndex(t)&&this.reindex(e,t,r,i,s,o)),this.m_nColumns===this.m_nCurrentColumns&&this.m_nRows===this.m_nCurrentRows||((this.safeCursor.column>this.m_nColumns||this.safeCursor.row>this.m_nRows)&&(this.cursor={column:Math.min(this.safeCursor.column,this.m_nColumns),row:Math.min(this.safeCursor.row,this.m_nRows)}),n&&e.push((()=>{this.onDimensionChange({matrix:this,difference:this.m_nColumns*this.m_nRows-this.m_nCurrentColumns*this.m_nCurrentRows,columns:this.m_nColumns,rows:this.m_nRows,reason:o})})),this.m_nCurrentColumns=this.m_nColumns,this.m_nCurrentRows=this.m_nRows),r!==this.m_nCurrentCount&&(n&&e.push((()=>{this.onCountChange({matrix:this,difference:r-this.m_nCurrentCount,count:r,reason:o})})),this.m_nCurrentCount=r),n&&this.flushHooks(),e}getSafeCursor(e){if(!Hp(e.index)||e.index<0){const t=Math.min(Math.max(Hp(e.column)?e.column:this.columns,0),this.columns),i=Math.min(Math.max(Hp(e.row)?e.row:this.rows,0),this.rows);return{column:t,row:i,index:this.indexFromColumnRow(t,i)}}return this.cursorFromIndex(e.index)}onDimensionChange(e){this.emitHook("OnDimensionChange",e)}onCountChange(e){this.emitHook("OnCountChange",e)}onCursorChange(e){this.emitHook("OnCursorChange",e)}indexFromColumnRow(e,t){const i=e>=0&&e<this.columns&&t>=0&&t<this.rows?0===this.orientation?this.rows*e+t:this.columns*t+e:-1;return i>=0&&i<this.count?i:-1}cursorFromIndex(e){return{column:(e=Math.min(Math.max(e||0,0),this.count))<this.count?0===this.orientation?Math.floor(e/this.rows):e%this.columns:this.columns,row:e<this.count?0===this.orientation?e%this.rows:Math.floor(e/this.columns):this.rows,index:e}}pushToMatrix(e,t={index:void 0,recalculate:!0,emit:"push"}){const i=this.isSilent?"nothing":t.emit,s=sm(t.recalculate,!0),o=new yg;let n,r;if(r=Hp(t.index)?t.index:e.index,!e.isPopped&&e.parent){if(this===e.parent)return this.isValidIndex(t.index,!0)&&e.moveToIndex(t.index),e;n=e.parent,e.popSilent()}if(this.isValidIndex(r)?this.m_pItems.splice(r,0,e):r=this.m_pItems.push(e)-1,"nothing"!==i&&this.bufferHooks(),s&&"nothing"!==i||e.reindex(o,this,r,i,1),s&&this.recalculate(o,r,i,r,1),"nothing"!==i){if(e.isFirst){const t=e.successorSibling;t&&(t.dispatch(o,{hook:"OnItemChange",payload:{matrix:this,matrixPrevious:n,item:t,reason:128}}),this.emitHook("OnItemChange",{matrix:this,matrixPrevious:n,item:t,reason:128}))}if(e.isLast){const t=e.predecessorSibling;t&&(t.dispatch(o,{hook:"OnItemChange",payload:{matrix:this,matrixPrevious:n,item:t,reason:64}}),this.emitHook("OnItemChange",{matrix:this,matrixPrevious:n,item:t,reason:64}))}}return o.flush(),"nothing"!==i&&this.flushHooks(),e}moveTo(e,t){return this.moveToIndex(e,this.getSafeCursor(t).index)}moveToIndex(e,t){if(this.isValidIndex(t,!0)&&e.index!==t){const i=new yg;return this.m_pItems.splice(t,0,this.m_pItems.splice(e.index,1)[0]),this.reindex(i,Math.min(e.index,t),Math.max(e.index,t),"change",-1,4),i.flush(),!0}return!1}moveToPosition(e,t,i){return this.moveToIndex(e,this.indexFromColumnRow(t,i))}moveToItem(e,t,i){return this.moveToIndex(e,t.index+(i?0:1)-(e.index<t.index?1:0))}moveUpOrDown(e,t){if(t&&!e.isFirstOfMatrix||!t&&!e.isLastOfMatrix){const i=new yg;return this.m_pItems[e.index]=this.m_pItems[e.index+(t?-1:1)],this.m_pItems[e.index+(t?-1:1)]=e,this.reindex(i,e.index-(t?1:0),e.index+(t?0:1),"change",-1,4),i.flush(),!0}return!1}swap(e,t){if(e.index!==t.index){const i=new yg;return this.m_pItems[e.index]=t,this.m_pItems[t.index]=e,this.reindex(i,dp.min(e.index,t.index),dp.max(e.index,t.index),"change",-1,8),i.flush(),!0}return!1}popFromMatrix(e,t=!0){let i=[],s=!1,o=!1;if(e||(e=this.itemAtIndex(this.count-1)),e&&(s=e.isFirst,o=e.isLast,this.isValidIndex(e.index)&&e===this.m_pItems[e.index]&&(i=this.m_pItems.splice(e.index,1))),1===i.length&&i[0]){const e=new yg,n=!!this.isSilent;if(i[0].dispatch(e,"Pop"),n||(this.bufferHooks(),t&&(i[0].dispatch(e,{hook:"OnItemPop",payload:{matrix:this,item:i[0]}}),this.emitHook("OnItemPop",{matrix:this,item:i[0]}))),this.recalculate(e,i[0].index,"change",-1,2),!n){if(s){const t=this.firstItem;t&&(t.dispatch(e,{hook:"OnItemChange",payload:{matrix:this,matrixPrevious:void 0,item:t,reason:128}}),this.emitHook("OnItemChange",{matrix:this,matrixPrevious:void 0,item:t,reason:128}))}if(o){const t=this.lastItem;t&&(t.dispatch(e,{hook:"OnItemChange",payload:{matrix:this,matrixPrevious:void 0,item:t,reason:64}}),this.emitHook("OnItemChange",{matrix:this,matrixPrevious:void 0,item:t,reason:64}))}}return e.flush(),n||this.flushHooks(),i[0]}}sort(e=((e,t)=>e.uniqueId-t.uniqueId)){this.m_pItems.sort(e);const t=new yg,i=this.reindex(t,0,-1,"change",-1,16);return t.flush(),i}clear(e="thorough"){const t=new yg;if("dirty"!==e){const i=this.count;for(let s=0;s<i;s++){const i=this.m_pItems[s];i.dispatch(t,"Pop"),this.isSilent||(i.dispatch(t,{hook:"OnItemPop",payload:{matrix:this,item:i}}),"thorough"===e&&this.emitHook("OnItemPop",{matrix:this,item:i})),i.dispatch(t,"Detach")}}this.m_pItems=[],"dirty"!==e&&("thorough"===e&&this.recalculate(t,0,"change",-1,2),t.flush())}invalidateMatrix(){this.onDimensionChange({matrix:this,difference:this.m_nColumns*this.m_nRows-this.m_nCurrentColumns*this.m_nCurrentRows,columns:this.columns,rows:this.rows,reason:32})}recalculateMatrix(){this.recalculate(new yg,0,"change",-1,32).flush()}each(e,t,i){const s=this.m_pItems.slice(t,Hp(i)&&i>=0?i+1:i),o=s.length;for(let t=0;t<o;t++){const i=e(s[t]);if(Up(i)&&i)return!0}return!1}reverseEach(e,t,i){const s=this.m_pItems.slice(t,Hp(i)&&i>=0?i+1:i);for(let t=s.length-1;t>=0;t--){const i=e(s[t]);if(Up(i)&&i)return!0}return!1}itemAtIndex(e){return this.isValidIndex(e)?this.m_pItems[e]:void 0}itemAtPosition(e,t){return this.itemAtIndex(this.indexFromColumnRow(e,t))}itemAtCursor(e){return this.itemAtIndex(this.getSafeCursor(e).index)}itemFromId(e){return ym(this.m_pItems,(t=>t.uniqueId===e))}lastItemInRow(e){let t,i=this.columns;for(;!t&&i>0;)t=this.itemAtPosition(--i,e);return t}lastItemInColumn(e){let t,i=this.rows;for(;!t&&i>0;)t=this.itemAtPosition(e,--i);return t}moveCursorToFirstColumn(e=!1){return this.cursor={column:0,row:e?0:this.safeCursor.row,index:-1}}moveCursorToSuccessorColumn(e=!1){return this.cursor={column:this.cursor.column+1,row:e?0:this.safeCursor.row,index:-1}}moveCursorToPredecessorColumn(e=!1){return this.cursor={column:this.cursor.column-1,row:e?0:this.safeCursor.row,index:-1}}moveCursorToLastColumn(e=!1){return this.cursor={column:this.columns-1,row:e?0:this.safeCursor.row,index:-1}}moveCursorToFirstRow(e=!1){return this.cursor={column:e?0:this.safeCursor.column,row:0,index:-1}}moveCursorToSuccessorRow(e=!1){return this.cursor={column:e?0:this.safeCursor.column,row:this.cursor.row+1,index:-1}}moveCursorToPredecessorRow(e=!1){return this.cursor={column:e?0:this.safeCursor.column,row:this.cursor.row-1,index:-1}}moveCursorToLastRow(e=!1){return this.cursor={column:e?0:this.safeCursor.column,row:this.rows-1,index:-1}}moveCursorToFirst(){return this.cursor={column:-1,row:-1,index:0}}moveCursorToSuccessor(){return this.cursor={column:-1,row:-1,index:this.safeCursor.index+1}}moveCursorToPredecessor(){return this.cursor={column:-1,row:-1,index:this.safeCursor.index-1}}moveCursorToLast(){return this.cursor={column:-1,row:-1,index:this.count-1}}moveCursorToEnd(){return this.cursor={column:-1,row:-1,index:this.count}}}vg.enumerator=new bp;const Mg=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],wg=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],xg=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428],Sg=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],Ig=[2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561],kg=[573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882],Ng=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Lg(e,t){return e>>>t|e<<32-t}function Cg(e,t,i,s){return Lg(e,t)^Lg(e,i)^e>>>s}function Dg(e,t){return e[15&t]+=Cg(e[t+14&15],17,19,10)+e[t+9&15]+Cg(e[t+1&15],7,18,3)}function Ag(e,t){const i=(65535&e)+(65535&t);return(t=(e>>16)+(t>>16)+(i>>16))<<16|65535&i}function jg(e,t,...i){let s=0,o=0,n=0,r=0;for(;s<i.length/2;s++)o=i[s],n+=65535&o,r+=o>>>16;for(r+=n>>>16,e[t+1]=r<<16|65535&n,n=r>>>16,r=0;s<i.length;s++)o=i[s],n+=65535&o,r+=o>>>16;r+=n>>>16,e[t]=r<<16|65535&n}function Tg(e,t){let i=0;const s=[],o=[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];for(;i<16;)s[i]=t[3+(i<<2)]|t[2+(i<<2)]<<8|t[1+(i<<2)]<<16|t[i<<2]<<24,i++;for(i=0;i<64;i++){const e=o[0],t=o[1],n=o[2],r=o[4],a=o[7]+(Lg(r,6)^Lg(r,11)^Lg(r,25))+(r&o[5]^~r&o[6])+Ng[i]+(i<16?s[i]:Dg(s,i));for(let i=7;i>=0;i--)o[i]=4===i?Ag(o[3],a):0===i?Ag(a,(Lg(e,2)^Lg(e,13)^Lg(e,22))+(e&t^e&n^t&n)):o[i-1]}for(i=0;i<8;i++)e[i]+=o[i]}function zg(e,t,i){let s;try{s=unescape(encodeURIComponent(e))}catch(t){s=function(e){const t=e.length;let i="";for(let s=0;s<t;s++){const t=e.charCodeAt(s);if(t<128)i+=String.fromCharCode(t);else if(t<2048)i+=String.fromCharCode(192|t>>>6,128|63&t);else if(t<55296||t>=57344)i+=String.fromCharCode(224|t>>>12,128|t>>>6&63,128|63&t);else{const o=65536+((1023&t)<<10|1023&e.charCodeAt(++s));i+=String.fromCharCode(240|o>>>18,128|o>>>12&63,128|o>>>6&63,128|63&o)}}return i}(e)}const o=(t?224===i?Ig:256===i?kg:384===i?xg:Sg:224===i?Mg:wg).slice(),n=s.length,r=[];let a,l,c="",u=0,h=!0,d=0,p=0,m=0,g=0,b=0;if(t){const e=[0,0,0,0,0,0,0,0],t=[24,16,8,0];let i;do{for(r[0]=u,a=1;a<=32;a++)r[a]=0;for(a=m;d<n&&a<128;++d){const e=s.charCodeAt(d);e<128?r[a>>2]|=e<<t[3&a++]:(r[a>>2]|=(192|e>>6)<<t[3&a++],r[a>>2]|=(128|63&e)<<t[3&a++])}for(p+=a-m,m=a-128,d===n&&(r[a>>2]|=[-2147483648,8388608,32768,128][3&a],++d),u=r[32],d>n&&a<112&&(r[31]=p<<3,h=!1),l=32;l<160;l+=2){const e=r[l-30],t=r[l-29],i=r[l-4],s=r[l-3];jg(r,l,r[l-13],r[l-31],(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25),(s>>>19|i<<13)^(i>>>29|s<<3)^(s>>>6|i<<26),r[l-14],r[l-32],(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7,(i>>>19|s<<13)^(s>>>29|i<<3)^i>>>6)}for(i=o.slice(),e[6]=i[2]&i[4],e[7]=i[3]&i[5],a=0;a<160;a+=8)for(l=0;l<8;l+=2){const t=l>0?8-l:0,s=[0,0,0,0];jg(s,0,_g[a+l+1],r[a+l+1],i[9+t]&i[2===l?9:11+t]^~i[9+t]&i[6===l?15:13-l],(i[9+t]>>>14|i[8+t]<<18)^(i[9+t]>>>18|i[8+t]<<14)^(i[8+t]>>>9|i[9+t]<<23),i[15-l],_g[a+l],r[a+l],i[8+t]&i[2===l?8:10+t]^~i[8+t]&i[6===l?14:12-l],(i[8+t]>>>14|i[9+t]<<18)^(i[8+t]>>>18|i[9+t]<<14)^(i[9+t]>>>9|i[8+t]<<23),i[14-l]),jg(s,2,(e[l+1]=i[1+t]&i[2===l?1:3+t])^i[1+t]&i[(6===l?l:4-l)+1]^e[7-t],(i[1+t]>>>28|i[t]<<4)^(i[t]>>>2|i[1+t]<<30)^(i[t]>>>7|i[1+t]<<25),(e[l]=i[t]&i[2===l?0:2+t])^i[t]&i[6===l?l:4-l]^e[6-t],(i[t]>>>28|i[1+t]<<4)^(i[1+t]>>>2|i[t]<<30)^(i[1+t]>>>7|i[t]<<25)),jg(i,14-l,i[7-l],s[1],i[6-l],s[0]),jg(i,6-l,s[3],s[1],s[2],s[0])}for(a=0;a<16;a+=2)jg(o,a,o[a+1],i[a+1],o[a],i[a])}while(h)}else{for(m=63&n,g=n<<3,b=n>>29,a=0;a+63<n;a+=64){for(l=d;l<64;l++)r[l]=s.charCodeAt(p++);Tg(o,r),d=0}for(a=0;a<m;a++)r[a]=s.charCodeAt(p++);for(d=g>>3&63,r[d++]=128,a=d;a<(d>56?64:56);a++)r[a]=0;if(d>56)for(Tg(o,r),a=0;a<56;a++)r[a]=0;for(;a<64;)for(l=24;l>=0;l-=8,a++)r[a]=(a>=60?g:b)>>>l&255;Tg(o,r)}for(a=0;a<(512===i?16:384===i?12:256===i?8:7);a++)for(l=28;l>=0;l-=4)c+="0123456789abcdef".charAt(o[a]>>>l&15);return c}function Eg(e){return zg(e,!1,224)}function Og(e){return zg(e,!1,256)}function Pg(e){return zg(e,!0,384)}function Rg(e){return zg(e,!0,512)}function Hg(e){return zg(e,!0,224)}function Fg(e){return zg(e,!0,256)}const Ug={},Bg={},Yg={},Zg={},Vg={},Wg={};function Gg(e){return Bg[e]||(Bg[e]=Og(e))}var $g,Qg,qg,Xg=Object.freeze({__proto__:null,SHA2_224:Eg,SHA2_256:Og,SHA2_384:Pg,SHA2_512:Rg,SHA2_512_224:Hg,SHA2_512_256:Fg,CSHA2_224:function(e){return Ug[e]||(Ug[e]=Eg(e))},CSHA2_256:Gg,CSHA2_384:function(e){return Yg[e]||(Yg[e]=Pg(e))},CSHA2_512:function(e){return Zg[e]||(Zg[e]=Rg(e))},CSHA2_512_224:function(e){return Vg[e]||(Vg[e]=Hg(e))},CSHA2_512_256:function(e){return Wg[e]||(Wg[e]=Fg(e))}});class Jg extends mg{constructor(e){super(),this.m_nIndex=-1,this.m_nColumn=-1,this.m_nRow=-1,this.m_bPopped=!0,this.m_nUniqueId=Jg.enumerator.n,this.m_pMatrix=e}static pushToMatrix(e,t){return(t=t||e.parent)&&t.pushToMatrix(e,{index:-1,recalculate:!0,emit:"push"}),e}get parent(){return this.matrix()}get uniqueId(){return this.m_nUniqueId}get hash(){return this.m_sHash||(this.m_sHash=Og(`${Lp.now}${Math.random()}.${this.uniqueId}`))}set hash(e){Pp(e)&&/[A-Fa-f0-9]{64}/.test(e)&&(this.m_sHash=e)}get index(){return this.m_nIndex}set index(e){this.moveToIndex(e)}get columnIndex(){return this.m_nColumn}get rowIndex(){return this.m_nRow}get isPopped(){return this.m_bPopped}get isFirst(){return!!this.m_pMatrix&&(0===this.m_pMatrix.orientation?0===this.rowIndex:0===this.columnIndex)}get isLast(){return!!this.m_pMatrix&&(this.isLastOfMatrix||(0===this.m_pMatrix.orientation?this.rowIndex===this.m_pMatrix.rows-1:this.columnIndex===this.m_pMatrix.columns-1))}get isFirstColumn(){return 0===this.columnIndex}get isLastColumn(){return!!this.m_pMatrix&&(this.isLastOfMatrix||this.columnIndex===this.m_pMatrix.columns-1)}get isFirstRow(){return 0===this.rowIndex}get isLastRow(){return!!this.m_pMatrix&&(this.isLastOfMatrix||this.rowIndex===this.m_pMatrix.rows-1)}get isFirstOfMatrix(){return 0===this.index}get isLastOfMatrix(){return!!this.m_pMatrix&&this.index===this.m_pMatrix.count-(this.m_bPopped?0:1)}get predecessorSibling(){return this.m_pMatrix&&!this.isFirstOfMatrix?this.m_pMatrix.itemAtIndex(this.index-1):void 0}get successorSibling(){return this.m_pMatrix&&!this.isLastOfMatrix?this.m_pMatrix.itemAtIndex(this.index+(this.m_bPopped?0:1)):void 0}get predecessorInColumn(){return this.m_pMatrix?this.m_pMatrix.itemAtPosition(this.m_nColumn,this.m_nRow-1):void 0}get successorInColumn(){return this.m_pMatrix?this.m_pMatrix.itemAtPosition(this.m_nColumn,this.m_nRow+1):void 0}get predecessorInRow(){return this.m_pMatrix?this.m_pMatrix.itemAtPosition(this.m_nColumn-1,this.m_nRow):void 0}get successorInRow(){return this.m_pMatrix?this.m_pMatrix.itemAtPosition(this.m_nColumn+1,this.m_nRow):void 0}matrix(){return this.m_pMatrix}onPush(e){this.emitHook("OnItemPush",e,"lifo")}onChange(e){this.emitHook("OnItemChange",e)}onPop(e){this.emitHook("OnItemPop",e)}dispatch(e,t){if("Pop"!==t)if("Detach"!==t)switch(t.hook){case"OnItemChange":e.push((()=>{this.onChange(t.payload)}));break;case"OnItemPop":e.push((()=>{this.onPop(t.payload)}))}else this.m_pMatrix=void 0;else this.m_bPopped=!0}reindex(e,t,i,s,o){const n=this.m_nColumn,r=this.m_nRow;let a,l=!1;if(this.m_pMatrix!==t&&(a=this.m_pMatrix,this.m_pMatrix=t,l=!0),this.m_nIndex===i&&"change"!==s&&"push"!==s||(0!==i&&0!==this.m_nIndex||(o|=128),i+1!==t.count&&this.m_nIndex+1!==t.count||(o|=64),this.m_nIndex=i,l=!0),this.m_nColumn=0===this.m_pMatrix.orientation?Math.floor(this.m_nIndex/this.m_pMatrix.rows):this.m_nIndex%this.m_pMatrix.columns,this.m_nRow=0===this.m_pMatrix.orientation?this.m_nIndex%this.m_pMatrix.rows:Math.floor(this.m_nIndex/this.m_pMatrix.columns),this.isPopped){const e=this.m_pMatrix.itemAtIndex(i);e&&e===this&&(this.m_bPopped=!1,l=!0)}return!(!l&&this.m_nColumn===n&&this.m_nRow===r||("nothing"!==s&&("push"===s?(e.push((()=>{this.onPush({matrix:t,matrixPrevious:a,item:this,reason:o})})),this.m_pMatrix.emitHook("OnItemPush",{matrix:this.m_pMatrix,matrixPrevious:a,item:this,reason:o},"lifo")):(e.push((()=>{this.onChange({matrix:t,matrixPrevious:a,item:this,reason:o})})),this.m_pMatrix.emitHook("OnItemChange",{matrix:this.m_pMatrix,matrixPrevious:a,item:this,reason:o}))),0))}moveTo(e){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.moveTo(this,e)}moveToIndex(e){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.moveToIndex(this,e)}moveToPosition(e,t){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.moveToPosition(this,e,t)}moveToItem(e,t){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.moveToItem(this,e,t)}moveUpOrDown(e){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.moveUpOrDown(this,e)}swap(e){return!(!this.m_pMatrix||this.m_bPopped)&&this.m_pMatrix.swap(this,e)}pop(){return!(this.m_pMatrix&&!this.m_bPopped)||this.m_pMatrix.popFromMatrix(this,!0)instanceof Jg}popSilent(){return!(this.m_pMatrix&&!this.m_bPopped)||this.m_pMatrix.popFromMatrix(this,!1)instanceof Jg}unpop(e,t){return!(!this.m_bPopped||!e&&!this.m_pMatrix)&&(e||this.m_pMatrix).pushToMatrix(this,{index:t,recalculate:!0,emit:"change"})instanceof Jg}unpopSilent(e,t){return e=e||this.m_pMatrix,!(!this.m_bPopped||!e)&&e.pushToMatrix(this,{index:t,recalculate:!0,emit:"nothing"})instanceof Jg}}Jg.enumerator=new bp;class Kg extends vg{constructor(e,t=0,i=0,s=1){super(t,i,s),this.m_pItemConstructor=e}get itemConstructor(){return this.m_pItemConstructor}appendToMatrix(e){return this.pushToMatrix(this.onItemInstance(e),{index:-1,recalculate:!0,emit:"push"})}insertToMatrix(e){return this.pushToMatrix(this.onItemInstance(e),{index:0,recalculate:!0,emit:"push"})}insertToMatrixAtCursor(e,t){return this.pushToMatrix(this.onItemInstance(e),{index:this.getSafeCursor(t).index,recalculate:!0,emit:"push"})}insertToMatrixAtIndex(e,t){return this.pushToMatrix(this.onItemInstance(e),{index:t,recalculate:!0,emit:"push"})}insertToMatrixAtPosition(e,t,i){return this.pushToMatrix(this.onItemInstance(e),{index:this.indexFromColumnRow(t,i),recalculate:!0,emit:"push"})}onItemInstance(e){return new this.itemConstructor(this,e)}}class eb extends Jg{constructor(e){super(e)}get parent(){return this.matrix()}matrix(){return super.matrix()}insertBefore(e){return this.parent.pushToMatrix(this.parent.onItemInstance(e),{index:this.index,recalculate:!0,emit:"push"})}insertAfter(e){return this.parent.pushToMatrix(this.parent.onItemInstance(e),{index:this.index+(this.isPopped?0:1),recalculate:!0,emit:"push"})}dispatch(e,t){"Detach"!==t&&super.dispatch(e,t)}}!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}($g||($g={})),function(e){e[e.Push=1]="Push",e[e.Pop=2]="Pop",e[e.Move=4]="Move",e[e.Swap=8]="Swap",e[e.Sort=16]="Sort",e[e.Recalculation=32]="Recalculation",e[e.Last=64]="Last",e[e.First=128]="First"}(Qg||(Qg={})),function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e[e.Square=2]="Square",e[e.SquareHorizontal=3]="SquareHorizontal",e[e.SquareVertical=4]="SquareVertical"}(qg||(qg={}));class tb extends eb{constructor(e,t){super(e),this.m_pSuccessors={live:{},preview:{}},this.hash=t}get ancestor(){return this.m_pAncestor}get branch(){return this.m_pBranch}get id(){return this.hash}selectSuccessor(e){return this.m_pSuccessors[e]}prepare(e,t){return this.m_pAncestor=e,this.m_pBranch=t,this}setSuccessor(e,t){const i=this.selectSuccessor(e);i.state=t,i.isSet=!0}successor(e){const t=this.selectSuccessor(e);if(!t.isSet){const i=this.branch||this.ancestor;i&&(t.state=i.successor(e),t.isSet=!0)}return t.state}}class ib extends tb{constructor(e,t){super(e,t.id),this.m_sContext="",this.m_pProps=t}static createContext(e){return Gg(JSON.stringify(rm(e,{id:""})))}get conditions(){return this.parent}get branch(){return this.conditions.branch}get state(){return this.branch.state}get context(){return this.m_sContext||(this.m_sContext=ib.createContext(this.m_pProps))}get props(){return this.m_pProps}onApproved(e){}}class sb extends Kg{constructor(e){super(e.state.ontology.constructors.condition),this.m_pBranch=e}get branch(){return this.m_pBranch}create(e){const t=ib.createContext(e);if(!this.each((e=>e.context===t)))return this.appendToMatrix(e)}}class ob extends Kg{constructor(e){super(e.ontology.constructors.branch),this.m_pState=e}get state(){return this.m_pState}create(e,t){return this.appendToMatrix(e).prepare(t)}}class nb extends tb{constructor(e,t){super(e,t.id),this.m_pStates=[],this.m_pConditions=new sb(this),this.m_pProps=t,this.m_sCulling="each"===t.culling||"all"===t.culling||"none"===t.culling?t.culling:"first",this.m_bSpawn=sm(t.spawn)}get branches(){return this.parent}get states(){return this.m_pStates}get state(){return this.branches.state}get conditions(){return this.m_pConditions}get props(){return this.m_pProps}get culling(){return this.m_sCulling}get spawn(){return this.m_bSpawn}get isMain(){return this.state.isMain}get isFinish(){return this.isMain||"abort"===this.m_pProps.jump}entry(e){return this.m_pStates.length>0?this.m_pStates[0]:this.successor(e)}onReady(e){this.emitHook("OnReady",{branch:this,context:e})}onEnter(e){this.emitHook("OnEnter",{branch:this,context:e})}onSkip(e){this.emitHook("OnSkip",{branch:this,context:e})}onLeave(e){this.emitHook("OnLeave",{branch:this,context:e})}onCancel(e){this.emitHook("OnCancel",{branch:this,context:e})}}class rb{constructor(e){let t;this.m_nPromises=0,this.m_bAsynchronous=!1,this.m_bCanceled=!1,this.m_fnPromise=e.promise,this.m_bContinuous=sm(e.continuous),t=e.await(this),t!==this&&0===this.m_nPromises&&this.return(t),this.m_bAsynchronous=!0,this.m_bCondition=sm(this.m_bCondition,!sm(e.conditional))}static of(e){return new rb(e)}get condition(){return sm(this.m_bCondition,!0)}set condition(e){this.m_bCondition=e}get isAlive(){return zp(this.m_fnPromise)}get promiseCount(){return this.m_nPromises}terminate(){return this.return(void 0),this.condition}cancel(){return this.m_bCanceled=!0,this.m_bCondition=!0,this.terminate()}return(e){return this.m_fnPromise&&this.condition&&(this.m_nPromises++,this.m_fnPromise({isAsynchronous:this.m_bAsynchronous,isCanceled:this.m_bCanceled,payload:e}),this.m_bContinuous||(this.m_fnPromise=void 0)),e}}class ab extends rb{static for(e){return new ab(e)}constructor(e){super({await:e.await,promise:e.promise,conditional:e.conditional,continuous:e.continuous})}done(){return this.terminate()}}class lb extends Kg{constructor(e){super(e.ontology.constructors.transducer),this.m_pState=e}get state(){return this.m_pState}create(e){return this.appendToMatrix(e)}}class cb extends tb{constructor(e,t){super(e,t.id),this.m_nEvaluate=0,this.m_nEnumerator=0,this.m_pTransducers=new lb(this),this.m_pBranches=new ob(this),this.m_pProps=t}get states(){return this.parent}get ontology(){return this.states.ontology}get transducers(){return this.m_pTransducers}get branches(){return this.m_pBranches}get isMain(){return this instanceof ub}get props(){return this.m_pProps}get isEvaluating(){return this.m_nEvaluate>0}get enumerator(){return this.m_nEnumerator}prepare(e,t,i=0){return this.m_nEnumerator=i,super.prepare(e,t)}evaluate(e,t,i){const s=this.m_nEvaluate;let o=!0;e instanceof rb?e.isAlive&&this.m_nEvaluate++:(o=i(e),e.isAsynchronous&&this.m_nEvaluate>0&&this.m_nEvaluate--),o&&(0===this.m_nEvaluate&&s>0||this.m_nEvaluate>0&&0===s)&&this.onEvaluate(t,this.m_nEvaluate>0)}onSkip(e){this.emitHook("OnSkip",{state:this,context:e})}onLeave(e){this.emitHook("OnLeave",{state:this,context:e})}onLeaveError(e,t){}onCancel(e){this.emitHook("OnCancel",{state:this,context:e})}onValidated(e,t,i){this.emitHook("OnValidated",{state:this,context:e,result:t,type:i})}onEvaluate(e,t){this.emitHook("OnEvaluate",{state:this,context:e,evaluating:t})}}class ub extends cb{constructor(e){super(e,{id:Gg("*")})}onEnterCondition(){return!0}onEnter(){}onLeaveCondition(){return!0}onValidate(){return!0}}class hb extends Kg{constructor(e){super(e.constructors.state),this.m_pOntology=e}get ontology(){return this.m_pOntology}main(){return this.pushToMatrix(new ub(this))}create(e,t,i,s){const o=this.appendToMatrix(e).prepare(i,t,s);return t.states.push(o),o}}function db(e){switch(e){case"meta":return 0;case"static":return 1;case"dynamic":return 2;case"feature":return 3}}function pb(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}const mb="@serializer #properties",gb="@deserializer #properties";function bb(e,t,i){const s=Object.getOwnPropertyDescriptor(e,gb);if(i&&!i.set)throw new Error(`Decorator '@deserialize' can only be used on writable properties, but '${t}' seems to be a readonly property or a method.`);s&&Bp(s.value)?s.value.push(t):Object.defineProperty(e,gb,{value:[t],writable:!1,enumerable:!1,configurable:!1})}function fb(e,t,i){const s=Object.getOwnPropertyDescriptor(e,mb);if(i&&!i.get)throw new Error(`Decorator '@serialize' can only be used on readable properties, but '${t}' is not a property.`);s&&Bp(s.value)?s.value.push(t):Object.defineProperty(e,mb,{value:[t],writable:!1,enumerable:!1,configurable:!1})}function yb(e){return t=>{wb.register(t,e)}}function vb(e,t,i){!function(e,t,i,s,o){const n=`@observers #${i}`,r=Object.getOwnPropertyDescriptor(t,n),a=`@observers @${e} #${i}`;if(Object.getOwnPropertyDescriptor(t,a))throw new Error(`Decorator '@${e}' is already applied to the property '${i}'.`);if(Object.defineProperty(t,a,{value:!0,writable:!1,enumerable:!1,configurable:!1}),r&&Bp(r.value))r.value.push(o);else{if(s){if(s.configurable=!1,!s.set)throw new Error(`Decorator '@${e}' can only be used on writable properties, but '${i}' seems to be a readonly property or a method.`);{const e=s.set;s.set=function(t){const s=Xm(this,i);s!==t&&(e.call(this,t),fg(n,this,i,s,t))}}}else{const e=`@observable #${i}`;Object.defineProperty(t,i,{get:function(){return Xm(this,e)},set:function(t){const s=Xm(this,e);s!==t&&(Qm(this,e,t),fg(n,this,i,s,t))},enumerable:!0,configurable:!1})}Object.defineProperty(t,n,{value:[o],writable:!1,enumerable:!1,configurable:!1})}}("property",e,t,i,(e=>e.target.propertyChange(e.property)))}class Mb extends Jg{constructor(e,t,i,s,o,n,r){if(super(),this.m_bReciprocate=!0,!Pp(i))throw new Error("Invalid slot reference supplied to slot constructor.");if(this.m_pType=e,this.m_sKind=t,this.m_sReference=i,this.m_nSequence=s,this.m_pExchangeables=n,r instanceof wb){if(r.id&&"static"===t){const e=Gg(o?`${r.id}:${o}`:r.id);if(e&&!r.selectByIdentifier(e))return this.hash=e,void(this.m_bReciprocate=!1)}const e=Mb.recover(r,i,"static"===t||"dynamic"===t);e&&!r.selectByIdentifier(e)&&(this.hash=e)}else r&&(this.hash=r)}static reciprocate(e,t){t.m_bReciprocate&&e.id&&(Mb.m_pIds[`${e.id}:${t.reference}`]=t.id,0===e.count&&(Mb.m_pIds[e.id]=`${e.id}:${t.reference}`))}static recover(e,t,i){if(e.id){const s=Mb.m_pIds[`${e.id}:${t}`];if(s)return delete Mb.m_pIds[`${e.id}:${t}`],s;if(i){const t=Mb.m_pIds[`${e.id}`];if(t){const i=Mb.m_pIds[t];if(delete Mb.m_pIds[e.id],i)return delete Mb.m_pIds[t],i}}}}get slots(){return this.parent}get id(){return this.hash}get type(){return this.m_pType.type}get kind(){return this.m_sKind}get sequence(){return this.m_nSequence}set sequence(e){this.m_nSequence=e,this.slots&&this.slots.sort()}get reference(){return this.m_sReference}get exchangeables(){const e=this;return um(this.m_pExchangeables,(t=>({property:t,get value(){return Xm(e,t)},set value(i){Qm(e,t,i)}})))}getPipe(e){if(Up(e.pipeable))return e.pipeable;let t;if(e.pipeable)t=e.pipeable;else{if(Up(e.pipable))return e.pipable;t=e.pipable}return t?t.group?{legacy:t.group,label:t.label,alias:t.alias,content:t.content||t.template}:t:void 0}onPop(e){return Mb.reciprocate(e.matrix,this),super.onPop(e)}propertyChange(e){const t=this.slots;if(t&&!t.isDeserializing)switch(this.emitHook("OnSlotProperty",{slot:this,property:e}),t.emitHook("OnSlotProperty",{slot:this,property:e}),e){case"label":case"name":case"alias":case"placeholder":this.emitHook("OnSlotRename",{slot:this}),t.emitHook("OnSlotRename",{slot:this});break;case"required":this.emitHook("OnSlotRequired",{slot:this}),t.emitHook("OnSlotRequired",{slot:this})}}serialize(){return function(e,t){const i={};return lm(t,((e,t)=>{Ap(e)&&Qm(i,t,e)}),{keys:!0}),lm(Xm(e,mb),(t=>{const s=Xm(e,t);if(Ap(s)){const e=Xm(s,"@serializer #proc");Qm(i,t,Pp(e)?km(Xm(s,e),s):s)}})),i}(this,{id:this.id,type:this.type,kind:this.kind,reference:this.reference,sequence:this.sequence,label:this.label,name:this.name,placeholder:this.placeholder,alias:this.alias,required:this.required,pipeable:this.pipeable,default:this.default,exportable:this.exportable,actionable:this.actionable,protected:this.protected})}deserialize(e){return function(e,t,i){const s=new ug;lm(Xm(e,gb),(i=>{const o=t[i];if(Ap(o)){const t=Xm(e,i),n=Xm(t,"@deserializer #proc");if(t&&Pp(n))return void km(Xm(t,n),t,o,s);Qm(e,i,o)}})),s.flush()}(this,e),this.hash=e.id,this.sequence=e.sequence,this.label=e.label,this.name=e.name,this.placeholder=e.placeholder,this.alias=e.alias,this.required=e.required,this.pipeable=this.getPipe(e),this.default=e.default,this.exportable=e.exportable,this.actionable=Up(e.actionable)?e.actionable:e.volatile,this.protected=e.protected,this}deprecate(){return this.pop(),this}delete(){return this.pop(),this}pipe(e){const t=(null==e?void 0:e.id)||this.slots&&this.slots.id;return t&&this.pipeable&&!Up(this.pipeable)?Gg(this.pipeable.pipe?`${t}:${this.pipeable.pipe}`:t):""}legacyPipe(e){const t=(null==e?void 0:e.id)||this.slots&&this.slots.id;return t&&this.pipeable&&!Up(this.pipeable)&&this.pipeable.legacy?Gg(`${t}:${this.pipeable.legacy}`):void 0}isPipe(e){if(e&&this.slots&&this.slots.id&&this.pipeable&&!Up(this.pipeable)){if(Gg(this.pipeable.pipe?`${this.slots.id}:${this.pipeable.pipe}`:this.slots.id)===e)return!0;if(this.pipeable.legacy&&Gg(`${this.slots.id}:${this.pipeable.legacy}`)===e)return!0}return!1}exchange(e){this.m_pExchangeables=e}}Mb.m_pIds={},pb([vb],Mb.prototype,"label",void 0),pb([vb],Mb.prototype,"name",void 0),pb([vb],Mb.prototype,"placeholder",void 0),pb([vb],Mb.prototype,"alias",void 0),pb([vb],Mb.prototype,"required",void 0),pb([vb],Mb.prototype,"pipeable",void 0),pb([vb],Mb.prototype,"default",void 0),pb([vb],Mb.prototype,"exportable",void 0),pb([vb],Mb.prototype,"actionable",void 0),pb([vb],Mb.prototype,"protected",void 0),pb([vb],Mb.prototype,"sequence",null),pb([function(e,t,i){if(!i||!zp(i.value))throw new Error(`Decorator '@serializer' needs to be applied to a function, but '${t}' seems to be a property.`);if(Object.getOwnPropertyDescriptor(e,"@serializer #proc"))throw new Error("Decorator '@serializer' is applied multiple times, but can only be used once in a class.");Object.defineProperty(e,"@serializer #proc",{value:t,writable:!1,enumerable:!1,configurable:!1})}],Mb.prototype,"serialize",null),pb([function(e,t,i){if(!i||!zp(i.value))throw new Error(`Decorator '@deserializer' needs to be applied to a function, but '${t}' seems to be a property.`);if(Object.getOwnPropertyDescriptor(e,"@deserializer #proc"))throw new Error("Decorator '@deserializer' is applied multiple times, but can only be used once in a class.");Object.defineProperty(e,"@deserializer #proc",{value:t,writable:!1,enumerable:!1,configurable:!1})}],Mb.prototype,"deserialize",null);class wb extends vg{constructor(e){super(),this.m_bDeserializing=!1,this.m_sId=null==e?void 0:e.id}static register(e,t){if(this.m_pTypes[t])throw new Error(`Duplicate slot type '${t}' registered using the '@slot' decorator.`);this.m_pTypes[$m(e,"type",t)]=e}static ofType(e){return this.m_pTypes[e]}get id(){return this.m_sId}get isDeserializing(){return this.m_bDeserializing}get hasMultiplePipeable(){if(this.count>1){let e,t=0;return this.each((i=>{const s=i.pipeable&&!Up(i.pipeable)?i.pipeable.pipe||!0:void 0;return(s&&s!==e||!s&&!1!==i.pipeable)&&t++,e||(e=s),t>1}))}return!1}create(e,t){let i=this.select(t.reference,e);return i&&i.type===t.type.type?i.sequence!==t.sequence&&(i.sequence=t.sequence):(i&&i.delete(),i=this.pushToMatrix(new t.type(t.type,e,t.reference,t.sequence,t.pipe,t.exchange,(null==i?void 0:i.id)||this))),lm(t,((e,t)=>{switch(t){case"type":case"reference":case"sequence":case"pipe":break;case"exchange":i.exchange(e);break;default:$m(i,t,e)}}),{keys:!0}),i}onDimensionChange(e){super.onDimensionChange(e),this.isDeserializing||this.sort()}meta(e){return this.create("meta",e)}static(e){return this.create("static",e)}dynamic(e){return this.create("dynamic",e)}feature(e){return this.create("feature",e)}select(e,t){let i;return this.each((s=>!(t&&t!==s.kind||s.reference!==e&&s.id!==e||(i=s,0)))),i}selectByIdentifier(e){let t;if(e)return this.each((i=>!(i.id!==e&&!i.isPipe(e)||(t=i,0)))),t}deprecate(e,t){const i=this.select(e,t);if(i)return i.deprecate()}delete(e,t){const i=this.select(e,t);if(i)return i.delete()}clean(e,...t){this.each((i=>{e&&i.kind!==e||ym(t,(e=>e instanceof Mb&&e.id===i.id))||i.pop()}))}sort(){return!this.isDeserializing&&super.sort(((e,t)=>db(e.kind)-db(t.kind)||(e.sequence||0)-(t.sequence||0)||e.uniqueId-t.uniqueId))}serialize(){const e=[];return this.each((t=>{e.push(t.serialize())})),e}deserialize(e){return this.m_bDeserializing=!0,lm(e,(e=>{const t=wb.ofType(e.type);if(!t)throw new Error(`No slot implementation found for type '${e.type}'`);{const i=this.select(e.reference,e.kind);i&&i.type===t.type?i.deserialize(e):(i&&i.pop(),this.pushToMatrix(new t(t,e.kind,e.reference,e.sequence)).deserialize(e))}})),this.m_bDeserializing=!1,this.sort(),this}destroy(){this.clear("dirty"),super.destroy()}}wb.m_pTypes={};let xb=class extends Mb{toValue(e){return sm(e,this.default)}toString(e){const t=this.toValue(e);return!t&&this.labelForFalse?this.labelForFalse:t&&this.labelForTrue?this.labelForTrue:t?"True":"False"}};pb([vb,fb,bb],xb.prototype,"labelForFalse",void 0),pb([vb,fb,bb],xb.prototype,"labelForTrue",void 0),xb=pb([yb("boolean")],xb);let Sb=class extends Mb{get supportsTime(){return"years"!==this.precision&&"months"!==this.precision&&"days"!==this.precision}fromString(e){const t=e.replace(" ","T").split("T"),i=t[0].split("-"),s=2===t.length&&t[1].split(":")||void 0;if(3===i.length&&(!s||3===s.length)){const e=new Date(0);if(e.setUTCFullYear(tm(i[0])),e.setUTCMonth(tm(i[1])-1),e.setUTCDate(tm(i[2])),s){e.setUTCHours(tm(s[0])),e.setUTCMinutes(tm(s[1]));const t=s[2].split(".");e.setUTCSeconds(tm(2===t.length?t[0]:s[2])),e.setUTCMilliseconds(2===t.length?tm(t[1]):0)}else e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0);return e.getTime()}return this.default||0}toValue(e,t){const i=e instanceof Date?new Date(e.getTime()-60*e.getTimezoneOffset()*1e3):new Date(Ep(e)?this.fromString(e):tm(e,this.default)),s=!0===this.minimum?new Date:this.minimum,o=!0===this.maximum?new Date:this.maximum;if(Qp(s)||Hp(s)){const e=Qp(s)?s.getTime()-60*s.getTimezoneOffset()*1e3:s;i.getTime()<e&&i.setTime(e)}if(Qp(o)||Hp(o)){const e=Qp(o)?o.getTime()-60*o.getTimezoneOffset()*1e3:o;i.getTime()>e&&i.setTime(e)}switch(t||this.precision){case"years":i.setUTCMonth(0);case"months":i.setUTCDate(1);case"days":i.setUTCHours(0);case"hours":i.setUTCMinutes(0);case"minutes":i.setUTCSeconds(0);case"seconds":i.setUTCMilliseconds(0)}return i.getTime()}toDate(e,t){return new Date(this.toValue(e,t))}toString(e,t){const i=this.toDate(e,t);let s=!0;switch(t||this.precision){case"years":case"months":case"days":s=!1}return`${i.getUTCFullYear()}-${pp.padLeft(i.getUTCMonth()+1,"0",2)}-${pp.padLeft(i.getUTCDate(),"0",2)}`+(s&&` ${pp.padLeft(i.getUTCHours(),"0",2)}:${pp.padLeft(i.getUTCMinutes(),"0",2)}:${pp.padLeft(i.getUTCSeconds(),"0",2)}.${pp.padLeft(i.getUTCMilliseconds(),"0",3)}`||"")}};pb([vb,fb,bb],Sb.prototype,"precision",void 0),pb([vb,fb,bb],Sb.prototype,"minimum",void 0),pb([vb,fb,bb],Sb.prototype,"maximum",void 0),Sb=pb([yb("date")],Sb);let Ib=class extends Mb{toValue(e){return tm(e,this.default)}toString(e,t){return t?t(this.toValue(e)):em(this.toValue(e))}};Ib=pb([yb("number")],Ib);let kb=class extends Mb{get precision(){return this.m_nPrecision}set precision(e){this.m_nPrecision=Hp(e)?dp.max(0,e):void 0}toValue(e){let t;return t=Hp(this.precision)&&this.precision>0?dp.conform(im(e,this.default),this.precision):tm(e,this.default),Hp(this.minimum)&&t<this.minimum&&(t=this.minimum),Hp(this.maximum)&&t>this.maximum&&(t=this.maximum),t}formatString(e,t){return(t&&Ep(this.prefixPlural)?this.prefixPlural:this.prefix||"")+e+(t&&Ep(this.suffixPlural)?this.suffixPlural:this.suffix||"")}toString(e,t){const i=this.toValue(e);return this.formatString(this.digits?pp.padLeft(i,"0",this.digits,!1,!0):!t||this.separator||this.decimal||this.minus?dp.format(i,this.precision,this.separator||"",this.decimal,this.minus):t(i,this.precision),1!==i)}};pb([vb,fb,bb],kb.prototype,"minimum",void 0),pb([vb,fb,bb],kb.prototype,"maximum",void 0),pb([vb,fb,bb],kb.prototype,"separator",void 0),pb([vb,fb,bb],kb.prototype,"decimal",void 0),pb([vb,fb,bb],kb.prototype,"minus",void 0),pb([vb,fb,bb],kb.prototype,"prefix",void 0),pb([vb,fb,bb],kb.prototype,"prefixPlural",void 0),pb([vb,fb,bb],kb.prototype,"suffix",void 0),pb([vb,fb,bb],kb.prototype,"suffixPlural",void 0),pb([vb,fb,bb],kb.prototype,"digits",void 0),pb([vb,fb,bb],kb.prototype,"precision",null),kb=pb([yb("numeric")],kb);let Nb=class extends Mb{toValue(e){return em(e,this.default)}toString(e){return this.toValue(e)}};Nb=pb([yb("string")],Nb);let _b=class extends Mb{get maxLength(){return this.m_nMaxLength}set maxLength(e){this.m_nMaxLength=Hp(e)?dp.max(0,e):void 0}toValue(e){const t=pp.sanitize(em(e,this.default)).substr(0,this.maxLength||void 0);switch(this.transformation){case"capitalize":return pp.capitalize(t,"first-character");case"capitalize-words":return pp.capitalize(t,"each-word");case"capitalize-sentences":return pp.capitalize(t,"each-sentence");case"uppercase":return pp.uppercase(t);case"lowercase":return pp.lowercase(t)}return t}toString(e){return this.toValue(e)}};pb([vb,fb,bb],_b.prototype,"maxLength",null),pb([vb,fb,bb],_b.prototype,"transformation",void 0),_b=pb([yb("text")],_b);var Lb,Cb=Object.freeze({__proto__:null,Slots:wb,Slot:Mb,property:vb,slot:yb,get Boolean(){return xb},get Date(){return Sb},get Number(){return Ib},get Numeric(){return kb},get String(){return Nb},get Text(){return _b}});class Db extends tb{constructor(e,t){super(e,t.id),this.m_pProps=t,this.m_pSlots=new wb}get transducers(){return this.parent}get state(){return this.transducers.state}get slots(){return this.m_pSlots}get props(){return this.m_pProps}seal(e,t){this.slots.each((i=>{const s=e.mutableValueOf(i);s&&s.seal(t)}))}shouldVerifySeal(e){let t=!1;return this.slots.each((i=>{const s=e.mutableValueOf(i);s&&s.shouldVerifySeal&&(t=!0)})),t}isAwaiting(e){return this.slots.each((t=>{const i=e.mutableValueOf(t);return i&&i.isAwaiting||!1}))}onSkip(e){this.emitHook("OnSkip",{transducer:this,context:e})}onLeave(e){this.emitHook("OnLeave",{transducer:this,context:e})}onCancel(e){this.emitHook("OnCancel",{transducer:this,context:e})}onBeforeValidate(e){}onValidated(e,t,i){this.emitHook("OnValidated",{transducer:this,context:e,result:t,type:i})}onSideEffect(e,t){}}class Ab{constructor(e){this.m_pValue=e}get key(){return this.m_pValue.key}get context(){return this.m_pValue.context}get slot(){return this.m_pValue.slot}get value(){return this.m_pValue.value}get string(){return this.m_pValue.string}get reference(){return this.m_pValue.reference}get time(){return this.m_pValue.time}get hasValue(){return this.m_pValue.hasValue}get isModified(){return this.m_pValue.isModified}get isSealed(){return this.m_pValue.isSealed||this.m_pValue.isPreliminarily}get isLocked(){return this.m_pValue.isLocked}get isFrozen(){return this.m_pValue.isFrozen}subscribe(e,t){return this.m_pValue.subscribe((()=>e(this)),t),this}unsubscribe(e){return this.m_pValue.unsubscribe(e),this}}class jb{constructor(e,t){this.m_pMutables={},this.m_pImmutables={},this.m_nId=jb.m_nId++,this.m_pStack=e,this.m_pChain=t}get instance(){return this.m_pStack.instance}get l10n(){return this.instance.l10n}get id(){return this.m_nId}get key(){if(!this.m_sKey){let e=this.m_pStack,t="";for(;e;){const i=e.mutableContext;i&&(t+=i.context),e=e.ancestor}this.m_sKey=Gg(t||"*")}return this.m_sKey}get index(){return this.m_pStack.branchIndex}getImmutableValue(e,t){const i=e instanceof Mb?e.id:Tp(e)?e.slot.id:e,s=this.m_pImmutables[i];return s&&s.isSealed?s:(t||(t=this.instance.data.forSlot(e)),t&&$m(this.m_pImmutables,i,t.immutableValue(this.m_pStack)))}validationOf(e){return this.m_pStack.validationOf(e)}isMutableContextOf(e){return e.state===this.m_pStack.state&&e.mutableContext===this.m_pStack.mutableContext}mutableValueOf(e){const t=e instanceof Mb?e.id:Tp(e)?e.slot.id:e,i=this.m_pMutables[t];if(i)return i;const s=this.instance.data.forSlot(t);return s&&$m(this.m_pMutables,t,s.mutableValue(this.m_pStack,!1,this))}immutableValueOf(e){return this.getImmutableValue(e)}contextualValueOf(e){const t=e instanceof Mb?e.id:Tp(e)?e.slot.id:e,i=this.m_pMutables[t];if(i)return i;const s=this.instance.data.forSlot(t);return s&&$m(this.m_pMutables,t,s.mutableValue(this.m_pStack,!0,this))}proxyValueOf(e,t,i,s,o){const n=this;let r;return{get context(){return r||(r=n.getImmutableValue(t,e)),null==r?void 0:r.context},get string(){if(r||(r=n.getImmutableValue(t,e)),r){if(i&&t.pipeable&&!Up(t.pipeable)&&t.pipeable.content&&"value"!==t.pipeable.content){const e=t.pipeable.content;return("name"===e?t.name:"label"===e?t.label:e.string)||""}return r.hasValue&&r.isSealed&&(o&&o(r,n)||r.string)||""}return pp.iterateToString(e.getString(n.m_pStack,n,i,o),s)},get content(){if(r||(r=n.getImmutableValue(t,e)),r){if(i&&t.pipeable&&!Up(t.pipeable)&&t.pipeable.content&&"value"!==t.pipeable.content){const e=t.pipeable.content;return"name"===e?[{value:t.name||"",type:"string",separator:s}]:"label"===e?[{value:t.label||"",type:"string",separator:s}]:e.markdown?[{value:e.markdown,type:"markdown",separator:s}]:e.text?[{value:e.text,type:"text",separator:s}]:[{value:e.string,type:"string",separator:s}]}return[{value:r.hasValue&&r.isSealed&&(o&&o(r,n)||r.string)||"",type:"string",separator:s}]}return e.getContent(n.m_pStack,n,i,s,o)},get value(){return r||(r=n.getImmutableValue(t,e)),r?r.isSealed?r.value:void 0:e.getValue(n.m_pStack)},get reference(){if(r||(r=n.getImmutableValue(t,e)),r&&r.isSealed)return r.reference},get hasValue(){return r||(r=n.getImmutableValue(t,e)),r?r.hasValue&&r.isSealed:e.hasValue(n.m_pStack)},get refs(){return r||(r=n.getImmutableValue(t,e)),r?[r.hasValue&&r.isSealed&&r.reference||t.reference]:e.getRefs(n.m_pStack,i)},update:e=>{r=e}}}variableFor(e,t,i,s,o=", ",n=!1){if(s&&e===s){const e=this.instance;return{id:s,get string(){return e.finishReference},get content(){return[{value:e.finishReference,type:"string",separator:o}]},get reference(){return e.finishReference},hasValue:!0,refs:[s],subscribe:Cp,unsubscribe:Cp}}const r=e instanceof Mb?e.id:Tp(e)?e.slot.id:e,a=e instanceof Mb?e:Tp(e)?e.slot:this.m_pChain.slot(r);if(a instanceof Mb){const e=this.instance.data.forSlot(a);if(e){let t;const s=this,l=a,c={slot:a,id:r,get hasValue(){return(t||(t=s.proxyValueOf(e,l,n,o,i))).hasValue},get value(){return(t||(t=s.proxyValueOf(e,l,n,o,i))).value},get reference(){return(t||(t=s.proxyValueOf(e,l,n,o,i))).reference},get string(){return(t||(t=s.proxyValueOf(e,l,n,o,i))).string},get content(){return(t||(t=s.proxyValueOf(e,l,n,o,i))).content},get refs(){return(t||(t=s.proxyValueOf(e,l,n,o,i))).refs},subscribe:(s,r)=>{const a=r=>{if(t&&t.context===r.context)t.update(r.value),s(c);else{const r=this.proxyValueOf(e,l,n,o,i);!r||t&&t.context===r.context||(t=r,s(c))}};e.groupedHook("OnValueChange","synchronous",(e=>a(e)),r),e.groupedHook("OnSealChange","synchronous",(e=>a(e)),r)},unsubscribe:t=>e.unhook("OnValueChange",t)};return c}}else if(a&&a.length>0){const e=[];if(t){let e=this.m_pStack;for(;e;){const n=e.immutableContext;if(n){const e=t(n,this);if(e){const t=ym(a,(t=>t.id===e));if(t&&t.pipeable&&!Up(t.pipeable)){const e=this.variableFor(t,void 0,i,s,o,!0);if(e)return $m(e,"id",r),e}}}e=e.ancestor}}lm(a,(t=>{if(t.pipeable&&!Up(t.pipeable)){const n=this.variableFor(t,void 0,i,s,o,!0);n&&e.push(n)}}));const n={id:r,get string(){let t,i,s="";return lm(e,(e=>{if(e.slot){const n=e.slot;if(!(n instanceof xb)||!0===e.value)if(!(e.slot instanceof Ib||e.slot instanceof kb)||n.pipeable&&!Up(n.pipeable)&&"value"!==n.pipeable.content){const t=e.string;t&&(s+=(""===s?"":o)+t)}else i=e.slot,e.hasValue&&Hp(e.value)&&(t=(t||0)+e.value)}})),i&&Hp(t)&&(s+=(""===s?"":o)+i.toString(t)),s},get content(){const t=[];let i,s;return lm(e,(e=>{if(e.slot){const o=e.slot;o instanceof xb&&!0!==e.value||(!(e.slot instanceof Ib||e.slot instanceof kb)||o.pipeable&&!Up(o.pipeable)&&"value"!==o.pipeable.content?t.push(...e.content):(s=e.slot,e.hasValue&&Hp(e.value)&&(i=(i||0)+e.value)))}})),s&&Hp(i)&&t.push({value:s.toString(i),type:"string",separator:o}),t},get hasValue(){return!!ym(e,(e=>{if(e.slot){const t=e.slot;if(t.pipeable&&!Up(t.pipeable))return e.hasValue}return!1}))},get refs(){const t=[];return lm(e,(e=>{!e.slot||e.slot instanceof xb&&!0!==e.value||t.push(...e.refs)})),t},subscribe:(t,i)=>lm(e,(e=>e.subscribe((()=>t(n)),i))),unsubscribe:t=>lm(e,(e=>e.unsubscribe(t)))};return n}}}jb.m_nId=0;class Tb{constructor(e,t,i,s,o,n,r,a,l=!1,c=!1){this.m_pSubscriptions=new mg,this.m_bImport=!1,this.m_bImportListener=!1,this.m_bImportModifier=!1,this.m_bVerifySeal=!1,this.m_bAwaiting=!1,this.m_bAllowPrefill=!0,this.m_bDefault=!1,this.m_bFrozen=!1,this.m_nEmitter=0,this.m_bOperation=!1,this.m_nId=Tb.m_pEnumerator.n,this.m_pTransducer=e,this.m_pSlot=t,this.m_sContext=i,this.m_fnChange=o,this.m_pValue=n,this.m_sReference=r,this.m_bSealed=l,this.m_bLocked=c,this.attachContext(s),this.setTime(a)}get id(){return this.m_nId}get key(){return this.m_sKey||(this.m_sKey="_"+Gg(`${this.slot.id}/${this.id}`))}get context(){return this.m_sContext}get contextRef(){return this.m_pContext}get slot(){return this.m_pSlot}get pristine(){return this.m_pValue}set pristine(e){this.isFrozen||this.isLocked||e===this.m_pValue||(this.m_pValue=e,this.m_bVerifySeal=!0,this.m_bAwaiting=!1,this.setTime(),this.emitChange("value"))}get value(){return this.slot.toValue(this.pristine)}set value(e){this.pristine=e}get string(){return this.slot.toString(this.value)}get reference(){return this.m_sReference}get hasValue(){return!!Hp(this.m_nTime)}get isModified(){return this.m_bImport?this.isDirty||this.m_pInitialValue!==this.m_pValue:!this.isDirty&&!Dp(this.m_pValue)}get isPreliminarily(){var e;return(null===(e=this.m_pContext)||void 0===e?void 0:e.instance.isTransducerPresent(this.m_pTransducer))||!1}get isSealed(){var e;return(null===(e=this.m_pContext)||void 0===e?void 0:e.instance.isPreview)||this.m_bSealed}get isDirty(){return!this.isSealed||!this.hasValue}get shouldVerifySeal(){return!!this.m_bVerifySeal&&(this.m_bVerifySeal=!1,!0)}get isFrozen(){return this.m_bFrozen}get isLocked(){return this.m_bLocked}get isAwaiting(){return this.m_bAwaiting}get allowPrefill(){return this.m_bAllowPrefill}get time(){return this.m_nTime}get immutable(){return new Ab(this)}emitChange(e,t=!0,i=!1){if(0!==this.m_nEmitter&&(this.m_nEmitter=jm(this.m_nEmitter)),"value"===e){this.m_fnModifier&&this.m_bImportModifier&&(this.m_bImportModifier=!1),this.m_fnListener&&this.m_bImportListener&&(this.m_bImportListener=!1);const e=this.m_fnModifier&&this.m_fnModifier(this);e&&(this.m_pValue=e.value,this.m_sReference=e.reference,this.setTime()),this.m_fnListener&&this.m_fnListener(this)}if(t){const t=()=>{this.m_nEmitter=0,this.m_fnChange(this,e),this.m_pSubscriptions.emitHook("OnChange",{})};i?this.m_nEmitter=Dm((()=>t())):t()}}setTime(e){this.m_nTime=Dp(this.m_pValue)?void 0:Hp(e)?e:Lp.now,Hp(this.m_nTime)&&(this.m_bAllowPrefill=!1),this.m_bOperation||(this.m_pOperations=void 0)}makeDirty(e){if(!this.isFrozen&&!this.isLocked){const t=this.m_nTime;e?this.m_nTime=void 0:this.hasValue||(this.m_nTime=Lp.now),t!==this.m_nTime&&(this.m_bVerifySeal=!0,this.m_bAwaiting=!1,this.emitChange("value",!0,!0))}}precursor(){this.m_pInitialValue=this.m_pValue,this.m_sInitialReference=this.m_sReference}set(e,t){return this.isFrozen||this.isLocked||!(e!==this.m_pValue||this.m_sReference!==t||this.hasValue&&Dp(this.m_pValue)&&Dp(this.m_sReference)||this.m_bAwaiting)||(this.m_pValue=e,this.m_sReference=t,this.m_bVerifySeal=!0,this.m_bAwaiting=!1,this.setTime(),this.emitChange("value")),this.value}concatenate(e,t,i){if(!ym(this.m_pOperations,(i=>i===(t||e)))){const s=this.string;(this.m_pOperations||(this.m_pOperations=[])).push(t||e),this.m_bOperation=!0,this.set(s+(s&&e&&i||"")+e),this.m_bOperation=!1}return this.string}operation(e,t){return t&&ym(this.m_pOperations,(e=>e===t))||((this.m_pOperations||(this.m_pOperations=[])).push(t),this.m_bOperation=!0,this.set(e),this.m_bOperation=!1),this}reset(e,t){let i=this.m_pInitialValue,s=this.m_sInitialReference;return Dp(i)&&(i=e,s=t),this.set(i,s),this.m_bAllowPrefill=!this.hasValue,this.value}default(e,t){return this.m_bDefault||(this.m_bDefault=!0,this.set(e,t)),this.value}await(){return this.isFrozen||this.isLocked||this.m_bAwaiting||(this.m_bAwaiting=!0,this.m_bVerifySeal=!0,this.emitChange("value")),this}cancelAwait(){return this.m_bAwaiting&&(this.m_bAwaiting=!1,this.m_bVerifySeal=!0,this.emitChange("value")),this}seal(e){this.m_bSealed!==e&&(this.m_bSealed=e,e||this.unlock(),this.m_pContext&&this.m_pContext.instance.isPreview||this.emitChange("seal"))}freeze(){var e;this.m_bFrozen||(this.m_bFrozen=!0,null===(e=this.contextRef)||void 0===e||e.instance.markAsChanged(this.slot,!0))}unfreeze(){var e;this.m_bFrozen&&(this.m_bFrozen=!1,null===(e=this.contextRef)||void 0===e||e.instance.markAsChanged(this.slot,!0))}lock(){var e;this.m_bLocked||(this.m_bLocked=!0,null===(e=this.contextRef)||void 0===e||e.instance.markAsChanged(this.slot,!0))}unlock(){var e;this.m_bLocked&&(this.m_bLocked=!1,null===(e=this.contextRef)||void 0===e||e.instance.markAsChanged(this.slot,!0))}clear(){return this.set(void 0)}import(e,t,i,s=!1){return this.isFrozen||this.isLocked||Dp(e)||(this.m_bImport=this.m_bImportListener=this.m_bImportModifier=!0,this.m_pInitialValue=e,this.m_sInitialReference=t,(e!==this.m_pValue||t!==this.m_sReference||this.m_bAwaiting)&&(this.m_pValue=e,this.m_sReference=t,this.m_bAwaiting=!1,this.m_bVerifySeal=!0,this.setTime(i),this.emitChange("value",!s))),this.value}confirm(){return this.makeDirty(!1),this}dirty(){return this.makeDirty(!0),this}subscribe(e,t,i="asynchronous"){return this.m_pSubscriptions.hook("OnChange",i,(()=>e(this)),t),this}unsubscribe(e){return this.m_pSubscriptions.unhook("OnChange",e),this}useListener(e){return this.m_bImportListener&&(this.m_bImportListener=!1,e(this)),this.m_fnListener=e,this}useModifier(e){if(this.m_bImportModifier&&e){this.m_bImportModifier=!1;const t=e(this);t&&this.set(t.value,t.reference)}return this.m_fnModifier=e,this}attachContext(e){return this.m_pContext||(this.m_pContext=e),this}useContext(e){return this.m_fnContext=e,this}mountContext(e){return this.m_fnContext&&this.m_fnContext(this,e),this}}Tb.m_pEnumerator=new bp;class zb extends Jg{constructor(e,t,i,s,o){super(),this.m_pValues={},this.m_pMutables={},this.m_pImmutables={},this.m_pReferences={},this.m_pTransducer=e,this.m_pSlot=t,this.m_pInstance=i,this.m_pOrchestrator=s,this.m_fnUpdate=o}static getContextHash(e){return zb.m_pContexts[e]||(zb.m_pContexts[e]=Gg(e))}get data(){return this.parent}get transducer(){return this.m_pTransducer}get slot(){return this.m_pSlot}get values(){const e={};return lm(this.m_pValues,((t,i)=>{t&&!t.isDirty&&$m(e,i,{value:t.value,reference:t.reference,time:t.time||0})}),{keys:!0}),e}get hasSealedValues(){return!!ym(this.m_pValues,(e=>e&&e.isSealed&&(sm(e.slot.exportable,!0)||e.slot.actionable)||!1))}storeContextReference(e,t){const i=this.m_pReferences[e||"*"]||$m(this.m_pReferences,e||"*",{});return i[t]||$m(i,t,!0),t}isSlotInBranch(e,t){return ym(e.states,(e=>e.transducers.each((e=>e.slots.each((e=>e.id===this.m_pSlot.id))))||e.branches.each((e=>(t||"each"!==e.culling)&&this.isSlotInBranch(e,t)))))instanceof cb}create(e,t,i,s){return $m(this.m_pValues,e,new Tb(this.transducer,this.slot,e,i,((e,t)=>{const i={transducer:this.transducer,slot:this.slot,data:this.data,id:e.id,context:e.context,get value(){return e.immutable}};switch(t){case"value":this.m_fnUpdate({transducer:this.transducer,slot:this.slot,data:this.data,id:e.id,key:e.context,context:e.contextRef,isSealed:e.isSealed,get value(){return e.immutable}}),this.emitHook("OnValueChange",i),this.data.emitHook("OnValueChange",i);break;case"seal":if(this.emitHook("OnSealChange",i),this.data.emitHook("OnSealChange",i),e.contextRef&&e.isSealed){const t=this.m_pOrchestrator.dependencies(this.slot);this.transducer.parent.each((s=>{!1===t[s.id]&&s!==this.transducer&&s.onSideEffect(e.contextRef,i.transducer)}))}}}),s&&s.b,s&&s.c,s&&s.e,t||rg.has(s&&s.d||0,1),rg.has(s&&s.d||0,2)))}assert(e,t,i){const s=this.m_pValues[e];return s?s.attachContext(i):this.create(e,t,i)}mutableContext(e,t){const i=(null==e?void 0:e.trace)||"";if(!i)return[];const s=this.m_pMutables[i];if(s)return s;const o=[];let n=!1;for(;e;){const i=e.mutableContext;i&&(n=n||t||this.isSlotInBranch(i.branch,!0),n&&o.push({condition:i,context:i.context})),e=e.ancestor}const r=o.length;if(r>0){let e="",t="";for(let i=r-1;i>=0;i--){const s=o[i],n=e&&zb.getContextHash(e+s.context)||s.context;e+=s.context,$m(s,"context",this.storeContextReference(t,n)),t=n}}return $m(this.m_pMutables,i,o)}immutableContext(e){const t=(null==e?void 0:e.trace)||"";if(!t)return[];const i=this.m_pImmutables[t];if(i)return i;const s=[];for(;e;){const t=e.immutableContext;t&&s.push(t),e=e.ancestor}const o=s.length;if(o>0){const e=[];for(let t=o-1;t>=0;t--){let i="",o="",n=0;for(let r=t;r>=0;r--){const t=s[r],a=i&&zb.getContextHash(i+t.context)||t.context;e.push({condition:t,context:this.storeContextReference(o,a),relevance:n++}),i+=t.context,o=a}}return e.sort(((e,t)=>t.relevance-e.relevance)),$m(this.m_pImmutables,t,e)}return[]}getValues(e){const t=[];return lm(this.m_pReferences[e],((e,i)=>{const s=this.m_pValues[i];s?s.isSealed&&s.hasValue&&t.push(s.immutable):t.push(...this.getValues(i))}),{keys:!0}),t}mutableValue(e,t,i){const s=this.mutableContext(e,t);return this.assert(s.length>0?s[0].context:"*",t,i)}immutableValue(e){const t=this.immutableContext(e),i=t.length;for(let e=0;e<i;e++){const i=this.m_pValues[t[e].context];if(i)return(i.isSealed||i.isPreliminarily)&&i.immutable||void 0}const s=this.m_pValues["*"];return s&&(s.isSealed||s.isPreliminarily)&&s.immutable||void 0}immutableValues(e){const t=this.immutableContext(e),i=t.length;for(let e=0;e<i;e++){const i=t[e],s=this.getValues(i.context);if(s.length>0||this.isSlotInBranch(i.condition.branch,!1))return s}return this.getValues("*")}isModified(e){const t=this.m_pValues[e];return t&&t.isModified||!1}snapshot(){const e=[];if(lm(this.m_pValues,(t=>{if(t){let i=!1;const s=rg.convert(t.isSealed,t.isLocked),o={a:t.context};Ap(t.pristine)&&($m(o,"b",t.pristine),i=!0),Ep(t.reference)&&($m(o,"c",t.reference),i=!0),s>0&&($m(o,"d",s),i=!0),Hp(t.time)&&($m(o,"e",t.time),i=!0),i&&e.push(o)}})),e.length>0)return{a:this.slot.id,b:e}}restore(e){e.a===this.slot.id&&lm(e.b,(e=>{this.create(e.a,!1,void 0,e)}))}freeze(){lm(this.m_pValues,(e=>{e&&e.freeze()}))}unfreeze(){lm(this.m_pValues,(e=>{e&&e.unfreeze()}))}importValue(e,t){this.assert(e,!0).import(t.value,t.reference,t.time,!this.m_pInstance.isInitialized)}import(e){lm(e,((e,t)=>this.importValue(t,e)),{keys:!0})}hasValue(e){return this.immutableValues(e).length>0}getValue(e){const t=this.immutableValues(e);if(t.length>0){const e=t[0].slot;if(e instanceof xb)return!!ym(t,(e=>!0===e.value));if(e instanceof Ib||e instanceof kb){let e;return lm(t,(t=>{Hp(t.value)&&(e=(e||0)+t.value)})),e}}}getString(e,t,i,s){const o=[];let n,r;return lm(this.immutableValues(e),(e=>{if(!(i&&e.slot instanceof xb&&!0!==e.value))if(i&&e.slot.pipeable&&!Up(e.slot.pipeable)&&e.slot.pipeable.content&&"value"!==e.slot.pipeable.content){const t=e.slot.pipeable.content;o.push(("name"===t?e.slot.name:"label"===t?e.slot.label:t.string)||"")}else if(e.slot instanceof Ib||e.slot instanceof kb)r=e.slot,Hp(e.value)&&(n=(n||0)+e.value);else{const i=s&&s(e,t)||e.string||"";i&&o.push(i)}})),r&&Hp(n)&&o.push(r.toString(n)),o}getContent(e,t,i,s,o){const n=[];let r,a;return lm(this.immutableValues(e),(e=>{if(!(i&&e.slot instanceof xb&&!0!==e.value))if(i&&e.slot.pipeable&&!Up(e.slot.pipeable)&&e.slot.pipeable.content&&"value"!==e.slot.pipeable.content){const t=e.slot.pipeable.content;"name"===t?n.push({value:e.slot.name||"",type:"string",separator:s}):"label"===t?n.push({value:e.slot.label||"",type:"string",separator:s}):t.markdown?n.push({value:t.markdown,type:"markdown",separator:s}):t.text&&n.push({value:t.text,type:"text",separator:s})}else e.slot instanceof Ib||e.slot instanceof kb?(a=e.slot,Hp(e.value)&&(r=(r||0)+e.value)):n.push({value:o&&o(e,t)||e.string||"",type:"string",separator:s})})),a&&Hp(r)&&n.push({value:a.toString(r),type:"string",separator:s}),n}getRefs(e,t){const i=[];return lm(this.immutableValues(e),(e=>{t&&e.slot instanceof xb&&!0!==e.value||i.push(e.hasValue&&e.reference||e.slot.reference)})),i}inherit(e){lm(this.m_pValues,((t,i)=>{t&&t.subscribe((s=>{e.data.each((e=>{if(e.slot.id===this.slot.id){const o=e.m_pValues[i];return o&&(o.set(s.pristine,s.reference),t.unsubscribe(this)),!0}return!1}))}),this,"synchronous")}),{keys:!0})}}zb.m_pContexts={};class Eb extends vg{constructor(e,t,i){super(),this.m_pValues={},t.states.each((s=>{s.transducers.each((s=>{s.slots.each((o=>{this.forSlot(o)||zb.pushToMatrix(new zb(s,o,e,t,i),this)}))}))}))}get exportables(){const e=[];return this.each((t=>{sm(t.slot.exportable,!t.slot.actionable)&&e.push(t)})),e}get hasSealedValues(){return this.each((e=>e.hasSealedValues))}forSlot(e){const t=e instanceof Mb?e.id:Tp(e)?e.slot.id:e;if(t){let e=this.m_pValues[t];return e||(this.each((i=>i.slot.id===t&&(e=i,!0))),$m(this.m_pValues,t,e)),e}}freeze(){this.each((e=>e.freeze()))}unfreeze(){this.each((e=>e.unfreeze()))}}!function(e){e[e.None=0]="None",e[e.OntologyInvalidState=1]="OntologyInvalidState",e[e.OntologyInvalidTransducer=2]="OntologyInvalidTransducer",e[e.OntologyInvalidBranch=4]="OntologyInvalidBranch",e[e.OntologyInvalidCondition=8]="OntologyInvalidCondition",e[e.OntologyInvalidJump=16]="OntologyInvalidJump",e[e.ResumeInvalidHash=32]="ResumeInvalidHash",e[e.ResumeInvalidData=64]="ResumeInvalidData",e[e.ResumeInvalidStack=128]="ResumeInvalidStack"}(Lb||(Lb={}));class Ob extends Jg{constructor(e,t,i,s){super(),this.m_pTransducer=e,this.m_pContext=t,this.m_bEnabled=i,this.m_nValidates=0,this.m_bPass=s}get transducer(){return this.m_pTransducer}get isEnabled(){return this.m_bEnabled}get isPassed(){return!0===this.m_bPass}get isFailed(){return!1===this.m_bPass}validate(e,t,i,s,o){const n=++this.m_nValidates;if(e&&this.isEnabled){const r=Up(this.m_bPass),a=this.transducer.shouldVerifySeal(this.m_pContext);if(!r||a)return e.evaluate(rb.of({await:e=>{if(this.m_pGuard&&this.m_pGuard.cancel(),this.m_pGuard=e,this.transducer.isAwaiting(this.m_pContext))return e;this.transducer.onBeforeValidate(this.m_pContext);const t=i||this.transducer.onValidate(this.m_pContext,!0===this.m_bPass?"pass":!1===this.m_bPass?"fail":"unknown",e);return t instanceof rb&&t.isAlive?this.transducer.seal(this.m_pContext,!1):this.m_pGuard=void 0,t},promise:i=>{this.m_pGuard=void 0,n===this.m_nValidates&&s(i)&&(this.m_bPass=sm(i.payload),this.transducer.seal(this.m_pContext,this.m_bPass),this.transducer.onValidated(this.m_pContext,this.m_bPass?"pass":"fail",r?"revalidate":t),o()),e.evaluate(i,this.m_pContext,s)}}),this.m_pContext,s),!0;this.transducer.seal(this.m_pContext,this.m_bPass||!1)}return!1}invalidate(){this.m_bPass=void 0,this.transducer.seal(this.m_pContext,!1)}cancel(){this.m_nValidates++,this.transducer.await=void 0,this.transducer.seal(this.m_pContext,!1)}snapshot(){const e=rg.convert(this.isEnabled,Up(this.m_bPass),this.m_bPass||!1);if(e>0)return{a:this.transducer.id,b:e}}}class Pb extends vg{constructor(){super(...arguments),this.m_pCache=[]}get transducers(){const e=[];return this.each((t=>{t.isEnabled&&e.push(t.transducer)})),e}get isEnabled(){return this.each((e=>e.isEnabled))}get isPassed(){return!this.each((e=>e.isEnabled&&!e.isPassed))}create(e,t,i){return this.pushToMatrix(new Ob(e,t,i))}resume(e,t,i){return this.pushToMatrix(new Ob(e,t,rg.has(i.b,1),rg.has(i.b,2)?rg.has(i.b,3):void 0))}forTransducer(e){let t;return this.each((i=>i.transducer===e&&(t=i,!0))),t||vm(this.m_pCache,(t=>t.transducer===e))}clear(){this.each((e=>{this.m_pCache.push(e)})),super.clear()}}class Rb extends Jg{constructor(e,t,i,s,o,n,r,a,l,c,u,h,d,p,m){super(),this.m_pChecksum=new bp,this.m_nChecksum=0,this.m_bCanceled=!1,this.m_pOrchestrator=e,this.m_pAncestor=t,this.m_pState=i,this.m_pBranch=s,this.m_pBranched=n,this.m_bBranching=d,this.m_nBranch=p,this.m_fnBranch=m,this.m_pCondition=o,this.m_pValidators=r||new Pb,this.m_nOpcode=a,this.m_nCounter=l,this.m_nSize=0,this.m_bReturn=c,this.m_bReturnOverride=u,this.m_pReturn=h,this.m_bValidated=!1,this.m_nValidations=0,this.m_bPass=!1,this.m_bEntered=!1,this.m_sChecksum=(i&&i.id||"")+(s&&o&&"each"===s.culling?o.id:"")}static create(e,t,i,s,o,n,r,a,l=0,c=0,u=!1,h=!1,d,p=!1,m){return e.pushToMatrix(new Rb(t,s,i,o,n,r,a,l,c,u,h,d,p,m))}get orchestrator(){return this.m_pOrchestrator}get assertPromise(){return e=>this.assert(e)}get stack(){return this.matrix()}get successorMode(){return this.orchestrator.preview?"preview":"live"}get id(){return this.hash}get instance(){return this.orchestrator.instance}get ancestor(){return this.m_pAncestor}get trace(){var e;return((null===(e=this.ancestor)||void 0===e?void 0:e.trace)||"")+this.id}get state(){return this.m_pState}get transducers(){return this.m_pValidators.transducers}get branch(){return this.m_pBranch}get branchIndex(){return this.m_nBranch||1}get condition(){return this.m_pCondition}get mutableContext(){return this.condition&&"each"===this.condition.branch.culling&&this.condition.branch.conditions.count>1&&this.condition||void 0}get immutableContext(){return this.condition}get checksum(){return this.m_sChecksum+this.m_nChecksum}get isBranch(){return this.m_bBranching}get isScheduled(){return 9===this.m_nOpcode}get isAtFinish(){return this.isPopped||9===this.m_nOpcode&&this.m_bReturn&&!this.m_pReturn}get isEvaluating(){return 2===this.m_nOpcode||5===this.m_nOpcode||(3===this.m_nOpcode||9===this.m_nOpcode)&&this.m_nCounter>0||8===this.m_nOpcode}create(e,t,i,s,o){return this.stack.pushToMatrix(new Rb(this.orchestrator,e,t,i,s,void 0,void 0,0,0,!1,!1,void 0,!1,void 0,o),{index:this.index+(this.isPopped?0:1),recalculate:!0,emit:"push"})}assert(e){return e.isAsynchronous&&(this.m_nSize=0),!this.isPopped&&!this.m_bCanceled}validate(e){const t=++this.m_nValidations;if(e||this.m_pValidators.clear(),this.state){const i=this.state,s=new jb(this,this.orchestrator.chain);if(this.m_pValidators.isPassed)i.evaluate(rb.of({await:e=>this.orchestrator.preview||i.onValidate(s,this.m_bValidated?this.m_bPass?"pass":"fail":"unknown",e),promise:o=>{if(t===this.m_nValidations&&this.assert(o)){const t=o.payload||!1,i=!this.m_bValidated||this.m_bPass!==t,n=this.m_bValidated;this.m_bValidated=!0,this.m_bPass=t,e&&(e.condition=t),i&&this.state&&(this.state.onValidated(s,t?"pass":"fail",n?"revalidate":"initial"),t&&this.orchestrator.validated(this.state)),e||this.step(t?7:3)}i.evaluate(o,s,this.assertPromise)}}),s,this.assertPromise);else{const t=!this.m_bValidated||this.m_bPass,i=this.m_bValidated;this.m_bValidated=!0,this.m_bPass=!1,e&&(e.condition=!1),t&&this.state.onValidated(s,"fail",i?"revalidate":"initial")}}}return(e,t){this.m_nCounter--,!e||this.m_bReturnOverride&&!this.m_bReturn||(this.m_bReturn=!this.m_bReturnOverride||t===this.m_pReturn,this.m_pReturn=t,this.m_bReturnOverride=!0),this.step()}step(e){if(!this.isPopped){const t=new jb(this,this.orchestrator.chain);if(this.m_nSize>1024)return this.m_nSize=0,this.orchestrator.cycle(!0),void Sm((()=>{this.orchestrator.cycle(!1),this.step(e)}));switch(this.m_nSize++,this.m_nChecksum=this.m_pChecksum.n,this.m_nOpcode=Rp(e)?e:this.m_nOpcode,this.m_nOpcode){case 0:if(this.m_bReturnOverride=!1,this.branch){const e=this.branch,i=this.state,s=e=>{i&&i.evaluate(e,t,this.assertPromise)};this.m_nOpcode=1,s(rb.of({await:i=>this.orchestrator.preview||e.onCondition(t,i),promise:i=>{if(this.assert(i))if(this.m_nOpcode=2,this.m_nCounter=0,i.payload)if(this.m_nCounter="each"!==e.culling?e.conditions.count:this.condition?1:0,1===this.m_nCounter&&"each"===e.culling&&this.condition){const i=this.condition;s(rb.of({await:e=>this.orchestrator.preview?!this.orchestrator.previewCompact||0===i.index:i.onCondition(t,e),promise:o=>{this.assert(o)&&(this.m_nCounter=0,this.m_bReturn=this.m_bReturn||o.payload||!1,o.payload&&(this.m_fnBranch&&!this.m_nBranch&&(this.m_nBranch=this.m_fnBranch()),i.onApproved(t),e.onReady(t)),this.step()),s(o)}}))}else this.m_nCounter>0?e.conditions.each((i=>(s(rb.of({await:e=>this.orchestrator.preview||i.onCondition(t,e),promise:o=>{this.assert(o)&&this.m_nCounter>0&&("all"!==e.culling&&"none"!==e.culling&&o.payload?(this.m_pCondition=i,this.m_bReturn=!0,this.m_nCounter=0,i.onApproved(t),e.onReady(t)):this.m_nCounter--,"all"!==e.culling&&"none"!==e.culling||(("none"!==e.culling||this.orchestrator.preview?!o.payload:o.payload)?(this.m_bReturn=!1,this.m_nCounter=0):0===this.m_nCounter&&(this.m_bReturn=!0,i.onApproved(t),e.onReady(t))),this.step()),s(o)}})),0===this.m_nCounter))):(e.onReady(t),this.m_bReturn=!0,this.step());else this.step();s(i)}}))}else this.state?this.step(4):this.step(10);break;case 1:case 5:case 6:case 8:break;case 2:if(0===this.m_nCounter){if(this.branch)if(this.m_bReturn){if(this.m_pReturn=this.branch.entry(this.successorMode),!this.branch.spawn){this.step(9);break}this.m_bReturn=!1,this.m_pReturn&&this.orchestrator.spawn(this.m_pReturn)}else this.branch.onSkip(t);this.step(10)}break;case 4:if(this.state){const e=this.state;this.m_nOpcode=5,this.m_pReturn=this.state.successor(this.successorMode),this.m_bReturn=!0,e.transducers.each((e=>e.seal(t,!1))),e.evaluate(rb.of({await:i=>this.orchestrator.preview||e.onEnterCondition(t,i),promise:i=>{this.assert(i)&&(i.payload?(this.m_nOpcode=3,this.m_nCounter=e.transducers.count,this.m_pValidators.clear(),this.m_nCounter>0?e.transducers.each((i=>{e.evaluate(rb.of({await:e=>this.orchestrator.preview||i.onEnterCondition(t,e),promise:s=>{this.assert(s)&&(this.m_pValidators.create(i,t,s.payload||!1),this.m_nCounter--,this.step()),e.evaluate(s,t,this.assertPromise)}}),t,this.assertPromise)})):this.step()):(e.onSkip(t),this.step(9))),e.evaluate(i,t,this.assertPromise)}}),t,this.assertPromise)}else this.step(10);break;case 3:if(this.state){if(0===this.m_nCounter)if(this.m_nOpcode=6,this.state.isMain)this.step(7);else{let e=!1;this.m_bValidated=!1,this.m_bPass=!1,this.m_bEntered=!0;const i=ab.for({await:e=>{if(this.state)return this.orchestrator.snapshot.push(),this.state.await=e,this.state.emitHook("OnEnter",{state:this.state,context:t}),this.state.onEnter(t,e)},promise:t=>{this.assert(t)&&(this.state&&(this.state.await=void 0),t.isCanceled?(this.m_nValidations++,this.m_pValidators.each((e=>e.cancel())),this.orchestrator.cancel()):e?this.step(7):this.validate())},conditional:!0});i.isAlive&&(this.m_pValidators.each((s=>{s.isEnabled?(ab.for({await:e=>(s.transducer.emitHook("OnEnter",{transducer:s.transducer,context:t}),s.transducer.await=e,s.transducer.onEnter(t,e)),promise:e=>{this.assert(e)&&e.isAsynchronous&&s.validate(this.state,"revalidate",this.orchestrator.preview,this.assertPromise,(()=>this.validate(i)))},continuous:!0}),e=s.validate(this.state,"initial",this.orchestrator.preview,this.assertPromise,(()=>this.validate(i)))||e):s.transducer.onSkip(t)})),e||(this.validate(i),e=!0))}}else this.step(10);break;case 7:if(this.state){const e=this.state;this.m_nOpcode=8,e.evaluate(rb.of({await:i=>!!e.isMain||e.onLeaveCondition(t,i),promise:i=>{if(this.assert(i))if(i.payload)if(e.isMain||(this.m_pValidators.count>0&&this.orchestrator.snapshot.make(),this.m_bEntered=!1,this.m_pValidators.each((e=>{e.isEnabled&&e.transducer.onLeave(t)})),e.onLeave(t)),this.m_nOpcode=9,e.branches.count>0){if(e.branches.each((e=>{this.m_nCounter+="each"===e.culling&&e.conditions.count>0?e.conditions.count:1})),this.m_nCounter>0){const t=this.orchestrator.pointer.get();e.branches.each((e=>{if(this.m_bBranching=!e.isLast,t&&t===this.orchestrator.pointer.get()&&this.orchestrator.pointer.release(),"each"===e.culling&&e.conditions.count>0){const t=[],i=()=>++s;let s=0;e.conditions.each((s=>{t.push(this.create(this,this.state,e,s,i))})),lm(t,(e=>e.step()))}else this.create(this,this.state,e).step()}))}}else this.step();else this.m_nOpcode=6,ab.for({await:e=>this.state&&this.state.onLeaveError(t,e),promise:e=>{this.assert(e)&&this.step(7)}});e.evaluate(i,t,this.assertPromise)}}),t,this.assertPromise)}else this.step(10);break;case 9:if(0===this.m_nCounter&&this.orchestrator.pointer.assure(this)===this){if(this.branch&&(this.m_pBranched=this.branch,this.branch.onEnter(t)),this.m_pReturn){const e=this.ancestor&&this.ancestor.state,t=e&&e.successor(this.successorMode);if(!e||this.m_pReturn.uniqueId>e.uniqueId&&(!t||this.m_pReturn.uniqueId<t.uniqueId)){this.m_pState=this.m_pReturn,this.m_pBranch=void 0,this.m_sChecksum+=this.m_pReturn.id,this.step(0);break}}this.step(10)}break;case 10:this.m_pBranched&&(this.m_pBranched.onLeave(t),this.m_pBranched=void 0),this.orchestrator.logger(this,this.ancestor,this.state,this.branch,this.condition,this.m_bReturn?this.m_pReturn||!0:void 0),this.pop(),this.orchestrator.pointer.get()===this&&this.orchestrator.pointer.release(),this.ancestor&&this.ancestor.return(this.m_bReturn,this.m_pReturn)}}}invalidate(e){const t=this.m_pValidators.forTransducer(e);t&&t.invalidate()}validationOf(e){const t=this.m_pValidators.forTransducer(e);if(t){if(t.isPassed)return"pass";if(t.isFailed)return"fail"}return"unknown"}cancel(){this.m_bCanceled=!0}destroy(){if(this.isPopped&&this.state&&!this.state.isMain){const e=new jb(this,this.orchestrator.chain);this.m_bEntered&&(this.m_pValidators.each((t=>{t.isEnabled&&t.transducer.onCancel(e)})),this.state&&this.state.onCancel(e)),this.m_pBranched&&this.m_pBranched.onCancel(e)}}snapshot(){const e={a:this.id},t=rg.convert(this.m_bReturn,this.m_bReturnOverride,this.m_bBranching);let i=0;switch(this.m_nOpcode){case 2:0===this.m_nCounter&&(i=2);break;case 4:case 5:i=4;break;case 3:i=0===this.m_nCounter?3:4;break;case 6:case 7:case 8:i=3;break;case 9:i=9,this.m_nCounter>0&&$m(e,"b",this.m_nCounter);break;case 10:i=10}if(i>0&&$m(e,"c",i),t>0&&$m(e,"d",t),this.ancestor&&$m(e,"e",this.ancestor.id),this.state&&$m(e,"f",this.state.id),this.branch&&$m(e,"g",this.branch.id),this.m_pBranched&&$m(e,"h",this.m_pBranched.id),this.condition&&$m(e,"i",this.condition.id),this.m_pReturn&&$m(e,"j",this.m_pReturn.id),this.m_pValidators.count>0){const t=[];this.m_pValidators.each((e=>{const i=e.snapshot();i&&t.push(i)})),t.length>0&&$m(e,"k",t)}return this.m_nBranch&&$m(e,"l",this.m_nBranch),e}}class Hb extends vg{constructor(){super(),this.m_sChecksum="0",this.isParsing=!1,this.hook("OnItemPop","synchronous",(e=>{const t=e.item;this.m_sChecksum+="/"+t.checksum,t.destroy()}))}get checksum(){let e=this.m_sChecksum;return this.each((t=>{e+="/"+t.checksum})),e}clear(){super.clear(),this.m_sChecksum=""}}class Fb{constructor(e,t,i){this.m_pTransducers=[];const s=i||new Hb,o={};let n=!1;this.m_pOrchestrator=e,$m(s,"isParsing",!0),s.clear(),lm(t.a,(t=>{const i=new Pb,r=e.chain.state(t.f||""),a=e.chain.branch(t.g||""),l=e.chain.branch(t.h||""),c=e.chain.condition(t.i||""),u=e.chain.state(t.j||"");let h;t.e&&(h=o[t.e],n=n||!(h instanceof Rb));const d=t.d||0,p=new jb($m(o,t.a,Rb.create(s,e,r,h,a,c,l,i,t.c,t.b,rg.has(d,1),rg.has(d,2),u,rg.has(d,3),t.l)),e.chain);lm(t.k,(t=>{const s=e.chain.transducer(t.a);s&&i.resume(s,p,t).isEnabled&&this.m_pTransducers.push(s)})),n=n||i.count!==Vp(t.k)})),$m(s,"isParsing",!1),n||(t.b?this.m_pPointer=o[t.b]:this.m_pPointer=s.firstItem)}get pointer(){return this.m_pPointer}get context(){return this.pointer&&new jb(this.pointer,this.m_pOrchestrator.chain)}get state(){return this.pointer&&this.pointer.state}get transducers(){const e=this.state;return e?fm(this.m_pTransducers,(t=>t.state.id===e.id)):[]}}class Ub extends Jg{constructor(e,t,i,s,o){if(super(),this.m_pStack=new Hb,this.m_pMomentsCache={},this.m_pChecksums={},this.m_pCache={},this.m_nChecksum=0,this.m_pHistory=[],this.m_pSnapshots=[],this.m_nSnapshots=0,this.m_nSnapshot=0,this.m_pChanges={},this.m_pChangesBuffer={},this.m_nEvents=0,this.m_bInitialized=!1,this.m_bRunning=!1,this.m_bProcessing=!1,this.m_bIsAtFinish=!1,this.m_bStopped=!0,this.m_bPaused=!1,this.m_nErrors=Lb.None,this.m_nTransaction=0,this.m_nAutoPushForward=0,this.m_pOrchestrator=e,this.m_bAllowConcurrency="multi"===t,this.m_bAutoPushForward=e.autoPushForward,this.m_sPreviewMode=e.preview,this.m_pStackOrchestrator={instance:this,get preview(){return"disabled"!==e.preview},get previewCompact(){return"compact"===e.preview},spawn:t=>e.spawn(new Ub(e,"multi",t),this.index+(this.isPopped?0:1)).start(),validated:t=>{(e.autoPushForward||this.isPreview||this.m_pOrchestrator.events.onInstanceStepForward(this,t))&&(this.m_bProcessing=!0,this.m_pOrchestrator.events.onInstanceProcessing(this,!0),this.pushForward())},cycle:e=>{this.m_bProcessing=e,this.m_pOrchestrator.events.onInstanceProcessing(this,e)},cancel:()=>{!this.isRunning||e.autoPushForward||this.isPreview||this.stepBackward()||this.stop()},snapshot:{push:()=>{this.m_pSnapshot&&(this.m_pSnapshots.length>this.m_nSnapshots&&this.m_pSnapshots.splice(this.m_nSnapshots),this.m_pSnapshots.push(this.m_pSnapshot),this.m_nSnapshots++,this.m_pSnapshot=void 0,this.map(!0))},make:()=>{const e={a:this.stackSnapshots(),b:this.m_pPointer&&this.m_pPointer.id};this.m_pSnapshot={moment:e,stack:new Fb(this.m_pStackOrchestrator,e)}}},pointer:{get:()=>this.m_pPointer,assure:e=>(this.m_pPointer||this.bind(e),this.m_pPointer),release:()=>this.release()},chain:e.chain,logger:(t,i,s,o,n,r)=>{if(e.logger&&i){const e=r instanceof cb?pp.padLeft(r.uniqueId,"0",4):r?"End":"-";this.logger(`Return<${e}> to Stack<${pp.padLeft(i.uniqueId,"0",4)}>`,s,o,n,t)}}},this.m_pData=new Eb(this,e,(e=>{var t,i;const s=this.m_pOrchestrator.dependencies(e.slot);if(this.m_pEvents||(this.m_pEvents={},this.m_nEvents=Dm((()=>{this.isPreview?this.m_pOrchestrator.events.onInstanceUpdate(this):lm(um(this.m_pEvents,(e=>({id:e.id,transducer:e.transducer}))).sort(((e,t)=>e.id-t.id)),(e=>this.goto(e.id,e.transducer))),this.m_pEvents=void 0,this.m_pSideEffects=void 0}))),lm(s,((e,t)=>{this.setChanged(t)}),{keys:!0}),this.m_pTransaction&&this.m_pTransaction.state.id!==e.transducer.state.id)this.m_pTransaction&&this.m_pTransaction.state.index<e.transducer.state.index&&(null===(i=null===(t=e.context)||void 0===t?void 0:t.mutableValueOf(e.slot))||void 0===i||i.precursor());else if(this.m_pEvents[e.key+e.id]=e,e.context){const t=e.context;e.transducer.parent.each((i=>{if(!(!1!==s[i.id]||i===e.transducer||this.m_pSideEffects&&this.m_pSideEffects[e.transducer.id]&&this.m_pSideEffects[e.transducer.id][i.id])){const s=this.m_pSideEffects||(this.m_pSideEffects={});(s[e.transducer.id]||(s[e.transducer.id]={}))[i.id]=!0,i.onSideEffect(t,e.transducer)}}))}this.m_pOrchestrator.events.onInstanceData(this,e)})),this.m_pStack.hook("OnItemPush","synchronous",(e=>{this.m_bIsAtFinish=!1,this.m_bInitialized||(o&&o(this),this.m_bInitialized=!0,this.emitHook("OnCreate",{instance:this}),this.m_pOrchestrator.events.onInstanceCreate(this),this.logger("Created")),this.logger("Push",e.item.state,e.item.branch,e.item.condition,e.item)})),this.m_pStack.hook("OnItemPop","synchronous",(t=>{if(this.logger("Pop",t.item.state,t.item.branch,t.item.condition,t.item),t.item.destroy(),!this.m_pStack.isParsing)if(this.m_pStack.count>0){if(this.m_pPointer===t.item&&this.isRunning){let e;this.release(),this.m_pStack.reverseEach((t=>(e&&e!==t.ancestor||(e=t.ancestor,t.isScheduled&&this.bind(t).step()),this.m_pPointer instanceof Rb)))}}else this.m_bIsAtFinish=!0,e.autoPushForward||this.isPreview||this.finish()})),this.hook("OnItemPop","synchronous",(()=>{if(this.m_bRunning){const e=this.presentMoment,t=this.isPaused?"paused":this.isStopped?"stopped":"finished";this.m_bRunning=!1,"finished"!==t&&e&&e.state.await&&e.state.await.cancel(),this.release(),this.m_pStack.clear(),this.m_pSnapshots.splice(0),this.m_pHistory.splice(0),this.m_nSnapshots=0,this.m_nSnapshot=0,this.m_pSnapshot=void 0,this.isPaused?(this.emitHook("OnPause",{instance:this}),this.m_pOrchestrator.events.onInstancePause(this),this.logger("Pause")):this.isStopped?(this.emitHook("OnStop",{instance:this}),this.m_pOrchestrator.events.onInstanceStop(this),this.logger("Stop")):(this.emitHook("OnFinish",{instance:this}),this.m_pOrchestrator.events.onInstanceFinish(this),this.logger("Finish")),this.emitHook("OnEnd",{instance:this,type:t}),this.m_pOrchestrator.events.onInstanceEnd(this,t),this.logger("End")}})),i&&(Rb.create(this.m_pStack,this.m_pStackOrchestrator,i),this.m_pInitial={a:this.stackSnapshots()},s))if(s.a===this.fingerprint){const e=Vp(s.b);if(e>0){const t=dp.range(tm(s.d,e-1),0,e-1);let i=0;lm(s.c,(e=>{const t=this.data.forSlot(e.a);t?t.restore(e):this.m_nErrors|=Lb.ResumeInvalidData})),lm(s.b,(e=>{const s=new Fb(this.m_pStackOrchestrator,e),o=s.state,n=s.context;o&&n&&(this.m_pSnapshots.push({moment:e,stack:s}),this.m_nSnapshots+=this.addMoment(this.m_pHistory,e,o,s.transducers,n,i<t?"past":i>t?"future":"present")),i++})),this.revert(t)}else this.m_nErrors|=Lb.ResumeInvalidStack}else this.m_nErrors|=Lb.ResumeInvalidHash}get successorMode(){return this.isPreview?"preview":"live"}get id(){return this.hash}get l10n(){return this.m_pOrchestrator.l10n}get fingerprint(){return this.m_pOrchestrator.fingerprint}get allowConcurrency(){return this.m_bAllowConcurrency}get isPreview(){return"disabled"!==this.m_pOrchestrator.preview}get isInitialized(){return this.m_bInitialized}get isRunning(){return this.m_bRunning}get isStopped(){return this.m_bStopped}get isPausing(){return this.m_pOrchestrator.states.ontology.isPausing}get isPaused(){return this.m_bPaused}get isAtStart(){return 0===this.m_nSnapshots}get isAtHead(){const e=this.history,t=Wp(e,e.length-1);return t&&"present"===t.tense||!1}get isAtFinish(){return!!this.m_bIsAtFinish||!this.m_pOrchestrator.autoPushForward&&!this.isPreview&&this.m_pPointer instanceof Rb&&(!this.m_pPointer.state||!this.m_pPointer.state.successor(this.successorMode)&&!this.m_pPointer.state.branches.each((e=>e.entry(this.successorMode)instanceof cb)))&&!this.m_pStack.reverseEach((e=>this.m_pPointer!==e&&(e.isBranch||!e.isAtFinish)))}get isFinishable(){return!this.isPreview&&this.isRunning&&this.isAtFinish}get isFinishing(){return!!this.m_fnFinishing}get isFinished(){return!this.isRunning&&!this.isPaused&&!this.isStopped}get finishReference(){return this.m_sFinishReference||""}get hasDataCollected(){return this.data.hasSealedValues}get lookup(){return this.m_pOrchestrator.chain}get data(){return this.m_pData}get history(){return this.map(!1)}get checksum(){const e=`${this.m_nChecksum}/${this.m_pStack.checksum}`;return this.m_pChecksums[e]||(this.m_pChecksums[e]=Gg(e))}get presentMoment(){return vm(this.history,(e=>"present"===e.tense))}get snapshot(){const e=this.history,t={a:this.fingerprint,b:[]};if(lm(e,(i=>{"present"===i.tense&&t.b.length+1<e.length&&$m(t,"d",t.b.length),t.b.push(i.snapshot)})),this.data.count>0){const e=[];this.data.each((t=>{const i=t.snapshot();i&&e.push(i)})),e.length>0&&$m(t,"c",e)}return this.allowConcurrency&&$m(t,"e",!0),t}get errors(){return this.m_nErrors}setChanged(e){this.m_pChanges[e]=!0,this.m_pChangesBuffer[e]&&delete this.m_pChangesBuffer[e]}logger(e,t,i,s,o){if(this.m_pOrchestrator.logger){const n=t?pp.padLeft(t.uniqueId,"0",4):"----",r=i?pp.padLeft(i.uniqueId,"0",4):"----",a=s?pp.padLeft(s.uniqueId,"0",4):"----",l=o?pp.padLeft(o.uniqueId,"0",4):"----";this.m_pOrchestrator.logger(`Instance<${pp.padLeft(this.uniqueId,"0",4)}> | State<${n}> Branch<${r}> Condition<${a}> | Stack<${l}> | ${e}`)}}cancelPromises(){this.m_bProcessing&&(this.m_pOrchestrator.events.onInstanceProcessing(this,!1),this.m_bProcessing=!1),this.m_nAutoPushForward=jm(this.m_nAutoPushForward),this.m_nEvents=jm(this.m_nEvents),this.m_pEvents=void 0,this.m_fnFinishing&&(this.m_fnFinishing(),this.m_fnFinishing=void 0)}bind(e){return this.m_pPointer=e,this.m_pPointer}release(){this.m_pPointer=void 0}restore(e,t){this.m_pSnapshot=void 0;const i=new Fb(this.m_pStackOrchestrator,e,this.m_pStack);return this.m_pPointer&&this.m_pPointer.cancel(),i.pointer?(this.bind(i.pointer),t&&i.pointer.invalidate(t),this.isRunning&&i.pointer.step(),!0):(this.release(),this.isRunning&&this.pop(),!1)}revert(e,t){const i=this.m_pHistory.length;if(0===i)return;this.m_nSnapshots=dp.range(e,0,i-1),this.m_nSnapshot=this.m_nSnapshots>0&&i>0?this.m_nSnapshots-1:0;for(let e=i-1;e>=0&&!(e<this.m_nSnapshots&&"past"===this.m_pHistory[e].tense);e--)this.m_pHistory[e].tense=e===this.m_nSnapshots?"present":e<this.m_nSnapshots?"past":"future";const s=this.m_pHistory[this.m_nSnapshots].snapshot,o=t?this.invalidateHistory(this.m_nSnapshots):this.m_pHistory.slice(0,this.m_nSnapshots);this.restore(s,t)&&this.addPointer(o)}goto(e,t){const i=this.getMoment(e);if(i&&this.isRunning){let e="present"===i.tense&&this.m_pPointer&&!i.context.isMutableContextOf(this.m_pPointer)&&this.m_pPointer.isEvaluating;if(!e)if("present"!==i.tense){const t=vm(this.m_pHistory,(e=>"present"===e.tense));(!t||i.index<t.index)&&(e=!0)}else e=this.m_bIsAtFinish;e?this.revert(i.index,t):i.index+1<this.m_pHistory.length&&(this.m_nChecksum++,this.invalidateHistory(i.index+1))}}map(e){if(!this.isRunning)return[];const t=this.m_pHistory.splice(this.m_nSnapshot),i=t.length;let s=0;for(let e=this.m_nSnapshot;e<this.m_nSnapshots;e++){const t=this.m_pSnapshots[e],i=t.stack.state,o=t.stack.context;i&&o&&(s+=this.addMoment(this.m_pHistory,t.moment,i,t.stack.transducers,o,"past"))}if(this.m_pSnapshot){const e=this.m_pSnapshot.stack.state,t=this.m_pSnapshot.stack.context;e&&t&&(s+=this.addMoment(this.m_pHistory,this.m_pSnapshot.moment,e,this.m_pSnapshot.stack.transducers,t,"past"))}let o=this.m_pHistory.length;if(s>0&&(this.m_nSnapshot=o-1),this.m_bIsAtFinish?o>0&&(this.m_pHistory[o-1].tense="present",this.m_nSnapshot=o>1?o-2:0):this.addPointer(this.m_pHistory)&&(s++,o++),s<i)if(!e&&o>0)for(;s<i;){const e=t[s];e.transducers.length>0&&(e.tense="future",this.m_pHistory.push(e)),s++}else{for(;s>0;)t.shift(),s--;this.invalidateMoments(t)}return this.m_pHistory}addPointer(e){if(this.m_pPointer){const t=this.m_pPointer;if(t.state)return this.addMoment(e,{a:this.stackSnapshots(),b:t.id},t.state,t.transducers,new jb(t,this.m_pOrchestrator.chain),"present"),!0}return!1}addMoment(e,t,i,s,o,n){const r=e.length,a={get checksum(){return Xm(this,"$checksum")||Qm(this,"$checksum",Gg(`${o.instance.uniqueId}/${r}/${i.hash}/${o.key}`))},index:r,snapshot:t,state:i,transducers:s,context:o,tense:n,restore:()=>this.isRunning&&this.revert(r)};return this.m_pMoments||(this.m_pMoments={}),(this.m_pMoments[i.id]||(this.m_pMoments[i.id]={state:i,moments:{}})).moments[o.id]=a,e.push(a),1}getMoment(e){if(this.m_pMoments){let t;if(lm(this.m_pMoments,(i=>{i.state.transducers.each((s=>{s.slots.each((s=>{lm(i.moments,(i=>{const o=i.context.mutableValueOf(s);o&&($m(this.m_pMomentsCache,o.id,i),o.id===e&&(t=i))}))}))}))})),this.m_pMoments=void 0,t)return t}return this.m_pMomentsCache[e]}invalidateMoments(e){lm(e,(e=>{e.state.transducers.each((t=>t.seal(e.context,!1)))}))}invalidateHistory(e){for(this.invalidateMoments(this.m_pHistory.splice(e)),this.m_nSnapshot=this.m_pHistory.length;this.m_nSnapshot&&(this.m_nSnapshot--,"past"!==this.m_pHistory[this.m_nSnapshot].tense););return this.m_pHistory}pushForward(){this.m_nAutoPushForward||(this.m_nAutoPushForward=Dm((()=>{var e,t,i,s;const o=!this.m_bIsAtFinish&&!(null===(t=null===(e=this.m_pPointer)||void 0===e?void 0:e.state)||void 0===t?void 0:t.isLast)&&(null===(i=this.m_pPointer)||void 0===i?void 0:i.state)||(null===(s=this.presentMoment)||void 0===s?void 0:s.state);this.m_nAutoPushForward=0,(o&&this.m_pOrchestrator.events.onInstanceStepForward(this,o)||!this.isAtFinish&&(this.m_pOrchestrator.autoPushForward||this.isPreview))&&(this.m_pOrchestrator.events.onInstanceProcessing(this,!1),o&&o.await&&o.await.done())})))}stackSnapshots(){const e=[];return this.m_pStack.each((t=>{e.push(t.snapshot())})),e}closeTransaction(){this.m_nTransaction>0&&(this.m_nTransaction--,0===this.m_nTransaction&&(this.m_pTransaction=void 0))}createTransaction(e,t){this.m_nTransaction++,1===this.m_nTransaction&&(this.m_pTransaction=e);const i=t();return this.closeTransaction(),i}readFromCache(e){return this.m_pCache[e]}writeToCache(e,t){return this.m_pCache[e]=t,t}stencil(e="exportables"){return this.m_pOrchestrator.stencil(e)}start(){if(this.cancelPromises(),!this.isRunning){const e=this.m_pPointer||this.m_pStack.firstItem;if(this.errors===Lb.None&&e)return this.m_bRunning=!0,this.m_bStopped=!1,this.m_bPaused=!1,this.emitHook("OnStart",{instance:this}),this.m_pOrchestrator.events.onInstanceStart(this),this.logger("Start"),e.step(),!0;this.pop()}return!1}restart(){const e=this.m_bAutoPushForward!==this.m_pOrchestrator.autoPushForward,t=this.m_sPreviewMode!==this.m_pOrchestrator.preview;this.cancelPromises(),e||t?(this.m_nChecksum++,e&&(this.m_bAutoPushForward=this.m_pOrchestrator.autoPushForward,(this.m_pOrchestrator.autoPushForward||this.m_bIsAtFinish)&&this.stepToHead()),t&&(this.m_sPreviewMode=this.m_pOrchestrator.preview,this.isRunning&&this.m_pInitial&&(this.m_pSnapshots.splice(0),this.m_pHistory.splice(0),this.m_nSnapshots=0,this.m_nSnapshot=0,this.restore(this.m_pInitial)))):this.start()||this.stepToStart()}stop(){return this.cancelPromises(),!this.m_bStopped&&(this.m_bStopped=!0,this.pop())}pause(){if(this.isPreview||this.isFinishing||this.isPausing||this.isPaused||!this.isRunning)return;const e=this.snapshot;return this.m_bPaused=!0,this.pop(),e}stepForward(){if(this.isRunning){const e=this.presentMoment;if(e&&e.state.await)return e.state.await.done();if(this.isFinishable)return this.finish(),!1}return!1}stepBackward(){if(this.isRunning){const e=this.presentMoment;if(e&&e.index>0&&e.index<=this.m_pHistory.length)return this.m_pHistory[e.index-1].restore(),!0}return!1}stepToStart(){if(this.isRunning){const e=Wp(this.history,0);if(e)return e.restore(),!0}return!1}stepToHead(){if(this.isInitialized&&this.isRunning){const e=this.history,t=Wp(e,e.length-1);if(t)return t.restore(),!0}return!1}finish(){const e=new Promise(((e,t)=>{if(this.isFinishable&&!this.m_fnFinishing){const i=(i,s)=>{this.m_fnFinishing&&(this.m_fnFinishing=void 0,i&&this.pop()?(this.m_sFinishReference=s,e()):(this.data.unfreeze(),t()))};this.m_fnFinishing=t,this.m_sFinishReference=void 0,this.data.freeze(),this.m_pOrchestrator.events.onInstanceFinishing(this,i)&&i(!0)}else t()}));return e.catch((e=>{this.m_pOrchestrator.logger&&this.m_pOrchestrator.logger(e||"Finish error!")})),e}transducers(e){this.m_pOrchestrator.iterate(e)}isTransducerPresent(e){const t=vm(this.m_pHistory,(e=>"present"===e.tense));return!(!t||!ym(t.transducers,(t=>t===e)))}markAsChanged(e,t=!1){lm(this.m_pOrchestrator.dependencies(e),((e,i)=>{t&&!e||this.setChanged(i)}),{keys:!0})}hasChanged(e,t=!0){const i=this.m_pOrchestrator.hasChanged(e,t),s=this.m_pChanges[e]||!1;return s&&t&&(0===Vp(this.m_pChangesBuffer)&&Dm((()=>{lm(this.m_pChangesBuffer,((e,t)=>{this.m_pChanges[t]=!1,delete this.m_pChangesBuffer[t]}),{keys:!0})})),this.m_pChangesBuffer[e]=!0),i||s}inherit(e){return e.data.each((e=>e.inherit(this))),this}}const Bb={af:["Afrikaans","Afrikaans"],"af-NA":["Afrikaans (Namibia)","Afrikaans (Namibi)"],agq:["Aghem","Aghem"],ak:["Akan","Akan"],am:["Amharic",""],ar:["Arabic",""],"ar-AE":["Arabic (United Arab Emirates)"," (  )"],"ar-BH":["Arabic (Bahrain)"," ()"],"ar-DJ":["Arabic (Djibouti)"," ()"],"ar-DZ":["Arabic (Algeria)"," ()"],"ar-EG":["Arabic (Egypt)"," ()"],"ar-EH":["Arabic (Western Sahara)"," ( )"],"ar-ER":["Arabic (Eritrea)"," ()"],"ar-IL":["Arabic (Israel)"," ()"],"ar-IQ":["Arabic (Iraq)"," ()"],"ar-JO":["Arabic (Jordan)"," ()"],"ar-KM":["Arabic (Comoros)"," ( )"],"ar-KW":["Arabic (Kuwait)"," ()"],"ar-LB":["Arabic (Lebanon)"," ()"],"ar-LY":["Arabic (Libya)"," ()"],"ar-MA":["Arabic (Morocco)"," ()"],"ar-MR":["Arabic (Mauritania)"," ()"],"ar-OM":["Arabic (Oman)"," ()"],"ar-PS":["Arabic (Palestinian Territories)"," ( )"],"ar-QA":["Arabic (Qatar)"," ()"],"ar-SA":["Arabic (Saudi Arabia)"," (  )"],"ar-SD":["Arabic (Sudan)"," ()"],"ar-SO":["Arabic (Somalia)"," ()"],"ar-SS":["Arabic (South Sudan)"," ( )"],"ar-SY":["Arabic (Syria)"," ()"],"ar-TD":["Arabic (Chad)"," ()"],"ar-TN":["Arabic (Tunisia)"," ()"],"ar-YE":["Arabic (Yemen)"," ()"],as:["Assamese",""],asa:["Asu","Kipare"],ast:["Asturian","asturianu"],az:["Azerbaijani","azrbaycan"],"az-Cyrl":["Azerbaijani (Cyrillic)"," ()"],"az-Latn":["Azerbaijani (Latin)","azrbaycan (latn)"],bas:["Basaa","sa"],be:["Belarusian",""],"be-tarask":["Belarusian",""],bem:["Bemba","Ichibemba"],bez:["Bena","Hibena"],bg:["Bulgarian",""],bm:["Bambara","bamanakan"],bn:["Bangla",""],"bn-IN":["Bangla (India)"," ()"],bo:["Tibetan",""],"bo-IN":["Tibetan (India)"," ()"],br:["Breton","brezhoneg"],brx:["Bodo",""],bs:["Bosnian","bosanski"],"bs-Cyrl":["Bosnian (Cyrillic)"," ()"],"bs-Latn":["Bosnian (Latin)","bosanski (latinica)"],ca:["Catalan","catal"],"ca-AD":["Catalan (Andorra)","catal (Andorra)"],"ca-ES-valencia":["Catalan (Spain)","catal (Espanya)"],"ca-FR":["Catalan (France)","catal (Frana)"],"ca-IT":["Catalan (Italy)","catal (Itlia)"],ccp:["Chakma",""],"ccp-IN":["Chakma (India)"," ()"],ce:["Chechen",""],ceb:["Cebuano","Binisaya"],cgg:["Chiga","Rukiga"],chr:["Cherokee",""],ckb:["Central Kurdish"," "],"ckb-IR":["Central Kurdish (Iran)","  ()"],cs:["Czech","etina"],cy:["Welsh","Cymraeg"],da:["Danish","dansk"],"da-GL":["Danish (Greenland)","dansk (Grnland)"],dav:["Taita","Kitaita"],de:["German","Deutsch"],"de-AT":["German (Austria)","Deutsch (sterreich)"],"de-BE":["German (Belgium)","Deutsch (Belgien)"],"de-CH":["German (Switzerland)","Deutsch (Schweiz)"],"de-IT":["German (Italy)","Deutsch (Italien)"],"de-LI":["German (Liechtenstein)","Deutsch (Liechtenstein)"],"de-LU":["German (Luxembourg)","Deutsch (Luxemburg)"],dje:["Zarma","Zarmaciine"],doi:["Dogri",""],dsb:["Lower Sorbian","dolnoserbina"],dua:["Duala","dul"],dyo:["Jola-Fonyi","joola"],dz:["Dzongkha",""],ebu:["Embu","Kembu"],ee:["Ewe","Eegbe"],"ee-TG":["Ewe (Togo)","Eegbe (Togo nutome)"],el:["Greek",""],"el-CY":["Greek (Cyprus)"," ()"],en:["English","English"],"en-001":["English (world)","English (world)"],"en-150":["English (Europe)","English (Europe)"],"en-AE":["English (United Arab Emirates)","English (United Arab Emirates)"],"en-AG":["English (Antigua & Barbuda)","English (Antigua & Barbuda)"],"en-AI":["English (Anguilla)","English (Anguilla)"],"en-AS":["English (American Samoa)","English (American Samoa)"],"en-AT":["English (Austria)","English (Austria)"],"en-AU":["English (Australia)","English (Australia)"],"en-BB":["English (Barbados)","English (Barbados)"],"en-BE":["English (Belgium)","English (Belgium)"],"en-BI":["English (Burundi)","English (Burundi)"],"en-BM":["English (Bermuda)","English (Bermuda)"],"en-BS":["English (Bahamas)","English (Bahamas)"],"en-BW":["English (Botswana)","English (Botswana)"],"en-BZ":["English (Belize)","English (Belize)"],"en-CA":["English (Canada)","English (Canada)"],"en-CC":["English (Cocos (Keeling) Islands)","English (Cocos (Keeling) Islands)"],"en-CH":["English (Switzerland)","English (Switzerland)"],"en-CK":["English (Cook Islands)","English (Cook Islands)"],"en-CM":["English (Cameroon)","English (Cameroon)"],"en-CX":["English (Christmas Island)","English (Christmas Island)"],"en-CY":["English (Cyprus)","English (Cyprus)"],"en-DE":["English (Germany)","English (Germany)"],"en-DG":["English (Diego Garcia)","English (Diego Garcia)"],"en-DK":["English (Denmark)","English (Denmark)"],"en-DM":["English (Dominica)","English (Dominica)"],"en-ER":["English (Eritrea)","English (Eritrea)"],"en-FI":["English (Finland)","English (Finland)"],"en-FJ":["English (Fiji)","English (Fiji)"],"en-FK":["English (Falkland Islands)","English (Falkland Islands)"],"en-FM":["English (Micronesia)","English (Micronesia)"],"en-GB":["English (United Kingdom)","English (United Kingdom)"],"en-GD":["English (Grenada)","English (Grenada)"],"en-GG":["English (Guernsey)","English (Guernsey)"],"en-GH":["English (Ghana)","English (Ghana)"],"en-GI":["English (Gibraltar)","English (Gibraltar)"],"en-GM":["English (Gambia)","English (Gambia)"],"en-GU":["English (Guam)","English (Guam)"],"en-GY":["English (Guyana)","English (Guyana)"],"en-HK":["English (Hong Kong SAR China)","English (Hong Kong SAR China)"],"en-IE":["English (Ireland)","English (Ireland)"],"en-IL":["English (Israel)","English (Israel)"],"en-IM":["English (Isle of Man)","English (Isle of Man)"],"en-IN":["English (India)","English (India)"],"en-IO":["English (British Indian Ocean Territory)","English (British Indian Ocean Territory)"],"en-JE":["English (Jersey)","English (Jersey)"],"en-JM":["English (Jamaica)","English (Jamaica)"],"en-KE":["English (Kenya)","English (Kenya)"],"en-KI":["English (Kiribati)","English (Kiribati)"],"en-KN":["English (St. Kitts & Nevis)","English (St. Kitts & Nevis)"],"en-KY":["English (Cayman Islands)","English (Cayman Islands)"],"en-LC":["English (St. Lucia)","English (St. Lucia)"],"en-LR":["English (Liberia)","English (Liberia)"],"en-LS":["English (Lesotho)","English (Lesotho)"],"en-MG":["English (Madagascar)","English (Madagascar)"],"en-MH":["English (Marshall Islands)","English (Marshall Islands)"],"en-MO":["English (Macao SAR China)","English (Macao SAR China)"],"en-MP":["English (Northern Mariana Islands)","English (Northern Mariana Islands)"],"en-MS":["English (Montserrat)","English (Montserrat)"],"en-MT":["English (Malta)","English (Malta)"],"en-MU":["English (Mauritius)","English (Mauritius)"],"en-MW":["English (Malawi)","English (Malawi)"],"en-MY":["English (Malaysia)","English (Malaysia)"],"en-NA":["English (Namibia)","English (Namibia)"],"en-NF":["English (Norfolk Island)","English (Norfolk Island)"],"en-NG":["English (Nigeria)","English (Nigeria)"],"en-NL":["English (Netherlands)","English (Netherlands)"],"en-NR":["English (Nauru)","English (Nauru)"],"en-NU":["English (Niue)","English (Niue)"],"en-NZ":["English (New Zealand)","English (New Zealand)"],"en-PG":["English (Papua New Guinea)","English (Papua New Guinea)"],"en-PH":["English (Philippines)","English (Philippines)"],"en-PK":["English (Pakistan)","English (Pakistan)"],"en-PN":["English (Pitcairn Islands)","English (Pitcairn Islands)"],"en-PR":["English (Puerto Rico)","English (Puerto Rico)"],"en-PW":["English (Palau)","English (Palau)"],"en-RW":["English (Rwanda)","English (Rwanda)"],"en-SB":["English (Solomon Islands)","English (Solomon Islands)"],"en-SC":["English (Seychelles)","English (Seychelles)"],"en-SD":["English (Sudan)","English (Sudan)"],"en-SE":["English (Sweden)","English (Sweden)"],"en-SG":["English (Singapore)","English (Singapore)"],"en-SH":["English (St. Helena)","English (St. Helena)"],"en-SI":["English (Slovenia)","English (Slovenia)"],"en-SL":["English (Sierra Leone)","English (Sierra Leone)"],"en-SS":["English (South Sudan)","English (South Sudan)"],"en-SX":["English (Sint Maarten)","English (Sint Maarten)"],"en-SZ":["English (Eswatini)","English (Eswatini)"],"en-TC":["English (Turks & Caicos Islands)","English (Turks & Caicos Islands)"],"en-TK":["English (Tokelau)","English (Tokelau)"],"en-TO":["English (Tonga)","English (Tonga)"],"en-TT":["English (Trinidad & Tobago)","English (Trinidad & Tobago)"],"en-TV":["English (Tuvalu)","English (Tuvalu)"],"en-TZ":["English (Tanzania)","English (Tanzania)"],"en-UG":["English (Uganda)","English (Uganda)"],"en-UM":["English (U.S. Outlying Islands)","English (U.S. Outlying Islands)"],"en-VC":["English (St. Vincent & Grenadines)","English (St. Vincent & Grenadines)"],"en-VG":["English (British Virgin Islands)","English (British Virgin Islands)"],"en-VI":["English (U.S. Virgin Islands)","English (U.S. Virgin Islands)"],"en-VU":["English (Vanuatu)","English (Vanuatu)"],"en-WS":["English (Samoa)","English (Samoa)"],"en-ZA":["English (South Africa)","English (South Africa)"],"en-ZM":["English (Zambia)","English (Zambia)"],"en-ZW":["English (Zimbabwe)","English (Zimbabwe)"],eo:["Esperanto","esperanto"],es:["Spanish","espaol"],"es-419":["Spanish (Latin America)","espaol (Latinoamrica)"],"es-AR":["Spanish (Argentina)","espaol (Argentina)"],"es-BO":["Spanish (Bolivia)","espaol (Bolivia)"],"es-BR":["Spanish (Brazil)","espaol (Brasil)"],"es-BZ":["Spanish (Belize)","espaol (Belice)"],"es-CL":["Spanish (Chile)","espaol (Chile)"],"es-CO":["Spanish (Colombia)","espaol (Colombia)"],"es-CR":["Spanish (Costa Rica)","espaol (Costa Rica)"],"es-CU":["Spanish (Cuba)","espaol (Cuba)"],"es-DO":["Spanish (Dominican Republic)","espaol (Repblica Dominicana)"],"es-EA":["Spanish (Ceuta & Melilla)","espaol (Ceuta y Melilla)"],"es-EC":["Spanish (Ecuador)","espaol (Ecuador)"],"es-GQ":["Spanish (Equatorial Guinea)","espaol (Guinea Ecuatorial)"],"es-GT":["Spanish (Guatemala)","espaol (Guatemala)"],"es-HN":["Spanish (Honduras)","espaol (Honduras)"],"es-IC":["Spanish (Canary Islands)","espaol (Canarias)"],"es-MX":["Spanish (Mexico)","espaol (Mxico)"],"es-NI":["Spanish (Nicaragua)","espaol (Nicaragua)"],"es-PA":["Spanish (Panama)","espaol (Panam)"],"es-PE":["Spanish (Peru)","espaol (Per)"],"es-PH":["Spanish (Philippines)","espaol (Filipinas)"],"es-PR":["Spanish (Puerto Rico)","espaol (Puerto Rico)"],"es-PY":["Spanish (Paraguay)","espaol (Paraguay)"],"es-SV":["Spanish (El Salvador)","espaol (El Salvador)"],"es-US":["Spanish (United States)","espaol (Estados Unidos)"],"es-UY":["Spanish (Uruguay)","espaol (Uruguay)"],"es-VE":["Spanish (Venezuela)","espaol (Venezuela)"],et:["Estonian","eesti"],eu:["Basque","euskara"],ewo:["Ewondo","ewondo"],fa:["Persian",""],"fa-AF":["Persian (Afghanistan)"," ()"],ff:["Fulah","Pulaar"],"ff-Adlm":["Fulah (Adlam)"," ()"],"ff-Adlm-BF":["Fulah (Adlam, Burkina Faso)"," (  )"],"ff-Adlm-CM":["Fulah (Adlam, Cameroon)"," ( )"],"ff-Adlm-GH":["Fulah (Adlam, Ghana)"," ( )"],"ff-Adlm-GM":["Fulah (Adlam, Gambia)"," ( )"],"ff-Adlm-GW":["Fulah (Adlam, Guinea-Bissau)"," ( -)"],"ff-Adlm-LR":["Fulah (Adlam, Liberia)"," ( )"],"ff-Adlm-MR":["Fulah (Adlam, Mauritania)"," ( )"],"ff-Adlm-NE":["Fulah (Adlam, Niger)"," ( )"],"ff-Adlm-NG":["Fulah (Adlam, Nigeria)"," ( )"],"ff-Adlm-SL":["Fulah (Adlam, Sierra Leone)"," ( )"],"ff-Adlm-SN":["Fulah (Adlam, Senegal)"," ( )"],"ff-Latn":["Fulah (Latin)","Pulaar (Latn)"],"ff-Latn-BF":["Fulah (Latin, Burkina Faso)","Pulaar (Latn, Burkibaa Faaso)"],"ff-Latn-CM":["Fulah (Latin, Cameroon)","Pulaar (Latn, Kameruun)"],"ff-Latn-GH":["Fulah (Latin, Ghana)","Pulaar (Latn, Ganaa)"],"ff-Latn-GM":["Fulah (Latin, Gambia)","Pulaar (Latn, Gammbi)"],"ff-Latn-GN":["Fulah (Latin, Guinea)","Pulaar (Latn, Gine)"],"ff-Latn-GW":["Fulah (Latin, Guinea-Bissau)","Pulaar (Latn, Gine-Bisaawo)"],"ff-Latn-LR":["Fulah (Latin, Liberia)","Pulaar (Latn, Liberiyaa)"],"ff-Latn-MR":["Fulah (Latin, Mauritania)","Pulaar (Latn, Muritani)"],"ff-Latn-NE":["Fulah (Latin, Niger)","Pulaar (Latn, Nijeer)"],"ff-Latn-NG":["Fulah (Latin, Nigeria)","Pulaar (Latn, Nijeriyaa)"],"ff-Latn-SL":["Fulah (Latin, Sierra Leone)","Pulaar (Latn, Seraa liyon)"],fi:["Finnish","suomi"],fil:["Filipino","Filipino"],fo:["Faroese","froyskt"],"fo-DK":["Faroese (Denmark)","froyskt (Danmark)"],fr:["French","franais"],"fr-BE":["French (Belgium)","franais (Belgique)"],"fr-BF":["French (Burkina Faso)","franais (Burkina Faso)"],"fr-BI":["French (Burundi)","franais (Burundi)"],"fr-BJ":["French (Benin)","franais (Bnin)"],"fr-BL":["French (St. Barthlemy)","franais (Saint-Barthlemy)"],"fr-CA":["French (Canada)","franais (Canada)"],"fr-CD":["French (Congo - Kinshasa)","franais (Congo-Kinshasa)"],"fr-CF":["French (Central African Republic)","franais (Rpublique centrafricaine)"],"fr-CG":["French (Congo - Brazzaville)","franais (Congo-Brazzaville)"],"fr-CH":["French (Switzerland)","franais (Suisse)"],"fr-CI":["French (Cte dIvoire)","franais (Cte dIvoire)"],"fr-CM":["French (Cameroon)","franais (Cameroun)"],"fr-DJ":["French (Djibouti)","franais (Djibouti)"],"fr-DZ":["French (Algeria)","franais (Algrie)"],"fr-GA":["French (Gabon)","franais (Gabon)"],"fr-GF":["French (French Guiana)","franais (Guyane franaise)"],"fr-GN":["French (Guinea)","franais (Guine)"],"fr-GP":["French (Guadeloupe)","franais (Guadeloupe)"],"fr-GQ":["French (Equatorial Guinea)","franais (Guine quatoriale)"],"fr-HT":["French (Haiti)","franais (Hati)"],"fr-KM":["French (Comoros)","franais (Comores)"],"fr-LU":["French (Luxembourg)","franais (Luxembourg)"],"fr-MA":["French (Morocco)","franais (Maroc)"],"fr-MC":["French (Monaco)","franais (Monaco)"],"fr-MF":["French (St. Martin)","franais (Saint-Martin)"],"fr-MG":["French (Madagascar)","franais (Madagascar)"],"fr-ML":["French (Mali)","franais (Mali)"],"fr-MQ":["French (Martinique)","franais (Martinique)"],"fr-MR":["French (Mauritania)","franais (Mauritanie)"],"fr-MU":["French (Mauritius)","franais (Maurice)"],"fr-NC":["French (New Caledonia)","franais (Nouvelle-Caldonie)"],"fr-NE":["French (Niger)","franais (Niger)"],"fr-PF":["French (French Polynesia)","franais (Polynsie franaise)"],"fr-PM":["French (St. Pierre & Miquelon)","franais (Saint-Pierre-et-Miquelon)"],"fr-RE":["French (Runion)","franais (La Runion)"],"fr-RW":["French (Rwanda)","franais (Rwanda)"],"fr-SC":["French (Seychelles)","franais (Seychelles)"],"fr-SN":["French (Senegal)","franais (Sngal)"],"fr-SY":["French (Syria)","franais (Syrie)"],"fr-TD":["French (Chad)","franais (Tchad)"],"fr-TG":["French (Togo)","franais (Togo)"],"fr-TN":["French (Tunisia)","franais (Tunisie)"],"fr-VU":["French (Vanuatu)","franais (Vanuatu)"],"fr-WF":["French (Wallis & Futuna)","franais (Wallis-et-Futuna)"],"fr-YT":["French (Mayotte)","franais (Mayotte)"],fur:["Friulian","furlan"],fy:["Western Frisian","Frysk"],ga:["Irish","Gaeilge"],"ga-GB":["Irish (United Kingdom)","Gaeilge (an Rocht Aontaithe)"],gd:["Scottish Gaelic","Gidhlig"],gl:["Galician","galego"],gsw:["Swiss German","Schwiizerttsch"],"gsw-FR":["Swiss German (France)","Schwiizerttsch (Frankriich)"],"gsw-LI":["Swiss German (Liechtenstein)","Schwiizerttsch (Lichteschti)"],gu:["Gujarati",""],guz:["Gusii","Ekegusii"],gv:["Manx","Gaelg"],ha:["Hausa","Hausa"],"ha-GH":["Hausa (Ghana)","Hausa (Gana)"],"ha-NE":["Hausa (Niger)","Hausa (Nijar)"],haw:["Hawaiian","lelo Hawaii"],he:["Hebrew",""],hi:["Hindi",""],hr:["Croatian","hrvatski"],"hr-BA":["Croatian (Bosnia & Herzegovina)","hrvatski (Bosna i Hercegovina)"],hsb:["Upper Sorbian","hornjoserbina"],hu:["Hungarian","magyar"],hy:["Armenian",""],ia:["Interlingua","interlingua"],id:["Indonesian","Indonesia"],ig:["Igbo","Igbo"],ii:["Sichuan Yi",""],is:["Icelandic","slenska"],it:["Italian","italiano"],"it-CH":["Italian (Switzerland)","italiano (Svizzera)"],"it-SM":["Italian (San Marino)","italiano (San Marino)"],"it-VA":["Italian (Vatican City)","italiano (Citt del Vaticano)"],ja:["Japanese",""],jgo:["Ngomba","Ndaa"],jmc:["Machame","Kimachame"],jv:["Javanese","Jawa"],ka:["Georgian",""],kab:["Kabyle","Taqbaylit"],kam:["Kamba","Kikamba"],kde:["Makonde","Chimakonde"],kea:["Kabuverdianu","kabuverdianu"],kgp:["Kaingang","kanhgg"],khq:["Koyra Chiini","Koyra ciini"],ki:["Kikuyu","Gikuyu"],kk:["Kazakh"," "],kkj:["Kako","kak"],kl:["Kalaallisut","kalaallisut"],kln:["Kalenjin","Kalenjin"],km:["Khmer",""],kn:["Kannada",""],ko:["Korean",""],"ko-KP":["Korean (North Korea)","()"],kok:["Konkani",""],ks:["Kashmiri",""],"ks-Arab":["Kashmiri (Arabic)"," ()"],ksb:["Shambala","Kishambaa"],ksf:["Bafia","rikpa"],ksh:["Colognian","Klsch"],ku:["Kurdish","kurd"],kw:["Cornish","kernewek"],ky:["Kyrgyz",""],lag:["Langi","Klaangi"],lb:["Luxembourgish","Ltzebuergesch"],lg:["Ganda","Luganda"],lkt:["Lakota","Lakliyapi"],ln:["Lingala","lingla"],"ln-AO":["Lingala (Angola)","lingla (Angla)"],"ln-CF":["Lingala (Central African Republic)","lingla (Repibiki ya Afrka ya Kti)"],"ln-CG":["Lingala (Congo - Brazzaville)","lingla (Kongo)"],lo:["Lao",""],lrc:["Northern Luri"," "],"lrc-IQ":["Northern Luri (Iraq)","  (IQ)"],lt:["Lithuanian","lietuvi"],lu:["Luba-Katanga","Tshiluba"],luo:["Luo","Dholuo"],luy:["Luyia","Luluhia"],lv:["Latvian","latvieu"],mai:["Maithili",""],mas:["Masai","Maa"],"mas-TZ":["Masai (Tanzania)","Maa (Tansania)"],mer:["Meru","Kmr"],mfe:["Morisyen","kreol morisien"],mg:["Malagasy","Malagasy"],mgh:["Makhuwa-Meetto","Makua"],mgo:["Meta","meta"],mi:["Mori","te reo Mori"],mk:["Macedonian",""],ml:["Malayalam",""],mn:["Mongolian",""],mni:["Manipuri",""],"mni-Beng":["Manipuri (Bangla)"," ()"],mr:["Marathi",""],ms:["Malay","Melayu"],"ms-BN":["Malay (Brunei)","Melayu (Brunei)"],"ms-ID":["Malay (Indonesia)","Melayu (Indonesia)"],"ms-SG":["Malay (Singapore)","Melayu (Singapura)"],mt:["Maltese","Malti"],mua:["Mundang","MUNDA"],my:["Burmese",""],mzn:["Mazanderani",""],naq:["Nama","Khoekhoegowab"],nb:["Norwegian Bokml","norsk bokml"],"nb-SJ":["Norwegian Bokml (Svalbard & Jan Mayen)","norsk bokml (Svalbard og Jan Mayen)"],nd:["North Ndebele","isiNdebele"],nds:["Low German","nds"],"nds-NL":["Low German (Netherlands)","nds (NL)"],ne:["Nepali",""],"ne-IN":["Nepali (India)"," ()"],nl:["Dutch","Nederlands"],"nl-AW":["Dutch (Aruba)","Nederlands (Aruba)"],"nl-BE":["Dutch (Belgium)","Nederlands (Belgi)"],"nl-BQ":["Dutch (Caribbean Netherlands)","Nederlands (Caribisch Nederland)"],"nl-CW":["Dutch (Curaao)","Nederlands (Curaao)"],"nl-SR":["Dutch (Suriname)","Nederlands (Suriname)"],"nl-SX":["Dutch (Sint Maarten)","Nederlands (Sint-Maarten)"],nmg:["Kwasio","nmg"],nn:["Norwegian Nynorsk","norsk nynorsk"],nnh:["Ngiemboon","Shw ngiembn"],no:["Norwegian","norsk"],nus:["Nuer","Thok Nath"],nyn:["Nyankole","Runyankore"],om:["Oromo","Oromoo"],"om-KE":["Oromo (Kenya)","Oromoo (Keeniyaa)"],or:["Odia",""],os:["Ossetic",""],"os-RU":["Ossetic (Russia)"," ()"],pa:["Punjabi",""],"pa-Arab":["Punjabi (Arabic)"," ()"],"pa-Guru":["Punjabi (Gurmukhi)"," ()"],pcm:["Nigerian Pidgin","Naijri Pjin"],pl:["Polish","polski"],ps:["Pashto",""],"ps-PK":["Pashto (Pakistan)"," ()"],pt:["Portuguese","portugus"],"pt-AO":["Portuguese (Angola)","portugus (Angola)"],"pt-CH":["Portuguese (Switzerland)","portugus (Sua)"],"pt-CV":["Portuguese (Cape Verde)","portugus (Cabo Verde)"],"pt-GQ":["Portuguese (Equatorial Guinea)","portugus (Guin Equatorial)"],"pt-GW":["Portuguese (Guinea-Bissau)","portugus (Guin-Bissau)"],"pt-LU":["Portuguese (Luxembourg)","portugus (Luxemburgo)"],"pt-MO":["Portuguese (Macao SAR China)","portugus (Macau, RAE da China)"],"pt-MZ":["Portuguese (Mozambique)","portugus (Moambique)"],"pt-PT":["Portuguese (Portugal)","portugus (Portugal)"],"pt-ST":["Portuguese (So Tom & Prncipe)","portugus (So Tom e Prncipe)"],"pt-TL":["Portuguese (Timor-Leste)","portugus (Timor-Leste)"],qu:["Quechua","Runasimi"],"qu-BO":["Quechua (Bolivia)","Runasimi (Bolivia)"],"qu-EC":["Quechua (Ecuador)","Runasimi (Ecuador)"],rm:["Romansh","rumantsch"],rn:["Rundi","Ikirundi"],ro:["Romanian","romn"],"ro-MD":["Romanian (Moldova)","romn (Republica Moldova)"],rof:["Rombo","Kihorombo"],ru:["Russian",""],"ru-BY":["Russian (Belarus)"," ()"],"ru-KG":["Russian (Kyrgyzstan)"," ()"],"ru-KZ":["Russian (Kazakhstan)"," ()"],"ru-MD":["Russian (Moldova)"," ()"],"ru-UA":["Russian (Ukraine)"," ()"],rw:["Kinyarwanda","Kinyarwanda"],rwk:["Rwa","Kiruwa"],sa:["Sanskrit"," "],sah:["Sakha"," "],saq:["Samburu","Kisampur"],sat:["Santali",""],"sat-Olck":["Santali (Ol Chiki)"," ( )"],sbp:["Sangu","Ishisangu"],sc:["Sardinian","sardu"],sd:["Sindhi",""],"sd-Arab":["Sindhi (Arabic)"," ()"],"sd-Deva":["Sindhi (Devanagari)"," ()"],se:["Northern Sami","davvismegiella"],"se-FI":["Northern Sami (Finland)","davvismegiella (Suopma)"],"se-SE":["Northern Sami (Sweden)","davvismegiella (Ruoa)"],seh:["Sena","sena"],ses:["Koyraboro Senni","Koyraboro senni"],sg:["Sango","Sng"],shi:["Tachelhit",""],"shi-Latn":["Tachelhit (Latin)","Tasheliyt (Latn)"],"shi-Tfng":["Tachelhit (Tifinagh)"," (Tfng)"],si:["Sinhala",""],sk:["Slovak","slovenina"],sl:["Slovenian","slovenina"],smn:["Inari Sami","anarkiel"],sn:["Shona","chiShona"],so:["Somali","Soomaali"],"so-DJ":["Somali (Djibouti)","Soomaali (Jabuuti)"],"so-ET":["Somali (Ethiopia)","Soomaali (Itoobiya)"],"so-KE":["Somali (Kenya)","Soomaali (Kenya)"],sq:["Albanian","shqip"],"sq-MK":["Albanian (North Macedonia)","shqip (Maqedonia e Veriut)"],"sq-XK":["Albanian (Kosovo)","shqip (Kosov)"],sr:["Serbian",""],"sr-Cyrl":["Serbian (Cyrillic)"," ()"],"sr-Cyrl-BA":["Serbian (Cyrillic, Bosnia & Herzegovina)"," (,   )"],"sr-Cyrl-ME":["Serbian (Cyrillic, Montenegro)"," (,  )"],"sr-Cyrl-XK":["Serbian (Cyrillic, Kosovo)"," (, )"],"sr-Latn":["Serbian (Latin)","srpski (latinica)"],"sr-Latn-BA":["Serbian (Latin, Bosnia & Herzegovina)","srpski (latinica, Bosna i Hercegovina)"],"sr-Latn-ME":["Serbian (Latin, Montenegro)","srpski (latinica, Crna Gora)"],"sr-Latn-XK":["Serbian (Latin, Kosovo)","srpski (latinica, Kosovo)"],su:["Sundanese","Basa Sunda"],"su-Latn":["Sundanese (Latin)","Basa Sunda (Latin)"],sv:["Swedish","svenska"],"sv-AX":["Swedish (land Islands)","svenska (land)"],"sv-FI":["Swedish (Finland)","svenska (Finland)"],sw:["Swahili","Kiswahili"],"sw-CD":["Swahili (Congo - Kinshasa)","Kiswahili (Jamhuri ya Kidemokrasia ya Kongo)"],"sw-KE":["Swahili (Kenya)","Kiswahili (Kenya)"],"sw-UG":["Swahili (Uganda)","Kiswahili (Uganda)"],ta:["Tamil",""],"ta-LK":["Tamil (Sri Lanka)"," ()"],"ta-MY":["Tamil (Malaysia)"," ()"],"ta-SG":["Tamil (Singapore)"," ()"],te:["Telugu",""],teo:["Teso","Kiteso"],"teo-KE":["Teso (Kenya)","Kiteso (Kenia)"],tg:["Tajik",""],th:["Thai",""],ti:["Tigrinya",""],"ti-ER":["Tigrinya (Eritrea)"," ()"],tk:["Turkmen","trkmen dili"],to:["Tongan","lea fakatonga"],tr:["Turkish","Trke"],"tr-CY":["Turkish (Cyprus)","Trke (Kbrs)"],tt:["Tatar",""],twq:["Tasawaq","Tasawaq senni"],tzm:["Central Atlas Tamazight","Tamazit n lala"],ug:["Uyghur",""],uk:["Ukrainian",""],und:["Unknown language","und"],ur:["Urdu",""],"ur-IN":["Urdu (India)"," ()"],uz:["Uzbek","ozbek"],"uz-Arab":["Uzbek (Arabic)"," ()"],"uz-Cyrl":["Uzbek (Cyrillic)"," ()"],"uz-Latn":["Uzbek (Latin)","ozbek (lotin)"],vai:["Vai",""],"vai-Latn":["Vai (Latin)","Vai (Latn)"],"vai-Vaii":["Vai (Vai)"," (Vaii)"],vi:["Vietnamese","Ting Vit"],vun:["Vunjo","Kyivunjo"],wae:["Walser","Walser"],wo:["Wolof","Wolof"],xh:["Xhosa","isiXhosa"],xog:["Soga","Olusoga"],yav:["Yangben","nuasue"],yi:["Yiddish",""],yo:["Yoruba","d Yorb"],"yo-BJ":["Yoruba (Benin)","d Yorb (Bn)"],yrl:["Nheengatu","nhegatu"],"yrl-CO":["Nheengatu (Colombia)","engat (Kurbiya)"],"yrl-VE":["Nheengatu (Venezuela)","engat (Wenesuera)"],yue:["Cantonese",""],"yue-Hans":["Cantonese (Simplified)"," ()"],"yue-Hant":["Cantonese (Traditional)"," ()"],zgh:["Standard Moroccan Tamazight",""],zh:["Chinese",""],"zh-Hans":["Chinese (Simplified)",""],"zh-Hans-HK":["Chinese (Simplified, Hong Kong SAR China)",""],"zh-Hans-MO":["Chinese (Simplified, Macao SAR China)",""],"zh-Hans-SG":["Chinese (Simplified, Singapore)",""],"zh-Hant":["Chinese (Traditional)",""],"zh-Hant-HK":["Chinese (Traditional, Hong Kong SAR China)",""],"zh-Hant-MO":["Chinese (Traditional, Macao SAR China)",""],zu:["Zulu","isiZulu"]},Yb={locale:"en",domain:"en",direction:"ltr",countryCode:"",country:"",countryNative:"",language:"English",languageNative:"English",translations:{months:{formatted:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nominative:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]}},days:{formatted:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nominative:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},time:{AM:"AM",PM:"PM"}},formats:{date:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},time:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTime:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}"},numbers:{decimals:".",grouping:",",minus:"-"}}};class Zb{static get locale(){return this.m_pLocale||Yb}static get identifier(){return this.locale.locale}static get domain(){return this.locale.domain}static get countryCode(){return this.locale.countryCode}static get country(){return this.locale.country}static get countryNative(){return this.locale.countryNative}static get language(){return this.locale.language}static get languageNative(){return this.locale.languageNative}static get locales(){const e=[];return lm(Bb,((t,i)=>{e.push(i)}),{keys:!0}),e}static get domains(){const e=[];return lm(Bb,((t,i)=>{e.push({locale:i,language:t[0],native:t[1]})}),{keys:!0}),e}static isLoaded(e){return Pp(e)&&Tp(this.m_pLocales[e.toLowerCase()])}static load(e,t=!0){let i=!1;return lm(Bp(e)?e:[e],(e=>{am(e,Yb,!1)&&(this.isLoaded(e.locale)||(this.m_pLocales[e.locale.toLowerCase()]=rm(e)),i=!0)})),i&&t&&!Bp(e)&&this.set(e.locale),i}static get(e){return(Pp(e)?this.m_pLocales[e.toLowerCase()]:void 0)||this.locale}static set(e){return Tp(this.m_pLocale=this.isLoaded(e)&&this.m_pLocales[e.toLowerCase()].locale===e?this.m_pLocales[e.toLowerCase()]:void 0)}static findDomain(e){if(!e||Bb[e])return e||"";e=pp.replace(e.toLowerCase(),"_","-"),this.m_pDomains||(this.m_pDomains={},lm(Bb,((e,t)=>{this.m_pDomains[t.toLowerCase()]=t}),{keys:!0}));let t=this.m_pDomains[e];for(;!t&&-1!==e.lastIndexOf("-");)e=e.substr(0,e.lastIndexOf("-")),t=this.m_pDomains[e];return t||""}static getDomain(e){e=this.findDomain(e)||this.locale.domain;const t=Bb[e];return{locale:e,language:t[0],native:t[1]}}static number(e,t=0,i=!0,s){const o=this.get(s);return dp.format(e,t,i?o.formats.numbers.grouping:"",o.formats.numbers.decimals,o.formats.numbers.minus)}static dateTime(e,t=Lp.now,i=!1,s){const o=this.get(s);return Lp.format(e,t,i,{monthsFormattedAbbreviated:o.translations.months.formatted.abbreviated,monthsFormattedNarrow:o.translations.months.formatted.narrow,monthsFormattedWide:o.translations.months.formatted.wide,monthsNominativeAbbreviated:o.translations.months.nominative.abbreviated,monthsNominativeNarrow:o.translations.months.nominative.narrow,monthsNominativeWide:o.translations.months.nominative.wide,weekdaysFormattedAbbreviated:o.translations.days.formatted.abbreviated,weekdaysFormattedNarrow:o.translations.days.formatted.narrow,weekdaysFormattedShort:o.translations.days.formatted.short,weekdaysFormattedWide:o.translations.days.formatted.wide,weekdaysNominativeAbbreviated:o.translations.days.nominative.abbreviated,weekdaysNominativeNarrow:o.translations.days.nominative.narrow,weekdaysNominativeShort:o.translations.days.nominative.short,weekdaysNominativeWide:o.translations.days.nominative.wide,AM:o.translations.time.AM,PM:o.translations.time.PM})}static dateFull(e=Lp.now,t=!1,i){return this.dateTime(this.get(i).formats.date.full,e,t,i)}static dateLong(e=Lp.now,t=!1,i){return this.dateTime(this.get(i).formats.date.long,e,t,i)}static dateMedium(e=Lp.now,t=!1,i){return this.dateTime(this.get(i).formats.date.medium,e,t,i)}static dateShort(e=Lp.now,t=!1,i){return this.dateTime(this.get(i).formats.date.short,e,t,i)}static timeFull(e=Lp.now,t=!1,i){return this.dateTime(this.get(i).formats.time.full,e,t,i)}static timeLong(e=Lp.now,t=!1,i){return this.dateTime(this.get(i).formats.time.long,e,t,i)}static timeMedium(e=Lp.now,t=!1,i){return this.dateTime(this.get(i).formats.time.medium,e,t,i)}static timeShort(e=Lp.now,t=!1,i){return this.dateTime(this.get(i).formats.time.short,e,t,i)}static dateTimeFull(e=Lp.now,t=!1,i){const s=this.get(i);return this.dateTime(pp.replace(pp.replace(s.formats.dateTime.full,"{0}",s.formats.time.full),"{1}",s.formats.date.full),e,t,i)}static dateTimeLong(e=Lp.now,t=!1,i){const s=this.get(i);return this.dateTime(pp.replace(pp.replace(s.formats.dateTime.long,"{0}",s.formats.time.long),"{1}",s.formats.date.long),e,t,i)}static dateTimeMedium(e=Lp.now,t=!1,i){const s=this.get(i);return this.dateTime(pp.replace(pp.replace(s.formats.dateTime.medium,"{0}",s.formats.time.medium),"{1}",s.formats.date.medium),e,t,i)}static dateTimeShort(e=Lp.now,t=!1,i){const s=this.get(i);return this.dateTime(pp.replace(pp.replace(s.formats.dateTime.short,"{0}",s.formats.time.short),"{1}",s.formats.date.short),e,t,i)}get locale(){return this.m_pLocale||Zb.locale}get identifier(){return this.locale.locale}get domain(){return this.locale.domain}get countryCode(){return this.locale.countryCode}get country(){return this.locale.country}get countryNative(){return this.locale.countryNative}get language(){return this.locale.language}get languageNative(){return this.locale.languageNative}load(e){const t=Zb.load(e,!1);return this.set(e.locale),t}set(e){return Tp(this.m_pLocale=Zb.isLoaded(e)&&Zb.m_pLocales[e.toLowerCase()].locale===e?Zb.m_pLocales[e.toLowerCase()]:void 0)}number(e,t=0,i=!0){return Zb.number(e,t,i,this.identifier)}dateTime(e,t=Lp.now,i=!1){return Zb.dateTime(e,t,i,this.identifier)}dateFull(e=Lp.now,t=!1){return Zb.dateFull(e,t,this.identifier)}dateLong(e=Lp.now,t=!1){return Zb.dateLong(e,t,this.identifier)}dateMedium(e=Lp.now,t=!1){return Zb.dateMedium(e,t,this.identifier)}dateShort(e=Lp.now,t=!1){return Zb.dateShort(e,t,this.identifier)}timeFull(e=Lp.now,t=!1){return Zb.timeFull(e,t,this.identifier)}timeLong(e=Lp.now,t=!1){return Zb.timeLong(e,t,this.identifier)}timeMedium(e=Lp.now,t=!1){return Zb.timeMedium(e,t,this.identifier)}timeShort(e=Lp.now,t=!1){return Zb.timeShort(e,t,this.identifier)}dateTimeFull(e=Lp.now,t=!1){return Zb.dateTimeFull(e,t,this.identifier)}dateTimeLong(e=Lp.now,t=!1){return Zb.dateTimeLong(e,t,this.identifier)}dateTimeMedium(e=Lp.now,t=!1){return Zb.dateTimeMedium(e,t,this.identifier)}dateTimeShort(e=Lp.now,t=!1){return Zb.dateTimeShort(e,t,this.identifier)}}Zb.m_pLocales={};const Vb={"Asian (Chinese, Japanese, Korean)":{rules:["Everything"],expression:"nplurals=1; plural=0;",locales:["zh","ja","ko"],fn:e=>0},Persian:{rules:["Everything"],expression:"nplurals=1; plural=0;",locales:["fa"],fn:e=>0},"Turkic/Altaic (Turkish)":{rules:["Everything"],expression:"nplurals=1; plural=0;",locales:["tr"],fn:e=>0},Thai:{rules:["Everything"],expression:"nplurals=1; plural=0;",locales:["th"],fn:e=>0},Lao:{rules:["Everything"],expression:"nplurals=1; plural=0;",locales:["lo"],fn:e=>0},"Germanic (Danish, Dutch, English, Faroese, Frisian, German, Norwegian, Swedish)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["da","nl","en","fo","fy","de","nn","sv"],fn:e=>1!==e?1:0},"Finno-Ugric (Estonian, Finnish, Hungarian)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["et","fi","hu"],fn:e=>1!==e?1:0},"Language isolate (Basque)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["eu"],fn:e=>1!==e?1:0},"Latin/Greek (Greek)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["el"],fn:e=>1!==e?1:0},"Semitic (Hebrew)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["he"],fn:e=>1!==e?1:0},"Romanic (Italian, Portuguese, Spanish, Catalan)":{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["it","pt","es","ca"],fn:e=>1!==e?1:0},Vietnamese:{rules:["Is 1","Everything else"],expression:"nplurals=2; plural=(n != 1);",locales:["vi"],fn:e=>1!==e?1:0},"Romanic (French, Brazilian Portuguese)":{rules:["Is 0 or 1","Everything else"],expression:"nplurals=2; plural=(n > 1);",locales:["fr","pt_BR"],fn:e=>e>1?1:0},Lingala:{rules:["Is 0 or 1","Everything else"],expression:"nplurals=2; plural=(n > 1);",locales:["ln"],fn:e=>e>1?1:0},"Baltic (Latvian, Latgalian)":{rules:["Ends in 0","Ends in 1, excluding 11","Everything else"],expression:"nplurals=3; plural=(n%10==0 || (n%100>=11 && n%100<=19) ? 0 : n%10==1 && n%100!=11 ? 1 : 2);",locales:["lv"],fn:e=>e%10==0||e%100>=11&&e%100<=19?0:e%10==1&&e%100!=11?1:2},"Celtic (Scottish Gaelic)":{rules:["Is 1 or 11","Is 2 or 12","Is 3-10 or 13-19","Everything else"],expression:"nplurals=4; plural=(n==1 || n==11 ? 0 : n==2 || n==12 ? 1 : (n>=3 && n<=10) || (n>=13 && n<=19) ? 2 : 3);",locales:["gd"],fn:e=>1===e||11===e?0:2===e||12===e?1:e>=3&&e<=10||e>=13&&e<=19?2:3},"Romanic (Romanian)":{rules:["Is 1","Is 0 or ends in 01-19, excluding 1","Everything else"],expression:"nplurals=3; plural=(n==1 ? 0 : n==0 || (n!=1 && n%100>=1 && n%100<=19) ? 1 : 2);",locales:["ro"],fn:e=>1===e?0:0===e||1!==e&&e%100>=1&&e%100<=19?1:2},"Baltic (Lithuanian)":{rules:["Ends in 1, excluding 11","Ends in 0 or ends in 11-19","Everything else"],expression:"nplurals=3; plural=(n%10==1 && (n%100<11 || n%100>19) ? 0 : n%10>=2 && n%10<=9 && (n%100<11 || n%100>19) ? 1 : 2);",locales:["lt"],fn:e=>e%10==1&&(e%100<11||e%100>19)?0:e%10>=2&&e%10<=9&&(e%100<11||e%100>19)?1:2},Belarusian:{rules:["Ends in 1, excluding 11","Ends in 2-4, excluding 12-14","Everything else"],expression:"nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);",locales:["be"],fn:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2},Russian:{rules:["Ends in 1, excluding 11","Ends in 2-4, excluding 12-14","Everything else"],expression:"nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);",locales:["ru"],fn:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2},Ukrainian:{rules:["Ends in 1, excluding 11","Ends in 2-4, excluding 12-14","Everything else"],expression:"nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);",locales:["uk"],fn:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2},"Slavic (Slovak, Czech)":{rules:["Is 1","Is 2-4","Everything else"],expression:"nplurals=3; plural=(n==1 ? 0 : n>=2 && n<=4 ? 1 : 2);",locales:["sk","cs"],fn:e=>1===e?0:e>=2&&e<=4?1:2},"Slavic (Polish)":{rules:["Is 1","Ends in 2-4, excluding 12-14","Everything else"],expression:"nplurals=3; plural=(n==1 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);",locales:["pl"],fn:e=>1===e?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2},"Slavic (Slovenian, Sorbian)":{rules:["Ends in 01","Ends in 02","Ends in 03-04","Everything else"],expression:"nplurals=4; plural=(n%100==1 ? 0 : n%100==2 ? 1 : n%100>=3 && n%100<=4 ? 2 : 3);",locales:["sl","dsb","hsb"],fn:e=>e%100==1?0:e%100==2?1:e%100>=3&&e%100<=4?2:3},"Celtic (Irish Gaelic)":{rules:["Is 1","Is 2","Is 3-6","Is 7-10","Everything else"],expression:"nplurals=5; plural=(n==1 ? 0 : n==2 ? 1 : n>=3 && n<=6 ? 2 : n>=7 && n<=10 ? 3 : 4);",locales:["ga"],fn:e=>1===e?0:2===e?1:e>=3&&e<=6?2:e>=7&&e<=10?3:4},"Semitic (Arabic)":{rules:["Is 0","Is 1","Is 2","Ends in 03-10","Everything else but is 0 and ends in 00-02, excluding 0-2","Ends in 00-02, excluding 0-2"],expression:"nplurals=6; plural=(n==0 ? 0 : n==1 ? 1 : n==2 ? 2 : n%100>=3 && n%100<=10 ? 3 : n%100>=11 && n%100<=99 ? 4 : 5);",locales:["ar"],fn:e=>0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11&&e%100<=99?4:5},"Semitic (Maltese)":{rules:["Is 1","Is 0 or ends in 01-10, excluding 1","Ends in 11-19","Everything else"],expression:"nplurals=4; plural=(n==1 ? 0 : n==0 || (n%100>=2 && n%100<=10) ? 1 : n%100>=11 && n%100<=19 ? 2 : 3);",locales:["mt"],fn:e=>1===e?0:0===e||e%100>=2&&e%100<=10?1:e%100>=11&&e%100<=19?2:3},Icelandic:{rules:["Ends in 1, excluding 11","Everything else"],expression:"nplurals=2; plural=(n%10==1 && n%100!=11 ? 0 : 1);",locales:["is"],fn:e=>e%10==1&&e%100!=11?0:1},Macedonian:{rules:["Ends in 1, excluding 11","Everything else"],expression:"nplurals=2; plural=(n%10==1 && n%100!=11 ? 0 : 1);",locales:["mk"],fn:e=>e%10==1&&e%100!=11?0:1},"Celtic (Breton)":{rules:["Ends in 1, excluding 11, 71, 91","Ends in 2, excluding 12, 72, 92","Ends in 3, 4 or 9 excluding 13, 14, 19, 73, 74, 79, 93, 94, 99","Ends in 000000","Everything else"],expression:"nplurals=5; plural=(n%10==1 && n%100!=11 && n%100!=71 && n%100!=91 ? 0 : n%10==2 && n%100!=12 && n%100!=72 && n%100!=92 ? 1 : ((n%10>=3 && n%10<=4) || n%10==9) && (n%100<10 || n%100>19) && (n%100<70 || n%100>79) && (n%100<90 || n%100>99) ? 2 : n!=0 && n%1000000==0 ? 3 : 4);",locales:["br"],fn:e=>e%10==1&&e%100!=11&&e%100!=71&&e%100!=91?0:e%10==2&&e%100!=12&&e%100!=72&&e%100!=92?1:(e%10>=3&&e%10<=4||e%10==9)&&(e%100<10||e%100>19)&&(e%100<70||e%100>79)&&(e%100<90||e%100>99)?2:0!==e&&e%1e6==0?3:4},"Ecuador indigenous languages (Shuar)":{rules:["Is 0","Everything else"],expression:"nplurals=2; plural=(n != 0);",locales:[],fn:e=>0!==e?1:0},Welsh:{rules:["Is 0","Is 1","Is 2","Is 3","Is 6","Everything else"],expression:"nplurals=6; plural=(n==0 ? 0 : n==1 ? 1 : n==2 ? 2 : n==3 ? 3 : n==6 ? 4 : 5);",locales:["cy"],fn:e=>0===e?0:1===e?1:2===e?2:3===e?3:6===e?4:5},"Slavic (Bosnian, Croatian, Serbian)":{rules:["Ends in 1, excluding 11","Ends in 2-4, excluding 12-14","Everything else"],expression:"nplurals=3; plural=(n%10==1 && n%100!=11 ? 0 : n%10>=2 && n%10<=4 && (n%100<12 || n%100>14) ? 1 : 2);",locales:["bs","hr","sr"],fn:e=>e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<12||e%100>14)?1:2}};class Wb{static get rules(){const e=[];return lm(Vb,((t,i)=>{e.push({family:i,rules:t.rules,expression:t.expression,locales:t.locales,fn:t.fn})}),{keys:!0}),e.sort(((e,t)=>e.family.localeCompare(t.family,Zb.domain,{sensitivity:"base"})))}static get locales(){const e={};return lm(Vb,((t,i)=>{lm(t.locales,(s=>{e[s]={family:i,rules:t.rules,expression:t.expression,locales:t.locales,fn:t.fn}}))}),{keys:!0}),e}static getForLocale(e){return this.locales[e||Zb.domain]}static getForFamily(e){return ym(this.rules,(t=>t.family===e))}static getForExpression(e){return ym(this.rules,(t=>t.expression===e))||ym(this.rules,(t=>pp.removeWhitespaces(t.expression)===pp.removeWhitespaces(e)))}}class Gb{constructor(e){this.m_nPlurals=1;const t=(this.m_pTranslation=rm(e))[""];if(Tp(t)){let e=em(t["plural-forms"]);if(Pp(e)){const t=Wb.getForExpression(e);if(t&&t.rules.length>0)this.m_nPlurals=t.rules.length,this.m_fnPlural=t.fn;else{const t=/nplurals\=(\d+);/;let i;if(e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),/;\s*$/.test(e)||(e=e.concat(";")),i=tm(Wp(e.match(t),1)),i>1&&(e=e.replace(t,""),e=em(Wp(e.match(/plural\=(.*);/),1)),Pp(e)&&/^[0-9n\u002b\u002d\u002a\u002f\u0025\u003e\u003c\u003d\u0021\u007e\u007c\u0026\u005e\u0028\u0029\u003a\u003b\u003f\s]+$/.test(e))){const t=new Function("n","return "+e);this.m_nPlurals=i,this.m_fnPlural=e=>tm(t(e))}}}}}get plurals(){return this.m_nPlurals}enrich(e,t){lm(e,((e,i)=>{!i||this.m_pTranslation[i]&&!t||(this.m_pTranslation[i]=e)}),{keys:!0})}plural(e){return dp.range(this.m_fnPlural?this.m_fnPlural(e):1!==e?1:0,0,this.plurals-1)}translation(e){return this.m_pTranslation[e]}}class $b{constructor(){this.m_pTranslations={},this.m_pCache={},this.m_sDefault=Zb.domain,this.m_sCurrent=""}static assert(){return this.m_pTranslations||(this.m_pTranslations=new $b)}static get domains(){return this.assert().domains}static get default(){return this.assert().default}static set default(e){this.assert().default=e}static get current(){return this.assert().current}static set current(e){this.assert().current=e}static load(e,t=!0,i="enrich"){return this.assert().load(e,t,i)}static unload(e){this.assert().unload(e)}static isLoaded(e){return this.assert().isLoaded(e)}static reset(e=""){this.assert().reset(e)}static translate(e,t,i,s=!1,o="",n=0,...r){return this.assert().translate(e,t,i,s,o,n,...r)}message(e,t,i,s,o){if(e){const n=e.translation((t?t+"":"")+i);if(n){const t=1+(s?e.plural(o):0);if(t<n.length){const e=n[t];if("string"==typeof e)return e;if(Array.isArray(e)&&1===e.length){const t=e[0];if("string"==typeof t)return t}return""}}}return""}find(e,t,i,s,o){if(!e)return"";const n=e+""+t+i+""+(s?"P":"S")+o,r=this.m_pCache[n]||(this.m_pCache[n]=this.message(this.m_pTranslations[e],t,i,s,o));if(r)return r;const a=$b.m_pAlternatives[e];if(a)return this.find(a.alternative,t,i,s,o);const l=e.lastIndexOf("-"),c=-1!==l?e.substr(0,l):void 0;return $b.m_pAlternatives[e]={alternative:c},this.find(c,t,i,s,o)}invalidate(e){if(!e)return;const t=e+"";lm(this.m_pCache,((e,i)=>{0===i.indexOf(t)&&ig(this.m_pCache,i)}),{keys:!0})}get domains(){const e=[];return lm(this.m_pTranslations,((t,i)=>{e.push(i)}),{keys:!0}),e}get default(){return this.m_sDefault}set default(e){(e=Zb.findDomain(e))&&(this.m_sDefault=e)}get current(){return this.m_sCurrent||this.default}set current(e){this.m_sCurrent=Zb.findDomain(e)}load(e,t,i){let s=!1,o="";return lm(Bp(e)?e:[e],(e=>{if(Tp(e)){const t=e[""];if(Tp(t)){Qm(t,"language",Zb.findDomain(t.language)||this.current),this.invalidate(t.language);const n="replace"!==i?this.m_pTranslations[t.language]:void 0;n?n.enrich(e,"overwrite"===i):this.m_pTranslations[t.language]=new Gb(e),o||(o=t.language),s=!0}}})),!1===t||!o||!0!==t&&this.m_sCurrent||(this.current=o),s}unload(e){e?(e=Zb.findDomain(e),this.invalidate(e),ig(this.m_pTranslations,e)):lm(this.m_pTranslations,((e,t)=>{this.invalidate(t),ig(this.m_pTranslations,t)}),{keys:!0})}isLoaded(e){return this.default===e||this.m_pTranslations[Zb.findDomain(e)]instanceof Gb}reset(e=""){this.unload(),this.current=e}translate(e,t,i,s,o,n,...r){const a=this.find(e,t,i,s,n)||e!==this.default&&this.find(this.default,t,i,s,n)||(s&&1!==n?o:i);return r.length>0?a.replace(/%(\d+)/g,((e,t)=>em(Wp(r,tm(t)-1,e)))):a}}$b.m_pAlternatives={};class Qb{constructor(e,t){this.m_pLocale=t?Zb:new Zb,this.m_pTranslations=e?$b:new $b}static get global(){return this.m_pNamespaces[""]||(this.m_pNamespaces[""]=new Qb(!0,!0))}static create(e){return this.m_pNamespaces[e]||(this.m_pNamespaces[e]=new Qb(!1,!1))}static translation(e){return this.m_pNamespaces[e]||(this.m_pNamespaces[e]=new Qb(!1,!0))}get locale(){return this.m_pLocale}get default(){return this.m_pTranslations.default}set default(e){this.m_pTranslations.default=e}get current(){return this.m_pTranslations.current}set current(e){this.m_pTranslations.current=e}get domains(){return this.m_pTranslations.domains}get load(){return(e,t=!0,i="enrich")=>this.m_pTranslations.load(e,t,i)}get unload(){return e=>this.m_pTranslations.unload(e)}get isLoaded(){return e=>this.m_pTranslations.isLoaded(e)}get reset(){return e=>this.m_pTranslations.reset(e)}get gettext(){return(e,...t)=>this.m_pTranslations.translate(this.m_pTranslations.current,"",e,!1,"",0,...t)}get dgettext(){return(e,t,...i)=>this.m_pTranslations.translate(e,"",t,!1,"",0,...i)}get ngettext(){return(e,t,i,...s)=>this.m_pTranslations.translate(this.m_pTranslations.current,"",e,!0,t,i,this.m_pLocale.number(i),...s)}get dngettext(){return(e,t,i,s,...o)=>this.m_pTranslations.translate(e,"",t,!0,i,s,Zb.number(s,0,!0,e),...o)}get pgettext(){return(e,t,...i)=>this.m_pTranslations.translate(this.m_pTranslations.current,e,t,!1,"",0,...i)}get dpgettext(){return(e,t,i,...s)=>this.m_pTranslations.translate(e,t,i,!1,"",0,...s)}get npgettext(){return(e,t,i,s,...o)=>this.m_pTranslations.translate(this.m_pTranslations.current,e,t,!0,i,s,this.m_pLocale.number(s),...o)}get dnpgettext(){return(e,t,i,s,o,...n)=>this.m_pTranslations.translate(e,t,i,!0,s,o,Zb.number(o,0,!0,e),...n)}get _(){return(e,...t)=>this.m_pTranslations.translate(this.m_pTranslations.current,"",e,!1,"",0,...t)}get _n(){return(e,t,i,...s)=>this.m_pTranslations.translate(this.m_pTranslations.current,"",e,!0,t,i,this.m_pLocale.number(i),...s)}}Qb.m_pNamespaces={};var qb=Object.freeze({__proto__:null,Translation:Gb,CONTEXT_SEPARATOR:"",Domain:$b,Translations:$b,LOCALE_DEFAULTS:Yb,Locales:Zb,_:function(e,...t){return $b.translate($b.current,"",e,!1,"",0,...t)},_n:function(e,t,i,...s){return $b.translate($b.current,"",e,!0,t,i,Zb.number(i),...s)},dgettext:function(e,t,...i){return $b.translate(e,"",t,!1,"",0,...i)},dngettext:function(e,t,i,s,...o){return $b.translate(e,"",t,!0,i,s,Zb.number(s,0,!0,e),...o)},dnpgettext:function(e,t,i,s,o,...n){return $b.translate(e,t,i,!0,s,o,Zb.number(o,0,!0,e),...n)},dpgettext:function(e,t,i,...s){return $b.translate(e,t,i,!1,"",0,...s)},gettext:function(e,...t){return $b.translate($b.current,"",e,!1,"",0,...t)},ngettext:function(e,t,i,...s){return $b.translate($b.current,"",e,!0,t,i,Zb.number(i),...s)},npgettext:function(e,t,i,s,...o){return $b.translate($b.current,e,t,!0,i,s,Zb.number(s),...o)},pgettext:function(e,t,...i){return $b.translate($b.current,e,t,!1,"",0,...i)},Plurals:Wb,Namespace:Qb});class Xb extends vg{constructor(e,t,i,s,o,n,r,a=!1,l=!0,c="disabled",u,h=!1){super(),this.m_pDependencies={},this.m_pChanges={},this.m_pChangesBuffer={},this.m_bReloading=!1,this.m_pStencils={exportables:void 0,actionables:void 0},this.m_pChain={states:{},transducers:{},branches:{},conditions:{},slots:{}},this.m_pState=e,this.m_pStates=new hb(this),this.m_pTransducer=t,this.m_pBranch=i,this.m_pCondition=s,this.m_bAutoPushForward=a,this.m_sPreviewMode=c,this.m_pL10n=u||Qb.create(""),this.m_bPaused=!1,this.m_bStopped=!0,this.m_fnFingerprint=n,this.m_fnStencil=r,this.m_bFingerprint=l,this.m_sFingerprint=l?Gg("fingerprint"):void 0,this.m_pLog=[],this.m_bVerbose=h,this.m_fnLogger=e=>console.log(e),this.hook("OnItemPush","synchronous",(()=>{this.m_bPaused=!1,this.m_bStopped=!1,1===this.count&&(this.emitHook("OnStart",{ontology:this}),this.isVerbose&&this.logMessage(`Start (${this.fingerprint})`)),this.invokeNextInstance()})),this.hook("OnItemPop","synchronous",(e=>{this.invokeNextInstance(),0===this.count&&(this.m_bPaused=e.item.isPaused,this.m_bStopped=e.item.isStopped,this.m_bPaused?(this.emitHook("OnPause",{ontology:this}),this.isVerbose&&this.logMessage(`Pause (${this.fingerprint})`)):this.m_bStopped?(this.emitHook("OnStop",{ontology:this}),this.isVerbose&&this.logMessage(`Stop (${this.fingerprint})`)):(this.emitHook("OnFinish",{ontology:this}),this.isVerbose&&this.logMessage(`Finish (${this.fingerprint})`)),this.emitHook("OnEnd",{ontology:this,type:this.isStopped?"stopped":this.isPaused?"paused":"finished"}),this.isVerbose&&this.logMessage(`End (${this.fingerprint})`))})),o&&this.load(o)}chain(e,t){let i="";if(this.m_sFingerprint&&(i=e.id+(this.m_fnFingerprint&&this.m_fnFingerprint(e)||"")),e instanceof cb)$m(this.m_pChain.states,e.id,e);else if(e instanceof Db)$m(this.m_pChain.transducers,e.id,e);else if(e instanceof nb)$m(this.m_pChain.branches,e.id,e),this.m_sFingerprint&&(i+=e.culling);else if(e instanceof ib)$m(this.m_pChain.conditions,e.id,e),this.m_sFingerprint&&(i+=e.context);else if($m(this.m_pChain.slots,e.id,e),this.m_sFingerprint&&e.required&&(i+="required"),t){const i=e.pipe(t);if(i){const s=e.legacyPipe(t);let o=this.m_pChain.slots[i];Bp(o)||(o=$m(this.m_pChain.slots,i,[])),o.push(e),s&&$m(this.m_pChain.slots,s,o)}}i&&(this.m_sFingerprint=Gg(this.m_sFingerprint+i))}get constructors(){return{state:this.m_pState,transducer:this.m_pTransducer,branch:this.m_pBranch,condition:this.m_pCondition}}get ontology(){return this.m_pOntology}get fingerprint(){return this.m_sFingerprint||(this.m_sFingerprint=new Jb(this.m_pState,this.m_pTransducer,this.m_pBranch,this.m_pCondition,this.m_pOntology,this.m_fnFingerprint,this.m_fnStencil).fingerprint)}get l10n(){return this.m_pL10n}get states(){return this.m_pStates}get main(){return this.m_pMain}get isLoaded(){return this.states.count>0&&this.main instanceof ub}get isRunning(){return this.count>0}get isStopped(){return this.m_bStopped}get isFinishing(){return this.count>0&&!this.each((e=>!e.isFinishing))}get isFinished(){return!this.isRunning&&!this.isPaused&&!this.isStopped}get isPausing(){return!!this.m_fnPause}get isPaused(){return this.m_bPaused}get isPreview(){return"disabled"!==this.m_sPreviewMode}get isVerbose(){return this.m_bVerbose}set isVerbose(e){this.m_bVerbose=e}get autoPushForward(){return this.m_bAutoPushForward}set autoPushForward(e){this.m_bAutoPushForward!==e&&(this.m_bAutoPushForward=e,this.each((e=>e.restart())))}get metrics(){return this.m_pMetrics||{states:0,transducers:0,branches:0,conditions:0,slots:0}}get log(){return this.m_pLog}get logger(){return this.m_fnLogger}set logger(e){this.m_fnLogger=e}logMessage(e){this.m_pLog.push(`${Lp.log}: ${e}`),this.isVerbose&&this.m_fnLogger(`${Lp.log}: ${e}`)}parse(e,t,i,s=0){const o={states:0,transducers:0,branches:0,conditions:0,slots:0},n={conditions:[],transducers:[]};let r=Lb.None;if(e&&Pp(e.id)){const a=t.branches.create(e,t),l=em(e.jump);let c;this.chain(a),this.m_pMain&&e.id===this.m_pMain.id||o.branches++,lm(e[this.m_pCondition.property],(t=>{if(t&&Pp(t.id)){const i=a.conditions.create(t);i&&(this.chain(i),"each"===e.culling&&n.conditions.push(i),o.conditions++)}else r|=Lb.OntologyInvalidCondition,this.logMessage(`Invalid condition data in ontology: ${JSON.stringify(t)}`)})),t.isMain&&this.logMessage("Constructing main branch"),lm(e[this.m_pState.property],(e=>{if(e&&Pp(e.id)){const l=this.states.create(e,a,t,++s);this.chain(l),o.states++,c&&(c.setSuccessor("live",l),c.setSuccessor("preview",l)),c=l,lm(e[this.m_pTransducer.property],(e=>{if(e&&Pp(e.id)){const t=l.transducers.create(e);this.chain(t),n.transducers.push(t),o.transducers++,t.slots.deserialize(e.slots||[]).each((e=>{this.chain(e,t),o.slots++}))}else r|=Lb.OntologyInvalidTransducer,this.logMessage(`Invalid transducer data in ontology: ${JSON.stringify(e)}`)})),lm(e[this.m_pBranch.property],(e=>{const t=this.parse(e,l,i,s);s=t.enumerator,r|=t.errors,o.states+=t.metrics.states,o.transducers+=t.metrics.transducers,o.branches+=t.metrics.branches,o.conditions+=t.metrics.conditions,o.slots+=t.metrics.slots,n.transducers.push(t.transducers)}))}else r|=Lb.OntologyInvalidState,this.logMessage(`Invalid state data in ontology: ${JSON.stringify(e)}`)})),Pp(l)&&(this.states.each((e=>e.id===l))?this.logMessage(`Invalid branch jump detected in ontology: ${JSON.stringify(e)}`):(a.setSuccessor("live",void 0),"abort"!==l&&function(e,t,i){(e[t]||$m(e,t,[])).push(i)}(i,l,a)))}else r|=Lb.OntologyInvalidBranch,this.logMessage(`Invalid branch data in ontology: ${JSON.stringify(e)}`);return{errors:r,metrics:o,transducers:n,enumerator:s}}transducers(e){if(this.m_pTransducers){const t=(i,...s)=>{lm(i.conditions.length>1?i.conditions:[void 0],(o=>{const n=s.concat(...o?[o]:[]);lm(i.transducers,(i=>{i instanceof Db?e(i,n,0===n.length?"*":1===n.length?n[0].context:Gg(pp.iterateToString(n,"",(e=>e.context)))):t(i,...n)}))}))};t(this.m_pTransducers)}}getFromChain(e,t){if(t)switch(e){case"state":return this.m_pChain.states[t];case"transducer":return this.m_pChain.transducers[t];case"branch":return this.m_pChain.branches[t];case"condition":return this.m_pChain.conditions[t];case"slot":return this.m_pChain.slots[t]}}invokeNextInstance(){if(!this.isStopped&&!this.isPaused&&this.count>0){let e=this.each((e=>e.isRunning));this.each((t=>{t.isRunning||e&&!t.allowConcurrency||(e=!0,t.start())}))}}onInstanceCreate(e){this.emitHook("OnInstanceCreate",{ontology:this,instance:e})}onInstanceStart(e){this.emitHook("OnInstanceStart",{ontology:this,instance:e})}onInstanceData(e,t){this.emitHook("OnInstanceData",{ontology:this,instance:e,transducer:t.transducer,slot:t.slot,data:t.data,id:t.id,context:t.key,get value(){return t.value}})}onInstanceProcessing(e,t){this.emitHook("OnInstanceProcessing",{ontology:this,instance:e,processing:t})}onInstanceStepForward(e,t){return!1}onInstanceUpdate(e){}onInstanceEnd(e,t){this.emitHook("OnInstanceEnd",{ontology:this,instance:e,type:t})}onInstanceFinishing(e,t){return!0}onInstanceFinish(e){this.emitHook("OnInstanceFinish",{ontology:this,instance:e})}onInstancePause(e){this.emitHook("OnInstancePause",{ontology:this,instance:e})}onInstanceStop(e){this.emitHook("OnInstanceStop",{ontology:this,instance:e})}spawn(e="single",t,i){if(!this.isLoaded)throw new Error("Cannot start the state machine, because no ontology is loaded.");const s=this;return this.pushToMatrix(new Ub({get fingerprint(){return s.fingerprint},l10n:this.l10n,states:this.states,get preview(){return s.m_sPreviewMode},get autoPushForward(){return s.autoPushForward},chain:{state:e=>this.getFromChain("state",e),transducer:e=>this.getFromChain("transducer",e),branch:e=>this.getFromChain("branch",e),condition:e=>this.getFromChain("condition",e),slot:e=>this.getFromChain("slot",e)},events:{onInstanceCreate:e=>this.onInstanceCreate(e),onInstanceStart:e=>this.onInstanceStart(e),onInstanceData:(e,t)=>this.onInstanceData(e,t),onInstanceProcessing:(e,t)=>this.onInstanceProcessing(e,t),onInstanceStepForward:(e,t)=>this.onInstanceStepForward(e,t),onInstanceUpdate:e=>this.onInstanceUpdate(e),onInstanceFinishing:(e,t)=>this.onInstanceFinishing(e,t),onInstanceEnd:(e,t)=>this.onInstanceEnd(e,t),onInstanceFinish:e=>this.onInstanceFinish(e),onInstancePause:e=>this.onInstancePause(e),onInstanceStop:e=>this.onInstanceStop(e)},spawn:(e,t)=>this.pushToMatrix(e,{index:t,recalculate:!0,emit:"push"}),dependencies:e=>this.m_pDependencies[e.id]||{},iterate:e=>s.transducers(e),stencil:e=>s.stencil(e),hasChanged:(e,t)=>{const i=s.m_pChanges[e];return!(!i||!i.changed||(t&&(0===Vp(this.m_pChangesBuffer)&&Dm((()=>{lm(this.m_pChangesBuffer,((e,t)=>{const i=s.m_pChanges[t];i&&(i.changed=!1),delete this.m_pChangesBuffer[t]}),{keys:!0})})),this.m_pChangesBuffer[e]=!0),0))},get logger(){return s.isVerbose?e=>s.logger(e):void 0}},e,this.main,t,i))}stencil(e="exportables"){switch(e){case"exportables":return this.m_pStencils.exportables||(this.m_pStencils.exportables=Gg("stencil:exportables"),this.transducers(((e,t,i)=>{this.m_fnStencil&&!this.m_fnStencil(e)||e.slots.each((t=>{sm(t.exportable,!t.actionable)&&(this.m_pStencils.exportables=Gg(this.m_pStencils.exportables+e.id+t.type+t.reference+i))}))}))),this.m_pStencils.exportables;case"actionables":return this.m_pStencils.actionables||(this.m_pStencils.actionables=Gg("stencil:actionables"),this.transducers(((e,t,i)=>{this.m_fnStencil&&!this.m_fnStencil(e)||e.slots.each((t=>{t.actionable&&(this.m_pStencils.actionables=Gg(this.m_pStencils.actionables+e.id+t.type+t.reference+i))}))}))),this.m_pStencils.actionables}}load(e){if(Ep(e))return this.load(JSON.parse(e));this.m_bReloading=!0,this.m_pLog=[],this.unload(),this.logMessage("Start loading ontology"),this.m_pOntology=e,this.m_pMain=this.states.main(),this.m_bReloading=!1,this.chain(this.m_pMain);const t={},i=this.parse(rm(e,{id:this.m_pMain.id}),this.m_pMain,t),s=(e,t,i)=>{const s=this.m_pDependencies[e.id];s?s[t.id]=i:this.m_pDependencies[e.id]={[t.id]:i}},o=e=>{lm(e.transducers,(e=>{var t;if(e instanceof Db){const i=JSON.stringify(e.props);(null===(t=this.m_pChanges[e.id])||void 0===t?void 0:t.props)!==i&&(this.m_pChanges[e.id]={props:i,changed:!0},this.m_pChangesBuffer[e.id]&&delete this.m_pChangesBuffer[e.id],lm(this.m_pChain.slots,((t,o)=>{t&&i.indexOf(o)>0&&(t instanceof Mb?s(t,e,!1):lm(t,(t=>s(t,e,!1))))}),{keys:!0}),e.slots.each((t=>s(t,e,!0))))}else o(e)}))};return o(this.m_pTransducers=i.transducers),this.states.each((e=>{lm(t[e.id],(t=>{t.setSuccessor("live",e)})),ig(t,e.id)})),lm(t,((e,t)=>{let s="";lm(e,(e=>{s+=`${""===s?"":", "} ${e instanceof nb?"branch":"state"} '${e.id}'`})),i.errors|=Lb.OntologyInvalidJump,this.logMessage(`Jump reference '${t}' not found (reference used in the following states/branches: ${s})`)}),{keys:!0}),i.errors===Lb.None&&this.m_pMain?(this.m_pMetrics=i.metrics,this.logMessage(`Ontology loaded (${i.metrics.states} state${1===i.metrics.states?"":"s"}, ${i.metrics.transducers} transducer${1===i.metrics.transducers?"":"s"}, ${i.metrics.branches} branch${1===i.metrics.branches?"":"es"}, ${i.metrics.conditions} condition${1===i.metrics.conditions?"":"s"} and ${i.metrics.slots} slot${1===i.metrics.slots?"":"s"})`),this.emitHook("OnLoad",{ontology:this})):(this.logMessage("Ontology not loaded, an error occurred."),this.unload()),i.errors}unload(){this.stop(),this.isLoaded&&(this.m_pStates.clear(),this.logMessage("Ontology unloaded"),this.emitHook("OnUnload",{ontology:this})),this.m_bReloading||(lm(this.m_pDependencies,((e,t)=>{delete this.m_pDependencies[t]}),{keys:!0}),lm(this.m_pChanges,((e,t)=>{delete this.m_pChanges[t]}),{keys:!0})),this.m_pChain={states:{},transducers:{},branches:{},conditions:{},slots:{}},this.m_pOntology=void 0,this.m_pMain=void 0,this.m_pMetrics=void 0,this.m_sFingerprint=this.m_bFingerprint?Gg("fingerprint"):void 0,this.m_pStencils.exportables=void 0,this.m_pStencils.actionables=void 0}start(e,t){return this.spawn("single",e,t)}stop(){return this.m_fnPause&&(this.m_fnPause("VFSM stopped."),this.m_fnPause=void 0),this.m_bStopped=!0,this.m_bReloading||lm(this.m_pChanges,(e=>{e.changed=!0})),!!this.isRunning&&(this.reverseEach((e=>{e.stop()})),!0)}snapshot(e){const t=[];if(this.each((e=>{t.push(e.snapshot)})),t.length>0){const i={a:t};return Ap(e)&&$m(i,"b",e),i}}pause(e,t){if(t){const i=new Promise(((i,s)=>{const o=this.snapshot(e);o&&this.isRunning&&!this.m_fnPause?(this.each((e=>e.data.freeze())),this.m_fnPause=s,t(o,(t=>{if(this.m_fnPause=void 0,t||this.each((e=>e.data.unfreeze())),t){const t=this.pause(e);t?i(t):s("VSFM cannot be paused.")}else s("VSFM pause canceled.")}))):s(this.m_fnPause?"VFSM already pausing.":"VSM not running.")}));return i.catch((e=>{this.logMessage(e||"Pause error!")})),i}if(this.isRunning){const t={a:[]};return this.m_bPaused=!0,this.reverseEach((e=>{const i=e.pause();i&&t.a.splice(0,0,i)})),Ap(e)&&$m(t,"b",e),t}}resume(e){return this.stop(),Vp(e.a)>0&&(lm(e.a,(e=>{this.spawn(e.e?"multi":"single",e)})),Dm((()=>{this.isRunning&&this.emitHook("OnResume",{ontology:this,data:e.b})})),this.isRunning)}previewMode(e,t=!0){return e&&this.m_sPreviewMode!==e&&(this.m_sPreviewMode=e,t&&this.each((e=>e.restart()))),this.m_sPreviewMode}forEach(e,t="all",i){return this.states.each((s=>!(s===i||("states"!==t&&"all"!==t||!e(s))&&!s.transducers.each((s=>s!==i&&!("transducers"!==t&&"all"!==t||!e(s))))&&!s.branches.each((s=>s!==i&&(!("branches"!==t&&"all"!==t||!e(s))||s.conditions.each((s=>s!==i&&!("conditions"!==t&&"all"!==t||!e(s))))))))))}destroy(){this.unload(),super.destroy()}}class Jb extends Xb{constructor(e,t,i,s,o,n,r){super(e,t,i,s,o,n,r)}}function Kb(e){return t=>{$m(t,"property",e)}}let ef=class extends ib{constructor(e,t){super(e,t)}get id(){return this.hash}get runner(){return this.branch.runner}onCondition(e,t){if(!this.props.disabled&&this.runner){const i=this.runner.namespace.conditionBlocks.create(this,e);if(i){const s=(this.props.block?this.props.block.slot:"")||"";if(s&&!e.mutableValueOf(s))return!1;const o=bg("condition",i,{callback:t});return!(Up(o)||o instanceof rb)||o}}return!1}onApproved(e){if(!this.props.disabled&&"each"===this.branch.culling){const t=(this.props.block?this.props.block.slot:"")||"";if(t){const i=e.mutableValueOf(t);i&&i.mountContext(e)}}}};ef=pb([Kb("conditions")],ef);let tf=class extends nb{get id(){return this.hash}get runner(){return this.cluster.runner}get cluster(){return this.state}onCondition(){return!0}onLeave(e){this.runner&&this.runner.onInstanceBranchLeave(e,this),super.onLeave(e)}};tf=pb([Kb("branches")],tf);let sf=class extends cb{constructor(){super(...arguments),this.m_pValidation={}}get id(){return this.hash}get runner(){return this.ontology}get percentageInRunner(){const e=this.runner.metrics.states;return e>0?Math.floor(Math.min(this.enumerator-1,e)/e*100):0}getValidation(e){return this.m_pValidation[e.instance.id+e.key]||"unknown"}onEnterCondition(){return!0}onEnter(e,t){return this.runner.onInstanceCluster(e,this,t),this.runner.onInstanceProgress(e.instance,this.percentageInRunner),t}onLeaveCondition(){return!0}onLeave(e){e.instance.isRunning&&"paginated"===this.runner.mode&&(this.runner.onInstanceClusterLeave(e.instance,"forward",this),_m((()=>{this.isPopped||this.runner.onInstanceStep(e.instance,"forward")})),super.onLeave(e))}onCancel(e){e.instance.isRunning&&"paginated"===this.runner.mode&&(this.runner.onInstanceClusterLeave(e.instance,"backward",this),_m((()=>{this.isPopped||this.runner.onInstanceStep(e.instance,"backward")})),super.onCancel(e))}onValidate(e){return $m(this.m_pValidation,e.instance.id+e.key,"unknown"),!0}onValidated(e,t,i){$m(this.m_pValidation,e.instance.id+e.key,t),this.runner.onInstanceValidated(e.instance,t,i),super.onValidated(e,t,i)}onEvaluate(e,t){this.runner.onInstanceClusterEvaluating(e.instance,this,t),super.onEvaluate(e,t)}};var of,nf;sf=pb([Kb("clusters")],sf),function(e){e[e.None=0]="None",e[e.Formatting=1]="Formatting",e[e.Paragraphs=2]="Paragraphs",e[e.Breaks=4]="Breaks",e[e.Hyperlinks=8]="Hyperlinks",e[e.Headings=16]="Headings",e[e.Blockquotes=32]="Blockquotes",e[e.Code=64]="Code",e[e.InlineCode=128]="InlineCode",e[e.Images=256]="Images",e[e.All=511]="All"}(of||(of={})),function(e){e[e.Text=1]="Text",e[e.Content=2]="Content",e[e.Newline=4]="Newline",e[e.Space=8]="Space",e[e.Heading=16]="Heading",e[e.Quote=32]="Quote",e[e.Code=64]="Code",e[e.InlineCode=128]="InlineCode"}(nf||(nf={}));class rf{constructor(e,t){if(this.m_nFeatures=of.All,this.m_bMentions=!1,this.m_bReferences=!1,this.m_pBlocks=[],this.m_nOpcode=nf.Newline,this.m_nIndex=0,this.m_sBuffer="",this.m_pTags=[],this.m_nStopIndex=-1,this.m_sMarkdown=e.replace(/(\r\n|[\r\n])/,"\n"),this.m_nLength=this.m_sMarkdown.length,/[\n\\\*_~`#>\[!@]/g.test(this.m_sMarkdown))t&&("number"==typeof t.features&&(this.m_nFeatures=t.features),this.m_pMentions=t.mentions,this.m_pReferences=t.references,this.m_sStopWord=t.stopWord,this.m_sStopWord&&(this.m_sStopChar=this.m_sStopWord.charAt(0))),this.parse();else{if(t&&t.stopWord){const e=this.m_sMarkdown.indexOf(t.stopWord);-1!==e&&(this.m_sMarkdown=this.m_sMarkdown.substr(0,e),this.m_nStopIndex=e)}this.m_pBlocks.push({content:this.m_sMarkdown.replace(/\s\s+/g," ")})}}static parse(e,t){return new rf(e,t)}get features(){return this.m_nFeatures}get abstractSyntaxTree(){const e=this.m_pBlocks.length;if(1===e){const e={content:this.m_pBlocks[0].content,value:this.m_pBlocks[0].value};return"paragraph"!==this.m_pBlocks[0].type&&(e.type=this.m_pBlocks[0].type),e}return{content:0===e?"":this.m_pBlocks}}get text(){let e="";return this.map(((t,i)=>{switch(t){case"break":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"quote":case"codeline":return void(e+=(""===e?"":"\n")+i);case"paragraph":return void(e+=(""===e?"":"\n\n")+i);case"codeblock":case"image":return;default:return void(e+=i)}})),e.replace(/(^\s*)|(\s*$)/g,"").replace(/[^\S\r\n\.]{2,}/g," ").replace(/\n[^\S\r\n\.]/g,"\n")}get hasMentions(){return this.m_bMentions}get hasReferences(){return this.m_bReferences}parse(){for(;this.m_nIndex<this.m_nLength;this.m_nIndex++){if(this.m_sBuffer=this.m_sMarkdown.charAt(this.m_nIndex),this.m_nOpcode&nf.Code){if("\n"===this.m_sBuffer){this.m_nOpcode&nf.Newline&&this.m_pTag&&"codeblock"===this.m_pTag.type&&"string"!=typeof this.m_pTag.content&&(!Array.isArray(this.m_pTag.content)||this.m_pTag.content.length>0)&&(this.m_pTag.content=[...Array.isArray(this.m_pTag.content)?this.m_pTag.content:[this.m_pTag.content],{parent:this.m_pTag,type:"codeline",content:""}]),this.m_nOpcode|=nf.Newline,this.m_pText=void 0;continue}}else{if("\n"===this.m_sBuffer){this.features&of.Paragraphs?this.m_nOpcode&nf.Newline&&this.m_pText&&(this.m_nOpcode&=~nf.Quote,this.block("paragraph")):this.features&of.Breaks&&this.m_nOpcode&nf.Text&&(this.m_nOpcode&=~nf.Content,this.m_pTags.push("break")),this.m_nOpcode|=nf.Newline,this.m_nOpcode&nf.Heading&&(this.m_nOpcode&=~nf.Heading,this.block("paragraph"));continue}if(this.parseLinebreak())continue;if(this.m_nIndex>0&&(this.m_nOpcode&nf.Newline||this.m_nOpcode&nf.Space)&&" "===this.m_sBuffer)continue;if(this.m_nIndex>0&&(this.m_nOpcode&nf.Newline||this.m_nOpcode&nf.Space)&&"\t"===this.m_sBuffer)continue}this.parseStopWord()||(!(this.parseEscapeCharacters()||this.parseCodeBlock()||this.parseBuffer("mention",this.m_pMentions,"@",(()=>this.m_bMentions=!0))||this.parseBuffer("reference",this.m_pReferences,"#",(()=>this.m_bReferences=!0))||this.parseCode())&&(this.parseHeading()||this.parseBlockquotes()||this.parseImage()||this.parseHyperlinks()||this.features&of.Formatting&&(this.parseTag("bold+italic","*","triple")||this.parseTag("bold","*","double")||this.parseTag("italic","*","single")||this.parseTag("underline","_","single-or-double")||this.parseTag("strikethrough","~","single-or-double")))||this.flush(),0===this.m_pTags.length&&(this.m_nOpcode&=~nf.Newline," "!==this.m_sBuffer&&"\t"!==this.m_sBuffer||(this.m_nOpcode|=nf.Space)))}}pushBlock(e,t){const i={parent:void 0,type:e,content:"",value:t};return this.m_pBlocks.push(i),this.m_nOpcode&=~nf.Content,i}block(e,t){this.m_pBlock={type:e,value:t},this.m_pTags=[],this.m_nOpcode&=~nf.InlineCode}pushTag(e){this.m_pTags.push(e)}popTag(e){const t=this.m_pTags.length;let i=this.m_pTag;if(t>0)for(let i=t-1;i>=0;i--)if(this.m_pTags[i]===e)return this.m_pTags.splice(i,this.m_pTags.length-i),!0;for(;i;){if(i.type===e)return this.m_pTag=this.m_pText=i.parent,!0;i=i.parent}return!1}isTagActive(e){const t=this.m_pTags.length;let i=this.m_pTag;if(t>0)for(let i=t-1;i>=0;i--)if(this.m_pTags[i]===e)return!0;for(;i;){if(i.type===e)return!0;i=i.parent}return!1}tag(e){return!this.popTag(e)&&(this.pushTag(e),!0)}flush(e=!1){if(!this.m_sBuffer&&!e)return{content:""};this.m_pBlock?(this.m_pTag=this.m_pText=this.pushBlock(this.m_pBlock.type,this.m_pBlock.value),this.m_pBlock=void 0,this.m_nOpcode&nf.Code&&(this.m_pTag.content=this.m_pText={parent:this.m_pTag,type:"codeline",content:""})):this.m_pTag||(this.m_pTag=this.m_pText=this.pushBlock("paragraph"));let t=this.m_pTags.shift();for(;t;)this.m_pText={parent:this.m_pTag,type:t,content:""},"string"==typeof this.m_pTag.content&&this.m_pTag.content&&(this.m_pTag.content={parent:this.m_pTag,content:this.m_pTag.content}),this.m_pTag.content="string"==typeof this.m_pTag.content?this.m_pText:[...Array.isArray(this.m_pTag.content)?this.m_pTag.content:[this.m_pTag.content],this.m_pText],"break"===t?this.m_pText=this.m_pTag:this.m_pTag=this.m_pText,t=this.m_pTags.shift();return this.m_pText&&"string"==typeof this.m_pText.content||(this.m_pText={parent:this.m_pTag,content:""},this.m_pTag.content=[...Array.isArray(this.m_pTag.content)?this.m_pTag.content:[this.m_pTag.content],this.m_pText],"codeblock"===this.m_pTag.type&&(this.m_pText.type="codeline")),"\t"===this.m_sBuffer?(this.m_pText.content+="codeline"===this.m_pText.type?"  ":" ",{content:""}):(this.m_nOpcode&nf.Newline&&this.m_nOpcode&nf.Content&&(e||" "!==this.m_sBuffer)&&(this.m_pText.content+=" "),this.m_pText.content+=this.m_sBuffer,this.m_nOpcode|=nf.Text,this.m_nOpcode|=nf.Content,this.m_nOpcode&=~nf.Space,e&&(this.m_sBuffer=""),this.m_pText)}parseLinebreak(){return!!(this.features&of.Paragraphs&&this.features&of.Breaks&&this.m_nOpcode&nf.Content&&" "===this.m_sBuffer&&this.m_nIndex+2<this.m_nLength&&" "===this.m_sMarkdown.charAt(this.m_nIndex+1)&&"\n"===this.m_sMarkdown.charAt(this.m_nIndex+2))&&(this.m_nIndex++,this.m_nOpcode&=~nf.Space,this.m_nOpcode&=~nf.Content,this.m_pTags.push("break"),!0)}parseEscapeCharacters(){if("\\"===this.m_sBuffer&&this.m_nIndex+1<this.m_nLength){const e=this.m_sMarkdown.charAt(this.m_nIndex+1);if("\\"===e||"*"===e||"_"===e||"~"===e||"`"===e||"#"===e||">"===e||"["===e||"]"===e||"("===e||")"===e||"!"===e||"@"===e)return this.m_sBuffer=e,this.m_nIndex++,!0}return!1}parseTag(e,t,i){if(this.m_sBuffer===t){if("single"!==i&&this.m_nIndex+("triple"===i?2:1)<this.m_nLength&&this.m_sMarkdown.charAt(this.m_nIndex+1)===t&&("triple"!==i||this.m_sMarkdown.charAt(this.m_nIndex+2)===t))this.m_nIndex+="triple"===i?2:1;else if("double"===i||"triple"===i)return!1;if("bold"===e||"italic"===e){if(this.popTag("bold+italic"))return this.tag("bold"===e?"italic":"bold"),!0}else if("bold+italic"===e){const t=this.isTagActive("bold"),i=this.isTagActive("italic");if(this.popTag("bold"),this.popTag("italic"),t&&i)return!0;(t||i)&&(this.popTag(t?"bold":"italic"),e=t?"italic":"bold")}return this.tag(e),!0}return!1}parseBuffer(e,t,i,s){if(t&&this.m_sBuffer===i&&this.m_nIndex+1<this.m_nLength){const i=t.parser(this.m_sMarkdown.substr(this.m_nIndex+1,t.numberOfChars||void 0),this.m_nIndex);if(i&&i.shift>0){this.m_nIndex+=i.shift,this.m_sBuffer="",this.pushTag(e);const t=this.flush(!0);return i.markdown?t.parent&&"code"===t.parent.type?t.content=i.markdown:t.content=rf.parse(i.markdown,{features:this.features&of.Formatting|this.features&of.InlineCode|this.features&of.Hyperlinks|this.features&of.Images,mentions:this.m_pMentions,references:this.m_pReferences}).abstractSyntaxTree.content:i.text&&(t.content=i.text),t.value=i.value,t.value&&s(),this.popTag(e),!0}}return!1}parseStopWord(){return!(this.m_nOpcode&nf.InlineCode||this.m_nOpcode&nf.Code||this.m_sBuffer!==this.m_sStopChar||!this.m_sStopWord||this.m_sMarkdown.substr(this.m_nIndex,this.m_sStopWord.length)!==this.m_sStopWord||(this.m_nStopIndex=this.m_nIndex,this.m_nIndex=this.m_nLength,0))}parseHeading(){if(this.features&of.Paragraphs&&this.features&of.Headings&&this.m_nOpcode&nf.Newline&&"#"===this.m_sBuffer){let e=1,t=this.m_nIndex+1;for(;t<this.m_nLength&&e>=1&&e<=6;){const i=this.m_sMarkdown.charAt(t);if("#"!==i){" "!==i&&(e=0);break}e++,t++}switch(e){case 1:this.block("h1");break;case 2:this.block("h2");break;case 3:this.block("h3");break;case 4:this.block("h4");break;case 5:this.block("h5");break;case 6:this.block("h6");break;default:return!1}return this.m_nIndex+=e,this.m_nOpcode|=nf.Heading,!0}return!1}parseBlockquotes(){return!!(this.features&of.Paragraphs&&this.features&of.Blockquotes&&this.m_nOpcode&nf.Newline&&">"===this.m_sBuffer)&&(this.m_nIndex+1<this.m_nLength&&" "===this.m_sMarkdown.charAt(this.m_nIndex+1)&&this.m_nIndex++,this.m_nOpcode&nf.Quote?(this.m_sBuffer=" ",!1):(this.m_nOpcode|=nf.Quote,this.block("quote"),!0))}parseImage(){if(this.features&of.Images&&"!"===this.m_sBuffer&&this.m_nIndex+4<this.m_nLength&&"["===this.m_sMarkdown.charAt(this.m_nIndex+1)){let e="",t="",i=!1;const s=this.m_nIndex++;for(;++this.m_nIndex<this.m_nLength;){if(this.m_sBuffer=this.m_sMarkdown.charAt(this.m_nIndex),!this.parseEscapeCharacters())if(i){if(")"===this.m_sBuffer){if(""!==t){this.pushTag("image");const i=this.flush(!0);i.content=e,i.value=t,this.popTag("image")}return!0}}else if("]"===this.m_sBuffer&&this.m_nIndex+1<this.m_nLength&&"("===this.m_sMarkdown.charAt(this.m_nIndex+1)){i=!0,this.m_nIndex++;continue}i?t+=this.m_sBuffer:e+=this.m_sBuffer}return this.m_nIndex=s,this.m_sBuffer="!",!1}return!1}parseHyperlinks(){if(this.features&of.Hyperlinks&&"["===this.m_sBuffer&&this.m_nIndex+3<this.m_nLength){const e=rf.parse(this.m_sMarkdown.substr(this.m_nIndex+1),{features:this.features&of.Formatting|this.features&of.InlineCode|this.features&of.Images,mentions:this.m_pMentions,references:this.m_pReferences,stopWord:"]("});if(-1!==e.m_nStopIndex){const t=this.m_nIndex;let i="";for(this.m_nIndex+=e.m_nStopIndex+2;++this.m_nIndex<this.m_nLength;){if(this.m_sBuffer=this.m_sMarkdown.charAt(this.m_nIndex),!this.parseEscapeCharacters()&&")"===this.m_sBuffer){if(""!==i){this.pushTag("hyperlink");const t=this.flush(!0);t.content=e.abstractSyntaxTree.content||i,t.value=i,this.popTag("hyperlink")}return!0}i+=this.m_sBuffer}this.m_nIndex=t,this.m_sBuffer="["}}return!1}parseCode(){return this.features&of.InlineCode&&"`"===this.m_sBuffer&&(this.m_sBuffer="",this.m_nOpcode=this.m_nOpcode^nf.InlineCode,this.tag("code")),!!(this.m_nOpcode&nf.InlineCode)}parseCodeBlock(){if(this.features&of.Paragraphs&&this.features&of.Code&&this.m_nOpcode&nf.Newline&&"`"===this.m_sBuffer&&this.m_nIndex+2<this.m_nLength&&"`"===this.m_sMarkdown.charAt(this.m_nIndex+1)&&"`"===this.m_sMarkdown.charAt(this.m_nIndex+2)){let e="",t=!0;for(this.m_nOpcode=this.m_nOpcode^nf.Code,this.m_nIndex+=3,this.m_sBuffer="";this.m_nIndex<this.m_nLength;){const i=this.m_sMarkdown.charAt(this.m_nIndex);if("\n"===i){this.m_nIndex--;break}" "===i||"\t"===i?t=!1:t&&(e+=i),this.m_nIndex++}return this.m_nOpcode&nf.Code?this.block("codeblock",e||void 0):this.block("paragraph"),!0}return!!(this.m_nOpcode&nf.Code)}mapHelper(e,t,i=!0,s){const o="string"==typeof e.content,n=e.value;if(n&&n.ref&&"string"==typeof n.string)return t(e.type,n.string,n.ref,s,"node");const r=t(e.type,o?e.content:"",e.value,s,i&&!e.type?o?"text":"root":"node");return o||(Array.isArray(e.content)?e.content.forEach((e=>this.mapHelper(e,t,!1,r))):this.mapHelper(e.content,t,!1,r)),r}reduceHelper(e,t){const i=e.value;if(i&&i.ref&&"string"==typeof i.string)return t(e.type,i.string,i.ref);if("string"!=typeof e.content){const i=[];return Array.isArray(e.content)?e.content.forEach((e=>i.push(this.reduceHelper(e,t)))):i.push(this.reduceHelper(e.content,t)),t(e.type,i,e.value)}return t(e.type,e.content,e.value)}map(e){return this.mapHelper(this.abstractSyntaxTree,e)}reduce(e){return this.reduceHelper(this.abstractSyntaxTree,e)}}function af(e,t){if(e.slot instanceof kb){if(e.slot.digits)return e.slot.toString(e.value);{const i=e.slot.toValue(e.value);return e.slot.formatString(t.l10n.locale.number(i,e.slot.precision,!!e.slot.separator),1!==i)}}if(e.slot instanceof Sb)return e.slot.supportsTime?t.l10n.locale.dateTimeFull(e.slot.toValue(e.value),!0):t.l10n.locale.dateFull(e.slot.toValue(e.value),!0)}function lf(e){return!(!e||64!==e.length||!/[A-Fa-f0-9]{64}/.test(e))}const cf=Gg("id");function uf(e,t){return e=e||"",t&of.Breaks?e:e.replace(/(\r\n|[\r\n])/g," ")}function hf(e,t,i,s,o){return rf.parse(e,{features:i,mentions:{numberOfChars:64,parser:(e,n)=>{if(lf(e)){const r=t&&t.variableFor(e,(e=>e.props.block&&e.props.block.slot),af,cf);return r?{shift:64,value:{ref:r,get string(){return(o&&n>0?encodeURIComponent(uf(null==r?void 0:r.string,i)):uf(null==r?void 0:r.string,i))||s}}}:{shift:64,text:s}}}}})}function df(e,t,i){const s=i&&i.placeholder||"";let o=i&&!Dp(i.features)?i.features:of.Formatting|of.Hyperlinks;if(i&&i.lineBreaks&&(o|=of.Breaks),t){const i=`${t.key}/${e}/${o}/${s}`;return t.instance.readFromCache(i)||t.instance.writeToCache(i,hf(e,t,o,s,!1))}return hf(e,void 0,o,s,!1)}function pf(e,t,i="___",s=!1,o=of.None){if(!t)return hf(e,void 0,o|(s?of.Breaks:0),i,!1).text;const n=`${t.key}/${e}/${i}/${s}`,r=t.instance.readFromCache(n);if(Ep(r))return r;const a=r||t.instance.writeToCache(n,hf(e,t,o|(s?of.Breaks:0),i,!1));return a.hasMentions?a.text:t.instance.writeToCache(n,a.text)}function mf(e,t,i="",s=[]){if(!t)return hf(e,void 0,of.None,i,!0).text;const o=`${t.key}/${e}/${i}/URL`,n=t.instance.readFromCache(o);if(Ep(n))return n;const r=n||t.instance.writeToCache(o,hf(e,t,of.None,i,!0)),a=r.text,l=(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(a)||ym(s,(e=>0===a.indexOf(`data:${e};base64,`)&&a.length>13+e.length)))&&a||"";return r.hasMentions?l:t.instance.writeToCache(o,l)}function gf(e,t,i){let s=i&&!Dp(i.features)?i.features:of.Formatting|of.Hyperlinks;i&&i.lineBreaks&&(s|=of.Breaks);const o=i&&i.placeholder||"";if(!t){const t=hf(e,void 0,s,o,!1);if("reduce"in i)return t.reduce(i.reduce);if("map"in i)return t.map(i.map);throw new Error("You need to specify a reduce or map function.")}const n=`${t.key}/${"reduce"in i?"reduce":"map"}/${e}/${s}/${o}`,r=t.instance.readFromCache(n);if(!r||r instanceof rf){const a=r||t.instance.writeToCache(n,hf(e,t,s,o,!1));let l;if("reduce"in i)l=a.reduce(i.reduce);else{if(!("map"in i))throw new Error("You need to specify a reduce or map function.");l=a.map(i.map)}return a.hasMentions?l:t.instance.writeToCache(n,l)}return r}function bf(e){return rf.parse(e,{features:of.Formatting|of.Hyperlinks|of.Breaks,mentions:{numberOfChars:64,parser:e=>{if(lf(e))return{shift:64,text:"___"}}}}).text}class ff{constructor(e,t){this.m_pKeys={},this.m_pNode=e,this.context=t}get view(){return this.m_pNode.runner.isPreview?"preview":this.m_pNode.runner.isTest?"test":"live"}get validation(){return this.context.validationOf(this.m_pNode)}get node(){return this.m_pNode.props}get props(){return this.node.block}get shouldAutoRender(){return this.type.autoRender||!1}get shouldAutoValidate(){return sm(this.type.autoValidate,!0)}get isFailed(){return"fail"===this.validation}get isPassed(){return"pass"===this.validation}slotOf(e,t){return this.m_pNode.slots.select(e,t)}valueOf(e,t,i){const s=e instanceof Mb?e.slots===this.m_pNode.slots&&e:this.slotOf(e,t);if(s){const e=this.context.mutableValueOf(s);if(e)return i&&(e.useModifier(i.modifier),i.onChange&&e.useListener(i.onChange),i.onContext&&e.useContext(i.onContext),i.prefill&&!e.hasValue&&e.set(i.prefill.value,i.prefill.reference),i.confirm&&e.confirm()),e}}immutableValueOf(e){return this.context.immutableValueOf(e)}variableFor(e){return this.context.variableFor(e,(e=>e.props.block&&e.props.block.slot),af)}parseVariables(e,t="",i=!1){return pf(e,this.context,t,i)}key(e="default"){return this.m_pKeys[e]||(this.m_pKeys[e]="_"+Gg(`${this.m_pNode.id}/${this.context.key}/${e}`))}rerender(){this.m_pNode.runner.rerender(this.context.instance)}lock(){this.m_pNode.slots.each((e=>{const t=this.valueOf(e);t&&t.lock()}))}unlock(){this.m_pNode.slots.each((e=>{const t=this.valueOf(e);t&&t.unlock()}))}clear(){this.m_pNode.slots.each((e=>{const t=this.valueOf(e);t&&t.clear()}))}}class yf extends ff{mutableValueOf(e){return this.context.mutableValueOf(e)}}let vf=class extends Db{constructor(e,t){super(e,t),this.m_pBlocks={},this.m_nRerender=0}get id(){return this.hash}get runner(){return this.cluster.runner}get cluster(){return this.state}get isVisible(){if(this.props.disabled)return!1;const e=Object.keys(this.m_pBlocks),t=e.length>0&&this.m_pBlocks[e[0]]||void 0;return!(t instanceof yf||!(t||this.props.description||this.props.name&&sm(this.props.nameVisible,!0)))}block(e){const t=this.m_pBlocks[e.instance.id+e.key]||$m(this.m_pBlocks,e.instance.id+e.key,this.runner.namespace.nodeBlocks.create(this,e));return t&&$m(t,"context",e),t}onEnterCondition(e,t){if(this.props.disabled)return!1;const i=this.block(e);if(i){const e=bg("condition",i,{callback:t});return!(Up(e)||e instanceof rb)||e}return!0}onEnter(e,t){const i=this.block(e);if(this.runner.onInstanceNode(e,this,t),i){if(i instanceof yf)return e.instance.createTransaction(this,(()=>i.do(t)));e.instance.data.unhookContext(i),e.instance.data.hook("OnValueChange","framed",(e=>{e.transducer===this&&t.done()}),i),i.shouldAutoRender&&e.instance.data.hook("OnValueChange","synchronous",(e=>{e.transducer===this&&(this.m_nRerender=Am((()=>{this.m_nRerender=0,i.rerender()}),this.m_nRerender))}),i)}return t}onLeave(e){if(0!==this.m_nRerender&&(this.m_nRerender=jm(this.m_nRerender)),"paginated"!==this.runner.mode)return;const t=this.block(e);if(t){const i={type:"left"};e.instance.data.unhookContext(t),bg("destroy",t,i)}}onCancel(e){if(0!==this.m_nRerender&&(this.m_nRerender=jm(this.m_nRerender)),"paginated"!==this.runner.mode)return;const t=this.block(e);if(t){const i={type:"canceled"};e.instance.data.unhookContext(t),bg("destroy",t,i)}}onValidate(e,t,i){const s=this.block(e);if(s){if(s.shouldAutoValidate&&this.slots.each((t=>{if(t.required){const i=e.mutableValueOf(t);if(!i||!i.hasValue)return!0;if(!i.reference&&Ep(i.value)&&""===i.value)return!0}return!1})))return!1;const o=bg("validator",s,{callback:i,current:t});return o instanceof rb&&s.rerender(),!(Up(o)||o instanceof rb)||o}return!0}onValidated(e,t,i){const s=this.block(e);s&&s.rerender(),super.onValidated(e,t,i)}onSideEffect(e){if(!this.props.disabled){const t=this.m_pBlocks[e.instance.id+e.key];t instanceof yf&&e.instance.createTransaction(this,(()=>t.do()))}}};vf=pb([Kb("nodes")],vf);class Mf{constructor(e,t){this.m_pCondition=e,this.context=t}get nodeRef(){return!this.m_pNode&&this.props.node&&this.m_pCondition.runner&&this.m_pCondition.runner.forEach((e=>(e.props.id===this.props.node&&(this.m_pNode=e),this.m_pNode instanceof vf)),"transducers"),this.m_pNode}get clusterRef(){return!this.m_pCluster&&this.props.cluster&&this.m_pCondition.runner&&this.m_pCondition.runner.forEach((e=>(e.props.id===this.props.cluster&&(this.m_pCluster=e),this.m_pCluster instanceof sf)),"states"),this.m_pCluster}get branchRef(){return!this.m_pBranch&&this.props.branch&&this.m_pCondition.runner&&this.m_pCondition.runner.forEach((e=>(e.props.id===this.props.branch&&(this.m_pBranch=e),this.m_pBranch instanceof tf)),"branches"),this.m_pBranch}get view(){return this.m_pCondition.runner?this.m_pCondition.runner.isPreview?"preview":this.m_pCondition.runner.isTest?"test":"live":"live"}get condition(){return this.m_pCondition.props}get props(){return this.condition.block}get node(){var e;return null===(e=this.nodeRef)||void 0===e?void 0:e.props}get cluster(){var e;return null===(e=this.clusterRef)||void 0===e?void 0:e.props}get branch(){var e;return null===(e=this.branchRef)||void 0===e?void 0:e.props}get slots(){var e;return null===(e=this.nodeRef)||void 0===e?void 0:e.slots}slotOf(e){const t=this.context.instance.data.forSlot(e||this.props.slot||"");return t&&t.slot}valueOf(e,t){if(this.nodeRef){const i=e instanceof Mb?e:this.nodeRef.slots.select(e||this.props.slot||"",t);return i&&i.slots===this.nodeRef.slots&&this.context.immutableValueOf(i)||void 0}}immutableValueOf(e){return this.context.immutableValueOf(e||this.props.slot||"")}variableFor(e){return this.context.variableFor(e,(e=>e.props.block&&e.props.block.slot),af)}parseVariables(e,t="",i=!1){return pf(e,this.context,t,i)}}class wf{constructor(e){this.m_pBlocks={},this.m_sIdentifier=e}get identifier(){return this.m_sIdentifier}ofType(e){return this.m_pBlocks[e]}register(e,t,i){if(this.m_pBlocks[t]&&this.m_pBlocks[t]!==e)throw new Error(`Duplicate block '${t}' registered.`);lm(i,(t=>{if(this.m_pBlocks[t]&&this.m_pBlocks[t]!==e)throw new Error(`Duplicate block '${t}' registered.`);$m(this.m_pBlocks,t,e)})),$m(e,"identifier",t),e.prototype.type=$m(this.m_pBlocks,t,e)}create(e,t){if(e.props.block){const i=this.ofType(e.props.block.type);if(i)return new i(e,t)}}}function xf(e,t){let i="",s="";return lm(e,(e=>{e!==s&&(i+=(""===i?"":t)+e,s=e)})),i}function Sf(e,t,i,s=" / "){const o=[];return e.transducers(((n,r,a)=>{if(n.props.block){const l=fm(n.slots.all,(e=>!(!("all"===t||"exportables"===t&&sm(e.exportable,!e.actionable)||"actionables"===t&&e.actionable)||i&&!ym(i,(t=>e.id===t))))),c=hm(l,((e,t)=>e+(t.alias||t.name?1:0)),0)||0;lm(l,(t=>{const i=e.data.forSlot(t);if(i){let u=[t.alias||t.name||""];u[0]||(u[0]=bf(n.props.name||"")||bf(n.props.placeholder||""),u[0]&&l.length-c>1&&t.label&&u.push(t.label),!u[0]&&t.label&&(u[0]=t.label)),r.length>0&&(u=fm(um(r,(t=>{if(t.props.block){const i=t.props.block;if(i.slot){const t=e.lookup.slot(i.slot);if(t instanceof Mb){const e=t.alias||t.name||"";if(e)return e}}if(i.node){const t=e.lookup.transducer(i.node);if(t instanceof vf){const e=t.props.name||t.props.placeholder;if(e)return e}}if(i.cluster){const t=e.lookup.state(i.cluster);if(t instanceof sf){const e=t.props.name;if(e)return e}}if(i.branch){const t=e.lookup.branch(i.branch);if(t instanceof tf){const e=t.props.name;if(e)return e}}}return""})),(e=>!!e)).concat(...u)),o.push({node:n,block:{type:n.props.block.type,version:n.props.block.version},slot:t,name:xf(u,s),context:a,key:Gg(`${t.id}/${a}`),values:i,value:i.values[a]})}}))}})),o}function If(e){try{return e.normalize("NFC")}catch(t){return e}}var kf,Nf;!function(e){function t(e){return{get fingerprint(){return e.fingerprint},get stencil(){return e.stencil},fields:pp.iterateToString(e.fields,",",(e=>`"${pp.replace(e.name,'"','""')}"`)),record:pp.iterateToString(e.fields,",",(e=>`"${pp.replace(e.string,'"','""')}"`))}}function i(e,t,i=" / "){const s=e instanceof jb?e.instance:e;return{get fingerprint(){return s.fingerprint},get stencil(){return s.stencil("exportables")},fields:um(Sf(s,"exportables",t,i),(e=>({name:e.name,type:e.block.type,version:e.block.version,get node(){return{id:e.node.id,key:Gg(`${e.node.id}/${e.context}`),context:e.context,props:()=>e.node.props}},slot:e.slot.reference,datatype:e.slot.type,string:e.value&&If(e.slot.toString(e.value.value))||"",value:e.value&&e.value.value,modified:e.values.isModified(e.key),reference:e.value&&e.value.reference,time:e.value&&e.value.time,key:e.key})))}}function s(e,t,s=" / "){const o=e instanceof jb?e.instance:e;return{get fingerprint(){return o.fingerprint},get stencil(){return o.stencil("exportables")},fields:fm(i(o,t,s).fields,(e=>Hp(e.time)))}}function o(e,t,s=" / "){const o=e instanceof jb?e.instance:e;return{get fingerprint(){return o.fingerprint},get stencil(){return o.stencil("exportables")},fields:fm(i(o,t,s).fields,(e=>e.modified))}}e.values=function(e,t){const i=e instanceof jb?e.instance:e,s={};return lm(i.data.all,(e=>{const o=e.transducer,n=o.props.block;!n||t&&!ym(t,(t=>e.slot.id===t))||$m(s,e.slot.id,{get fingerprint(){return i.fingerprint},node:{id:o.id,get name(){return bf(o.props.name||"")||bf(o.props.placeholder||"")}},block:{type:n.type,version:n.version},slot:{id:e.slot.id,reference:e.slot.reference,name:e.slot.alias||e.slot.name||"",label:e.slot.label||""},values:e.values})})),s},e.exportables=i,e.exportablesWithData=s,e.exportablesDiff=o,e.fields=function(e,t,s=" / "){return i(e,t,s)},e.NVPs=function(e,t){const s={};return(e instanceof Ub||e instanceof jb?i(e):e).fields.forEach((e=>{if(e.name){let i=e.name,o=1;for(;Ap(s[i]);)i=`${e.name} (${++o})`;s[i]=zp(t)?t(e):"strings"!==t&&(Dp(e.value)||Up(e.value)||Hp(e.value))?e.value:e.string}})),s},e.CSV=function(e,s,o=" / "){return t(i(e instanceof jb?e.instance:e,s,o))},e.CSVWithData=function(e,i,o=" / "){return t(s(e instanceof jb?e.instance:e,i,o))},e.CSVDiff=function(e,i,s=" / "){return t(o(e instanceof jb?e.instance:e,i,s))},e.actionables=function(e){const t=e instanceof jb?e.instance:e,i={};let s=!1;if(lm(Sf(t,"actionables"),(e=>{const t=Gg(`${e.node.id}/${e.context}`);(i[t]||(i[t]={key:t,type:e.block.type,version:e.block.version,get node(){return{id:e.node.id,key:t,context:e.context,props:()=>e.node.props}},data:[]})).data.push({key:e.key,name:e.name,slot:e.slot.reference,datatype:e.slot.type,string:e.value&&If(e.slot.toString(e.value.value))||"",value:e.value&&e.value.value,modified:e.values.isModified(e.key),reference:e.value&&e.value.reference,time:e.value&&e.value.time}),!s&&e.value&&e.value.time&&(s=!0)})),s)return{get fingerprint(){return t.fingerprint},get stencil(){return t.stencil("actionables")},nodes:um(i,(e=>e))}}}(kf||(kf={})),function(e){e.values=function(e,t,i){const s=e instanceof jb?e.instance:e;let o=!1;return lm(t,((e,t)=>{const n=s.data.forSlot(t);!n||i&&!ym(i,(e=>n.slot.id===e))?o=!0:n.import(e.values)}),{keys:!0}),s.stepToHead(),!o},e.fields=function(e,t,i,s=" / "){const o=Sf(e instanceof jb?e.instance:e,"all",i,s);let n=0;return lm(t,(e=>{let t=!1;lm(o,(i=>{i.key!==e.key&&i.name!==e.name||(i.values.importValue(i.context,{value:e.value,reference:e.reference,time:e.time}),t=!0)})),t||n++})),0===n},e.CSV=function(e,t,i){const s=Sf(e instanceof jb?e.instance:e,"exportables",i),o=Op(t),n=[];let r=!0,a=!1,l="";for(let e=0;e<o;e++){const i=t.charAt(e),s='"'===i;a?s?e+1<o&&'"'===t.charAt(e+1)?(l+='"',e++):(n.push(l||void 0),a=!1,l=""):l+=i:r&&s?(r=!1,a=!0):","===i&&(r=!0)}if(a&&n.push(l),n.length===s.length){let e=0;return lm(s,(t=>t.values.importValue(t.context,{value:n[e++]}))),!0}return!1}}(Nf||(Nf={}));class _f{constructor(e,t){this.m_pNodes=[],this.m_nEnumerators=0,this.m_pMoment=e,lm(e.transducers,(i=>{const s=i.block(e.context);if(s instanceof yf)return;const o=sm(i.props.nameVisible,!0);if(s||i.props.description||i.props.name&&o){let n="";this.nodes.push({id:i.id,get key(){return n||(n="_"+Gg(i.id+e.context.key))},node:i,props:i.props,block:s,context:e.context,get collectsData(){return i.slots.count>0},get hasDataCollected(){return i.slots.each((t=>{const i=e.context.mutableValueOf(t);return(null==i?void 0:i.hasValue)||!1}))},hasChanged:(t=!0)=>e.context.instance.hasChanged(i.id,t),enumerator:(()=>{if(s&&i.slots.count>0&&o)return this.m_nEnumerators++,++t})(),get validation(){return s?s.validation:"pass"},get isFailed(){return!!s&&s.isFailed},get isPassed(){return!s||s.isPassed},observer:"present"===e.tense&&i.await||void 0})}}))}get cluster(){return this.m_pMoment.state}get nodes(){return this.m_pNodes}get tense(){return this.m_pMoment.tense}get isPast(){return"past"===this.tense}get isPresent(){return"present"===this.tense}get isFuture(){return"future"===this.tense}get isEvaluating(){return this.m_pMoment.state.isEvaluating}get isFailed(){return!this.isEvaluating&&"fail"===this.cluster.getValidation(this.m_pMoment.context)}get isPassed(){return!this.isEvaluating&&"pass"===this.cluster.getValidation(this.m_pMoment.context)}get count(){return this.nodes.length}get enumerators(){return this.m_nEnumerators}restore(){this.m_pMoment.restore()}}class Lf{constructor(e){this.m_pMomentsCache={},this.m_nMoments=0,this.m_nCurrent=0,this.m_pPages=[],this.m_pOrchestrator=e}get checksum(){return this.parseMoments(),this.m_sChecksum}get immutable(){const e=this.moments,t=[];let i,s,o=!1,n=!0,r=0,a=0;return lm(e,(e=>{t.push(...e.nodes),r+=e.count,a+=e.enumerators,!i&&e.isPresent&&(i=e,s=e.cluster),!o&&e.isEvaluating&&(o=!0),n&&e.nodes.length>0&&(n=!1)})),{moments:e,pages:this.pages,presentMoment:i,presentCluster:s,presentNodes:i&&i.nodes||[],activeNodes:t,get uniqueNodes(){const e={};return fm(t,(t=>{const i=t.id+t.context.key;return!e[i]&&(e[i]=!0)}))},isEvaluating:o,isEmpty:n,isAtStart:this.isAtStart,isAtHead:this.isAtHead,isAtFinish:this.isAtFinish,isFinishable:this.isFinishable,isFinishing:this.isFinishing,isFinished:this.isFinished,isPausing:this.isPausing,isPaused:this.isPaused,hasDataCollected:this.hasDataCollected,isFailed:i&&i.isFailed||!1,isPassed:i&&i.isPassed||!1,mode:this.mode,direction:this.direction,count:r,enumerators:a,percentage:this.presentCluster&&this.presentCluster.percentageInRunner||0,map:t=>{let i=0;return um(e,(e=>t(e,i++)))},stepForward:()=>this.stepForward(),stepBackward:()=>this.stepBackward(),stepToStart:()=>this.stepToStart(),stepToHead:()=>this.stepToHead(),stepToPage:e=>this.stepToPage(e),finish:()=>this.finish()}}get instance(){return this.m_pOrchestrator.instance}get moments(){return this.parseMoments()}get pages(){return"paginated"===this.mode?(this.parseMoments(),this.m_pPages):[]}get activePage(){if("paginated"===this.mode)return this.parseMoments(),ym(this.m_pPages,(e=>e.active))}get presentMoment(){return vm(this.moments,(e=>e.isPresent))}get presentCluster(){const e=this.presentMoment;return e&&e.cluster}get presentNodes(){const e=this.presentMoment;return e&&e.nodes||[]}get activeNodes(){const e=[];return lm(this.moments,(t=>{e.push(...t.nodes)})),e}get uniqueNodes(){const e=[],t={};return lm(this.moments,(i=>{lm(i.nodes,(i=>{const s=i.id+i.context.key;t[s]||(e.push(i),t[s]=!0)}))})),e}get isEvaluating(){const e=this.moments,t=e.length;for(let i=0;i<t;i++)if(e[i].isEvaluating)return!0;return!1}get isChanged(){const e=this.checksum,t=e!==this.m_sChecksumLast;return this.m_sChecksumLast=e,t}get isEmpty(){return!ym(this.moments,(e=>e.nodes.length>0))}get isAtStart(){return!!this.instance.isAtStart||"paginated"===this.mode&&(this.parseMoments(),this.m_pPages.length>0&&this.m_pPages[0].active)}get isAtHead(){return this.instance.isAtHead}get isAtFinish(){return this.instance.isAtFinish}get isFinishable(){return this.instance.isFinishable}get isFinishing(){return this.instance.isFinishing}get isFinished(){return this.instance.isFinished}get isPausing(){return this.instance.isPausing}get isPaused(){return this.instance.isPaused}get hasDataCollected(){return this.instance.hasDataCollected}get isFailed(){const e=this.presentMoment;return e&&e.isFailed||!1}get isPassed(){const e=this.presentMoment;return e&&e.isPassed||!1}get mode(){return this.instance.isPreview?"progressive":this.m_pOrchestrator.mode}get direction(){return this.m_pOrchestrator.direction}get count(){let e=0;return lm(this.moments,(t=>{e+=t.count})),e}get enumerators(){let e=0;return lm(this.moments,(t=>{e+=t.enumerators})),e}get percentage(){return this.presentCluster&&this.presentCluster.percentageInRunner||0}get prologue(){return this.m_pOrchestrator.prologue}get epilogue(){return this.m_pOrchestrator.epilogue}parseMoments(){const e=this.m_pOrchestrator.checksum;if(this.instance.isRunning){if(!this.m_pMoments||this.m_sChecksum!==e){const t=[],i=this.instance.history;let s,o=!1,n=0,r=0;this.m_nMoments=i.length,this.m_nCurrent=0,this.m_pPages=[];for(let e=0;e<this.m_nMoments;e++){const a=i[e];if(o&&"continuous"===this.mode)break;const l=this.m_pMomentsCache[a.checksum]||(this.m_pMomentsCache[a.checksum]=new _f(a,n));l.count>0&&(n+=l.enumerators,"present"!==a.tense&&"paginated"===this.mode||t.push(l),s=l),"paginated"===this.mode&&"present"===a.tense&&0===t.length&&s&&t.push(s),o=o||"present"===a.tense,"paginated"===this.mode&&l.count>0&&(o&&0===this.m_nCurrent&&(this.m_nCurrent=e+1),this.m_pPages.push({number:++r,active:this.m_nCurrent===e+1,activate:()=>this.stepToPage(e+1)}))}this.m_pMoments=t,this.m_sChecksum=e}}else this.m_sChecksum=void 0,this.invalidate();return this.m_pMoments||[]}invalidate(){this.m_pMoments=void 0,this.m_nMoments=0,this.m_nCurrent=0}reset(){this.m_pMomentsCache={}}map(e){let t=0;return um(this.moments,(i=>e(i,t++)))}stepForward(){return this.instance.stepForward()}stepBackward(){if("paginated"===this.mode){this.parseMoments();for(let e=1;e<this.m_pPages.length;e++)if(this.m_pPages[e].active)return this.m_pPages[e-1].activate(),!0}return this.instance.stepBackward()}stepToStart(){return"paginated"===this.mode&&(this.parseMoments(),this.m_pPages.length>0)?(this.m_pPages[0].activate(),!0):this.instance.stepToStart()}stepToHead(){return this.instance.stepToHead()}stepToPage(e){const t=this.instance.history;return e>0&&e<=t.length&&(t[e-1].restore(),!0)}finish(){return this.instance.finish()}getNodeByKey(e){let t;return ym(this.moments,(i=>(t=ym(i.nodes,(t=>t.key===e)),!!t))),t}getKeyByNodeId(e){let t;return ym(this.moments,(i=>(t=ym(i.nodes,(t=>t.id===e)),!!t))),t?t.key:void 0}}function Cf(e,t){const i=window;if(void 0!==i)if(void 0!==typeof i[e])i[e]=t;else if(i[e]!==t)throw new Error(`Marblecore.Loader: Another context is already registered for '${e}'!`)}const Df={};class Af{constructor(e){this.m_pBlocks={},this.m_sIdentifier=e}get identifier(){return this.m_sIdentifier}ofType(e){return this.m_pBlocks[e]}register(e,t,i,s,o,n){if(this.m_pBlocks[t]&&this.m_pBlocks[t]!==e)throw new Error(`Duplicate block '${t}' registered.`);lm(i,(t=>{if(this.m_pBlocks[t]&&this.m_pBlocks[t]!==e)throw new Error(`Duplicate block '${t}' registered.`);$m(this.m_pBlocks,t,e)})),$m(e,"identifier",t),$m(e,"ref",s),$m(e,"autoRender",o),$m(e,"autoValidate",n),e.prototype.type=$m(this.m_pBlocks,t,e)}create(e,t){if(e.props.block){const i=this.ofType(e.props.block.type);if(i)return new i(e,t)}}}class jf{static get(e){return e=e||this.m_sIdentifier,this.m_pNamespaces[e]||Qm(this.m_pNamespaces,e,{identifier:e,nodeBlocks:new Af(e),conditionBlocks:new wf(e)})}static isAvailable(e){return!!this.m_pNamespaces[e]}static mount(e){this.m_sIdentifier!==e&&(this.m_pStack.push(this.m_sIdentifier),this.m_sIdentifier=e)}static unmount(){this.m_sIdentifier=this.m_pStack.pop()||"default"}static loadUMD(e){if(e){Cf("TripettoRunner",mp);try{return Function(e)(),!0}catch(e){return!1}}return!1}static loadURL(e,t){var i,s;i=e,s=t,Cf("TripettoRunner",mp),function(e,t,i){if("undefined"!=typeof document){let t=!1;const s=e=>{t||(t=!0,i&&i(e))};try{const t=document.createElement("script");t.onload=()=>s(!0),t.onerror=()=>s(!1),t.async=!0,t.src=function(e,t){return"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy?(Df[t]||(Df[t]=trustedTypes.createPolicy(t,{createScriptURL:e=>e}))).createScriptURL(e):e}(e,"tripetto#runner"),document.body.appendChild(t)}catch(e){s(!1)}}else i&&i(!1)}(i,0,s)}static unload(e){return!!this.m_pNamespaces[e]&&(Qm(this.m_pNamespaces,e,void 0),!0)}}function Tf(e){jf.mount(e)}function zf(){jf.unmount()}jf.m_pNamespaces={},jf.m_pStack=[],jf.m_sIdentifier="default";const Ef=e=>{var t;return e instanceof vf?((null===(t=e.props.block)||void 0===t?void 0:t.type)||"")+(e.props.disabled?"disabled":""):""},Of=e=>!!e.props.block;function Pf(e){return new Jb(sf,vf,tf,ef,e,Ef,Of)}function Rf(e){return Pf(e).fingerprint}function Hf(e,t){if(e.redirectUrl){const i=mf(e.redirectUrl,t);if(i)return i}}class Ff extends Xb{constructor(e){super(sf,vf,tf,ef,(()=>{if(!e.definition)throw new Error("The runner cannot start because no valid definition was supplied!");return e.definition})(),Ef,Of,"progressive"===e.mode,!e.preview&&!e.test,e.preview?"compact":"disabled",e.l10n),this.m_pStories={},this.m_nClusters=0,this.m_nNodes=0,this.m_bTest=!1,this.m_sMode=e.mode,this.m_bTest=e.test||!1,this.m_sNamespace=e.namespace,e.data&&this.hook("OnInstanceStart","synchronous",(t=>{e.data(t.instance)})),this.hook("OnChange","synchronous",(e=>{this.onChange&&this.onChange(e)})),this.hook("OnRestart","framed",(e=>{this.onRestart&&this.onRestart(e.instance)})),this.isLoaded&&(Up(e.start)?e.start:this.isPreview||e.snapshot)&&(this.isPreview||!e.snapshot||!this.restore(e.snapshot)&&!this.prologue)&&this.start()}static getInitialStoryline(e){return{moments:[],pages:[],presentMoment:void 0,presentCluster:void 0,presentNodes:[],activeNodes:[],uniqueNodes:[],isEvaluating:!1,isEmpty:!1,isAtStart:!1,isAtHead:!1,isAtFinish:!1,isFinishable:!1,isFinishing:!1,isFinished:!1,isPausing:!1,isPaused:!1,hasDataCollected:!1,isFailed:!1,isPassed:!1,mode:e,direction:"forward",count:0,enumerators:0,percentage:0,map:()=>[],stepForward:()=>!1,stepBackward:()=>!1,stepToStart:()=>!1,stepToHead:()=>!1,stepToPage:()=>!1,finish:()=>!1}}get handleChange(){return this.m_pChange||(this.m_pChange=new cg(((e,t,i)=>{if("started"===t||"finished"===t||"stopped"===t||"paused"===t||"mode"===t||!e||e.isRunning){const s=this.mode;this.emitHook("OnChange",{runner:this,instance:e,change:t,get storyline(){return i&&i.immutable||Ff.getInitialStoryline(s)}}),e&&this.onInstanceChange(e,t,i)}}),"promise"))}get namespace(){return jf.get(this.m_sNamespace)}get definition(){return this.ontology}set definition(e){e&&this.reload(e)}get instance(){return this.m_pInstance}get storyline(){if(this.instance){const e=this.story(this.instance);return e&&e.storyline}}get name(){return this.definition&&this.definition.name||""}get mode(){return this.m_sMode}set mode(e){if(e!==this.m_sMode){const t="progressive"===e,i=this.storyline;i&&i.reset(),this.m_sMode=e,t===this.autoPushForward?i&&i.invalidate():this.autoPushForward=t,this.change(this.instance,"mode",!1)}}get isPreview(){return"disabled"!==this.previewMode()}set isPreview(e){if(e!==this.isPreview){const t=this.storyline;t&&t.reset(),this.previewMode(e?"compact":"disabled"),e&&!this.isRunning?this.start():this.change(this.instance,"preview",!1)}}get isTest(){return this.m_bTest&&!this.isPreview}set isTest(e){this.m_bTest=e}get status(){return this.isPreview?"preview":this.isEmpty?"empty":this.isFinishing?"finishing":this.isFinished?"finished":this.isStopped?"stopped":this.isPausing?"pausing":this.isPaused?"paused":this.isRunning?"running":"idle"}get isEmpty(){if(this.isFinished&&0===this.m_nNodes&&0===this.m_nClusters)return!0;const e=this.storyline;return e&&e.isEmpty||!1}get prologue(){var e,t;return(null===(e=this.ontology)||void 0===e?void 0:e.prologue)||(null===(t=this.ontology)||void 0===t?void 0:t.preface)}get epilogue(){var e;return this.m_pEpilogue||Object.assign(Object.assign({},null===(e=this.ontology)||void 0===e?void 0:e.epilogue),{context:this.m_pContext,getRedirect:()=>{var e;return this.m_pContext&&(null===(e=this.ontology)||void 0===e?void 0:e.epilogue)&&Hf(this.ontology.epilogue,this.m_pContext)}})}story(e){const t=this.m_pStories;if(e.isRunning){const i=this,s=t[e.id]||$m(t,e.id,{storyline:new Lf({instance:e,get mode(){return i.mode},get checksum(){return s.checksum},get direction(){return s.direction||"forward"},get prologue(){return i.prologue},get epilogue(){return i.epilogue}})});return s.checksum=e.checksum,s}ig(t,e.id)}change(e,t,i){if(i&&(!e||!e.isRunning))return;const s=e&&this.story(e);if(s)switch(t){case"forward":case"backward":if("progressive"===this.mode||this.isPreview)return;s.direction=t;break;case"started":s.storyline.invalidate()}this.handleChange.invoke(e,t,s&&s.storyline)}onInstanceChange(e,t,i){}onInstanceStart(e){this.m_pInstance=e,this.m_nClusters=0,this.m_nNodes=0,this.m_pContext=void 0,this.m_pEpilogue=void 0,this.change(e,"started",!1),super.onInstanceStart(e)}onInstanceData(e,t){this.onData&&this.onData(e,t),super.onInstanceData(e,t)}onInstanceProcessing(e,t){t?this.handleChange.hold():this.handleChange.release(),super.onInstanceProcessing(e,t)}onInstanceStepForward(e,t){return!("progressive"===this.mode||!t||0!==t.transducers.count&&t.transducers.each((e=>e instanceof vf&&e.isVisible)))}onInstanceUpdate(e){this.change(e,"render",!0),super.onInstanceUpdate(e)}onInstanceFinishing(e,t){if(this.change(e,"finishing",!1),this.onFinish){const i=this.onFinish(e),s=(i,s)=>{t(i,s),i||this.change(e,"finishing",!1)};return Up(i)?s(i):i.then((e=>s(!0,e))).catch((()=>s(!1))),!1}return super.onInstanceFinishing(e,t)}onInstanceEnd(e,t){this.change(e,t,!1),super.onInstanceEnd(e,t)}onInstanceCluster(e,t,i){this.m_pContext||(this.m_pContext=e),this.m_pEpilogue=void 0,this.m_nClusters++,this.change(e.instance,"render",!0)}onInstanceClusterEvaluating(e,t,i){this.change(e,"evaluating",!0)}onInstanceClusterLeave(e,t,i){}onInstanceBranchLeave(e,t){if(t.isFinish&&t.props.epilogue&&(!this.isPreview||t.isMain)){const i=!t.isMain&&t.id||void 0;this.m_pEpilogue&&this.m_pEpilogue.branch!==i||(this.m_pEpilogue=Object.assign(Object.assign({},t.props.epilogue),{branch:i,context:e,getRedirect:()=>e&&t.props.epilogue&&Hf(t.props.epilogue,e)}))}}onInstanceNode(e,t,i){this.m_nNodes++,this.change(e.instance,"render",!0)}onInstanceProgress(e,t){this.change(e,"progress",!0)}onInstanceStep(e,t){this.change(e,t,!0)}onInstanceValidated(e,t,i){this.change(e,"validated",!0)}restore(e){if(!jp(e)&&this.resume(e))return this.firstItem}reload(e,t=!1){var i;const s=JSON.stringify(e);if(s!==(this.m_sDefinition||JSON.stringify(this.definition))){const o=(null===(i=this.instance)||void 0===i?void 0:i.isRunning)&&this.instance||void 0,n=o&&kf.values(o);if(this.m_sDefinition=s,this.load(e),!t||n)return this.start(void 0,n&&(e=>{Nf.values(e.inherit(o),n)})||void 0)}if(!this.isRunning&&!t)return this.start()}restart(e=!1){const t=e&&this.instance&&this.instance.isRunning&&kf.values(this.instance);this.stop();const i=this.start();return t&&Nf.values(i,t),this.emitHook("OnRestart",{runner:this,instance:i}),i}rerender(e){this.change(e,"render",!0)}stepForward(){const e=this.storyline;return e&&e.stepForward()||!1}stepBackward(){const e=this.storyline;return e&&e.stepBackward()||!1}stepToStart(){const e=this.storyline;return e&&e.stepToStart()||!1}stepToHead(){const e=this.storyline;return e&&e.stepToHead()||!1}finish(){const e=this.storyline;return e&&e.finish()||!1}}function Uf(e){switch(e.type){case"node":return t=>{jf.get(e.namespace).nodeBlocks.register(t,e.identifier,Ep(e.alias)?[e.alias]:e.alias||[],e.ref,e.autoRender,e.autoValidate)};case"headless":return t=>{jf.get(e.namespace).nodeBlocks.register(t,e.identifier,Ep(e.alias)?[e.alias]:e.alias||[])};case"condition":return t=>{jf.get(e.namespace).conditionBlocks.register(t,e.identifier,Ep(e.alias)?[e.alias]:e.alias||[])}}}function Bf(e,t,i){gg("condition",e,t,i,"single")}function Yf(e,t,i){gg("validator",e,t,i,"single")}function Zf(e,t,i){gg("destroy",e,t,i)}function Vf(e,t){switch(e){case"exportables":if(t instanceof Ub||t instanceof jb||"fingerprint"in t&&"stencil"in t&&"fields"in t){const e=t instanceof Ub||t instanceof jb?kf.exportables(t):t;let i=Gg("stencil:exportables");return lm(e.fields,(e=>{i=Og(i+e.node.id+e.datatype+e.slot+e.node.context)})),i===e.stencil?i:Og(i+e.stencil)}break;case"actionables":if(t instanceof Ub||t instanceof jb||"fingerprint"in t&&"stencil"in t&&"nodes"in t){const e=t instanceof Ub||t instanceof jb?kf.actionables(t):t;let i=Gg("stencil:actionables");return e&&(lm(e.nodes,(e=>{lm(e.data,(t=>{i=Og(i+e.node.id+t.datatype+t.slot+e.node.context)}))})),e.stencil!==i)?Og(i+e.stencil):i}}return Pf(t).stencil(e)}function Wf(e,t){const i=e instanceof Ub||e instanceof jb?{exportables:kf.exportables(e),actionables:kf.actionables(e)}:e;let s=Og(i.exportables.fingerprint+(t?i.exportables.stencil:Vf("exportables",i.exportables)));return lm(i.exportables.fields,(e=>{s=Og(s+e.key+em(e.time)+e.string.substr(0,4096)+em(e.reference).substr(0,4096))})),i.actionables&&(s=Og(s+i.actionables.fingerprint+(t?i.actionables.stencil:Vf("actionables",i.actionables))),lm(i.actionables.nodes,(e=>{s=Og(s+e.key),lm(e.data,(e=>{s=Og(s+e.key+em(e.time)+e.string.substr(0,4096)+em(e.reference).substr(0,4096))}))}))),s}let Gf=0,$f=0,Qf=0;function qf(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function Xf(e,t,i){e[i]=t>>>24&255,e[i+1]=t>>>16&255,e[i+2]=t>>>8&255,e[i+3]=255&t}function Jf(e,t){const i=new Array(e.length/2),s=i.length;let o=0,n=0;if(t>=8*s)throw new Error("The difficulty is too high to solve.");for(;n<s;n++)i[n]=parseInt(e.charAt(2*n)+e.charAt(2*n+1),16);for(n=0;n<=t-8;n+=8,o++)if(o>=s||0!==i[o])return!1;return o<s&&0==(i[o]&255<<8+n-t)}function Kf(e,t,i,s=16,o,n=Date.now(),r="milliseconds"){const a=new Array(s),l=a.length,c=Wf(e,!0),u=Date.now();let h=u;for(let e=0;e<l;e++)a[e]=0;for(;!o||h-u<o;){let e=8,s="";const o=e+4*((l-e)/4|0),d=n+("milliseconds"===r?h-u:dp.round((h-u)/1e3));for(Xf(a,d/4294967296>>>0,0),Xf(a,(4294967295&d)>>>0,4);e<o;e+=4)Xf(a,4294967296*Math.random()>>>0,e);for(;e<l;e++)a[e]=256*Math.random()>>>0;for(let e=0;e<l;e++)s+="0123456789abcdef".charAt(a[e]>>>4&15)+"0123456789abcdef".charAt(a[e]>>>0&15);if(Gf++,Jf(Og(c+(i||"")+s),t))return Qf=Date.now()-u,$f+=Qf,s;h=Date.now()}throw Qf=h-u,$f+=Qf,new Error("Nonce not solved!")}function ey(e,t,i,s,o){if(e.length<16||e.length>64||e.length%16)return!1;const n=new Array(e.length/2),r=n.length;for(let t=0;t<r;t++)n[t]=parseInt(e.charAt(2*t)+e.charAt(2*t+1),16);const a=Date.now()-(4294967296*qf(n,0)+qf(n,4));return!(i>0&&(a<0||a>i)||!Jf(Og(Wf(s,!1)+(o||"")+e),t))}function ty(){return $f&&Gf/$f||0}function iy(){return $f}function sy(){return Qf}const oy=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ny=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];function ry(e,t,i,s){for(let o=0;o<4;o++)for(let n=0;n<s;n++)e[o][n]^=t[4*i+n][o]}function ay(e,t){for(let i=0;i<4;i++)for(let s=0;s<t;s++)e[i][s]=oy[e[i][s]]}function ly(e){for(let t=0;t<4;t++)e[t]=oy[e[t]]}function cy(e){const t=e[0];for(let t=0;t<3;t++)e[t]=e[t+1];return e[3]=t,e}function uy(e,t){const i=new Array(4);for(let s=1;s<4;s++){for(let o=0;o<4;o++)i[o]=e[s][(o+s)%t];for(let t=0;t<4;t++)e[s][t]=i[t]}}function hy(e){for(let t=0;t<4;t++){const i=new Array(4),s=new Array(4);for(let o=0;o<4;o++)i[o]=e[o][t],s[o]=128&e[o][t]?e[o][t]<<1^283:e[o][t]<<1;e[0][t]=s[0]^i[1]^s[1]^i[2]^i[3],e[1][t]=i[0]^s[1]^i[2]^s[2]^i[3],e[2][t]=i[0]^i[1]^s[2]^i[3]^s[3],e[3][t]=i[0]^s[0]^i[1]^i[2]^s[3]}}function dy(e,t){const i=t.length/4-1,s=[[],[],[],[]];for(let t=0;t<16;t++)s[t%4][Math.floor(t/4)]=e[t];ry(s,t,0,4);for(let e=1;e<i;e++)ay(s,4),uy(s,4),hy(s),ry(s,t,e,4);ay(s,4),uy(s,4),ry(s,t,i,4);const o=new Array(16);for(let e=0;e<16;e++)o[e]=s[e%4][Math.floor(e/4)];return o}function py(e){const t=e.length/4,i=t+6,s=new Array(4*(i+1)),o=[0,0,0,0];for(let i=0;i<t;i++)s[i]=[e[4*i],e[4*i+1],e[4*i+2],e[4*i+3]];for(let e=t;e<4*(i+1);e++){s[e]=[0,0,0,0];for(let t=0;t<4;t++)o[t]=s[e-1][t];if(e%t==0){ly(cy(o));for(let i=0;i<4;i++)o[i]^=ny[e/t][i]}else t>6&&e%t==4&&ly(o);for(let i=0;i<4;i++)s[e][i]=s[e-t][i]^o[i]}return s}function my(e){return e.replace(/[\u0080-\u07ff]/g,(e=>{const t=e.charCodeAt(0);return String.fromCharCode(192|t>>6,128|63&t)})).replace(/[\u0800-\uffff]/g,(e=>{const t=e.charCodeAt(0);return String.fromCharCode(224|t>>12,128|t>>6&63,128|63&t)}))}var gy=Object.freeze({__proto__:null,decrypt:function(e,t,i,s){const o=i/8,n=new Array(o);e=s(e),t=my(t);for(let e=0;e<o;e++)n[e]=isNaN(t.charCodeAt(e))?0:t.charCodeAt(e);const r=dy(n,py(n)),a=py(r.concat(r.slice(0,o-16))),l=new Array(8),c=e.slice(0,8),u=Math.ceil((e.length-8)/16),h=new Array(u);for(let e=0;e<8;e++)l[e]=c.charCodeAt(e);for(let t=0;t<u;t++)h[t]=e.slice(8+16*t,8+16*t+16);const d=new Array(h.length);for(let e=0;e<u;e++){for(let t=0;t<4;t++)l[15-t]=e>>>8*t&255;for(let t=0;t<4;t++)l[15-t-4]=(e+1)/4294967296-1>>>8*t&255;const t=dy(l,a),i=new Array(h[e].length);for(let s=0;s<h[e].length;s++)i[s]=String.fromCharCode(t[s]^h[e].charCodeAt(s));d[e]=i.join("")}return d.join("").replace(/[\u00e0-\u00ef][\u0080-\u00bf][\u0080-\u00bf]/g,(e=>String.fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2)))).replace(/[\u00c0-\u00df][\u0080-\u00bf]/g,(e=>String.fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))))},encrypt:function(e,t,i,s){const o=i/8,n=new Array(o);e=my(e),t=my(t);for(let e=0;e<o;e++)n[e]=isNaN(t.charCodeAt(e))?0:t.charCodeAt(e);const r=dy(n,py(n)),a=py(r.concat(r.slice(0,o-16))),l=Math.ceil(e.length/16),c=new Array(16),u=new Array(l),h=(new Date).getTime(),d=h%1e3,p=Math.floor(h/1e3),m=Math.floor(65535*Math.random());for(let e=0;e<2;e++)c[e]=d>>>8*e&255;for(let e=0;e<2;e++)c[e+2]=m>>>8*e&255;for(let e=0;e<4;e++)c[e+4]=p>>>8*e&255;let g="";for(let e=0;e<8;e++)g+=String.fromCharCode(c[e]);for(let t=0;t<l;t++){for(let e=0;e<4;e++)c[15-e]=t>>>8*e&255;for(let e=0;e<4;e++)c[15-e-4]=t/4294967296>>>8*e;const i=t<l-1?16:(e.length-1)%16+1,s=dy(c,a),o=new Array(i);for(let n=0;n<i;n++)o[n]=String.fromCharCode(s[n]^e.charCodeAt(16*t+n));u[t]=o.join("")}return s(g+u.join(""))}});const by="tripetto-runner-foundation",fy="6.3.0";var yy=i(823);function vy(e){var t=this.constructor;return this.then((function(i){return t.resolve(e()).then((function(){return i}))}),(function(i){return t.resolve(e()).then((function(){return t.reject(i)}))}))}function My(e){return new this((function(t,i){if(!e||void 0===e.length)return i(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var s=Array.prototype.slice.call(e);if(0===s.length)return t([]);var o=s.length;function n(e,i){if(i&&("object"==typeof i||"function"==typeof i)){var r=i.then;if("function"==typeof r)return void r.call(i,(function(t){n(e,t)}),(function(i){s[e]={status:"rejected",reason:i},0==--o&&t(s)}))}s[e]={status:"fulfilled",value:i},0==--o&&t(s)}for(var r=0;r<s.length;r++)n(r,s[r])}))}var wy=setTimeout,xy="undefined"!=typeof setImmediate?setImmediate:null;function Sy(e){return Boolean(e&&void 0!==e.length)}function Iy(){}function ky(e){if(!(this instanceof ky))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Ay(e,this)}function Ny(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,ky._immediateFn((function(){var i=1===e._state?t.onFulfilled:t.onRejected;if(null!==i){var s;try{s=i(e._value)}catch(e){return void Ly(t.promise,e)}_y(t.promise,s)}else(1===e._state?_y:Ly)(t.promise,e._value)}))):e._deferreds.push(t)}function _y(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof ky)return e._state=3,e._value=t,void Cy(e);if("function"==typeof i)return void Ay((s=i,o=t,function(){s.apply(o,arguments)}),e)}e._state=1,e._value=t,Cy(e)}catch(t){Ly(e,t)}var s,o}function Ly(e,t){e._state=2,e._value=t,Cy(e)}function Cy(e){2===e._state&&0===e._deferreds.length&&ky._immediateFn((function(){e._handled||ky._unhandledRejectionFn(e._value)}));for(var t=0,i=e._deferreds.length;t<i;t++)Ny(e,e._deferreds[t]);e._deferreds=null}function Dy(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function Ay(e,t){var i=!1;try{e((function(e){i||(i=!0,_y(t,e))}),(function(e){i||(i=!0,Ly(t,e))}))}catch(e){if(i)return;i=!0,Ly(t,e)}}ky.prototype.catch=function(e){return this.then(null,e)},ky.prototype.then=function(e,t){var i=new this.constructor(Iy);return Ny(this,new Dy(e,t,i)),i},ky.prototype.finally=vy,ky.all=function(e){return new ky((function(t,i){if(!Sy(e))return i(new TypeError("Promise.all accepts an array"));var s=Array.prototype.slice.call(e);if(0===s.length)return t([]);var o=s.length;function n(e,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,(function(t){n(e,t)}),i)}s[e]=r,0==--o&&t(s)}catch(e){i(e)}}for(var r=0;r<s.length;r++)n(r,s[r])}))},ky.allSettled=My,ky.resolve=function(e){return e&&"object"==typeof e&&e.constructor===ky?e:new ky((function(t){t(e)}))},ky.reject=function(e){return new ky((function(t,i){i(e)}))},ky.race=function(e){return new ky((function(t,i){if(!Sy(e))return i(new TypeError("Promise.race accepts an array"));for(var s=0,o=e.length;s<o;s++)ky.resolve(e[s]).then(t,i)}))},ky._immediateFn="function"==typeof xy&&function(e){xy(e)}||function(e){wy(e,0)},ky._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var jy=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();"function"!=typeof jy.Promise?jy.Promise=ky:(jy.Promise.prototype.finally||(jy.Promise.prototype.finally=vy),jy.Promise.allSettled||(jy.Promise.allSettled=My));var Ty="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(e){var t,i=function(){try{if(e.URLSearchParams&&"bar"===new e.URLSearchParams("foo=bar").get("foo"))return e.URLSearchParams}catch(e){}return null}(),s=i&&"a=1"===new i({a:1}).toString(),o=i&&"+"===new i("s=%2B").get("s"),n=!i||((t=new i).append("s"," &"),"s=+%26"===t.toString()),r=u.prototype,a=!(!e.Symbol||!e.Symbol.iterator);if(!(i&&s&&o&&n)){var l;r.append=function(e,t){g(this.__URLSearchParams__,e,t)},r.delete=function(e){delete this.__URLSearchParams__[e]},r.get=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e][0]:null},r.getAll=function(e){var t=this.__URLSearchParams__;return this.has(e)?t[e].slice(0):[]},r.has=function(e){return f(this.__URLSearchParams__,e)},r.set=function(e,t){this.__URLSearchParams__[e]=[""+t]},r.toString=function(){var e,t,i,s,o=this.__URLSearchParams__,n=[];for(t in o)for(i=h(t),e=0,s=o[t];e<s.length;e++)n.push(i+"="+h(s[e]));return n.join("&")},o&&i&&!s&&e.Proxy?(l=new Proxy(i,{construct:function(e,t){return new e(new u(t[0]).toString())}})).toString=Function.prototype.toString.bind(u):l=u,Object.defineProperty(e,"URLSearchParams",{value:l});var c=e.URLSearchParams.prototype;c.polyfill=!0,c.forEach=c.forEach||function(e,t){var i=m(this.toString());Object.getOwnPropertyNames(i).forEach((function(s){i[s].forEach((function(i){e.call(t,i,s,this)}),this)}),this)},c.sort=c.sort||function(){var e,t,i,s=m(this.toString()),o=[];for(e in s)o.push(e);for(o.sort(),t=0;t<o.length;t++)this.delete(o[t]);for(t=0;t<o.length;t++){var n=o[t],r=s[n];for(i=0;i<r.length;i++)this.append(n,r[i])}},c.keys=c.keys||function(){var e=[];return this.forEach((function(t,i){e.push(i)})),p(e)},c.values=c.values||function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},c.entries=c.entries||function(){var e=[];return this.forEach((function(t,i){e.push([i,t])})),p(e)},a&&(c[e.Symbol.iterator]=c[e.Symbol.iterator]||c.entries)}function u(e){((e=e||"")instanceof URLSearchParams||e instanceof u)&&(e=e.toString()),this.__URLSearchParams__=m(e)}function h(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,(function(e){return t[e]}))}function d(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,(function(e){return decodeURIComponent(e)}))}function p(t){var i={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return a&&(i[e.Symbol.iterator]=function(){return i}),i}function m(e){var t={};if("object"==typeof e)if(b(e))for(var i=0;i<e.length;i++){var s=e[i];if(!b(s)||2!==s.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");g(t,s[0],s[1])}else for(var o in e)e.hasOwnProperty(o)&&g(t,o,e[o]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var n=e.split("&"),r=0;r<n.length;r++){var a=n[r],l=a.indexOf("=");-1<l?g(t,d(a.slice(0,l)),d(a.slice(l+1))):a&&g(t,d(a),"")}}return t}function g(e,t,i){var s="string"==typeof i?i:null!=i&&"function"==typeof i.toString?i.toString():JSON.stringify(i);f(e,t)?e[t].push(s):e[t]=[s]}function b(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(void 0!==Ty?Ty:"undefined"!=typeof window?window:Ty);const zy="tripetto-runner-autoscroll@5.7.1";function Ey(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}function Oy(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{l(s.next(e))}catch(e){n(e)}}function a(e){try{l(s.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((s=s.apply(e,t||[])).next())}))}Tf(zy);const Py=e=>{const t=e.current,i=()=>{t&&0!==t.handle&&(clearTimeout(t.handle),t.handle=0)};return{resolve:()=>{e.current=void 0,t&&(i(),t.resolve())},reject:()=>{e.current=void 0,t&&(i(),t.reject())},cancel:i}};let Ry=0;function Hy(e){return vm(e,(e=>e.isPreActive||e.isBeforeActive||e.isActive||e.isAfterActive||e.isPostActive))}function Fy(e,t,i){const s=Wp(e,t);if(s&&s.isHealthy){let t=s.index;for(;--t>=0;){const s=e[t];if(s.isHistory)break;if(!i||i(s))return s}}}function Uy(e,t,i,s,o){const n="node"===i&&s||void 0,r="prologue"===i&&s||void 0,a="epilogue"===i&&s||void 0,l=("finishing"===i||"pausing"===i)&&s||void 0,c=Ry++,u={id:"_"+Xg.CSHA2_256(n?n.key+("live"===e.viewRef.current&&e.storylineRef.current&&e.storylineRef.current.instance.id):`${i}-${e.sequence.length}`),key:n&&n.key||"_"+Xg.CSHA2_256(`${i}-${e.sequence.length}`),type:i,node:n,prologue:r,epilogue:a,cancel:l,index:e.sequence.length,state:t,changeState:t=>{$m(u,"state","prologue"===u.type&&"preview"!==e.viewRef.current&&"active"===t?"history":t),"history"===u.state&&"live"===e.viewRef.current&&n&&$m(u,"key","_"+Xg.CSHA2_256(`history-${c}`)),n&&"upcoming"===u.state&&$m(u,"timeStamp",void 0)},get isHealthy(){const t=Wp(e.sequence,u.index);return t&&t.id===u.id||!1},get isHistory(){return"history"===u.state},get isPast(){return"past"===u.state},get isPreActive(){return"pre-active"===u.state},get isBeforeActive(){return"before-active"===u.state},get isActive(){return"active"===u.state},get isAfterActive(){return"after-active"===u.state},get isPostActive(){return"post-active"===u.state},get isUpcoming(){return"upcoming"===u.state},get isFirst(){return 0===u.index},get isLast(){return u.index===e.sequence.length-1},get isPaused(){if(u.index+1<e.sequence.length){const t=e.sequence[u.index+1];if("pausing"===t.type||"paused"===t.type||"error"===t.type&&"paused"===t.error)return!0}return!1},get allowActivate(){return!(!u.isHealthy||u.isHistory||!n||!e.storylineRef.current||e.storylineRef.current.isFinishing||e.storylineRef.current.isPausing)},activate:(t=!1)=>{if(n&&e.storylineRef.current&&e.storylineRef.current.isPausing){const t=Hy(e.sequence);t&&t.cancel&&t.cancel()}if(n&&(!e.storylineRef.current||e.storylineRef.current.isFinishing||e.storylineRef.current.isPausing))return!1;if(Py(e.promiseRef).reject(),function(e,t,i,s){if(0===e.length||t<0||t>=e.length||!e[t].isHealthy||!i&&e[t].isHistory&&"prologue"!==e[t].type)return!1;const o=Hy(e),n=(o||{index:-1}).index;if(n!==t){const r=-1===n?0:dp.min(t,n),a=-1===n?e.length-1:dp.max(t,n);let l;for(let s=r;s<=a;s++){const o=e[s];if((!o.isHistory||"prologue"===o.type)&&(o.changeState(s===t?"active":s<t?"node"!==o.type?"history":"past":"upcoming"),l||s!==t||(l=o),!i&&s>t&&"node"!==o.type&&"epilogue"!==o.type)){e.splice(s,e.length-s);break}}s&&(o&&!o.isActive&&s("unstage",o.node),l&&s("stage",l.node))}return!0}(e.sequence,u.index,"preview"===e.viewRef.current,o)){const i=()=>{u.changeState("active"),e.update(),e.rules.onInteraction&&e.rules.onInteraction()},s=()=>{if(t&&"preview"!==e.viewRef.current&&e.rules.beforeActiveDuration){const t=e.rules.beforeActiveDuration(u)||0;t?(e.promiseRef.current={resolve:()=>"before-active"===u.state&&i(),reject:()=>u.changeState("upcoming"),handle:setTimeout((()=>u.continue()),t)},u.changeState("before-active"),e.update()):i()}else i()};if("node"===u.type&&e.reset(),t&&"preview"!==e.viewRef.current&&e.rules.preActiveDuration){const t=e.rules.preActiveDuration(u)||0;t>0?(e.promiseRef.current={resolve:()=>"pre-active"===u.state&&s(),reject:()=>u.changeState("upcoming"),handle:setTimeout((()=>u.continue()),t)},u.changeState("pre-active"),e.update()):s()}else s();return e.rules.onInteraction&&e.rules.onInteraction(),!0}return!1},deactivate:()=>!("preview"!==e.viewRef.current||!function(e,t,i){if(t<0||t>=e.length||!e[t].isHealthy||!e[t].isActive)return!1;if(i){const s=e[t];(null==s?void 0:s.isActive)&&i("unstage",s.node)}for(;t<e.length;){const i=e[t];i.isHistory||i.isAfterActive||i.isPostActive||i.changeState("node"!==i.type?"history":"past"),t++}return!0}(e.sequence,u.index,o)||(e.update(),0)),get allowNext(){return!u.isHistory&&e.storylineRef.current&&!e.storylineRef.current.isEvaluating&&!e.storylineRef.current.isFinishing&&!e.storylineRef.current.isPausing&&(!u.node||u.node.isPassed)&&u.isHealthy&&("preview"===e.viewRef.current||u.index+1<e.sequence.length||e.storylineRef.current.isFinishable||!1)||!1},next:()=>{if(!u.isHealthy)return!1;if("preview"!==e.viewRef.current){const t=()=>{u.node&&u.node.block&&u.node.block.lock()},i=()=>(u.node&&u.node.block&&u.node.block.unlock(),!0);if(e.rules.afterActiveDuration&&u.isActive){const s=e.rules.afterActiveDuration(u)||0;if(s>0)return e.promiseRef.current={resolve:()=>"after-active"===u.state&&u.next(),reject:()=>i()&&u.changeState("node"!==u.type?"history":"past"),handle:setTimeout((()=>u.continue()),s)},t(),u.changeState("after-active"),e.update(),!0}if(e.rules.postActiveDuration&&(u.isActive||u.isAfterActive)){const s=e.rules.postActiveDuration(u)||0;if(s>0)return e.promiseRef.current={resolve:()=>"post-active"===u.state&&u.next(),reject:()=>i()&&u.changeState("node"!==u.type?"history":"past"),handle:setTimeout((()=>u.continue()),s)},t(),u.changeState("post-active"),e.update(),!0}i()}else if(u.deactivate())return!0;return!(u.node&&!u.node.isPassed||u.isHistory)&&(u.index+1<e.sequence.length?e.sequence[u.index+1].activate(!0):"node"!==u.type?(u.changeState("history"),!1):(u.changeState("past"),e.storylineRef.current&&e.storylineRef.current.stepForward()||!1))},get allowUndo(){return!(!e.storylineRef.current||e.storylineRef.current.isFinishing||e.storylineRef.current.isEvaluating||!("node"===u.type&&!e.storylineRef.current.isPausing||"pausing"===u.type&&u.pausingRecipe)||!Fy(e.sequence,u.index,e.rules.canInteract))},undo:()=>{if(e.storylineRef.current&&!e.storylineRef.current.isEvaluating){if("pausing"===u.type&&u.pausingRecipe)return u.pausingRecipe.cancel(),!0;const t=Fy(e.sequence,u.index,e.rules.canInteract);return t&&t.activate(!1)||!1}return!1},get allowSkip(){return e.storylineRef.current&&!e.storylineRef.current.isFinishing&&!e.storylineRef.current.isPausing&&!e.storylineRef.current.isEvaluating&&"node"===u.type&&e.rules.canSkip&&e.rules.canSkip(u)||!1},skip:()=>!(!u.isHealthy||!u.allowSkip)&&(u.node&&u.node.block&&u.node.block.clear(),u.next()),wait:()=>Py(e.promiseRef).cancel(),continue:()=>Py(e.promiseRef).resolve(),get repeat(){if("epilogue"===u.type&&u.epilogue&&("test"===e.viewRef.current||"live"===e.viewRef.current&&u.epilogue.repeatable)){for(let t=u.index+1;t<e.sequence.length;t++)if("epilogue"!==e.sequence[t].type)return;return()=>{"test"===e.viewRef.current?e.restart():e.runnerRef.current&&!e.runnerRef.current.isRunning&&e.runnerRef.current.start()}}},get kickOff(){if("preview"!==e.viewRef.current&&"prologue"===u.type&&e.runnerRef.current&&!e.runnerRef.current.isRunning&&!e.runnerRef.current.isFinishing&&!e.runnerRef.current.isPausing&&u.isLast)return()=>e.runnerRef.current&&e.runnerRef.current.start()},changeToError:(t,i,s)=>{$m(u,"type","error"),$m(u,"error",t),$m(u,"retry",i),$m(u,"cancel",s),$m(u,"timeStamp",Lp.now),u.activate(!0)||e.update()},changeToEpilogue:t=>{$m(u,"type","epilogue"),$m(u,"epilogue",t),$m(u,"timeStamp",Lp.now),u.activate(!0)||e.update()},changeToPausing:t=>{$m(u,"type","pausing"),$m(u,"retry",void 0),$m(u,"cancel",t),$m(u,"timeStamp",void 0),u.activate(!0)||e.update()},changeToPaused:()=>{$m(u,"type","paused"),$m(u,"retry",void 0),$m(u,"cancel",void 0),$m(u,"timeStamp",Lp.now),u.activate(!0)||e.update()},pausingRecipe:void 0,setPausingRecipe:t=>{if("email"===t.recipe&&"pausing"===u.type){const i=()=>{$m(u,"pausingRecipe",void 0),$m(u,"cancel",void 0),e.update()};$m(u,"pausingRecipe",{recipe:t.recipe,complete:e=>{i(),t.complete(e)},cancel:()=>{i(),t.cancel()}}),e.update()}}};return e.sequence.push(u),o&&"active"===t&&o("stage",u.node),u}const By=new bp;function Yy(e,t,i=!0,s,n){return gf(e,t,{lineBreaks:i,features:s,reduce:(e,s,r)=>{const a=Ep(s)?[s]:s;switch(e){case"bold":return(0,o.createElement)("b",void 0,...a);case"italic":return(0,o.createElement)("i",void 0,...a);case"bold+italic":return(0,o.createElement)("b",void 0,(0,o.createElement)("i",void 0,...a));case"underline":return(0,o.createElement)("u",void 0,...a);case"strikethrough":return(0,o.createElement)("s",void 0,...a);case"break":return(0,o.createElement)("br");case"hyperlink":return(0,o.createElement)("a",{href:em(r),target:"_blank",rel:"noopener"},...a);case"mention":const e=r&&r||void 0;if(e&&e.content.length>0){const s=[];return lm(e.content,(r=>{const a=r.value;a&&(s.length>0&&r.separator&&s.push((0,o.createElement)("span",void 0,r.separator)),"string"===r.type?s.push(i&&a&&-1!==a.indexOf("\n")?Yy(a.replace(/[@\\]/g,"\\$&"),t,!0,of.None):(0,o.createElement)(a?"span":"u",void 0,a||"")):n&&-1!==n.indexOf("@"+e.id)||s.push(Yy(a,t,i,"text"===r.type?of.None:of.Formatting|of.Hyperlinks,(n||"")+"@"+e.id)))})),s.length>0?(0,o.createElement)("span",void 0,...s):(0,o.createElement)("u",void 0,"")}return(0,o.createElement)("u",void 0,"")}return(0,o.createElement)("span",{key:By.n},...a)}})}var Zy={exports:{}},Vy={};Object.defineProperty(Vy,"__esModule",{value:!0});var Wy="function"==typeof Symbol&&Symbol.for,Gy=Wy?Symbol.for("react.element"):60103,$y=Wy?Symbol.for("react.portal"):60106,Qy=Wy?Symbol.for("react.fragment"):60107,qy=Wy?Symbol.for("react.strict_mode"):60108,Xy=Wy?Symbol.for("react.profiler"):60114,Jy=Wy?Symbol.for("react.provider"):60109,Ky=Wy?Symbol.for("react.context"):60110,ev=Wy?Symbol.for("react.async_mode"):60111,tv=Wy?Symbol.for("react.concurrent_mode"):60111,iv=Wy?Symbol.for("react.forward_ref"):60112,sv=Wy?Symbol.for("react.suspense"):60113,ov=Wy?Symbol.for("react.suspense_list"):60120,nv=Wy?Symbol.for("react.memo"):60115,rv=Wy?Symbol.for("react.lazy"):60116,av=Wy?Symbol.for("react.fundamental"):60117,lv=Wy?Symbol.for("react.responder"):60118,cv=Wy?Symbol.for("react.scope"):60119;function uv(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Gy:switch(e=e.type){case ev:case tv:case Qy:case Xy:case qy:case sv:return e;default:switch(e=e&&e.$$typeof){case Ky:case iv:case rv:case nv:case Jy:return e;default:return t}}case $y:return t}}}function hv(e){return uv(e)===tv}function dv(e){function t(e,s,l,c,d){for(var p,m,g,b,M,x=0,S=0,I=0,k=0,N=0,j=0,z=g=p=0,O=0,P=0,R=0,H=0,F=l.length,U=F-1,B="",Y="",Z="",V="";O<F;){if(m=l.charCodeAt(O),O===U&&0!==S+k+I+x&&(0!==S&&(m=47===S?10:47),k=I=x=0,F++,U++),0===S+k+I+x){if(O===U&&(0<P&&(B=B.replace(h,"")),0<B.trim().length)){switch(m){case 32:case 9:case 59:case 13:case 10:break;default:B+=l.charAt(O)}m=59}switch(m){case 123:for(p=(B=B.trim()).charCodeAt(0),g=1,H=++O;O<F;){switch(m=l.charCodeAt(O)){case 123:g++;break;case 125:g--;break;case 47:switch(m=l.charCodeAt(O+1)){case 42:case 47:e:{for(z=O+1;z<U;++z)switch(l.charCodeAt(z)){case 47:if(42===m&&42===l.charCodeAt(z-1)&&O+2!==z){O=z+1;break e}break;case 10:if(47===m){O=z+1;break e}}O=z}}break;case 91:m++;case 40:m++;case 34:case 39:for(;O++<U&&l.charCodeAt(O)!==m;);}if(0===g)break;O++}if(64===(g=l.substring(H,O),0===p&&(p=(B=B.replace(u,"").trim()).charCodeAt(0)),p)){switch(0<P&&(B=B.replace(h,"")),m=B.charCodeAt(1)){case 100:case 109:case 115:case 45:P=s;break;default:P=A}if(H=(g=t(s,P,g,m,d+1)).length,0<T&&(M=a(3,g,P=i(A,B,R),s,L,_,H,m,d,c),B=P.join(""),void 0!==M&&0===(H=(g=M.trim()).length)&&(m=0,g="")),0<H)switch(m){case 115:B=B.replace(w,r);case 100:case 109:case 45:g=B+"{"+g+"}";break;case 107:g=(B=B.replace(f,"$1 $2"))+"{"+g+"}",g=1===D||2===D&&n("@"+g,3)?"@-webkit-"+g+"@"+g:"@"+g;break;default:g=B+g,112===c&&(Y+=g,g="")}else g=""}else g=t(s,i(s,B,R),g,c,d+1);Z+=g,g=R=P=z=p=0,B="",m=l.charCodeAt(++O);break;case 125:case 59:if(1<(H=(B=(0<P?B.replace(h,""):B).trim()).length))switch(0===z&&(p=B.charCodeAt(0),45===p||96<p&&123>p)&&(H=(B=B.replace(" ",":")).length),0<T&&void 0!==(M=a(1,B,s,e,L,_,Y.length,c,d,c))&&0===(H=(B=M.trim()).length)&&(B="\0\0"),p=B.charCodeAt(0),m=B.charCodeAt(1),p){case 0:break;case 64:if(105===m||99===m){V+=B+l.charAt(O);break}default:58!==B.charCodeAt(H-1)&&(Y+=o(B,p,m,B.charCodeAt(2)))}R=P=z=p=0,B="",m=l.charCodeAt(++O)}}switch(m){case 13:case 10:47===S?S=0:0===1+p&&107!==c&&0<B.length&&(P=1,B+="\0"),0<T*E&&a(0,B,s,e,L,_,Y.length,c,d,c),_=1,L++;break;case 59:case 125:if(0===S+k+I+x){_++;break}default:switch(_++,b=l.charAt(O),m){case 9:case 32:if(0===k+x+S)switch(N){case 44:case 58:case 9:case 32:b="";break;default:32!==m&&(b=" ")}break;case 0:b="\\0";break;case 12:b="\\f";break;case 11:b="\\v";break;case 38:0===k+S+x&&(P=R=1,b="\f"+b);break;case 108:if(0===k+S+x+C&&0<z)switch(O-z){case 2:112===N&&58===l.charCodeAt(O-3)&&(C=N);case 8:111===j&&(C=j)}break;case 58:0===k+S+x&&(z=O);break;case 44:0===S+I+k+x&&(P=1,b+="\r");break;case 34:case 39:0===S&&(k=k===m?0:0===k?m:k);break;case 91:0===k+S+I&&x++;break;case 93:0===k+S+I&&x--;break;case 41:0===k+S+x&&I--;break;case 40:0===k+S+x&&(0===p&&(2*N+3*j==533||(p=1)),I++);break;case 64:0===S+I+k+x+z+g&&(g=1);break;case 42:case 47:if(!(0<k+x+I))switch(S){case 0:switch(2*m+3*l.charCodeAt(O+1)){case 235:S=47;break;case 220:H=O,S=42}break;case 42:47===m&&42===N&&H+2!==O&&(33===l.charCodeAt(H+2)&&(Y+=l.substring(H,O+1)),b="",S=0)}}0===S&&(B+=b)}j=N,N=m,O++}if(0<(H=Y.length)){if(P=s,0<T&&void 0!==(M=a(2,Y,P,e,L,_,H,c,d,c))&&0===(Y=M).length)return V+Y+Z;if(Y=P.join(",")+"{"+Y+"}",0!=D*C){switch(2!==D||n(Y,2)||(C=0),C){case 111:Y=Y.replace(v,":-moz-$1")+Y;break;case 112:Y=Y.replace(y,"::-webkit-input-$1")+Y.replace(y,"::-moz-$1")+Y.replace(y,":-ms-input-$1")+Y}C=0}}return V+Y+Z}function i(e,t,i){var o=t.trim().split(g);t=o;var n=o.length,r=e.length;switch(r){case 0:case 1:var a=0;for(e=0===r?"":e[0]+" ";a<n;++a)t[a]=s(e,t[a],i).trim();break;default:var l=a=0;for(t=[];a<n;++a)for(var c=0;c<r;++c)t[l++]=s(e[c]+" ",o[a],i).trim()}return t}function s(e,t,i){var s=t.charCodeAt(0);switch(33>s&&(s=(t=t.trim()).charCodeAt(0)),s){case 38:return t.replace(b,"$1"+e.trim());case 58:return e.trim()+t.replace(b,"$1"+e.trim());default:if(0<1*i&&0<t.indexOf("\f"))return t.replace(b,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function o(e,t,i,s){var r=e+";",a=2*t+3*i+4*s;if(944===a){e=r.indexOf(":",9)+1;var l=r.substring(e,r.length-1).trim();return l=r.substring(0,e).trim()+l+";",1===D||2===D&&n(l,1)?"-webkit-"+l+l:l}if(0===D||2===D&&!n(r,1))return r;switch(a){case 1015:return 97===r.charCodeAt(10)?"-webkit-"+r+r:r;case 951:return 116===r.charCodeAt(3)?"-webkit-"+r+r:r;case 963:return 110===r.charCodeAt(5)?"-webkit-"+r+r:r;case 1009:if(100!==r.charCodeAt(4))break;case 969:case 942:return"-webkit-"+r+r;case 978:return"-webkit-"+r+"-moz-"+r+r;case 1019:case 983:return"-webkit-"+r+"-moz-"+r+"-ms-"+r+r;case 883:if(45===r.charCodeAt(8))return"-webkit-"+r+r;if(0<r.indexOf("image-set(",11))return r.replace(N,"$1-webkit-$2")+r;break;case 932:if(45===r.charCodeAt(4))switch(r.charCodeAt(5)){case 103:return"-webkit-box-"+r.replace("-grow","")+"-webkit-"+r+"-ms-"+r.replace("grow","positive")+r;case 115:return"-webkit-"+r+"-ms-"+r.replace("shrink","negative")+r;case 98:return"-webkit-"+r+"-ms-"+r.replace("basis","preferred-size")+r}return"-webkit-"+r+"-ms-"+r+r;case 964:return"-webkit-"+r+"-ms-flex-"+r+r;case 1023:if(99!==r.charCodeAt(8))break;return"-webkit-box-pack"+(l=r.substring(r.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+r+"-ms-flex-pack"+l+r;case 1005:return p.test(r)?r.replace(d,":-webkit-")+r.replace(d,":-moz-")+r:r;case 1e3:switch(t=(l=r.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=r.replace(M,"tb");break;case 232:l=r.replace(M,"tb-rl");break;case 220:l=r.replace(M,"lr");break;default:return r}return"-webkit-"+r+"-ms-"+l+r;case 1017:if(-1===r.indexOf("sticky",9))break;case 975:switch(t=(r=e).length-10,a=(l=(33===r.charCodeAt(t)?r.substring(0,t):r).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:r=r.replace(l,"-webkit-"+l)+";"+r;break;case 207:case 102:r=r.replace(l,"-webkit-"+(102<a?"inline-":"")+"box")+";"+r.replace(l,"-webkit-"+l)+";"+r.replace(l,"-ms-"+l+"box")+";"+r}return r+";";case 938:if(45===r.charCodeAt(5))switch(r.charCodeAt(6)){case 105:return l=r.replace("-items",""),"-webkit-"+r+"-webkit-box-"+l+"-ms-flex-"+l+r;case 115:return"-webkit-"+r+"-ms-flex-item-"+r.replace(S,"")+r;default:return"-webkit-"+r+"-ms-flex-line-pack"+r.replace("align-content","").replace(S,"")+r}break;case 973:case 989:if(45!==r.charCodeAt(3)||122===r.charCodeAt(4))break;case 931:case 953:if(!0===k.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?o(e.replace("stretch","fill-available"),t,i,s).replace(":fill-available",":stretch"):r.replace(l,"-webkit-"+l)+r.replace(l,"-moz-"+l.replace("fill-",""))+r;break;case 962:if(r="-webkit-"+r+(102===r.charCodeAt(5)?"-ms-"+r:"")+r,211===i+s&&105===r.charCodeAt(13)&&0<r.indexOf("transform",10))return r.substring(0,r.indexOf(";",27)+1).replace(m,"$1-webkit-$2")+r}return r}function n(e,t){var i=e.indexOf(1===t?":":"{"),s=e.substring(0,3!==t?i:10);return i=e.substring(i+1,e.length-1),z(2!==t?s:s.replace(I,"$1"),i,t)}function r(e,t){var i=o(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return i!==t+";"?i.replace(x," or ($1)").substring(4):"("+t+")"}function a(e,t,i,s,o,n,r,a,l,u){for(var h,d=0,p=t;d<T;++d)switch(h=j[d].call(c,e,p,i,s,o,n,r,a,l,u)){case void 0:case!1:case!0:case null:break;default:p=h}if(p!==t)return p}function l(e){return void 0!==(e=e.prefix)&&(z=null,e?"function"!=typeof e?D=1:(D=2,z=e):D=0),l}function c(e,i){var s=e;if(33>s.charCodeAt(0)&&(s=s.trim()),s=[s],0<T){var o=a(-1,i,s,s,L,_,0,0,0,0);void 0!==o&&"string"==typeof o&&(i=o)}var n=t(A,s,i,0,0);return 0<T&&void 0!==(o=a(-2,n,s,s,L,_,n.length,0,0,0))&&(n=o),C=0,_=L=1,n}var u=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,m=/([,: ])(transform)/g,g=/,\r+?/g,b=/([\t\r\n ])*\f?&/g,f=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,v=/:(read-only)/g,M=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,S=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,k=/stretch|:\s*\w+\-(?:conte|avail)/,N=/([^-])(image-set\()/,_=1,L=1,C=0,D=1,A=[],j=[],T=0,z=null,E=0;return c.use=function e(t){switch(t){case void 0:case null:T=j.length=0;break;default:if("function"==typeof t)j[T++]=t;else if("object"==typeof t)for(var i=0,s=t.length;i<s;++i)e(t[i]);else E=0|!!t}return e},c.set=l,void 0!==e&&l(e),c}Vy.typeOf=uv,Vy.AsyncMode=ev,Vy.ConcurrentMode=tv,Vy.ContextConsumer=Ky,Vy.ContextProvider=Jy,Vy.Element=Gy,Vy.ForwardRef=iv,Vy.Fragment=Qy,Vy.Lazy=rv,Vy.Memo=nv,Vy.Portal=$y,Vy.Profiler=Xy,Vy.StrictMode=qy,Vy.Suspense=sv,Vy.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Qy||e===tv||e===Xy||e===qy||e===sv||e===ov||"object"==typeof e&&null!==e&&(e.$$typeof===rv||e.$$typeof===nv||e.$$typeof===Jy||e.$$typeof===Ky||e.$$typeof===iv||e.$$typeof===av||e.$$typeof===lv||e.$$typeof===cv)},Vy.isAsyncMode=function(e){return hv(e)||uv(e)===ev},Vy.isConcurrentMode=hv,Vy.isContextConsumer=function(e){return uv(e)===Ky},Vy.isContextProvider=function(e){return uv(e)===Jy},Vy.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Gy},Vy.isForwardRef=function(e){return uv(e)===iv},Vy.isFragment=function(e){return uv(e)===Qy},Vy.isLazy=function(e){return uv(e)===rv},Vy.isMemo=function(e){return uv(e)===nv},Vy.isPortal=function(e){return uv(e)===$y},Vy.isProfiler=function(e){return uv(e)===Xy},Vy.isStrictMode=function(e){return uv(e)===qy},Vy.isSuspense=function(e){return uv(e)===sv},Zy.exports=Vy;var pv={exports:{}},mv={};Object.defineProperty(mv,"__esModule",{value:!0}),mv.default={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var gv={};Object.defineProperty(gv,"__esModule",{value:!0}),gv.default={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},pv.exports=mv;var bv,fv,yv=pv.exports,vv=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Mv=(bv=function(e){return vv.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91},fv={},function(e){return void 0===fv[e]&&(fv[e]=bv(e)),fv[e]}),wv=Zy.exports,xv={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Sv={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Iv={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kv={};function Nv(e){return wv.isMemo(e)?Iv:kv[e.$$typeof]||xv}kv[wv.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kv[wv.Memo]=Iv;var _v=Object.defineProperty,Lv=Object.getOwnPropertyNames,Cv=Object.getOwnPropertySymbols,Dv=Object.getOwnPropertyDescriptor,Av=Object.getPrototypeOf,jv=Object.prototype,Tv=function e(t,i,s){if("string"!=typeof i){if(jv){var o=Av(i);o&&o!==jv&&e(t,o,s)}var n=Lv(i);Cv&&(n=n.concat(Cv(i)));for(var r=Nv(t),a=Nv(i),l=0;l<n.length;++l){var c=n[l];if(!(Sv[c]||s&&s[c]||a&&a[c]||r&&r[c])){var u=Dv(i,c);try{_v(t,c,u)}catch(e){}}}}return t};function zv(){return(zv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e}).apply(this,arguments)}var Ev=function(e,t){for(var i=[e[0]],s=0,o=t.length;s<o;s+=1)i.push(t[s],e[s+1]);return i},Ov=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!Zy.exports.typeOf(e)},Pv=Object.freeze([]),Rv=Object.freeze({});function Hv(e){return"function"==typeof e}function Fv(e){return e.displayName||e.name||"Component"}function Uv(e){return e&&"string"==typeof e.styledComponentId}var Bv="undefined"!=typeof process&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",Yv="undefined"!=typeof window&&"HTMLElement"in window,Zv=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY&&"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY),Vv={};function Wv(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(i.length>0?" Args: "+i.join(", "):""))}var Gv=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,i=0;i<e;i++)t+=this.groupSizes[i];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var i=this.groupSizes,s=i.length,o=s;e>=o;)(o<<=1)<0&&Wv(16,""+e);this.groupSizes=new Uint32Array(o),this.groupSizes.set(i),this.length=o;for(var n=s;n<o;n++)this.groupSizes[n]=0}for(var r=this.indexOfGroup(e+1),a=0,l=t.length;a<l;a++)this.tag.insertRule(r,t[a])&&(this.groupSizes[e]++,r++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],i=this.indexOfGroup(e),s=i+t;this.groupSizes[e]=0;for(var o=i;o<s;o++)this.tag.deleteRule(i)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var i=this.groupSizes[e],s=this.indexOfGroup(e),o=s+i,n=s;n<o;n++)t+=this.tag.getRule(n)+"/*!sc*/\n";return t},e}(),$v=new Map,Qv=new Map,qv=1,Xv=function(e){if($v.has(e))return $v.get(e);for(;Qv.has(qv);)qv++;var t=qv++;return $v.set(e,t),Qv.set(t,e),t},Jv=function(e){return Qv.get(e)},Kv=function(e,t){t>=qv&&(qv=t+1),$v.set(e,t),Qv.set(t,e)},eM="style["+Bv+'][data-styled-version="5.3.3"]',tM=new RegExp("^"+Bv+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),iM=function(e,t,i){for(var s,o=i.split(","),n=0,r=o.length;n<r;n++)(s=o[n])&&e.registerName(t,s)},sM=function(e,t){for(var i=(t.textContent||"").split("/*!sc*/\n"),s=[],o=0,n=i.length;o<n;o++){var r=i[o].trim();if(r){var a=r.match(tM);if(a){var l=0|parseInt(a[1],10),c=a[2];0!==l&&(Kv(c,l),iM(e,c,a[3]),e.getTag().insertRules(l,s)),s.length=0}else s.push(r)}}},oM=function(e){var t=document.head,i=e||t,s=document.createElement("style"),o=function(e){for(var t=e.childNodes,i=t.length;i>=0;i--){var s=t[i];if(s&&1===s.nodeType&&s.hasAttribute(Bv))return s}}(i),n=void 0!==o?o.nextSibling:null;s.setAttribute(Bv,"active"),s.setAttribute("data-styled-version","5.3.3");var r="undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null;return r&&s.setAttribute("nonce",r),i.insertBefore(s,n),s},nM=function(){function e(e){var t=this.element=oM(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,i=0,s=t.length;i<s;i++){var o=t[i];if(o.ownerNode===e)return o}Wv(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),rM=function(){function e(e){var t=this.element=oM(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var i=document.createTextNode(t),s=this.nodes[e];return this.element.insertBefore(i,s||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),aM=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),lM=Yv,cM={isServer:!Yv,useCSSOMInjection:!Zv},uM=function(){function e(e,t,i){void 0===e&&(e=Rv),void 0===t&&(t={}),this.options=zv({},cM,{},e),this.gs=t,this.names=new Map(i),this.server=!!e.isServer,!this.server&&Yv&&lM&&(lM=!1,function(e){for(var t=document.querySelectorAll(eM),i=0,s=t.length;i<s;i++){var o=t[i];o&&"active"!==o.getAttribute(Bv)&&(sM(e,o),o.parentNode&&o.parentNode.removeChild(o))}}(this))}e.registerId=function(e){return Xv(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,i){return void 0===i&&(i=!0),new e(zv({},this.options,{},t),this.gs,i&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(i=(t=this.options).isServer,s=t.useCSSOMInjection,o=t.target,e=i?new aM(o):s?new nM(o):new rM(o),new Gv(e)));var e,t,i,s,o},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(Xv(e),this.names.has(e))this.names.get(e).add(t);else{var i=new Set;i.add(t),this.names.set(e,i)}},t.insertRules=function(e,t,i){this.registerName(e,t),this.getTag().insertRules(Xv(e),i)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(Xv(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),i=t.length,s="",o=0;o<i;o++){var n=Jv(o);if(void 0!==n){var r=e.names.get(n),a=t.getGroup(o);if(r&&a&&r.size){var l=Bv+".g"+o+'[id="'+n+'"]',c="";void 0!==r&&r.forEach((function(e){e.length>0&&(c+=e+",")})),s+=""+a+l+'{content:"'+c+'"}/*!sc*/\n'}}}return s}(this)},e}(),hM=/(a)(d)/gi,dM=function(e){return String.fromCharCode(e+(e>25?39:97))};function pM(e){var t,i="";for(t=Math.abs(e);t>52;t=t/52|0)i=dM(t%52)+i;return(dM(t%52)+i).replace(hM,"$1-$2")}var mM=function(e,t){for(var i=t.length;i;)e=33*e^t.charCodeAt(--i);return e},gM=function(e){return mM(5381,e)};function bM(e){for(var t=0;t<e.length;t+=1){var i=e[t];if(Hv(i)&&!Uv(i))return!1}return!0}var fM=gM("5.3.3"),yM=function(){function e(e,t,i){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===i||i.isStatic)&&bM(e),this.componentId=t,this.baseHash=mM(fM,t),this.baseStyle=i,uM.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,i){var s=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(e,t,i)),this.isStatic&&!i.hash)if(this.staticRulesId&&t.hasNameForId(s,this.staticRulesId))o.push(this.staticRulesId);else{var n=OM(this.rules,e,t,i).join(""),r=pM(mM(this.baseHash,n)>>>0);if(!t.hasNameForId(s,r)){var a=i(n,"."+r,void 0,s);t.insertRules(s,r,a)}o.push(r),this.staticRulesId=r}else{for(var l=this.rules.length,c=mM(this.baseHash,i.hash),u="",h=0;h<l;h++){var d=this.rules[h];if("string"==typeof d)u+=d;else if(d){var p=OM(d,e,t,i),m=Array.isArray(p)?p.join(""):p;c=mM(c,m+h),u+=m}}if(u){var g=pM(c>>>0);if(!t.hasNameForId(s,g)){var b=i(u,"."+g,void 0,s);t.insertRules(s,g,b)}o.push(g)}}return o.join(" ")},e}(),vM=/^\s*\/\/.*$/gm,MM=[":","[",".","#"];function wM(e){var t,i,s,o,n=void 0===e?Rv:e,r=n.options,a=void 0===r?Rv:r,l=n.plugins,c=void 0===l?Pv:l,u=new dv(a),h=[],d=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(i,s,o,n,r,a,l,c,u,h){switch(i){case 1:if(0===u&&64===s.charCodeAt(0))return e(s+";"),"";break;case 2:if(0===c)return s+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(o[0]+s),"";default:return s+(0===h?"/*|*/":"")}case-2:s.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),p=function(e,s,n){return 0===s&&-1!==MM.indexOf(n[i.length])||n.match(o)?e:"."+t};function m(e,n,r,a){void 0===a&&(a="&");var l=e.replace(vM,""),c=n&&r?r+" "+n+" { "+l+" }":l;return t=a,i=n,s=new RegExp("\\"+i+"\\b","g"),o=new RegExp("(\\"+i+"\\b){2,}"),u(r||!n?"":n,c)}return u.use([].concat(c,[function(e,t,o){2===e&&o.length&&o[0].lastIndexOf(i)>0&&(o[0]=o[0].replace(s,p))},d,function(e){if(-2===e){var t=h;return h=[],t}}])),m.hash=c.length?c.reduce((function(e,t){return t.name||Wv(15),mM(e,t.name)}),5381).toString():"",m}var xM=o.createContext();xM.Consumer;var SM=o.createContext(),IM=(SM.Consumer,new uM),kM=wM();function NM(){return(0,o.useContext)(xM)||IM}function _M(){return(0,o.useContext)(SM)||kM}function LM(e){var t=(0,o.useState)(e.stylisPlugins),i=t[0],s=t[1],n=NM(),r=(0,o.useMemo)((function(){var t=n;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),a=(0,o.useMemo)((function(){return wM({options:{prefix:!e.disableVendorPrefixes},plugins:i})}),[e.disableVendorPrefixes,i]);return(0,o.useEffect)((function(){(function(e,t,i,s){var o=void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<n.length;l++){var c=n[l];if(!a(c))return!1;var u=e[c],h=t[c];if(!1===(o=void 0)||void 0===o&&u!==h)return!1}return!0})(i,e.stylisPlugins)||s(e.stylisPlugins)}),[e.stylisPlugins]),o.createElement(xM.Provider,{value:r},o.createElement(SM.Provider,{value:a},e.children))}var CM=function(){function e(e,t){var i=this;this.inject=function(e,t){void 0===t&&(t=kM);var s=i.name+t.hash;e.hasNameForId(i.id,s)||e.insertRules(i.id,s,t(i.rules,s,"@keyframes"))},this.toString=function(){return Wv(12,String(i.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=kM),this.name+e.hash},e}(),DM=/([A-Z])/,AM=/([A-Z])/g,jM=/^ms-/,TM=function(e){return"-"+e.toLowerCase()};function zM(e){return DM.test(e)?e.replace(AM,TM).replace(jM,"-ms-"):e}var EM=function(e){return null==e||!1===e||""===e};function OM(e,t,i,s){if(Array.isArray(e)){for(var o,n=[],r=0,a=e.length;r<a;r+=1)""!==(o=OM(e[r],t,i,s))&&(Array.isArray(o)?n.push.apply(n,o):n.push(o));return n}return EM(e)?"":Uv(e)?"."+e.styledComponentId:Hv(e)?"function"!=typeof(l=e)||l.prototype&&l.prototype.isReactComponent||!t?e:OM(e(t),t,i,s):e instanceof CM?i?(e.inject(i,s),e.getName(s)):e:Ov(e)?function e(t,i){var s,o,n=[];for(var r in t)t.hasOwnProperty(r)&&!EM(t[r])&&(Array.isArray(t[r])&&t[r].isCss||Hv(t[r])?n.push(zM(r)+":",t[r],";"):Ov(t[r])?n.push.apply(n,e(t[r],r)):n.push(zM(r)+": "+(s=r,(null==(o=t[r])||"boolean"==typeof o||""===o?"":"number"!=typeof o||0===o||s in yv?String(o).trim():o+"px")+";")));return i?[i+" {"].concat(n,["}"]):n}(e):e.toString();var l}var PM=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function RM(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];return Hv(e)||Ov(e)?PM(OM(Ev(Pv,[e].concat(i)))):0===i.length&&1===e.length&&"string"==typeof e[0]?e:PM(OM(Ev(e,i)))}new Set;var HM=function(e,t,i){return void 0===i&&(i=Rv),e.theme!==i.theme&&e.theme||t||i.theme},FM=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,UM=/(^-|-$)/g;function BM(e){return e.replace(FM,"-").replace(UM,"")}var YM=function(e){return pM(gM(e)>>>0)};function ZM(e){return"string"==typeof e&&!0}var VM=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},WM=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function GM(e,t,i){var s=e[i];VM(t)&&VM(s)?$M(s,t):e[i]=t}function $M(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];for(var o=0,n=i;o<n.length;o++){var r=n[o];if(VM(r))for(var a in r)WM(a)&&GM(e,r[a],a)}return e}var QM=o.createContext();QM.Consumer;var qM={};function XM(e,t,i){var s=Uv(e),n=!ZM(e),r=t.attrs,a=void 0===r?Pv:r,l=t.componentId,c=void 0===l?function(e,t){var i="string"!=typeof e?"sc":BM(e);qM[i]=(qM[i]||0)+1;var s=i+"-"+YM("5.3.3"+i+qM[i]);return t?t+"-"+s:s}(t.displayName,t.parentComponentId):l,u=t.displayName,h=void 0===u?function(e){return ZM(e)?"styled."+e:"Styled("+Fv(e)+")"}(e):u,d=t.displayName&&t.componentId?BM(t.displayName)+"-"+t.componentId:t.componentId||c,p=s&&e.attrs?Array.prototype.concat(e.attrs,a).filter(Boolean):a,m=t.shouldForwardProp;s&&e.shouldForwardProp&&(m=t.shouldForwardProp?function(i,s,o){return e.shouldForwardProp(i,s,o)&&t.shouldForwardProp(i,s,o)}:e.shouldForwardProp);var g,b=new yM(i,d,s?e.componentStyle:void 0),f=b.isStatic&&0===a.length,y=function(e,t){return function(e,t,i,s){var n=e.attrs,r=e.componentStyle,a=e.defaultProps,l=e.foldedComponentIds,c=e.shouldForwardProp,u=e.styledComponentId,h=e.target,d=function(e,t,i){void 0===e&&(e=Rv);var s=zv({},t,{theme:e}),o={};return i.forEach((function(e){var t,i,n,r=e;for(t in Hv(r)&&(r=r(s)),r)s[t]=o[t]="className"===t?(i=o[t],n=r[t],i&&n?i+" "+n:i||n):r[t]})),[s,o]}(HM(t,(0,o.useContext)(QM),a)||Rv,t,n),p=d[0],m=d[1],g=function(e,t,i,s){var o=NM(),n=_M();return t?e.generateAndInjectStyles(Rv,o,n):e.generateAndInjectStyles(i,o,n)}(r,s,p),b=i,f=m.$as||t.$as||m.as||t.as||h,y=ZM(f),v=m!==t?zv({},t,{},m):t,M={};for(var w in v)"$"!==w[0]&&"as"!==w&&("forwardedAs"===w?M.as=v[w]:(c?c(w,Mv,f):!y||Mv(w))&&(M[w]=v[w]));return t.style&&m.style!==t.style&&(M.style=zv({},t.style,{},m.style)),M.className=Array.prototype.concat(l,u,g!==u?g:null,t.className,m.className).filter(Boolean).join(" "),M.ref=b,(0,o.createElement)(f,M)}(g,e,t,f)};return y.displayName=h,(g=o.forwardRef(y)).attrs=p,g.componentStyle=b,g.displayName=h,g.shouldForwardProp=m,g.foldedComponentIds=s?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Pv,g.styledComponentId=d,g.target=s?e.target:e,g.withComponent=function(e){var s=t.componentId,o=function(e,t){if(null==e)return{};var i,s,o={},n=Object.keys(e);for(s=0;s<n.length;s++)i=n[s],t.indexOf(i)>=0||(o[i]=e[i]);return o}(t,["componentId"]),n=s&&s+"-"+(ZM(e)?e:BM(Fv(e)));return XM(e,zv({},o,{attrs:p,componentId:n}),i)},Object.defineProperty(g,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=s?$M({},e.defaultProps,t):t}}),g.toString=function(){return"."+g.styledComponentId},n&&Tv(g,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),g}var JM=function(e){return function e(t,i,s){if(void 0===s&&(s=Rv),!Zy.exports.isValidElementType(i))return Wv(1,String(i));var o=function(){return t(i,s,RM.apply(void 0,arguments))};return o.withConfig=function(o){return e(t,i,zv({},s,{},o))},o.attrs=function(o){return e(t,i,zv({},s,{attrs:Array.prototype.concat(s.attrs,o).filter(Boolean)}))},o}(XM,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){JM[e]=JM(e)}));var KM=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=bM(e),uM.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,i,s){var o=s(OM(this.rules,t,i,s).join(""),""),n=this.componentId+e;i.insertRules(n,n,o)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,i,s){e>2&&uM.registerId(this.componentId+e),this.removeStyles(e,i),this.createStyles(e,t,i,s)},e}();function ew(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var o=RM.apply(void 0,[e].concat(i)).join(""),n=YM(o);return new CM(n,o)}var tw=JM,iw={exports:{}},sw={exports:{}},ow=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))},nw=Array.prototype.concat,rw=Array.prototype.slice,aw=sw.exports=function(e){for(var t=[],i=0,s=e.length;i<s;i++){var o=e[i];ow(o)?t=nw.call(t,rw.call(o)):t.push(o)}return t};aw.wrap=function(e){return function(){return e(aw(arguments))}};var lw={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},cw=sw.exports,uw=Object.hasOwnProperty,hw={};for(var dw in lw)uw.call(lw,dw)&&(hw[lw[dw]]=dw);var pw=iw.exports={to:{},get:{}};function mw(e,t,i){return Math.min(Math.max(t,e),i)}function gw(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}pw.get=function(e){var t,i;switch(e.substring(0,3).toLowerCase()){case"hsl":t=pw.get.hsl(e),i="hsl";break;case"hwb":t=pw.get.hwb(e),i="hwb";break;default:t=pw.get.rgb(e),i="rgb"}return t?{model:i,value:t}:null},pw.get.rgb=function(e){if(!e)return null;var t,i,s,o=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(s=t[2],t=t[1],i=0;i<3;i++){var n=2*i;o[i]=parseInt(t.slice(n,n+2),16)}s&&(o[3]=parseInt(s,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(s=(t=t[1])[3],i=0;i<3;i++)o[i]=parseInt(t[i]+t[i],16);s&&(o[3]=parseInt(s+s,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(i=0;i<3;i++)o[i]=parseInt(t[i+1],0);t[4]&&(t[5]?o[3]=.01*parseFloat(t[4]):o[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:uw.call(lw,t[1])?((o=lw[t[1]])[3]=1,o):null:null;for(i=0;i<3;i++)o[i]=Math.round(2.55*parseFloat(t[i+1]));t[4]&&(t[5]?o[3]=.01*parseFloat(t[4]):o[3]=parseFloat(t[4]))}for(i=0;i<3;i++)o[i]=mw(o[i],0,255);return o[3]=mw(o[3],0,1),o},pw.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var i=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,mw(parseFloat(t[2]),0,100),mw(parseFloat(t[3]),0,100),mw(isNaN(i)?1:i,0,1)]}return null},pw.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var i=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,mw(parseFloat(t[2]),0,100),mw(parseFloat(t[3]),0,100),mw(isNaN(i)?1:i,0,1)]}return null},pw.to.hex=function(){var e=cw(arguments);return"#"+gw(e[0])+gw(e[1])+gw(e[2])+(e[3]<1?gw(Math.round(255*e[3])):"")},pw.to.rgb=function(){var e=cw(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},pw.to.rgb.percent=function(){var e=cw(arguments),t=Math.round(e[0]/255*100),i=Math.round(e[1]/255*100),s=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+i+"%, "+s+"%)":"rgba("+t+"%, "+i+"%, "+s+"%, "+e[3]+")"},pw.to.hsl=function(){var e=cw(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},pw.to.hwb=function(){var e=cw(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},pw.to.keyword=function(e){return hw[e.slice(0,3)]};const bw={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},fw={};for(const e of Object.keys(bw))fw[bw[e]]=e;const yw={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var vw=yw;for(const e of Object.keys(yw)){if(!("channels"in yw[e]))throw new Error("missing channels property: "+e);if(!("labels"in yw[e]))throw new Error("missing channel labels property: "+e);if(yw[e].labels.length!==yw[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:i}=yw[e];delete yw[e].channels,delete yw[e].labels,Object.defineProperty(yw[e],"channels",{value:t}),Object.defineProperty(yw[e],"labels",{value:i})}function Mw(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}yw.rgb.hsl=function(e){const t=e[0]/255,i=e[1]/255,s=e[2]/255,o=Math.min(t,i,s),n=Math.max(t,i,s),r=n-o;let a,l;n===o?a=0:t===n?a=(i-s)/r:i===n?a=2+(s-t)/r:s===n&&(a=4+(t-i)/r),a=Math.min(60*a,360),a<0&&(a+=360);const c=(o+n)/2;return l=n===o?0:c<=.5?r/(n+o):r/(2-n-o),[a,100*l,100*c]},yw.rgb.hsv=function(e){let t,i,s,o,n;const r=e[0]/255,a=e[1]/255,l=e[2]/255,c=Math.max(r,a,l),u=c-Math.min(r,a,l),h=function(e){return(c-e)/6/u+.5};return 0===u?(o=0,n=0):(n=u/c,t=h(r),i=h(a),s=h(l),r===c?o=s-i:a===c?o=1/3+t-s:l===c&&(o=2/3+i-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*n,100*c]},yw.rgb.hwb=function(e){const t=e[0],i=e[1];let s=e[2];const o=yw.rgb.hsl(e)[0],n=1/255*Math.min(t,Math.min(i,s));return s=1-1/255*Math.max(t,Math.max(i,s)),[o,100*n,100*s]},yw.rgb.cmyk=function(e){const t=e[0]/255,i=e[1]/255,s=e[2]/255,o=Math.min(1-t,1-i,1-s);return[100*((1-t-o)/(1-o)||0),100*((1-i-o)/(1-o)||0),100*((1-s-o)/(1-o)||0),100*o]},yw.rgb.keyword=function(e){const t=fw[e];if(t)return t;let i,s=1/0;for(const t of Object.keys(bw)){const o=Mw(e,bw[t]);o<s&&(s=o,i=t)}return i},yw.keyword.rgb=function(e){return bw[e]},yw.rgb.xyz=function(e){let t=e[0]/255,i=e[1]/255,s=e[2]/255;return t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,[100*(.4124*t+.3576*i+.1805*s),100*(.2126*t+.7152*i+.0722*s),100*(.0193*t+.1192*i+.9505*s)]},yw.rgb.lab=function(e){const t=yw.rgb.xyz(e);let i=t[0],s=t[1],o=t[2];return i/=95.047,s/=100,o/=108.883,i=i>.008856?i**(1/3):7.787*i+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,[116*s-16,500*(i-s),200*(s-o)]},yw.hsl.rgb=function(e){const t=e[0]/360,i=e[1]/100,s=e[2]/100;let o,n,r;if(0===i)return r=255*s,[r,r,r];o=s<.5?s*(1+i):s+i-s*i;const a=2*s-o,l=[0,0,0];for(let e=0;e<3;e++)n=t+1/3*-(e-1),n<0&&n++,n>1&&n--,r=6*n<1?a+6*(o-a)*n:2*n<1?o:3*n<2?a+(o-a)*(2/3-n)*6:a,l[e]=255*r;return l},yw.hsl.hsv=function(e){const t=e[0];let i=e[1]/100,s=e[2]/100,o=i;const n=Math.max(s,.01);return s*=2,i*=s<=1?s:2-s,o*=n<=1?n:2-n,[t,100*(0===s?2*o/(n+o):2*i/(s+i)),(s+i)/2*100]},yw.hsv.rgb=function(e){const t=e[0]/60,i=e[1]/100;let s=e[2]/100;const o=Math.floor(t)%6,n=t-Math.floor(t),r=255*s*(1-i),a=255*s*(1-i*n),l=255*s*(1-i*(1-n));switch(s*=255,o){case 0:return[s,l,r];case 1:return[a,s,r];case 2:return[r,s,l];case 3:return[r,a,s];case 4:return[l,r,s];case 5:return[s,r,a]}},yw.hsv.hsl=function(e){const t=e[0],i=e[1]/100,s=e[2]/100,o=Math.max(s,.01);let n,r;r=(2-i)*s;const a=(2-i)*o;return n=i*o,n/=a<=1?a:2-a,n=n||0,r/=2,[t,100*n,100*r]},yw.hwb.rgb=function(e){const t=e[0]/360;let i=e[1]/100,s=e[2]/100;const o=i+s;let n;o>1&&(i/=o,s/=o);const r=Math.floor(6*t),a=1-s;n=6*t-r,0!=(1&r)&&(n=1-n);const l=i+n*(a-i);let c,u,h;switch(r){default:c=a,u=l,h=i;break;case 1:c=l,u=a,h=i;break;case 2:c=i,u=a,h=l;break;case 3:c=i,u=l,h=a;break;case 4:c=l,u=i,h=a;break;case 5:c=a,u=i,h=l}return[255*c,255*u,255*h]},yw.cmyk.rgb=function(e){const t=e[0]/100,i=e[1]/100,s=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,i*(1-o)+o)),255*(1-Math.min(1,s*(1-o)+o))]},yw.xyz.rgb=function(e){const t=e[0]/100,i=e[1]/100,s=e[2]/100;let o,n,r;return o=3.2406*t+-1.5372*i+-.4986*s,n=-.9689*t+1.8758*i+.0415*s,r=.0557*t+-.204*i+1.057*s,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,n=n>.0031308?1.055*n**(1/2.4)-.055:12.92*n,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,o=Math.min(Math.max(0,o),1),n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),[255*o,255*n,255*r]},yw.xyz.lab=function(e){let t=e[0],i=e[1],s=e[2];return t/=95.047,i/=100,s/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,[116*i-16,500*(t-i),200*(i-s)]},yw.lab.xyz=function(e){let t,i,s;i=(e[0]+16)/116,t=e[1]/500+i,s=i-e[2]/200;const o=i**3,n=t**3,r=s**3;return i=o>.008856?o:(i-16/116)/7.787,t=n>.008856?n:(t-16/116)/7.787,s=r>.008856?r:(s-16/116)/7.787,t*=95.047,i*=100,s*=108.883,[t,i,s]},yw.lab.lch=function(e){const t=e[0],i=e[1],s=e[2];let o;return o=360*Math.atan2(s,i)/2/Math.PI,o<0&&(o+=360),[t,Math.sqrt(i*i+s*s),o]},yw.lch.lab=function(e){const t=e[0],i=e[1],s=e[2]/360*2*Math.PI;return[t,i*Math.cos(s),i*Math.sin(s)]},yw.rgb.ansi16=function(e,t=null){const[i,s,o]=e;let n=null===t?yw.rgb.hsv(e)[2]:t;if(n=Math.round(n/50),0===n)return 30;let r=30+(Math.round(o/255)<<2|Math.round(s/255)<<1|Math.round(i/255));return 2===n&&(r+=60),r},yw.hsv.ansi16=function(e){return yw.rgb.ansi16(yw.hsv.rgb(e),e[2])},yw.rgb.ansi256=function(e){const t=e[0],i=e[1],s=e[2];return t===i&&i===s?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(i/255*5)+Math.round(s/255*5)},yw.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const i=.5*(1+~~(e>50));return[(1&t)*i*255,(t>>1&1)*i*255,(t>>2&1)*i*255]},yw.ansi256.rgb=function(e){if(e>=232){const t=10*(e-232)+8;return[t,t,t]}let t;return e-=16,[Math.floor(e/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},yw.rgb.hex=function(e){const t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},yw.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let i=t[0];3===t[0].length&&(i=i.split("").map((e=>e+e)).join(""));const s=parseInt(i,16);return[s>>16&255,s>>8&255,255&s]},yw.rgb.hcg=function(e){const t=e[0]/255,i=e[1]/255,s=e[2]/255,o=Math.max(Math.max(t,i),s),n=Math.min(Math.min(t,i),s),r=o-n;let a,l;return a=r<1?n/(1-r):0,l=r<=0?0:o===t?(i-s)/r%6:o===i?2+(s-t)/r:4+(t-i)/r,l/=6,l%=1,[360*l,100*r,100*a]},yw.hsl.hcg=function(e){const t=e[1]/100,i=e[2]/100,s=i<.5?2*t*i:2*t*(1-i);let o=0;return s<1&&(o=(i-.5*s)/(1-s)),[e[0],100*s,100*o]},yw.hsv.hcg=function(e){const t=e[1]/100,i=e[2]/100,s=t*i;let o=0;return s<1&&(o=(i-s)/(1-s)),[e[0],100*s,100*o]},yw.hcg.rgb=function(e){const t=e[0]/360,i=e[1]/100,s=e[2]/100;if(0===i)return[255*s,255*s,255*s];const o=[0,0,0],n=t%1*6,r=n%1,a=1-r;let l=0;switch(Math.floor(n)){case 0:o[0]=1,o[1]=r,o[2]=0;break;case 1:o[0]=a,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=r;break;case 3:o[0]=0,o[1]=a,o[2]=1;break;case 4:o[0]=r,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=a}return l=(1-i)*s,[255*(i*o[0]+l),255*(i*o[1]+l),255*(i*o[2]+l)]},yw.hcg.hsv=function(e){const t=e[1]/100,i=t+e[2]/100*(1-t);let s=0;return i>0&&(s=t/i),[e[0],100*s,100*i]},yw.hcg.hsl=function(e){const t=e[1]/100,i=e[2]/100*(1-t)+.5*t;let s=0;return i>0&&i<.5?s=t/(2*i):i>=.5&&i<1&&(s=t/(2*(1-i))),[e[0],100*s,100*i]},yw.hcg.hwb=function(e){const t=e[1]/100,i=t+e[2]/100*(1-t);return[e[0],100*(i-t),100*(1-i)]},yw.hwb.hcg=function(e){const t=e[1]/100,i=1-e[2]/100,s=i-t;let o=0;return s<1&&(o=(i-s)/(1-s)),[e[0],100*s,100*o]},yw.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},yw.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},yw.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},yw.gray.hsl=function(e){return[0,0,e[0]]},yw.gray.hsv=yw.gray.hsl,yw.gray.hwb=function(e){return[0,100,e[0]]},yw.gray.cmyk=function(e){return[0,0,0,e[0]]},yw.gray.lab=function(e){return[e[0],0,0]},yw.gray.hex=function(e){const t=255&Math.round(e[0]/100*255),i=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(i.length)+i},yw.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};const ww=vw;function xw(e,t){return function(i){return t(e(i))}}function Sw(e,t){const i=[t[e].parent,e];let s=ww[t[e].parent][e],o=t[e].parent;for(;t[o].parent;)i.unshift(t[o].parent),s=xw(ww[t[o].parent][o],s),o=t[o].parent;return s.conversion=i,s}const Iw=vw,kw={};Object.keys(Iw).forEach((e=>{kw[e]={},Object.defineProperty(kw[e],"channels",{value:Iw[e].channels}),Object.defineProperty(kw[e],"labels",{value:Iw[e].labels});const t=function(e){const t=function(e){const t=function(){const e={},t=Object.keys(ww);for(let i=t.length,s=0;s<i;s++)e[t[s]]={distance:-1,parent:null};return e}(),i=[e];for(t[e].distance=0;i.length;){const e=i.pop(),s=Object.keys(ww[e]);for(let o=s.length,n=0;n<o;n++){const o=s[n],r=t[o];-1===r.distance&&(r.distance=t[e].distance+1,r.parent=e,i.unshift(o))}}return t}(e),i={},s=Object.keys(t);for(let e=s.length,o=0;o<e;o++){const e=s[o];null!==t[e].parent&&(i[e]=Sw(e,t))}return i}(e);Object.keys(t).forEach((i=>{const s=t[i];kw[e][i]=function(e){const t=function(...t){const i=t[0];if(null==i)return i;i.length>1&&(t=i);const s=e(t);if("object"==typeof s)for(let e=s.length,t=0;t<e;t++)s[t]=Math.round(s[t]);return s};return"conversion"in e&&(t.conversion=e.conversion),t}(s),kw[e][i].raw=function(e){const t=function(...t){const i=t[0];return null==i?i:(i.length>1&&(t=i),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(s)}))}));var Nw=kw;const _w=iw.exports,Lw=Nw,Cw=[].slice,Dw=["keyword","gray","hex"],Aw={};for(const e of Object.keys(Lw))Aw[Cw.call(Lw[e].labels).sort().join("")]=e;const jw={};function Tw(e,t){if(!(this instanceof Tw))return new Tw(e,t);if(t&&t in Dw&&(t=null),t&&!(t in Lw))throw new Error("Unknown model: "+t);let i,s;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Tw)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){const t=_w.get(e);if(null===t)throw new Error("Unable to parse color from string: "+e);this.model=t.model,s=Lw[this.model].channels,this.color=t.value.slice(0,s),this.valpha="number"==typeof t.value[s]?t.value[s]:1}else if(e.length>0){this.model=t||"rgb",s=Lw[this.model].channels;const i=Cw.call(e,0,s);this.color=Pw(i,s),this.valpha="number"==typeof e[s]?e[s]:1}else if("number"==typeof e)this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;const t=Object.keys(e);"alpha"in e&&(t.splice(t.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);const s=t.sort().join("");if(!(s in Aw))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=Aw[s];const o=Lw[this.model].labels,n=[];for(i=0;i<o.length;i++)n.push(e[o[i]]);this.color=Pw(n)}if(jw[this.model])for(s=Lw[this.model].channels,i=0;i<s;i++){const e=jw[this.model][i];e&&(this.color[i]=e(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Tw.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in _w.to?this:this.rgb();t=t.round("number"==typeof e?e:1);const i=1===t.valpha?t.color:t.color.concat(this.valpha);return _w.to[t.model](i)},percentString(e){const t=this.rgb().round("number"==typeof e?e:1),i=1===t.valpha?t.color:t.color.concat(this.valpha);return _w.to.rgb.percent(i)},array(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object(){const e={},t=Lw[this.model].channels,i=Lw[this.model].labels;for(let s=0;s<t;s++)e[i[s]]=this.color[s];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new Tw(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha(e){return arguments.length>0?new Tw(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:zw("rgb",0,Ew(255)),green:zw("rgb",1,Ew(255)),blue:zw("rgb",2,Ew(255)),hue:zw(["hsl","hsv","hsl","hwb","hcg"],0,(e=>(e%360+360)%360)),saturationl:zw("hsl",1,Ew(100)),lightness:zw("hsl",2,Ew(100)),saturationv:zw("hsv",1,Ew(100)),value:zw("hsv",2,Ew(100)),chroma:zw("hcg",1,Ew(100)),gray:zw("hcg",2,Ew(100)),white:zw("hwb",1,Ew(100)),wblack:zw("hwb",2,Ew(100)),cyan:zw("cmyk",0,Ew(100)),magenta:zw("cmyk",1,Ew(100)),yellow:zw("cmyk",2,Ew(100)),black:zw("cmyk",3,Ew(100)),x:zw("xyz",0,Ew(100)),y:zw("xyz",1,Ew(100)),z:zw("xyz",2,Ew(100)),l:zw("lab",0,Ew(100)),a:zw("lab",1),b:zw("lab",2),keyword(e){return arguments.length>0?new Tw(e):Lw[this.model].keyword(this.color)},hex(e){return arguments.length>0?new Tw(e):_w.to.hex(this.rgb().round().color)},hexa(e){if(arguments.length>0)return new Tw(e);const t=this.rgb().round().color;let i=Math.round(255*this.valpha).toString(16).toUpperCase();return 1===i.length&&(i="0"+i),_w.to.hex(t)+i},rgbNumber(){const e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity(){const e=this.rgb().color,t=[];for(const[i,s]of e.entries()){const e=s/255;t[i]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),i=e.luminosity();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return Tw.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let i=t.color[0];return i=(i+e)%360,i=i<0?360+i:i,t.color[0]=i,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const i=e.rgb(),s=this.rgb(),o=void 0===t?.5:t,n=2*o-1,r=i.alpha()-s.alpha(),a=((n*r==-1?n:(n+r)/(1+n*r))+1)/2,l=1-a;return Tw.rgb(a*i.red()+l*s.red(),a*i.green()+l*s.green(),a*i.blue()+l*s.blue(),i.alpha()*o+s.alpha()*(1-o))}};for(const e of Object.keys(Lw)){if(Dw.includes(e))continue;const t=Lw[e].channels;Tw.prototype[e]=function(){if(this.model===e)return new Tw(this);if(arguments.length>0)return new Tw(arguments,e);const i="number"==typeof arguments[t]?t:this.valpha;return new Tw(Ow(Lw[this.model][e].raw(this.color)).concat(i),e)},Tw[e]=function(i){return"number"==typeof i&&(i=Pw(Cw.call(arguments),t)),new Tw(i,e)}}function zw(e,t,i){e=Array.isArray(e)?e:[e];for(const s of e)(jw[s]||(jw[s]=[]))[t]=i;return e=e[0],function(s){let o;return arguments.length>0?(i&&(s=i(s)),o=this[e](),o.color[t]=s,o):(o=this[e]().color[t],i&&(o=i(o)),o)}}function Ew(e){return function(t){return Math.max(0,Math.min(e,t))}}function Ow(e){return Array.isArray(e)?e:[e]}function Pw(e,t){for(let i=0;i<t;i++)"number"!=typeof e[i]&&(e[i]=0);return e}var Rw=Tw,Hw={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const Fw=e=>{if(e&&"transparent"!==(e=e.toLowerCase()))try{const t=Xm(Hw,e);return Rw(t?`rgb(${t[0]},${t[1]},${t[2]})`:e)}catch(t){try{return Rw("#"+e)}catch(e){return Rw("rgba(255,255,255,0)")}}return Rw("rgba(255,255,255,0)")},Uw=(e,t)=>{let i=Fw(e);if(t){const e={manipulate:(t,s=!0)=>(s&&(i=t(i)),e),makeBlackOrWhite:(t=!0)=>{if(t){const e=(.299*i.red()+.587*i.green()+.114*i.blue())/255;i=i.red(e>.55?0:255).green(e>.55?0:255).blue(e>.55?0:255).alpha(1)}return e},makeUnclear:t=>(t&&0===i.alpha()&&(i=Fw(t)),e)};t(e)}return i.rgb().string()},Bw=tw.span`
    color: ${e=>Uw(e.props.errorColor)};
    position: relative;
    left: 0.1em;
    top: 0.18em;
    text-transform: uppercase;
    font-size: 1.4em;
    line-height: 0.5em;

    :after {
        content: "*";
    }
`,Yw=e=>btoa(`<?xml version="1.0" encoding="utf-8"?>\n        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">\n            <path d="M16.218 3.782c-1.794-1.794-4.18-2.782-6.718-2.782s-4.923 0.988-6.718 2.782-2.782 4.18-2.782 6.717 0.988 4.923 2.782 6.718 4.18 2.782 6.718 2.782 4.923-0.988 6.718-2.782 2.782-4.18 2.782-6.718-0.988-4.923-2.782-6.717zM9.5 19c-4.687 0-8.5-3.813-8.5-8.5s3.813-8.5 8.5-8.5c4.687 0 8.5 3.813 8.5 8.5s-3.813 8.5-8.5 8.5z" fill="${e}"></path>\n            <path d="M9.5 18c-0 0 0 0 0 0-0.276 0-0.5-0.224-0.5-0.5v-1c0-0.276 0.224-0.5 0.5-0.5v0c0.276 0 0.5 0.224 0.5 0.5v1c0 0.276-0.224 0.5-0.5 0.5z" fill="${e}"></path>\n            <path d="M9.5 15c-0.276 0-0.5-0.224-0.5-0.5v-10c0-0.276 0.224-0.5 0.5-0.5s0.5 0.224 0.5 0.5v10c0 0.276-0.224 0.5-0.5 0.5z" fill="${e}"></path>\n        </svg>`),Zw=tw.button`
    appearance: none;
    font-size: 1em;
    line-height: 1.5em;
    outline: none;
    user-select: none;
    box-sizing: border-box;
    background-color: ${e=>"fill"===e.props.mode&&Uw(e.props.baseColor)||"transparent"};
    border: ${e=>`${e.props.outlineSize}px solid ${Uw(e.props.baseColor,(t=>t.manipulate((e=>e.darken(.1)),"fill"===e.props.mode)))}`};
    border-left: ${e=>"middle"===e.props.group||"end"===e.props.group?"none":void 0};
    color: ${e=>Uw(e.props.textColor||e.props.baseColor,(t=>t.makeBlackOrWhite(!e.props.textColor&&"fill"===e.props.mode)))};
    text-align: left;
    border-radius: ${e=>Hp(e.props.roundness)?`${e.props.roundness}px`:"0.5em"};
    border-top-left-radius: ${e=>e.props.group&&"start"!==e.props.group?"0":void 0};
    border-bottom-left-radius: ${e=>e.props.group&&"start"!==e.props.group?"0":void 0};
    border-top-right-radius: ${e=>e.props.group&&"end"!==e.props.group?"0":void 0};
    border-bottom-right-radius: ${e=>e.props.group&&"end"!==e.props.group?"0":void 0};
    width: ${e=>e.props.isImage&&`calc(${"small"===e.props.size?75:"large"===e.props.size?300:150}px + 1.5em)`};
    overflow: ${e=>e.props.isImage?"hidden":void 0};
    padding: ${e=>.375*e.props.scale+"em 0.75em"};
    padding-top: ${e=>e.props.isImage?"0.75em":void 0};
    padding-bottom: ${e=>e.props.isImage&&!e.props.hasLabel?"0.75em":void 0};
    margin: 0;
    opacity: ${e=>"outline"===e.props.mode?.2:.4};
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,
        opacity 0.15s ease-in-out;

    @media (max-device-width: 500px) {
        width: ${e=>e.props.isImage&&`calc(${"small"===e.props.size?75:"large"===e.props.size?280:120}px + 1.5em)`};
    }

    @media (max-width: 500px) {
        width: ${e=>e.props.isImage&&`calc(${"small"===e.props.size?75:"large"===e.props.size?240:120}px + 1.5em)`};
    }

    > div {
        display: flex;
        width: ${e=>("small"===e.props.size?75:"large"===e.props.size?300:150)+"px"};
        height: ${e=>("small"===e.props.size?75:"large"===e.props.size?300:150)+"px"};
        min-width: 100%;
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center center;
        justify-content: center;
        align-items: center;
        overflow: hidden;
        white-space: nowrap;

        > span {
            font-size: ${e=>("small"===e.props.size?40:"large"===e.props.size?160:80)+"px"};
        }

        @media (max-device-width: 500px) {
            width: ${e=>("small"===e.props.size?75:"large"===e.props.size?240:120)+"px"};
            height: ${e=>("small"===e.props.size?75:"large"===e.props.size?240:120)+"px"};

            > span {
                font-size: ${e=>("small"===e.props.size?40:"large"===e.props.size?136:68)+"px"};
            }
        }

        @media (max-width: 500px) {
            width: ${e=>("small"===e.props.size?75:"large"===e.props.size?240:120)+"px"};
            height: ${e=>("small"===e.props.size?75:"large"===e.props.size?240:120)+"px"};

            > span {
                font-size: ${e=>("small"===e.props.size?40:"large"===e.props.size?136:68)+"px"};
            }
        }
    }

    > span {
        display: block;

        > span {
            display: table-cell;

            > small {
                display: block;
                font-size: 0.8em;
                opacity: 0.8;
            }

            > svg {
                width: 1em;
                height: 1em;
                position: relative;
                top: ${e=>"solo"!==e.props.iconPosition&&"-2px"};
                margin-left: ${e=>"right"===e.props.iconPosition&&"0.5em"};
                margin-right: ${e=>"left"===e.props.iconPosition&&"0.5em"};
                overflow: hidden;
                vertical-align: middle;

                path {
                    fill: ${e=>Uw(e.props.textColor||e.props.baseColor,(t=>t.makeBlackOrWhite(!e.props.textColor&&"fill"===e.props.mode)))};
                    transition: fill 0.15s ease-in-out;
                }
            }
        }
    }

    > div + span {
        display: flex;
        justify-content: center;
        margin-top: ${e=>.375*e.props.scale+"em"};
        text-align: center;
    }

    :not(:disabled) {
        cursor: pointer;
        opacity: 1;

        :hover {
            background-color: ${e=>"fill"===e.props.hover&&Uw(e.props.baseColor,(t=>t.manipulate((e=>e.darken(.05)),"fill"===e.props.mode)))||void 0};
            border-color: ${e=>"fill"===e.props.hover&&Uw(e.props.baseColor,(t=>t.manipulate((e=>e.darken(.1)),"fill"===e.props.mode)))||void 0};
            color: ${e=>"outline"===e.props.mode&&"fill"===e.props.hover&&Uw(e.props.baseColor,(e=>e.makeBlackOrWhite()))||void 0};
            box-shadow: 0 0 0 0.2rem ${e=>Uw(e.props.baseColor,(e=>e.manipulate((e=>e.alpha(.2)))))};

            svg {
                path {
                    fill: ${e=>"outline"===e.props.mode&&"fill"===e.props.hover&&Uw(e.props.baseColor,(e=>e.makeBlackOrWhite()))||void 0};
                }
            }
        }

        :focus {
            box-shadow: 0 0 0 0.2rem ${e=>Uw(e.props.baseColor,(e=>e.manipulate((e=>e.alpha(.5)))))};
        }

        :active {
            box-shadow: 0 0 0 0.2rem ${e=>Uw(e.props.baseColor,(e=>e.manipulate((e=>e.alpha(.5)))))};
            background-color: ${e=>"fill"===e.props.hover&&Uw(e.props.baseColor,(e=>e.manipulate((e=>e.darken(.15)))))};
        }
    }
`,Vw=e=>{const t=e.label?e.iconPosition||"left":"solo",i=e.disabled||!e.onClick&&!e.hyperlink;return(0,yy.jsxs)(Zw,Object.assign({ref:e.onAutoFocus,type:"button",props:{baseColor:e.styles.baseColor,textColor:e.styles.textColor,outlineSize:e.styles.outlineSize||1,roundness:e.styles.roundness,mode:e.styles.mode||"fill",hover:e.styles.hover||"fill",iconPosition:t,scale:e.styles.scale||1,group:e.styles.group,hasLabel:!(!e.icon&&!e.label),isImage:!(!e.image&&!e.emoji),size:e.size||"medium"},disabled:i,tabIndex:e.tabIndex,"aria-describedby":e.ariaDescribedBy,onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:t=>e.onTab&&"Tab"===t.key&&!t.shiftKey?(t.preventDefault(),void e.onTab()):e.onCancel&&"Tab"===t.key&&t.shiftKey?(t.preventDefault(),void e.onCancel()):void(e.onKeyDown&&e.onKeyDown(t)),onClick:t=>{t.stopPropagation(),e.hyperlink?window.open(e.hyperlink.url,`_${e.hyperlink.target||"self"}`,"noopener"):e.onClick&&e.onClick()}},{children:[(e.image||e.emoji)&&(0,yy.jsx)("div",Object.assign({style:{backgroundImage:e.image&&`url("${e.image}")`||void 0}},{children:e.emoji&&(0,yy.jsx)("span",{children:e.emoji},void 0)}),void 0),(e.icon||e.label)&&(0,yy.jsxs)("span",{children:[e.icon&&"right"!==t&&(0,yy.jsx)("span",{children:e.icon},void 0),e.label&&(0,yy.jsxs)("span",{children:[e.label,e.description&&(0,yy.jsx)("small",{children:e.description},void 0)]},void 0),e.icon&&"right"===t&&(0,yy.jsx)("span",{children:e.icon},void 0)]},void 0)]}),void 0)};var Ww={}.hasOwnProperty,Gw=/[ -,\.\/:-@\[-\^`\{-~]/,$w=/[ -,\.\/:-@\[\]\^`\{-~]/,Qw=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,qw=function e(t,i){"single"!=(i=function(e,t){if(!e)return t;var i={};for(var s in t)i[s]=Ww.call(e,s)?e[s]:t[s];return i}(i,e.options)).quotes&&"double"!=i.quotes&&(i.quotes="single");for(var s="double"==i.quotes?'"':"'",o=i.isIdentifier,n=t.charAt(0),r="",a=0,l=t.length;a<l;){var c=t.charAt(a++),u=c.charCodeAt(),h=void 0;if(u<32||u>126){if(u>=55296&&u<=56319&&a<l){var d=t.charCodeAt(a++);56320==(64512&d)?u=((1023&u)<<10)+(1023&d)+65536:a--}h="\\"+u.toString(16).toUpperCase()+" "}else h=i.escapeEverything?Gw.test(c)?"\\"+c:"\\"+u.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(c)?"\\"+u.toString(16).toUpperCase()+" ":"\\"==c||!o&&('"'==c&&s==c||"'"==c&&s==c)||o&&$w.test(c)?"\\"+c:c;r+=h}return o&&(/^-[-\d]/.test(r)?r="\\-"+r.slice(1):/\d/.test(n)&&(r="\\3"+n+" "+r.slice(1))),r=r.replace(Qw,(function(e,t,i){return t&&t.length%2?e:(t||"")+i})),!o&&i.wrap?s+r+s:r};qw.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},qw.version="3.0.0";var Xw=qw;const Jw=(e,t)=>{var i,s,o,n,r;const a=Xw((null===(i=e.navigation)||void 0===i?void 0:i.backgroundColor)||("rgb(0, 0, 0)"===t?"#f8f9fa":Uw(t,(e=>e.manipulate((e=>e.alpha(.1))))))),l=Xw((null===(s=e.navigation)||void 0===s?void 0:s.textColor)||(null===(o=e.navigation)||void 0===o?void 0:o.backgroundColor)&&Uw(null===(n=e.navigation)||void 0===n?void 0:n.backgroundColor,(e=>e.makeBlackOrWhite()))||t);return{backgroundColor:a,textColor:l,progressbarColor:Xw((null===(r=e.navigation)||void 0===r?void 0:r.progressbarColor)||l)}},Kw=(e,t)=>{var i,s,o,n,r,a,l,c,u,h,d,p;const m=Xw(e.background&&e.background.color||"transparent"),g=Uw(e.color||Uw(m,(e=>e.makeUnclear("#fff").makeBlackOrWhite())),(e=>e.makeUnclear("#000")));return Object.assign(Object.assign({},e),{direction:"horizontal"===e.direction?"horizontal":"vertical",verticalAlignment:e.verticalAlignment||"middle",background:{color:m,url:e.background&&e.background.url&&Xw(e.background.url,{quotes:"double"})||void 0,opacity:(null===(i=e.background)||void 0===i?void 0:i.color)&&(null===(s=e.background)||void 0===s?void 0:s.url)?dp.range(.01*tm(null===(o=e.background)||void 0===o?void 0:o.opacity,100),0,1):1,positioning:Xw(e.background&&e.background.positioning||"auto")},font:{family:Xw(e.font&&e.font.family||"sans-serif"),size:e.font&&e.font.size&&dp.range(tm(e.font.size,16),8,30)||16,sizeSmall:e.font&&e.font.sizeSmall&&dp.range(tm(e.font.sizeSmall,14),8,30)||14,color:g},inputs:{backgroundColor:Xw(e.inputs&&e.inputs.backgroundColor||"transparent"),borderColor:Xw(e.inputs&&e.inputs.borderColor||g),borderSize:e.inputs&&tm(e.inputs.borderSize,1)||1,roundness:null===(n=e.inputs)||void 0===n?void 0:n.roundness,textColor:Xw(e.inputs&&e.inputs.textColor||g),errorColor:Xw(e.inputs&&e.inputs.errorColor||"red"),scale:1.62},checkboxes:{backgroundColor:Xw(e.inputs&&e.inputs.backgroundColor||"transparent"),borderColor:Xw(e.inputs&&e.inputs.borderColor||g),borderSize:e.inputs&&tm(e.inputs.borderSize,1)||1,roundness:null===(r=e.inputs)||void 0===r?void 0:r.roundness,textColor:g,errorColor:Xw(e.inputs&&e.inputs.errorColor||"red"),scale:1,hideRequiredIndicator:e.hideRequiredIndicator||!1},radiobuttons:{backgroundColor:Xw(e.inputs&&e.inputs.backgroundColor||"transparent"),borderColor:Xw(e.inputs&&e.inputs.borderColor||g),borderSize:e.inputs&&tm(e.inputs.borderSize,1)||1,textColor:g,scale:1},matrix:{backgroundColor:Xw(e.inputs&&e.inputs.backgroundColor||"transparent"),borderColor:Xw(e.inputs&&e.inputs.borderColor||g),borderSize:e.inputs&&tm(e.inputs.borderSize,1)||1,textColor:g,errorColor:Xw(e.inputs&&e.inputs.errorColor||"red"),scale:1,hideRequiredIndicator:e.hideRequiredIndicator||!1},yesNo:{yesColor:Xw(e.inputs&&e.inputs.agreeColor||"green"),noColor:Xw(e.inputs&&e.inputs.declineColor||"red"),alignment:"horizontal",outlineSize:e.inputs&&tm(e.inputs.borderSize,1)||1,roundness:null===(a=e.inputs)||void 0===a?void 0:a.roundness,scale:1.62,margin:8},rating:{color:Xw(e.inputs&&e.inputs.selectionColor||g),scale:2},scale:{color:Xw(e.inputs&&e.inputs.selectionColor||g),outlineSize:e.inputs&&tm(e.inputs.borderSize,1)||1,roundness:null===(l=e.inputs)||void 0===l?void 0:l.roundness,scale:1.62,margin:8,labelColor:g},multipleChoice:{color:Xw(e.inputs&&e.inputs.selectionColor||g),outlineSize:e.inputs&&tm(e.inputs.borderSize,1)||1,roundness:null===(c=e.inputs)||void 0===c?void 0:c.roundness,scale:1.62,margin:8},pictureChoice:{color:Xw(e.inputs&&e.inputs.selectionColor||g),outlineSize:e.inputs&&tm(e.inputs.borderSize,1)||1,roundness:null===(u=e.inputs)||void 0===u?void 0:u.roundness,scale:1.62,margin:8},fileUpload:{backgroundColor:Xw(e.inputs&&e.inputs.backgroundColor||"transparent"),borderColor:Xw(e.inputs&&e.inputs.borderColor||g),borderSize:e.inputs&&tm(e.inputs.borderSize,1)||1,roundness:null===(h=e.inputs)||void 0===h?void 0:h.roundness,textColor:Xw(e.inputs&&e.inputs.textColor||g),errorColor:Xw(e.inputs&&e.inputs.errorColor||"red"),scale:1},buttons:{baseColor:Xw(e.buttons&&e.buttons.baseColor||g),outlineSize:e.inputs&&tm(e.inputs.borderSize,1)||1,roundness:null===(d=e.buttons)||void 0===d?void 0:d.roundness,mode:e.buttons&&"outline"===e.buttons.mode?"outline":"fill",textColor:e.buttons&&e.buttons.textColor&&Xw(e.buttons.textColor)||void 0,scale:1.62},finishButton:{baseColor:Xw(e.buttons&&(e.buttons.finishColor||e.buttons.baseColor)||"green"),outlineSize:e.inputs&&tm(e.inputs.borderSize,1)||1,roundness:null===(p=e.buttons)||void 0===p?void 0:p.roundness,textColor:e.buttons&&!e.buttons.finishColor&&e.buttons.textColor&&Xw(e.buttons.textColor)||void 0,mode:"fill",scale:1.62},navigation:"always"===e.showNavigation||t&&"auto"===em(e.showNavigation,"auto")?Jw(e,g):void 0,showProgressbar:sm(e.showProgressbar,!0),showSeparateSubmit:sm(e.showSeparateSubmit,!0),showPreviousButton:sm(e.showPreviousButton,!0),showScrollbar:"vertical"===e.direction&&!e.disableScrolling&&e.showScrollbar})};function ex(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}let tx=class extends Mf{isMatch(){const e=this.valueOf();if(e){const t=pp.lowercase(e.string),i=pp.lowercase((()=>{if(lf(this.props.match)){const e=this.variableFor(this.props.match);return e&&e.hasValue?e.string:""}return this.parseVariables(this.props.match||"")})());switch(this.props.mode){case"domain":case"not-domain":return i&&t.substr(t.lastIndexOf("@")+1)===i==("domain"===this.props.mode)||!1;case"address":case"not-address":return t===i==("address"===this.props.mode)||!1;case"defined":return""!==t;case"undefined":return""===t}}return!1}};ex([Bf],tx.prototype,"isMatch",null),tx=ex([Uf({type:"condition",identifier:"tripetto-block-email"})],tx);const ix=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,sx=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;class ox extends ff{constructor(){super(...arguments),this.emailSlot=Jp(this.valueOf("email")),this.required=this.emailSlot.slot.required||!1}validate(){return!this.emailSlot.string||("rfc822"===this.props.validation?ix:sx).test(this.emailSlot.value)}}ex([Yf],ox.prototype,"validate",null);const nx=(e,t)=>{void 0!==t&&e(t)},rx=(e,t,i)=>s=>{e(!0),i&&nx(t,i(s))},ax=(e,t,i)=>s=>{e(!1),i&&nx(t,i(s))},lx=e=>{e.current.id=setTimeout((()=>e.current.cb&&e.current.cb()),200)},cx=tw.input`
    appearance: none;
    outline: none;
    box-sizing: border-box;
    display: block;
    width: 100%;
    font-size: 1em;
    line-height: 1.5em;
    background-color: ${e=>Uw(e.props.error&&"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?e.props.errorColor:e.props.backgroundColor)};
    background-image: ${e=>e.props.error?`url("data:image/svg+xml;base64,${Yw(Uw(e.props.errorColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor))))}")`:void 0};
    background-repeat: no-repeat;
    background-size: ${8/7}em;
    background-position: right 0.375em center;
    border: ${e=>`${"transparent"===e.props.backgroundColor&&"transparent"===e.props.borderColor?0:e.props.borderSize}px solid ${Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)}`};
    color: ${e=>Uw(e.props.error?"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?Uw(e.props.errorColor,(e=>e.makeBlackOrWhite())):e.props.errorColor:e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
    border-radius: ${e=>Hp(e.props.roundness)?`${e.props.roundness}px`:"0.5em"};
    padding: ${e=>"transparent"===e.props.backgroundColor&&"transparent"===e.props.borderColor?"0":.375*e.props.scale+"em 0.75em"};
    padding-right: ${e=>e.props.error?8/7+.75+"em":void 0};
    margin: 0;
    opacity: 0.65;
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,
        opacity 0.15s ease-in-out;

    ::placeholder {
        color: ${e=>Uw(e.props.error?"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?Uw(e.props.errorColor,(e=>e.makeBlackOrWhite())):e.props.errorColor:e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
        opacity: 0.5;
        transition: color 0.15s ease-in-out opacity 0.15s ease-in-out;
    }

    :not(:disabled):not([readonly]) {
        opacity: 1;

        :hover {
            box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.2)))))}`||void 0};
        }

        :focus {
            background-color: ${e=>Uw(e.props.backgroundColor)};
            background-image: ${e=>e.props.errorVisible?void 0:"none"};
            border-color: ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)};
            color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
            box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.5)))))}`||void 0};
            ::placeholder {
                color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
                opacity: 0.3;
            }
        }
    }
`,ux=e=>{const t=e.value,i=(0,o.useRef)({duration:0,handle:0}),[s,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)("object"==typeof t?em(t.pristine):t||""),[l,c]="object"==typeof t?[s?r:t.string,s=>{Hm(i.current.handle),a(s);const o=dp.range(2*i.current.duration,16.666666666666668,1e3);i.current.handle=Rm((()=>{const o=Lp.precise;i.current.handle=0,i.current.update=()=>{i.current.duration=Lp.elapsed(o,!0),i.current.update=void 0},"url"===e.type&&s&&-1===s.toLowerCase().indexOf("://")?t.pristine=`https://${s}`:t.pristine=s||void 0}),o)}]:[r,a],[u,h]=(0,o.useState)(!!l),d=(0,o.useRef)();return(0,o.useEffect)((()=>{d.current&&!s&&(d.current.value=l)}),[l]),(0,o.useEffect)((()=>()=>{Hm(i.current.handle)}),[]),i.current.update&&i.current.update(),(0,yy.jsx)(cx,{id:e.id,ref:t=>{e.onAutoFocus&&e.onAutoFocus(t),d.current=t},type:e.type||"text",list:e.list,tabIndex:e.tabIndex,placeholder:e.placeholder,required:e.required||!1,disabled:e.disabled||!1,readOnly:e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||!1,maxLength:e.maxLength||void 0,defaultValue:l,name:e.autoComplete,autoComplete:e.autoComplete||"off",inputMode:e.inputMode||"text","aria-describedby":e.ariaDescribedBy,props:{backgroundColor:e.styles.backgroundColor||"transparent",borderColor:e.styles.borderColor||"transparent",borderSize:e.styles.borderSize||1,roundness:e.styles.roundness,textColor:e.styles.textColor,errorColor:e.styles.errorColor,errorVisible:u,error:e.error||!1,scale:e.styles.scale||1},onChange:t=>{c(t.target.value),h(!0),e.onChange&&nx(c,e.onChange(t.target.value))},onFocus:rx(n,c,e.onFocus),onBlur:ax(n,c,e.onBlur),onKeyDown:t=>{"Enter"===t.key&&e.onSubmit?(t.preventDefault(),e.onSubmit()):"Escape"===t.key?t.currentTarget.blur():"Tab"===t.key&&(t.shiftKey?e.onCancel&&(t.preventDefault(),e.onCancel()):e.onSubmit&&(t.preventDefault(),e.onSubmit()))}},void 0)},hx=e=>ux(Object.assign(Object.assign({type:"email",inputMode:"email",autoComplete:"email"},e),{placeholder:e.placeholder||"@"}));let dx=class extends ox{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(hx,{id:e.id,styles:e.styles.inputs,value:this.emailSlot,required:this.required,error:e.isFailed,tabIndex:e.tabIndex,placeholder:e.placeholder,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function px(e,t){const i=e.getBoundingClientRect();return dp.inRange(i.left,t.current.left,t.current.left+t.current.width)&&dp.inRange(i.right,t.current.left,t.current.left+t.current.width)&&dp.inRange(i.top,t.current.top,t.current.top+t.current.height)&&dp.inRange(i.bottom,t.current.top,t.current.top+t.current.height)}dx=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-email"})],dx);const mx={},gx={};let bx=0;const fx=()=>"boolean"==typeof ym(gx,(e=>!e)),yx=tw.div`
    position: absolute;
    left: ${e=>e.props.isPage||"live"!==e.props.view?"32px":0};
    top: ${e=>e.props.isPage||"live"!==e.props.view?"8px":0};
    height: ${32}px;
    transform: ${e=>!e.props.isActivated&&`translate${"horizontal"===e.props.styles.direction?"X":"Y"}(16px)`};
    opacity: ${e=>e.props.isActivated?.6:0};
    pointer-events: ${e=>e.props.isActivated?"auto":"none"};
    transition: opacity 0.3s ease-out 0.2s, transform 0.3s ease-out 0.2s;
    cursor: pointer;
    font-size: 12px;
    user-select: none;

    @media (${e=>"live"===e.props.view?"max-device-width":"max-width"}: ${500}px) {
        left: ${e=>e.props.isPage||"live"!==e.props.view?"16px":0};
    }

    > svg {
        width: 16px;
        height: 16px;
        position: relative;
        top: ${e=>(e.props.styles.direction,3)}px;
        margin-right: 4px;
    }

    &:hover {
        opacity: ${e=>e.props.isActivated?1:0};
    }
`,vx=e=>(0,yy.jsxs)(yx,Object.assign({props:e,onClick:e.onClick},{children:[(0,yy.jsx)("svg",Object.assign({viewBox:"0 0 20 20"},{children:"horizontal"===e.styles.direction?(0,yy.jsx)("path",{fill:e.styles.font.color,d:"M0.646 10.146l6-6c0.195-0.195 0.512-0.195 0.707 0s0.195 0.512 0 0.707l-5.146 5.146h16.293c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5h-16.293l5.146 5.146c0.195 0.195 0.195 0.512 0 0.707-0.098 0.098-0.226 0.146-0.354 0.146s-0.256-0.049-0.354-0.146l-6-6c-0.195-0.195-0.195-0.512 0-0.707z"},void 0):(0,yy.jsx)("path",{fill:e.styles.font.color,d:"M9.146 0.646l-6 6c-0.195 0.195-0.195 0.512 0 0.707s0.512 0.195 0.707 0l5.146-5.146v16.293c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-16.293l5.146 5.146c0.195 0.195 0.512 0.195 0.707 0 0.098-0.098 0.146-0.226 0.146-0.354s-0.049-0.256-0.146-0.354l-6-6c-0.195-0.195-0.512-0.195-0.707 0z"},void 0)}),void 0),e.l10n.pgettext("runner#1| Buttons","Back")]}),void 0),Mx=tw.div`
    display: block;
    color: ${e=>Uw(e.props.styles.font.color,(e=>e.manipulate((e=>e.alpha(.4)))))};
    margin-top: ${1}em !important;
    font-size: 0.85em;
    text-align: ${e=>e.props.alignment||"left"};
    opacity: ${e=>!Up(e.props.visible)||e.props.visible?1:0};
    transition: ${e=>"color 0.15s ease-in-out,"+(e.props.visible?"opacity 1s ease-out 0.5s":"opacity 0.3s ease-out")};
    pointer-events: ${e=>!Up(e.props.visible)||e.props.visible?"auto":"none"};
    user-select: none;

    > a {
        text-decoration: none !important;
        transition: color 0.5s;

        &:hover {
            color: ${e=>e.props.styles.font.color} !important;
            text-decoration: none !important;
        }
    }
`,wx=e=>e.styles.noBranding||"preview"===e.view?(0,yy.jsx)(yy.Fragment,{},void 0):(0,yy.jsx)(Mx,Object.assign({props:e},{children:(0,yy.jsx)("a",Object.assign({href:"https://tripetto.com/your-tripetto-experience/?utm_source=tripetto_runner_autoscroll&utm_medium=tripetto_runners&utm_campaign=tripetto_branding&utm_content=form",target:"_blank"},{children:e.l10n.pgettext("runner:autoscroll","Powered by Tripetto")}),void 0)}),void 0),xx=tw.div`
    display: ${e=>e.props.isMessage||"horizontal"!==e.props.styles.direction?"block":"flex"};
    min-width: 100%;
    flex-direction: ${e=>!e.props.isMessage&&"horizontal"===e.props.styles.direction&&"row"};
    flex-wrap: ${e=>!e.props.isMessage&&"horizontal"===e.props.styles.direction&&"nowrap"};
    align-items: ${e=>!e.props.isMessage&&"horizontal"===e.props.styles.direction&&"start"};
    align-self: ${e=>e.props.center&&"center"};
    opacity: ${e=>sm(e.props.isCalculated,!0)?1:0};
    font-size: ${e=>e.props.size&&`${e.props.size}px`||void 0};
    line-height: ${e=>e.props.size?"1.5em":void 0};

    > div {
        color: ${e=>e.props.styles.font.color};
        flex: ${e=>!e.props.isMessage&&"horizontal"===e.props.styles.direction&&"0 0 calc(100vw)"};
        transition: color 0.15s ease-in-out;
    }
`,Sx=tw.div`
    display: block;
    position: relative;
    contain: content;
    opacity: ${e=>e.props.isMessage||e.props.isActivated&&!e.props.isLocked?1:e.props.isHidden?0:.2};
    pointer-events: ${e=>e.props.isMessage||e.props.isActivated&&!e.props.isLocked?"auto":"none"};
    transition: opacity 0.5s, color 0.15s ease-in-out !important;
    user-select: ${e=>!e.props.isMessage&&e.props.isActivated?"auto":"none"};
    padding-left: ${e=>(e.props.isPage||"live"!==e.props.view||e.props.styles.showEnumerators?32:5)+"px"};
    padding-right: ${e=>(e.props.isPage||"live"!==e.props.view||e.props.styles.showScrollbar?32:5)+"px"};
    padding-top: ${e=>32+(e.props.isPage||"live"!==e.props.view?8:0)+"px"};
    padding-bottom: ${e=>32+(e.props.isPage||"live"!==e.props.view?8:0)+"px"};
    z-index: 1;

    @media (${e=>"live"===e.props.view?"max-device-width":"max-width"}: ${500}px) {
        padding-left: ${e=>(e.props.isPage||"live"!==e.props.view||e.props.styles.showEnumerators?16:5)+"px"};
        padding-right: ${e=>(e.props.isPage||"live"!==e.props.view||e.props.styles.showScrollbar?16:5)+"px"};
    }

    &:first-child {
        padding-top: ${e=>!e.props.isPage&&"live"===e.props.view&&"5px"};
    }

    &:last-child {
        padding-bottom: ${e=>!e.props.isPage&&"live"===e.props.view&&!e.props.hasBanner&&(e.props.isMessage||!e.props.styles.navigation)&&"5px"};
    }

    > div:first-child {
        max-width: ${e=>"horizontal"===e.props.styles.direction&&e.props.isPage&&"1076px"};

        > * {
            margin-top: ${1}em !important;

            &:first-child {
                margin-top: 0 !important;
            }
        }

        > h2 + p {
            margin-top: ${.5}em !important;
        }

        > h2 + h3 {
            margin-top: ${.5}em !important;
        }

        > h3 + p {
            margin-top: ${.5}em !important;
        }
    }

    > div:nth-child(2) {
        max-width: ${e=>"horizontal"===e.props.styles.direction&&e.props.isPage&&"1140px"};
    }

    > div {
        margin-left: ${e=>"horizontal"===e.props.styles.direction&&e.props.isPage&&"auto"};
        margin-right: ${e=>"horizontal"===e.props.styles.direction&&e.props.isPage&&"auto"};
    }
`,Ix=tw.div`
    position: absolute;
    left: ${e=>"live"!==e.props.view||e.props.isPage?0:(e.props.styles.showEnumerators?32:5)+"px"};
    top: 0;
    right: 0;
    bottom: 0;
    pointer-events: ${e=>e.props.isActivated?"none":"auto"};
    cursor: default;

    ${Mx} {
        position: absolute;
        bottom: ${e=>e.props.isPage||"live"!==e.props.view?"8px":0};
        left: ${e=>e.props.isPage||"live"!==e.props.view?"32px":void 0};

        > a {
            position: relative;
            top: 0.1em;
        }

        @media (${e=>"live"===e.props.view?"max-device-width":"max-width"}: ${500}px) {
            left: ${e=>e.props.isPage||"live"!==e.props.view?"16px":void 0};
        }
    }
`,kx=e=>(0,yy.jsxs)(Sx,Object.assign({ref:e.element,"data-block":e.identifier,props:Object.assign(Object.assign({},e),{hasBanner:e.l10n&&e.onActivate&&!e.styles.navigation&&!e.styles.noBranding&&"preview"!==e.view}),style:{width:e.width,top:e.top}},{children:[(0,yy.jsx)("div",{children:e.children},void 0),e.l10n&&e.onActivate&&(0,yy.jsxs)(Ix,Object.assign({props:e,onClick:!e.isActivated&&!e.isHidden&&e.onActivate||void 0},{children:[e.styles.showPreviousButton&&e.onPrevious&&(0,yy.jsx)(vx,{l10n:e.l10n,styles:e.styles,view:e.view,isPage:e.isPage,isActivated:e.isActivated||!1,onClick:e.onPrevious},void 0),!e.styles.navigation&&(0,yy.jsx)(wx,{l10n:e.l10n,styles:e.styles,view:e.view,alignment:"left",visible:e.showBanner},void 0)]}),void 0)]}),void 0),Nx=tw.h2`
    display: block;
    margin: 0;
    padding: 0;
    font-weight: bold;
    font-size: 2em;
    line-height: 1.2em;
    text-align: ${e=>e.props&&e.props.alignment||"left"};
    user-select: none;
`,_x=tw.span`
    font-size: 14px;
    font-weight: normal;
    line-height: 1em;
    display: inline-block;
    width: 32px;
    margin-left: -32px;
    text-align: center;

    @media (${e=>"live"===e.props.view?"max-device-width":"max-width"}: ${500}px) {
        display: none;
    }
`,Lx=tw.p`
    margin: 0;
    padding: 0;
    font-size: 1em;
    text-align: ${e=>e.props&&e.props.alignment||"left"};
    user-select: none;
`,Cx=tw.small`
    display: block;
    margin: 0;
    padding: 0;
    font-size: 0.8em;
    user-select: none;
    cursor: default;
`,Dx=tw.nav`
    margin-top: 0 !important;
    min-height: ${45/16}em;
    display: flex;
    flex-wrap: wrap;
    justify-content: ${e=>e.props.alignment};
    opacity: ${e=>e.props.isActivated?1:0};
    transform: ${e=>e.props.isActivated?"none":"horizontal"===e.props.styles.direction?"translateX(-1em)":"translateY(1em)"};
    transition: opacity 0.3s ease-out 0.2s, transform 0.3s ease-out 0.2s;

    > * {
        margin-top: ${.5}em !important;
        margin-left: ${1}em;

        &:first-child {
            margin-left: 0;
        }
    }

    &:first-child > * {
        margin-top: 0 !important;
    }
`,Ax=e=>(0,yy.jsx)(Dx,Object.assign({props:{styles:e.styles,isActivated:sm(e.isActivated,!0),alignment:e.alignment||"left"}},{children:e.children}),void 0),jx=(0,yy.jsxs)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:[(0,yy.jsx)("path",{d:"M18.5 9.382l-2.606-5.211c-0.328-0.657-1.16-1.171-1.894-1.171h-2.5c-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5h2.5c0.362 0 0.838 0.295 1 0.618l2.606 5.211c0.028 0.055 0.055 0.117 0.081 0.183-0.061-0.008-0.123-0.012-0.187-0.012h-5c-0.276 0-0.5 0.224-0.5 0.5 0 1.378-1.122 2.5-2.5 2.5s-2.5-1.122-2.5-2.5c0-0.276-0.224-0.5-0.5-0.5h-5c-0.063 0-0.125 0.004-0.187 0.012 0.026-0.066 0.053-0.128 0.081-0.183l2.606-5.211c0.162-0.323 0.638-0.618 1-0.618h2.5c0.276 0 0.5-0.224 0.5-0.5s-0.224-0.5-0.5-0.5h-2.5c-0.734 0-1.566 0.514-1.894 1.171l-2.606 5.211c-0.28 0.561-0.5 1.491-0.5 2.118v4c0 0.827 0.673 1.5 1.5 1.5h16c0.827 0 1.5-0.673 1.5-1.5v-4c0-0.627-0.22-1.557-0.5-2.118zM18 15.5c0 0.276-0.224 0.5-0.5 0.5h-16c-0.276 0-0.5-0.224-0.5-0.5v-4c0-0.276 0.224-0.5 0.5-0.5h4.536c0.243 1.694 1.704 3 3.464 3s3.221-1.306 3.464-3h4.536c0.276 0 0.5 0.224 0.5 0.5v4z"},void 0),(0,yy.jsx)("path",{d:"M11.854 6.646c-0.195-0.195-0.512-0.195-0.707 0l-1.146 1.146v-4.293c0-0.276-0.224-0.5-0.5-0.5s-0.5 0.224-0.5 0.5v4.293l-1.146-1.146c-0.195-0.195-0.512-0.195-0.707 0s-0.195 0.512 0 0.707l2 2c0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146l2-2c0.195-0.195 0.195-0.512-0-0.707z"},void 0)]}),void 0),Tx=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"M10.707 10.5l8.646-8.646c0.195-0.195 0.195-0.512 0-0.707s-0.512-0.195-0.707 0l-8.646 8.646-8.646-8.646c-0.195-0.195-0.512-0.195-0.707 0s-0.195 0.512 0 0.707l8.646 8.646-8.646 8.646c-0.195 0.195-0.195 0.512 0 0.707 0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146l8.646-8.646 8.646 8.646c0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146c0.195-0.195 0.195-0.512 0-0.707l-8.646-8.646z"},void 0)}),void 0),zx=e=>{var t;const[i,s]=(0,o.useState)((null===(t=e.controller)||void 0===t?void 0:t.emailAddress)||""),[n,r]=(0,o.useState)(!1),a=function(e){return e&&/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)||!1}(i),l=!!e.controller;return(0,yy.jsxs)(kx,Object.assign({element:e.onElement("pause"),styles:e.styles,view:e.view,isPage:e.isPage,isActivated:l,isHidden:!e.controller},{children:[(0,yy.jsx)(Nx,{children:e.l10n.pgettext("runner#8| Pause conversation","Pause this conversation")},void 0),(0,yy.jsx)(Lx,{children:e.l10n.pgettext("runner#8| Pause conversation","Receive a link by email to resume later on any device, right where you left off.")},void 0),(0,yy.jsx)(hx,{styles:e.styles.inputs,required:!0,disabled:!e.controller||e.controller.isCompleting,value:i,placeholder:e.l10n.pgettext("runner#8| Pause conversation","Your email address..."),error:n&&!a,onChange:s,onFocus:()=>r(!0),onAutoFocus:e.onAutoFocus({key:"pause"},l),onSubmit:()=>a&&e.controller&&e.controller.complete(i),onCancel:()=>e.controller&&e.controller.cancel()},void 0),(0,yy.jsxs)(Ax,Object.assign({styles:e.styles,isActivated:!0},{children:[(0,yy.jsx)(Vw,{styles:e.styles.buttons,icon:jx,label:e.controller&&e.controller.isCompleting?e.l10n.pgettext("runner#3| Status information","Pausing..."):e.l10n.pgettext("runner#8| Pause conversation","Receive resume link"),disabled:!e.controller||e.controller.isCompleting||!a,onClick:()=>e.controller&&e.controller.complete(i)},void 0),(0,yy.jsx)(Vw,{styles:Object.assign(Object.assign({},e.styles.buttons),{mode:"outline"}),icon:Tx,disabled:!e.controller||e.controller.isCompleting,label:e.l10n.pgettext("runner#8| Pause conversation","Cancel pausing"),onClick:()=>e.controller&&e.controller.cancel()},void 0)]}),void 0)]}),"pause")},Ex=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"M5.5 17.5c-0.128 0-0.256-0.049-0.354-0.146l-5-5c-0.195-0.195-0.195-0.512 0-0.707s0.512-0.195 0.707 0l4.646 4.646 13.646-13.646c0.195-0.195 0.512-0.195 0.707 0s0.195 0.512 0 0.707l-14 14c-0.098 0.098-0.226 0.146-0.354 0.146z"},void 0)}),void 0),Ox=tw.div`
    display: block;
    color: ${e=>Uw(e.props.styles.font.color,(e=>e.manipulate((e=>e.alpha(.4)))))};
    transition: color 0.15s ease-in-out;
    align-self: center;
    font-size: 0.85em;
    user-select: none;
`,Px=e=>(0,yy.jsx)(Ox,Object.assign({props:e},{children:e.l10n.pgettext("runner:autoscroll","Disabled in preview mode")}),void 0),Rx=e=>{const t="submit"===e.active;return(0,yy.jsx)(kx,Object.assign({element:e.onElement("submit"),l10n:e.l10n,styles:e.styles,view:e.view,isPage:e.isPage,isActivated:t,isHidden:e.styles.hideUpcoming&&!t,width:e.width,top:e.offset,onActivate:e.onActivate,onPrevious:e.onPrevious},{children:(0,yy.jsxs)(Ax,Object.assign({styles:e.styles,isActivated:!0},{children:[(0,yy.jsx)(Vw,{styles:e.styles.finishButton,disabled:"finishing"===e.status||"pausing"===e.status||"evaluating"===e.status,icon:Ex,label:"finishing"===e.status?e.l10n.pgettext("runner#3| Status information","Submitting..."):e.l10n.pgettext("runner#1| Buttons","Submit"),onClick:"preview"===e.view?()=>{}:e.onSubmit,onAutoFocus:e.onAutoFocus({key:"submit"},t),onTab:e.onTab,onCancel:e.onPrevious},void 0),"preview"===e.view&&(0,yy.jsx)(Px,{l10n:e.l10n,styles:e.styles},void 0)]}),void 0)}),"submit")},Hx=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"M19.354 10.146l-6-6c-0.195-0.195-0.512-0.195-0.707 0s-0.195 0.512 0 0.707l5.146 5.146h-16.293c-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5h16.293l-5.146 5.146c-0.195 0.195-0.195 0.512 0 0.707 0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146l6-6c0.195-0.195 0.195-0.512 0-0.707z"},void 0)}),void 0),Fx=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"M9.854 19.354l6-6c0.195-0.195 0.195-0.512 0-0.707s-0.512-0.195-0.707 0l-5.146 5.146v-16.293c0-0.276-0.224-0.5-0.5-0.5s-0.5 0.224-0.5 0.5v16.293l-5.146-5.146c-0.195-0.195-0.512-0.195-0.707 0-0.098 0.098-0.146 0.226-0.146 0.354s0.049 0.256 0.146 0.354l6 6c0.195 0.195 0.512 0.195 0.707 0z"},void 0)}),void 0),Ux=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 5800 5800"},{children:(0,yy.jsx)("path",{d:"M2300 4700l0 -3600c0,-110 -90,-200 -200,-200l-600 0c-113,0 -200,88 -200,200l0 3600c0,110 90,200 200,200l600 0c110,0 200,-90 200,-200zm200 -3600l0 3600c0,220 -180,400 -400,400l-600 0c-220,0 -400,-180 -400,-400l0 -3600c0,-220 180,-400 400,-400l600 0c220,0 400,180 400,400zm2000 3600l0 -3600c0,-110 -90,-200 -200,-200l-600 0c-110,0 -200,90 -200,200l0 3600c0,110 90,200 200,200l600 0c110,0 200,-90 200,-200zm200 -3600l0 3600c0,220 -180,400 -400,400l-600 0c-220,0 -400,-180 -400,-400l0 -3600c0,-220 180,-400 400,-400l600 0c220,0 400,180 400,400z"},void 0)}),void 0),Bx=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"M19.854 8.646c-0.195-0.195-0.512-0.195-0.707 0l-1.149 1.149c-0.051-2.060-0.878-3.99-2.341-5.452-1.511-1.511-3.52-2.343-5.657-2.343s-4.146 0.832-5.657 2.343-2.343 3.52-2.343 5.657 0.832 4.146 2.343 5.657 3.52 2.343 5.657 2.343c2.974 0 5.686-1.635 7.077-4.266 0.129-0.244 0.036-0.547-0.208-0.676s-0.547-0.036-0.676 0.208c-1.217 2.303-3.59 3.734-6.193 3.734-3.86 0-7-3.14-7-7s3.14-7 7-7c3.789 0 6.885 3.027 6.997 6.789l-1.143-1.143c-0.195-0.195-0.512-0.195-0.707 0s-0.195 0.512 0 0.707l2 2c0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146l2-2c0.195-0.195 0.195-0.512 0-0.707z"},void 0)}),void 0),Yx=tw.div`
    display: block;
    margin-top: ${1}em;

    * + * {
        margin-left: ${1}em;
    }
`,Zx=e=>{const[t,i]=(0,o.useState)(!1);return(0,yy.jsxs)(yy.Fragment,{children:[(0,yy.jsx)("b",{children:e.l10n.pgettext("runner#9| Errors|Submit error","The form is outdated.")},void 0),(0,yy.jsx)("br",{},void 0),e.onReload?e.l10n.pgettext("runner#9| Errors|Outdated error","It seems the form is changed by the owner while you were filling in the form. Your data cannot be processed, but you can try to reload the new version of the form while maintaining the data you've filled in. Click the reload button to try this. Please check your data after reloading and then submit again."):e.l10n.pgettext("runner#9| Errors|Outdated error","It seems the form is changed by the owner while you were filling in the form. Your data cannot be processed. Try reloading the form."),(0,yy.jsxs)(Yx,{children:[e.onReload&&(0,yy.jsx)(Vw,{styles:{baseColor:Uw(e.styles.inputs.errorColor,(e=>e.makeBlackOrWhite())),mode:"outline"},label:e.l10n.pgettext("runner#1| Buttons","Reload"),icon:Bx,disabled:t,onClick:()=>{i(!0),e.onReload()}},void 0),(0,yy.jsx)(Vw,{styles:{baseColor:Uw(e.styles.inputs.errorColor,(e=>e.makeBlackOrWhite())),mode:"outline"},label:e.l10n.pgettext("runner#1| Buttons","Discard"),icon:Tx,onClick:e.onDiscard},void 0)]},void 0)]},void 0)},Vx=tw.div`
    display: block;
    margin-top: ${1}em;

    * + * {
        margin-left: ${1}em;
    }
`,Wx=e=>(0,yy.jsxs)(yy.Fragment,{children:[(0,yy.jsx)("b",{children:e.l10n.pgettext("runner#9| Errors|Submit error","Your data is rejected.")},void 0),(0,yy.jsx)("br",{},void 0),e.l10n.pgettext("runner#9| Errors|Rejected error","Unfortunately, your data is marked as invalid and therefore rejected. If you believe this is a mistake, please contact the form owner. We're sorry for the inconvenience."),(0,yy.jsx)(Vx,{children:(0,yy.jsx)(Vw,{styles:{baseColor:Uw(e.styles.inputs.errorColor,(e=>e.makeBlackOrWhite())),mode:"outline"},label:e.l10n.pgettext("runner#1| Buttons","Discard"),icon:Tx,onClick:e.onDiscard},void 0)},void 0)]},void 0),Gx=tw.div`
    display: block;
    margin-top: ${1}em;

    * + * {
        margin-left: ${1}em;
    }
`,$x=e=>(0,yy.jsxs)(yy.Fragment,{children:[(0,yy.jsx)("b",{children:e.l10n.pgettext("runner#9| Errors|Submit error","Something went wrong while submitting your conversation.")},void 0),(0,yy.jsx)("br",{},void 0),e.l10n.pgettext("runner#9| Errors|Connection error","Please check your connection and try again (for the techies: The error console of your browser might contain more technical information about what went wrong)."),(0,yy.jsxs)(Gx,{children:[(0,yy.jsx)(Vw,{styles:{baseColor:Uw(e.styles.inputs.errorColor,(e=>e.makeBlackOrWhite())),mode:"outline"},label:e.l10n.pgettext("runner#1| Buttons","Retry"),icon:Bx,onClick:e.onRetry},void 0),(0,yy.jsx)(Vw,{styles:{baseColor:Uw(e.styles.inputs.errorColor,(e=>e.makeBlackOrWhite())),mode:"outline"},label:e.l10n.pgettext("runner#1| Buttons","Discard"),icon:Tx,onClick:e.onDiscard},void 0)]},void 0)]},void 0),Qx=tw.div`
    display: block;
    margin-top: ${1}em;
`,qx=e=>(0,yy.jsxs)(yy.Fragment,{children:[(0,yy.jsx)("b",{children:e.l10n.pgettext("runner#9| Errors|Pausing error","Something went wrong while pausing your conversation.")},void 0),(0,yy.jsx)("br",{},void 0),e.l10n.pgettext("runner#9| Errors|Connection error","Please check your connection and try again (for the techies: The error console of your browser might contain more technical information about what went wrong)."),(0,yy.jsx)(Qx,{children:(0,yy.jsx)(Vw,{styles:{baseColor:Uw(e.styles.inputs.errorColor,(e=>e.makeBlackOrWhite())),mode:"outline"},label:e.l10n.pgettext("runner:autoscroll","Discard"),icon:Tx,onClick:e.onDiscard},void 0)},void 0)]},void 0),Xx=tw.div`
    display: block;
    color: ${e=>e.props.styles.font.color};
    transition: color 0.15s ease-in-out;
    align-self: center;
    font-size: 0.85em;
    user-select: none;
`,Jx=e=>(0,yy.jsx)(Xx,Object.assign({props:e},{children:e.l10n.pgettext("runner#3| Status information"," One moment please...")}),void 0),Kx=tw.div`
    position: fixed;
    left: 32px;
    right: 32px;
    top: 32px;
    display: flex;
    justify-content: center;
    opacity: ${e=>e.props.visible?1:0};
    pointer-events: ${e=>e.props.visible?"auto":"none"};
    transform: ${e=>e.props.visible?"translateY(0)":"translateY(-100px)"};
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
    z-index: 2;

    > div {
        box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.25);
        cursor: pointer;
        background-color: ${e=>Uw(e.props.styles.inputs.errorColor,(e=>e.manipulate((e=>e.alpha(.85)))))};
        color: ${e=>Uw(e.props.styles.inputs.errorColor,(e=>e.makeBlackOrWhite()))};
        transition: background-color 0.15s ease-in-out, color 0.15s ease-in-out;
        padding: 0.7em;
        border-radius: 0.5em;
        user-select: none;
    }
`,eS=e=>(0,yy.jsx)(Kx,Object.assign({props:{styles:e.styles,visible:!!(e.error||e.failed>0)},onClick:e.onClick},{children:(0,yy.jsx)("div",{children:e.error||e.l10n.npgettext("runner#9| Errors|Input error","%1 item requires your attention! Click to fix.","%1 items require your attention! Click to fix.",e.failed||1)},void 0)}),void 0),tS=(e,t,i,s,o,n)=>{const r={offset:0,size:0,height:s.height};let a=0,l=0,c=0;if(lm(i,(i=>{"horizontal"===t.direction&&(a+=i.width,"top"!==t.verticalAlignment&&((r.offsets||(r.offsets={}))[i.key]=i.height<e.height?dp.floor((e.height-i.height)/("bottom"===t.verticalAlignment?1:2)):0)),"vertical"===t.direction&&(l+=i.height,i.height>r.height&&(r.height=i.height),(!c||i.height<c)&&(c=i.height))})),0!==l||0!==a){if("vertical"===t.direction&&l>0){const s=i[0],o=i[i.length-1],n=t.verticalAlignment;if(i.length>1&&"bottom"!==n&&o&&o.height<e.height&&(r.size=l+(e.height-o.height)/("top"===n?1:2)),"bottom"===n){const t=s.height<e.height?dp.floor(e.height-s.height):0,o=e.height-c/2;let n=t-e.scrollTop;const a=i.length>1&&ym(i,(e=>!(!(e.isFirst||o>=n)||!(e.isLast||o<n+e.height))||(n+=e.height,!1)))||s;r.offset=t,r.active=a.key}else if("top"===n){let t=0;const o=i.length>1&&ym(i,(s=>!(!(s.isFirst||e.scrollTop>=t-s.height/2)||!(s.isLast||e.scrollTop<dp.max(t+s.height/2,t+s.height-i[s.index+1].height/2)))||(t+=s.height,!1)))||s;r.active=o.key}else{const t=e.height/2,o=s.height<e.height?dp.floor((e.height-s.height)/2):0;let n=o-e.scrollTop;const a=i.length>1&&ym(i,(e=>!(!(e.isFirst||t>=n)||!(e.isLast||t<n+e.height))||(n+=e.height,!1)))||s;r.offset=o,r.active=a.key}}else if("horizontal"===t.direction&&a>0){let t=-e.scrollLeft;const s=i[0],o=e.width/2;r.active=(i.length>1&&ym(i,(e=>!(!(e.isFirst||o>=t)||!(e.isLast||o<t+e.width))||(t+=e.width,!1)))||s).key}n&&n.current&&am(s,r,!0)||(n&&!n.current&&(n.current=!0),o(r))}},iS=(e,t,i,s)=>{if(e.scrollTo){const o=ym(i,(e=>e.key===s));if(o&&o.height>0){const i="bottom"===t.verticalAlignment?1:2,s="horizontal"===t.direction?o.left:0,n="horizontal"===t.direction?0:"top"===t.verticalAlignment||o.height>=e.height?o.top:o.top+o.height/i-e.height/i;return e.scrollTo(s,n),!0}}return!1},sS=(e,t,i,s,o)=>{const n=ym(i,(e=>e.key===o));return!!n&&("previous"!==s||!n.isFirst)&&("next"!==s||!n.isLast)&&iS(e,t,i,i[n.index+("previous"===s?-1:1)].key)},oS=(e,t,i,s)=>sS(e,t,i,"previous",s),nS=(e,t,i,s)=>sS(e,t,i,"next",s);class rS{static get id(){return""+ ++this.counter}static init(){return this.initialized||(this.initialized=!0,navigator.userAgent.toLowerCase().indexOf("firefox")>-1?Vm((()=>{this.ready=!0,this.load()})):this.ready=!0),!this.ready}static load(){if(!this.init()&&Vp(this.requests)>0){const e=ym(this.requests,(e=>!!e.context.current));if(e){const t=ym(this.requests,(e=>e.loading||!1));if(t&&t.id!==e.id)return;const i=e.ref.current,s=e.url?{custom:{families:[e.font],urls:[e.url]}}:{google:{families:[e.font]}};e.loading=!0,function(e,t){return function(){function i(e,t,i){return e.call.apply(e.bind,arguments)}function s(e,t,i){if(!e)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,s),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function o(e,t,n){return(o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:s).apply(null,arguments)}var n=Date.now||function(){return+new Date};function r(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var a=!!e.FontFace;function l(e,t,i,s){if(t=e.c.createElement(t),i)for(var o in i)i.hasOwnProperty(o)&&("style"==o?t.style.cssText=i[o]:t.setAttribute(o,i[o]));return s&&t.appendChild(e.c.createTextNode(s)),t}function c(e,t,i){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(i,e.lastChild)}function u(e){e.parentNode&&e.parentNode.removeChild(e)}function h(e,t,i){t=t||[],i=i||[];for(var s=e.className.split(/\s+/),o=0;o<t.length;o+=1){for(var n=!1,r=0;r<s.length;r+=1)if(t[o]===s[r]){n=!0;break}n||s.push(t[o])}for(t=[],o=0;o<s.length;o+=1){for(n=!1,r=0;r<i.length;r+=1)if(s[o]===i[r]){n=!0;break}n||t.push(s[o])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function d(e,t){for(var i=e.className.split(/\s+/),s=0,o=i.length;s<o;s++)if(i[s]==t)return!0;return!1}function p(e,t,i){function s(){u&&o&&n&&(u(r),u=null)}t=l(e,"link",{rel:"stylesheet",href:t,media:"all"});var o=!1,n=!0,r=null,u=i||null;a?(t.onload=function(){o=!0,s()},t.onerror=function(){o=!0,r=Error("Stylesheet failed to load"),s()}):setTimeout((function(){o=!0,s()}),0),c(e,"head",t)}function m(e,t,i,s){var o=e.c.getElementsByTagName("head")[0];if(o){var n=l(e,"script",{src:t}),r=!1;return n.onload=n.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i&&i(null),n.onload=n.onreadystatechange=null,"HEAD"==n.parentNode.tagName&&o.removeChild(n))},o.appendChild(n),setTimeout((function(){r||(r=!0,i&&i(Error("Script load timeout")))}),s||5e3),n}return null}function g(){this.a=0,this.c=null}function b(e){return e.a++,function(){e.a--,y(e)}}function f(e,t){e.c=t,y(e)}function y(e){0==e.a&&e.c&&(e.c(),e.c=null)}function v(e){this.a=e||"-"}function M(e,t){this.c=e,this.f=4,this.a="n";var i=(t||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function w(e){var t=[];e=e.split(/,\s*/);for(var i=0;i<e.length;i++){var s=e[i].replace(/['"]/g,"");-1!=s.indexOf(" ")||/^\d/.test(s)?t.push("'"+s+"'"):t.push(s)}return t.join(",")}function x(e){return e.a+e.f}function S(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function I(e){var t=4,i="n",s=null;return e&&((s=e.match(/(normal|oblique|italic)/i))&&s[1]&&(i=s[1].substr(0,1).toLowerCase()),(s=e.match(/([1-9]00|normal|bold)/i))&&s[1]&&(/bold/i.test(s[1])?t=7:/[1-9]00/.test(s[1])&&(t=parseInt(s[1].substr(0,1),10)))),i+t}function k(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new v("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function N(e){if(e.g){var t=d(e.f,e.a.c("wf","active")),i=[],s=[e.a.c("wf","loading")];t||i.push(e.a.c("wf","inactive")),h(e.f,i,s)}_(e,"inactive")}function _(e,t,i){e.j&&e.h[t]&&(i?e.h[t](i.c,x(i)):e.h[t]())}function L(){this.c={}}function C(e,t){this.c=e,this.f=t,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function D(e){c(e.c,"body",e.a)}function A(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+w(e.c)+";font-style:"+S(e)+";font-weight:"+e.f+"00;"}function j(e,t,i,s,o,n){this.g=e,this.j=t,this.a=s,this.c=i,this.f=o||3e3,this.h=n||void 0}function T(e,t,i,s,o,n,r){this.v=e,this.B=t,this.c=i,this.a=s,this.s=r||"BESbswy",this.f={},this.w=o||3e3,this.u=n||null,this.m=this.j=this.h=this.g=null,this.g=new C(this.c,this.s),this.h=new C(this.c,this.s),this.j=new C(this.c,this.s),this.m=new C(this.c,this.s),e=A(e=new M(this.a.c+",serif",x(this.a))),this.g.a.style.cssText=e,e=A(e=new M(this.a.c+",sans-serif",x(this.a))),this.h.a.style.cssText=e,e=A(e=new M("serif",x(this.a))),this.j.a.style.cssText=e,e=A(e=new M("sans-serif",x(this.a))),this.m.a.style.cssText=e,D(this.g),D(this.h),D(this.j),D(this.m)}v.prototype.c=function(e){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},j.prototype.start=function(){var e=this.c.o.document,t=this,i=n(),s=new Promise((function(s,o){!function r(){n()-i>=t.f?o():e.fonts.load(function(e){return S(e)+" "+e.f+"00 300px "+w(e.c)}(t.a),t.h).then((function(e){1<=e.length?s():setTimeout(r,25)}),(function(){o()}))}()})),o=null,r=new Promise((function(e,i){o=setTimeout(i,t.f)}));Promise.race([r,s]).then((function(){o&&(clearTimeout(o),o=null),t.g(t.a)}),(function(){t.j(t.a)}))};var z={D:"serif",C:"sans-serif"},E=null;function O(){if(null===E){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(e.navigator.userAgent);E=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return E}function P(e,t,i){for(var s in z)if(z.hasOwnProperty(s)&&t===e.f[z[s]]&&i===e.f[z[s]])return!0;return!1}function R(e){var t,i=e.g.a.offsetWidth,s=e.h.a.offsetWidth;(t=i===e.f.serif&&s===e.f["sans-serif"])||(t=O()&&P(e,i,s)),t?n()-e.A>=e.w?O()&&P(e,i,s)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?H(e,e.v):H(e,e.B):function(e){setTimeout(o((function(){R(this)}),e),50)}(e):H(e,e.v)}function H(e,t){setTimeout(o((function(){u(this.g.a),u(this.h.a),u(this.j.a),u(this.m.a),t(this.a)}),e),0)}function F(e,t,i){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=i}T.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=n(),R(this)};var U=null;function B(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&h(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),_(e,"active")):N(e.a))}function Y(e){this.j=e,this.a=new L,this.h=0,this.f=this.g=!0}function Z(t,i,s,n,r){var a=0==--t.h;(t.f||t.g)&&setTimeout((function(){var t=r||null,l=n||{};if(0===s.length&&a)N(i.a);else{i.f+=s.length,a&&(i.j=a);var c,u=[];for(c=0;c<s.length;c++){var d=s[c],p=l[d.c],m=i.a,g=d;if(m.g&&h(m.f,[m.a.c("wf",g.c,x(g).toString(),"loading")]),_(m,"fontloading",g),m=null,null===U)if(e.FontFace){g=/Gecko.*Firefox\/(\d+)/.exec(e.navigator.userAgent);var b=/OS X.*Version\/10\..*Safari/.exec(e.navigator.userAgent)&&/Apple/.exec(e.navigator.vendor);U=g?42<parseInt(g[1],10):!b}else U=!1;m=U?new j(o(i.g,i),o(i.h,i),i.c,d,i.s,p):new T(o(i.g,i),o(i.h,i),i.c,d,i.s,t,p),u.push(m)}for(c=0;c<u.length;c++)u[c].start()}}),0)}function V(e,t){this.c=e,this.a=t}function W(e,t){this.c=e,this.a=t}function G(e,t){this.c=e||$,this.a=[],this.f=[],this.g=t||""}F.prototype.g=function(e){var t=this.a;t.g&&h(t.f,[t.a.c("wf",e.c,x(e).toString(),"active")],[t.a.c("wf",e.c,x(e).toString(),"loading"),t.a.c("wf",e.c,x(e).toString(),"inactive")]),_(t,"fontactive",e),this.m=!0,B(this)},F.prototype.h=function(e){var t=this.a;if(t.g){var i=d(t.f,t.a.c("wf",e.c,x(e).toString(),"active")),s=[],o=[t.a.c("wf",e.c,x(e).toString(),"loading")];i||s.push(t.a.c("wf",e.c,x(e).toString(),"inactive")),h(t.f,s,o)}_(t,"fontinactive",e),B(this)},Y.prototype.load=function(e){this.c=new r(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,i){var s=[],o=i.timeout;!function(e){e.g&&h(e.f,[e.a.c("wf","loading")]),_(e,"loading")}(t),s=function(e,t,i){var s,o=[];for(s in t)if(t.hasOwnProperty(s)){var n=e.c[s];n&&o.push(n(t[s],i))}return o}(e.a,i,e.c);var n=new F(e.c,t,o);for(e.h=s.length,t=0,i=s.length;t<i;t++)s[t].load((function(t,i,s){Z(e,n,t,i,s)}))}(this,new k(this.c,e),e)},V.prototype.load=function(e){function t(){if(n["__mti_fntLst"+s]){var i,o=n["__mti_fntLst"+s](),r=[];if(o)for(var a=0;a<o.length;a++){var l=o[a].fontfamily;null!=o[a].fontStyle&&null!=o[a].fontWeight?(i=o[a].fontStyle+o[a].fontWeight,r.push(new M(l,i))):r.push(new M(l))}e(r)}else setTimeout((function(){t()}),50)}var i=this,s=i.a.projectId,o=i.a.version;if(s){var n=i.c.o;m(this.c,(i.a.api||"https://fast.fonts.net/jsapi")+"/"+s+".js"+(o?"?v="+o:""),(function(o){o?e([]):(n["__MonotypeConfiguration__"+s]=function(){return i.a},t())})).id="__MonotypeAPIScript__"+s}else e([])},W.prototype.load=function(e){var t,i,s=this.a.urls||[],o=this.a.families||[],n=this.a.testStrings||{},r=new g;for(t=0,i=s.length;t<i;t++)p(this.c,s[t],b(r));var a=[];for(t=0,i=o.length;t<i;t++)if((s=o[t].split(":"))[1])for(var l=s[1].split(","),c=0;c<l.length;c+=1)a.push(new M(s[0],l[c]));else a.push(new M(s[0]));f(r,(function(){e(a,n)}))};var $="https://fonts.googleapis.com/css";function Q(e){this.f=e,this.a=[],this.c={}}var q={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},X={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},J={i:"i",italic:"i",n:"n",normal:"n"},K=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function ee(e,t){this.c=e,this.a=t}var te={Arimo:!0,Cousine:!0,Tinos:!0};function ie(e,t){this.c=e,this.a=t}function se(e,t){this.c=e,this.f=t,this.a=[]}ee.prototype.load=function(e){var t=new g,i=this.c,s=new G(this.a.api,this.a.text),o=this.a.families;!function(e,t){for(var i=t.length,s=0;s<i;s++){var o=t[s].split(":");3==o.length&&e.f.push(o.pop());var n="";2==o.length&&""!=o[1]&&(n=":"),e.a.push(o.join(n))}}(s,o);var n=new Q(o);!function(e){for(var t=e.f.length,i=0;i<t;i++){var s=e.f[i].split(":"),o=s[0].replace(/\+/g," "),n=["n4"];if(2<=s.length){var r;if(r=[],a=s[1])for(var a,l=(a=a.split(",")).length,c=0;c<l;c++){var u;if((u=a[c]).match(/^[\w-]+$/))if(null==(h=K.exec(u.toLowerCase())))u="";else{if(u=null==(u=h[2])||""==u?"n":J[u],null==(h=h[1])||""==h)h="4";else var h=X[h]||(isNaN(h)?"4":h.substr(0,1));u=[u,h].join("")}else u="";u&&r.push(u)}0<r.length&&(n=r),3==s.length&&(r=[],0<(s=(s=s[2])?s.split(","):r).length&&(s=q[s[0]])&&(e.c[o]=s))}for(e.c[o]||(s=q[o])&&(e.c[o]=s),s=0;s<n.length;s+=1)e.a.push(new M(o,n[s]))}}(n),p(i,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,i=[],s=0;s<t;s++)i.push(e.a[s].replace(/ /g,"+"));return t=e.c+"?family="+i.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(s),b(t)),f(t,(function(){e(n.a,n.c,te)}))},ie.prototype.load=function(e){var t=this.a.id,i=this.c.o;t?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){t=i.Typekit.config.fn;for(var s=[],o=0;o<t.length;o+=2)for(var n=t[o],r=t[o+1],a=0;a<r.length;a++)s.push(new M(n,r[a]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(s)}}),2e3):e([])},se.prototype.load=function(e){var t=this.f.id,i=this.c.o,s=this;t?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[t]=function(t,i){for(var o=0,n=i.fonts.length;o<n;++o){var r=i.fonts[o];s.a.push(new M(r.name,I("font-weight:"+r.weight+";font-style:"+r.style)))}e(s.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var oe=new Y(e);oe.a.c.custom=function(e,t){return new W(t,e)},oe.a.c.fontdeck=function(e,t){return new se(t,e)},oe.a.c.monotype=function(e,t){return new V(t,e)},oe.a.c.typekit=function(e,t){return new ie(t,e)},oe.a.c.google=function(e,t){return new ee(t,e)};var ne={load:o(oe.load,oe)};"function"==typeof define&&define.amd?define((function(){return ne})):void 0!==t&&t.exports?t.exports=ne:(e.WebFont=ne,e.WebFontConfig&&oe.load(e.WebFontConfig))}(),t.exports}("undefined"==typeof window&&{}||window,"undefined"==typeof module&&{exports:{}}||module).load(Object.assign(Object.assign({},s),{classes:!1,fontactive:t=>this.done(e,i,t),inactive:()=>this.done(e,i,e.fallback||""),context:e.context.current.contentWindow}))}else Tm((()=>this.load()))}}static done(e,t,i){e.ref.current===t?(delete this.requests[e.id],e.set.current(i)):e.loading=!1,this.load()}static request(e,t,i,s,o){if(!t.current||this.isStandardFont(t.current))return delete this.requests[e.current],void s.current(t.current);let n=t.current,r="";if(0===n.indexOf("https://")||0===n.indexOf("/")){const t=n.lastIndexOf("#");if(-1!==t){let i=n.substr(t+1);r=n.substr(0,t),-1!==i.indexOf("&")&&(i=i.substr(0,i.indexOf("&"))),-1!==i.indexOf("|")&&(i=i.substr(0,i.indexOf("|")));try{n=decodeURIComponent(i.replace(/\+/g," "))}catch(e){n="",r=""}}else n=""}if(n){const a=this.requests[e.current];a?(a.font=n,a.url=r,a.set=s):this.requests[e.current]={id:e.current,ref:t,font:n,url:r,context:i,set:s,fallback:o},this.load()}else delete this.requests[e.current],s.current(o||"")}static isStandardFont(e){switch(e.toLowerCase()){case"arial":case"helvetica":case"times new roman":case"times":case"courier new":case"courier":case"sans-serif":return!0}return!1}}rS.counter=0,rS.initialized=!1,rS.ready=!1,rS.requests={};const aS=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"M14 20c0.128 0 0.256-0.049 0.354-0.146 0.195-0.195 0.195-0.512 0-0.707l-8.646-8.646 8.646-8.646c0.195-0.195 0.195-0.512 0-0.707s-0.512-0.195-0.707 0l-9 9c-0.195 0.195-0.195 0.512 0 0.707l9 9c0.098 0.098 0.226 0.146 0.354 0.146z"},void 0)}),void 0),lS=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"M5 20c-0.128 0-0.256-0.049-0.354-0.146-0.195-0.195-0.195-0.512 0-0.707l8.646-8.646-8.646-8.646c-0.195-0.195-0.195-0.512 0-0.707s0.512-0.195 0.707 0l9 9c0.195 0.195 0.195 0.512 0 0.707l-9 9c-0.098 0.098-0.226 0.146-0.354 0.146z"},void 0)}),void 0),cS=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"M0 15c0 0.128 0.049 0.256 0.146 0.354 0.195 0.195 0.512 0.195 0.707 0l8.646-8.646 8.646 8.646c0.195 0.195 0.512 0.195 0.707 0s0.195-0.512 0-0.707l-9-9c-0.195-0.195-0.512-0.195-0.707 0l-9 9c-0.098 0.098-0.146 0.226-0.146 0.354z"},void 0)}),void 0),uS=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"M0 6c0-0.128 0.049-0.256 0.146-0.354 0.195-0.195 0.512-0.195 0.707 0l8.646 8.646 8.646-8.646c0.195-0.195 0.512-0.195 0.707 0s0.195 0.512 0 0.707l-9 9c-0.195 0.195-0.512 0.195-0.707 0l-9-9c-0.098-0.098-0.146-0.226-0.146-0.354z"},void 0)}),void 0),hS=tw.div`
    background-color: ${e=>Uw(e.props.color,(e=>e.manipulate((e=>e.alpha(.1)))))};
    transition: background-color 0.15s ease-in-out;
    border-radius: 0.5em;
    width: 100%;
    height: 8px;
    border-radius: 4px;
    margin-top: 8px;
    margin-bottom: 8px;
`,dS=tw.div`
    background-color: ${e=>e.props.color};
    transition: width 0.3s ease, background-color 0.15s ease-in-out;
    width: ${e=>e.props.percentage>0?e.props.percentage+"%":"0"};
    height: 8px;
    border-radius: 4px;
`,pS=e=>{const t=e.total>0?100/e.total*e.progress:0;return(0,yy.jsx)(hS,Object.assign({props:e},{children:(0,yy.jsx)(dS,{role:"progressbar",props:{percentage:t,color:e.color},"aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100},void 0)}),void 0)},mS=tw.nav`
    position: fixed;
    left: ${e=>e.props.isPage||"horizontal"===e.props.styles.direction?0:(e.props.styles.showEnumerators?32:5)+"px"};
    bottom: 0;
    right: ${e=>e.props.isPage||"horizontal"===e.props.styles.direction?0:(e.props.styles.showScrollbar?0:5)+"px"};
    background-color: ${e=>{var t;return null===(t=e.props.styles.navigation)||void 0===t?void 0:t.backgroundColor}};
    font-family: ${e=>e.props.fontFamily};
    font-size: 16px;
    font-variant-ligatures: none;
    transition: background-color 0.15s ease-in-out;
    user-select: none;

    > div {
        width: 100%;
        height: ${80}px;
        max-width: ${e=>e.props.isPage&&"1108px"};
        margin-left: ${e=>e.props.isPage&&"auto"};
        margin-right: ${e=>e.props.isPage&&"auto"};
        display: flex;
        justify-content: space-between;
        align-items: center;

        > div:first-child {
            width: 50%;
            padding: 16px;

            @media (${e=>"live"===e.props.view?"max-device-width":"max-width"}: ${500}px) {
                flex-grow: 2;
            }

            > div {
                font-size: 12px;
                line-height: 16px;
                color: ${e=>{var t;return null===(t=e.props.styles.navigation)||void 0===t?void 0:t.textColor}};
                transition: color 0.15s ease-in-out;

                &:first-child {
                    font-weight: bold;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;
                }

                &:last-child {
                    font-weight: normal;

                    > a {
                        text-decoration: none;
                        color: inherit !important;

                        &:hover {
                            text-decoration: underline;
                        }
                    }
                }
            }
        }

        > div:last-child {
            padding-right: 8px;
            white-space: nowrap;

            > * {
                margin-right: 8px;
            }
        }
    }
`,gS=e=>{var t,i;const s=(0,o.useRef)(0),n={baseColor:(null===(t=e.styles.navigation)||void 0===t?void 0:t.textColor)||"black",mode:"outline",roundness:e.styles.buttons.roundness,scale:2};return e.isPausing||e.isEvaluating||(s.current=e.progress),(0,yy.jsx)(mS,Object.assign({props:e},{children:(0,yy.jsxs)("div",{children:[(0,yy.jsxs)("div",{children:[e.styles.showProgressbar&&(0,yy.jsxs)(yy.Fragment,{children:[(0,yy.jsx)("div",{children:e.isFinishing?e.l10n.pgettext("runner#3| Status information","Submitting..."):e.isEvaluating?e.l10n.pgettext("runner#3| Status information"," One moment please..."):e.isPausing?e.l10n.pgettext("runner#3| Status information","Pausing..."):"preview"===e.view?e.l10n.pgettext("runner:autoscroll","Preview mode (shows all without logic)"):0===e.answerable?e.l10n.pgettext("runner#3| Status information","Nothing to answer"):e.l10n.pgettext("runner#3| Status information","%1 of %2 answered",`${e.answered}`,`${e.answerable}`)},void 0),(0,yy.jsx)(pS,{total:e.total,progress:e.isFinishing?e.total:e.isPausing||e.isEvaluating?s.current:e.progress,color:(null===(i=e.styles.navigation)||void 0===i?void 0:i.progressbarColor)||"black"},void 0)]},void 0),!e.styles.noBranding&&"preview"!==e.view&&(0,yy.jsx)("div",{children:(0,yy.jsx)("a",Object.assign({href:"https://tripetto.com/your-tripetto-experience/?utm_source=tripetto_runner_autoscroll&utm_medium=tripetto_runners&utm_campaign=tripetto_branding&utm_content=form",target:"_blank"},{children:e.l10n.pgettext("runner:autoscroll","Powered by Tripetto")}),void 0)},void 0)]},void 0),(0,yy.jsxs)("div",{children:[(0,yy.jsx)(Vw,{styles:n,icon:"horizontal"===e.styles.direction?aS:cS,onClick:e.previous},void 0),e.pausable&&(0,yy.jsx)(Vw,{styles:n,icon:Ux,onClick:e.pause},void 0),(0,yy.jsx)(Vw,{styles:n,icon:"horizontal"===e.styles.direction?lS:uS,onClick:e.next},void 0)]},void 0)]},void 0)}),void 0)},bS=tw((e=>{const t=e.frameRef||(0,o.useRef)(),[i,s]=(0,o.useState)(),[r,a]=((e,t,i)=>{const[s,n]=(0,o.useState)((()=>e?rS.isStandardFont(e)?e:void 0:"")),r=(0,o.useRef)(""),a=(0,o.useRef)(""),l=(0,o.useRef)(n);return r.current||(r.current=rS.id),l.current=n,(0,o.useEffect)((()=>{a.current!==e&&(a.current=e,s!==e&&rS.request(r,a,t,l,"sans-serif"))})),["string"!=typeof s,s]})(e.font,t);return(0,o.useEffect)((()=>{const o=t.current,n=()=>{var t,n,r,a;if(!i){const i=o.contentDocument;if(null===(t=o.contentWindow)||void 0===t||t.addEventListener("resize",(()=>{e.resizeRef&&e.resizeRef.current&&e.resizeRef.current()})),e.onTouch){const t=e.onTouch;null===(n=o.contentWindow)||void 0===n||n.addEventListener("mousedown",(()=>t())),null===(r=o.contentWindow)||void 0===r||r.addEventListener("touchstart",(()=>t())),null===(a=o.contentWindow)||void 0===a||a.addEventListener("wheel",(()=>t()))}i&&s(i)}};if(!i){const e=o.contentDocument;if(e&&"complete"===e.readyState)return n();o.addEventListener("load",n)}return()=>{o.removeEventListener("load",n)}}),[]),(0,yy.jsx)("iframe",Object.assign({ref:t,title:e.title,style:Object.assign(Object.assign({},e.style),{opacity:r?"0":void 0,boxShadow:r?"none":void 0}),className:e.className},{children:i&&!r&&(0,n.createPortal)("function"==typeof e.children?e.children(i,a):e.children,i.body)}),void 0)}))`
    background-color: transparent !important;
    border: none !important;
    position: ${e=>"live"===e.props.view&&e.props.isPage?"fixed":"relative"};
    left: ${e=>"live"===e.props.view?e.props.isPage||"horizontal"===e.props.styles.direction?0:`-${e.props.styles.showEnumerators?32:5}px`:void 0};
    top: ${e=>"live"===e.props.view?0:void 0};
    width: ${e=>"live"!==e.props.view||e.props.isPage||"vertical"!==e.props.styles.direction?"100%":`calc(100% + ${(e.props.styles.showEnumerators?32:5)+(e.props.styles.showScrollbar?0:5)}px);`};
    height: ${e=>"live"!==e.props.view||e.props.isPage?"100%":0};
    margin-right: ${e=>"live"===e.props.view&&!e.props.isPage&&"vertical"===e.props.styles.direction&&`-${(e.props.styles.showEnumerators?32:5)+(e.props.styles.showScrollbar?0:5)}px`||void 0};

    @media (${e=>"live"===e.props.view?"max-device-width":"max-width"}: ${500}px) {
        left: ${e=>"live"===e.props.view?e.props.isPage||"horizontal"===e.props.styles.direction?0:"-5px":void 0};
        width: ${e=>"live"!==e.props.view||e.props.isPage||"vertical"!==e.props.styles.direction?"100%":`calc(100% + ${e.props.styles.showScrollbar?5:0}px);`};
        margin-right: ${e=>"live"===e.props.view&&!e.props.isPage&&"vertical"===e.props.styles.direction&&`-${5+(e.props.styles.showScrollbar?0:5)}px`||void 0};
    }
`,fS=(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];var n=RM.apply(void 0,[e].concat(i)),r="sc-global-"+YM(JSON.stringify(n)),a=new KM(n,r);function l(e){var t=NM(),i=_M(),s=(0,o.useContext)(QM),n=(0,o.useRef)(t.allocateGSInstance(r)).current;return t.server&&c(n,e,t,s,i),null}function c(e,t,i,s,o){if(a.isStatic)a.renderStyles(e,Vv,i,o);else{var n=zv({},t,{theme:HM(t,s,l.defaultProps)});a.renderStyles(e,n,i,o)}}return o.memo(l)})`
    body {
        overflow: hidden;
        background-color: transparent;

        ${e=>e.props.customCSS&&RM`
                ${e.props.customCSS}
            `}
    }
`,yS=tw.div`
    position: absolute;
    left: ${e=>"live"!==e.props.view||e.props.isPage||"vertical"!==e.props.styles.direction?0:(e.props.styles.showEnumerators?32:5)+"px"};
    right: ${e=>"live"!==e.props.view||e.props.isPage||"vertical"!==e.props.styles.direction||e.props.styles.showScrollbar?0:"5px"};
    top: 0;
    bottom: 0;
    background-color: ${e=>Uw(e.props.styles.background.color)};
    background-image: ${e=>e.props.styles.background.url&&e.props.styles.background.opacity>0&&`${e.props.styles.background.opacity<1&&`linear-gradient(${Uw(e.props.styles.background.color,(t=>t.manipulate((t=>t.alpha(1-e.props.styles.background.opacity)))))},${Uw(e.props.styles.background.color,(t=>t.manipulate((t=>t.alpha(1-e.props.styles.background.opacity)))))}),`||""}url("${e.props.styles.background.url}")`||void 0};
    background-size: ${e=>e.props.styles.background.url&&"repeat"!==e.props.styles.background.positioning&&e.props.styles.background.positioning||void 0};
    background-repeat: ${e=>e.props.styles.background.url&&"repeat"===e.props.styles.background.positioning?"repeat":"no-repeat"};
    background-position: center center;
    transition: background 0.15s ease-in-out;
`,vS=tw.div`
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: ${e=>e.props.navigation?"80px":0};
    font-family: ${e=>e.props.fontFamily};
    font-size: ${e=>e.props.styles.font.size}px;
    font-variant-ligatures: none;
    line-height: 1.5em;
    outline: 0;
    overflow-x: ${e=>"horizontal"===e.props.styles.direction?"auto":"hidden"};
    overflow-y: ${e=>e.props.autoHeight||e.props.disableScrolling?"hidden":"auto"};
    touch-action: ${e=>e.props.styles.disableScrolling?"none":"pan-y"};
    scroll-behavior: smooth;
    scrollbar-width: ${e=>e.props.styles.showScrollbar||"preview"===e.props.view?void 0:"none"};
    -ms-overflow-style: ${e=>e.props.styles.showScrollbar||"preview"===e.props.view?void 0:"none"};
    -webkit-overflow-scrolling: touch;
    -webkit-tap-highlight-color: transparent;

    ::-webkit-scrollbar {
        display: ${e=>e.props.styles.showScrollbar||"preview"===e.props.view?void 0:"none"};
    }

    > div {
        max-width: ${e=>"vertical"===e.props.styles.direction&&e.props.isPage&&"1140px"};
        min-height: ${e=>"live"!==e.props.view||e.props.isPage?"100%":void 0};
        margin-left: ${e=>"vertical"===e.props.styles.direction&&e.props.isPage&&"auto"};
        margin-right: ${e=>"vertical"===e.props.styles.direction&&e.props.isPage&&"auto"};
        display: flex;
    }

    * {
        font-family: ${e=>e.props.fontFamily};
        font-variant-ligatures: none;
        box-sizing: border-box;
        outline: none;
    }

    a {
        text-decoration: underline;
        color: inherit !important;
    }

    ${mS} {
        left: ${e=>"live"!==e.props.view||e.props.isPage||"vertical"!==e.props.styles.direction?void 0:(e.props.styles.showEnumerators?32:5)+"px"};
        right: ${e=>"live"!==e.props.view||e.props.isPage||"vertical"!==e.props.styles.direction||e.props.styles.showScrollbar?void 0:"5px"};
    }

    @media (prefers-reduced-motion: reduce) {
        scroll-behavior: auto;
    }

    @media (${e=>"live"===e.props.view?"max-device-width":"max-width"}: ${500}px) {
        font-size: ${e=>e.props.styles.font.sizeSmall}px;
    }
`,MS=e=>{const t=(0,o.useRef)();return(0,o.useEffect)((()=>{const i=(e=>{for(;mx[bx];)bx++;return e(!1),mx[bx]={update:e,index:bx}})((i=>{t.current&&e.onChange(t.current.getBoundingClientRect().height,i)}));return()=>(e=>{bx=e.index,delete mx[e.index]})(i)})),(0,yy.jsx)("div",Object.assign({ref:t},{children:e.children}),void 0)},wS=e=>{const[t,i]=(0,o.useState)(0),s=(0,o.useRef)(),n=(0,o.useRef)(0),r=(0,o.useRef)(),a=(0,o.useRef)(),l=(0,o.useRef)(),c=r.current=()=>{var t,i,o;const n=null===(t=s.current)||void 0===t?void 0:t.getBoundingClientRect();e.onScroll({timestamp:Lp.precise,left:(null==n?void 0:n.left)||0,top:(null==n?void 0:n.top)||0,width:(null==n?void 0:n.width)||0,height:(null==n?void 0:n.height)||0,scrollLeft:(null===(i=s.current)||void 0===i?void 0:i.scrollLeft)||0,scrollTop:(null===(o=s.current)||void 0===o?void 0:o.scrollTop)||0,scrollTo:(e,t,i=!0)=>{if(s.current)if(t=t>0?dp.round(t):0,e=e>0?dp.round(e):0,s.current.style.scrollBehavior=i?"":"auto",!1!==a.current&&s.current.scrollTo)s.current.scrollTo({left:e,top:t,behavior:i?"smooth":"auto"});else if(l.current&&l.current(),i){const i=s.current,o=Lp.precise,n=~~i.scrollLeft,r=~~i.scrollTop,a=~~(e-n),c=~~(t-r),u=400,h=()=>{const s=requestAnimationFrame((()=>{const s=dp.range(Lp.precise-o,0,u),l=s/u,d=-a*l*(l-2),p=-c*l*(l-2);i.scrollLeft=n+d,i.scrollTop=r+p,s!==u?h():(i.scrollLeft=e,i.scrollTop=t)}));l.current=()=>cancelAnimationFrame(s)};h()}else s.current.scrollLeft=e,s.current.scrollTop=t}})};return(0,o.useEffect)((()=>{e.frameRef.current&&"live"===e.view&&(e.isPage||e.styles.autoFocus)&&e.frameRef.current.focus()}),[t]),(0,o.useEffect)((()=>{if("boolean"!=typeof a.current&&s.current&&(a.current="smooth"===getComputedStyle(s.current).scrollBehavior),!n.current&&"horizontal"===e.styles.direction&&(e.styles.showScrollbar||"preview"===e.view)&&s.current&&s.current.clientHeight>0&&s.current.offsetHeight>s.current.clientHeight&&(n.current=dp.max(s.current.offsetHeight-s.current.clientHeight,0),i(t+n.current)),c(),s.current&&e.styles.disableScrolling){const e=s.current,t=e=>(e.preventDefault(),e.stopPropagation(),!1);return e.addEventListener("wheel",t,{passive:!1}),()=>{e.removeEventListener("wheel",t)}}})),(0,yy.jsx)(bS,Object.assign({props:e,frameRef:e.frameRef,resizeRef:r,title:e.title,style:Object.assign(Object.assign({},e.customStyle),{height:e.customStyle&&e.customStyle.height&&"auto"!==e.customStyle.height?e.customStyle.height:"auto"===e.height?t+(e.navigation?80:0):e.height}),font:e.styles.font&&e.styles.font.family,className:e.className,onTouch:e.onTouch},{children:(o,r)=>(0,yy.jsx)(LM,Object.assign({target:o.head},{children:(0,yy.jsxs)(yy.Fragment,{children:[(0,yy.jsx)(fS,{props:e},void 0),(0,yy.jsx)(yS,{props:e},void 0),(0,yy.jsx)(vS,Object.assign({ref:s,props:Object.assign(Object.assign({},e),{fontFamily:r,autoHeight:"auto"===e.height}),onScroll:c,tabIndex:0,onKeyDown:t=>{var i,s,n;"PageUp"===t.key&&(t.preventDefault(),e.onKey("previous")),"PageDown"===t.key&&(t.preventDefault(),e.onKey("next")),"INPUT"!==(null===(i=o.activeElement)||void 0===i?void 0:i.tagName)&&"TEXTAREA"!==(null===(s=o.activeElement)||void 0===s?void 0:s.tagName)&&("ArrowUp"===t.key&&"vertical"===e.styles.direction||"ArrowLeft"===t.key&&"horizontal"===e.styles.direction?(t.preventDefault(),e.onKey("previous")):"ArrowDown"===t.key&&"vertical"===e.styles.direction||"ArrowRight"===t.key&&"horizontal"===e.styles.direction?(t.preventDefault(),e.onKey("next")):" "===t.key&&"BUTTON"!==(null===(n=o.activeElement)||void 0===n?void 0:n.tagName)&&(t.preventDefault(),t.shiftKey?e.onKey("previous"):e.onKey("next")))}},{children:(0,yy.jsx)(MS,Object.assign({onChange:(s,o)=>{((s=dp.ceil(s)+("horizontal"===e.styles.direction&&(e.styles.showScrollbar||"preview"===e.view)&&n.current||0))!==t||o)&&(i(s),e.onResize())}},{children:e.children}),void 0)}),void 0),e.navigation&&(0,yy.jsx)(gS,Object.assign({},e.navigation,{isPage:e.isPage,fontFamily:r}),void 0)]},void 0)}),void 0)}),void 0)},xS=e=>(0,yy.jsx)(xx,Object.assign({props:Object.assign(Object.assign({},e),{isMessage:!0,center:!0,size:15})},{children:(0,yy.jsxs)(kx,Object.assign({styles:e.styles,view:e.view,isPage:!0,isMessage:!0},{children:[(0,yy.jsx)(Nx,Object.assign({props:{hasDescription:!0,alignment:"center"}},{children:e.l10n.pgettext("runner:autoscroll"," Hi there!")}),void 0),(0,yy.jsx)(Lx,Object.assign({props:{alignment:"center"}},{children:e.l10n.pgettext("runner:autoscroll","Please add a block first to get the magic going.")}),void 0)]}),void 0)}),void 0),SS=e=>(0,yy.jsx)(xx,Object.assign({props:Object.assign(Object.assign({},e),{isMessage:!0,center:e.isPage})},{children:(0,yy.jsxs)(kx,Object.assign({styles:e.styles,view:e.view,isPage:e.isPage,isMessage:!0},{children:[(0,yy.jsx)(Nx,Object.assign({props:{hasDescription:!0,alignment:e.isPage?"center":"left"}},{children:e.l10n.pgettext("runner#2| Messages|Conversation closed"," Hi there!")}),void 0),(0,yy.jsx)(Lx,Object.assign({props:{alignment:e.isPage?"center":"left"}},{children:e.l10n.pgettext("runner#2| Messages|Conversation closed","Nothing to talk about. The conversation is closed ")}),void 0)]}),void 0)}),void 0),IS=e=>(0,yy.jsx)(xx,Object.assign({props:Object.assign(Object.assign({},e),{isMessage:!0,center:e.isPage})},{children:(0,yy.jsxs)(kx,Object.assign({styles:e.styles,view:e.view,isPage:e.isPage,isMessage:!0},{children:[(0,yy.jsx)(Nx,Object.assign({props:{alignment:e.isPage?"center":"left"}},{children:e.l10n.pgettext("runner#2| Messages|Conversation paused"," Paused")}),void 0),(0,yy.jsx)(Lx,Object.assign({props:{alignment:e.isPage?"center":"left"}},{children:e.l10n.pgettext("runner#2| Messages|Conversation paused","The conversation is now paused.")}),void 0)]}),void 0)}),void 0),kS=tw.div`
    width: 100%;
    display: flex;
    align-items: flex-start;
    justify-content: ${e=>e.props.aligment};
`,NS=tw.img`
    margin: 0;
    padding: 0;
    border: none;
    max-width: 100%;
    height: auto;
    border-style: none;
`,_S=e=>{const t=(i=e.src,"boolean"!=typeof gx[i]&&(gx[i]=!1),()=>{gx[i]||(gx[i]=!0,fx()||lm(mx,(e=>{e&&e.update(!0)})))});var i;return(0,yy.jsx)(kS,Object.assign({props:{aligment:e.alignment||"left"},onClick:e.onClick},{children:(0,yy.jsx)(NS,{props:e,src:e.src,style:{width:e.width},onLoad:t,onError:t},void 0)}),void 0)},LS=tw.div`
    position: relative;
    margin: 0;
    padding: 0 0 56.25% 0;
    width: 100%;
    max-width: 100%;
    height: 0;
    border: none;

    > iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
    }
`,CS=e=>{const t=(e=>{const t=e.match(/youtu(?:.*\/v\/|.*v\=|\.be\/)([A-Za-z0-9_\-]{11})/);return t&&2===t.length&&t[1]||""})(e.src),i=(e=>{const t=e.match(/\/\/(?:www\.)?vimeo\.com\/(?:channels\/staffpicks\/)?([-\w]+)/i);return t&&2===t.length&&t[1]||""})(e.src),s=(0,o.useRef)(null),n=(0,o.useRef)();return(0,o.useEffect)((()=>{const o="preview"!==e.view&&e.play;let r=0;if((t||i)&&Up(o)&&(Up(n.current)?o!==n.current:o)){const a=e=>{var o,a;null===(a=null===(o=s.current)||void 0===o?void 0:o.contentWindow)||void 0===a||a.postMessage(JSON.stringify(i?{method:e?"play":"pause"}:{event:"command",func:e?"playVideo":"pauseVideo"}),t?"https://www.youtube-nocookie.com":"https://player.vimeo.com"),r=0,n.current=e};void 0===n.current?e.play&&(r=Rm((()=>a(!0)),1e3)):a(o)}return()=>{0!==r&&Hm(r)}})),t||i?(0,yy.jsx)(LS,{children:(0,yy.jsx)("iframe",{ref:s,src:t?`https://www.youtube-nocookie.com/embed/${t}?controls=0&enablejsapi=1`:`https://player.vimeo.com/video/${i}?api=1&dnt=1`,allow:"autoplay; fullscreen; accelerometer; encrypted-media; gyroscope; picture-in-picture"},void 0)},void 0):(0,yy.jsx)(yy.Fragment,{},void 0)},DS=e=>(0,yy.jsx)(xx,Object.assign({props:Object.assign(Object.assign({},e),{isMessage:!0,center:!0})},{children:(0,yy.jsxs)(kx,Object.assign({styles:e.styles,view:e.view,isPage:e.isPage,isMessage:!0},{children:[e.image&&(0,yy.jsx)(_S,{src:e.image,isPage:e.isPage,alignment:"center",onClick:e.edit},void 0),e.title&&(0,yy.jsx)(Nx,Object.assign({props:{hasDescription:!0,alignment:"center"},onClick:e.edit},{children:Yy(e.title)}),void 0),e.description&&(0,yy.jsx)(Lx,Object.assign({props:{alignment:"center"},onClick:e.edit},{children:Yy(e.description)}),void 0),e.video&&(0,yy.jsx)(CS,{src:e.video,view:e.view},void 0),(0,yy.jsx)(Ax,Object.assign({styles:e.styles,alignment:"center"},{children:(0,yy.jsx)(Vw,{styles:e.styles.buttons,icon:lS,label:e.button||e.l10n.pgettext("runner#1| Buttons","Start"),onClick:e.start,onAutoFocus:t=>{"live"===e.view&&(e.styles.autoFocus||e.isPage)&&t&&px(t,e.viewportRef)&&t.focus({preventScroll:!0})}},void 0)}),void 0),(0,yy.jsx)(wx,{l10n:e.l10n,styles:e.styles,view:e.view,alignment:"center"},void 0)]}),void 0)}),void 0),AS=tw.h3`
    margin: 0;
    padding: 0;
    font-size: 1.5em;
    line-height: 1.1em;
    text-align: ${e=>e.props&&e.props.alignment||"left"};
    user-select: none;
`,jS=(0,yy.jsx)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"M17.51 4.49c-1.605-1.605-3.74-2.49-6.010-2.49s-4.405 0.884-6.010 2.49-2.49 3.74-2.49 6.010v1.293l-2.146-2.146c-0.195-0.195-0.512-0.195-0.707 0s-0.195 0.512 0 0.707l3 3c0.098 0.098 0.226 0.146 0.354 0.146s0.256-0.049 0.354-0.146l3-3c0.195-0.195 0.195-0.512 0-0.707s-0.512-0.195-0.707 0l-2.146 2.146v-1.293c0-4.136 3.364-7.5 7.5-7.5s7.5 3.364 7.5 7.5-3.364 7.5-7.5 7.5c-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c2.27 0 4.405-0.884 6.010-2.49s2.49-3.74 2.49-6.010c0-2.27-0.884-4.405-2.49-6.010z"},void 0)}),void 0),TS=(0,yy.jsxs)("svg",Object.assign({"aria-hidden":"true",viewBox:"0 0 20 20"},{children:[(0,yy.jsx)("path",{d:"M14.5 20h-13c-0.827 0-1.5-0.673-1.5-1.5v-16c0-0.827 0.673-1.5 1.5-1.5h13c0.827 0 1.5 0.673 1.5 1.5v2c0 0.276-0.224 0.5-0.5 0.5s-0.5-0.224-0.5-0.5v-2c0-0.276-0.224-0.5-0.5-0.5h-13c-0.276 0-0.5 0.224-0.5 0.5v16c0 0.276 0.224 0.5 0.5 0.5h13c0.276 0 0.5-0.224 0.5-0.5v-4c0-0.276 0.224-0.5 0.5-0.5s0.5 0.224 0.5 0.5v4c0 0.827-0.673 1.5-1.5 1.5z"},void 0),(0,yy.jsx)("path",{d:"M10.5 5h-7c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h7c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z"},void 0),(0,yy.jsx)("path",{d:"M12.5 7h-9c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h9c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z"},void 0),(0,yy.jsx)("path",{d:"M11.5 9h-8c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h8c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z"},void 0),(0,yy.jsx)("path",{d:"M8.5 11h-5c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h5c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z"},void 0),(0,yy.jsx)("path",{d:"M8.5 17c-0.134 0-0.265-0.054-0.36-0.153-0.124-0.128-0.17-0.313-0.121-0.484l1-3.5c0.023-0.082 0.067-0.156 0.127-0.216l7.5-7.5c0.195-0.195 0.512-0.195 0.707 0l2.5 2.5c0.194 0.194 0.195 0.508 0.003 0.704l-7.5 7.641c-0.065 0.066-0.147 0.113-0.238 0.135l-3.5 0.859c-0.039 0.010-0.079 0.014-0.119 0.014zM9.945 13.262l-0.728 2.547 2.525-0.62 7.053-7.186-1.796-1.796-7.055 7.055z"},void 0),(0,yy.jsx)("path",{d:"M6.5 17h-3c-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5h3c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5z"},void 0)]}),void 0),zS=e=>"live"===e.view&&e.getRedirect&&e.getRedirect()?(0,yy.jsx)(yy.Fragment,{},void 0):(0,yy.jsxs)(xx,Object.assign({props:Object.assign(Object.assign({},e),{isMessage:!0,center:!0})},{children:[(0,yy.jsx)(kx,Object.assign({styles:e.styles,view:e.view,isPage:e.isPage,isMessage:!0},{children:"live"!==e.view&&e.redirectUrl?(0,yy.jsxs)(yy.Fragment,{children:[(0,yy.jsx)(Nx,Object.assign({props:{hasDescription:!0,alignment:"center"},onClick:e.edit},{children:"preview"===e.view?e.l10n.pgettext("runner:autoscroll"," Redirect preview"):e.l10n.pgettext("runner:autoscroll"," Test completed")}),void 0),(0,yy.jsxs)(Lx,Object.assign({props:{alignment:"center"},onClick:e.edit},{children:[e.l10n.pgettext("runner:autoscroll","In a live environment the form will redirect to:"),(0,yy.jsx)("br",{},void 0),(0,yy.jsx)("a",Object.assign({href:mf(e.redirectUrl||"",e.context)||"#",rel:"noopener",target:"_blank"},{children:mf(e.redirectUrl||"",e.context)||e.l10n.pgettext("runner:autoscroll","The supplied URL is invalid!")}),void 0)]}),void 0),"test"===e.view&&(0,yy.jsx)(Ax,Object.assign({styles:e.styles,alignment:"center"},{children:(0,yy.jsx)(Vw,{styles:Object.assign(Object.assign({},e.styles.buttons),{mode:"outline"}),label:e.l10n.pgettext("runner:autoscroll","Test again"),icon:jS,disabled:!e.repeat,onClick:e.repeat},void 0)}),void 0)]},void 0):(0,yy.jsxs)(yy.Fragment,{children:[e.image&&(0,yy.jsx)(_S,{src:mf(e.image,e.context,void 0,["image/jpeg","image/png","image/svg","image/gif"]),isPage:e.isPage,alignment:"center",onClick:e.edit},void 0),(0,yy.jsx)(Nx,Object.assign({props:{hasDescription:!0,alignment:"center"},onClick:e.edit},{children:Yy(e.title||"test"===e.view&&e.l10n.pgettext("runner:autoscroll"," Test completed")||e.l10n.pgettext("runner#2| Messages|Conversation ended"," It's a wrap!"),e.context)}),void 0),e.description?(0,yy.jsx)(Lx,Object.assign({props:{alignment:"center"},onClick:e.edit},{children:Yy(e.description,e.context)}),void 0):!e.title&&"test"===e.view&&(0,yy.jsx)(Lx,Object.assign({props:{alignment:"center"},onClick:e.edit},{children:e.l10n.pgettext("runner:autoscroll","Did you know you can customize this closing message?")}),void 0),e.video&&(0,yy.jsx)(CS,{src:mf(e.video,e.context),view:e.view,play:!0},void 0),(e.button||e.repeatable||"test"===e.view)&&(0,yy.jsxs)(Ax,Object.assign({styles:e.styles,alignment:"center"},{children:[e.button&&(0,yy.jsx)(Vw,{styles:Object.assign(Object.assign({},e.styles.buttons),{mode:"fill"}),label:pf(e.button.label,e.context),hyperlink:{url:mf(e.button.url,e.context),target:"preview"===e.view||"test"===e.view?"blank":e.button.target}},void 0),(e.repeatable||"test"===e.view)&&(0,yy.jsxs)(yy.Fragment,{children:[(0,yy.jsx)(Vw,{styles:Object.assign(Object.assign({},e.styles.buttons),{mode:"outline"}),label:e.repeatable?e.l10n.pgettext("runner#1| Buttons","Start again"):e.l10n.pgettext("runner:autoscroll","Test again"),icon:jS,disabled:!e.repeat,onClick:e.repeat},void 0),e.edit&&!e.image&&!e.title&&!e.description&&!e.video&&!e.button&&!Up(e.repeatable)&&(0,yy.jsx)(Vw,{styles:Object.assign(Object.assign({},e.styles.buttons),{mode:"outline"}),label:e.l10n.pgettext("runner:autoscroll","Customize"),icon:TS,onClick:e.edit},void 0)]},void 0)]}),void 0)]},void 0)}),void 0),"live"===e.view&&!e.styles.noBranding&&(0,yy.jsxs)(kx,Object.assign({styles:e.styles,view:e.view,isPage:e.isPage,isMessage:!0},{children:[(0,yy.jsx)(AS,Object.assign({props:{alignment:"center"}},{children:e.l10n.pgettext("runner:autoscroll","Want to make a form like this for free?")}),void 0),(0,yy.jsx)(Lx,Object.assign({props:{alignment:"center"}},{children:e.l10n.pgettext("runner:autoscroll","Tripetto is for making elegantly personal form and survey experiences with response boosting conversational powers.")}),void 0),(0,yy.jsx)(Ax,Object.assign({styles:e.styles,alignment:"center"},{children:(0,yy.jsx)(Vw,{styles:Object.assign(Object.assign({},e.styles.buttons),{mode:"fill"}),label:e.l10n.pgettext("runner:autoscroll","Create one now!"),hyperlink:{url:"https://tripetto.com/your-tripetto-experience/?utm_source=tripetto_runner_autoscroll&utm_medium=tripetto_runners&utm_campaign=tripetto_branding&utm_content=closing",target:"blank"}},void 0)}),void 0)]}),void 0)]}),void 0);function ES(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}function OS(e,t){switch(t){case"radians":return e;case"gradians":return e*(Math.PI/200);default:return e*(Math.PI/180)}}function PS(e,t){switch(t){case"radians":return e;case"gradians":return e*(200/Math.PI);default:return e*(180/Math.PI)}}function RS(e){if(e>0){if(e>=.5){const t=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];let i=t[0];e--;for(let s=1;s<9;s++)i+=t[s]/(e+s);const s=e+7.5;return Math.sqrt(2*Math.PI)*Math.pow(s,e+.5)*Math.exp(-s)*i}{const t=RS(1-e);return Hp(t)?Math.PI/(Math.sin(Math.PI*e)*t):void 0}}}function HS(e){if(e>=0){if(0===e)return 1;if(e<1)return RS(e+1);let t=0;for(let i=1;i<=e;i++){if(!Hp(t))return;t+=Math.log(i)}return Math.exp(t)}}function FS(e,t,i,s){if(Ep(e)){const t=function(e,t){switch(e){case"":return Math.PI;case"e":return Math.E;case"":return.5772156649015329;case"c":return 299792458;case"random":return Math.random();case"timestamp":return Date.now()/1e3;case"year":return(new Date).getFullYear();case"month":return(new Date).getMonth()+1;case"day":return(new Date).getDate();case"day-of-week":return(new Date).getDay();case"hour":return(new Date).getHours();case"minute":return(new Date).getMinutes();case"second":return(new Date).getSeconds();case"millisecond":return(new Date).getMilliseconds();case"timezone":return 60*(new Date).getTimezoneOffset()*1e3;case"branch":return t.index}}(e,i);if(Hp(t))return t;const o=s(e);return o&&o.hasValue&&(o.slot instanceof Cb.Number||o.slot instanceof Cb.Numeric||o.slot instanceof Cb.Date)?o.slot.toValue(o.value):void 0}return Hp(e)?e:t}function US(e,t){return Hp(e)?t(e):void 0}function BS(e,t,i,s,o,n,r){let a=0;switch(i.opcode){case"abs":a=US(FS(i.value,s,e,o),(e=>Math.abs(e)));break;case"acos":a=US(FS(i.value,s,e,o),(e=>PS(Math.acos(e),i.angleUnits)));break;case"acosh":a=US(FS(i.value,s,e,o),(e=>Math.acosh(e)));break;case"age":a=(()=>{const t=Pp(i.value)&&o(i.value);if(t&&t.hasValue&&t.slot instanceof Cb.Date){const s=FS(i.reference,Lp.UTC,e,o),n=t.slot.toValue(t.value);if(Hp(s)){const e=t.slot.toValue(s);switch(i.ageIn){case"milliseconds":return e-n;case"seconds":return dp.floor((e-n)/1e3);case"minutes":return dp.floor((e-n)/6e4);case"hours":return dp.floor((e-n)/36e5);case"days":return dp.floor((e-n)/864e5);case"months":return function(e,t){const i=new Date(dp.min(e,t)),s=new Date(dp.max(e,t));return(12*(s.getFullYear()-i.getFullYear())+(s.getMonth()-i.getMonth())-(s.getDate()-i.getDate()<0?1:0))*(e>t?-1:1)}(n,e);default:return function(e,t){const i=new Date(dp.min(e,t)),s=new Date(dp.max(e,t)),o=s.getMonth()-i.getMonth();let n=s.getFullYear()-i.getFullYear();return(o<0||0===o&&s.getDate()<i.getDate())&&n--,n*(e>t?-1:1)}(n,e)}}}})(),i.ageAbs&&Hp(a)&&(a=Math.abs(a));break;case"asin":a=US(FS(i.value,s,e,o),(e=>PS(Math.asin(e),i.angleUnits)));break;case"asinh":a=US(FS(i.value,s,e,o),(e=>Math.asinh(e)));break;case"atan":a=US(FS(i.value,s,e,o),(e=>PS(Math.atan(e),i.angleUnits)));break;case"atanh":a=US(FS(i.value,s,e,o),(e=>Math.atanh(e)));break;case"boolean":a=(()=>{const t=Pp(i.value)&&o(i.value);if(t&&t.slot instanceof Cb.Boolean)return FS(t.hasValue&&!0===t.value?i.outa:i.outb,s,e,o)})();break;case"calc":const t=r&&r(i.id);i.operations&&i.operations.length>0&&(a=s,lm(i.operations,(t=>{Hp(a)&&(a=BS(e,t.operator,t,a,o,n,r))}))),t&&t.set(a);break;case"cast":a=(()=>{const e=Pp(i.value)&&o(i.value);return e&&e.hasValue?im(e.string):0})();break;case"ceil":a=US(FS(i.value,s,e,o),(e=>dp.ceil(e)));break;case"chars":a=(()=>{const e=Pp(i.value)&&o(i.value);return e&&e.hasValue?e.string.length:0})();break;case"clamp":a=US(FS(i.value,s,e,o),(t=>{const n=FS(i.min,s,e,o),r=FS(i.max,s,e,o);return t=Hp(n)?dp.max(t,n):t,Hp(r)?dp.min(t,r):t}));break;case"cos":a=US(FS(i.value,s,e,o),(e=>Math.cos(OS(e,i.angleUnits))));break;case"cosh":a=US(FS(i.value,s,e,o),(e=>Math.cosh(e)));break;case"count":a=(()=>{const e=Pp(i.value)&&o(i.value)||void 0;return e?e.refs.length:0})();break;case"date":case"datetime":a=(()=>{const t=e=>{if(Hp(e)){const t=new Date(e);return"datetime"===i.opcode?(t.setUTCSeconds(0),t.setUTCMilliseconds(0)):(t.setUTCHours(0),t.setUTCMinutes(0),t.setUTCSeconds(0),t.setUTCMilliseconds(0)),t.getTime()}},n=Lp.UTC,r=t(FS(i.value,n,e,o)),a=t(FS(i.cona,n,e,o));let l=!1;switch(i.compareMode){case"equal":l=r===a;break;case"before":l=Hp(r)&&Hp(a)&&r<a;break;case"after":l=Hp(r)&&Hp(a)&&r>a;break;case"between":const t=FS(i.conb,n,e,o);l=Hp(r)&&Hp(a)&&Hp(t)&&r>=dp.min(a,t)&&r<=dp.max(a,t);break;case"defined":l=Hp(r)}return FS(l?i.outa:i.outb,s,e,o)})();break;case"day-of-month":case"day-of-week":case"hour":case"millisecond":case"minute":case"month":case"second":case"year":a=(()=>{const e=Pp(i.value)&&o(i.value);if(e&&e.hasValue&&e.slot instanceof Cb.Date){const t=e.slot.toDate(e.value);switch(i.opcode){case"year":return t.getUTCFullYear();case"month":return t.getUTCMonth()+1;case"day-of-month":return t.getUTCDate();case"day-of-week":return t.getUTCDay();case"hour":return t.getUTCHours();case"minute":return t.getUTCMinutes();case"second":return t.getUTCSeconds();case"millisecond":return t.getUTCMilliseconds()}}})();break;case"equation":a=(()=>{const t=FS(i.value,s,e,o),n=FS(i.cona,s,e,o);let r=!1;switch(i.compareMode){case"equal":r=t===n;break;case"below":r=Hp(t)&&Hp(n)&&t<n;break;case"above":r=Hp(t)&&Hp(n)&&t>n;break;case"between":const a=FS(i.conb,s,e,o);r=Hp(t)&&Hp(n)&&Hp(a)&&t>=dp.min(n,a)&&t<=dp.max(n,a);break;case"defined":r=Hp(t)}return FS(r?i.outa:i.outb,s,e,o)})();break;case"evaluate":a=(()=>{let t=!1;const r=Pp(i.value)&&o(i.value);if(r&&r.hasValue){const e=i.ignoreCase?pp.lowercase(r.string):r.string,s=(a=n(Pp(i.cona)?i.cona:""),i.ignoreCase?pp.lowercase(a):a);switch(i.compareMode){case"equal":t=e===s;break;case"contains":t=s&&-1!==e.indexOf(s)||!1;break;case"starts":t=s&&0===e.indexOf(s)||!1;break;case"ends":t=s&&e.lastIndexOf(s)===e.length-s.length||!1;break;case"defined":t=""!==e}}var a;return FS(t?i.outa:i.outb,s,e,o)})();break;case"exp":a=US(FS(i.exponent,s,e,o),(e=>Math.exp(e)));break;case"fact":a=US(FS(i.value,s,e,o),HS);break;case"floor":a=US(FS(i.value,s,e,o),(e=>dp.floor(e)));break;case"gamma":a=US(FS(i.value,s,e,o),RS);break;case"lines":a=(()=>{const e=Pp(i.value)&&o(i.value);return e&&e.hasValue&&e.string&&e.string.split("\n").length||0})();break;case"ln":a=US(FS(i.value,s,e,o),(e=>Math.log(e)));break;case"log":a=US(FS(i.value,s,e,o),(e=>Math.log10(e)));break;case"max":a=US(FS(i.value,s,e,o),(t=>{const n=FS(i.max,s,e,o);return Hp(n)?dp.max(t,n):t}));break;case"min":a=US(FS(i.value,s,e,o),(t=>{const n=FS(i.min,s,e,o);return Hp(n)?dp.min(t,n):t}));break;case"mod":a=US(FS(i.value,s,e,o),(t=>{const n=FS(i.divisor,s,e,o);return Hp(n)&&0!==n?t%n:void 0}));break;case"number":a=FS(i.value,s,e,o);break;case"occurrences":a=(()=>{const e=Pp(i.value)&&o(i.value);if(e&&e.hasValue){if("regex"!==i.compareMode){const t=Pp(i.cona)&&(i.ignoreCase?pp.lowercase(i.cona):i.cona)||"",s=i.ignoreCase?pp.lowercase(e.string):e.string;return t&&s?s.split(t).length-1:0}try{const t=Pp(i.cona)&&i.cona||"",s=t.indexOf("/"),o=t.lastIndexOf("/");return 0===s&&o>s&&(e=>{try{return(e.match(new RegExp(t.substring(1,o),t.substr(o+1)))||[]).length}catch(e){return 0}})(e.string)||0}catch(e){return 0}}return 0})();break;case"percentage":a=US(FS(i.value,s,e,o),(t=>{const n=FS(i.percentage,s,e,o);return Hp(n)?t/100*n:void 0}));break;case"pow":a=US(FS(i.value,s,e,o),(t=>{const n=FS(i.exponent,s,e,o);return Hp(n)?Math.pow(t,n):void 0}));break;case"round":a=US(FS(i.value,s,e,o),(e=>dp.round(e)));break;case"score":a=(()=>{const e=Pp(i.value)&&o(i.value)||void 0;if(e&&i.scores){let t=0;return lm(e.refs,(e=>{t+=i.scores[e]||0})),t}})();break;case"sgn":a=US(FS(i.value,s,e,o),(e=>Math.sign(e)));break;case"sin":a=US(FS(i.value,s,e,o),(e=>Math.sin(OS(e,i.angleUnits))));break;case"sinh":a=US(FS(i.value,s,e,o),(e=>Math.sinh(e)));break;case"sqrt":a=US(FS(i.value,s,e,o),(e=>Math.sqrt(e)));break;case"square":a=US(FS(i.value,s,e,o),(e=>e*e));break;case"sum":a=(()=>{const e=Pp(i.value)&&o(i.value)||void 0;return e?im(e.value):void 0})();break;case"tan":a=US(FS(i.value,s,e,o),(e=>Math.tan(OS(e,i.angleUnits))));break;case"tanh":a=US(FS(i.value,s,e,o),(e=>Math.tanh(e)));break;case"trunc":a=US(FS(i.value,s,e,o),(e=>Math.trunc(e)));break;case"words":a=(()=>{const e=Pp(i.value)&&o(i.value);return e&&e.hasValue?e.string.split(" ").filter((e=>""!==e)).length:0})();break;default:return}switch(t){case"+":return Hp(s)||Hp(a)?(s||0)+(a||0):void 0;case"-":return Hp(s)||Hp(a)?(s||0)-(a||0):void 0;case"*":return Hp(s)&&Hp(a)?s*a:void 0;case"/":return Hp(s)&&Hp(a)&&0!==a?s/a:void 0;case"=":return a}}function YS(e,t,i,s,o,n,r){let a=i&&i.hasValue?i.slot.toValue(i.value):void 0;if(!i||Hp(a)){const s=Vp(t);if(s>0){i||(a=0);for(let l=0;l<s;l++){const s=t[l],c=0!==l||i?s.operator:"=";if(a=BS(e,c,s,a,o,n,r),!Hp(a)&&("*"===c||"/"===c))break}}}return s&&s.set(a),a}let ZS=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};ES([Bf],ZS.prototype,"verify",null),ZS=ES([Uf({type:"condition",identifier:"tripetto-block-calculator"})],ZS);let VS=class extends yf{constructor(){super(...arguments),this.calculatorSlot=Jp(this.valueOf("calculator"))}do(){YS(this.context,this.props.operations||[],void 0,this.calculatorSlot,(e=>this.variableFor(e)),(e=>this.parseVariables(e)),(e=>this.valueOf(e,"dynamic")))}};function WS(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}VS=ES([Uf({type:"headless",identifier:"tripetto-block-calculator"})],VS);let GS=class extends Mf{evaluateDevice(){if(window){const e="live"===this.view&&window.screen&&dp.min(window.screen.width,window.screen.height)||dp.min(window.innerWidth,window.innerHeight);return e<400?"phone"===this.props.deviceType:e<800?"tablet"===this.props.deviceType:"desktop"===this.props.deviceType}return!1}};function $S(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}WS([Bf],GS.prototype,"evaluateDevice",null),GS=WS([Uf({type:"condition",identifier:"tripetto-block-device"})],GS);let QS=class extends Mf{getMatchString(){const e=em(this.props.value);if(lf(e)){const t=this.variableFor(e);return t&&t.hasValue?t.string:""}return this.parseVariables(e,"",!0)}getNumber(e,t){if(Ep(t)&&(e instanceof Cb.Number||e instanceof Cb.Numeric)){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}getDate(e,t){if(Ep(t)&&e instanceof Cb.Date){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value,e.supportsTime?"minutes":void 0):void 0}return e.toValue(Hp(t)?t:Lp.UTC,e.supportsTime?"minutes":void 0)}validate(){if(this.props.variable){const e=this.variableFor(this.props.variable);if(e)if(e.slot instanceof Cb.String||e.slot instanceof Cb.Text){const t=this.props.ignoreCase?pp.lowercase(this.getMatchString()):this.getMatchString(),i=this.props.ignoreCase?pp.lowercase(e.string):e.string;switch(this.props.mode){case"equal":return i===t;case"not-equal":return i!==t;case"contains":return t&&-1!==i.indexOf(t)||!1;case"not-contains":return t&&-1===i.indexOf(t)||!1;case"starts":return t&&0===i.indexOf(t)||!1;case"ends":return t&&i.lastIndexOf(t)===i.length-t.length||!1;case"defined":return""!==i;case"undefined":return""===i}}else if(e.slot instanceof Cb.Number||e.slot instanceof Cb.Numeric){const t=this.getNumber(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&tm(e.value)<t;case"above":return Hp(t)&&e.hasValue&&tm(e.value)>t;case"between":case"not-between":const i=this.getNumber(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&tm(e.value)>=dp.min(t,i)&&tm(e.value)<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}else if(e.slot instanceof Cb.Date){const t=this.getDate(e.slot,this.props.value),i=e.hasValue?e.slot.toValue(e.value,e.slot.supportsTime?"minutes":void 0):void 0;switch(this.props.mode){case"equal":return i===t;case"not-equal":return i!==t;case"before":return Hp(t)&&Hp(i)&&i<t;case"after":return Hp(t)&&Hp(i)&&i>t;case"between":case"not-between":const s=this.getDate(e.slot,this.props.to);return Hp(t)&&Hp(s)&&(Hp(i)&&i>=dp.min(t,s)&&i<=dp.max(t,s))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}else if(e.slot instanceof Cb.Boolean)switch(this.props.mode){case"true":return e.hasValue&&sm(e.value);case"false":return e.hasValue&&!sm(e.value);case"equal":case"not-equal":const t=Pp(this.props.value)&&this.variableFor(this.props.value)||void 0;return t&&(e.hasValue?sm(e.value):void 0)===(t.hasValue?sm(t.value):void 0)||!1;case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};function qS(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}$S([Bf],QS.prototype,"validate",null),QS=$S([Uf({type:"condition",identifier:"tripetto-block-evaluate"})],QS);let XS=class extends Mf{getMatchString(){if(lf(this.props.value)){const e=this.variableFor(this.props.value);return e&&e.hasValue?e.string:""}return this.parseVariables(this.props.value||"","",!0)}isEqual(){const e=this.valueOf();if(e){const t=this.props.ignoreCase?pp.lowercase(this.getMatchString()):this.getMatchString(),i=this.props.ignoreCase?pp.lowercase(e.string):e.string;switch(this.props.mode){case"equals":return i===t;case"not-equals":return i!==t;case"contains":return t&&-1!==i.indexOf(t)||!1;case"not-contains":return t&&-1===i.indexOf(t)||!1;case"starts":return t&&0===i.indexOf(t)||!1;case"ends":return t&&i.lastIndexOf(t)===i.length-t.length||!1;case"defined":return""!==i;case"undefined":return""===i;case"regex":try{const t=this.props.regex||"",i=t.indexOf("/"),s=t.lastIndexOf("/");return 0===i&&s>i&&(e=>{try{return new RegExp(t.substring(1,s),t.substr(s+1)).test(e)===!this.props.invert}catch(e){return!1}})(e.string)}catch(e){return!1}}}return!1}};qS([Bf],XS.prototype,"isEqual",null),XS=qS([Uf({type:"condition",identifier:"tripetto-block-hidden-field:string",alias:"tripetto-block-hidden-field-string"})],XS);let JS=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Number){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}compare(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode)}}return!1}};qS([Bf],JS.prototype,"compare",null),JS=qS([Uf({type:"condition",identifier:"tripetto-block-hidden-field:number",alias:"tripetto-block-hidden-field-number"})],JS);let KS=class extends Mf{compare(){const e=this.valueOf();return e&&e.value===this.props.orientation||!1}};qS([Bf],KS.prototype,"compare",null),KS=qS([Uf({type:"condition",identifier:"tripetto-block-hidden-field:orientation",alias:"tripetto-block-hidden-field-orientation"})],KS);let eI=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Date){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value,"minutes"):void 0}return Hp(t)?e.toValue(t,"minutes"):void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value),i=e.hasValue?e.slot.toValue(e.value,"minutes"):void 0;switch(this.props.mode){case"equal":return i===t;case"not-equal":return i!==t;case"before":return Hp(t)&&Hp(i)&&i<t;case"after":return Hp(t)&&Hp(i)&&i>t;case"between":case"not-between":const s=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(s)&&(Hp(i)&&i>=dp.min(t,s)&&i<=dp.max(t,s))===("between"===this.props.mode)}}return!1}};qS([Bf],eI.prototype,"verify",null),eI=qS([Uf({type:"condition",identifier:"tripetto-block-hidden-field:date"})],eI);let tI=class extends yf{constructor(){super(...arguments),this.fieldSlot=Jp(this.valueOf("value"))}do(){if(!this.fieldSlot.hasValue||"value"===this.props.fieldType||0===this.props.fieldType.indexOf("custom-variable:"))switch(this.props.fieldType){case"value":this.fieldSlot.value=this.parseVariables(this.props.fieldValue||"","",!0);break;case"uuid":this.fieldSlot.value=Xg.SHA2_256("10000000-1000-4000-8000-100000000000".replace(/1|0/g,(()=>(0|16*Math.random()).toString(16))));break;case"timestamp":this.fieldSlot.value=Lp.UTC;break;case"variable":let e;if(this.props.fieldVariable)try{let t=window;for(;!e&&t;)e=Xm(t,this.props.fieldVariable),t=t!==window.parent&&window.parent||void 0}catch(e){console.log(`tripetto-block-hidden-field: Access to variable '${this.props.fieldVariable}' is prohibited!`)}"string"==typeof e?this.fieldSlot.value=e:this.fieldSlot.clear();break;case"language":this.fieldSlot.value=navigator.language||"";break;case"querystring":this.fieldSlot.value=(this.props.fieldQueryStringParameter?new URLSearchParams(document.location.search.substring(1)).get(this.props.fieldQueryStringParameter):document.location.search.substring(1))||"";break;case"cookie":if(this.props.fieldCookie){const e=document.cookie.match(RegExp(`(?:^|;\\s*)${this.props.fieldCookie.replace(/([.*+?\^${}()|\[\]\/\\])/g,"\\$1")}=([^;]*)`));this.fieldSlot.value=e&&e[1]||""}else this.fieldSlot.value=document.cookie||"";break;case"localStorage":const t=this.props.fieldLocalStorage&&localStorage.getItem(this.props.fieldLocalStorage);this.fieldSlot.value="string"==typeof t?t:"";break;case"sessionStorage":const i=this.props.fieldSessionStorage&&sessionStorage.getItem(this.props.fieldSessionStorage);this.fieldSlot.value="string"==typeof i?i:"";break;case"user-agent":this.fieldSlot.value=navigator.userAgent||"";break;case"title":this.fieldSlot.value=document.title||"";break;case"url":try{this.fieldSlot.value=document.URL||window.parent.location.href||""}catch(e){this.fieldSlot.clear(),console.log("tripetto-block-hidden-field: Access to document URL is prohibited!")}break;case"referrer":this.fieldSlot.value=document.referrer||"";break;case"screenOrientation":window.screen&&window.screen.orientation&&window.screen.orientation.type?this.fieldSlot.value="portrait-primary"===window.screen.orientation.type||"portrait-secondary"===window.screen.orientation.type?"portrait":"landscape":this.fieldSlot.value=window.screen&&window.screen.height>window.screen.width?"portrait":"landscape";break;case"screenWidth":this.fieldSlot.value=window.screen&&window.screen.width||0;break;case"screenHeight":this.fieldSlot.value=window.screen&&window.screen.height||0;break;case"devicePixelRatio":this.fieldSlot.value=window.devicePixelRatio||1;break;default:if(0===this.props.fieldType.indexOf("custom-variable:")){let e;try{let t=window;for(;!e&&t;)e=Xm(t,"TRIPETTO_CUSTOM_VARIABLES"),t=t!==window.parent&&window.parent||void 0}catch(t){e=void 0}Tp(e)?this.fieldSlot.value=em(Xm(e,this.props.fieldType.replace("custom-variable:",""))):this.fieldSlot.clear()}}}};function iI(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}tI=qS([Uf({type:"headless",identifier:"tripetto-block-hidden-field"})],tI);const sI=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;let oI=class extends Mf{willMail(){const e=this.valueOf("recipient");return this.props.willMail?e&&e.hasValue&&sI.test(e.string)||!1:!e||""===e.string}};iI([Bf],oI.prototype,"willMail",null),oI=iI([Uf({type:"condition",identifier:"tripetto-block-mailer"})],oI);let nI=class extends yf{constructor(){super(...arguments),this.recipientSlot=Jp(this.valueOf("recipient")),this.subjectSlot=Jp(this.valueOf("subject")),this.messageSlot=Jp(this.valueOf("message")),this.senderSlot=this.valueOf("sender"),this.dataSlot=this.valueOf("data")}do(){var e,t;if(this.recipientSlot.value=(this.props.recipient&&"fixed"!==this.props.recipient?null===(e=this.variableFor(this.props.recipient))||void 0===e?void 0:e.string:this.props.recipientFixed)||"",this.subjectSlot.value=this.parseVariables(this.node.name||"","-"),this.messageSlot.value=this.parseVariables(this.node.description||"","-",!0),this.senderSlot){const e=(this.props.sender&&"fixed"!==this.props.sender?null===(t=this.variableFor(this.props.sender))||void 0===t?void 0:t.string:this.props.senderFixed)||"";this.senderSlot.value=sI.test(e)&&e||""}this.dataSlot&&this.props.includeData&&(this.dataSlot.value=!0)}validate(){return!this.recipientSlot.string||sI.test(this.recipientSlot.string)}};function rI(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}iI([Yf],nI.prototype,"validate",null),nI=iI([Uf({type:"headless",identifier:"tripetto-block-mailer"})],nI);let aI=class extends Mf{validate(){if(this.props.variable){const e=this.variableFor(this.props.variable);if(e)try{const t=this.props.regex||"",i=t.indexOf("/"),s=t.lastIndexOf("/");return 0===i&&s>i&&(e=>{try{return new RegExp(t.substring(1,s),t.substr(s+1)).test(e)===!this.props.invert}catch(e){return!1}})(e.string)}catch(e){return!1}}return!1}};rI([Bf],aI.prototype,"validate",null),aI=rI([Uf({type:"condition",identifier:"tripetto-block-regex"})],aI),Tf("tripetto-block-setter"),zf();let lI=class extends yf{querystring(e,t){const i=new URLSearchParams(document.location.search.substring(1)).get(e);return Ep(i)?i:t}do(){lm(this.props.values,(e=>{if(e.variable&&(Ap(e.value)||Up(e.lock))){const t=this.mutableValueOf(e.variable);if(t&&!t.slot.protected){const i=t.isLocked;if(Ap(e.value))if(i&&t.unlock(),e.value===(t.slot instanceof Cb.Boolean&&0))t.clear();else if(void 0!==e.mode||t.allowPrefill)if(t.slot instanceof Cb.String||t.slot instanceof Cb.Text){if(e.querystring){const i=t.slot.toValue(this.querystring(Ep(e.value)&&e.value||""));"concatenate"===e.mode?t.concatenate(i,e,e.separator):t.set(i)}else if(Pp(e.value)&&lf(e.value)){const i=this.variableFor(e.value);i&&i.hasValue?"concatenate"===e.mode?t.concatenate(i.string,e,e.separator):t.set(i.string,i.reference):"concatenate"!==e.mode&&t.clear()}else if(Ep(e.value)){const i=this.parseVariables(e.value,"",!0);"concatenate"===e.mode?t.concatenate(i,e,e.separator):t.set(i,e.reference)}}else if(t.slot instanceof Cb.Number||t.slot instanceof Cb.Numeric){const i=i=>{if(Hp(i)){const s=t.hasValue&&(t.slot instanceof Cb.Number||t.slot instanceof Cb.Numeric)?t.slot.toValue(t.value):0;switch(e.mode){case"+":t.operation(s+i,e);break;case"-":t.operation(s-i,e);break;case"*":t.operation(s*i,e);break;case"/":t.operation(0!==i?s/i:void 0,e);break;default:t.set(i)}}else"+"!==e.mode&&"-"!==e.mode&&t.clear()};if(e.querystring)i(t.slot.toValue(this.querystring(Ep(e.value)&&e.value||"")));else if(!0===e.value)i(YS(this.context,e.operations||[],void 0,void 0,(e=>this.variableFor(e)),(e=>this.parseVariables(e))));else if(Ep(e.value)){const t=this.variableFor(e.value);i(t&&(t.slot instanceof Cb.Number||t.slot instanceof Cb.Numeric)&&t.hasValue?t.slot.toValue(t.value):void 0)}else Hp(e.value)&&i(e.value)}else if(t.slot instanceof Cb.Boolean){const i=i=>{const s=t.hasValue&&t.slot instanceof Cb.Boolean?t.slot.toValue(t.value):void 0;switch(e.mode){case"OR":t.operation(!(!s&&!i),e);break;case"NOR":t.operation(!0!==s&&!0!==i,e);break;case"AND":t.operation(!0===s&&!0===i,e);break;case"NAND":t.operation(!0!==s||!0!==i,e);break;case"XOR":t.operation(s!==i,e);break;case"XNOR":t.operation(s===i,e);break;default:t.set(i)}};if(e.querystring)i(t.slot.toValue(this.querystring(Ep(e.value)&&e.value||"","false")));else if(Ep(e.value)){const t=this.variableFor(e.value);i(t&&t.slot instanceof Cb.Boolean&&t.hasValue?t.slot.toValue(t.value):void 0)}else Up(e.value)&&i(e.value)}else if(t.slot instanceof Cb.Date)if(e.querystring)t.set(t.slot.toValue(this.querystring(Ep(e.value)&&e.value||"")));else if(!0===e.value)t.set(Lp.UTC);else if(Ep(e.value)){const i=this.variableFor(e.value);t.set(i&&i.slot instanceof Cb.Date&&i.hasValue?i.slot.toValue(i.value):void 0)}else Hp(e.value)&&t.set(e.value);(Up(e.lock)||i)&&(!Up(e.lock)||e.lock?t.lock():t.unlock())}}}))}};function cI(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}lI=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}([Uf({type:"headless",identifier:"tripetto-block-setter"})],lI);let uI=class extends Mf{verify(){const e=this.valueOf();if(e)switch(this.props.mode){case"true":return e.hasValue&&sm(e.value);case"false":return e.hasValue&&!sm(e.value);case"equal":case"not-equal":const t=Pp(this.props.value)&&this.variableFor(this.props.value)||void 0;return t&&(e.hasValue?sm(e.value):void 0)===(t.hasValue?sm(t.value):void 0)||!1;case"defined":return e.hasValue;case"undefined":return!e.hasValue}return!1}};cI([Bf],uI.prototype,"verify",null),uI=cI([Uf({type:"condition",identifier:"tripetto-block-variable:boolean"})],uI);let hI=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Date){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return e.toValue(Hp(t)?t:Lp.UTC)}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value),i=e.hasValue?e.slot.toValue(e.value):void 0;switch(this.props.mode){case"equal":return i===t;case"not-equal":return i!==t;case"before":return Hp(t)&&Hp(i)&&i<t;case"after":return Hp(t)&&Hp(i)&&i>t;case"between":case"not-between":const s=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(s)&&(Hp(i)&&i>=dp.min(t,s)&&i<=dp.max(t,s))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};cI([Bf],hI.prototype,"verify",null),hI=cI([Uf({type:"condition",identifier:"tripetto-block-variable:date"})],hI);let dI=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};cI([Bf],dI.prototype,"verify",null),dI=cI([Uf({type:"condition",identifier:"tripetto-block-variable:numeric"})],dI);let pI=class extends Mf{getMatchString(){if(lf(this.props.match)){const e=this.variableFor(this.props.match);return e&&e.hasValue?e.string:""}return this.parseVariables(this.props.match||"","",!0)}isEqual(){const e=this.valueOf();if(e){const t=this.props.ignoreCase?pp.lowercase(this.getMatchString()):this.getMatchString(),i=this.props.ignoreCase?pp.lowercase(e.string):e.string;switch(this.props.mode){case"exact":return i===t;case"not-exact":return i!==t;case"contains":return t&&-1!==i.indexOf(t)||!1;case"not-contains":return t&&-1===i.indexOf(t)||!1;case"starts":return t&&0===i.indexOf(t)||!1;case"ends":return t&&i.lastIndexOf(t)===i.length-t.length||!1;case"defined":return""!==i;case"undefined":return""===i}}return!1}};cI([Bf],pI.prototype,"isEqual",null),pI=cI([Uf({type:"condition",identifier:"tripetto-block-variable:text"})],pI),Tf("tripetto-block-variable"),zf();let mI=class extends yf{constructor(){super(...arguments),this.variableSlot=Jp(this.valueOf("variable","static",{modifier:e=>this.props.calculator&&this.props.operations&&e.slot instanceof Cb.Numeric&&{value:YS(this.context,this.props.operations,e,void 0,(e=>this.variableFor(e)),(e=>this.parseVariables(e)))}||void 0}))}do(){this.variableSlot.reset(Pp(this.props.prefill)?this.parseVariables(this.props.prefill,"",!0):this.props.prefill)}};function gI(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}mI=cI([Uf({type:"headless",identifier:"tripetto-block-variable"})],mI);let bI=class extends Mf{isChecked(){const e=this.valueOf();return!!e&&e.value===this.props.checked}};gI([Bf],bI.prototype,"isChecked",null),bI=gI([Uf({type:"condition",identifier:"tripetto-block-checkbox",alias:"checkbox"})],bI);let fI=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};gI([Bf],fI.prototype,"verify",null),fI=gI([Uf({type:"condition",identifier:"tripetto-block-checkbox:score"})],fI);class yI extends ff{constructor(){super(...arguments),this.scoreSlot=this.valueOf("score","feature"),this.checkboxSlot=Jp(this.valueOf("checked","static",{confirm:!0,onChange:e=>{this.scoreSlot&&e.slot instanceof Cb.Boolean&&this.scoreSlot.set(e.hasValue?tm(!0===e.value?this.props.scoreForTrue:this.props.scoreForFalse):void 0)}})),this.required=this.checkboxSlot.slot.required||!1}get value(){return this.checkboxSlot.value}set value(e){this.checkboxSlot.value=e}toggle(){this.checkboxSlot.value=!this.checkboxSlot.value}validate(){return!this.required||!0===this.checkboxSlot.value}}gI([Yf],yI.prototype,"validate",null);const vI=tw.div`
    display: block;
    width: 100%;
    margin: 0;
    padding: 0;
`,MI=tw.label`
    box-sizing: border-box;
    appearance: none;
    outline: none;
    font-size: 1em;
    line-height: 1.6em;
    padding-left: calc(${e=>8/7*e.props.scale+.375}em + ${e=>2*e.props.borderSize}px);
    margin: 0;
    position: relative;
    display: inline-flex;
    min-height: ${e=>(8/7+.19)*e.props.scale}em;
    user-select: none;
    opacity: ${e=>e.props.disabled?".4":void 0};
    transition: opacity 0.15s ease-in-out;

    > input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0;
        width: 0;
    }

    > span {
        box-sizing: content-box;
        color: ${e=>Uw(e.props.error?e.props.errorColor:e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.makeUnclear("#000")))};
    }

    > span:last-child {
        position: absolute;
        width: ${e=>8/7*e.props.scale}em;
        height: ${e=>8/7*e.props.scale}em;
        top: 0.095em;
        left: 0;
        background-color: ${e=>Uw(e.props.error&&"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?e.props.errorColor:e.props.backgroundColor)};
        border: ${e=>`${e.props.borderSize}px solid ${Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)}`};
        border-radius: ${e=>Hp(e.props.roundness)?`${dp.min(e.props.roundness,4)}px`:4/14*e.props.scale+"em"};
        transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,
            opacity 0.15s ease-in-out;

        :after {
            width: ${e=>3/14*e.props.scale}em;
            height: ${e=>.5*e.props.scale}em;
            left: ${e=>6/14*e.props.scale}em;
            top: ${e=>2/14*e.props.scale}em;
            border-style: solid;
            border-width: 0 ${e=>2/14*e.props.scale}em ${e=>2/14*e.props.scale}em 0;
            border-color: ${e=>Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&(e.props.error||"transparent"===e.props.borderColor))))};
            transform: rotate(45deg) scale(0.1);
            transition: transform 0.15s linear, opacity 0s linear 0.15s;
            content: "";
            position: absolute;
            opacity: 0;
        }
    }

    :hover {
        > input:not(:disabled) + span + span {
            box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.2)))))}`||void 0};
        }
    }

    > input {
        :not(:disabled) {
            :active + span {
                color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.makeUnclear("#000")))};
            }

            :active + span + span {
                background-color: ${e=>Uw(e.props.backgroundColor)};
                border: ${e=>e.props.borderSize}px solid
                    ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)};
                box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.1rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.2)))))}`||void 0};

                :after {
                    border-color: ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor)))};
                }
            }

            :focus + span {
                color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.makeUnclear("#000")))};
            }

            :focus + span + span {
                background-color: ${e=>Uw(e.props.backgroundColor)};
                border: ${e=>e.props.borderSize}px solid
                    ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)};
                box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.5)))))}`||void 0};

                :after {
                    border-color: ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor)))};
                }
            }
        }

        :checked + span + span {
            :after {
                transform: rotate(45deg);
                opacity: 1;
                transition: transform 0.15s linear, opacity 0s linear;
            }
        }
    }
`,wI=e=>{const t=e.value,i=(0,o.useRef)(0),[s,n]=(0,o.useState)("object"!=typeof t&&t||!1),[r,a]="object"==typeof t?[0!==i.current?s:t.value,e=>{Hm(i.current),n(e),i.current=Rm((()=>{i.current=0,t.value=e}),50)}]:[s,n],l=t=>{a(t),e.onChange&&e.onChange(t)},c=e.disabled||e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||!1,u={disabled:c,color:e.styles.backgroundColor,backgroundColor:e.styles.backgroundColor||"transparent",borderColor:"transparent"===e.styles.borderColor&&"transparent"===e.styles.backgroundColor&&Uw(e.styles.textColor,(e=>e.makeUnclear("#000")))||Uw(e.styles.borderColor)!==Uw(e.styles.backgroundColor)&&e.styles.borderColor||"transparent",borderSize:e.styles.borderSize||1,roundness:e.styles.roundness,textColor:e.styles.textColor,errorColor:e.styles.errorColor,error:e.error||!1,scale:e.styles.scale||1};return(0,o.useEffect)((()=>()=>{Hm(i.current)}),[]),"object"==typeof t&&t.confirm(),(0,yy.jsx)(vI,{children:(0,yy.jsxs)(MI,Object.assign({props:u},{children:[(0,yy.jsx)("input",{ref:e.onAutoFocus,type:"checkbox",checked:r,tabIndex:e.tabIndex,"aria-describedby":e.ariaDescribedBy,disabled:c,onChange:e=>l(e.target.checked),onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:t=>{"Enter"===t.key?(t.preventDefault(),t.shiftKey&&e.onSubmit?e.onSubmit():l(!r)):"Escape"===t.key?t.currentTarget.blur():"Tab"===t.key&&(t.shiftKey?e.onCancel&&(t.preventDefault(),e.onCancel()):(e.tabSubmit||"boolean"!=typeof e.tabSubmit)&&e.onSubmit&&(t.preventDefault(),e.onSubmit()))}},void 0),(0,yy.jsxs)("span",{children:[e.label||"...",e.required&&!e.styles.hideRequiredIndicator&&(0,yy.jsx)(Bw,{props:{errorColor:u.errorColor}},void 0),e.description&&(0,yy.jsxs)("small",{children:[(0,yy.jsx)("br",{},void 0),e.description]},void 0)]},void 0),(0,yy.jsx)("span",{},void 0)]}),void 0)},void 0)};let xI=class extends yI{constructor(){super(...arguments),this.hideRequiredIndicatorFromName=!0}render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.placeholder&&e.name,e.description,(0,yy.jsx)(wI,{styles:e.styles.checkboxes,value:this.checkboxSlot,required:this.required,error:e.isFailed,label:e.label,tabIndex:e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function SI(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}xI=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-checkbox",alias:"checkbox"})],xI);let II=class extends Mf{isChecked(){const e=this.valueOf();return e&&e.value===this.props.checked||!1}};SI([Bf],II.prototype,"isChecked",null),II=SI([Uf({type:"condition",identifier:"tripetto-block-checkboxes"})],II);let kI=class extends Mf{allUnchecked(){const e=this.slots;return!e||!e.each((e=>{const t=this.valueOf(e);return t&&t.value||!1}))}};SI([Bf],kI.prototype,"allUnchecked",null),kI=SI([Uf({type:"condition",identifier:"tripetto-block-checkboxes:unchecked"})],kI);let NI=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Number){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode)}}return!1}};SI([Bf],NI.prototype,"verify",null),NI=SI([Uf({type:"condition",identifier:"tripetto-block-checkboxes:counter"})],NI);let _I=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};SI([Bf],_I.prototype,"verify",null),_I=SI([Uf({type:"condition",identifier:"tripetto-block-checkboxes:score"})],_I);class LI extends ff{constructor(){super(...arguments),this.counterSlot=this.valueOf("counter","feature"),this.concatenationSlot=this.valueOf("concatenation","feature"),this.scoreSlot=this.valueOf("score","feature")}get required(){return this.props.required||!1}transform(){const e=fm(um(this.props.checkboxes,(e=>({id:e.id,label:e.value||e.name||"",exclusive:e.exclusive,valueRef:this.valueOf(e.id)}))),(e=>{var t;return!0===(null===(t=e.valueRef)||void 0===t?void 0:t.value)})).sort(((e,t)=>{var i,s;return((null===(i=t.valueRef)||void 0===i?void 0:i.time)||0)-((null===(s=e.valueRef)||void 0===s?void 0:s.time)||0)})),t=e.length&&e[0];if(t&&e.forEach((e=>{e.id!==t.id&&(t.exclusive||e.exclusive)&&(e.valueRef.value=!1)})),this.props.max){const t=this.props.max;let i=0;e.forEach((e=>{var s;!0===(null===(s=e.valueRef)||void 0===s?void 0:s.value)&&(i++,i>t&&(e.valueRef.value=!1))}))}if(this.counterSlot){const t=fm(e,(e=>{var t;return!0===(null===(t=e.valueRef)||void 0===t?void 0:t.value)})).length;this.counterSlot.set(t)}if(this.concatenationSlot){const e=[];let t="",i=0;if(lm(this.props.checkboxes,(s=>{var o;const n=s.value||s.name||"";if(n&&!0===(null===(o=this.valueOf(s.id))||void 0===o?void 0:o.value))switch(this.props.formatSeparator){case"space":t+=(""===t?"":" ")+n;break;case"list":t+=(""===t?"":"\n")+n;break;case"bullets":t+=(""===t?"":"\n")+"- "+n;break;case"numbers":t+=(""===t?"":"\n")+`${++i}. ${n}`;break;case"conjunction":case"disjunction":e.push(n);break;case"custom":t+=(""===t?"":this.props.formatSeparatorCustom||"")+n;break;default:t+=(""===t?"":", ")+n}})),"conjunction"===this.props.formatSeparator||"disjunction"===this.props.formatSeparator)try{const i=new Intl.ListFormat(this.context.l10n.current||"en",{type:this.props.formatSeparator});t=i.format(e)}catch(i){t=pp.iterateToString(e,", ")}this.concatenationSlot.set(t)}}score(e){this.scoreSlot&&Hp(e.score)&&this.scoreSlot.set(hm(this.props.checkboxes,((e,t)=>{var i;return e+(!0===(null===(i=this.valueOf(t.id))||void 0===i?void 0:i.value)&&t.score||0)}),0))}checkboxSlot(e){return this.valueOf(e.id,"dynamic",{confirm:!0,onChange:()=>{this.transform(),this.score(e)},onContext:(t,i)=>{var s;this.scoreSlot&&(null===(s=i.contextualValueOf(this.scoreSlot))||void 0===s||s.set(!0===t.value?e.score||0:void 0))}})}isChecked(e){const t=this.checkboxSlot(e);return(null==t?void 0:t.value)||!1}check(e,t){const i=this.checkboxSlot(e);return!!i&&(i.value=t,i.value)}toggle(e){const t=this.checkboxSlot(e);t&&(t.value=!t.value)}checkboxes(e){var t;const i=this.props.max&&fm(this.props.checkboxes,(e=>{var t;return!0===(null===(t=this.checkboxSlot(e))||void 0===t?void 0:t.value)})).length||0,s=(null===(t=this.props.checkboxes)||void 0===t?void 0:t.map((t=>{const s=this.checkboxSlot(t);return Object.assign(Object.assign({},t),{label:e.markdownifyToJSX(t.name,!1),description:t.description&&e.markdownifyToJSX(t.description,!0)||void 0,value:s,tabIndex:e.tabIndex,disabled:this.props.max&&i>=this.props.max&&!0!==(null==s?void 0:s.value)||!1})})))||[];if(this.props.randomize&&s.length>1){if(!this.randomized||this.randomized.length!==s.length||ym(this.randomized,(e=>{var t;return(null===(t=s[e.index])||void 0===t?void 0:t.id)!==e.id}))){this.randomized=s.map(((e,t)=>({index:t,id:e.id})));let e=this.randomized.length;for(;--e;){const t=Math.floor(Math.random()*e),i=this.randomized[e];this.randomized[e]=this.randomized[t],this.randomized[t]=i}}return this.randomized.map((e=>s[e.index]))}return this.randomized&&(this.randomized=void 0),s}validate(){if(this.props.min||this.props.max){const e=fm(this.props.checkboxes,(e=>{var t;return!0===(null===(t=this.checkboxSlot(e))||void 0===t?void 0:t.value)})).length;if(this.props.min&&e<this.props.min||this.props.max&&e>this.props.max)return!1}return!this.props.required||!!ym(this.props.checkboxes,(e=>{var t;return!0===(null===(t=this.valueOf(e.id))||void 0===t?void 0:t.value)}))}}SI([Yf],LI.prototype,"validate",null);const CI=e=>(0,yy.jsx)(yy.Fragment,{children:e.checkboxes.map(((t,i)=>("preview"===e.view||t.label)&&(0,yy.jsx)(wI,{styles:e.styles,label:t.label,description:t.description,required:t.required,disabled:t.disabled,readOnly:t.readOnly,error:t.error,tabIndex:t.tabIndex||e.tabIndex,tabSubmit:i+1===e.checkboxes.length,value:t.value,ariaDescribedBy:e.ariaDescribedBy,onChange:t.onChange,onAutoFocus:0===i&&e.onAutoFocus||void 0,onFocus:e.onFocus,onBlur:e.onBlur,onSubmit:e.onSubmit,onCancel:0===i&&e.onCancel||void 0},t.id||i)))},void 0);let DI=class extends LI{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(CI,{styles:e.styles.checkboxes,view:e.view,checkboxes:this.checkboxes(e),ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function AI(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}DI=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-checkboxes"})],DI);let jI=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Date){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return e.toValue(Hp(t)?t:Lp.UTC)}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value),i=e.hasValue?e.slot.toValue(e.value):void 0;switch(this.props.mode){case"equal":return i===t;case"not-equal":return i!==t;case"before":return Hp(t)&&Hp(i)&&i<t;case"after":return Hp(t)&&Hp(i)&&i>t;case"between":case"not-between":const s=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(s)&&(Hp(i)&&i>=dp.min(t,s)&&i<=dp.max(t,s))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};AI([Bf],jI.prototype,"verify",null),jI=AI([Uf({type:"condition",identifier:"tripetto-block-date"})],jI);class TI extends ff{constructor(){super(...arguments),this.dateSlot=Jp(this.valueOf("date")),this.toSlot=this.valueOf("to"),this.required=this.dateSlot.slot.required||!1}get fromError(){return!this.dateSlot.hasValue||!1}get toError(){return!this.toSlot||!this.toSlot.hasValue||this.toSlot.value<this.dateSlot.value}get toPlaceholder(){return pf(this.props.placeholder||"",this.context)||""}validate(){return!this.props.range||this.toSlot&&this.dateSlot.hasValue===this.toSlot.hasValue&&this.toSlot.value>=this.dateSlot.value||!1}}AI([Yf],TI.prototype,"validate",null);const zI=tw.input`
    appearance: none;
    outline: none;
    box-sizing: border-box;
    display: block;
    width: 100%;
    height: ${e=>e.props.height?`${e.props.height}px`:void 0};
    font-size: 1em;
    line-height: 1.5em;
    background-color: ${e=>Uw(e.props.error&&"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?e.props.errorColor:e.props.backgroundColor)};
    background-image: ${e=>e.props.error?`url("data:image/svg+xml;base64,${Yw(Uw(e.props.errorColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor))))}")`:""};
    background-repeat: no-repeat;
    background-size: ${8/7}em;
    background-position: right 0.6em center;
    border: ${e=>`${"transparent"===e.props.backgroundColor&&"transparent"===e.props.borderColor?0:e.props.borderSize}px solid ${Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)}`};
    color: ${e=>Uw(e.props.error?"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?Uw(e.props.errorColor,(e=>e.makeBlackOrWhite())):e.props.errorColor:e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
    border-radius: ${e=>Hp(e.props.roundness)?`${e.props.roundness}px`:"0.5em"};
    padding: ${e=>"transparent"===e.props.backgroundColor&&"transparent"===e.props.borderColor?"0":.375*e.props.scale+"em 0.75em"};
    padding-right: ${e=>e.props.error?8/7+.75+"em":void 0};
    margin: 0;
    opacity: 0.65;
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,
        opacity 0.15s ease-in-out;

    ::placeholder {
        color: ${e=>Uw(e.props.error?"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?Uw(e.props.errorColor,(e=>e.makeBlackOrWhite())):e.props.errorColor:e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
        opacity: 0.5;
        transition: color 0.15s ease-in-out opacity 0.15s ease-in-out;
    }

    :not(:disabled):not([readonly]) {
        opacity: 1;

        :hover {
            box-shadow: ${e=>e.props.placeholder&&("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.2)))))}`||void 0};
        }

        ${e=>!e.props.placeholder&&RM`
                background-color: ${Uw(e.props.backgroundColor)};
                background-image: none;
                border-color: ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)};
                color: ${Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
                box-shadow: ${("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.5)))))}`||void 0};
                ::placeholder {
                    color: ${Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
                    opacity: 0.3;
                }
            `}
    }

    ::-webkit-clear-button,
    ::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
        height: 1px;
        display: none;
    }
`;function EI(e,t="datetime"){if(!e)return"";if(e instanceof Date&&(e=e.getTime()),0!==e){const i=!0===e?new Date:new Date(e);return`${i.getUTCFullYear()}-${pp.padLeft(i.getUTCMonth()+1,"0",2)}-${pp.padLeft(i.getUTCDate(),"0",2)}`+("datetime"===t?`T${pp.padLeft(i.getUTCHours(),"0",2)}:${pp.padLeft(i.getUTCMinutes(),"0",2)}`:"")}return""}function OI(e){if(e){const t=pp.uppercase(pp.sanitize(e)).replace(" ","T").split("T");if(t.length>0){const e=pp.replaceMultiple(t[0],["/","\\"],"-").split("-"),i=t.length>1?pp.replace(t[1],".",":").split(":"):["0","0"];if(3===e.length&&i.length>=2)return new Date(`${pp.padLeft(tm(e[0]),"0",4)}-${pp.padLeft(tm(e[1]),"0",2)}-${pp.padLeft(tm(e[2]),"0",2)}T${pp.padLeft(tm(i[0]),"0",2)}:${pp.padLeft(tm(i[1]),"0",2)}:00.000Z`)}}return new Date(0)}const PI=e=>{var t,i;const s=e.value instanceof Date?e.value.getTime():e.value,n=(0,o.useRef)({duration:0,handle:0}),[r,a]=(0,o.useState)("text"),[l,c]=(0,o.useState)(0),[u,h]=(0,o.useState)(!1),[d,p]=(0,o.useState)("object"==typeof s?EI(s.slot.toValue(s.pristine),e.mode||"date"):"number"==typeof s?EI(s,e.mode||"date"):""),[m,g]="object"!=typeof s||s instanceof Date?[d,p]:[u?d:s.hasValue?EI(s.slot.toValue(s.pristine),e.mode||"date"):"",e=>{Hm(n.current.handle),p(e);const t=dp.range(2*n.current.duration,16.666666666666668,1e3);n.current.handle=Rm((()=>{const t=Lp.precise;n.current.handle=0,n.current.update=()=>{n.current.duration=Lp.elapsed(t,!0),n.current.update=void 0},s.pristine=""!==e?OI(e).getTime():void 0}),t)}],[b,f]=(0,o.useState)(!!m),y=(0,o.useRef)(!1),v=()=>e.readOnly||"object"==typeof s&&(s.isFrozen||s.isLocked)||!1;return(0,o.useEffect)((()=>()=>{Hm(n.current.handle)}),[]),n.current.update&&n.current.update(),(0,yy.jsxs)(yy.Fragment,{children:[("text"===r||v())&&(0,yy.jsx)(zI,{id:e.id,ref:e.onAutoFocus,type:"text",tabIndex:e.tabIndex,placeholder:e.placeholder,required:e.required||!1,disabled:e.disabled||!1,readOnly:v(),value:m&&("datetime"===e.mode?((null===(t=e.l10n)||void 0===t?void 0:t.locale)||qb.Locales).dateTimeFull(OI(m).getTime(),!0):((null===(i=e.l10n)||void 0===i?void 0:i.locale)||qb.Locales).dateFull(OI(m).getTime(),!0))||"",autoComplete:"off",inputMode:"none","aria-describedby":e.ariaDescribedBy,props:{backgroundColor:e.styles.backgroundColor||"transparent",borderColor:e.styles.borderColor||"transparent",borderSize:e.styles.borderSize||1,roundness:e.styles.roundness,textColor:e.styles.textColor,errorColor:e.styles.errorColor,errorVisible:b,error:e.error||!1,scale:e.styles.scale||1,placeholder:!0},onChange:()=>{},onFocus:t=>{v()||(y.current=!0,c(t.target.getBoundingClientRect().height),a("datetime"===e.mode?"datetime-local":"date")),rx(h,g,e.onFocus)(t)},onBlur:t=>{v()||ax(h,g,e.onBlur)(t)}},void 0),"text"!==r&&!v()&&(0,yy.jsx)(zI,{id:e.id,ref:e=>{y.current&&e&&(y.current=!1,e.focus())},type:r,placeholder:"yyyy-MM-ddThh:mm",tabIndex:e.tabIndex,required:!0,disabled:e.disabled||!1,defaultValue:m,autoComplete:"off","aria-describedby":e.ariaDescribedBy,min:EI("object"==typeof s&&s.slot.minimum||void 0)||void 0,max:EI("object"==typeof s&&s.slot.maximum||void 0)||void 0,props:{backgroundColor:e.styles.backgroundColor||"transparent",borderColor:e.styles.borderColor||"transparent",borderSize:e.styles.borderSize||1,roundness:e.styles.roundness,textColor:e.styles.textColor,errorColor:e.styles.errorColor,errorVisible:b,error:e.error||!1,scale:e.styles.scale||1,height:l},onChange:t=>{if(g(t.target.value),f(!0),e.onChange){const i=e.onChange(OI(t.target.value));i instanceof Date&&nx(g,EI(i,e.mode||"date"))}},onFocus:t=>{rx(h,g,e.onFocus)(t)},onBlur:t=>{a("text"),"object"==typeof s&&s.hasValue&&p(EI(s.slot.toValue(s.pristine),e.mode||"date")),ax(h,g,e.onBlur)(t)},onKeyDown:t=>{"Enter"===t.key&&e.onSubmit?(t.preventDefault(),e.onSubmit()):"Escape"===t.key?t.currentTarget.blur():"Tab"===t.key&&(t.shiftKey?e.onCancel&&(t.preventDefault(),e.onCancel()):e.onSubmit&&(t.preventDefault(),e.onSubmit()))}},void 0)]},void 0)};let RI=class extends TI{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(PI,{id:e.id,mode:this.props.time?"datetime":"date",styles:e.styles.inputs,l10n:e.l10n,value:this.dateSlot,required:this.required,error:e.isFailed&&(!this.props.range||this.fromError),tabIndex:e.tabIndex,placeholder:e.placeholder,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:(!this.props.range||!this.toSlot)&&t||void 0,onCancel:i},void 0),this.props.range&&this.toSlot&&(0,yy.jsx)(PI,{mode:this.props.time?"datetime":"date",styles:e.styles.inputs,l10n:e.l10n,value:this.toSlot,required:this.required,error:e.isFailed&&(!this.props.range||this.toError),tabIndex:e.tabIndex,placeholder:this.toPlaceholder,ariaDescribedBy:e.ariaDescribedBy,onFocus:e.focus,onBlur:e.blur,onSubmit:t},void 0)]},void 0)}};function HI(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}RI=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-date"})],RI);let FI=class extends Mf{isSelected(){const e=this.valueOf();return e&&(e.reference===this.props.option||!this.props.option&&!e.reference)||!1}};HI([Bf],FI.prototype,"isSelected",null),FI=HI([Uf({type:"condition",identifier:"tripetto-block-dropdown"})],FI);let UI=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};HI([Bf],UI.prototype,"verify",null),UI=HI([Uf({type:"condition",identifier:"tripetto-block-dropdown:score"})],UI);class BI extends ff{constructor(){super(...arguments),this.scoreSlot=this.valueOf("score","feature"),this.dropdownSlot=Jp(this.valueOf("option","static",{confirm:!0,modifier:e=>{if(e.value){if(!e.reference){const t=ym(this.props.options,(t=>t.value===e.value))||ym(this.props.options,(t=>t.id===e.value))||ym(this.props.options,(t=>t.name===e.value))||ym(this.props.options,(t=>t.name.toLowerCase()===e.value.toLowerCase()));return{value:t&&(t.value||t.name),reference:t&&t.id}}if(!ym(this.props.options,(t=>t.id===e.reference)))return{value:void 0,reference:void 0}}},onChange:e=>{if(this.scoreSlot){const t=ym(this.props.options,(t=>t.id===e.reference));this.scoreSlot.set(t&&((null==t?void 0:t.score)||0))}}})),this.required=this.dropdownSlot.slot.required||!1}get options(){var e;const t=(null===(e=this.props.options)||void 0===e?void 0:e.map((e=>Object.assign(Object.assign({},e),{name:pf(e.name,this.context)}))))||[];if(this.props.randomize&&t.length>1){if(!this.randomized||this.randomized.length!==t.length||ym(this.randomized,(e=>{var i;return(null===(i=t[e.index])||void 0===i?void 0:i.id)!==e.id}))){this.randomized=t.map(((e,t)=>({index:t,id:e.id})));let e=this.randomized.length;for(;--e;){const t=Math.floor(Math.random()*e),i=this.randomized[e];this.randomized[e]=this.randomized[t],this.randomized[t]=i}}return this.randomized.map((e=>t[e.index]))}return this.randomized&&(this.randomized=void 0),t}get value(){const e=ym(this.props.options,(e=>e.id===this.dropdownSlot.reference));if(!e&&!this.node.placeholder){const e=Wp(this.props.options,0);return this.dropdownSlot.default(e&&(e.value||e.name),e&&e.id),e&&e.id||""}return e&&e.id||""}set value(e){this.select(ym(this.props.options,(t=>t.id===e)))}select(e){return this.dropdownSlot.set(e&&(e.value||e.name),e&&e.id),e&&e.id||""}}const YI=e=>btoa(`<?xml version="1.0" encoding="utf-8"?>\n        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">\n            <path d="M15.5 7.5c-0.128 0-0.256-0.049-0.354-0.146l-5.646-5.646-5.646 5.646c-0.195 0.195-0.512 0.195-0.707 0s-0.195-0.512 0-0.707l6-6c0.195-0.195 0.512-0.195 0.707 0l6 6c0.195 0.195 0.195 0.512 0 0.707-0.098 0.098-0.226 0.146-0.354 0.146z" fill="${e}"></path>\n            <path d="M9.5 19.5c-0.128 0-0.256-0.049-0.354-0.146l-6-6c-0.195-0.195-0.195-0.512 0-0.707s0.512-0.195 0.707 0l5.646 5.646 5.646-5.646c0.195-0.195 0.512-0.195 0.707 0s0.195 0.512 0 0.707l-6 6c-0.098 0.098-0.226 0.146-0.354 0.146z" fill="${e}"></path>\n        </svg>`),ZI=tw.select`
    appearance: none;
    outline: none;
    box-sizing: border-box;
    display: block;
    width: 100%;
    font-size: 1em;
    line-height: 1.5em;
    background-color: ${e=>Uw(e.props.error&&"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?e.props.errorColor:e.props.backgroundColor)};
    background-image: ${e=>`url("data:image/svg+xml;base64,${YI(Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite()))))}")`+(e.props.error?`,url("data:image/svg+xml;base64,${Yw(Uw(e.props.errorColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor))))}")`:"")};
    background-repeat: no-repeat;
    background-size: 1em, ${8/7}em;
    background-position: right 0.375em center, right 1.75em center;
    border: ${e=>`${"transparent"===e.props.backgroundColor&&"transparent"===e.props.borderColor?0:e.props.borderSize}px solid ${Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)}`};
    border-radius: ${e=>Hp(e.props.roundness)?`${e.props.roundness}px`:"0.5em"};
    color: ${e=>Uw(e.props.error?"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?Uw(e.props.errorColor,(e=>e.makeBlackOrWhite())):e.props.errorColor:e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())),(t=>t.manipulate((e=>e.alpha(.5)),e.props.placeholder&&!e.props.error)))};
    padding: ${e=>"transparent"===e.props.backgroundColor&&"transparent"===e.props.borderColor?"0 1.75em 0 0":`${.375*e.props.scale}em 1.75em ${.375*e.props.scale}em 0.75em`};
    padding-right: ${e=>e.props.error?"3.267857142857143em":void 0};
    margin: 0;
    opacity: 0.65;
    transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, opacity 0.15s ease-in-out;

    ::-ms-expand {
        display: none;
    }

    > option {
        background-color: ${e=>Uw(e.props.backgroundColor)};
        color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
    }

    :not(:disabled) {
        opacity: 1;

        :hover {
            box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.2)))))}`||void 0};
        }

        :focus {
            background-color: ${e=>Uw(e.props.backgroundColor)};
            background-image: ${e=>!e.props.errorVisible&&`url("data:image/svg+xml;base64,${YI(Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite()))))}")`||void 0};
            border-color: ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)};
            color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())),(t=>t.manipulate((e=>e.alpha(.5)),e.props.placeholder)))};
            box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.5)))))}`||void 0};
        }
    }
`,VI=tw.option`
    color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())),(e=>e.manipulate((e=>e.alpha(.5)))))} !important;
`,WI=(e,t,i)=>{const s=ym(t.options,(e=>e.id===i));if(!s&&!t.placeholder&&t.options.length>0){const i=Wp(t.options,0);e.default(i.value||i.name,i.id)}else e.reference!==(null==s?void 0:s.id)&&e.set(s&&(s.value||s.name),null==s?void 0:s.id);return s&&s.id||""},GI=e=>{const t=e.value,i=(0,o.useRef)(0),[s,n]=(0,o.useState)("object"!=typeof t&&t||""),[r,a]="object"==typeof t?[0!==i.current?s:WI(t,e,t.reference),s=>{Hm(i.current),n(s),i.current=Rm((()=>{i.current=0,WI(t,e,s)}),50)}]:[s,n],[l,c]=(0,o.useState)(!!r),u={backgroundColor:e.styles.backgroundColor||"transparent",borderColor:e.styles.borderColor||"transparent",borderSize:e.styles.borderSize||1,roundness:e.styles.roundness,textColor:e.styles.textColor,errorColor:e.styles.errorColor,errorVisible:l,error:e.error||!1,scale:e.styles.scale||1,placeholder:e.placeholder&&""===r||!1};return(0,o.useEffect)((()=>()=>{Hm(i.current)}),[]),(0,yy.jsxs)(ZI,Object.assign({id:e.id,ref:e.onAutoFocus,tabIndex:e.tabIndex,required:e.required||!1,disabled:e.disabled||e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||!1,value:r,"aria-describedby":e.ariaDescribedBy,props:u,onChange:t=>{a(t.target.value),c(!0),e.onChange&&e.onChange(t.target.value)},onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:t=>{t.shiftKey&&"Enter"===t.key&&e.onSubmit?(t.preventDefault(),e.onSubmit()):"Escape"===t.key?t.currentTarget.blur():"Tab"===t.key&&(t.shiftKey?e.onCancel&&(t.preventDefault(),e.onCancel()):e.onSubmit&&(t.preventDefault(),e.onSubmit()))}},{children:[e.placeholder&&(0,yy.jsx)(VI,Object.assign({props:u,value:""},{children:e.placeholder}),void 0),e.options.map(((e,t)=>e.name&&e.id&&(0,yy.jsx)("option",Object.assign({value:e.id},{children:e.name}),t)))]}),void 0)};let $I=class extends BI{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(GI,{id:e.id,styles:e.styles.inputs,options:this.options,value:this.dropdownSlot,required:this.required,error:e.isFailed,tabIndex:e.tabIndex,placeholder:e.placeholder,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};$I=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-dropdown"})],$I);class QI extends ff{stopHere(){return!1}}!function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);n>3&&r&&Object.defineProperty(t,i,r)}([Yf],QI.prototype,"stopHere",null);const qI=tw.div`
    color: ${e=>e.props.styles.inputs.errorColor};
    transition: color 0.15s ease-in-out;

    > h2 {
        font-size: 1.6em;
        line-height: 1.3em;
    }
`;let XI=class extends QI{constructor(){super(...arguments),this.hideButtons=!0}render(e){return(e.name||e.description)&&(0,yy.jsxs)(qI,Object.assign({props:e},{children:[e.name,e.description]}),void 0)}};function JI(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}XI=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-error"})],XI);let KI=class extends Mf{isUploaded(){const e=this.valueOf();return!(!e||!e.value)===this.props.isUploaded}};JI([Bf],KI.prototype,"isUploaded",null),KI=JI([Uf({type:"condition",identifier:"tripetto-block-file-upload"})],KI);class ek extends ff{constructor(){super(...arguments),this.fileSlot=Jp(this.valueOf("file")),this.required=this.fileSlot.slot.required||!1}get isUploading(){return this.fileSlot.isAwaiting}get isImage(){return this.fileSlot.hasValue&&this.hasImageExtension(this.fileSlot.value)}get limit(){return this.props.limit&&this.props.limit>0?this.props.limit:10}get allowedExtensions(){return fm(this.props.extensions&&pp.replace(this.props.extensions.toLowerCase()," ","").split(",")||[],(e=>e.length>=2&&"."===e.charAt(0)))}getExtension(e){const t=e.lastIndexOf(".");return-1!==t&&t>0?e.substr(t).toLowerCase():""}hasImageExtension(e){return e&&[".jpg",".jpeg",".png",".gif"].indexOf(this.getExtension(e))>-1||!1}hasValidFileSize(e){if(this.props.limit){const t=1024*this.props.limit*1024;return e.size<=t}return!0}hasValidFileExtension(e){const t=this.getExtension(e.name),i=this.allowedExtensions;return!(i.length>0)||i.indexOf(t)>-1}convertToBase64(e,t,i){const s=new FileReader;i&&(s.onprogress=e=>i(e.loaded/e.total*100)),s.onload=()=>{t(s.result)},s.readAsDataURL(e)}upload(e,t,i){return this.cache=void 0,this.fileSlot.clear(),new Promise(((s,o)=>{if(1!==e.length)return o("invalid-amount");const n=e[0];return this.hasValidFileExtension(n)?this.hasValidFileSize(n)?(this.fileSlot.await(),void(t?t.put(n,i).then((e=>{this.fileSlot.set(n.name,e),this.isImage?this.convertToBase64(n,(e=>{this.cache=e,s()})):s()})).catch((e=>{this.fileSlot.clear(),o(e)})):this.convertToBase64(n,(e=>{this.fileSlot.set(n.name,e),s()}),i))):o("invalid-size"):o("invalid-extension")}))}download(e){return new Promise(((t,i)=>{this.cache?t(this.cache):this.fileSlot.reference?e?e.get(this.fileSlot.reference).then((e=>this.convertToBase64(e,(e=>t(e))))).catch((()=>{this.fileSlot.clear(),i()})):t(this.fileSlot.reference):i()}))}delete(e){return new Promise(((t,i)=>{this.fileSlot.reference&&e?(this.fileSlot.await(),e.delete(this.fileSlot.reference).then((()=>{this.cache=void 0,this.fileSlot.clear(),t()})).catch((()=>{this.fileSlot.cancelAwait(),i()}))):(this.cache=void 0,this.fileSlot.clear(),t())}))}}const tk=(0,yy.jsxs)("svg",Object.assign({viewBox:"0 0 10240 10240"},{children:[(0,yy.jsx)("path",{d:"M1280 640l5230 0c352,0 656,126 905,375l1170 1170c249,249 375,553 375,905l0 6510 -7680 0 0 -3761 640 1278 0 1843 6400 0 0 -5440c0,-176 -144,-320 -320,-320l-1600 0 0 -1600c0,-176 -144,-320 -320,-320l-4160 0 0 1562 -640 321 0 -2523zm5760 960l0 960 960 0 -960 -960z"},void 0),(0,yy.jsx)("path",{d:"M1155 3583l3035 -1520c158,-79 350,-14 429,143l1636 3266c79,158 15,350 -143,429l-3266 1636c-157,79 -350,14 -429,-143l-670 -1337c55,15 112,23 172,23l556 0 371 741 2693 -1349 -1349 -2693 -1480 741 -1110 0c-154,0 -304,22 -445,63zm168 1626l-43 -85 0 -4c0,-163 157,-320 320,-320l234 0 2 5c-235,31 -430,190 -513,404z"},void 0),(0,yy.jsx)("path",{d:"M1919 5760c-176,0 -319,-144 -319,-320 0,-177 143,-320 320,-320l1280 0c176,0 320,-144 320,-320 0,-176 -144,-320 -320,-320l-1600 0c-341,0 -640,301 -640,640l0 1108c-97,-56 -186,-125 -265,-203 -240,-241 -375,-565 -375,-905 0,-705 575,-1280 1280,-1280l1600 0c529,0 960,431 960,960 0,528 -430,959 -958,960l-1283 0z"},void 0)]}),void 0),ik=(0,yy.jsxs)("svg",Object.assign({className:"icon",viewBox:"0 0 10240 10240"},{children:[(0,yy.jsx)("path",{d:"M640 5760l640 0c248,0 461,132 572,354l607 1212c111,222 324,354 572,354l4178 0c248,0 461,-132 572,-354l607 -1212c111,-222 324,-354 572,-354l640 0 0 3520c0,176 -144,320 -320,320l-8320 0c-176,0 -320,-144 -320,-320l0 -3520z"},void 0),(0,yy.jsx)("path",{d:"M7887 6400l-160 320 -5214 0 -160 -320 5534 0zm-320 640l-72 143c-57,114 -159,177 -286,177l-4178 0c-127,0 -229,-63 -286,-177l-72 -143 4894 0z"},void 0),(0,yy.jsx)("path",{d:"M6853 4293l-1507 1506c-124,124 -328,124 -452,0l-1507 -1506c-124,-125 -187,-277 -187,-453l0 -1159c0,-66 38,-122 99,-147 61,-26 127,-13 174,34l1007 1007 0 -2135c0,-88 72,-160 160,-160l960 0c88,0 160,72 160,160l0 2135 1007 -1007c47,-47 113,-60 174,-34 61,25 99,81 99,147l0 1159c0,176 -63,328 -187,453z"},void 0)]}),void 0),sk=tw.div`
    outline: none;
    box-sizing: border-box;
    display: block;
    width: 100%;
    height: ${e=>14*e.props.scale+"em"};
    position: relative;
    overflow: hidden;
    font-size: 1em;
    line-height: 1.5em;
    background-color: ${e=>Uw(e.props.backgroundColor)};
    background-image: ${e=>e.props.error?`url("data:image/svg+xml;base64,${Yw(Uw(e.props.errorColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor))))}")`:void 0};
    background-repeat: no-repeat;
    background-size: ${8/7}em;
    background-position: right 0.375em top 0.375em;
    border: ${e=>`${"transparent"===e.props.backgroundColor&&"transparent"===e.props.borderColor?0:e.props.borderSize}px solid ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)}`};
    color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
    border-radius: ${e=>Hp(e.props.roundness)?`${e.props.roundness}px`:"0.5em"};
    padding: ${e=>"transparent"===e.props.backgroundColor&&"transparent"===e.props.borderColor?"0":.375*e.props.scale+"em 0.75em"};
    margin: 0;
    opacity: ${e=>e.props.disabled?.65:1};
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,
        opacity 0.15s ease-in-out;
    cursor: default;

    svg {
        fill: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
        transition: fill 0.15s ease-in-out;
    }

    > div,
    > label {
        position: absolute;
        left: 0.75em;
        right: 0.75em;
        top: 0.75em;
        bottom: 0.75em;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    :hover {
        box-shadow: ${e=>!e.props.disabled&&("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.2)))))}`||void 0};
    }

    :focus {
        background-color: ${e=>!e.props.disabled&&Uw(e.props.backgroundColor)||void 0};
        background-image: ${e=>e.props.errorVisible?void 0:"none"};
        border-color: ${e=>!e.props.disabled&&Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)||void 0};
        color: ${e=>!e.props.disabled&&Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))||void 0};
        box-shadow: ${e=>!e.props.disabled&&("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.5)))))}`||void 0};
    }
`,ok=tw.label`
    cursor: pointer;

    * {
        pointer-events: none;
    }

    > svg {
        display: block;
        height: ${e=>5*e.props.scale+"em"};
        margin-bottom: 0.375em;
    }

    > input {
        width: 1px;
        height: 1px;
        opacity: 0;
        overflow: hidden;
        position: absolute;
        z-index: -1;
    }

    > span {
        display: block;
        text-align: center;
    }

    > small {
        display: block;
        text-align: center;
    }
`,nk=tw.div`
    > div {
        display: block;
        text-align: center;
    }

    > div:first-child {
        font-weight: bold;
    }

    > div:last-of-type {
        margin-bottom: 0.375em;
    }
`,rk=tw.div`
    > div {
        display: inline-block;
        width: 80%;
        max-width: 300px;
        height: 16px;
        background-color: ${e=>Uw(e.props.color,(e=>e.manipulate((e=>e.alpha(.25)))))};
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 0.375em;

        > div {
            width: 0%;
            height: 16px;
            background-color: ${e=>Uw(e.props.color)};
            background-image: linear-gradient(
                45deg,
                ${e=>Uw(e.props.color,(e=>e.makeBlackOrWhite().manipulate((e=>e.alpha(.25)))))} 25%,
                transparent 25%,
                transparent 50%,
                ${e=>Uw(e.props.color,(e=>e.makeBlackOrWhite().manipulate((e=>e.alpha(.25)))))} 50%,
                ${e=>Uw(e.props.color,(e=>e.makeBlackOrWhite().manipulate((e=>e.alpha(.25)))))} 75%,
                transparent 75%,
                transparent
            );
            background-size: 1rem 1rem;
            transition: width 0.5s ease-out;
        }
    }

    > span {
        display: block;
        text-align: center;
    }
`,ak=tw.div`
    > img,
    > svg {
        display: block;
        height: ${e=>6*e.props.scale+"em"};
        margin: 0.375em;
    }

    > div {
        display: block;
        text-align: center;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    > div:last-of-type {
        margin-bottom: 0.75em;
    }
`,lk=e=>{const[t,i]=(0,o.useState)({loading:e.controller.isImage,base64data:""});return(0,o.useEffect)((()=>{e.controller.isImage&&(t.loading||i({loading:!0,base64data:""}),e.controller.download(e.service).then((e=>i({loading:!1,base64data:e}))).catch((()=>i({loading:!1,base64data:""}))))}),[e.controller.fileSlot.reference]),t.loading?(0,yy.jsx)(yy.Fragment,{children:e.loading},void 0):t.base64data&&(e.host?(0,yy.jsx)(e.host,{children:(0,yy.jsx)("img",{src:t.base64data},void 0)},void 0):(0,yy.jsx)("img",{src:t.base64data},void 0))||(0,yy.jsx)(yy.Fragment,{children:e.error},void 0)},ck=e=>{const[t,i]=(0,o.useState)(!1),[s,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)(-1),[l,c]=(0,o.useState)(""),[u,h]=(0,o.useState)(!1),d=(0,o.useRef)(),p=e.disabled||e.controller.fileSlot.isFrozen||e.controller.fileSlot.isLocked||!1,m=t=>{p||(a(0),h(!0),e.controller.upload(t,e.service,(e=>a(dp.floor(e)))).then((()=>a(-1))).catch((e=>{c(e),a(-1)})))},g=()=>{e.controller.fileSlot.hasValue&&!l&&-1===r&&(n(!0),h(!0),e.controller.delete(e.service).then((()=>n(!1))).catch((()=>n(!1))))},b={backgroundColor:e.styles.backgroundColor||"transparent",borderColor:e.styles.borderColor||"transparent",borderSize:e.styles.borderSize||1,roundness:e.styles.roundness,textColor:e.styles.textColor,errorColor:e.styles.errorColor,errorVisible:u,error:e.error||!1,scale:e.styles.scale||1,disabled:p};return(0,yy.jsxs)(sk,Object.assign({ref:e.onAutoFocus,props:b,tabIndex:e.tabIndex||0,onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:t=>{"Enter"===t.key?t.shiftKey?e.onSubmit&&(t.preventDefault(),e.onSubmit()):l||-1!==r||(e.controller.fileSlot.hasValue&&e.onSubmit?(t.preventDefault(),e.onSubmit()):d.current&&(t.preventDefault(),d.current.click())):"Escape"===t.key?t.currentTarget.blur():"Tab"===t.key?t.shiftKey?e.onCancel&&(t.preventDefault(),e.onCancel()):e.onSubmit&&(t.preventDefault(),e.onSubmit()):"Delete"===t.key&&e.controller.fileSlot.hasValue&&!l&&-1===r&&(t.preventDefault(),g())}},{children:[!e.controller.fileSlot.hasValue&&!l&&-1===r&&(0,yy.jsxs)(ok,Object.assign({props:b,onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),p||-1!==r||i(!0)},onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),i(!1)},onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),i(!1),!p&&-1===r){const t=e.dataTransfer.files;t&&m(t)}}},{children:[ik,(0,yy.jsx)("input",{ref:e=>d.current=e,type:"file",multiple:!1,tabIndex:-1,disabled:p,"aria-describedby":e.ariaDescribedBy,onChange:e=>{e.target&&e.target.files&&m(e.target.files)}},void 0),(0,yy.jsx)("span",{children:e.labels(t?"dragging":"explanation","")},void 0),e.controller.limit>0&&(0,yy.jsx)("small",{children:e.labels("limit",`${e.controller.limit}Mb`)},void 0),e.controller.allowedExtensions.length>0&&(0,yy.jsx)("small",{children:e.labels("extensions",pp.iterateToString(e.controller.allowedExtensions,", "))},void 0)]}),void 0),!l&&-1!==r&&(0,yy.jsxs)(rk,Object.assign({props:{color:b.textColor?b.textColor:b.borderColor&&"transparent"!==b.borderColor?b.borderColor:Uw(b.backgroundColor,(e=>e.makeBlackOrWhite()))},onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault()}},{children:[(0,yy.jsx)("div",{children:(0,yy.jsx)("div",{style:{width:`${dp.range(r,0,100)}%`}},void 0)},void 0),(0,yy.jsx)("span",{children:e.labels("progress",`${dp.range(r,0,100)}%`)},void 0)]}),void 0),l&&(0,yy.jsxs)(nk,Object.assign({onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault()}},{children:[(0,yy.jsx)("div",{children:e.labels("invalid-file","")},void 0),(0,yy.jsx)("div",{children:"invalid-amount"===l?e.labels("invalid-amount",""):"invalid-extension"===l?e.labels("invalid-extension",""):"invalid-size"===l?e.labels("invalid-size",""):e.labels("error",l)},void 0),(0,yy.jsx)(Vw,{styles:{baseColor:b.textColor?b.textColor:b.borderColor&&"transparent"!==b.borderColor?b.borderColor:Uw(b.backgroundColor,(e=>e.makeBlackOrWhite())),mode:"outline"},tabIndex:e.tabIndex||0,label:e.labels("retry",""),onClick:()=>c("")},void 0)]}),void 0),e.controller.fileSlot.hasValue&&!l&&-1===r&&(0,yy.jsxs)(ak,Object.assign({props:b,onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault()}},{children:[e.controller.isImage?(0,yy.jsx)(lk,{controller:e.controller,service:e.service,loading:tk,error:tk},void 0):tk,(0,yy.jsx)("div",{children:e.controller.fileSlot.string},void 0),(0,yy.jsx)(Vw,{styles:{baseColor:b.textColor?b.textColor:b.borderColor&&"transparent"!==b.borderColor?b.borderColor:Uw(b.backgroundColor,(e=>e.makeBlackOrWhite())),mode:"outline"},tabIndex:e.tabIndex||0,label:e.labels("delete",""),disabled:s,onClick:g},void 0)]}),void 0)]}),void 0)};let uk=class extends ek{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(ck,{styles:e.styles.fileUpload,controller:this,service:e.attachments,error:e.isFailed,tabIndex:e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i,labels:(t,i)=>{switch(t){case"explanation":return e.l10n.pgettext("runner#6| File upload","Choose or drag a file here");case"dragging":return e.l10n.pgettext("runner#6| File upload","Drop your file now");case"limit":return e.l10n.pgettext("runner#6| File upload","Size limit: %1",i);case"extensions":return e.l10n.pgettext("runner#6| File upload","Allowed extensions: %1",i);case"retry":return e.l10n.pgettext("runner#6| File upload","Try again");case"progress":return e.l10n.pgettext("runner#6| File upload","Uploading (%1)",i);case"delete":return e.l10n.pgettext("runner#6| File upload","Delete");case"invalid-file":return e.l10n.pgettext("runner#6| File upload","This file can't be used.");case"invalid-amount":return e.l10n.pgettext("runner#6| File upload","Too many files selected.");case"invalid-extension":return e.l10n.pgettext("runner#6| File upload","Extension is not allowed.");case"invalid-size":return e.l10n.pgettext("runner#6| File upload","File size is too large.");case"error":return e.l10n.pgettext("runner#6| File upload","Something went wrong while uploading%1.",i&&` (${i})`||"")}}},void 0)]},void 0)}};function hk(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}uk=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-file-upload",alias:"file-upload"})],uk);let dk=class extends Mf{isSelected(){const e=this.valueOf();return e&&e.reference===this.props.column||!1}};hk([Bf],dk.prototype,"isSelected",null),dk=hk([Uf({type:"condition",identifier:"tripetto-block-matrix"})],dk);let pk=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};hk([Bf],pk.prototype,"verify",null),pk=hk([Uf({type:"condition",identifier:"tripetto-block-matrix:score"})],pk);class mk extends ff{constructor(){super(...arguments),this.scoreSlot=this.valueOf("score","feature"),this.required=!(!this.props.required&&!ym(this.props.rows,(e=>this.isRowRequired(e))))}rowSlot(e){return this.valueOf(e.id,"dynamic",{confirm:!0,modifier:e=>{if(e.value){if(!e.reference){const t=ym(this.props.columns,(t=>t.value===e.value))||ym(this.props.columns,(t=>t.id===e.value))||ym(this.props.columns,(t=>t.label===e.value))||ym(this.props.columns,(t=>t.label.toLowerCase()===e.value.toLowerCase()));return{value:t&&(t.value||t.label),reference:t&&t.id}}if(!ym(this.props.columns,(t=>t.id===e.reference)))return{value:void 0,reference:void 0}}},onChange:()=>{this.scoreSlot&&this.scoreSlot.set(hm(this.props.rows,((e,t)=>{var i;return e+((null===(i=ym(this.props.columns,(e=>{var i;return e.id===(null===(i=this.valueOf(t.id))||void 0===i?void 0:i.reference)})))||void 0===i?void 0:i.score)||0)}),0))}})}isRowRequired(e){var t;return(null===(t=this.rowSlot(e))||void 0===t?void 0:t.slot.required)||!1}isColumnSelected(e,t){var i;return(null===(i=this.rowSlot(e))||void 0===i?void 0:i.reference)===t.id}getSelectedColumn(e){return ym(this.props.columns,(t=>this.isColumnSelected(e,t)))}selectColumn(e,t){var i;null===(i=this.rowSlot(e))||void 0===i||i.set(t&&(t.value||t.label),t&&t.id)}columns(e){var t;return(null===(t=this.props.columns)||void 0===t?void 0:t.map((t=>Object.assign(Object.assign({},t),{name:pf(t.label,this.context,void 0,!1,of.Formatting|of.Hyperlinks),label:e.markdownifyToJSX(t.label,!1)}))))||[]}rows(e){var t;return(null===(t=this.props.rows)||void 0===t?void 0:t.map((t=>{const i=this.valueOf(t.id),s=!(this.props.required||!i||!i.slot.required);return Object.assign(Object.assign({},t),{label:e.markdownifyToJSX(t.name,!1),explanation:t.explanation&&e.markdownifyToJSX(t.explanation,!0)||void 0,required:s,value:i,tabIndex:e.tabIndex})})))||[]}validate(){return!ym(this.props.rows,(e=>{const t=this.rowSlot(e);return!(!this.props.required&&!(null==t?void 0:t.slot.required)||(null==t?void 0:t.reference))}))}}hk([Yf],mk.prototype,"validate",null);const gk=tw.div`
    display: block;
    width: 100%;
    margin: 0;
    padding: 0;
`,bk=tw.label`
    box-sizing: border-box;
    appearance: none;
    outline: none;
    font-size: 1em;
    line-height: 1.6em;
    padding-left: calc(${e=>8/7*e.props.scale+.375}em + ${e=>2*e.props.borderSize}px);
    margin: 0;
    position: relative;
    display: inline-flex;
    min-height: ${e=>(8/7+.19)*e.props.scale}em;
    user-select: none;
    opacity: ${e=>e.props.disabled?".4":void 0};
    transition: opacity 0.15s ease-in-out;

    > input {
        position: absolute;
        opacity: 0;
        cursor: pointer;
        height: 0;
        width: 0;
    }

    > span {
        box-sizing: content-box;
        color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.makeUnclear("#000")))};
    }

    > span:last-child {
        position: absolute;
        width: ${e=>8/7*e.props.scale}em;
        min-width: ${e=>8/7*e.props.scale}em;
        height: ${e=>8/7*e.props.scale}em;
        min-height: ${e=>8/7*e.props.scale}em;
        top: ${e=>e.props.label?"0.095em":"0em"};
        left: 0;
        background-color: ${e=>Uw(e.props.backgroundColor)};
        border: ${e=>`${e.props.borderSize}px solid ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)}`};
        border-radius: 50%;
        transition: background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,
            opacity 0.15s ease-in-out;

        :after {
            width: ${e=>12/14*e.props.scale}em;
            height: ${e=>12/14*e.props.scale}em;
            left: ${e=>2/14*e.props.scale}em;
            top: ${e=>2/14*e.props.scale}em;
            border-radius: 50%;
            background-color: ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor)))};
            transform: scale(0.1);
            transition: transform 0.15s linear, opacity 0s linear 0.15s;
            content: "";
            position: absolute;
            opacity: 0;
        }
    }

    :hover {
        > input:not(:disabled) + span + span {
            box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.2)))))}`||void 0};
        }
    }

    > input {
        :not(:disabled) {
            :active + span {
                color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.makeUnclear("#000")))};
            }

            :active + span + span {
                background-color: ${e=>Uw(e.props.backgroundColor)};
                border: ${e=>e.props.borderSize}px solid
                    ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)};
                box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.1rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.2)))))}`||void 0};

                :after {
                    background-color: ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor)))};
                }
            }

            :focus + span {
                color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.makeUnclear("#000")))};
            }

            :focus + span + span {
                background-color: ${e=>Uw(e.props.backgroundColor)};
                border: ${e=>e.props.borderSize}px solid
                    ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)};
                box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.5)))))}`||void 0};

                :after {
                    background-color: ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor)))};
                }
            }
        }

        :checked + span + span {
            :after {
                transform: none;
                opacity: 1;
                transition: transform 0.15s linear, opacity 0s linear;
            }
        }
    }
`,fk=(e,t,i)=>{const s=ym(t.buttons,(e=>e.id===i));return e.reference!==(null==s?void 0:s.id)&&e.set(s&&(s.value||s.name),null==s?void 0:s.id),s&&s.id||""};let yk=0;const vk=e=>{const t=e.value,i=(0,o.useRef)(0),[s,n]=(0,o.useState)("object"!=typeof t&&t||""),[r,a]="object"==typeof t?[0!==i.current?s:fk(t,e,t.reference),s=>{Hm(i.current),n(s),i.current=Rm((()=>{i.current=0,fk(t,e,s)}),50)}]:[s,n],[l]=(0,o.useState)((()=>Xg.SHA2_256("Radiobuttons"+yk++))),c=t=>{a(t),e.onChange&&e.onChange(t)},u=e.disabled||e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||!1,h={disabled:u,color:e.styles.backgroundColor,backgroundColor:e.styles.backgroundColor||"transparent",borderColor:"transparent"===e.styles.borderColor&&"transparent"===e.styles.backgroundColor&&Uw(e.styles.textColor,(e=>e.makeUnclear("#000")))||Uw(e.styles.borderColor)!==Uw(e.styles.backgroundColor)&&e.styles.borderColor||"transparent",borderSize:e.styles.borderSize||1,textColor:e.styles.textColor,scale:e.styles.scale||1,label:!0};return(0,o.useEffect)((()=>()=>{Hm(i.current)}),[]),(0,yy.jsx)(yy.Fragment,{children:e.buttons.map(((t,i)=>t.id&&("preview"===e.view||t.label||t.name||t.description)&&(0,yy.jsx)(gk,{children:(0,yy.jsxs)(bk,Object.assign({props:h},{children:[(0,yy.jsx)("input",{ref:(r?r===t.id:0===i)&&e.onAutoFocus||void 0,type:"radio",name:l,checked:r===t.id,tabIndex:t.tabIndex||e.tabIndex,"aria-describedby":e.ariaDescribedBy,disabled:u,onChange:()=>c(t.id),onClick:()=>{e.allowUnselect&&r===t.id&&c("")},onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:i=>{if((e.allowUnselect||r!==t.id)&&("Enter"===i.key||" "===i.key)&&!i.shiftKey)return i.preventDefault(),void c(r===t.id?"":t.id);"Enter"===i.key&&i.shiftKey&&e.onSubmit?e.onSubmit():"Escape"===i.key?i.currentTarget.blur():"Tab"===i.key&&(i.shiftKey?e.onCancel&&(i.preventDefault(),e.onCancel()):e.onSubmit&&(i.preventDefault(),e.onSubmit()))}},void 0),(0,yy.jsxs)("span",{children:[t.label||t.name||"...",t.description&&(0,yy.jsxs)("small",{children:[(0,yy.jsx)("br",{},void 0),t.description]},void 0)]},void 0),(0,yy.jsx)("span",{},void 0)]}),void 0)},t.id||i)))},void 0)},Mk=tw.div`
    overflow-x: auto;
    scroll-behavior: smooth;
    scrollbar-width: none;
    -ms-overflow-style: none;
    -webkit-overflow-scrolling: touch;
    -webkit-tap-highlight-color: transparent;

    ::-webkit-scrollbar {
        display: none;
    }
`,wk=tw.table`
    display: table;
    width: 100%;
    border-collapse: collapse;
    font-size: 1em;
    line-height: 1.5em;

    > thead > tr {
        > th {
            text-align: center;
            vertical-align: bottom;
            font-weight: normal;
            color: ${e=>e.props.textColor};
            background-color: ${e=>Uw(e.props.textColor,(e=>e.manipulate((e=>e.alpha(.2)))))};
            border-bottom: 1px solid ${e=>Uw(e.props.textColor,(e=>e.manipulate((e=>e.alpha(.2)))))};
            cursor: default;
            padding-top: 0.5em;
            padding-bottom: 0.5em;

            &:first-child {
                background-color: transparent;
            }
        }

        > th + th {
            padding-left: 8px;
            padding-right: 8px;
        }
    }

    > tbody {
        > tr {
            > th {
                text-align: left;
                font-weight: normal;
                padding-right: 8px;
                padding-top: 0.5em;
                padding-bottom: 0.5em;
                color: ${e=>e.props.textColor};
                border-bottom: 1px solid ${e=>Uw(e.props.textColor,(e=>e.manipulate((e=>e.alpha(.2)))))};
                cursor: default;
                min-width: 50%;

                > small {
                    opacity: 0.8;
                }
            }

            > td {
                position: relative;
                border-bottom: 1px solid ${e=>Uw(e.props.textColor,(e=>e.manipulate((e=>e.alpha(.15)))))};

                > label {
                    display: flex;
                    justify-content: center;
                    position: absolute;
                    left: 0;
                    top: 0;
                    right: 0;
                    bottom: 0;
                    padding-left: 0;

                    > span:nth-child(2) {
                        position: absolute;
                    }

                    > span:last-child {
                        position: relative;
                        align-self: center;
                    }
                }
            }
        }

        > tr:last-child {
            > th,
            > td {
                border-bottom: none;
            }
        }
    }
`;let xk=0;const Sk=e=>{const[t]=(0,o.useState)((()=>Xg.SHA2_256("Matrix"+xk++))),i=(0,o.useRef)(0),s=(0,o.useRef)({}),[,n]=(0,o.useState)({}),r={disabled:e.disabled||e.readOnly||!1,color:e.styles.backgroundColor,backgroundColor:e.styles.backgroundColor!==e.styles.borderColor&&e.styles.backgroundColor||"transparent",borderColor:"transparent"===e.styles.borderColor&&"transparent"===e.styles.backgroundColor&&Uw(e.styles.textColor,(e=>e.makeUnclear("#000")))||Uw(e.styles.borderColor)!==Uw(e.styles.backgroundColor)&&e.styles.borderColor||"transparent",borderSize:e.styles.borderSize||1,textColor:e.styles.textColor,errorColor:e.styles.errorColor,scale:e.styles.scale||1,label:!1},a=(t,o)=>{"object"==typeof t.value&&(Hm(i.current),s.current[t.id]=o?o.id:"",n({}),i.current=Rm((()=>{i.current=0,lm(s.current,((t,i)=>{const o=ym(e.rows,(e=>e.id===i));if(delete s.current[i],o&&"object"==typeof o.value){const i=t&&ym(e.columns,(e=>e.id===t))||void 0;o.value.set(i&&(i.value||i.name),i&&i.id)}}),{keys:!0})}),50)),t.onChange&&t.onChange(o&&o.id||"")};return(0,o.useEffect)((()=>()=>{Hm(i.current)}),[]),(0,yy.jsx)(Mk,{children:(0,yy.jsxs)(wk,Object.assign({props:r},{children:[(0,yy.jsx)("thead",{children:(0,yy.jsxs)("tr",{children:[(0,yy.jsx)("th",{scope:"col"},void 0),e.columns.map(((e,t)=>(0,yy.jsx)("th",Object.assign({scope:"col"},{children:e.label||e.name||"..."}),t)))]},void 0)},void 0),(0,yy.jsx)("tbody",{children:e.rows.map(((i,o)=>(0,yy.jsxs)("tr",{children:[(0,yy.jsxs)("th",Object.assign({scope:"row"},{children:[i.label||"...",(i.required||e.required)&&!e.styles.hideRequiredIndicator&&(0,yy.jsx)(Bw,{props:{errorColor:e.styles.errorColor}},void 0),i.explanation&&(0,yy.jsxs)("small",{children:[(0,yy.jsx)("br",{},void 0),i.explanation]},void 0)]}),void 0),e.columns.map(((n,l)=>{const c=("object"==typeof i.value?em(s.current[i.id],i.value.reference||""):i.value)===n.id;return(0,yy.jsx)("td",{children:(0,yy.jsxs)(bk,Object.assign({props:r},{children:[(0,yy.jsx)("input",{ref:0===o&&0===l&&e.onAutoFocus||void 0,type:"radio",name:t+o,checked:c,tabIndex:i.tabIndex||e.tabIndex,"aria-describedby":e.ariaDescribedBy,disabled:e.disabled||e.readOnly||"object"==typeof i.value&&(i.value.isFrozen||i.value.isLocked)||!1,onChange:()=>a(i,n),onClick:()=>{e.allowUnselect&&c&&a(i,void 0)},onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:t=>{if((e.allowUnselect||!c)&&("Enter"===t.key||" "===t.key)&&!t.shiftKey)return t.preventDefault(),void a(i,!c&&n||void 0);"Enter"===t.key&&t.shiftKey&&e.onSubmit?e.onSubmit():"Escape"===t.key?t.currentTarget.blur():"Tab"===t.key&&(t.shiftKey?e.onCancel&&0===o&&(t.preventDefault(),e.onCancel()):e.onSubmit&&o+1===e.rows.length&&(t.preventDefault(),e.onSubmit()))}},void 0),(0,yy.jsx)("span",{},void 0),(0,yy.jsx)("span",{},void 0)]}),void 0)},o+"-"+l)}))]},o)))},void 0)]}),void 0)},void 0)};let Ik=class extends mk{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(Sk,{styles:e.styles.matrix,columns:this.columns(e),rows:this.rows(e),ariaDescribedBy:e.ariaDescribedBy,allowUnselect:!0,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function kk(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}Ik=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-matrix"})],Ik);let Nk=class extends Mf{isChosen(){const e=this.valueOf(this.props.choice)||this.valueOf("choice");return!!e&&(Up(e.value)?e.value:e.reference===this.props.choice)}};kk([Bf],Nk.prototype,"isChosen",null),Nk=kk([Uf({type:"condition",identifier:"tripetto-block-multiple-choice",alias:"multiple-choice"})],Nk);let _k=class extends Mf{isUndefined(){const e=this.valueOf("choice");if(e)return!e.value;{const e=this.slots;return!e||!e.each((e=>{const t=this.valueOf(e);return t&&t.value||!1}))}}};kk([Bf],_k.prototype,"isUndefined",null),_k=kk([Uf({type:"condition",identifier:"tripetto-block-multiple-choice:undefined"})],_k);let Lk=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Number){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode)}}return!1}};kk([Bf],Lk.prototype,"verify",null),Lk=kk([Uf({type:"condition",identifier:"tripetto-block-multiple-choice:counter"})],Lk);let Ck=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};kk([Bf],Ck.prototype,"verify",null),Ck=kk([Uf({type:"condition",identifier:"tripetto-block-multiple-choice:score"})],Ck);class Dk extends ff{constructor(){super(...arguments),this.counterSlot=this.valueOf("counter","feature"),this.concatenationSlot=this.valueOf("concatenation","feature"),this.scoreSlot=this.valueOf("score","feature"),this.singleChoiceSlot=this.valueOf("choice","static",{confirm:!0,modifier:e=>{if(e.value){if(!e.reference){const t=ym(this.props.choices,(t=>t.value===e.value))||ym(this.props.choices,(t=>t.id===e.value))||ym(this.props.choices,(t=>t.name===e.value))||ym(this.props.choices,(t=>t.name.toLowerCase()===e.value.toLowerCase()));return{value:t&&(t.value||t.name),reference:t&&t.id}}if(!ym(this.props.choices,(t=>t.id===e.reference)))return{value:void 0,reference:void 0}}},onChange:e=>{if(this.scoreSlot){const t=ym(this.props.choices,(t=>t.id===e.reference));this.scoreSlot.set(t&&((null==t?void 0:t.score)||0))}}})}get required(){return this.props.required||!1}transform(){if(this.props.multiple){const e=fm(um(this.props.choices,(e=>({id:e.id,exclusive:e.exclusive,valueRef:this.choiceSlot(e)}))),(e=>{var t;return!0===(null===(t=e.valueRef)||void 0===t?void 0:t.value)})).sort(((e,t)=>{var i,s;return((null===(i=t.valueRef)||void 0===i?void 0:i.time)||0)-((null===(s=e.valueRef)||void 0===s?void 0:s.time)||0)})),t=e.length&&e[0];if(t&&e.forEach((e=>{e.id!==t.id&&(t.exclusive||e.exclusive)&&(e.valueRef.value=!1)})),this.props.max){const t=this.props.max;let i=0;e.forEach((e=>{var s;!0===(null===(s=e.valueRef)||void 0===s?void 0:s.value)&&(i++,i>t&&(e.valueRef.value=!1))}))}if(this.counterSlot){const t=fm(e,(e=>{var t;return!0===(null===(t=e.valueRef)||void 0===t?void 0:t.value)})).length;this.counterSlot.set(t)}if(this.concatenationSlot){const e=[];let t="",i=0;if(lm(this.props.choices,(s=>{var o;const n=s.value||s.name||"";if(n&&!0===(null===(o=this.valueOf(s.id))||void 0===o?void 0:o.value))switch(this.props.formatSeparator){case"space":t+=(""===t?"":" ")+n;break;case"list":t+=(""===t?"":"\n")+n;break;case"bullets":t+=(""===t?"":"\n")+"- "+n;break;case"numbers":t+=(""===t?"":"\n")+`${++i}. ${n}`;break;case"conjunction":case"disjunction":e.push(n);break;case"custom":t+=(""===t?"":this.props.formatSeparatorCustom||"")+n;break;default:t+=(""===t?"":", ")+n}})),"conjunction"===this.props.formatSeparator||"disjunction"===this.props.formatSeparator)try{const i=new Intl.ListFormat(this.context.l10n.current||"en",{type:this.props.formatSeparator});t=i.format(e)}catch(i){t=pp.iterateToString(e,", ")}this.concatenationSlot.set(t)}}}score(e){this.scoreSlot&&Hp(e.score)&&this.scoreSlot.set(hm(this.props.choices,((e,t)=>{var i;return e+(!0===(null===(i=this.valueOf(t.id))||void 0===i?void 0:i.value)&&t.score||0)}),0))}choiceSlot(e){return this.props.multiple&&this.valueOf(e.id,"dynamic",{confirm:!0,onChange:()=>{this.transform(),this.score(e)},onContext:(t,i)=>{var s;this.scoreSlot&&(null===(s=i.contextualValueOf(this.scoreSlot))||void 0===s||s.set(!0===t.value?e.score||0:void 0))}})||void 0}choices(e){var t;const i=this.props.multiple&&this.props.max&&fm(this.props.choices,(e=>{var t;return!0===(null===(t=this.choiceSlot(e))||void 0===t?void 0:t.value)})).length||0,s=(null===(t=this.props.choices)||void 0===t?void 0:t.map((t=>{const s=this.choiceSlot(t);return Object.assign(Object.assign({},t),{name:pf(t.name,this.context),description:t.description&&pf(t.description,this.context)||void 0,url:t.url&&mf(t.url,this.context)||void 0,slot:s,tabIndex:null==e?void 0:e.tabIndex,disabled:this.props.max&&i>=this.props.max&&!0!==(null==s?void 0:s.value)||!1})})))||[];if(this.props.randomize&&s.length>1){if(!this.randomized||this.randomized.length!==s.length||ym(this.randomized,(e=>{var t;return(null===(t=s[e.index])||void 0===t?void 0:t.id)!==e.id}))){this.randomized=s.map(((e,t)=>({index:t,id:e.id})));let e=this.randomized.length;for(;--e;){const t=Math.floor(Math.random()*e),i=this.randomized[e];this.randomized[e]=this.randomized[t],this.randomized[t]=i}}return this.randomized.map((e=>s[e.index]))}return this.randomized&&(this.randomized=void 0),s}validate(){var e;if(this.props.multiple&&(this.props.min||this.props.max)){const e=fm(this.props.choices,(e=>{var t;return!0===(null===(t=this.choiceSlot(e))||void 0===t?void 0:t.value)})).length;if(this.props.min&&e<this.props.min||this.props.max&&e>this.props.max)return!1}return!this.props.required||(this.props.multiple?!!ym(this.props.choices,(e=>{var t;return!0===(null===(t=this.choiceSlot(e))||void 0===t?void 0:t.value)})):(null===(e=this.singleChoiceSlot)||void 0===e?void 0:e.hasValue)||!1)}}kk([Yf],Dk.prototype,"validate",null);const Ak=(0,yy.jsxs)("svg",Object.assign({viewBox:"0 0 20 20"},{children:[(0,yy.jsx)("path",{d:"M19.5 0h-5c-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5h3.833l-11.186 11.146c-0.196 0.195-0.196 0.511-0.001 0.707 0.098 0.098 0.226 0.147 0.354 0.147s0.255-0.049 0.353-0.146l11.147-11.107v3.753c0 0.276 0.224 0.5 0.5 0.5s0.5-0.224 0.5-0.5v-5c0-0.276-0.224-0.5-0.5-0.5z"},void 0),(0,yy.jsx)("path",{d:"M16.5 20h-15c-0.827 0-1.5-0.673-1.5-1.5v-15c0-0.827 0.673-1.5 1.5-1.5h10c0.276 0 0.5 0.224 0.5 0.5s-0.224 0.5-0.5 0.5h-10c-0.276 0-0.5 0.224-0.5 0.5v15c0 0.276 0.224 0.5 0.5 0.5h15c0.276 0 0.5-0.224 0.5-0.5v-10c0-0.276 0.224-0.5 0.5-0.5s0.5 0.224 0.5 0.5v10c0 0.827-0.673 1.5-1.5 1.5z"},void 0)]}),void 0),jk=tw.div`
    display: block;
    width: 100%;

    > * {
        display: ${e=>"vertical"===e.props.alignment?"block":void 0};
        margin-top: 8px;
        margin-right: ${e=>"vertical"!==e.props.alignment&&`${e.props.margin||8}px`||void 0};
    }
`,Tk=(e,t,i)=>{const s=ym(t,(e=>e.id===i));return e.reference!==(null==s?void 0:s.id)&&e.set(s&&(s.value||s.name),null==s?void 0:s.id),s&&s.id||""},zk=e=>{const t=e.value,i=(0,o.useRef)(0),s=(0,o.useRef)({}),[n,r]=(0,o.useState)("object"!=typeof t&&t||""),[a,l]="object"==typeof t?[0!==i.current?n:Tk(t,e.buttons,t.reference),s=>{Hm(i.current),r(s),i.current=Rm((()=>{i.current=0,Tk(t,e.buttons,s),e.autoSubmit&&s&&lx(u)}),50)}]:[n,r],[,c]=(0,o.useState)({}),u=(0,o.useRef)({id:0,cb:e.onSubmit}),h=o=>{if(o.url)return;const n=o.slot?sm(s.current[o.id],o.slot.value):a===o.id;if(o.slot)Hm(i.current),s.current[o.id]=!n,c({}),i.current=Rm((()=>{i.current=0,lm(s.current,((t,i)=>{const o=ym(e.buttons,(e=>e.id===i));delete s.current[i],o&&o.slot&&(o.slot.value=t)}),{keys:!0})}),50);else{const i=n&&!e.required?"":o.id;u.current.id&&(clearTimeout(u.current.id),u.current.id=0),l(i),e.onChange&&e.onChange(i),"object"!=typeof t&&e.autoSubmit&&i&&lx(u)}o.onChange&&o.onChange(!(o.slot||!e.required)||!n)};return(0,o.useEffect)((()=>()=>{Hm(i.current)}),[]),u.current.cb=e.onSubmit,(0,yy.jsx)(jk,Object.assign({props:{alignment:e.alignment||"vertical",margin:e.styles.margin}},{children:e.buttons.map(((i,o)=>{const n=i.slot?sm(s.current[i.id],i.slot.value):a===i.id;return i.slot&&i.slot.confirm(),("preview"===e.view||i.name||i.description)&&(0,yy.jsx)(Vw,{styles:{baseColor:e.styles.color,mode:n?"fill":"outline",hover:"outline",outlineSize:e.styles.outlineSize,roundness:e.styles.roundness,scale:e.styles.scale},hyperlink:i.url&&{url:i.url,target:i.target||"blank"}||void 0,label:i.name||"...",description:i.description,icon:i.url&&"self"!==i.target&&Ak||void 0,iconPosition:"right",tabIndex:i.tabIndex||e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,disabled:i.disabled||e.disabled||e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||i.slot&&(i.slot.isFrozen||i.slot.isLocked)||!1,onAutoFocus:(i.slot||!a?0===o:n)&&e.onAutoFocus||void 0,onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:t=>{if(t.shiftKey&&"Enter"===t.key&&e.onSubmit)t.preventDefault(),e.onSubmit();else if("Escape"===t.key)t.currentTarget.blur();else if("Tab"===t.key)t.shiftKey?e.onCancel&&0===o&&(t.preventDefault(),e.onCancel()):e.onSubmit&&o+1===e.buttons.length&&(t.preventDefault(),e.onSubmit());else{const i=1===t.key.length&&t.key.charCodeAt(0)||0,s=(i<=57?i-48:0)||(i<=90?i-64:0)||(i<=122?i-96:0);if(s>0&&s<=26){const t=Wp(e.buttons,s-1);t&&h(t)}}},onClick:()=>h(i)},i.id||o)}))}),void 0)};let Ek=class extends Dk{constructor(){super(...arguments),this.hideButtons=!(this.props.multiple||!ym(this.props.choices,(e=>!!e.name&&!e.url))),this.autoSubmit=this.hideButtons}render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[this.props.imageURL&&this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),e.name,this.props.caption&&(0,yy.jsx)(AS,{children:e.markdownifyToJSX(this.props.caption)},void 0),e.description,this.props.imageURL&&!this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),(0,yy.jsx)(zk,{styles:e.styles.multipleChoice,view:e.view,buttons:this.choices(e),alignment:this.props.alignment?"horizontal":"vertical",value:!this.props.multiple&&this.valueOf("choice")||void 0,required:this.required,ariaDescribedBy:e.ariaDescribedBy,autoSubmit:this.autoSubmit,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function Ok(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}Ek=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-multiple-choice",alias:"multiple-choice",autoRender:!0})],Ek);let Pk=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};Ok([Bf],Pk.prototype,"verify",null),Pk=Ok([Uf({type:"condition",identifier:"tripetto-block-number"})],Pk),Tf("tripetto-block-number"),zf();class Rk extends ff{constructor(){super(...arguments),this.calculatorSlot=this.valueOf("calculator","feature"),this.numberSlot=Jp(this.valueOf("number","static",{prefill:Hp(this.props.prefill)&&{value:this.props.prefill}||void 0,onChange:e=>{this.calculatorSlot&&e.slot instanceof Cb.Numeric&&YS(this.context,this.props.operations||[],e,this.calculatorSlot,(e=>this.variableFor(e)),(e=>this.parseVariables(e)))}})),this.required=this.numberSlot.slot.required||!1}}const Hk=e=>{var t;const i=e.value,s=(0,o.useRef)({duration:0,handle:0}),[n,r]=(0,o.useState)("text"),[a,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)("object"==typeof i?em(i.pristine):"number"==typeof i?i.toString():""),[h,d]="object"==typeof i?[a?c:i.hasValue?i.slot.formatString(i.slot.digits?pp.padLeft(i.value,"0",i.slot.digits,!1,!0):((null===(t=e.l10n)||void 0===t?void 0:t.locale)||qb.Locales).number(i.value,i.slot.precision,!!i.slot.separator),1!==i.value):"",e=>{Hm(s.current.handle),u(e);const t=dp.range(2*s.current.duration,16.666666666666668,1e3);s.current.handle=Rm((()=>{const t=Lp.precise;s.current.handle=0,s.current.update=()=>{s.current.duration=Lp.elapsed(t,!0),s.current.update=void 0},i.pristine=""!==e?i.slot.toValue(e):void 0,i.pristine=e||void 0}),t)}]:[c,u],[p,m]=(0,o.useState)(!!h),g=(0,o.useRef)(0),b=a&&"object"==typeof i?im(c):0,f=e.error||a&&"object"==typeof i&&(Hp(i.slot.minimum)&&b<i.slot.minimum||Hp(i.slot.maximum)&&b>i.slot.maximum)||!1;return(0,o.useEffect)((()=>()=>{Hm(s.current.handle)}),[]),s.current.update&&s.current.update(),(0,yy.jsx)(cx,{id:e.id,ref:e.onAutoFocus,type:n,tabIndex:e.tabIndex,placeholder:e.placeholder,required:e.required||!1,disabled:e.disabled||!1,readOnly:e.readOnly||"object"==typeof i&&(i.isFrozen||i.isLocked)||!1,maxLength:e.maxLength,value:h,autoComplete:"off",step:"number"===n?"object"==typeof i&&i.slot.precision&&`0.${pp.fill("0",i.slot.precision-1)}1`||"1":void 0,inputMode:e.precision||"object"==typeof i&&i.slot.precision?"decimal":"numeric","aria-describedby":e.ariaDescribedBy,props:{backgroundColor:e.styles.backgroundColor||"transparent",borderColor:e.styles.borderColor||"transparent",borderSize:e.styles.borderSize||1,roundness:e.styles.roundness,textColor:e.styles.textColor,errorColor:e.styles.errorColor,errorVisible:p,error:f,scale:e.styles.scale||1},onChange:t=>{d(t.target.value),m(!0),e.onChange&&nx(d,e.onChange(t.target.value))},onFocus:t=>{if(g.current&&(cancelAnimationFrame(g.current),g.current=0),"text"===n){const e=t.target;requestAnimationFrame((()=>{e.focus()})),r("number")}rx(l,d,e.onFocus)(t)},onBlur:t=>{g.current=requestAnimationFrame((()=>{g.current=0,"number"===n&&r("text"),"object"==typeof i&&i.hasValue&&u(em(i.pristine)),ax(l,d,e.onBlur)(t)}))},onKeyDown:t=>{"Enter"===t.key&&e.onSubmit?(t.preventDefault(),e.onSubmit()):"Escape"===t.key?t.currentTarget.blur():"Tab"===t.key&&(t.shiftKey?e.onCancel&&(t.preventDefault(),e.onCancel()):e.onSubmit&&(t.preventDefault(),e.onSubmit()))}},void 0)};let Fk=class extends Rk{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(Hk,{id:e.id,styles:e.styles.inputs,l10n:e.l10n,value:this.numberSlot,required:this.required,error:e.isFailed,tabIndex:e.tabIndex,placeholder:e.placeholder,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};Fk=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-number"})],Fk);class Uk extends ff{}let Bk=class extends Uk{constructor(){super(...arguments),this.autoFocus=!0}render(e){return(0,yy.jsxs)(yy.Fragment,{children:[this.props.imageURL&&this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),e.name,this.props.caption&&(0,yy.jsx)(AS,{children:e.markdownifyToJSX(this.props.caption)},void 0),e.description,this.props.imageURL&&!this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),this.props.video&&(0,yy.jsx)(CS,{src:e.markdownifyToURL(this.props.video),play:e.isActivated,view:e.view},void 0)]},void 0)}};function Yk(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}Bk=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-paragraph",alias:"paragraph"})],Bk);let Zk=class extends Mf{constructor(){super(...arguments),this.cache={}}isPassword(){const e=this.valueOf();return!!(this.props.passphrase&&e&&e.value)&&(Up(this.cache[e.value])?this.cache[e.value]:this.cache[e.value]=gy.decrypt(this.props.passphrase,e.value+this.condition.id,256,atob)===this.condition.id)===!this.props.invert}};Yk([Bf],Zk.prototype,"isPassword",null),Zk=Yk([Uf({type:"condition",identifier:"tripetto-block-password"})],Zk);class Vk extends ff{constructor(){super(...arguments),this.passwordSlot=Jp(this.valueOf("password")),this.required=this.passwordSlot.slot.required||!1}}const Wk=e=>ux(Object.assign({type:"password",autoComplete:"new-password"},e));let Gk=class extends Vk{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(Wk,{id:e.id,styles:e.styles.inputs,value:this.passwordSlot,required:this.required,error:e.isFailed,tabIndex:e.tabIndex,placeholder:e.placeholder,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function $k(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}Gk=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-password"})],Gk);let Qk=class extends Mf{verify(){const e=this.valueOf();if(e)switch(this.props.mode){case"defined":return""!==e.string;case"undefined":return""===e.string}return!1}};$k([Bf],Qk.prototype,"verify",null),Qk=$k([Uf({type:"condition",identifier:"tripetto-block-phone-number"})],Qk);const qk=/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i;class Xk extends ff{constructor(){super(...arguments),this.phoneNumberSlot=Jp(this.valueOf("phone-number")),this.required=this.phoneNumberSlot.slot.required||!1}validate(){return!this.phoneNumberSlot.string||qk.test(this.phoneNumberSlot.value)}}$k([Yf],Xk.prototype,"validate",null);const Jk=e=>ux(Object.assign(Object.assign({type:"tel",inputMode:"tel",autoComplete:"tel"},e),{placeholder:e.placeholder||"+1 (201) 555-5555"}));let Kk=class extends Xk{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(Jk,{id:e.id,styles:e.styles.inputs,value:this.phoneNumberSlot,required:this.required,error:e.isFailed,tabIndex:e.tabIndex,placeholder:e.placeholder,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function eN(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}Kk=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-phone-number"})],Kk);let tN=class extends Mf{isChosen(){const e=this.valueOf(this.props.choice)||this.valueOf("choice");return!!e&&(Up(e.value)?e.value:e.reference===this.props.choice)}};eN([Bf],tN.prototype,"isChosen",null),tN=eN([Uf({type:"condition",identifier:"tripetto-block-picture-choice",alias:"picture-choice"})],tN);let iN=class extends Mf{isUndefined(){const e=this.valueOf("choice");if(e)return!e.value;{const e=this.slots;return!e||!e.each((e=>{const t=this.valueOf(e);return t&&t.value||!1}))}}};eN([Bf],iN.prototype,"isUndefined",null),iN=eN([Uf({type:"condition",identifier:"tripetto-block-picture-choice:undefined"})],iN);let sN=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Number){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode)}}return!1}};eN([Bf],sN.prototype,"verify",null),sN=eN([Uf({type:"condition",identifier:"tripetto-block-picture-choice:counter"})],sN);let oN=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};eN([Bf],oN.prototype,"verify",null),oN=eN([Uf({type:"condition",identifier:"tripetto-block-picture-choice:score"})],oN);class nN extends ff{constructor(){super(...arguments),this.counterSlot=this.valueOf("counter","feature"),this.concatenationSlot=this.valueOf("concatenation","feature"),this.scoreSlot=this.valueOf("score","feature"),this.singleChoiceSlot=this.valueOf("choice","static",{confirm:!0,modifier:e=>{if(e.value){if(!e.reference){const t=ym(this.props.choices,(t=>t.value===e.value))||ym(this.props.choices,(t=>t.id===e.value))||ym(this.props.choices,(t=>t.name===e.value))||ym(this.props.choices,(t=>t.name.toLowerCase()===e.value.toLowerCase()));return{value:t&&(t.value||t.name),reference:t&&t.id}}if(!ym(this.props.choices,(t=>t.id===e.reference)))return{value:void 0,reference:void 0}}},onChange:e=>{if(this.scoreSlot){const t=ym(this.props.choices,(t=>t.id===e.reference));this.scoreSlot.set(t&&((null==t?void 0:t.score)||0))}}})}get required(){return this.props.required||!1}transform(){if(this.props.multiple){const e=fm(um(this.props.choices,(e=>({id:e.id,exclusive:e.exclusive,valueRef:this.choiceSlot(e)}))),(e=>{var t;return!0===(null===(t=e.valueRef)||void 0===t?void 0:t.value)})).sort(((e,t)=>{var i,s;return((null===(i=t.valueRef)||void 0===i?void 0:i.time)||0)-((null===(s=e.valueRef)||void 0===s?void 0:s.time)||0)})),t=e.length&&e[0];if(t&&e.forEach((e=>{e.id!==t.id&&(t.exclusive||e.exclusive)&&(e.valueRef.value=!1)})),this.props.max){const t=this.props.max;let i=0;e.forEach((e=>{var s;!0===(null===(s=e.valueRef)||void 0===s?void 0:s.value)&&(i++,i>t&&(e.valueRef.value=!1))}))}if(this.counterSlot){const t=fm(e,(e=>{var t;return!0===(null===(t=e.valueRef)||void 0===t?void 0:t.value)})).length;this.counterSlot.set(t)}if(this.concatenationSlot){const e=[];let t="",i=0;if(lm(this.props.choices,(s=>{var o;const n=s.value||s.name||"";if(n&&!0===(null===(o=this.valueOf(s.id))||void 0===o?void 0:o.value))switch(this.props.formatSeparator){case"space":t+=(""===t?"":" ")+n;break;case"list":t+=(""===t?"":"\n")+n;break;case"bullets":t+=(""===t?"":"\n")+"- "+n;break;case"numbers":t+=(""===t?"":"\n")+`${++i}. ${n}`;break;case"conjunction":case"disjunction":e.push(n);break;case"custom":t+=(""===t?"":this.props.formatSeparatorCustom||"")+n;break;default:t+=(""===t?"":", ")+n}})),"conjunction"===this.props.formatSeparator||"disjunction"===this.props.formatSeparator)try{const i=new Intl.ListFormat(this.context.l10n.current||"en",{type:this.props.formatSeparator});t=i.format(e)}catch(i){t=pp.iterateToString(e,", ")}this.concatenationSlot.set(t)}}}score(e){this.scoreSlot&&Hp(e.score)&&this.scoreSlot.set(hm(this.props.choices,((e,t)=>{var i;return e+(!0===(null===(i=this.valueOf(t.id))||void 0===i?void 0:i.value)&&t.score||0)}),0))}choiceSlot(e){return this.props.multiple&&this.valueOf(e.id,"dynamic",{confirm:!0,onChange:()=>{this.transform(),this.score(e)},onContext:(t,i)=>{var s;this.scoreSlot&&(null===(s=i.contextualValueOf(this.scoreSlot))||void 0===s||s.set(!0===t.value?e.score||0:void 0))}})||void 0}choices(e){var t;const i=this.props.multiple&&this.props.max&&fm(this.props.choices,(e=>{var t;return!0===(null===(t=this.choiceSlot(e))||void 0===t?void 0:t.value)})).length||0,s=(null===(t=this.props.choices)||void 0===t?void 0:t.map((t=>{const s=this.choiceSlot(t);return Object.assign(Object.assign({},t),{name:pf(t.name,this.context),image:t.image&&mf(t.image,this.context,void 0,["image/jpeg","image/png","image/svg","image/gif"])||void 0,description:t.description&&pf(t.description,this.context)||void 0,url:t.url&&mf(t.url,this.context)||void 0,slot:s,tabIndex:null==e?void 0:e.tabIndex,disabled:this.props.max&&i>=this.props.max&&!0!==(null==s?void 0:s.value)||!1})})))||[];if(this.props.randomize&&s.length>1){if(!this.randomized||this.randomized.length!==s.length||ym(this.randomized,(e=>{var t;return(null===(t=s[e.index])||void 0===t?void 0:t.id)!==e.id}))){this.randomized=s.map(((e,t)=>({index:t,id:e.id})));let e=this.randomized.length;for(;--e;){const t=Math.floor(Math.random()*e),i=this.randomized[e];this.randomized[e]=this.randomized[t],this.randomized[t]=i}}return this.randomized.map((e=>s[e.index]))}return this.randomized&&(this.randomized=void 0),s}validate(){var e;if(this.props.multiple&&(this.props.min||this.props.max)){const e=fm(this.props.choices,(e=>{var t;return!0===(null===(t=this.choiceSlot(e))||void 0===t?void 0:t.value)})).length;if(this.props.min&&e<this.props.min||this.props.max&&e>this.props.max)return!1}return!this.props.required||(this.props.multiple?!!ym(this.props.choices,(e=>{var t;return!0===(null===(t=this.choiceSlot(e))||void 0===t?void 0:t.value)})):(null===(e=this.singleChoiceSlot)||void 0===e?void 0:e.hasValue)||!1)}}eN([Yf],nN.prototype,"validate",null);const rN=tw.div`
    display: flex;
    width: 100%;
    flex-direction: row;
    flex-wrap: wrap;
    align-items: stretch;

    > * {
        margin-top: 8px;
        margin-right: 8px;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
`,aN=(e,t,i)=>{const s=ym(t,(e=>e.id===i));return e.reference!==(null==s?void 0:s.id)&&e.set(s&&(s.value||s.name),null==s?void 0:s.id),s&&s.id||""},lN=e=>{const t=e.value,i=(0,o.useRef)(0),s=(0,o.useRef)({}),[n,r]=(0,o.useState)("object"!=typeof t&&t||""),[a,l]="object"==typeof t?[0!==i.current?n:aN(t,e.options,t.reference),s=>{Hm(i.current),r(s),i.current=Rm((()=>{i.current=0,aN(t,e.options,s),e.autoSubmit&&s&&lx(u)}),50)}]:[n,r],[,c]=(0,o.useState)({}),u=(0,o.useRef)({id:0,cb:e.onSubmit}),h=o=>{if(o.url)return;const n=o.slot?sm(s.current[o.id],o.slot.value):a===o.id;if(o.slot)Hm(i.current),s.current[o.id]=!n,c({}),i.current=Rm((()=>{i.current=0,lm(s.current,((t,i)=>{const o=ym(e.options,(e=>e.id===i));delete s.current[i],o&&o.slot&&(o.slot.value=t)}),{keys:!0})}),50);else{const i=n&&!e.required?"":o.id;u.current.id&&(clearTimeout(u.current.id),u.current.id=0),l(i),e.onChange&&e.onChange(i),"object"!=typeof t&&e.autoSubmit&&i&&lx(u)}o.onChange&&o.onChange(!(o.slot||!e.required)||!n)};return(0,o.useEffect)((()=>()=>{Hm(i.current)}),[]),u.current.cb=e.onSubmit,(0,yy.jsx)(rN,Object.assign({props:{margin:e.styles.margin}},{children:e.options.map(((i,o)=>{const n=i.slot?sm(s.current[i.id],i.slot.value):a===i.id;return i.slot&&i.slot.confirm(),("preview"===e.view||i.image||i.emoji||i.nameVisible&&i.name||i.description)&&(0,yy.jsx)(Vw,{styles:{baseColor:e.styles.color,mode:n?"fill":"outline",hover:"outline",outlineSize:e.styles.outlineSize,roundness:e.styles.roundness,scale:e.styles.scale},hyperlink:i.url&&{url:i.url,target:i.target||"blank"}||void 0,image:i.image||!i.emoji&&`data:image/svg+xml;base64,${r=Uw(e.styles.color,(e=>e.makeBlackOrWhite(n).manipulate((e=>e.alpha(.2))))),btoa(`<?xml version="1.0" encoding="utf-8"?>\n        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n        <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 20 20">\n            <path d="M13.5 9c-1.378 0-2.5-1.122-2.5-2.5s1.122-2.5 2.5-2.5 2.5 1.122 2.5 2.5-1.122 2.5-2.5 2.5zM13.5 5c-0.827 0-1.5 0.673-1.5 1.5s0.673 1.5 1.5 1.5 1.5-0.673 1.5-1.5-0.673-1.5-1.5-1.5z" fill="${r}"></path>\n            <path d="M18.5 0h-17c-0.827 0-1.5 0.673-1.5 1.5v17c0 0.827 0.673 1.5 1.5 1.5h17c0.827 0 1.5-0.673 1.5-1.5v-17c0-0.827-0.673-1.5-1.5-1.5zM1 18.5v-4.807l4.197-4.617c0.085-0.093 0.196-0.145 0.314-0.147s0.231 0.048 0.318 0.139l9.5 9.932h-13.83c-0.276 0-0.5-0.224-0.5-0.5zM19 18.5c0 0.276-0.224 0.5-0.5 0.5h-1.786l-10.161-10.623c-0.281-0.294-0.655-0.452-1.053-0.447s-0.768 0.173-1.042 0.474l-3.457 3.803v-10.707c0-0.276 0.224-0.5 0.5-0.5h17c0.276 0 0.5 0.224 0.5 0.5v17z" fill="${r}"></path>\n        </svg>`)}`||void 0,emoji:i.emoji,label:i.nameVisible&&i.name||void 0,description:i.description,size:e.size,tabIndex:i.tabIndex||e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,disabled:i.disabled||e.disabled||e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||i.slot&&(i.slot.isFrozen||i.slot.isLocked)||!1,onAutoFocus:(i.slot||!a?0===o:n)&&e.onAutoFocus||void 0,onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:t=>{if(t.shiftKey&&"Enter"===t.key&&e.onSubmit)t.preventDefault(),e.onSubmit();else if("Escape"===t.key)t.currentTarget.blur();else if("Tab"===t.key)t.shiftKey?e.onCancel&&0===o&&(t.preventDefault(),e.onCancel()):e.onSubmit&&o+1===e.options.length&&(t.preventDefault(),e.onSubmit());else{const i=1===t.key.length&&t.key.charCodeAt(0)||0,s=(i<=57?i-48:0)||(i<=90?i-64:0)||(i<=122?i-96:0);if(s>0&&s<=26){const t=Wp(e.options,s-1);t&&h(t)}}},onClick:()=>h(i)},i.id||o);var r}))}),void 0)};let cN=class extends nN{constructor(){super(...arguments),this.hideButtons=!(this.props.multiple||!ym(this.props.choices,(e=>!!e.name&&!e.url))),this.autoSubmit=this.hideButtons}render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[this.props.imageURL&&this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),e.name,this.props.caption&&(0,yy.jsx)(AS,{children:e.markdownifyToJSX(this.props.caption)},void 0),e.description,this.props.imageURL&&!this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),(0,yy.jsx)(lN,{styles:e.styles.pictureChoice,view:e.view,options:this.choices(e),size:this.props.size,value:!this.props.multiple&&this.valueOf("choice")||void 0,required:this.required,ariaDescribedBy:e.ariaDescribedBy,autoSubmit:this.autoSubmit,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function uN(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}cN=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-picture-choice",autoRender:!0})],cN);let hN=class extends Mf{isSelected(){const e=this.valueOf();return e&&e.reference===this.props.button||!1}};uN([Bf],hN.prototype,"isSelected",null),hN=uN([Uf({type:"condition",identifier:"tripetto-block-radiobuttons"})],hN);let dN=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};uN([Bf],dN.prototype,"verify",null),dN=uN([Uf({type:"condition",identifier:"tripetto-block-radiobuttons:score"})],dN);class pN extends ff{constructor(){super(...arguments),this.scoreSlot=this.valueOf("score","feature"),this.radioSlot=Jp(this.valueOf("button","static",{confirm:!0,modifier:e=>{if(e.value){if(!e.reference){const t=ym(this.props.buttons,(t=>t.value===e.value))||ym(this.props.buttons,(t=>t.id===e.value))||ym(this.props.buttons,(t=>t.name===e.value))||ym(this.props.buttons,(t=>t.name.toLowerCase()===e.value.toLowerCase()));return{value:t&&(t.value||t.name),reference:t&&t.id}}if(!ym(this.props.buttons,(t=>t.id===e.reference)))return{value:void 0,reference:void 0}}},onChange:e=>{if(this.scoreSlot){const t=ym(this.props.buttons,(t=>t.id===e.reference));this.scoreSlot.set(t&&((null==t?void 0:t.score)||0))}}})),this.required=this.radioSlot.slot.required||!1}get value(){const e=ym(this.props.buttons,(e=>e.id===this.radioSlot.reference));return!e&&this.required&&this.props.buttons&&this.props.buttons.length>0?this.select(this.props.buttons[0]):e&&e.id||""}set value(e){const t=ym(this.props.buttons,(t=>t.id===e));t&&this.select(t)}buttons(e){var t;const i=(null===(t=this.props.buttons)||void 0===t?void 0:t.map((t=>Object.assign(Object.assign({},t),{name:pf(t.name,this.context,void 0,!1,of.Formatting|of.Hyperlinks),label:e.markdownifyToJSX(t.name,!1),description:t.description&&e.markdownifyToJSX(t.description,!0)||void 0}))))||[];if(this.props.randomize&&i.length>1){if(!this.randomized||this.randomized.length!==i.length||ym(this.randomized,(e=>{var t;return(null===(t=i[e.index])||void 0===t?void 0:t.id)!==e.id}))){this.randomized=i.map(((e,t)=>({index:t,id:e.id})));let e=this.randomized.length;for(;--e;){const t=Math.floor(Math.random()*e),i=this.randomized[e];this.randomized[e]=this.randomized[t],this.randomized[t]=i}}return this.randomized.map((e=>i[e.index]))}return this.randomized&&(this.randomized=void 0),i}isSelected(e){return this.value===e.id}select(e){return this.radioSlot.set(e.value||e.name,e.id),e.id}}let mN=class extends pN{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(vk,{styles:e.styles.radiobuttons,view:e.view,buttons:this.buttons(e),value:this.radioSlot,tabIndex:e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,allowUnselect:!1,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function gN(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}mN=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-radiobuttons"})],mN);let bN=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Number){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}compare(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};gN([Bf],bN.prototype,"compare",null),bN=gN([Uf({type:"condition",identifier:"tripetto-block-rating:compare"})],bN);let fN=class extends Mf{stars(){const e=this.valueOf("rating");return e&&e.value===this.props.stars||!1}};gN([Bf],fN.prototype,"stars",null),fN=gN([Uf({type:"condition",identifier:"tripetto-block-rating",alias:"rating"})],fN);class yN extends ff{constructor(){super(...arguments),this.ratingSlot=Jp(this.valueOf("rating")),this.required=this.ratingSlot.slot.required||!1,this.steps=this.props.steps||5,this.shape=this.props.shape||"stars"}}const vN=(0,yy.jsx)("svg",Object.assign({viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"m15.094 17.79-5.0784-2.6559-5.0669 2.6778 0.95658-5.6506-4.1125-3.9914 5.6696-0.83638 2.5252-5.1447 2.5475 5.1337 5.6732 0.81184-4.0952 4.0092z",strokeLinejoin:"round"},void 0)}),void 0),MN=(0,yy.jsx)("svg",Object.assign({viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"m5.75 2.539c-2.343 0-4.25 1.907-4.25 4.25 0 3.04 2.35 5.802 4.321 7.585 1.76 1.592 3.544 2.708 4.179 3.087 0.635-0.379 2.419-1.495 4.179-3.087 1.971-1.782 4.321-4.545 4.321-7.585 0-2.343-1.907-4.25-4.25-4.25-1.703 0-3.357 1.401-3.776 2.658-0.068 0.204-0.259 0.64132-0.474 0.64132s-0.406-0.43732-0.474-0.64132c-0.419-1.257-2.073-2.658-3.776-2.658z",strokeLinejoin:"round"},void 0)}),void 0),wN=(0,yy.jsx)("svg",Object.assign({viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"m4.6945 17.966h-3c-0.276 0-0.5-0.224-0.5-0.5v-9c0-0.276 0.224-0.5 0.5-0.5h3c0.276 0 0.5 0.224 0.5 0.5v9c0 0.276-0.224 0.5-0.5 0.5zm13.839-7.726c-0.151 0.304-0.304 0.414-0.37 0.414-0.276 0-0.5 0.224-0.5 0.5s0.224 0.5 0.5 0.5c0.042 0 0.072 0 0.117 0.078 0.066 0.117 0.104 0.32 0.104 0.558 0 0.445-0.126 0.974-0.328 1.382-0.198 0.399-0.399 0.544-0.487 0.544-0.276 0-0.5 0.224-0.5 0.5 0 0.177 0.092 0.333 0.231 0.422 0.031 0.317-0.117 1.165-0.501 1.718-0.145 0.209-0.298 0.329-0.418 0.329-0.276 0-0.5 0.224-0.5 0.5 0 0.88-0.972 1.281-1.875 1.281-2.513 0-3.217-0.376-4.032-0.812-0.762-0.407-1.2175-0.865-3.3805-1.134v-8.187c2.101-0.689 3.7515-1.877 5.4115-3.373 1.593-1.436 2.639-2.988 2.994-4.426 0.272 0.087 0.579 0.271 0.776 0.618 0.334 0.59 0.584 2.096-1.493 5.557-0.093 0.154-0.095 0.347-6e-3 0.504s0.255 0.254 0.435 0.254h3.483c0.199 0 0.327 0.07 0.43 0.234 0.117 0.187 0.181 0.477 0.181 0.815 0 0.424-0.102 0.882-0.272 1.225z",strokeLinejoin:"round"},void 0)}),void 0),xN=(0,yy.jsx)("svg",Object.assign({viewBox:"0 0 20 20"},{children:(0,yy.jsx)("path",{d:"m4.5945 2.034h-3c-0.276 0-0.5 0.224-0.5 0.5v9c0 0.276 0.224 0.5 0.5 0.5h3c0.276 0 0.50307-0.22402 0.5-0.5v-9c0-0.276-0.224-0.5-0.5-0.5zm14.039 7.726c-0.151-0.304-0.304-0.414-0.37-0.414-0.276 0-0.5-0.224-0.5-0.5s0.224-0.5 0.5-0.5c0.042 0 0.072 0 0.117-0.078 0.066-0.117 0.104-0.32 0.104-0.558 0-0.445-0.126-0.974-0.328-1.382-0.198-0.399-0.399-0.544-0.487-0.544-0.276 0-0.5-0.224-0.5-0.5 0-0.177 0.092-0.333 0.231-0.422 0.031-0.317-0.117-1.165-0.501-1.718-0.145-0.209-0.298-0.329-0.418-0.329-0.276 0-0.5-0.224-0.5-0.5 0-0.88-0.972-1.281-1.875-1.281-2.513 0-3.217 0.376-4.032 0.812-0.762 0.407-1.618 0.865-3.781 1.134v8.187c2.101 0.689 4.152 1.877 5.812 3.373 1.593 1.436 2.639 2.988 2.994 4.426 0.272-0.087 0.579-0.271 0.776-0.618 0.334-0.59 0.584-2.096-1.493-5.557-0.093-0.154-0.095-0.347-6e-3 -0.504s0.255-0.254 0.435-0.254h3.483c0.199 0 0.327-0.07 0.43-0.234 0.117-0.187 0.181-0.477 0.181-0.815 0-0.424-0.102-0.882-0.272-1.225z",strokeLinejoin:"round"},void 0)}),void 0),SN=(0,yy.jsxs)("svg",Object.assign({viewBox:"0 0 20 20"},{children:[(0,yy.jsx)("path",{d:"m9.5 1.3c-2.481 0-4.5 2.019-4.5 4.5s2.019 4.5 4.5 4.5 4.5-2.019 4.5-4.5-2.019-4.5-4.5-4.5z"},void 0),(0,yy.jsx)("path",{d:"m9.5 11.9c-3.487 0-6.06 0.953-7.441 2.756-1.035 1.351-1.058 2.732-1.059 2.746 0 0.274 0.224 0.498 0.5 0.498h16c0.276 0 0.5-0.224 0.5-0.5 0-0.012-0.023-1.393-1.059-2.744-1.382-1.803-3.955-2.756-7.441-2.756z"},void 0)]}),void 0),IN=tw.div`
    display: block;
    width: 100%;
`,kN=tw.button`
    appearance: none;
    box-sizing: border-box;
    background: none;
    border: none;
    outline: none;
    width: ${e=>2*e.props.scale+"em"};
    height: ${e=>2*e.props.scale+"em"};
    margin: 0;
    padding: 0;
    margin-bottom: ${e=>e.props.showLabels&&"1em"};
    display: inline-block;
    opacity: 0.2;
    cursor: default;
    transition: width 0.15s ease-in-out, height 0.15s ease-in-out, opacity 0.15 ease-in-out;

    > svg {
        path {
            fill: ${e=>e.props.checked&&Uw(e.props.color)||e.props.hover&&Uw(e.props.color,(e=>e.manipulate((e=>e.alpha(.3)))))||"none"};
            stroke: ${e=>Uw(e.props.color)};
            stroke-width: 1px;
            transition: fill 0.15s ease-in-out, stroke 0.15s ease-in-out;
        }
    }

    > small {
        display: block;
        font-size: 0.8em;
        line-height: 1em;
        text-align: center;
        margin: 0;
        padding: 0;
        color: ${e=>Uw(e.props.color)};
    }

    animation: ${e=>e.props.checked?RM`
                  ${ew`
                        50% {
                            transform: scale(1.1);
                        }

                        100% {
                            transform: none;
                        }
                    `} .5s linear
              `:void 0};

    :not(:disabled) {
        opacity: 1;
        cursor: pointer;

        :focus {
            > svg {
                path {
                    stroke-width: ${e=>e.props.checked?"2px":void 0};
                    fill: ${e=>!e.props.checked&&Uw(e.props.color,(e=>e.manipulate((e=>e.alpha(.3)))))||void 0};
                    stroke: ${e=>e.props.checked&&Uw(e.props.color,(e=>e.manipulate((e=>e.alpha(.3)))))||void 0};
                }
            }
        }
    }
`,NN=e=>{switch(e){case"stars":return vN;case"hearts":return MN;case"thumbs-up":return wN;case"thumbs-down":return xN;case"persons":return SN}},_N=(e,t)=>t?e.value=t:(e.clear(),0),LN=e=>{const t=e.value,i=(0,o.useRef)(0),[s,n]=(0,o.useState)("object"!=typeof t&&t||0),[r,a]="object"==typeof t?[0!==i.current?s:_N(t,t.value),(s,o)=>{Hm(i.current),n(s),i.current=Rm((()=>{i.current=0,_N(t,s),o&&e.autoSubmit&&s&&lx(h)}),50)}]:[s,n],[l,c]=(0,o.useState)(0),u=[],h=(0,o.useRef)({id:0,cb:e.onSubmit}),d=dp.max(1,e.steps),p=e.disabled||e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||!1,m=(t,i)=>{e.disabled||e.readOnly||(t=dp.range(t,0,d),h.current.id&&(clearTimeout(h.current.id),h.current.id=0),a(t,i),e.onChange&&e.onChange(t),i&&e.autoSubmit&&t&&lx(h))};(0,o.useEffect)((()=>()=>{Hm(i.current)}),[]);for(let t=1;t<=d;t++)u.push((0,yy.jsxs)(kN,Object.assign({ref:t===(r||1)&&e.onAutoFocus||void 0,props:{color:e.styles.color,scale:e.styles.scale||1,hover:!p&&l>=t,checked:t<=r,showLabels:e.showLabels||!1},disabled:p,tabIndex:e.tabIndex,"aria-describedby":e.ariaDescribedBy,onMouseOver:()=>c(t),onMouseOut:()=>c(0),onClick:()=>m(1!==r||e.required?t:0,!0),onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:i=>{if(i.shiftKey&&"Enter"===i.key&&e.onSubmit)i.preventDefault(),e.onSubmit();else if("Enter"===i.key||" "===i.key)i.preventDefault(),m(1!==r||e.required?t:0,!0);else if("Escape"===i.key)i.currentTarget.blur();else if("Tab"===i.key)i.shiftKey?e.onCancel&&1===t&&(i.preventDefault(),e.onCancel()):e.onSubmit&&t===d&&(i.preventDefault(),e.onSubmit());else if("-"===i.key)r>0&&m(r-1,!1);else if("+"===i.key)r<d&&m(r+1,!1);else{const e=1===i.key.length?i.key.charCodeAt(0)-48:-1;e>=0&&e<=9&&m(r===e?e-1:e,!0)}}},{children:[NN(e.shape||"stars"),e.showLabels&&(0,yy.jsx)("small",{children:t},void 0)]}),t));return h.current.cb=e.onSubmit,(0,yy.jsx)(IN,{children:u},void 0)};let CN=class extends yN{constructor(){super(...arguments),this.autoSubmit=!0}render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[this.props.imageURL&&this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),e.name,e.description,this.props.imageURL&&!this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),(0,yy.jsx)(LN,{styles:e.styles.rating,value:this.ratingSlot,required:this.required,tabIndex:e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,autoSubmit:this.autoSubmit,shape:this.shape,steps:this.steps,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function DN(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}CN=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-rating",alias:"rating"})],CN);let AN=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Number){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}compare(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};DN([Bf],AN.prototype,"compare",null),AN=DN([Uf({type:"condition",identifier:"tripetto-block-scale:compare"})],AN);let jN=class extends Mf{match(){const e=this.valueOf();return e&&this.props.option===e.reference||!1}};DN([Bf],jN.prototype,"match",null),jN=DN([Uf({type:"condition",identifier:"tripetto-block-scale:match"})],jN);let TN=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};DN([Bf],TN.prototype,"verify",null),TN=DN([Uf({type:"condition",identifier:"tripetto-block-scale:score"})],TN);class zN extends ff{constructor(){super(...arguments),this.scoreSlot=this.valueOf("score","feature"),this.scaleSlot=Jp(this.valueOf("scale","static",{confirm:!0,modifier:e=>{if("options"===this.props.mode&&e.value){if(!e.reference){const t=ym(this.props.options,(t=>t.value===e.value))||ym(this.props.options,(t=>t.id===e.value))||ym(this.props.options,(t=>t.name===e.value))||ym(this.props.options,(t=>t.name.toLowerCase()===e.string.toLowerCase()));return{value:t&&(t.value||t.name),reference:t&&t.id}}if(!ym(this.props.options,(t=>t.id===e.reference)))return{value:void 0,reference:void 0}}},onChange:e=>{if(this.scoreSlot){const t=ym(this.props.options,(t=>t.id===e.reference));this.scoreSlot.set(t&&((null==t?void 0:t.score)||0))}}})),this.required=this.scaleSlot.slot.required||!1}get from(){return dp.range(dp.min(tm(this.props.from,0),tm(this.props.to,10)),-25,25)}get to(){return dp.range(dp.max(tm(this.props.from,0),tm(this.props.to,10)),-25,25)}get stepSize(){return dp.max(tm(this.props.stepSize,0),1)}get options(){var e;return"options"===this.props.mode?(null===(e=this.props.options)||void 0===e?void 0:e.map((e=>Object.assign(Object.assign({},e),{name:pf(e.name,this.context)}))))||[]:{from:this.from,to:this.to,stepSize:this.stepSize}}}const EN=tw.div`
    display: block;
    width: 100%;

    > div {
        max-width: calc(100% + 0.4rem);
        overflow-x: scroll;
        -ms-overflow-style: none;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
        padding: 0.2rem;
        margin -0.2rem;

        ::-webkit-scrollbar {
            display: none;
        }

        > div {
            display: inline-block;
            white-space: nowrap;
            min-width: ${e=>e.props.justify?"100%":void 0};

            @media (max-device-width: 500px) {
                min-width: 100%;
            }

            @media (max-width: 500px) {
                min-width: 100%;
            }

            > div {
                display: flex;
                flex-wrap: nowrap;

                > button {
                    flex-grow: ${e=>e.props.justify?"1":void 0};
                    min-width: ${e=>e.props.justify?void 0:"3em"};

                    @media (max-device-width: 500px) {
                        min-width: auto;
                        flex-grow: 1;
                        padding-left: 0.55em;
                        padding-right: 0.55em;
                    }

                    @media (max-width: 500px) {
                        min-width: auto;
                        flex-grow: 1;
                        padding-left: 0.55em;
                        padding-right: 0.55em;
                    }

                    > span > span {
                        display: flex;
                        align-content: center;
                        justify-content: center;
                    }
                }
            }
        }
    }
`,ON=tw.div`
    display: flex;
    flex-direction: row;
    padding-top: 0.1em;

    > small {
        flex: 1 1 0%;
        font-size: 0.8em;
        color: ${e=>e.props.labelColor};

        &:first-child {
            text-align: left;
        }

        &:nth-child(2) {
            text-align: center;
        }

        &:last-child {
            text-align: right;
        }
    }
`,PN=(e,t,i)=>{if(Bp(t)){const s=ym(t,(e=>e.id===i));return e.reference!==(null==s?void 0:s.id)&&e.set(s&&(s.value||s.name),null==s?void 0:s.id),s&&s.id||""}if(Hp(i)&&t){const s=dp.range(i,dp.min(t.from,t.to),dp.max(t.from,t.to));return e.set(s),s}e.clear()},RN=e=>{const t=e.value,i=(0,o.useRef)(0),[s,n]=(0,o.useState)("object"!=typeof t&&t||void 0),[r,a]="object"==typeof t?[0!==i.current?s:PN(t,e.options,Bp(e.options)?t.reference:Hp(t.pristine)?t.pristine:void 0),(s,o)=>{Hm(i.current),n(s),i.current=Rm((()=>{i.current=0,PN(t,e.options,s),o&&e.autoSubmit&&void 0!==s&&lx(l)}),50)}]:[s,n],l=(0,o.useRef)({id:0,cb:e.onSubmit}),c=(t,i)=>{l.current.id&&(clearTimeout(l.current.id),l.current.id=0),a(t,i),e.onChange&&e.onChange(t),i&&e.autoSubmit&&void 0!==t&&lx(l)};let u=[];const h=(t,i)=>s=>{if(s.shiftKey&&"Enter"===s.key&&e.onSubmit)s.preventDefault(),e.onSubmit();else if("Escape"===s.key)s.currentTarget.blur();else if("Tab"===s.key)s.shiftKey?e.onCancel&&0===t&&(s.preventDefault(),e.onCancel()):e.onSubmit&&t+1===u.length&&(s.preventDefault(),e.onSubmit());else if(i)if("-"===s.key||"+"===s.key)i(s.key);else{const e=1===s.key.length?s.key.charCodeAt(0)-48:-1;e>=0&&e<=9&&i(e)}};if((0,o.useEffect)((()=>()=>{Hm(i.current)}),[]),l.current.cb=e.onSubmit,Bp(e.options)){const i="preview"===e.view?e.options:e.options.filter((e=>!!e.name)),s=i.length;u=i.map(((i,o)=>(0,yy.jsx)(Vw,{styles:{baseColor:e.styles.color,mode:r===i.id?"fill":"outline",hover:"outline",outlineSize:e.styles.outlineSize,roundness:e.styles.roundness,scale:e.styles.scale,group:s>1?0===o?"start":o+1===s?"end":"middle":void 0},label:i.name||"...",tabIndex:e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,disabled:e.disabled||e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||!1,onAutoFocus:(!r&&0===o||r===i.id)&&e.onAutoFocus||void 0,onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:h(o),onClick:()=>c(e.required||r!==i.id?i.id:void 0,!0)},o)))}else if(e.options){const i=dp.min(e.options.from,e.options.to),s=dp.max(e.options.from,e.options.to),o=dp.max(e.options.stepSize||0,1);for(let n=i;n<=s;n+=o)u.push((0,yy.jsx)(Vw,{styles:{baseColor:e.styles.color,mode:r===n?"fill":"outline",hover:"outline",outlineSize:e.styles.outlineSize,roundness:e.styles.roundness,scale:e.styles.scale,group:s>i&&i+o<=s?n===i?"start":n+o>s?"end":"middle":void 0},label:em(n),tabIndex:e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,disabled:e.disabled||e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||!1,onAutoFocus:n===(Hp(r)?r:i)&&e.onAutoFocus||void 0,onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:h(n-i,(e=>{"-"===e||"+"===e?Hp(r)?("-"===e&&r>i||"+"===e&&r<s)&&c(r+("-"===e?-1:1),!1):c(n,!1):e>=i&&e<=s&&c(r!==e?e:void 0,!0)})),onClick:()=>c(e.required||r!==n?n:void 0,!0)},n))}return(0,yy.jsx)(EN,Object.assign({props:e},{children:(0,yy.jsx)("div",{children:(0,yy.jsxs)("div",{children:[(0,yy.jsx)("div",{children:u},void 0),u.length>0&&(e.labelLeft||e.labelCenter&&u.length>2||e.labelRight&&u.length>1)&&(0,yy.jsxs)(ON,Object.assign({props:e.styles},{children:[(0,yy.jsx)("small",{children:e.labelLeft||""},void 0),(0,yy.jsx)("small",{children:u.length>2&&e.labelCenter||""},void 0),(0,yy.jsx)("small",{children:u.length>1&&e.labelRight||""},void 0)]}),void 0)]},void 0)},void 0)}),void 0)};let HN=class extends zN{constructor(){super(...arguments),this.hideButtons=!0,this.autoSubmit=!0}render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(RN,{styles:e.styles.scale,view:e.view,options:this.options,value:this.scaleSlot,required:this.required,tabIndex:e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,labelLeft:this.props.labelLeft&&e.markdownifyToJSX(this.props.labelLeft,!1),labelCenter:this.props.labelCenter&&e.markdownifyToJSX(this.props.labelCenter,!1),labelRight:this.props.labelRight&&e.markdownifyToJSX(this.props.labelRight,!1),justify:this.props.justify,autoSubmit:this.autoSubmit,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};HN=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-scale"})],HN);class FN extends ff{}const UN=tw.div`
    padding-left: 2.2em;
    background-image: ${e=>`url("data:image/svg+xml;base64,${btoa(`<?xml version="1.0" encoding="utf-8"?>\n            <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="20" height="20" viewBox="0 0 10240 10240">\n            <path d="M6400 8320l1920 0c353,0 640,-287 640,-640l0 -1920c0,-353 -287,-640 -640,-640l-960 0c0,-499 0,-1464 1310,-1587 165,-16 290,-153 290,-319l0 -966c0,-91 -34,-169 -100,-232 -66,-63 -145,-92 -236,-88 -2864,146 -2864,2164 -2864,3192l0 2560c0,353 287,640 640,640z" fill="${e.props.styles.font.color}" />\n            <path d="M1920 8320l1920 0c353,0 640,-287 640,-640l0 -1920c0,-353 -287,-640 -640,-640l-960 0c0,-499 0,-1464 1310,-1587 165,-16 290,-153 290,-319l0 -966c0,-91 -34,-169 -100,-232 -66,-63 -145,-92 -236,-88 -2864,146 -2864,2164 -2864,3192l0 2560c0,353 287,640 640,640z" fill="${e.props.styles.font.color}" />\n        </svg>`)}")`};
    background-repeat: no-repeat;
    background-size: 1.6em 1.6em;
    background-position: top left;

    > h2 {
        font-weight: normal;
    }
`;let BN=class extends FN{constructor(){super(...arguments),this.autoFocus=!0}render(e){return(0,yy.jsxs)(UN,Object.assign({props:e},{children:[this.props.imageURL&&this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),e.name,e.description,this.props.imageURL&&!this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0)]}),void 0)}};BN=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-statement",alias:"statement"})],BN);class YN extends ff{stopHere(){return!1}}!function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);n>3&&r&&Object.defineProperty(t,i,r)}([Yf],YN.prototype,"stopHere",null);let ZN=class extends YN{constructor(){super(...arguments),this.hideButtons=!0}render(e){return(e.name||e.description||this.props.imageURL)&&(0,yy.jsxs)(yy.Fragment,{children:[this.props.imageURL&&this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),e.name,e.description,this.props.imageURL&&!this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0)]},void 0)}};function VN(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}ZN=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-stop"})],ZN);let WN=class extends Mf{getMatchString(){if(lf(this.props.match)){const e=this.variableFor(this.props.match);return e&&e.hasValue?e.string:""}return this.parseVariables(this.props.match||"")}isEqual(){const e=this.valueOf();if(e){const t=this.props.ignoreCase?pp.lowercase(this.getMatchString()):this.getMatchString(),i=this.props.ignoreCase?pp.lowercase(e.string):e.string;switch(this.props.mode){case"exact":return i===t;case"not-exact":return i!==t;case"contains":return t&&-1!==i.indexOf(t)||!1;case"not-contains":return t&&-1===i.indexOf(t)||!1;case"starts":return t&&0===i.indexOf(t)||!1;case"ends":return t&&i.lastIndexOf(t)===i.length-t.length||!1;case"defined":return""!==i;case"undefined":return""===i}}return!1}};VN([Bf],WN.prototype,"isEqual",null),WN=VN([Uf({type:"condition",identifier:"tripetto-block-text"})],WN);let GN=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};VN([Bf],GN.prototype,"verify",null),GN=VN([Uf({type:"condition",identifier:"tripetto-block-text:score"})],GN);class $N extends ff{constructor(){super(...arguments),this.scoreSlot=this.valueOf("score","feature"),this.textSlot=Jp(this.valueOf("value","static",{prefill:Ep(this.props.prefill)&&{value:this.props.prefill}||void 0,modifier:e=>{var t;if(this.props.useSuggestions)return{value:e.value,reference:e.value&&(null===(t=ym(this.props.suggestions,(t=>t.name===e.value)))||void 0===t?void 0:t.id)||void 0}},onChange:e=>{if(this.scoreSlot){const t=this.props.useSuggestions&&ym(this.props.suggestions,(t=>t.name===e.value))||void 0;this.scoreSlot.set(t&&((null==t?void 0:t.score)||0))}}})),this.required=this.textSlot.slot.required||!1,this.maxLength=this.textSlot.slot.maxLength,this.autoComplete=this.props.autoComplete}get suggestions(){var e;return this.props.useSuggestions&&(null===(e=this.props.suggestions)||void 0===e?void 0:e.map((e=>e.name)))||void 0}validate(){return!this.props.minLength||!this.textSlot.value.length||this.textSlot.value.length>=this.props.minLength}}VN([Yf],$N.prototype,"validate",null);let QN=0;const qN=e=>{const[t]=(0,o.useState)((()=>Xg.SHA2_256("Text"+QN++)));return(0,yy.jsxs)(yy.Fragment,{children:[(0,yy.jsx)(ux,Object.assign({list:e.suggestions&&t,type:"text",inputMode:"tel"===e.autoComplete?"tel":"text"},e),void 0),e.suggestions&&(0,yy.jsx)("datalist",Object.assign({id:t},{children:e.suggestions.map(((e,t)=>e&&(0,yy.jsx)("option",{value:e},t)))}),void 0)]},void 0)};let XN=class extends $N{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(qN,{id:e.id,styles:e.styles.inputs,value:this.textSlot,required:this.required,error:e.isFailed,tabIndex:e.tabIndex,placeholder:e.placeholder,maxLength:this.maxLength,autoComplete:this.autoComplete,suggestions:this.suggestions,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function JN(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}XN=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-text"})],XN);let KN=class extends Mf{getMatchString(){if(lf(this.props.match)){const e=this.variableFor(this.props.match);return e&&e.hasValue?e.string:""}return this.parseVariables(this.props.match||"","",!0)}isEqual(){const e=this.valueOf();if(e){const t=this.props.ignoreCase?pp.lowercase(this.getMatchString()):this.getMatchString(),i=this.props.ignoreCase?pp.lowercase(e.string):e.string;switch(this.props.mode){case"exact":return i===t;case"not-exact":return i!==t;case"contains":return t&&-1!==i.indexOf(t)||!1;case"not-contains":return t&&-1===i.indexOf(t)||!1;case"starts":return t&&0===i.indexOf(t)||!1;case"ends":return t&&i.lastIndexOf(t)===i.length-t.length||!1;case"defined":return""!==i;case"undefined":return""===i}}return!1}};JN([Bf],KN.prototype,"isEqual",null),KN=JN([Uf({type:"condition",identifier:"tripetto-block-textarea"})],KN);class e_ extends ff{constructor(){super(...arguments),this.textareaSlot=Jp(this.valueOf("value","static",{prefill:Ep(this.props.prefill)&&{value:this.props.prefill}||void 0})),this.required=this.textareaSlot.slot.required||!1,this.maxLength=this.textareaSlot.slot.maxLength}validate(){return!this.props.minLength||!this.textareaSlot.value.length||this.textareaSlot.value.length>=this.props.minLength}}JN([Yf],e_.prototype,"validate",null);const t_=tw.textarea`
    appearance: none;
    resize: none;
    outline: none;
    box-sizing: border-box;
    display: block;
    width: 100%;
    font-size: 1em;
    line-height: 1.5em;
    background-color: ${e=>Uw(e.props.error&&"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?e.props.errorColor:e.props.backgroundColor)};
    background-image: ${e=>e.props.error?`url("data:image/svg+xml;base64,${Yw(Uw(e.props.errorColor,(t=>t.makeBlackOrWhite("transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor))))}")`:void 0};
    background-repeat: no-repeat;
    background-size: ${8/7}em;
    background-position: right 0.375em top 0.375em;
    border: ${e=>`${"transparent"===e.props.backgroundColor&&"transparent"===e.props.borderColor?0:e.props.borderSize}px solid ${Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)}`};
    color: ${e=>Uw(e.props.error?"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?Uw(e.props.errorColor,(e=>e.makeBlackOrWhite())):e.props.errorColor:e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
    border-radius: ${e=>Hp(e.props.roundness)?`${e.props.roundness}px`:"0.5em"};
    padding: ${e=>"transparent"===e.props.backgroundColor&&"transparent"===e.props.borderColor?"0":.375*e.props.scale+"em 0.75em"};
    padding-right: ${e=>e.props.error?8/7+.75+"em":void 0};
    margin: 0;
    opacity: 0.65;
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out,
        opacity 0.15s ease-in-out;
    overflow-y: auto;
    overflow-x: hidden;
    scroll-behavior: smooth;
    -ms-overflow-style: none;
    -webkit-overflow-scrolling: touch;
    -webkit-tap-highlight-color: transparent;
    ::-webkit-scrollbar {
        display: none;
    }

    ::placeholder {
        color: ${e=>Uw(e.props.error?"transparent"!==e.props.backgroundColor&&"transparent"===e.props.borderColor?Uw(e.props.errorColor,(e=>e.makeBlackOrWhite())):e.props.errorColor:e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
        opacity: 0.5;
        transition: color 0.15s ease-in-out opacity 0.15s ease-in-out;
    }

    :not(:disabled):not([readonly]) {
        opacity: 1;

        :hover {
            box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.error?e.props.errorColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.2)))))}`||void 0};
        }

        :focus {
            background-color: ${e=>Uw(e.props.backgroundColor)};
            background-image: ${e=>e.props.errorVisible?void 0:"none"};
            border-color: ${e=>Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor)};
            color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
            box-shadow: ${e=>("transparent"!==e.props.backgroundColor||"transparent"!==e.props.borderColor)&&`0 0 0 0.2rem ${Uw(e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:e.props.backgroundColor,(e=>e.manipulate((e=>e.alpha(.5)))))}`||void 0};
            ::placeholder {
                color: ${e=>Uw(e.props.textColor?e.props.textColor:e.props.borderColor&&"transparent"!==e.props.borderColor?e.props.borderColor:Uw(e.props.backgroundColor,(e=>e.makeBlackOrWhite())))};
                opacity: 0.3;
            }
        }
    }
`,i_=e=>{const t=e.value,i=(0,o.useRef)({duration:0,handle:0}),[s,n]=(0,o.useState)(!1),[r,a]=(0,o.useState)("object"==typeof t?em(t.pristine):t||""),[l,c]="object"==typeof t?[s?r:t.string,e=>{Hm(i.current.handle),a(e);const s=dp.range(2*i.current.duration,16.666666666666668,1e3);i.current.handle=Rm((()=>{const s=Lp.precise;i.current.handle=0,i.current.update=()=>{i.current.duration=Lp.elapsed(s,!0),i.current.update=void 0},t.pristine=e||void 0}),s)}]:[r,a],[u,h]=(0,o.useState)(!!l),[d,p]=(0,o.useState)("auto"),m=(0,o.useRef)(),g=(0,o.useRef)();return(0,o.useEffect)((()=>{if(g.current&&(s||(g.current.value=l),e.autoSize)){"number"!=typeof m.current&&(m.current=g.current.getBoundingClientRect().height);const e=g.current.style.height;g.current.style.height="auto";const t=Math.max(m.current,g.current.scrollHeight);p(t>10?t+"px":"auto"),g.current.style.height=e}}),[l]),(0,o.useEffect)((()=>()=>{Hm(i.current.handle)}),[]),i.current.update&&i.current.update(),(0,yy.jsx)(t_,{id:e.id,ref:t=>{e.onAutoFocus&&e.onAutoFocus(t),g.current=t},tabIndex:e.tabIndex,placeholder:e.placeholder,required:e.required||!1,disabled:e.disabled||!1,readOnly:e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||!1,rows:e.rows||2,maxLength:e.maxLength||void 0,defaultValue:l,autoComplete:"off",inputMode:"text","aria-describedby":e.ariaDescribedBy,props:{backgroundColor:e.styles.backgroundColor||"transparent",borderColor:e.styles.borderColor||"transparent",borderSize:e.styles.borderSize||1,roundness:e.styles.roundness,textColor:e.styles.textColor,errorColor:e.styles.errorColor,errorVisible:u,error:e.error||!1,scale:e.styles.scale||1},style:{height:d,overflowY:e.autoSize?"hidden":void 0},onChange:t=>{c(t.target.value),h(!0),e.onChange&&nx(c,e.onChange(t.target.value))},onFocus:rx(n,c,e.onFocus),onBlur:ax(n,c,e.onBlur),onKeyDown:t=>{t.shiftKey&&"Enter"===t.key&&e.onSubmit?(t.preventDefault(),e.onSubmit()):"Escape"===t.key?t.currentTarget.blur():"Tab"===t.key&&(t.shiftKey?e.onCancel&&(t.preventDefault(),e.onCancel()):e.onSubmit&&(t.preventDefault(),e.onSubmit()))}},void 0)};let s_=class extends e_{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(i_,{id:e.id,styles:e.styles.inputs,value:this.textareaSlot,required:this.required,error:e.isFailed,autoSize:!0,tabIndex:e.tabIndex,placeholder:e.placeholder,maxLength:this.maxLength,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function o_(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}s_=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-textarea"})],s_);let n_=class extends Mf{verify(){const e=this.valueOf();if(e)switch(this.props.mode){case"defined":return""!==e.string;case"undefined":return""===e.string}return!1}};o_([Bf],n_.prototype,"verify",null),n_=o_([Uf({type:"condition",identifier:"tripetto-block-url"})],n_);const r_=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i;class a_ extends ff{constructor(){super(...arguments),this.urlSlot=Jp(this.valueOf("url")),this.required=this.urlSlot.slot.required||!1}validate(){return!this.urlSlot.string||r_.test(this.urlSlot.value)}}o_([Yf],a_.prototype,"validate",null);const l_=e=>ux(Object.assign(Object.assign({type:"url",inputMode:"url"},e),{placeholder:e.placeholder||"https://"}));let c_=class extends a_{render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[e.name,e.description,(0,yy.jsx)(l_,{id:e.id,styles:e.styles.inputs,value:this.urlSlot,required:this.required,error:e.isFailed,tabIndex:e.tabIndex,placeholder:e.placeholder,ariaDescribedBy:e.ariaDescribedBy,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};function u_(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}c_=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-url"})],c_);let h_=class extends Mf{isNo(){const e=this.valueOf();return!!e&&"no"===e.reference}};u_([Bf],h_.prototype,"isNo",null),h_=u_([Uf({type:"condition",identifier:"tripetto-block-yes-no:no",alias:"yes-no:no"})],h_);let d_=class extends Mf{isYes(){const e=this.valueOf();return!!e&&"yes"===e.reference}};u_([Bf],d_.prototype,"isYes",null),d_=u_([Uf({type:"condition",identifier:"tripetto-block-yes-no:yes",alias:"yes-no:yes"})],d_);let p_=class extends Mf{getValue(e,t){if(Ep(t)&&e instanceof Cb.Numeric){const i=this.variableFor(t);return i&&i.hasValue?e.toValue(i.value):void 0}return Hp(t)?t:void 0}verify(){const e=this.valueOf();if(e){const t=this.getValue(e.slot,this.props.value);switch(this.props.mode){case"equal":return(e.hasValue?e.value:void 0)===t;case"not-equal":return(e.hasValue?e.value:void 0)!==t;case"below":return Hp(t)&&e.hasValue&&e.value<t;case"above":return Hp(t)&&e.hasValue&&e.value>t;case"between":case"not-between":const i=this.getValue(e.slot,this.props.to);return Hp(t)&&Hp(i)&&(e.hasValue&&e.value>=dp.min(t,i)&&e.value<=dp.max(t,i))===("between"===this.props.mode);case"defined":return e.hasValue;case"undefined":return!e.hasValue}}return!1}};u_([Bf],p_.prototype,"verify",null),p_=u_([Uf({type:"condition",identifier:"tripetto-block-yes-no:score"})],p_);class m_ extends ff{constructor(){super(...arguments),this.scoreSlot=this.valueOf("score","feature"),this.answerSlot=Jp(this.valueOf("answer","static",{modifier:e=>{let t=e.reference;if("yes"!==t&&"no"!==t)if(e.string){const i=[this.props.aliasYes||"",this.parseVariables(this.props.altYes||""),"Yes"],s=[this.props.aliasNo||"",this.parseVariables(this.props.altNo||""),"No"];ym(i,(t=>t===e.string))?t="yes":ym(s,(t=>t===e.string))?t="no":ym(i,(t=>t.toLowerCase()===e.string.toLowerCase()))?t="yes":ym(s,(t=>t.toLowerCase()===e.string.toLowerCase()))&&(t="no")}else t=void 0;return{value:"yes"===t?this.props.aliasYes||this.parseVariables(this.props.altYes||"")||"Yes":"no"===t?this.props.aliasNo||this.parseVariables(this.props.altNo||"")||"No":void 0,reference:t}},onChange:e=>{this.scoreSlot&&this.scoreSlot.set(e.hasValue?tm("yes"===e.reference?this.props.scoreForTrue:this.props.scoreForFalse):void 0)}})),this.required=this.answerSlot.slot.required||!1}toggle(e){const t=this.answerSlot.reference===e?void 0:e;this.answerSlot.set("",t)}}const g_=(0,yy.jsx)("svg",Object.assign({viewBox:"0 0 10240 10240"},{children:(0,yy.jsx)("path",{d:"M3840 5760l3934 -3934c124,-124 328,-124 452,0l1148 1148c124,124 124,328 0,452l-5308 5308c-124,124 -328,124 -452,0l-2748 -2748c-124,-124 -124,-328 0,-452l1148 -1148c124,-124 328,-124 452,0l1374 1374z"},void 0)}),void 0),b_=(0,yy.jsx)("svg",Object.assign({viewBox:"0 0 10240 10240"},{children:(0,yy.jsx)("path",{d:"M7906 1506l828 828c124,124 124,328 0,452l-2334 2334 2334 2334c124,124 124,328 0,452l-828 828c-124,124 -328,124 -452,0l-2334 -2334 -2334 2334c-124,124 -328,124 -452,0l-828 -828c-124,-124 -124,-328 0,-452l2334 -2334 -2334 -2334c-124,-124 -124,-328 0,-452l828 -828c124,-124 328,-124 452,0l2334 2334 2334 -2334c124,-124 328,-124 452,0z"},void 0)}),void 0),f_=tw.div`
    display: block;
    width: 100%;

    > * {
        display: ${e=>"vertical"===e.props.alignment?"block":void 0};
    }

    > * + * {
        margin-top: ${e=>"vertical"===e.props.alignment&&`${e.props.margin||8}px`||void 0};
    }
`,y_=e=>{switch(e){case"yes":return g_;case"no":return b_}},v_=(e,t,i)=>"yes"===t||"no"===t?(e.reference!==t&&e.set("yes"===t?i.yes.label:i.no.label,t),t):(e.clear(),""),M_=e=>{const t=e.value,i=(0,o.useRef)(0),[s,n]=(0,o.useState)("object"!=typeof t&&t||""),[r,a]="object"==typeof t?[0!==i.current?s:v_(t,t.reference,e),s=>{Hm(i.current),n(s),i.current=Rm((()=>{i.current=0,v_(t,s,e),e.autoSubmit&&s&&lx(l)}),50)}]:[s,n],l=(0,o.useRef)({id:0,cb:e.onSubmit}),c=i=>{l.current.id&&(clearTimeout(l.current.id),l.current.id=0),a(i||""),e.onChange&&e.onChange(i||""),"object"!=typeof t&&e.autoSubmit&&i&&lx(l)},u=(t,i)=>{"y"===t.key||"Y"===t.key||t.key===e.yes.label.charAt(0).toLowerCase()||t.key===e.yes.label.charAt(0).toUpperCase()?(t.preventDefault(),c("yes")):"n"===t.key||"N"===t.key||t.key===e.no.label.charAt(0).toLowerCase()||t.key===e.no.label.charAt(0).toUpperCase()?(t.preventDefault(),c("no")):t.shiftKey&&"Enter"===t.key&&e.onSubmit?(t.preventDefault(),e.onSubmit()):"Escape"===t.key?t.currentTarget.blur():"Tab"===t.key&&(t.shiftKey?"yes"===i&&e.onCancel&&(t.preventDefault(),e.onCancel()):"no"===i&&e.onSubmit&&(t.preventDefault(),e.onSubmit()))};return(0,o.useEffect)((()=>()=>{Hm(i.current)}),[]),l.current.cb=e.onSubmit,(0,yy.jsxs)(f_,Object.assign({props:e.styles},{children:[(0,yy.jsx)(Vw,{styles:{baseColor:e.styles.yesColor,mode:"yes"===r?"fill":"outline",hover:"outline",outlineSize:e.styles.outlineSize,roundness:e.styles.roundness,scale:e.styles.scale,group:"vertical"!==e.styles.alignment?"start":void 0},label:e.yes.label,icon:e.yes.icon&&y_(e.yes.icon),iconPosition:"left",tabIndex:e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,disabled:e.disabled||e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||!1,onAutoFocus:(!r||"yes"===r)&&e.onAutoFocus||void 0,onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:e=>u(e,"yes"),onClick:()=>c((e.required||"yes"!==r)&&"yes")},void 0),(0,yy.jsx)(Vw,{styles:{baseColor:e.styles.noColor,mode:"no"===r?"fill":"outline",hover:"outline",outlineSize:e.styles.outlineSize,roundness:e.styles.roundness,scale:e.styles.scale,group:"vertical"!==e.styles.alignment?"end":void 0},label:e.no.label,icon:e.no.icon&&y_(e.no.icon),iconPosition:"right",tabIndex:e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,disabled:e.disabled||e.readOnly||"object"==typeof t&&(t.isFrozen||t.isLocked)||!1,onAutoFocus:"no"===r&&e.onAutoFocus||void 0,onFocus:e.onFocus,onBlur:e.onBlur,onKeyDown:e=>u(e,"no"),onClick:()=>c((e.required||"no"!==r)&&"no")},void 0)]}),void 0)};let w_=class extends m_{constructor(){super(...arguments),this.hideButtons=!0,this.autoSubmit=!0}render(e,t,i){return(0,yy.jsxs)(yy.Fragment,{children:[this.props.imageURL&&this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),e.name,e.description,this.props.imageURL&&!this.props.imageAboveText&&(0,yy.jsx)(_S,{src:e.markdownifyToImage(this.props.imageURL),width:this.props.imageWidth,isPage:e.isPage},void 0),(0,yy.jsx)(M_,{styles:e.styles.yesNo,value:this.answerSlot,yes:{label:e.markdownifyToString(this.props.altYes||"")||e.l10n.pgettext("runner#6| Yes/No","Yes")},no:{label:e.markdownifyToString(this.props.altNo||"")||e.l10n.pgettext("runner#6| Yes/No","No")},required:this.required,tabIndex:e.tabIndex,ariaDescribedBy:e.ariaDescribedBy,autoSubmit:this.autoSubmit,onAutoFocus:e.autoFocus,onFocus:e.focus,onBlur:e.blur,onSubmit:t,onCancel:i},void 0)]},void 0)}};w_=Ey([Uf({namespace:zy,type:"node",identifier:"tripetto-block-yes-no",alias:"yes-no"})],w_);const x_=e=>{const{status:t,frameRef:i,view:s,isPage:n,title:r,height:a,disableScrolling:l,prologue:c,blocks:u,epilogue:h,l10n:d,styles:p,navigation:m,onResize:g,onScroll:b,onKey:f}=(e=>{var t,i;const s=(0,o.useRef)(!1),n=(0,o.useRef)(!1),[r,a]=(0,o.useState)({offset:0,size:0,height:0}),l=(0,o.useRef)({timestamp:0,left:0,top:0,width:0,height:0,scrollLeft:0,scrollTop:0}),c=(0,o.useRef)(null===(i=null===(t=e.snapshot)||void 0===t?void 0:t.b)||void 0===i?void 0:i.a),u=(0,o.useRef)(""),h=(0,o.useRef)(),[d,p,m,g,b,f]=(e=>{const t=function(e,t){const i=t||{},s=(0,o.useRef)(),n=(0,o.useRef)(),r=(0,o.useRef)(),a=(0,o.useRef)([]),l=(0,o.useRef)(),c=(0,o.useRef)("test"===(u=e.view)||"preview"===u?u:"live");var u;const h=(0,o.useRef)(!1),d=(0,o.useRef)(),p=(0,o.useRef)("live"===c.current&&e.snapshot&&i.restore),[m,g]=(0,o.useState)(),[b,f]=(0,o.useState)(),y=(0,o.useRef)(),[v,M]=(0,o.useState)({}),w=(0,o.useRef)(),x=e=>w.current&&w.current(e),S=e=>({runnerRef:s,storylineRef:r,viewRef:c,promiseRef:d,sequence:e,rules:i,reset:()=>x(void 0),restart:E,update:T});let I=!1;const k=(0,o.useRef)(new cg((()=>{s.current&&s.current.instance&&n.current&&n.current.onChange&&n.current.onChange(s.current.instance)}))),N=(0,o.useRef)(new cg((()=>{s.current&&s.current.instance&&n.current&&n.current.onData&&n.current.onData(s.current.instance)}))),_=()=>s.current&&!s.current.isRunning&&!s.current.isFinishing&&!s.current.isPausing||!1,L=()=>"preview"!==c.current&&s.current&&!s.current.isFinishing&&!s.current.isPausing||!1,C=e=>{return!(!("live"===c.current&&s.current&&s.current.isRunning&&r.current)||r.current.isEmpty||r.current.isEvaluating||s.current.isFinishing||s.current.isPausing||!(e||"sequence"!==i.mode||(t=Hy(a.current))&&(i.canInteract?i.canInteract(t):"node"===t.type)&&t));var t},D=()=>s.current&&s.current.isRunning&&!s.current.isFinishing&&!s.current.isPausing&&(!r.current||!r.current.isEmpty)||!1,A=(t,i)=>{e.onAction&&i&&s.current&&s.current.isRunning&&e.onAction(t,{fingerprint:s.current.fingerprint,name:s.current.name},i&&{id:i.key,name:i.props.name||""})},j=e=>{if(I=!0,s.current){const t=s.current.storyline;if(r.current=t,"sequence"===i.mode){const o=a.current;if(!t||t.isFinishing||t.isPausing||!t.isChanged&&!e){if(!t&&"finished"!==s.current.status&&"paused"!==s.current.status){const e=(ym(o,(e=>("test"===c.current||!e.isHistory)&&"prologue"!==e.type))||{index:o.length}).index;o.splice(e,o.length-e)}}else{const e=o.length>0&&"prologue"===o[0].type&&o[0],s=t.prologue;e&&!s||!e&&s?z():e&&s&&$m(e,"prologue",s);const n=t.activeNodes,r=Hy(o);let a=0,u=r&&(r.node&&r.node.key||r.index)||p.current&&p.current.key||-1,h=(ym(o,(e=>"preview"===c.current?"prologue"!==e.type:!e.isHistory&&"node"===e.type))||{index:o.length}).index;for(;h<o.length&&a<n.length;h++,a++){const e=o[h],t=n[a];if(!e.node||e.node.key!==t.key)break;if($m(e,"node",t),(e.isPreActive||e.isBeforeActive||e.isActive||e.isAfterActive||e.isPostActive)&&(u=h),"preview"!==c.current&&t.isFailed){h++,a++;break}}for(h<o.length&&o.splice(h,o.length-h);a<n.length;a++,h++){const e=n[a],t=Uy(S(o),u===e.key||-1===u&&"preview"!==c.current||(Pp(u)||-1===u)&&"preview"!==c.current&&e.isFailed?"active":Pp(u)||-1===u&&"preview"===c.current?"past":"upcoming","node",e,A);"active"===t.state&&(t.activate(e.key!==p.current&&(1===o.length||t.index>0&&t.index<o.length&&o[t.index-1].isHistory)),u=h)}if("preview"!==c.current){if(t.isEmpty&&1===o.length&&"prologue"===o[0].type&&(Uy(S(o),"upcoming","epilogue",t.epilogue),"live"===c.current&&i.banner&&l.current&&Uy(S(o),"upcoming","epilogue",i.banner(l.current))),Pp(u)||-1===u){const e=ym(o,(e=>!e.isHistory&&(!e.node||e.node.isFailed)))||vm(o,(e=>!e.isHistory));e&&e.activate(!0)}}else{const e=o.length>0&&"epilogue"===o[o.length-1].type&&o[o.length-1];if(!e&&o.length>0){const e=Uy(S(o),"upcoming","epilogue",t.epilogue);r&&"epilogue"===r.type&&e.activate(!1)}else e&&$m(e,"epilogue",t.epilogue)}}if(p.current){if(p.current.timeStamp){const e=Hy(o);e&&$m(e,"timeStamp",p.current.timeStamp)}p.current=void 0}}!t&&i.onRestart&&i.onRestart()}I=!1,T()},T=()=>{var e;if(!I){if("sequence"===i.mode&&"preview"!==c.current){const t=Hy(a.current);if(t&&"active"===t.state&&("node"===t.type&&i.canActivate&&i.canActivate(t)||"epilogue"===t.type||"paused"===t.type))t.next();else if(!t&&"blend"===i.prologue){const t=1===a.current.length&&"prologue"===a.current[0].type&&a.current[0];t&&t.isHistory&&t.prologue&&!t.prologue.button&&(null===(e=s.current)||void 0===e||e.start())}}M((e=>({current:e.current}))),k.current.invoke()}},z=()=>{x(void 0),y.current=void 0,"sequence"===i.mode&&(a.current.splice(0,a.current.length),s.current&&s.current.prologue&&Uy(S(a.current),"history","prologue",s.current.prologue))},E=(e=!1)=>{if(L()&&s.current){if(z(),e&&s.current.isRunning||!s.current.prologue)s.current.restart(e);else if(s.current.stop(),"sequence"===i.mode){const t=1===a.current.length&&"prologue"===a.current[0].type&&a.current[0];t&&t.activate(!e)}else T();!e&&i.onRestart&&i.onRestart()}},O=()=>{if(s.current&&_()){if("sequence"===i.mode){const e=Wp(a.current,0);if(e&&"prologue"===e.type)return void e.activate(!0)}s.current.start()}};if(w.current=e=>{v.current!==e&&(M({current:e}),k.current.invoke())},l.current||(l.current=e.l10nNamespace||qb.Namespace.create(i.namespace||"")),m&&"sequence"===i.mode){const e=a.current.length>0&&"prologue"===a.current[0].type&&a.current[0];e&&$m(e,"prologue",m.prologue)}if(b){if("sequence"===i.mode){const e=a.current,t=e.length>0&&"epilogue"===e[e.length-1].type&&e[e.length-1];!t&&b.epilogue&&"preview"===c.current?Uy(S(e),"upcoming","epilogue",b.epilogue):t&&$m(t,"epilogue",b.epilogue)}y.current&&(y.current=Object.assign(Object.assign({},b.epilogue),{context:y.current.context}))}if(!s.current){if(s.current=new Ff({namespace:i.namespace,definition:e.definition,l10n:l.current,mode:"sequence"===i.mode?"progressive":i.mode||"progressive",preview:"preview"===c.current,test:"test"===c.current,snapshot:"live"===c.current&&e.snapshot||void 0,data:e.onImport}),p.current="live"===c.current&&i.restore||void 0,s.current.onChange=()=>j(!1),s.current.onData=()=>{x(void 0),N.current.invoke(),i.onInteraction&&i.onInteraction()},s.current.onFinish=t=>("live"!==c.current||e.onSubmit||e.onComplete)&&new Promise(((o,n)=>{const r=s.current&&s.current.storyline,u="sequence"===i.mode&&a.current,h=u&&Uy(S(u),"upcoming","finishing"),d=s=>{u&&lm(u,(e=>{"node"===e.type&&e.changeState("history")})),o(s),e.onComplete&&e.onComplete(t,s),Tm((()=>{if(y.current=r&&r.epilogue,x("finished"),"live"===c.current&&r&&r.epilogue&&r.epilogue.getRedirect){const e=r.epilogue.getRedirect();if(e)return void window.location.replace(e)}u&&(h&&h.changeToEpilogue((null==r?void 0:r.epilogue)||{}),"live"===c.current&&i.banner&&l.current&&Uy(S(u),"upcoming","epilogue",i.banner(l.current)))}))},p=e=>{h&&h.changeToError("outdated"===e||"rejected"===e?e:"unknown",r&&r.isFinishable&&(()=>{r&&r.isFinishable&&(u&&u.splice(h.index,u.length-h.index),r.finish())})||void 0),x("outdated"===e?"error-outdated":"rejected"===e?"error-rejected":"error"),e&&"outdated"!==e&&"rejected"!==e&&console.log(e),n(e)},m="live"===c.current&&e.onSubmit&&e.onSubmit(t,(e.l10nNamespace||qb.Namespace.global).current,(e.l10nNamespace||qb.Namespace.global).locale.identifier,i.namespace)||void 0;!m||Up(m)?!Up(m)||m?d("live"!==c.current?"TEST123":void 0):p():(x("finishing"),h&&h.activate(!0),m.then(d).catch(p))}))||!1,e.onAction){const t=s.current,i=e.onAction;s.current.hook("OnStart","synchronous",(()=>{i("start",{fingerprint:t.fingerprint,name:t.name})})),s.current.hook("OnFinish","synchronous",(()=>{i("complete",{fingerprint:t.fingerprint,name:t.name})})),s.current.hook("OnPause","synchronous",(()=>{i("pause",{fingerprint:t.fingerprint,name:t.name})}))}z(),("boolean"==typeof i.autoStart||"blend"!==i.prologue&&s.current.prologue)&&!i.autoStart||O()}return n.current=e,(0,o.useEffect)((()=>{var e;return n.current&&n.current.onReady&&n.current.onReady(null===(e=s.current)||void 0===e?void 0:e.instance),()=>{s.current&&("sequence"===i.mode&&a.current.splice(0,a.current.length),s.current.destroy(),i.onDestroy&&i.onDestroy(),n.current&&n.current.onDestroy&&n.current.onDestroy(),s.current=void 0)}}),[e.definition,e.snapshot]),{l10n:l.current,get definition(){return s.current&&s.current.definition||e.definition},set definition(e){if(p.current&&(p.current=void 0),s.current&&!s.current.isFinishing&&!s.current.isPausing){const t=s.current.reload(e,!("preview"===c.current||!e.prologue)),i=t||s.current.instance;I=!!t,"preview"===c.current||m||b||i&&i.isRunning&&!(a.current.length>0&&"epilogue"===a.current[a.current.length-1].type)||(I=!1,E("test"===c.current))}},get instance(){return s.current&&s.current.instance},get fingerprint(){return s.current&&s.current.fingerprint||""},get stencil(){return s.current&&s.current.stencil("exportables")||""},get actionables(){return s.current&&s.current.stencil("actionables")||""},get view(){return c.current},set view(e){if(e!==c.current){"test"===c.current&&(h.current=s.current&&s.current.isRunning||!1);const t="preview"===e,i="test"===e;if(c.current=e,s.current&&(s.current.isTest=i,s.current.isPreview!==t&&(z(),s.current.isPreview=t,"preview"===e||"test"===e&&h.current)))return;E()}},get mode(){var e;return"sequence"!==i.mode&&((null===(e=s.current)||void 0===e?void 0:e.mode)||"progressive")||void 0},set mode(e){"sequence"!==i.mode&&e&&s.current&&(s.current.mode=e)},storyline:"sequence"===i.mode?a.current:r.current,get prologue(){var e,t;return("preview"===c.current||"test"===c.current&&!(null===(e=s.current)||void 0===e?void 0:e.isRunning)&&"finished"!==v.current)&&m?m.prologue:null===(t=s.current)||void 0===t?void 0:t.prologue},get epilogue(){var e;return("preview"===c.current||"test"===c.current&&!(null===(e=s.current)||void 0===e?void 0:e.isRunning)&&"finished"===v.current)&&b?b.epilogue:y.current},get status(){return(r.current&&r.current.isEvaluating?"evaluating":v.current)||s.current&&s.current.status||"empty"},get isRunning(){return s.current&&s.current.isRunning||!1},get isFinishing(){return s.current&&s.current.isFinishing||!1},get isPausing(){return s.current&&s.current.isPausing||!1},get isEvaluating(){return r.current&&r.current.isEvaluating||!1},get allowStart(){return _()},get allowRestart(){return L()},get allowPause(){return C(!1)},get allowStop(){return D()},kickOff:O,start:()=>{if(_()&&s.current)return x(void 0),s.current.start()},restart:E,reload:e=>{p.current&&(p.current=void 0),!s.current||s.current.isFinishing||s.current.isPausing||(I=!!s.current.reload(e,!1),T())},pause:(e,t)=>{if(!s.current||!C(!1))return;const o="sequence"===i.mode&&a.current;if(o){const e=Hy(o);if(e&&"error"===e.type&&"paused"===e.error)o.splice(e.index,o.length-e.index);else{const t=(n=e)&&(i.canInteract?i.canInteract(n):"node"===n.type)&&n||void 0;t&&t.index+1<o.length&&o.splice(t.index+1,o.length-t.index-1)}}var n;return t?s.current.pause(e,((e,i)=>{const s=()=>{i(!1),x(void 0),n&&(n.undo(),j(!0))},n=o&&Uy(S(o),"upcoming","pausing",s);x("pausing"),n&&n.activate(!0),t(e,((e,t)=>{if(i("succeeded"===e),x("succeeded"===e?"paused":"failed"===e?"error-paused":void 0),n&&"canceled"!==e)if("succeeded"===e)n.changeToPaused(),o&&lm(o,(e=>{"node"===e.type&&e.changeState("history")}));else if(n.changeToError("paused",t&&(()=>{n.changeToPausing(s),x("pausing"),t()}),s),t)return;n&&"canceled"===e&&(n.undo(),j(!0))}),n||void 0)})):s.current.pause(e)},snapshot:e=>{if(s.current&&C(!0))return s.current.snapshot(e)},stop:()=>D()&&s.current&&s.current.stop(),update:T,discard:()=>{"error"!==v.current&&"error-outdated"!==v.current&&"error-rejected"!==v.current&&"error-paused"!==v.current||x(void 0)},get preview(){return"preview"===c.current?m?"prologue":b?"epilogue":"blocks":void 0},doAction:A,doPreview:e=>{if("prologue"===e.type){if(g("start"===e.action?{prologue:e.ref}:void 0),"start"===e.action&&e.subscribe){const t=new cg((e=>g({prologue:e})),100);e.subscribe((e=>t.invoke(e)))}}else if("epilogue"===e.type&&(f("start"===e.action?{epilogue:e.ref}:void 0),"start"===e.action&&e.subscribe)){const t=new cg((e=>f({epilogue:e})),100);e.subscribe((e=>t.invoke(e)))}"preview"===c.current&&i.onPreview&&("prologue"===e.type?i.onPreview(e.action,"prologue",void 0):"epilogue"===e.type?i.onPreview(e.action,"epilogue",void 0):"node"===e.type&&i.onPreview(e.action,"block",e.ref.id))},resetPreview:()=>{m&&g({prologue:void 0}),b&&f({epilogue:void 0})}}}(e,{namespace:zy,mode:"progressive",onPreview:(t,i,s)=>{"start"===t&&e.onScrollIntoView&&"block"===i&&s&&!e.onScrollIntoView(s)?h.current=s:"end"===t&&(h.current=void 0)},onRestart:()=>{u.current&&u.current()},onDestroy:()=>{e.controller&&(e.controller[0]=void 0)}}),i=function(){const e=(0,o.useRef)();if(!e.current){const t={};e.current={fetch:(e,i,s,o,n)=>{const r=i.key,a=!i.hasChanged()&&t[r];return a&&a.isActivated===o&&a.status===s&&a.isPassed===i.isPassed&&a.tabIndex===n?a.buffer:(t[r]={buffer:e(),status:s,isActivated:o,isPassed:i.isPassed,tabIndex:n}).buffer},purge:()=>{lm(t,((e,i)=>{delete t[i]}),{keys:!0})}}}return e.current}(),[s,n,r]=((e,t,i)=>{const s=(0,o.useRef)(e||{}),n=(0,o.useRef)();return n.current||(n.current=Kw(s.current,t)),[s.current,n.current,e=>{s.current=e,n.current=Kw(e,t),i()}]})(e.styles,"live"!==t.view||"page"===e.display,(()=>{i.purge(),t.update()})),[a,l,c]=((e,t,i,s)=>{const n=(0,o.useRef)(e||{}),r=(0,o.useRef)(),a=e=>{n.current=e,r.current&&r.current()};return r.current=()=>{s&&s(),i.update()},[n.current,e=>{t?t(e).then((()=>a(e))).catch((()=>a(e))):a(e)},e=>{t&&("auto"!==n.current.language&&n.current.language||e||navigator.language)!==i.l10n.current&&t(n.current).then((()=>{r.current&&r.current()}))}]})(e.l10n,e.onL10n,t,(()=>i.purge())),u=(0,o.useRef)(),h=(0,o.useRef)(),d=(0,o.useRef)(),p=(0,o.useRef)(),m=()=>e.onPause?t.pause(e.onSnapshot("pause"),((i,s)=>{const o=(t,o)=>{var n;p.current&&e.onSnapshotEnd(null===(n=i.b)||void 0===n?void 0:n.a),p.current=void 0,s(t,o)},n=e=>{const t=e();!t||Up(t)?o(Up(t)&&!t?"failed":"succeeded",(()=>n(e))):t.then((()=>{o("succeeded")})).catch((t=>{o("failed",(()=>n(e))),t&&console.log(t)}))};if(zp(e.onPause)){const t=e.onPause;n((()=>t(i,(e.l10nNamespace||qb.Namespace.global).current,(e.l10nNamespace||qb.Namespace.global).locale.identifier,zy)))}else if(e.onPause&&"email"===e.onPause.recipe){const s=e.onPause.onPause;e.onSnapshotStart(),p.current={recipe:"email",isCompleting:!1,complete:o=>{p.current=Object.assign(Object.assign({},p.current),{isCompleting:!0}),i.b?$m(i.b,"d",o):$m(i,"b",{d:o}),d.current=i,t.update(),n((()=>s(o,i,(e.l10nNamespace||qb.Namespace.global).current,(e.l10nNamespace||qb.Namespace.global).locale.identifier,zy)))},cancel:()=>o("canceled"),get emailAddress(){const i=d.current||e.snapshot,s=t.storyline&&vm(t.storyline.activeNodes,(e=>!!(e.isPassed&&e.block instanceof dx)));return i&&i.b&&i.b.d||s&&s.block instanceof dx&&s.block.emailSlot.isSealed&&s.block.emailSlot.value||""}}}else o("succeeded")})):t.pause(e.onSnapshot("pause")),g={title:t.definition.name,view:t.view,preview:t.preview,storyline:t.storyline,update:t.update,start:()=>(e.onStart&&e.onStart(),t.start()),restart:t.restart,reload:t.reload,isFinishable:t.storyline&&(t.storyline.isFinishable||"preview"===t.view)||!1,isPausable:!("live"!==t.view||!e.onPause),pause:t.allowPause&&e.onPause&&m||void 0,pausing:p.current,status:t.status,prologue:("stopped"===t.status||"prologue"===t.preview)&&t.prologue||void 0,epilogue:"finished"===t.status||"epilogue"===t.preview?t.epilogue||{}:void 0,discard:t.discard,resetPreview:t.resetPreview};return u.current=e.onRestart,e.controller&&(e.controller[0]={get definition(){return t.definition},set definition(e){t.definition=e,c(t.definition&&t.definition.language)},get instance(){return t.instance},get fingerprint(){return t.fingerprint},get styles(){return s},set styles(e){r(e)},get l10n(){return a},set l10n(e){l(e)},get view(){return t.view},set view(e){t.view=e},get snapshot(){return t.snapshot(e.onSnapshot("snapshot"))},get isRunning(){return t.isRunning},get isFinishing(){return t.isFinishing},get isPausing(){return t.isPausing},get allowStart(){return t.allowStart},get allowRestart(){return t.allowRestart},get allowPause(){return t.allowPause},get allowStop(){return t.allowStop},start:g.start,restart:g.restart,pause:m,stop:t.stop,doPreview:t.doPreview}),(0,o.useEffect)((()=>{h.current&&"preview"===t.view&&Gm((()=>{!h.current||"preview"===t.view&&e.onScrollIntoView&&!e.onScrollIntoView(h.current)||(h.current=void 0)}))})),[g,i,t.l10n,n,e.attachments,t.doAction]})(Object.assign(Object.assign({},e),{onSnapshot:()=>({a:r.active,b:C,d:e.snapshot&&e.snapshot.b&&e.snapshot.b.d,e:Lp.now}),onSnapshotStart:()=>c.current="pause",onSnapshotEnd:e=>iS(l.current,g,A.current,e||""),onStart:()=>{l.current.scrollTo&&l.current.scrollTo(0,0,!1)},onRestart:()=>{L(),l.current.scrollTo&&l.current.scrollTo(0,0,!1)},onScrollIntoView:e=>{var t;const i=ym(null===(t=d.storyline)||void 0===t?void 0:t.uniqueNodes,(t=>t.node.id===e));return!!i&&iS(l.current,g,A.current,i.key)}})),y=(0,o.useRef)(g.direction),v=d.status,M=d.view,w="live"!==M||"page"===e.display,x=d.storyline&&"preview"!==M&&(d.storyline.isEvaluating||d.pausing&&d.pausing.isCompleting)||!1,[S,I,k,N,_,L,C]=(e=>{const[t,i]=(0,o.useState)(e.initialFocus||{}),s=(0,o.useRef)(),n=(0,o.useRef)(!0),r=(0,o.useRef)(),a=(0,o.useRef)(),l=(0,o.useRef)(),c=(0,o.useRef)({});return(0,o.useEffect)((()=>{const t=Bm((()=>{const i=r.current&&c.current[r.current]||void 0;if(i&&(n.current||r.current!==a.current)&&s.current){if(Lp.elapsed(e.viewportRef.current.timestamp,!0)<100||!px(i,e.viewportRef))return;if(Ym(t),document.hasFocus()){const t=document.activeElement;let o=t&&t.isEqualNode(s.current);e.gainFocus&&n.current&&(o=o||!t||"BODY"===t.tagName),n.current=!1,a.current=r.current,o&&i.focus({preventScroll:!0})}delete c.current[r.current]}else Ym(t)}),100);return()=>{Ym(t)}})),[s,(s,o,c)=>u=>{o&&n.current&&(n.current=!1),i(rm(t,{[s.key]:o})),o&&(l.current=u.target,r.current=a.current=s.key,e.onFocus&&e.onFocus(s.key)),c&&t[s.key]!==o&&c()},(e,t,i)=>s=>{t&&s?(c.current[e.key]=s,r.current=e.key,i&&i(s)):delete c.current[e.key]},e=>!(e.filterInputs&&(!l.current||"INPUT"!==l.current.tagName&&"TEXTAREA"!==l.current.tagName))&&t[e.key],()=>new Promise((e=>{if(a.current){const t=c.current[a.current];if(t)return t.blur(),void Rm((()=>e()),100)}e()})),()=>i({}),t]})({gainFocus:"live"===M&&("page"===e.display||g.autoFocus),initialFocus:e.snapshot&&e.snapshot.b&&e.snapshot.b.b,viewportRef:l,onFocus:e=>{r.active!==e&&iS(l.current,g,A.current,e)}}),D=(0,o.useRef)([]),A=(0,o.useRef)([]),j=e=>t=>{if(t){const i=A.current.length;A.current.push({index:i,key:e,ref:t,width:0,height:0,get left(){if("horizontal"===g.direction){let e=i,t=0;for(;--e>=0;)t+=A.current[e].width;return t}return 0},get top(){if("vertical"===g.direction){let e=i,t=r.offset;for(;--e>=0;)t+=A.current[e].height;return t}return 0},get isFirst(){return 0===i},get isLast(){return i===A.current.length-1}})}};A.current=[],y.current!==g.direction&&(s.current=!1,y.current=g.direction),!n.current&&s.current&&(n.current=!fx()),(0,o.useEffect)((()=>{let e=0;if(lm(A.current,(e=>{const t=e.ref.getBoundingClientRect();e.width=t.width,e.height=t.height})),tS(l.current,g,A.current,r,a,s),c.current){const t=()=>{const i=c.current;if(i){const s=i&&ym(A.current,(e=>e.key===i));s&&s.height>0?(iS(l.current,g,A.current,i),c.current=void 0):e=Tm((()=>t()))}};t()}return()=>{e&&Em(e)}}));let T,z,E=0,O=0,P=0,R=0,H=0,F=0,U="";const B=g.showSeparateSubmit&&d.isFinishable,Y=d.storyline&&d.storyline.uniqueNodes||[],Z="epilogue"!==d.preview&&Y.length>0&&(0,yy.jsxs)(xx,Object.assign({props:{styles:g,view:M,isPage:w,isCalculated:s.current&&n.current},style:{marginTop:"vertical"===g.direction&&r.offset||void 0,minHeight:"vertical"===g.direction&&r.size||void 0},onWheel:e=>{"horizontal"===g.direction&&g.showPreviousButton&&r.active&&(r.offsets&&r.offsets[r.active]||0)>0&&e.deltaY<0&&oS(l.current,g,A.current,r.active)}},{children:[Y.map((t=>{var i,s,o,n,a;const c=d.storyline,y=O++,S=0===y,L=Y.length===O,C=r.active===t.key&&"pausing"!==v,Z="finishing"===v||"pausing"===v,V=!C&&(g.hidePast&&0===E||g.hideUpcoming&&(!r.active&&y>0||0!==E)),W=e.onEdit&&"live"!==M&&t.id&&(()=>e.onEdit("block",t.id))||void 0,G=!S&&(()=>oS(l.current,g,A.current,t.key))||void 0,$=(!L||B)&&(()=>Gm((()=>nS(l.current,g,A.current,t.key))))||void 0,Q=!g.showSeparateSubmit&&L&&d.isFinishable&&(()=>c.finish())||void 0,q=()=>{var e;return t.props.explanation&&(0,yy.jsx)(Cx,Object.assign({id:null===(e=t.block)||void 0===e?void 0:e.key("explanation"),onClick:W},{children:Yy(t.props.explanation,t.context)}),void 0)||void 0},X=y>0&&y-1<D.current.length&&D.current[y-1]||void 0;let J=y<D.current.length&&D.current[y]||void 0;C&&u.current!==t.key?T=t:C||u.current!==t.key||(z=t),(!J||J.node!==t.key||X&&X.last!==J.first)&&(J={node:t.key,first:(null==X?void 0:X.last)||0,last:(null==X?void 0:X.last)||0},D.current.splice(y,D.current.length-y,J));const K=p.fetch((()=>{var e,i;const s=()=>{var e,i;return t.props.name&&sm(t.props.nameVisible,!0)&&(0,yy.jsxs)(Nx,Object.assign({props:{hasDescription:!!t.props.description},onClick:W},{children:[g.showEnumerators&&t.enumerator&&(0,yy.jsxs)(_x,Object.assign({props:{view:M}},{children:[t.enumerator,"."]}),void 0),t.block?(0,yy.jsx)("label",Object.assign({htmlFor:null===(e=t.block)||void 0===e?void 0:e.key()},{children:Yy(t.props.name,t.context)}),void 0):(0,yy.jsx)(yy.Fragment,{children:Yy(t.props.name,t.context)},void 0),!g.hideRequiredIndicator&&(null===(i=t.block)||void 0===i?void 0:i.required)&&!t.block.hideRequiredIndicatorFromName&&(0,yy.jsx)(Bw,{props:{errorColor:g.inputs.errorColor}},void 0)]}),void 0)||void 0},o=()=>t.props.description&&(0,yy.jsx)(Lx,Object.assign({onClick:W},{children:Yy(t.props.description,t.context)}),void 0)||void 0;return J.last=J.first,(null===(e=t.block)||void 0===e?void 0:e.render)&&(null===(i=t.block)||void 0===i?void 0:i.render({l10n:m,styles:g,view:M,attachments:b,index:y,get id(){var e;return(null===(e=t.block)||void 0===e?void 0:e.key())||""},get name(){return s()},get description(){return o()},get explanation(){return t.props.explanation&&Yy(t.props.explanation,t.context)||void 0},get placeholder(){return pf(t.props.placeholder||"",t.context)||""},get label(){return Yy(t.props.placeholder||t.props.name||"...",t.context,!1)},get tabIndex(){return++J.last},isActivated:C,get isFailed(){return"preview"!==M&&t.isFailed&&void 0!==N(t)||!1},get ariaDescribedBy(){var e;return t.props.explanation&&(null===(e=t.block)||void 0===e?void 0:e.key("explanation"))||void 0},get ariaDescription(){return q()},isPage:w,focus:I(t,!0,(()=>f("focus",t))),blur:I(t,!1,(()=>f("blur",t))),autoFocus:k(t,C),markdownifyToJSX:(e,i)=>Yy(e,t.context,i),markdownifyToURL:e=>mf(e,t.context),markdownifyToImage:e=>mf(e,t.context,void 0,["image/jpeg","image/png","image/svg","image/gif"])||`data:image/svg+xml;base64,${Yw(g.color||"#000")}`,markdownifyToString:(e,i)=>pf(e,t.context,void 0,i)},"finishing"!==v&&"pausing"!==v&&"evaluating"!==v&&t.isPassed&&$&&(()=>_().then($))||Q&&(()=>{h.current&&px(h.current,l)&&h.current.focus({preventScroll:!0})}),G))||(0,yy.jsxs)(yy.Fragment,{children:[s(),o()]},void 0)}),t,v,C,J.first);return C&&(E=O),E&&!C||"preview"!==M&&t.collectsData&&(!t.hasDataCollected||t.isFailed)&&(E||(null===(i=t.block)||void 0===i?void 0:i.required))||P++,t.collectsData&&(R++,(!E||C&&t.hasDataCollected)&&!t.isFailed&&H++,!E&&"preview"!==M&&t.isFailed&&(F++,U||(U=t.key))),K&&(0,yy.jsxs)(kx,Object.assign({identifier:null===(s=t.block)||void 0===s?void 0:s.type.identifier,element:j(t.key),l10n:m,styles:g,view:M,isPage:w,isActivated:C,isLocked:Z,isHidden:V,width:"horizontal"===g.direction&&l.current.width||void 0,top:r.offsets&&r.offsets[t.key],showBanner:(S||L&&Q)&&C||!1,onActivate:()=>iS(l.current,g,A.current,t.key),onPrevious:G},{children:[K,!(null===(o=t.block)||void 0===o?void 0:o.hideAriaDescription)&&q(),(!(null===(n=t.block)||void 0===n?void 0:n.hideButtons)||x||Q&&d.isFinishable||!g.navigation&&d.isPausable)&&(0,yy.jsx)(Ax,Object.assign({styles:g,isActivated:C},{children:x?(0,yy.jsx)(Jx,{l10n:m,styles:g},void 0):(0,yy.jsxs)(yy.Fragment,{children:[(!Q&&!(null===(a=t.block)||void 0===a?void 0:a.autoSubmit)||Q&&d.isFinishable)&&(0,yy.jsx)(Vw,{styles:Q||t.isPassed&&L&&!g.showSeparateSubmit?g.finishButton:g.buttons,disabled:"finishing"===v||"pausing"===v||!t.isPassed||Q&&("preview"===M||"live"===M&&!e.onSubmit&&c.hasDataCollected),icon:Q||t.isPassed&&L&&!g.showSeparateSubmit?Ex:"horizontal"===g.direction?Hx:Fx,label:Q||t.isPassed&&L&&!g.showSeparateSubmit?"finishing"===v?m.pgettext("runner#3| Status information","Submitting..."):m.pgettext("runner#1| Buttons","Submit"):m.pgettext("runner#1| Buttons","Next"),onAutoFocus:(!t.block||t.block.autoFocus)&&k(t,C,(e=>{Q&&(h.current=e)}))||(e=>{Q&&e&&(h.current=e)}),onClick:Q||$,onTab:!Q&&$||void 0,onCancel:(!t.block||t.block.autoFocus||Q)&&G||void 0},void 0),!g.navigation&&d.isPausable&&(0,yy.jsx)(Vw,{styles:Object.assign(Object.assign({},g.buttons),{mode:"outline"}),icon:Ux,onClick:d.pause},void 0),(Q||L&&!g.showSeparateSubmit)&&"preview"===M&&(0,yy.jsx)(Px,{l10n:m,styles:g},void 0)]},void 0)}),void 0)]}),t.key)})),d.pausing||"pause"===r.active?(0,yy.jsx)(zx,{controller:d.pausing,view:M,l10n:m,styles:g,isPage:w,onElement:j,onAutoFocus:k},void 0):B&&(0,yy.jsx)(Rx,{view:M,l10n:m,styles:g,isPage:w,status:v,active:r.active,onElement:j,width:"horizontal"===g.direction&&l.current.width||void 0,offset:r.offsets&&r.offsets.submit,onActivate:()=>iS(l.current,g,A.current,"submit"),onSubmit:"live"===M&&!e.onSubmit&&d.storyline&&d.storyline.hasDataCollected?void 0:()=>d.storyline.finish(),onTab:()=>((e,t,i)=>{i.length>0&&iS(e,t,i,i[0].key)})(l.current,g,A.current),onPrevious:()=>oS(l.current,g,A.current,"submit"),onAutoFocus:k},void 0)]}),void 0)||void 0;B&&(O++,"submit"===r.active&&(E=P=O)),E||(F=0,H=0,P=0),z&&(f("unstage",z),u.current=""),T&&(f("stage",T),u.current=T.key);const V="pausing"!==v&&E>1&&(()=>r.active&&oS(l.current,g,A.current,r.active))||void 0,W="pausing"!==v&&E<O&&(()=>r.active&&nS(l.current,g,A.current,r.active))||void 0;return{frameRef:S,status:v,view:M,isPage:w,title:d.title,l10n:m,styles:g,height:w||e.customStyle&&e.customStyle.height&&"auto"!==e.customStyle.height?void 0:"vertical"===g.direction&&Z?r.height+(g.navigation?80:0):"auto",disableScrolling:"horizontal"===g.direction&&!d.prologue&&!d.epilogue&&r.active&&r.offsets&&(r.offsets[r.active]||0)>0||!1,prologue:d.prologue&&Object.assign(Object.assign({},d.prologue),{l10n:m,styles:g,view:M,isPage:w,viewportRef:l,start:"prologue"===d.preview?d.resetPreview:d.start,edit:"live"!==M&&e.onEdit&&(()=>e.onEdit("prologue"))||void 0}),blocks:Z&&(0,yy.jsxs)(yy.Fragment,{children:[(0,yy.jsx)(eS,{l10n:m,styles:g,failed:F,error:"error"===v?(0,yy.jsx)($x,{l10n:m,styles:g,onRetry:()=>d.storyline.finish(),onDiscard:()=>d.discard()},void 0):"error-outdated"===v?(0,yy.jsx)(Zx,{l10n:m,styles:g,onReload:e.onReload&&(()=>Oy(void 0,void 0,void 0,(function*(){d.reload(yield Promise.resolve(e.onReload())),d.discard()}))),onDiscard:()=>d.discard()},void 0):"error-rejected"===v?(0,yy.jsx)(Wx,{l10n:m,styles:g,onDiscard:()=>d.discard()},void 0):"error-paused"===v?(0,yy.jsx)(qx,{l10n:m,styles:g,onDiscard:()=>d.discard()},void 0):void 0,onClick:"error"!==v&&"error-outdated"!==v&&"error-rejected"!==v&&"error-paused"!==v&&(()=>iS(l.current,g,A.current,U))||void 0},void 0),Z]},void 0),epilogue:d.epilogue&&Object.assign(Object.assign({},d.epilogue),{l10n:m,styles:g,view:M,isPage:w,repeat:d.restart,edit:"live"!==M&&e.onEdit&&(()=>{var t;return e.onEdit("epilogue",null===(t=d.epilogue)||void 0===t?void 0:t.branch)})||void 0}),isEvaluating:x,navigation:g.navigation&&Z?{view:M,l10n:m,styles:g,total:O,progress:P,answerable:R,answered:H,isFinishing:"finishing"===v,isPausing:"pausing"===v,isEvaluating:x,previous:V,next:W,pausable:d.isPausable,pause:d.pause}:void 0,onResize:()=>d.update(),onScroll:e=>{(l.current.width===e.width&&l.current.height!==e.height||l.current.width!==e.width&&l.current.height===e.height)&&r.active&&N({key:r.active,filterInputs:!0})&&($m(e,"width",l.current.width),$m(e,"height",l.current.height)),l.current.width===e.width&&l.current.height===e.height||d.update(),l.current.scrollLeft===e.scrollLeft&&l.current.scrollTop===e.scrollTop||tS(e,g,A.current,r,a,s),l.current=e},onKey:e=>{if("finishing"!==v&&"pausing"!==v&&"evaluating"!==v)switch(e){case"previous":V&&V();break;case"next":W&&W()}}}})(e);return(0,yy.jsx)(o.StrictMode,{children:(0,yy.jsx)(wS,Object.assign({frameRef:i,styles:p,view:s,isPage:n,title:r,height:a,disableScrolling:l,navigation:m,onResize:g,onScroll:b,onKey:f,onTouch:e.onTouch,className:e.className,customStyle:e.customStyle,customCSS:e.customCSS},{children:c&&(0,yy.jsx)(DS,Object.assign({},c),void 0)||u||h&&(0,yy.jsx)(zS,Object.assign({},h),void 0)||"live"!==s&&("empty"===t||"preview"===t)&&(0,yy.jsx)(xS,{l10n:d,styles:p,view:s},void 0)||"paused"===t&&(0,yy.jsx)(IS,{l10n:d,styles:p,view:s,isPage:n},void 0)||(0,yy.jsx)(SS,{l10n:d,styles:p,view:s,isPage:n},void 0)}),void 0)},void 0)};let S_=0;function I_(e){return Oy(this,void 0,void 0,(function*(){const t=qb.Namespace.create(`${zy}:${S_++}`),i={locales:{},translations:{},definition:{clusters:[],builder:{name:"",version:""}},controller:[void 0]},[s,o,r,a]=yield Promise.all([Promise.resolve(e.definition),Promise.resolve(e.snapshot),Promise.resolve(e.styles),Promise.resolve(e.l10n)]),l=o=>Oy(this,void 0,void 0,(function*(){const n=i.controller[0]&&i.controller[0].definition||s||i.definition;if(t.reset("auto"!==o.language&&o.language||n&&n.language||e.language||navigator.language),e.translations||e.locale){const s=o.locale||"auto",n=i.locales[s]?i.locales[s].locale:zp(e.locale)?e.locale(s):e.locale,r=i.translations[t.current]?i.translations[t.current].translation:(zp(e.translations)?e.translations(t.current,"tripetto-runner-autoscroll","5.7.1"):e.translations)||void 0,[a,l]=yield Promise.all([Promise.resolve(n),Promise.resolve(r)]);i.locales[s]={locale:a},i.translations[t.current]={translation:l},a&&t.locale.load(a),l&&t.load(l,!1)}o.translations&&t.load(o.translations,!1,"overwrite")}));yield l(a||{});const c={data:void 0,save:()=>{if(i.controller[0]&&localStorage){const e=`tripetto-runner-autoscroll-${i.controller[0].fingerprint}`,t=i.controller[0].snapshot;t?localStorage.setItem(e,JSON.stringify(t)):localStorage.removeItem(e)}}},u="test"!==e.view&&"preview"!==e.view,h=e.element||document.body.appendChild(document.createElement("div"));return e.persistent&&u&&"undefined"!=typeof window&&localStorage&&(c.data=JSON.parse(localStorage.getItem(`tripetto-runner-autoscroll-${Rf(s||i.definition)}`)||"null")||void 0,window.addEventListener("unload",c.save)),n.render((0,yy.jsx)(x_,{definition:s||i.definition,snapshot:o||c.data,styles:r,l10nNamespace:t,l10n:a,view:e.view,display:e.display||document.body.isEqualNode(h)&&"page"||void 0,controller:i.controller,className:e.className,customStyle:e.customStyle,customCSS:e.customCSS,attachments:e.attachments,onL10n:l,onReady:e.onReady,onTouch:e.onTouch,onAction:e.onAction,onImport:e.onImport,onChange:e.onChange,onData:e.onData,onSubmit:e.onSubmit,onComplete:e.onComplete,onReload:e.onReload,onEdit:e.onEdit,onPause:e.onPause,onDestroy:e.onDestroy},void 0),h),{get definition(){return i.controller[0]&&i.controller[0].definition||s||i.definition},set definition(e){i.controller[0]&&(i.controller[0].definition=e)},get instance(){return i.controller[0]&&i.controller[0].instance},get fingerprint(){return i.controller[0]&&i.controller[0].fingerprint||""},get styles(){return i.controller[0]&&i.controller[0].styles||r||{}},set styles(e){i.controller[0]&&(i.controller[0].styles=e)},get l10n(){return i.controller[0]&&i.controller[0].l10n||a||{}},set l10n(e){i.controller[0]&&(i.controller[0].l10n=e)},get view(){return i.controller[0]?i.controller[0].view:e.view||"live"},set view(e){i.controller[0]&&(i.controller[0].view=e)},get snapshot(){return i.controller[0]&&i.controller[0].snapshot||o||c.data},get isRunning(){return i.controller[0]&&i.controller[0].isRunning||!1},get isFinishing(){return i.controller[0]&&i.controller[0].isFinishing||!1},get isPausing(){return i.controller[0]&&i.controller[0].isPausing||!1},get allowStart(){return i.controller[0]&&i.controller[0].allowStart||!1},get allowRestart(){return i.controller[0]&&i.controller[0].allowRestart||!1},get allowPause(){return i.controller[0]&&i.controller[0].allowPause||!1},get allowStop(){return i.controller[0]&&i.controller[0].allowStop||!1},start:()=>i.controller[0]&&i.controller[0].start(),restart:()=>i.controller[0]&&i.controller[0].restart(),pause:()=>i.controller[0]&&i.controller[0].pause(),stop:()=>i.controller[0]&&i.controller[0].stop(),doPreview:e=>i.controller[0]&&i.controller[0].doPreview(e),destroy:()=>{n.unmountComponentAtNode(h),e.persistent&&u&&"undefined"!=typeof window&&localStorage&&window.removeEventListener("unload",c.save)}}}))}zf(),Object.freeze({__proto__:null,styled:tw,AutoscrollRunner:x_,run:I_,namespace:zy,color:Uw,ButtonFabric:Vw,CheckboxFabric:wI,CheckboxesFabric:CI,DateTimeFabric:PI,DropdownFabric:GI,EmailFabric:hx,FileFabric:ck,FileThumbnailFabric:lk,InputFabric:ux,MatrixFabric:Sk,MultipleChoiceFabric:zk,NumberFabric:Hk,PasswordFabric:Wk,PhoneNumberFabric:Jk,PictureChoiceFabric:lN,RadiobuttonsFabric:vk,RatingFabric:LN,RequiredIndicatorFabric:Bw,ScaleFabric:RN,TextFabric:qN,TextareaFabric:i_,URLFabric:l_,YesNoFabric:M_,css:RM,keyframes:ew});var k_=i(379),N_=i.n(k_),__=i(795),L_=i.n(__),C_=i(569),D_=i.n(C_),A_=i(565),j_=i.n(A_),T_=i(216),z_=i.n(T_),E_=i(589),O_=i.n(E_),P_=i(99),R_={};function H_(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}R_.styleTagTransform=O_(),R_.setAttributes=j_(),R_.insert=D_().bind(null,"head"),R_.domAPI=L_(),R_.insertStyleElement=z_(),N_()(P_.Z,R_),P_.Z&&P_.Z.locals&&P_.Z.locals;let F_=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="exact"}get block(){var e;return(null===(e=this.node)||void 0===e?void 0:e.block)instanceof Z_&&this.node.block||void 0}get label(){return""}get name(){var e;if(this.slot instanceof Ki.Text){const t=e=>e&&("contains"===this.mode||"not-contains"===this.mode||"starts"===this.mode||"ends"===this.mode)&&`_${e}_`||e,i=(Fs(this.match)?(null===(e=ms(this,this.match))||void 0===e?void 0:e.label)&&`@${this.match}`:this.match&&t(Bs(this.match)))||"\\_\\_";switch(this.mode){case"exact":case"not-exact":return`@${this.slot.id} ${"not-exact"===this.mode?"":"="} ${i}`;case"contains":case"not-contains":case"starts":case"ends":return`@${this.slot.id} ${"not-contains"===this.mode?ol("block:text","does not contain"):"starts"===this.mode?ol("block:text","starts with"):"ends"===this.mode?ol("block:text","ends with"):ol("block:text","contains")} ${i}`;case"defined":return`@${this.slot.id} ${ol("block:text","not empty")}`;case"undefined":return`@${this.slot.id} ${ol("block:text","empty")}`}}return this.type.label}get title(){var e;return null===(e=this.node)||void 0===e?void 0:e.label}defineEditor(){var e,t;this.editor.form({title:ol("block:text","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:text","Text matches"),value:"exact"},{label:ol("block:text","Text does not match"),value:"not-exact"},{label:ol("block:text","Text contains"),value:"contains"},{label:ol("block:text","Text does not contain"),value:"not-contains"},{label:ol("block:text","Text starts with"),value:"starts"},{label:ol("block:text","Text ends with"),value:"ends"},{label:ol("block:text","Text is not empty"),value:"defined"},{label:ol("block:text","Text is empty"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","exact")).on((e=>{switch(r.visible("defined"!==e.value&&"undefined"!==e.value),e.value){case"exact":r.title=ol("block:text","If text matches");break;case"not-exact":r.title=ol("block:text","If text does not match");break;case"contains":r.title=ol("block:text","If text contains");break;case"not-contains":r.title=ol("block:text","If text does not contain");break;case"starts":r.title=ol("block:text","If text starts with");break;case"ends":r.title=ol("block:text","If text ends with")}o.isInteractable&&o.focus()}))]});const i=this.match&&Fs(this.match)||!1,s=Kh(this,void 0,i?this.match:void 0,!1,null===(e=this.slot)||void 0===e?void 0:e.id),o=new rc.Text("singleline",i?"":this.match).label(ol("block:text","Use fixed text")).action("@",Ic(this,"exclude")).suggestions(null===(t=this.block)||void 0===t?void 0:t.suggestions.all).autoFocus().enter(this.editor.close).escape(this.editor.close).on((e=>{e.isFormVisible&&e.isVisible&&(this.match=e.value)})),n=new rc.Dropdown(s,i?this.match:"").label(ol("block:text","Use value of")).width("full").on((e=>{e.isFormVisible&&e.isObservable&&(this.match=e.value||void 0)})),r=this.editor.form({title:ol("block:text","If text matches"),controls:[new rc.Radiobutton([{label:ol("block:text","Text"),value:"text"},{label:ol("block:text","Value"),value:"variable",disabled:0===s.length}],i?"variable":"text").on((e=>{o.visible("text"===e.value),n.visible("variable"===e.value),o.isInteractable&&o.focus()})),o,n,new rc.Checkbox(ol("block:text","Ignore case"),rc.Checkbox.bind(this,"ignoreCase",void 0,!0))]}).visible("defined"!==this.mode&&"undefined"!==this.mode)}};H_([Mi,od("#name")],F_.prototype,"mode",void 0),H_([Mi,od("#name")],F_.prototype,"match",void 0),H_([Mi],F_.prototype,"ignoreCase",void 0),H_([cd],F_.prototype,"defineEditor",null),F_=H_([Ia({type:"condition",context:"tripetto-block-text",identifier:"tripetto-block-text",version:"5.0.4",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE3LjUgNWgtMTVhLjUuNSAwIDAgMSAwLTFoMTVhLjUuNSAwIDAgMSAwIDF6bS00IDNoLTExYS41LjUgMCAwIDEgMC0xaDExYS41LjUgMCAwIDEgMCAxem00IDNoLTE1YS41LjUgMCAwIDEgMC0xaDE1YS41LjUgMCAwIDEgMCAxem0tNCAzaC0xMWEuNS41IDAgMCAxIDAtMWgxMWEuNS41IDAgMCAxIDAgMXptNCAzaC0xNWEuNS41IDAgMCAxIDAtMWgxNWEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",get label(){return ol("block:text","Text match")}})],F_);class U_ extends Rl.Item{constructor(){super(...arguments),this.name=""}defineEditor(){this.editor.option({name:ol("block:text","Suggestion"),form:{title:ol("block:text","Suggestion"),controls:[new rc.Text("singleline",rc.Text.bind(this,"name","")).autoFocus().autoSelect().enter(this.editor.close).escape(this.editor.close)]},locked:!0});const e=this.ref.slots.select("score","feature");this.editor.group(ol("block:text","Options")),this.editor.option({name:ol("block:text","Score"),form:{title:ol("block:text","Score"),controls:[new rc.Numeric(rc.Numeric.bind(this,"score",void 0)).precision((null==e?void 0:e.precision)||0).digits((null==e?void 0:e.digits)||0).decimalSign((null==e?void 0:e.decimal)||"").thousands(!!(null==e?void 0:e.separator),(null==e?void 0:e.separator)||"").prefix((null==e?void 0:e.prefix)||"").prefixPlural((null==e?void 0:e.prefixPlural)||void 0).suffix((null==e?void 0:e.suffix)||"").suffixPlural((null==e?void 0:e.suffixPlural)||void 0)]},activated:!0,locked:!!e,disabled:!e})}}H_([Mi("string"),ud],U_.prototype,"name",void 0),H_([Mi("number","optional"),pd],U_.prototype,"score",void 0),H_([cd],U_.prototype,"defineEditor",null);var B_="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgOEgxM1YzLjVhLjUuNSAwIDAgMC0uNS0uNWgtNmEuNS41IDAgMCAwLS41LjVWNkguNWEuNS41IDAgMCAwLS41LjV2MTBhLjUuNSAwIDAgMCAuNS41aDE4YS41LjUgMCAwIDAgLjUtLjV2LThhLjUuNSAwIDAgMC0uNS0uNXpNNyA0aDV2MTJIN1Y0ek0xIDdoNXY5SDFWN3ptMTcgOWgtNVY5aDV2N3oiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTkuNSAxMGEuNS41IDAgMCAxLS41LS41di00YS41LjUgMCAwIDEgMSAwdjRhLjUuNSAwIDAgMS0uNS41em0tNSAzaC0yYS41LjUgMCAwIDEtLjUtLjV2LTJhLjUuNSAwIDAgMSAuNS0uNUg0VjlIMi41YS41LjUgMCAwIDEgMC0xaDJhLjUuNSAwIDAgMSAuNS41djJhLjUuNSAwIDAgMS0uNS41SDN2MWgxLjVhLjUuNSAwIDAgMSAwIDF6bTEyLTNoLTJhLjUuNSAwIDAgMCAwIDFIMTZ2MWgtMS41YS41LjUgMCAwIDAgMCAxSDE2djFoLTEuNWEuNS41IDAgMCAwIDAgMWgyYS41LjUgMCAwIDAgLjUtLjV2LTRhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";let Y_=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Numeric){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:text","or")} @${e.id} > ${this.parse(e,this.to)}`;case"defined":return`@${e.id} ${ol("block:text","calculated")}`;case"undefined":return`@${e.id} ${ol("block:text","not calculated")}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,((e,t)=>il.locale.number(e,t,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:text","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:text","Score is equal to"),value:"equal"},{label:ol("block:text","Score is not equal to"),value:"not-equal"},{label:ol("block:text","Score is lower than"),value:"below"},{label:ol("block:text","Score is higher than"),value:"above"},{label:ol("block:text","Score is between"),value:"between"},{label:ol("block:text","Score is not between"),value:"not-between"},{label:ol("block:text","Score is calculated"),value:"defined"},{label:ol("block:text","Score is not calculated"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(t.visible("defined"!==e.value&&"undefined"!==e.value),i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:text","If score equals");break;case"not-equal":t.title=ol("block:text","If score not equals");break;case"below":t.title=ol("block:text","If score is lower than");break;case"above":t.title=ol("block:text","If score is higher than");break;case"between":t.title=ol("block:text","If score is between");break;case"not-between":t.title=ol("block:text","If score is not between")}}))]});const e=(e,t,i)=>{var s;const o=this[e],n=this.slot,r=new rc.Numeric(A(o)?o:0).label(ol("block:text","Use fixed number")).precision((null==n?void 0:n.precision)||0).digits((null==n?void 0:n.digits)||0).decimalSign((null==n?void 0:n.decimal)||"").thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||"").prefix((null==n?void 0:n.prefix)||"").prefixPlural((null==n?void 0:n.prefixPlural)||void 0).suffix((null==n?void 0:n.suffix)||"").suffixPlural((null==n?void 0:n.suffixPlural)||void 0).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),a=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(o)?o:void 0,!0,null===(s=this.slot)||void 0===s?void 0:s.id),l=new rc.Dropdown(a,_(o)?o:"").label(ol("block:text","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:text","Number"),value:"number"},{label:ol("block:text","Value"),value:"variable",disabled:0===a.length}],_(o)?"variable":"number").on((e=>{r.visible("number"===e.value),l.visible("variable"===e.value),r.isObservable&&r.focus()})),r,l]}).visible(i)},t=e("value",ol("block:text","If score equals"),"defined"!==this.mode&&"undefined"!==this.mode),i=e("to",ol("block:text","And"),"between"===this.mode||"not-between"===this.mode)}};H_([Mi,od("#name")],Y_.prototype,"mode",void 0),H_([Mi,od("#name")],Y_.prototype,"value",void 0),H_([Mi,od("#name")],Y_.prototype,"to",void 0),H_([cd],Y_.prototype,"defineEditor",null),Y_=H_([Ia({type:"condition",context:"tripetto-block-text",identifier:"tripetto-block-text:score",version:"5.0.4",icon:B_,get label(){return ol("block:text","Verify score")}})],Y_);let Z_=class extends Sa{constructor(){super(...arguments),this.suggestions=Rl.of(U_,this)}get label(){return this.useSuggestions?sl("block:text","Text (%1 suggestion)","Text (%1 suggestions)",this.suggestions.count):this.type.label}defineSlot(){this.textSlot=this.slots.static({type:Ki.Text,reference:"value",label:ol("block:text","Text"),exchange:["required","alias","exportable","maxLength","transformation"]})}defineEditor(){this.editor.name(),this.editor.description(),this.editor.placeholder(),this.editor.explanation(),this.editor.groups.settings();const e=new rc.Numeric(rc.Numeric.bind(this,"minLength",void 0)).min(1).max(this.textSlot.maxLength).visible(D(this.minLength)).indent(32).width(75).on((()=>{t.min(this.minLength||1)})),t=new rc.Numeric(rc.Numeric.bind(this.textSlot,"maxLength",void 0)).min(this.minLength||1).visible(D(this.textSlot.maxLength)).indent(32).width(75).on((()=>{e.max(this.textSlot.maxLength)}));this.editor.option({name:ol("block:text","Limits"),form:{title:ol("block:text","Limits"),controls:[new rc.Checkbox(ol("block:text","Minimum"),D(this.minLength)).on((t=>{e.visible(t.isChecked)})),e,new rc.Checkbox(ol("block:text","Maximum"),D(this.textSlot.maxLength)).on((e=>{t.visible(e.isChecked)})),t]},activated:D(this.textSlot.maxLength)||D(this.minLength)}),this.editor.option({name:ol("block:text","Autocomplete"),form:{title:ol("block:text","Autocomplete"),controls:[new rc.Radiobutton([{label:ol("block:text","Name"),value:"name",description:ol("block:text","Person's full name.")},{label:ol("block:text","Organization"),value:"organization",description:ol("block:text","Company or organization name.")},{label:ol("block:text","Job/organization title"),value:"organization-title",description:ol("block:text","Job title, or the title a person has within an organization.")},{label:ol("block:text","Street address"),value:"street-address",description:ol("block:text","Location of the address within a city or town.")},{label:ol("block:text","Postal code"),value:"postal-code",description:ol("block:text","Postal code (in the United States, this is the ZIP code).")},{label:ol("block:text","City (address level 2)"),value:"address-level2",description:ol("block:text","City, town, village, or other locality in which the address is located.")},{label:ol("block:text","Province or state (address level 1)"),value:"address-level1",description:ol("block:text","Typically the province in which the address is located. In the United States, this would be the state. In Switzerland, the canton. In the United Kingdom, the post town.")},{label:ol("block:text","Country"),value:"country-name",description:ol("block:text","Name of the country.")},{label:ol("block:text","Telephone number"),value:"tel",description:ol("block:text","Full telephone number, including the country code.")},{label:ol("block:text","Gender identity"),value:"sex",description:ol("block:text","Gender identity as freeform text.")},{label:ol("block:text","Username"),value:"username",description:ol("block:text","Username or account name for the active domain.")}],rc.Radiobutton.bind(this,"autoComplete",void 0)).label(ol("block:text","Use the following autocomplete attribute for autocompletion:"))]},activated:_(this.autoComplete)});const i=this.editor.option({name:ol("block:text","Suggestions"),collection:{collection:this.suggestions,title:ol("block:text","Suggestions"),placeholder:ol("block:text","Unnamed suggestion"),autoOpen:!0,editable:!0,allowImport:!0,allowExport:!0,allowDedupe:!0,showScores:!0,sorting:"manual",emptyMessage:ol("block:text","Click the + button to add an suggestion...")},activated:!0===this.useSuggestions}).onToggle((()=>{this.useSuggestions=!!i.isActivated||void 0}));this.editor.transformations(this.textSlot),this.editor.groups.options(),this.editor.option({name:ol("block:text","Prefill"),form:{title:ol("block:text","Prefill"),controls:[new rc.Text("singleline",rc.Text.bind(this,"prefill",void 0)).label(ol("block:text","Prefill with the following text:"))]},activated:_(this.prefill)}),this.editor.required(this.textSlot),this.editor.visibility(),this.editor.scores({target:this,collection:i,description:ol("block:text","Generates a score based on the selected suggestion. Open the settings panel for each suggestion to set the score.")}),this.editor.alias(this.textSlot),this.editor.exportable(this.textSlot)}defineCondition(){ee([{mode:"exact",label:ol("block:text","Text matches")},{mode:"not-exact",label:ol("block:text","Text does not match")},{mode:"contains",label:ol("block:text","Text contains")},{mode:"not-contains",label:ol("block:text","Text does not contain")},{mode:"starts",label:ol("block:text","Text starts with")},{mode:"ends",label:ol("block:text","Text ends with")},{mode:"defined",label:ol("block:text","Text is not empty")},{mode:"undefined",label:ol("block:text","Text is empty")}],(e=>{this.conditions.template({condition:F_,label:e.label,autoOpen:"defined"!==e.mode&&"undefined"!==e.mode,props:{slot:this.textSlot,mode:e.mode}})}));const e=this.slots.select("score","feature");if(e&&e.label){const t=this.conditions.group(e.label,B_,!1,!0);ee([{mode:"equal",label:ol("block:text","Score is equal to")},{mode:"not-equal",label:ol("block:text","Score is not equal to")},{mode:"below",label:ol("block:text","Score is lower than")},{mode:"above",label:ol("block:text","Score is higher than")},{mode:"between",label:ol("block:text","Score is between")},{mode:"not-between",label:ol("block:text","Score is not between")},{mode:"defined",label:ol("block:text","Score is calculated")},{mode:"undefined",label:ol("block:text","Score is not calculated")}],(i=>{t.template({condition:Y_,label:i.label,autoOpen:"defined"!==i.mode&&"undefined"!==i.mode,props:{slot:e,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}))}}};function V_(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}H_([Mi],Z_.prototype,"autoComplete",void 0),H_([Mi,od("#label")],Z_.prototype,"useSuggestions",void 0),H_([Mi("items"),od("#label"),Na("#slot","value",!1,"useSuggestions")],Z_.prototype,"suggestions",void 0),H_([Mi("string","optional")],Z_.prototype,"prefill",void 0),H_([Mi("number","optional")],Z_.prototype,"minLength",void 0),H_([Ps],Z_.prototype,"defineSlot",null),H_([cd],Z_.prototype,"defineEditor",null),H_([nd],Z_.prototype,"defineCondition",null),Z_=H_([Ia({type:"node",identifier:"tripetto-block-text",version:"5.0.4",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1ODAiIGhlaWdodD0iNTgwIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIHZpZXdCb3g9IjAgMCA1ODAwIDU4MDAiPjxwYXRoIGNsYXNzPSJ0cmlwZXR0by1maWxsIiBkPSJNNTAwIDMzMDBoMjAwVjIzMDBINTAwdi0yMDBoNjAwdjIwMEg5MDB2MTAwMGgyMDB2MjAwSDUwMHYtMjAwem01MjAwLTE2MDB2MjIwMEgxMDBWMTcwMGg1NjAwem0tMjAwIDIwMEgzMDB2MTgwMGg1MjAwVjE5MDB6Ii8+PC9zdmc+",get label(){return ol("block:text","Text (single line)")}})],Z_);const W_=["","e","","c","random","timestamp","year","month","day","day-of-week","hour","minute","second","millisecond","timezone","branch"];function G_(e){if("string"==typeof e){const t=W_.length;for(let i=0;i<t;i++)if(W_[i]===e)return!0}return!1}function $_(e){switch(e){case"":return`  ${il.locale.number(3.14159,"auto")}`;case"e":return`e  ${il.locale.number(2.71828,"auto")}`;case"":return`  ${il.locale.number(.57722,"auto")}`;case"c":return`c = ${il.locale.number(299792458)} m/s`;case"random":return ol("block:calculator","Random value (0 to less than 1)");case"timestamp":return ol("block:calculator","UNIX time (seconds since Unix Epoch)");case"year":return ol("block:calculator","Year");case"month":return ol("block:calculator","Month (January = 1)");case"day":return ol("block:calculator","Day of month (1-31)");case"day-of-week":return ol("block:calculator","Day of week (Sunday = 0)");case"hour":return ol("block:calculator","Hour (0-23)");case"minute":return ol("block:calculator","Minute (0-59)");case"second":return ol("block:calculator","Second (0-59)");case"millisecond":return ol("block:calculator","Millisecond (0-999)");case"timezone":return ol("block:calculator","Timezone (in milliseconds)");case"branch":return ol("block:calculator","Branch number")}}var Q_="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIgLjVDMS4xNzMuNS41IDEuMTczLjUgMnYxNmMwIC44MjcuNjczIDEuNSAxLjUgMS41aDE2Yy44MjcgMCAxLjUtLjY3MyAxLjUtMS41VjJjMC0uODI3LS42NzMtMS41LTEuNS0xLjVIMnpNNSA4aDEwYS41LjUgMCAwIDEgMCAxSDVhLjUuNSAwIDAgMSAwLTF6bTAgM2gxMGEuNS41IDAgMCAxIDAgMUg1YS41LjUgMCAwIDEgMC0xeiIgZmlsbD0iI0E4QzZERiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48L3N2Zz4=",q_="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0E4QzZERiI+PHBhdGggZD0iTTE4IDE5LjVIMmMtLjgyNyAwLTEuNS0uNjczLTEuNS0xLjVWMkMuNSAxLjE3MyAxLjE3My41IDIgLjVoMTZjLjgyNyAwIDEuNS42NzMgMS41IDEuNXYxNmMwIC44MjctLjY3MyAxLjUtMS41IDEuNXpNMiAxLjVhLjUuNSAwIDAgMC0uNS41djE2YS41LjUgMCAwIDAgLjUuNWgxNmEuNS41IDAgMCAwIC41LS41VjJhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE1IDkuNWgtNC41VjVhLjUuNSAwIDAgMC0xIDB2NC41SDVhLjUuNSAwIDAgMCAwIDFoNC41VjE1YS41LjUgMCAwIDAgMSAwdi00LjVIMTVhLjUuNSAwIDAgMCAwLTF6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvZz48L3N2Zz4=",X_="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0E4QzZERiI+PHBhdGggZD0iTTE4IDE5LjVIMmMtLjgyNyAwLTEuNS0uNjczLTEuNS0xLjVWMkMuNSAxLjE3MyAxLjE3My41IDIgLjVoMTZjLjgyNyAwIDEuNS42NzMgMS41IDEuNXYxNmMwIC44MjctLjY3MyAxLjUtMS41IDEuNXpNMiAxLjVhLjUuNSAwIDAgMC0uNS41djE2YS41LjUgMCAwIDAgLjUuNWgxNmEuNS41IDAgMCAwIC41LS41VjJhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE1IDEwLjVINWEuNS41IDAgMCAxIDAtMWgxMGEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9nPjwvc3ZnPg==",J_="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0E4QzZERiI+PHBhdGggZD0iTTE4IDE5LjVIMmMtLjgyNyAwLTEuNS0uNjczLTEuNS0xLjVWMkMuNSAxLjE3MyAxLjE3My41IDIgLjVoMTZjLjgyNyAwIDEuNS42NzMgMS41IDEuNXYxNmMwIC44MjctLjY3MyAxLjUtMS41IDEuNXpNMiAxLjVhLjUuNSAwIDAgMC0uNS41djE2YS41LjUgMCAwIDAgLjUuNWgxNmEuNS41IDAgMCAwIC41LS41VjJhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE0LjgzMiAxMy42MjYgMTAuNzUyIDEwbDQuMDgtMy42MjZhLjUuNSAwIDAgMC0uNjY0LS43NDhMMTAgOS4zMzEgNS44MzIgNS42MjZhLjUuNSAwIDEgMC0uNjY0Ljc0OEw5LjI0OCAxMGwtNC4wOCAzLjYyNmEuNS41IDAgMCAwIC42NjQuNzQ4TDEwIDEwLjY2OWw0LjE2OCAzLjcwNWEuNS41IDAgMSAwIC42NjQtLjc0OHoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9nPjwvc3ZnPg==",K_="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0E4QzZERiI+PHBhdGggZD0iTTE4IDE5LjVIMmMtLjgyNyAwLTEuNS0uNjczLTEuNS0xLjVWMkMuNSAxLjE3MyAxLjE3My41IDIgLjVoMTZjLjgyNyAwIDEuNS42NzMgMS41IDEuNXYxNmMwIC44MjctLjY3MyAxLjUtMS41IDEuNXpNMiAxLjVhLjUuNSAwIDAgMC0uNS41djE2YS41LjUgMCAwIDAgLjUuNWgxNmEuNS41IDAgMCAwIC41LS41VjJhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE1IDEwLjVINWEuNS41IDAgMCAxIDAtMWgxMGEuNS41IDAgMCAxIDAgMXpNMTAgOGMtLjU1MSAwLTEtLjQ0OS0xLTFzLjQ0OS0xIDEtMWMuNTUxIDAgMSAuNDQ5IDEgMXMtLjQ0OSAxLTEgMXptMCA2Yy0uNTUxIDAtMS0uNDQ5LTEtMXMuNDQ5LTEgMS0xYy41NTEgMCAxIC40NDkgMSAxcy0uNDQ5IDEtMSAxeiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48L2c+PC9zdmc+";const eL=(e,t)=>i=>{const s=t||e.startBlank&&0===e.operations.count||"="!==i,o=[];o.push(new ec.MenuItemWithIcon(59254,ol("block:calculator","Number"),(()=>e.operations.append().set({operator:i,opcode:"number",value:"/"===i?1:0,open:!0}))));const n=oL(e,i);return o.push(new ec.MenuSubmenuWithIcon(59105,ol("block:calculator","Score"),tL(e,i),!1,!1),new ec.MenuSubmenuWithIcon(59449,ol("block:calculator","Comparison"),(()=>{const t=iL(e,i);return[new ec.MenuItemWithIcon(e.startBlank||e.operations.count>0?59239:59644,e.startBlank||e.operations.count>0?ol("block:calculator","Last outcome (%1)","ANS"):ol("block:calculator","Initial value"),(()=>e.operations.append().set({operator:i,opcode:"equation",value:void 0,cona:0,conb:0,outa:1,outb:0,open:!0})),0===e.operations.count&&e.startBlank),new ec.MenuSubmenuWithIcon(59273,ol("block:calculator","Date/time"),[new ec.MenuItem(ol("block:calculator","Current date"),(()=>e.operations.append().set({operator:i,opcode:"date",value:void 0,cona:M.UTCToday,conb:void 0,outa:1,outb:0,open:!0}))),new ec.MenuItem(ol("block:calculator","Current date + time"),(()=>e.operations.append().set({operator:i,opcode:"datetime",value:void 0,cona:M.UTC,conb:void 0,outa:1,outb:0,open:!0})))]),...t]})),new ec.MenuSubmenuWithIcon(58927,ol("block:calculator","Function"),(()=>sL(i,e.operations,s))),new ec.MenuItemWithIcon(59238,ol("block:calculator","Subcalculation"),(()=>e.operations.append().set({operator:i,opcode:"calc",open:!0})))),n.length>0&&(n[0]instanceof ec.MenuSeparator||o.push(new ec.MenuSeparator,new ec.MenuLabel(ol("block:calculator","Blocks"))),o.push(...n)),o},tL=(e,t)=>{const i=[];let s;const o=e=>{if((null==e?void 0:e.id)!==s){const t=null==e?void 0:e.name;i.length>0&&i.push(new ec.MenuSeparator),t&&i.push(new ec.MenuLabel(t)),s=null==e?void 0:e.id}},n=(s,n)=>{var r,a,l,c;const u=Rl.find(n),h=td(n.block,"calculator");if(u||h&&(null===(a=h[(null===(r=n.slot)||void 0===r?void 0:r.reference)||"*"]||h["*"])||void 0===a?void 0:a.scores)){o(s.block.node.cluster);const r=null===(c=null===(l=n.slot)||void 0===l?void 0:l.slots)||void 0===c?void 0:c.select("score","feature");if(r){const o=[];nL(o,t,e.operations,{type:"slot",block:s.block,label:r.alias||ol("block:calculator","Existing score"),icon:s.icon||s.block.type.icon,id:r.id,reference:r.reference,slot:r},!1,!0),o.push(new ec.MenuItemWithIcon(59147,ol("block:calculator","New score"),(()=>e.operations.append().set({operator:t,opcode:"score",value:n.id,open:!0})))),i.push(new ec.MenuSubmenuWithImage(s.icon||s.block.type.icon,s.label,o))}else i.push(new ec.MenuItemWithImage(s.icon||s.block.type.icon,s.label,(()=>e.operations.append().set({operator:t,opcode:"score",value:n.id,open:!0}))))}};return ee(xc(e.block,{mode:"validated",pipes:"include-consumed-slots"}),(s=>{s.slots?ue(s.slots,(r=>{var a,l;if("pipe"===r.type){if(Rl.find(r)){const n=null===(l=null===(a=r.slot)||void 0===a?void 0:a.slots)||void 0===l?void 0:l.select("score","feature");if(o(s.block.node.cluster),n){const o=[];nL(o,t,e.operations,{type:"slot",block:s.block,label:n.alias||ol("block:calculator","Existing score"),icon:s.icon||s.block.type.icon,id:n.id,reference:n.reference,slot:n},!1,!0),o.push(new ec.MenuItemWithIcon(59147,ol("block:calculator","New score"),(()=>e.operations.append().set({operator:t,opcode:"score",value:r.id,open:!0})))),i.push(new ec.MenuSubmenuWithImage(s.icon||s.block.type.icon,s.label,o))}else i.push(new ec.MenuItemWithImage(s.icon||s.block.type.icon,s.label,(()=>e.operations.append().set({operator:t,opcode:"score",value:r.id,open:!0}))));return!0}}else if(r.id&&(r.slot instanceof Ki.String||r.slot instanceof Ki.Text))return n(s,r),!0;return!1})):s.id&&(s.slot instanceof Ki.String||s.slot instanceof Ki.Text)&&n(s,s)})),i},iL=(e,t)=>{const i=[];let s;const o=e=>{if((null==e?void 0:e.id)!==s){const t=null==e?void 0:e.name;i.push(new ec.MenuSeparator),(t||1===i.length)&&i.push(new ec.MenuLabel(t||ol("block:calculator","Blocks"))),s=null==e?void 0:e.id}};return ee(xc(e.block,{mode:"validated",pipes:"exclude"}),(s=>{if(s.slots){const n=[];let r;ee(s.slots,(i=>{if(i.id&&(i.slot instanceof Ki.String||i.slot instanceof Ki.Text||i.slot instanceof Ki.Boolean||i.slot instanceof Ki.Number||i.slot instanceof Ki.Numeric||i.slot instanceof Ki.Date)){const s=(i.slot instanceof Ki.String||i.slot instanceof Ki.Text)&&Rl.find(i);s&&s.sole||n.push(new ec.MenuItemWithIcon(Sc(i.slot),i.label,r=()=>e.operations.append().set(i.slot instanceof Ki.String||i.slot instanceof Ki.Text?{operator:t,opcode:"evaluate",value:i.id,cona:0,conb:0,outa:1,outb:0,open:!0}:i.slot instanceof Ki.Boolean?{operator:t,opcode:"boolean",value:i.id,outa:1,outb:0,open:!0}:i.slot instanceof Ki.Date?{operator:t,opcode:"date",value:i.id,cona:void 0,conb:void 0,outa:1,outb:0,open:!0}:{operator:t,opcode:"equation",value:i.id,cona:0,conb:0,outa:1,outb:0,open:!0})))}})),n.length>0&&(o(s.block.node.cluster),i.push(1===n.length&&r?new ec.MenuItemWithImage(s.icon||s.block.type.icon,s.label,r):new ec.MenuSubmenuWithImage(s.icon||s.block.type.icon,s.label,n)))}else if(s.id&&(s.slot instanceof Ki.String||s.slot instanceof Ki.Text||s.slot instanceof Ki.Boolean||s.slot instanceof Ki.Number||s.slot instanceof Ki.Numeric||s.slot instanceof Ki.Date)){const n=(s.slot instanceof Ki.String||s.slot instanceof Ki.Text)&&Rl.find(s);n&&n.sole||(o(s.block.node.cluster),i.push(new ec.MenuItemWithImage(s.icon||s.block.type.icon,s.label,(()=>e.operations.append().set(s.slot instanceof Ki.String||s.slot instanceof Ki.Text?{operator:t,opcode:"evaluate",value:s.id,cona:0,conb:0,outa:1,outb:0,open:!0}:s.slot instanceof Ki.Boolean?{operator:t,opcode:"boolean",value:s.id,outa:1,outb:0,open:!0}:s.slot instanceof Ki.Date?{operator:t,opcode:"date",value:s.id,cona:void 0,conb:void 0,outa:1,outb:0,open:!0}:{operator:t,opcode:"equation",value:s.id,cona:0,conb:0,outa:1,outb:0,open:!0})))))}})),i},sL=(e,t,i,s,o=!0)=>[new ec.MenuSubmenuWithIcon(59122,ol("block:calculator","Limiting"),[new ec.MenuItem("min",(()=>t.append().set({operator:e,opcode:"min",value:i?0:s,min:0,open:!0}))),new ec.MenuItem("max",(()=>t.append().set({operator:e,opcode:"max",value:i?0:s,max:0,open:!0}))),new ec.MenuItem("clamp",(()=>t.append().set({operator:e,opcode:"clamp",value:i?0:s,min:0,max:0,open:!0})))]),new ec.MenuSubmenuWithImage("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1ODAiIGhlaWdodD0iNTgwIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIHZpZXdCb3g9IjAgMCA1ODAwIDU4MDAiPjxwYXRoIGNsYXNzPSJ0cmlwZXR0by1maWxsIiBkPSJNNzAwIDE1MDBoNDQwMGMyMjAgMCA0MDAgMTgwIDQwMCA0MDB2MjAwMGMwIDIyMC0xODAgNDAwLTQwMCA0MDBINzAwYy0yMjAgMC00MDAtMTgwLTQwMC00MDBWMTkwMGMwLTIyMCAxODAtNDAwIDQwMC00MDB6bTMxMDAgMjAwdjI0MDBoMTMwMGMxMTAgMCAyMDAtOTAgMjAwLTIwMFYxOTAwYzAtMTEwLTkwLTIwMC0yMDAtMjAwSDM4MDB6bS0yMDAgMjQwMFYxNzAwSDcwMGMtMTEwIDAtMjAwIDkwLTIwMCAyMDB2MjAwMGMwIDExMCA5MCAyMDAgMjAwIDIwMGgyOTAwem0xMzAwLTE0MDBjMC0xMjEtNzktMjAwLTIwMC0yMDBoLTIwMGMtMTIxIDAtMjAwIDc5LTIwMCAyMDB2NDAwYzAgMTIxIDc5IDIwMCAyMDAgMjAwaDIwMGMxMjEgMCAyMDAtNzkgMjAwLTIwMHYtNDAwem0yMDAgMHY0MDBjMCAyMzEtMTY5IDQwMC00MDAgNDAwaC0yMDBjLTIzMSAwLTQwMC0xNjktNDAwLTQwMHYtNDAwYzAtMjMxIDE2OS00MDAgNDAwLTQwMGgyMDBjMjMxIDAgNDAwIDE2OSA0MDAgNDAwem0tMjAwMCAwYzAtMTIxLTc5LTIwMC0yMDAtMjAwaC0yMDBjLTEyMSAwLTIwMCA3OS0yMDAgMjAwdjQwMGMwIDEyMSA3OSAyMDAgMjAwIDIwMGgyMDBjMTIxIDAgMjAwLTc5IDIwMC0yMDB2LTQwMHptMjAwIDB2NDAwYzAgMjMxLTE2OSA0MDAtNDAwIDQwMGgtMjAwYy0yMzEgMC00MDAtMTY5LTQwMC00MDB2LTQwMGMwLTIzMSAxNjktNDAwIDQwMC00MDBoMjAwYzIzMSAwIDQwMCAxNjkgNDAwIDQwMHptLTE2MDAgMGMwLTEyMS03OS0yMDAtMjAwLTIwMGgtMjAwYy0xMjEgMC0yMDAgNzktMjAwIDIwMHY0MDBjMCAxMjEgNzkgMjAwIDIwMCAyMDBoMjAwYzEyMSAwIDIwMC03OSAyMDAtMjAwdi00MDB6bTIwMCAwdjQwMGMwIDIzMS0xNjkgNDAwLTQwMCA0MDBoLTIwMGMtMjMxIDAtNDAwLTE2OS00MDAtNDAwdi00MDBjMC0yMzEgMTY5LTQwMCA0MDAtNDAwaDIwMGMyMzEgMCA0MDAgMTY5IDQwMCA0MDB6Ii8+PC9zdmc+",ol("block:calculator","Floating point"),[new ec.MenuItem("round",(()=>t.append().set({operator:e,opcode:"round",value:i?0:s,open:i}))),new ec.MenuItem("floor",(()=>t.append().set({operator:e,opcode:"floor",value:i?0:s,open:i}))),new ec.MenuItem("ceil",(()=>t.append().set({operator:e,opcode:"ceil",value:i?0:s,open:i}))),new ec.MenuItem("trunc",(()=>t.append().set({operator:e,opcode:"trunc",value:i?0:s,open:i})))]),new ec.MenuSubmenuWithImage("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1ODAiIGhlaWdodD0iNTgwIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIHZpZXdCb3g9IjAgMCA1ODAwIDU4MDAiPjxwYXRoIGNsYXNzPSJ0cmlwZXR0by1maWxsIiBkPSJNNTEwMCAyMzAwaC0zNTZsLTgyNCA5MTYgNDQxIDg4NGgzMzl2MjAwaC00MDBjLTM2IDAtNzItMjEtODktNTVsLTQzNS04NzAtODAyIDg5MmMtNSA1LTc0IDMzLTc0IDMzaC00MDB2LTIwMGgzNTZsODI0LTkxNi00NDEtODg0aC0zMzl2LTIwMGg0MDBjNDMgMCA3OSAyNyA5MyA2NGw0MzEgODYxIDc5OC04ODhjMTgtMjIgNDctMzcgNzgtMzdoNDAwdjIwMHoiLz48cGF0aCBjbGFzcz0idHJpcGV0dG8tZmlsbCIgZD0iTTMwMCAyOTAwaDQwMGM0OCAwIDg3IDMzIDk3IDc4bDUwMCAxNDk5TDI0MDUgOTcwYzEzLTQzIDUzLTcwIDk1LTcwaDMwMDB2MjAwSDI1NzNMMTM5NSA0ODMwYy05IDI5LTMyIDU0LTY0IDY1LTUyIDE3LTEwOC0xMi0xMjYtNjRMNjI4IDMxMDBIMzAwdi0yMDB6Ii8+PC9zdmc+",ol("block:calculator","Exponentiation"),[new ec.MenuItem("x",(()=>t.append().set({operator:e,opcode:"square",value:i?0:s,open:i}))),new ec.MenuItem("",(()=>t.append().set({operator:e,opcode:"sqrt",value:i?0:s,open:i}))),new ec.MenuItem("pow",(()=>t.append().set({operator:e,opcode:"pow",exponent:1,open:!0}))),new ec.MenuItem("exp",(()=>t.append().set({operator:e,opcode:"exp",exponent:i?0:void 0,open:i}))),new ec.MenuItem("ln",(()=>t.append().set({operator:e,opcode:"ln",value:i?0:s,open:i}))),new ec.MenuItem("log",(()=>t.append().set({operator:e,opcode:"log",value:i?0:s,open:i})))]),new ec.MenuSubmenuWithIcon(59778,ol("block:calculator","Trigonometry"),[new ec.MenuItem("sin",(()=>t.append().set({operator:e,opcode:"sin",value:i?0:s,open:i}))),new ec.MenuItem("cos",(()=>t.append().set({operator:e,opcode:"cos",value:i?0:s,open:i}))),new ec.MenuItem("tan",(()=>t.append().set({operator:e,opcode:"tan",value:i?0:s,open:i}))),new ec.MenuSeparator,new ec.MenuLabel(ol("block:calculator","Inverse")),new ec.MenuItem("sin",(()=>t.append().set({operator:e,opcode:"asin",value:i?0:s,open:i}))),new ec.MenuItem("cos",(()=>t.append().set({operator:e,opcode:"acos",value:i?0:s,open:i}))),new ec.MenuItem("tan",(()=>t.append().set({operator:e,opcode:"atan",value:i?0:s,open:i}))),new ec.MenuSeparator,new ec.MenuLabel(ol("block:calculator","Hyperbolic")),new ec.MenuItem("sinh",(()=>t.append().set({operator:e,opcode:"sinh",value:i?0:s,open:i}))),new ec.MenuItem("cosh",(()=>t.append().set({operator:e,opcode:"cosh",value:i?0:s,open:i}))),new ec.MenuItem("tanh",(()=>t.append().set({operator:e,opcode:"tanh",value:i?0:s,open:i}))),new ec.MenuSeparator,new ec.MenuLabel(ol("block:calculator","Inverse hyperbolic")),new ec.MenuItem("sinh",(()=>t.append().set({operator:e,opcode:"asinh",value:i?0:s,open:i}))),new ec.MenuItem("cosh",(()=>t.append().set({operator:e,opcode:"acosh",value:i?0:s,open:i}))),new ec.MenuItem("tanh",(()=>t.append().set({operator:e,opcode:"atanh",value:i?0:s,open:i})))]),new ec.MenuSubmenuWithIcon(59732,ol("block:calculator","Factorial"),[new ec.MenuItem("n!",(()=>t.append().set({operator:e,opcode:"fact",value:i?0:s,open:i}))),new ec.MenuItem("gamma",(()=>t.append().set({operator:e,opcode:"gamma",value:i?0:s,open:i})))]),new ec.MenuSubmenuWithIcon(59704,ol("block:calculator","Miscellaneous"),[new ec.MenuItem("abs",(()=>t.append().set({operator:e,opcode:"abs",value:i?0:s,open:i}))),new ec.MenuItem("sgn",(()=>t.append().set({operator:e,opcode:"sgn",value:i?0:s,open:i}))),new ec.MenuItem("mod",(()=>t.append().set({operator:e,opcode:"mod",value:i?0:s,divisor:1,open:!0}))),new ec.MenuItem("%",(()=>t.append().set({operator:e,opcode:"percentage",value:i?0:s,percentage:0,open:!0})))]),...o?[new ec.MenuSubmenuWithIcon(59222,ol("block:calculator","Constants"),(()=>W_.map((i=>new ec.MenuItemWithIcon(function(e){switch(e){case"":case"e":case"":case"c":return 59098;case"random":return 59015;case"timestamp":return 59274;case"year":case"month":case"day-of-week":return 59273;case"day":return 59272;case"hour":case"minute":case"second":case"millisecond":return 59624;case"timezone":return 59526;case"branch":return 59719}}(i),$_(i),(()=>t.append().set({operator:e,opcode:"number",value:i})))))))]:[]],oL=(e,t)=>{const i=[];let s;const o=e=>{if((null==e?void 0:e.id)!==s){const t=null==e?void 0:e.name;(i.length>0||t)&&i.push(new ec.MenuSeparator),t&&i.push(new ec.MenuLabel(t)),s=null==e?void 0:e.id}};return ee(xc(e.block,{mode:"validated",pipes:"include-consumed-slots"}),(s=>{if(s.slots){const n=[];let r=!0,a=!1,l=!1;ue(s.slots,(i=>{var o,r,c;if("pipe"===i.type){const u=Rl.find(i);if(u){const h=null===(r=null===(o=i.slot)||void 0===o?void 0:o.slots)||void 0===r?void 0:r.select("score","feature");if(a=!0,h){const o=[];nL(o,t,e.operations,{type:"slot",block:s.block,label:h.alias||ol("block:calculator","Existing score"),icon:s.icon||s.block.type.icon,id:h.id,reference:h.reference,slot:h},!1,!0),o.push(new ec.MenuItemWithIcon(59147,ol("block:calculator","New score"),(()=>e.operations.append().set({operator:t,opcode:"score",value:i.id,open:!0})))),n.push(new ec.MenuSubmenuWithIcon(59105,ol("block:calculator","Score"),o))}else n.push(new ec.MenuItemWithIcon(59105,ol("block:calculator","Score"),(()=>e.operations.append().set({operator:t,opcode:"score",value:i.id,open:!0}))));if(u.origin&&u.sole)if(i.slot instanceof Ki.Number||i.slot instanceof Ki.Numeric)n.push(new ec.MenuItemWithIcon(59837,ol("block:calculator","Sum"),(()=>e.operations.append().set({operator:t,opcode:"sum",value:i.id}))));else if(i.slot instanceof Ki.Boolean){const o=null===(c=i.slot.slots)||void 0===c?void 0:c.select("counter");o?(l=!0,nL(n,t,e.operations,{type:"slot",block:s.block,label:o.label||ol("block:calculator","Counter"),icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTIgNmEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDZMNi4xNDUuNjQ3YS41LjUgMCAwIDEgLjcwNy43MDdsLTQuNSA0LjVBLjQ5OC40OTggMCAwIDEgMS45OTggNnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXpNMiAxM2EuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDYgNC4xNDYtNC4xNDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNC41IDQuNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXpNMiAyMGEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDYgNC4xNDYtNC4xNDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNC41IDQuNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",id:o.id,reference:o.reference,slot:o},!1,!0)):n.push(new ec.MenuItemWithIcon(59694,ol("block:calculator","Count"),(()=>e.operations.append().set({operator:t,opcode:"count",value:i.id}))))}return!0}}return!1})),ee(s.slots,(i=>{"slot"===i.type&&i.id&&i.slot&&("score"!==i.reference&&"counter"!==i.reference||"score"===i.reference&&!a||"counter"===i.reference&&!l)&&(r&&(r=!1,n.length>0&&n.push(new ec.MenuSeparator)),nL(n,t,e.operations,i,!0))})),n.length>0&&(o(s.block.node.cluster),i.push(new ec.MenuSubmenuWithImage(s.icon||s.block.type.icon,s.label,n)))}else if(s.id&&s.slot){const n=[];nL(n,t,e.operations,s,!1),n.length>0&&(o(s.block.node.cluster),i.push(...n))}})),i},nL=(e,t,i,s,o,n=!1)=>{var r,a,l,c,u,h,d;if(s.slot instanceof Ki.String||s.slot instanceof Ki.Text){const n=Rl.find(s),p=td(s.block,"calculator"),m=()=>i.append().set({operator:t,opcode:"score",value:s.id,open:!0}),g=(null==n?void 0:n.sole)&&p&&!0===(null===(r=p[s.slot.reference]||p["*"])||void 0===r?void 0:r.allowDefault)||!(null==n?void 0:n.sole)&&(!p||!1!==(null===(a=p[s.slot.reference]||p["*"])||void 0===a?void 0:a.allowDefault)),b=(null==n?void 0:n.sole)&&p&&!0===(null===(l=p[s.slot.reference]||p["*"])||void 0===l?void 0:l.allowCastToNumber)||!(null==n?void 0:n.sole)&&(!p||!1!==(null===(c=p[s.slot.reference]||p["*"])||void 0===c?void 0:c.allowCastToNumber)),f=null===(u=s.slot.slots)||void 0===u?void 0:u.select("score","feature"),y=!!(n||p&&(null===(h=p[s.slot.reference]||p["*"])||void 0===h?void 0:h.scores));if((null==n?void 0:n.sole)&&!b||p&&(null===(d=p[s.slot.reference]||p["*"])||void 0===d?void 0:d.scores)&&!g&&!b)if(f){const n=[];nL(n,t,i,{type:"slot",block:s.block,label:f.alias||ol("block:calculator","Existing score"),icon:s.icon||s.block.type.icon,id:f.id,reference:f.reference,slot:f},!1,!0),n.push(new ec.MenuItemWithIcon(59147,ol("block:calculator","New score"),(()=>i.append().set({operator:t,opcode:"score",value:s.id,open:!0})))),e.push(o?new ec.MenuSubmenuWithIcon(59105,ol("block:calculator","Score"),n):new ec.MenuSubmenuWithImage(s.icon||s.block.type.icon,s.label,n))}else e.push(o?new ec.MenuItemWithIcon(59105,s.label,m):new ec.MenuItemWithImage(s.icon||s.block.type.icon,s.label,m));else{const o=[];if(y||f)if(f){const e=[];nL(e,t,i,{type:"slot",block:s.block,label:f.alias||ol("block:calculator","Existing score"),icon:s.icon||s.block.type.icon,id:f.id,reference:f.reference,slot:f},!1,!0),e.push(new ec.MenuItemWithIcon(59147,ol("block:calculator","New score"),m)),o.push(new ec.MenuSubmenuWithIcon(59105,ol("block:calculator","Score"),e))}else o.push(new ec.MenuItemWithIcon(59105,ol("block:calculator","Score"),m));g&&o.push(new ec.MenuItemWithIcon(59449,ol("block:calculator","Compare"),(()=>i.append().set({operator:t,opcode:"evaluate",value:s.id,cona:0,conb:0,outa:1,outb:0,open:!0}))),new ec.MenuItemWithIcon(59771,ol("block:calculator","Character count"),(()=>i.append().set({operator:t,opcode:"chars",value:s.id}))),new ec.MenuItemWithIcon(59771,ol("block:calculator","Word count"),(()=>i.append().set({operator:t,opcode:"words",value:s.id}))),new ec.MenuItemWithIcon(59771,ol("block:calculator","Line count"),(()=>i.append().set({operator:t,opcode:"lines",value:s.id}))),new ec.MenuItemWithIcon(59683,ol("block:calculator","Count occurrences"),(()=>i.append().set({operator:t,opcode:"occurrences",value:s.id,open:!0})))),b&&o.push(new ec.MenuItemWithIcon(59117,ol("block:calculator","Convert to number"),(()=>i.append().set({operator:t,opcode:"cast",value:s.id})))),o.length>0&&e.push(1===o.length?o[0]:new ec.MenuSubmenuWithImage(s.icon||s.block.type.icon,s.label,o))}}else if(!(s.slot instanceof Ki.Number||s.slot instanceof Ki.Numeric)||!n&&"score"===s.reference&&rL(s))if(s.slot instanceof Ki.Boolean){const n=()=>i.append().set({operator:t,opcode:"boolean",value:s.id,outa:1,outb:0,open:!0});e.push(o?new ec.MenuItemWithIcon(59801,s.label,n):new ec.MenuItemWithImage(s.icon||s.block.type.icon,s.label,n))}else s.slot instanceof Ki.Date&&e.push(new ec.MenuSubmenuWithImage(s.icon||s.block.type.icon,s.label,[new ec.MenuItemWithIcon(59449,ol("block:calculator","Compare"),(()=>i.append().set({operator:t,opcode:"date",value:s.id,cona:void 0,conb:void 0,outa:1,outb:0,open:!0}))),new ec.MenuItemWithIcon(59390,ol("block:calculator","Age"),(()=>i.append().set({operator:t,opcode:"age",value:s.id,ageAbs:!0}))),new ec.MenuSeparator,new ec.MenuLabel(ol("block:calculator","Date related")),new ec.MenuItemWithIcon(59269,ol("block:calculator","Year"),(()=>i.append().set({operator:t,opcode:"year",value:s.id}))),new ec.MenuItemWithIcon(59273,ol("block:calculator","Month (January = 1)"),(()=>i.append().set({operator:t,opcode:"month",value:s.id}))),new ec.MenuItemWithIcon(59272,ol("block:calculator","Day of month (1-31)"),(()=>i.append().set({operator:t,opcode:"day-of-month",value:s.id}))),new ec.MenuItemWithIcon(59274,ol("block:calculator","Day of week (Sunday = 0)"),(()=>i.append().set({operator:t,opcode:"day-of-week",value:s.id}))),...s.slot.supportsTime?[new ec.MenuSeparator,new ec.MenuLabel(ol("block:calculator","Time related")),new ec.MenuItemWithIcon(59624,ol("block:calculator","Hour (0-23)"),(()=>i.append().set({operator:t,opcode:"hour",value:s.id}))),new ec.MenuItemWithIcon(59624,ol("block:calculator","Minute (0-59)"),(()=>i.append().set({operator:t,opcode:"minute",value:s.id}))),new ec.MenuItemWithIcon(59624,ol("block:calculator","Second (0-59)"),(()=>i.append().set({operator:t,opcode:"second",value:s.id}))),new ec.MenuItemWithIcon(59624,ol("block:calculator","Millisecond (0-999)"),(()=>i.append().set({operator:t,opcode:"millisecond",value:s.id})))]:[]]));else{const o=s.block instanceof vC?"calculator":s.slot.reference,n=()=>[new ec.MenuItemWithIcon("calculator"===o?59238:"score"===o?59105:"counter"===o?59694:59700,ol("block:calculator","calculator"===o?"Calculation outcome":"score"===o?"Score value":"counter"===o?"Counter value":"Current value"),(()=>i.append().set({operator:t,opcode:"number",value:s.id}))),new ec.MenuItemWithIcon(59449,ol("block:calculator","Compare"),(()=>i.append().set({operator:t,opcode:"equation",value:s.id,cona:0,conb:0,outa:1,outb:0,open:!0}))),new ec.MenuSeparator,new ec.MenuLabel(ol("block:calculator","Functions")),...sL(t,i,!1,s.id,!1)];e.push(s.block instanceof vC||"calculator"!==s.reference&&"score"!==s.reference?new ec.MenuSubmenuWithImage(s.icon||s.block.type.icon,s.label,n):new ec.MenuSubmenuWithIcon("calculator"===s.reference?59238:59105,s.label,n))}},rL=e=>{var t,i;return null===(i=null===(t=e.slot)||void 0===t?void 0:t.slots)||void 0===i?void 0:i.each((t=>{var i;if(t instanceof Ki.String||t instanceof Ki.Text){const s=td(e.block,"calculator");return!!(Rl.find(Object.assign(Object.assign({},e),{slot:t}))||s&&(null===(i=s[t.reference]||s["*"])||void 0===i?void 0:i.scores))}return!1}))},aL=(e,t,i="value",s="form",o=!0,n=(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),r)=>{const a=e[i],l=Kh(e.calculator.block,n,_(a)?a:void 0),c=new rc.Dropdown(l,_(a)?a:"").placeholder(0===l.length?ol("block:calculator","No usable values found..."):"").autoFocus(o).on((t=>{t.isFormVisible&&t.isObservable&&Ue(e,i,t.value||""),r&&r(t.value||"")}));return["form"===s?t.form({title:ol("block:calculator","Use value of"),controls:[c]}):c.label(ol("block:calculator","Use value of")),l.length,c]},lL=(e,t,i,s="angleUnits")=>{const o=e[s];return t.form({title:ol("block:calculator","Units"),controls:[new rc.Radiobutton([{label:ol("block:calculator","Degrees")+" ()",value:"degrees"},{label:ol("block:calculator","Radians")+" (rad)",value:"radians"},{label:ol("block:calculator","Gradians")+" ()",value:"gradians"}],"radians"===o||"gradians"===o?o:"degrees").on((t=>{Ue(e,s,t.value||"degrees"),i&&i(t.value||"degrees")}))]})},cL=(e,t)=>e.form({title:ol("block:calculator","Explanation"),controls:[new rc.Static(t).markdown()]}),uL=(e,t,i=!0,s=!1,o=!0,n="value",r=!0,a=!0,l,c)=>{const u=e[n],h=l?"inline":"form";let d;const p=new rc.Radiobutton([...i?[{label:e.isSubCalculation&&e.isFirst?ol("block:calculator","Last outcome *(%1 parent calculation)*","ANS"):e.isFirst&&!e.calculator.startBlank?ol("block:calculator","Initial value"):ol("block:calculator","Last outcome *(%1)*","ANS"),value:"ans",disabled:!e.allowANS,markdown:!0}]:[],...o?[{label:ol("block:calculator","Number"),value:"number"}]:[],{label:ol("block:calculator","Value"),value:"variable"},...s?[{label:ol("block:calculator","Constant"),value:"constant"}]:[]],_(u)?G_(u)?"constant":"variable":A(u)||!i?"number":"ans").on((t=>{m[0].visible("number"===t.value),g[0].visible("variable"===t.value),b.visible("constant"===t.value),"ans"===t.value&&Ue(e,n,void 0),c&&c(t.value||"number","variable"===t.value&&g[2].value&&ms(e.calculator.block,g[2].value)||void 0)}));"form"===h&&(d=t.form({title:ol("block:calculator","Input"),controls:[p]}));const m=((e,t,i="value",s=!0,o=!0,n="form")=>{const r=e[i],a=new rc.Numeric(A(r)?r:0).precision("auto").thousands(!1).autoFocus(o).on((t=>{t.isFormVisible&&t.isObservable&&Ue(e,i,t.value)}));return s&&(a.enter(t.close),a.escape(t.close)),"percentage"===i&&(a.suffix("%"),a.min(0)),["form"===n?t.form({title:ol("block:calculator","Use fixed number"),controls:[a]}):a.label(ol("block:calculator","Use fixed number")),a]})(e,t,n,r,a,h),g=aL(e,t,n,h,a,void 0,c&&(t=>{c(p.value||"number","variable"===p.value&&t&&ms(e.calculator.block,t)||void 0)})),b=((e,t,i="value",s="form",o=!0)=>{const n=new rc.Dropdown(W_.map((e=>({label:$_(e),value:e}))),W(e[i])).autoFocus(o).on((t=>{var s;t.isFormVisible&&t.isObservable&&Ue(e,i,"string"==typeof(s=t.value)&&G_(s)?s:"")}));return"inline"===s?n.label(ol("block:calculator","Use constant")):t.form({title:ol("block:calculator","Use constant"),controls:[n]})})(e,t,n,h,a).visible(G_(W(u)));return m[0].visible(A(u)||!i&&!_(u)),g[0].visible(_(u)),p.buttonDisabled("variable",0===g[1]),m[0]instanceof rc.Control&&g[0]instanceof rc.Control&&b instanceof rc.Control&&(d=t.form({title:l,markdown:!0,controls:[p,m[0],g[0],b]})),[d,m[1]]},hL=aL,dL={name:e=>e.format("value","|","|"),title:()=>ol("block:calculator","Absolute value"),editor:(e,t)=>{cL(t,ol("block:calculator","Retrieves the absolute value (or modulus) of a number ([learn more](https://en.wikipedia.org/wiki/Absolute_value)). This makes negative numbers positive.")),uL(e,t,!0,!1,!1)}},pL={name:e=>e.format("value","*cosh* (",")"),title:()=>ol("block:calculator","Inverse hyperbolic cosine"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the inverse hyperbolic cosine (arccosine) of the given number ([learn more](https://en.wikipedia.org/wiki/Inverse_hyperbolic_functions)).")),uL(e,t)}},mL={name:e=>e.format("value","*cos* (",") "+("radians"===e.angleUnits?"rad":"gradians"===e.angleUnits?"":"")),title:()=>ol("block:calculator","Inverse cosine (arccosine)"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the inverse cosine (arccosine) of the given number ([learn more](https://en.wikipedia.org/wiki/Inverse_trigonometric_functions)). This number should be a value between `-1` and `1`.")),uL(e,t)[1].min(-1).max(1),lL(e,t)}};function gL(e="years"){switch(e){case"months":return ol("block:calculator","Months");case"days":return ol("block:calculator","Days");case"hours":return ol("block:calculator","Hours");case"minutes":return ol("block:calculator","Minutes");case"seconds":return ol("block:calculator","Seconds");case"milliseconds":return ol("block:calculator","Milliseconds");default:return ol("block:calculator","Years")}}const bL={name:e=>e.format("value",`*${ol("block:calculator","age")}* (`,") "+gL(e.ageIn).toLowerCase()),title:e=>{var t;return _(e.value)&&(null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label)||ol("block:calculator","Age")},editor:(e,t)=>{const i=_(e.value)&&ms(e.calculator.block,e.value),s=i&&i.slot instanceof Ki.Date&&i.slot.supportsTime||!1,o=new rc.Radiobutton([{label:ol("block:calculator","Current date"),value:"current"},{label:ol("block:calculator","Fixed date"),value:"date"},{label:ol("block:calculator","Value"),value:"variable"}],_(e.reference)?"variable":A(e.reference)?"date":"current").on((t=>{n.visible("date"===t.value),r[0].visible("variable"===t.value),"current"===t.value&&(e.reference=void 0)}));cL(t,ol("block:calculator","Calculates the age (time) between two points in time.")),t.form({title:ol("block:calculator","Calculate age using"),controls:[o]});const n=t.form({title:ol("block:calculator","Use fixed date"),controls:[new rc.DateTime(A(e.reference)?e.reference:M.UTC).zone("UTC").years((new Date).getFullYear()-150,(new Date).getFullYear()+50).features(1|(s?8:32)).required().on((t=>{t.isFormVisible&&t.isObservable&&(e.reference=t.value)}))]}),r=hL(e,t,"reference","form",!0,(t=>t instanceof Ki.Date&&t.id!==e.value));o.buttonDisabled("variable",0===r[1]),t.form({title:ol("block:calculator","Units"),controls:[new rc.Radiobutton(["years","months","days","hours","minutes","seconds","milliseconds"].map((e=>({label:gL(e),value:e}))),rc.Radiobutton.bind(e,"ageIn",void 0,"years"))]}),t.form({title:ol("block:calculator","Options"),controls:[new rc.Checkbox(ol("block:calculator","Always return a positive (absolute) value"),rc.Checkbox.bind(e,"ageAbs",void 0)).description(ol("block:calculator","If unchecked, a negative value is possible, which indicates that the source date is after the date that serves as compare date for the calculation."))]})}},fL={name:e=>e.format("value","*sinh* (",")"),title:()=>ol("block:calculator","Inverse hyperbolic sine"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the inverse hyperbolic sine (arcsine) of the given number ([learn more](https://en.wikipedia.org/wiki/Inverse_hyperbolic_functions)).")),uL(e,t)}},yL={name:e=>e.format("value","*sin* (",") "+("radians"===e.angleUnits?"rad":"gradians"===e.angleUnits?"":"")),title:()=>ol("block:calculator","Inverse sine (arcsine)"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the inverse sine (arcsine) of the given number ([learn more](https://en.wikipedia.org/wiki/Inverse_trigonometric_functions)). This number should be a value between `-1` and `1`.")),uL(e,t)[1].min(-1).max(1),lL(e,t)}},vL={name:e=>e.format("value","*tanh* (",")"),title:()=>ol("block:calculator","Inverse hyperbolic tangent"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the inverse hyperbolic tangent (arctangent) of the given number ([learn more](https://en.wikipedia.org/wiki/Inverse_hyperbolic_functions)).")),uL(e,t)}},ML={name:e=>e.format("value","*tan* (",") "+("radians"===e.angleUnits?"rad":"gradians"===e.angleUnits?"":"")),title:()=>ol("block:calculator","Inverse tangent (arctangent)"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the inverse tangent (arctangent) of the given number ([learn more](https://en.wikipedia.org/wiki/Inverse_trigonometric_functions)).")),uL(e,t),lL(e,t)}},wL={name:e=>{const t=e.format("value",void 0,void 0,void 0,!0),i=e.format("outa",void 0,void 0,void 0,!0),s=e.format("outb",void 0,void 0,void 0,!0);if(!t||!i||!s)return"";const o=_(e.value)&&ms(e.calculator.block,e.value)||void 0;return t+" = "+ol("block:calculator","%1 then %2 else %3",`**${(null==o?void 0:o.slot)instanceof Ki.Boolean&&Bs(o.slot.labelForTrue||"")||ol("block:calculator","True")}**`,i,s)},title:e=>{var t;return _(e.value)&&(null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label)||ol("block:calculator","Boolean")},editor:(e,t)=>{const i=_(e.value)&&ms(e.calculator.block,e.value)||void 0;cL(t,ol("block:calculator","Outputs a value based on the boolean state.")),uL(e,t,!0,!0,!0,"outa",!1,!1,ol("block:calculator","If %1 then output",`**${(null==i?void 0:i.slot)instanceof Ki.Boolean&&Bs(i.slot.labelForTrue||"")||ol("block:calculator","True")}**`)),uL(e,t,!0,!0,!0,"outb",!1,!1,ol("block:calculator","If %1 then output",`**${(null==i?void 0:i.slot)instanceof Ki.Boolean&&Bs(i.slot.labelForFalse||"")||ol("block:calculator","False")}**`))}},xL=(e,t=ol("block:calculator","Initial value is the last outcome (ANS)."),i)=>({collection:e.operations,banner:i,title:ol("block:calculator","Operations"),icon:!0,allowAutoSorting:!1,allowCleanup:ol("block:calculator","Remove invalid operations"),placeholder:ol("block:calculator","Invalid operation"),allowVariables:!0,allowFormatting:!0,markdown:ts.MarkdownFeatures.Formatting|ts.MarkdownFeatures.InlineCode,showAliases:t=>{var i;return null===(i=e.block.slots.select(t.id,"dynamic"))||void 0===i?void 0:i.alias},onReposition:e=>e.refresh("name"),onResize:e instanceof bC&&(()=>e.refresh("name"))||void 0,menu:()=>((e,t=!1)=>e.startBlank&&0===e.operations.count&&!t?eL(e,!1)("+"):[new ec.MenuSubmenuWithImage(q_,ol("block:calculator","Add"),(()=>eL(e,t)("+"))),new ec.MenuSubmenuWithImage(X_,ol("block:calculator","Subtract"),(()=>eL(e,t)("-"))),new ec.MenuSubmenuWithImage(J_,ol("block:calculator","Multiply"),(()=>eL(e,t)("*"))),new ec.MenuSubmenuWithImage(K_,ol("block:calculator","Divide"),(()=>eL(e,t)("/"))),new ec.MenuSeparator,new ec.MenuSubmenuWithImage(Q_,ol("block:calculator","Equal"),(()=>eL(e,t)("=")))])(e,e instanceof bC),emptyMessage:{message:e instanceof bC||!e.startBlank?"**"+t+"**\n\n"+ol("block:calculator","Click the + button to add an operation.")+"\n\n"+ol("block:calculator","Use **=** operation to set another initial value."):"**"+ol("block:calculator","Every calculation begins with an initial value.")+"**\n\n"+ol("block:calculator","Click the + button to specify that value.")+"\n\n"+ol("block:calculator","After that you can add more operations."),height:96}}),SL={name:e=>`${Bs(e.description||"")||ol("block:calculator","Calculation")} *(${sl("block:calculator","%1 operation","%1 operations",e.operations.count)})*`,title:e=>e.description||ol("block:calculator","Subcalculation"),editor:(e,t)=>{var i,s,o,n;cL(t,ol("block:calculator","Performs a subcalculation. The initial value for this subcalculation is automatically set to the current outcome (**ANS**) of the parent calculation. If you want to begin this subcalculation with another value, then add an equal (**=**) operation to begin with.")),t.collection(xL(e)),t.form({title:ol("block:calculator","Description"),controls:[new rc.Text("singleline",rc.Text.bind(e,"description",void 0)).autoFocus(0===e.operations.count).on((t=>{e.outcome&&(e.outcome.label=t.value),c.visible(!!(t.value&&e.block instanceof vC))}))]});const r=new rc.Checkbox(ol("block:calculator","Set an alias for this subcalculation"),!!(null===(i=e.outcome)||void 0===i?void 0:i.alias)).on((e=>a.visible(e.isChecked))),a=new rc.Group([new rc.Text("singleline",(null===(s=e.outcome)||void 0===s?void 0:s.alias)||"").placeholder(ol("block:calculator","Type alias identifier here...")).indent(32).on((t=>{if(e.outcome){const i=e.outcome.alias;e.outcome.alias=t.isObservable&&t.value||void 0,e.outcome.alias!==i&&e.refresh("name")}})),new rc.Static(ol("block:calculator","This alias will be used as identifier of the subcalculation in the dataset.")).indent(32)]).visible(!!(null===(o=e.outcome)||void 0===o?void 0:o.alias)),l=new rc.Group([new rc.Checkbox(ol("block:calculator","Make outcome exportable and include it in the dataset"),(null===(n=e.outcome)||void 0===n?void 0:n.exportable)||!1).on((t=>{e.outcome&&(e.outcome.exportable=t.isChecked)})),r]).visible(!!e.outcome),c=t.form({title:ol("block:calculator","Exportability"),controls:[new rc.Checkbox(ol("block:calculator","Make outcome available for other blocks"),!!e.outcome).on((t=>{if(t.isFormVisible&&t.isObservable&&t.isChecked&&e.description&&e.block instanceof vC){const t=e.calculator.block.slots.dynamic({type:Ki.Numeric,reference:e.id,label:e.description,exportable:!1});e.calculator.outcome&&(t.decimal=e.calculator.outcome.decimal,t.precision=e.calculator.outcome.precision,t.digits=e.calculator.outcome.digits,t.separator=e.calculator.outcome.separator,t.minimum=e.calculator.outcome.minimum,t.maximum=e.calculator.outcome.maximum,t.prefix=e.calculator.outcome.prefix,t.prefixPlural=e.calculator.outcome.prefixPlural,t.suffix=e.calculator.outcome.suffix,t.suffixPlural=e.calculator.outcome.suffixPlural)}else e.calculator.block.slots.delete(e.id,"dynamic");l.visible(t.isChecked),a.visible(t.isChecked&&r.isChecked),e.refresh("name")})),l,a]}).visible(!!(e.description&&e.block instanceof vC))}},IL={name:e=>e.format("value",`*${ol("block:calculator","convert")}* (`,`) *${ol("block:calculator","to number")}*`),title:()=>ol("block:calculator","Convert to number"),editor:(e,t)=>{cL(t,ol("block:calculator","Converts a text value to a number."))}},kL={name:e=>e.format("value","",""),title:()=>ol("block:calculator","Ceil"),editor:(e,t)=>{cL(t,ol("block:calculator","Rounds a floating point number up ([learn more](https://en.wikipedia.org/wiki/Floor_and_ceiling_functions)).")),uL(e,t,!0,!0)}},NL={name:e=>e.format("value",`*${ol("block:calculator","characters")}* (`,")"),title:()=>ol("block:calculator","Character count"),editor:(e,t)=>{cL(t,ol("block:calculator","Counts the number of characters in a text."))}},_L={name:e=>{const t=e.format("value","*clamp* (",",",!0),i=e.format("min"," ",",",!0),s=e.format("max"," ",")");return t&&i&&s?t+i+s:""},title:()=>ol("block:calculator","Clamp number"),editor:(e,t)=>{cL(t,ol("block:calculator","Clamps (restricts) the input between the specified minimum and maximum value ([learn more](https://en.wikipedia.org/wiki/Clamping_%28graphics%29)).")),uL(e,t,!0,!0,!1,"value",!1,!0,ol("block:calculator","Input")),uL(e,t,!0,!0,!0,"min",!1,!1,ol("block:calculator","Minimum value")),uL(e,t,!0,!0,!0,"max",!1,!1,ol("block:calculator","Maximum value"))}},LL={name:e=>e.format("value","*cosh* (",")"),title:()=>ol("block:calculator","Hyperbolic cosine"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the hyperbolic cosine of the given hyperbolic angle ([learn more](https://en.wikipedia.org/wiki/Hyperbolic_functions)).")),uL(e,t)}},CL={name:e=>e.format("value","*cos* (",("radians"===e.angleUnits?"rad":"gradians"===e.angleUnits?"":"")+" )","radians"!==e.angleUnits),title:()=>ol("block:calculator","Cosine"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the cosine of the given angle ([learn more](https://en.wikipedia.org/wiki/Trigonometric_functions)). The result is a number between `-1` and `1`."));const[,i]=uL(e,t);lL(e,t,(e=>i.suffix("radians"===e?" rad":"gradians"===e?"":"")))}},DL={name:e=>e.format("value",`*${ol("block:calculator","count")}* (`,")"),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Count")},editor:(e,t)=>{cL(t,ol("block:calculator","Counts the number of selected options or given answers. Useful if you want to calculate the average of given answers."))}};function AL(e,t){var i;const s=e[t],o=_(e.value)&&ms(e.calculator.block,e.value),n=o&&o.slot instanceof Ki.Date&&o.slot||void 0;return _(s)?s&&(null===(i=ms(e.calculator.block,s))||void 0===i?void 0:i.label)?`@${s}`:"":A(s)?`**${(n?n.supportsTime:"datetime"===e.opcode)?il.locale.dateTimeShort(s,!0):il.locale.dateShort(s,!0)}**`:"`"+ol("block:calculator","Now").toUpperCase()+"`"}const jL={name:e=>{const t=e.format("value",void 0,void 0,void 0,!0,"NOW"),i=AL(e,"cona"),s=AL(e,"conb"),o=e.format("outa",void 0,void 0,void 0,!0),n=e.format("outb",void 0,void 0,void 0,!0);if(!t||!o||!n)return"";const r=`then ${o} else ${n}`;switch(e.compareMode||"equal"){case"defined":return`${t} ${ol("block:calculator","not empty")} ${r}`;case"between":return i&&s&&`${i}  ${t}  ${s} ${r}`||"";case"before":case"after":case"equal":return i&&`${t} ${"after"===e.compareMode?">":"before"===e.compareMode?"<":"="} ${i} ${r}`||""}},title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||("datetime"===e.opcode?ol("block:calculator","Current date + time"):ol("block:calculator","Current date"))},editor:(e,t)=>{const i=_(e.value)&&ms(e.calculator.block,e.value),s=i&&i.slot instanceof Ki.Date&&i.slot||void 0,o=s?s.supportsTime:"datetime"===e.opcode,n=new rc.Radiobutton([{label:ol("block:calculator","Date is equal to"),value:"equal"},{label:ol("block:calculator","Date is before"),value:"before"},{label:ol("block:calculator","Date is after"),value:"after"},{label:ol("block:calculator","Date is between"),value:"between"},{label:ol("block:calculator","Date is not empty"),value:"defined",visible:!!s}],e.compareMode||"equal").on((t=>{switch(e.compareMode=t.value||"equal",a.visible("defined"!==e.compareMode),l.visible("between"===t.value),e.compareMode){case"equal":a.title=ol("block:calculator","If date equals");break;case"before":a.title=ol("block:calculator","If date is before");break;case"after":a.title=ol("block:calculator","If date is after");break;case"between":a.title=ol("block:calculator","If date is between")}}));cL(t,ol("block:calculator","Compares a date and outputs a value based on the result of the comparison.")),t.form({title:ol("block:calculator","Compare mode"),controls:[n]});const r=(s,n,r)=>{const a=e[s],l=new rc.DateTime(A(a)?a:void 0).zone("UTC").years((new Date).getFullYear()-150,(new Date).getFullYear()+50).label(ol("block:calculator",o?"Use fixed date/time":"Use fixed date")).features(1|(o?8:32)).required().on((t=>{t.isFormVisible&&t.isObservable&&(e[s]=t.value)})),c=hL(e,t,s,"inline",!1,(t=>t instanceof Ki.Date&&t.id!==e.value));return t.form({title:n,controls:[new rc.Radiobutton([{label:ol("block:calculator","Current date"),value:"current",visible:!!i},{label:ol("block:calculator",o?"Fixed date/time":"Fixed date"),value:"date"},{label:ol("block:calculator","Value"),value:"variable",disabled:0===c[1]}],_(a)?"variable":A(a)?"date":"current").on((t=>{l.visible("date"===t.value),c[0].visible("variable"===t.value),"current"===t.value&&(e[s]=void 0)})),l,c[0]]}).visible(r)},a=r("cona",ol("block:calculator","If date equals"),"defined"!==e.compareMode),l=r("conb",ol("block:calculator","And"),"between"===e.compareMode);uL(e,t,!0,!0,!0,"outa",!1,!1,ol("block:calculator","Then output")),uL(e,t,!0,!0,!0,"outb",!1,!1,ol("block:calculator","Else output"))}},TL={name:e=>e.format("value",`*${ol("block:calculator","day of month")}* (`,")"),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Day of month")},editor:(e,t)=>{cL(t,ol("block:calculator","Retrieves the day of month of the date."))}},zL={name:e=>e.format("value",`*${ol("block:calculator","day of week")}* (`,")"),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Day of week")},editor:(e,t)=>{cL(t,ol("block:calculator","Retrieves the day of the week (where 0 represents Sunday) of the date."))}},EL={name:e=>{const t=e.format("value",void 0,void 0,void 0,!0),i=e.format("cona",void 0,void 0,void 0,!0),s=e.format("conb",void 0,void 0,void 0,!0),o=e.format("outa",void 0,void 0,void 0,!0),n=e.format("outb",void 0,void 0,void 0,!0);if(!t||!o||!n)return"";const r=`then ${o} else ${n}`;switch(e.compareMode||"equal"){case"defined":return`${t} ${ol("block:calculator","not empty")} ${r}`;case"between":return i&&s&&`${i}  ${t}  ${s} ${r}`||"";case"above":case"below":case"equal":return i&&`${t} ${"above"===e.compareMode?">":"below"===e.compareMode?"<":"="} ${i} ${r}`||""}},title:()=>ol("block:calculator","Compare"),editor:(e,t)=>{const i=new rc.Radiobutton([{label:ol("block:calculator","Input is equal to"),value:"equal"},{label:ol("block:calculator","Input is lower than"),value:"below"},{label:ol("block:calculator","Input is higher than"),value:"above"},{label:ol("block:calculator","Input is between"),value:"between"},{label:ol("block:calculator","Input is not empty"),value:"defined",visible:(s=e.value,_(s)&&!G_(s))}],e.compareMode||"equal").on((t=>{switch(e.compareMode=t.value||"equal",o.visible("defined"!==e.compareMode),r.visible("between"===t.value),e.compareMode){case"equal":o.title=ol("block:calculator","If input equals");break;case"below":o.title=ol("block:calculator","If input is lower than");break;case"above":o.title=ol("block:calculator","If input is higher than");break;case"between":o.title=ol("block:calculator","If input is between")}}));var s;cL(t,ol("block:calculator","Compares the supplied input and outputs a value based on the result of the comparison.")),uL(e,t,!0,!1,!1,"value",!1,!0,ol("block:calculator","Input"),((e,t)=>{if(i.buttonVisible("defined","variable"===e),n&&a){const e=e=>{e.precision((null==t?void 0:t.slot)instanceof Ki.Numeric?t.slot.precision||0:"auto"),e.digits((null==t?void 0:t.slot)instanceof Ki.Numeric&&t.slot.digits||0),e.decimalSign((null==t?void 0:t.slot)instanceof Ki.Numeric&&t.slot.decimal||""),e.thousands(!!((null==t?void 0:t.slot)instanceof Ki.Numeric&&t.slot.separator),(null==t?void 0:t.slot)instanceof Ki.Numeric&&t.slot.separator||""),e.min((null==t?void 0:t.slot)instanceof Ki.Numeric&&t.slot.minimum||void 0),e.max((null==t?void 0:t.slot)instanceof Ki.Numeric&&t.slot.maximum||void 0),e.prefix((null==t?void 0:t.slot)instanceof Ki.Numeric&&t.slot.prefix||""),e.prefixPlural((null==t?void 0:t.slot)instanceof Ki.Numeric&&t.slot.prefixPlural||void 0),e.suffix((null==t?void 0:t.slot)instanceof Ki.Numeric&&t.slot.suffix||""),e.suffixPlural((null==t?void 0:t.slot)instanceof Ki.Numeric&&t.slot.suffixPlural||void 0)};e(n),e(a)}})),t.form({title:ol("block:calculator","Compare mode"),controls:[i]});const[o,n]=uL(e,t,!0,!0,!0,"cona",!1,!1,ol("block:calculator","If input equals")),[r,a]=uL(e,t,!0,!0,!0,"conb",!1,!1,ol("block:calculator","And"));o.visible("defined"!==e.compareMode),r.visible("between"===e.compareMode),uL(e,t,!0,!0,!0,"outa",!1,!1,ol("block:calculator","Then output")),uL(e,t,!0,!0,!0,"outb",!1,!1,ol("block:calculator","Else output"))}},OL={name:e=>{const i=e.format("value",void 0,void 0,void 0,!0),s=e.format("outa",void 0,void 0,void 0,!0),o=e.format("outb",void 0,void 0,void 0,!0);if(!i||!s||!o)return"";const n=`then ${s} else ${o}`,r=C(e.cona)?`**${Bs(t.replace(t.replace(e.cona,"\n","")," ",""))}**`:"*\\_\\_*";switch(e.compareMode||"equal"){case"defined":return`${i} ${ol("block:calculator","not empty")} ${n}`;case"equal":return`${i} = ${r} ${n}`;case"contains":return`${i} ${ol("block:calculator","contains")} ${r} ${n}`;case"starts":return`${i} ${ol("block:calculator","starts with")} ${r} ${n}`;case"ends":return`${i} ${ol("block:calculator","ends with")} ${r} ${n}`}},title:e=>{var t;return _(e.value)&&(null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label)||ol("block:calculator","Text")},editor:(e,t)=>{cL(t,ol("block:calculator","Compares a text and outputs a value based on the result of the comparison."));const i=new rc.Group([new rc.Text("multiline",_(e.cona)&&e.cona||"").on((t=>{e.cona=t.isObservable&&t.value||void 0})).sanitize(!1).action("@",Ic(e.calculator.block)).autoFocus(),new rc.Checkbox(ol("block:calculator","Ignore case"),rc.Checkbox.bind(e,"ignoreCase",void 0,!0))]).visible("defined"!==e.compareMode);t.form({title:ol("block:calculator","If text"),controls:[new rc.Radiobutton([{label:ol("block:calculator","Matches"),value:"equal"},{label:ol("block:calculator","Contains"),value:"contains"},{label:ol("block:calculator","Starts with"),value:"starts"},{label:ol("block:calculator","Ends with"),value:"ends"},{label:ol("block:calculator","Is not empty"),value:"defined"}],e.compareMode||"equal").on((t=>{e.compareMode=t.value||"equal",i.visible("defined"!==e.compareMode)})),i]}),uL(e,t,!0,!0,!0,"outa",!1,!1,ol("block:calculator","Then output")),uL(e,t,!0,!0,!0,"outb",!1,!1,ol("block:calculator","Else output"))}},PL={name:e=>e.format("exponent","*exp* (",")"),title:()=>ol("block:calculator","Exponent"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates `e` to the power of the given exponent ([learn more](https://en.wikipedia.org/wiki/Exponential_function)).")),uL(e,t,!0,!0,!0,"exponent",!0,!0,ol("block:calculator","Exponent"))}},RL={name:e=>e.format("value",void 0,"!",!0),title:()=>"n!",editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the factorial of a positive number ([learn more](https://en.wikipedia.org/wiki/Factorial)).")),uL(e,t,!0,!0)}},HL={name:e=>e.format("value","",""),title:()=>ol("block:calculator","Floor"),editor:(e,t)=>{cL(t,ol("block:calculator","Rounds a floating point number down ([learn more](https://en.wikipedia.org/wiki/Floor_and_ceiling_functions)).")),uL(e,t,!0,!0)}},FL={name:e=>e.format("value","*gamma* (",")"),title:()=>ol("block:calculator","Gamma"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the gamma of a positive number ([learn more](https://en.wikipedia.org/wiki/Gamma_function)).")),uL(e,t,!0,!0)}},UL={name:e=>e.format("value",`*${ol("block:calculator","hour")}* (`,")"),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Hour")},editor:(e,t)=>{cL(t,ol("block:calculator","Retrieves a number between 0 and 23, representing the hours of the date/time."))}},BL={name:e=>e.format("value",`*${ol("block:calculator","lines")}* (`,")"),title:()=>ol("block:calculator","Line count"),editor:(e,t)=>{cL(t,ol("block:calculator","Counts the number of lines in a text."))}},YL={name:e=>e.format("value","*ln* (",")"),title:()=>ol("block:calculator","Natural logarithm"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the natural logarithm of the input ([learn more](https://en.wikipedia.org/wiki/Natural_logarithm)).")),uL(e,t,!0,!0)}},ZL={name:e=>e.format("value","*log* (",")"),title:()=>ol("block:calculator","Logarithm"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the base 10 logarithm of the input ([learn more](https://en.wikipedia.org/wiki/Logarithm)).")),uL(e,t,!0,!0)}},VL={name:e=>{const t=e.format("value","*max* (",",",!0),i=e.format("max"," ",")");return t&&i?t+i:""},title:()=>ol("block:calculator","Find highest number"),editor:(e,t)=>{cL(t,ol("block:calculator","Returns the input with the highest number.")),uL(e,t,!0,!0,!0,"value",!1,!0,ol("block:calculator","Input 1")),uL(e,t,!0,!0,!0,"max",!1,!1,ol("block:calculator","Input 2"))}},WL={name:e=>e.format("value",`*${ol("block:calculator","millisecond")}* (`,")"),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Millisecond")},editor:(e,t)=>{cL(t,ol("block:calculator","Retrieves a number between 0 and 999, representing the milliseconds of the date/time."))}},GL={name:e=>{const t=e.format("value","*min* (",",",!0),i=e.format("min"," ",")");return t&&i?t+i:""},title:()=>ol("block:calculator","Find lowest number"),editor:(e,t)=>{cL(t,ol("block:calculator","Returns the input with the lowest number.")),uL(e,t,!0,!0,!0,"value",!1,!0,ol("block:calculator","Input 1")),uL(e,t,!0,!0,!0,"min",!1,!1,ol("block:calculator","Input 2"))}},$L={name:e=>e.format("value",`*${ol("block:calculator","minute")}* (`,")"),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Minute")},editor:(e,t)=>{cL(t,ol("block:calculator","Retrieves a number between 0 and 59, representing the minutes of the date/time."))}},QL={name:e=>{const t=e.format("value","","mod "),i=e.format("divisor");return t&&i?t+i:""},title:()=>ol("block:calculator","Modulus"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the remainder of a division ([learn more](https://en.wikipedia.org/wiki/Modulo_operation)).")),uL(e,t,!0,!0,!0,"value",!1,!0,ol("block:calculator","Input (dividend)")),uL(e,t,!0,!0,!0,"divisor",!1,!1,ol("block:calculator","Divisor"))}},qL={name:e=>e.format("value",`*${ol("block:calculator","month")}* (`,")"),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Month")},editor:(e,t)=>{cL(t,ol("block:calculator","Retrieves the month (where 1 indicates the first month of the year) of the date."))}},XL={name:e=>e.format("value"),title:e=>{var t;return(_(e.value)?G_(e.value)?ol("block:calculator","Constant"):null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Number")},editor:(e,t)=>{cL(t,ol("block:calculator","Supplies a number to the calulator.")),uL(e,t,(e.isSubCalculation||!e.calculator.startBlank||!e.isFirst)&&("="!==e.operator||e.isFirst),!0)}},JL={name:e=>`${ol("block:calculator","Count")} ${"regex"===e.compareMode?C(e.cona)&&t.sanitize(e.cona)?`\`${Bs(e.cona)}\``:"`\\_\\_`":C(e.cona)?`**${Bs(t.replace(t.replace(e.cona,"\n","")," ",""))}**`:"*\\_\\_*"} ${ol("block:calculator","in")} ${e.format("value",void 0,void 0,void 0,!0)}`,title:()=>ol("block:calculator","Count occurrences"),editor:(e,t)=>{cL(t,ol("block:calculator","Counts the number of occurrences of a certain text or character."));const i=new rc.Group([new rc.Text("multiline","regex"!==e.compareMode&&_(e.cona)&&e.cona||"").on((t=>{t.isObservable&&(e.cona=t.value||void 0)})).sanitize(!1).action("@",Ic(e.calculator.block)).autoFocus(),new rc.Checkbox(ol("block:calculator","Ignore case"),rc.Checkbox.bind(e,"ignoreCase",void 0,!0))]).visible("regex"!==e.compareMode),s=new rc.Group([new rc.Text("singleline","regex"===e.compareMode&&_(e.cona)&&e.cona||"").placeholder(ol("block:calculator","Regex literal (for example /ab+c/)")).on((t=>{t.isObservable&&(e.cona=t.value||void 0)})).autoValidate((e=>{if(!e.value)return"unknown";try{const t=e.value.indexOf("/"),i=e.value.lastIndexOf("/");return 0===t&&i>t&&((e,t)=>{try{return new RegExp(e.substring(1,t),e.substr(t+1))instanceof RegExp}catch(e){return!1}})(e.value,i)?"pass":"fail"}catch(e){return"fail"}}))]).visible("regex"===e.compareMode);t.form({title:ol("block:calculator","Count"),controls:[new rc.Radiobutton([{label:ol("block:calculator","Text"),value:"contains"},{label:ol("block:calculator","Regular expression"),value:"regex"}],e.compareMode||"contains").on((t=>{e.compareMode=t.value||"contains",i.visible("regex"!==e.compareMode),s.visible("regex"===e.compareMode)})),i,s]})}},KL={name:e=>{const t=e.format("percentage","","% ",!0),i=e.format("value",ol("block:calculator","of"));return t&&i?t+i:""},title:()=>ol("block:calculator","Percentage")+" (%)",editor:(e,t)=>{cL(t,ol("block:calculator","Calculates a percentage of the input ([learn more](https://en.wikipedia.org/wiki/Percentage)).")),uL(e,t,!0,!0,!0,"value",!1,!0,ol("block:calculator","Input")),uL(e,t,!0,!1,!0,"percentage",!1,!1,ol("block:calculator","Percentage"))}},eC={name:e=>{const t=e.format("value","","^ "),i=e.format("exponent");return t&&i?t+i:""},title:()=>ol("block:calculator","Power"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the base to the power of the given exponent ([learn more](https://en.wikipedia.org/wiki/Exponentiation)).")),uL(e,t,!0,!0,!0,"value",!1,!0,ol("block:calculator","Base")),uL(e,t,!0,!0,!0,"exponent",!1,!1,ol("block:calculator","Exponent"))}},tC={name:e=>e.format("value","*round* (",")"),title:()=>ol("block:calculator","Round"),editor:(e,t)=>{cL(t,ol("block:calculator","Rounds a floating point number ([learn more](https://en.wikipedia.org/wiki/Rounding)).")),uL(e,t,!0,!0)}},iC={name:e=>e.format("value",`*${ol("block:calculator","score")}* (`,")"),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Score")},editor:(e,t)=>{var i;const s=_(e.value)&&ms(e.calculator.block,e.value);if(cL(t,ol("block:calculator","Calculates a score based on the score list below.")),s&&s.block instanceof Sa){const o=s.slot||s.pipe;if(o){const n=[],r=(t,i,s,o)=>{if(s=s||"",t&&(i||s)){const r=e.scores&&e.scores[t];n.push(new rc.Numeric(A(r)?r:o).precision("auto").thousands(!1).markdown({features:ts.MarkdownFeatures.Formatting}).label(i&&s?`**${i}** *${s}*`:i||s).on((e=>a(t,e.value))))}},a=(t,i)=>{e.scores||(e.scores={}),e.scores[t]!==i&&(Fe(e.scores,t,i),e.calculator.block.detectChange())},l=Rl.find(s);if(l)l.collection.each((e=>r(e.id,e.labelWithoutMarkdown,Bs(e.getAliasOfItem()),e.getScoreOfItem())));else{const e=td(s.block,"calculator");e&&ee(null===(i=e[o.reference]||e["*"])||void 0===i?void 0:i.scores,(e=>r(W(e.reference),e.label||(o instanceof Ki.Boolean?!0===e.reference?o.labelForTrue||ol("block:calculator","True"):!1===e.reference?o.labelForFalse||ol("block:calculator","False"):"":void 0),e.alias,e.score)))}n.length&&(n[0].autoFocus(),n[n.length-1].enter(t.close),n[n.length-1].escape(t.close)),t.form({title:ol("block:calculator","Scores"),controls:n.length?n:[new rc.Notification(ol("block:calculator","There are no scorable items found for this block. Make sure to add items to the block first and then return here to set their scores."),"info")]})}}}},sC={name:e=>e.format("value",`*${ol("block:calculator","second")}* (`,")"),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Second")},editor:(e,t)=>{cL(t,ol("block:calculator","Retrieves a number between 0 and 59, representing the seconds of the date/time."))}},oC={name:e=>e.format("value","*sgn* (",")"),title:()=>ol("block:calculator","Sign"),editor:(e,t)=>{cL(t,ol("block:calculator","Extracts the sign of a number ([learn more](https://en.wikipedia.org/wiki/Sign_function)). For positive numbers this function returns `1` and for negative numbers `-1`. When the input is zero the function returns `0`.")),uL(e,t)}},nC={name:e=>e.format("value","*sinh* (",")"),title:()=>ol("block:calculator","Hyperbolic sine"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the hyperbolic sine of the given hyperbolic angle ([learn more](https://en.wikipedia.org/wiki/Hyperbolic_functions)).")),uL(e,t)}},rC={name:e=>e.format("value","*sin* (",("radians"===e.angleUnits?"rad":"gradians"===e.angleUnits?"":"")+" )","radians"!==e.angleUnits),title:()=>ol("block:calculator","Sine"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the sine of the given angle ([learn more](https://en.wikipedia.org/wiki/Trigonometric_functions)). The result is a number between `-1` and `1`."));const[,i]=uL(e,t);lL(e,t,(e=>i.suffix("radians"===e?" rad":"gradians"===e?"":"")))}},aC={name:e=>e.format("value",""),title:()=>"",editor:(e,t)=>{cL(t,ol("block:calculator","Finds the principal square root for the given input ([learn more](https://en.wikipedia.org/wiki/Square_root)).")),uL(e,t,!0,!0)}},lC={name:e=>e.format("value",void 0,"",!0),title:()=>"x",editor:(e,t)=>{cL(t,ol("block:calculator","Multiplies the given input by itself ([learn more](https://en.wikipedia.org/wiki/Square_%28algebra%29)).")),uL(e,t,!0,!0)}},cC={name:e=>e.format("value",""),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Sum")},editor:(e,t)=>{cL(t,ol("block:calculator","Adds up the values of all given answers."))}},uC={name:e=>e.format("value","*tanh* (",")"),title:()=>ol("block:calculator","Hyperbolic tangent"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the hyperbolic tangent of the given hyperbolic angle ([learn more](https://en.wikipedia.org/wiki/Hyperbolic_functions)).")),uL(e,t)}},hC={name:e=>e.format("value","*tan* (",("radians"===e.angleUnits?"rad":"gradians"===e.angleUnits?"":"")+" )","radians"!==e.angleUnits),title:()=>ol("block:calculator","Tangent"),editor:(e,t)=>{cL(t,ol("block:calculator","Calculates the tangent of the given angle ([learn more](https://en.wikipedia.org/wiki/Trigonometric_functions))."));const[,i]=uL(e,t);lL(e,t,(e=>i.suffix("radians"===e?" rad":"gradians"===e?"":"")))}},dC={name:e=>e.format("value","*trunc* (",")"),title:()=>ol("block:calculator","Trunc"),editor:(e,t)=>{cL(t,ol("block:calculator","Removes decimals from a floating point number.")),uL(e,t,!0,!0)}},pC={name:e=>e.format("value",`*${ol("block:calculator","words")}* (`,")"),title:()=>ol("block:calculator","Word count"),editor:(e,t)=>{cL(t,ol("block:calculator","Counts the number of words in a text."))}},mC={name:e=>e.format("value",`*${ol("block:calculator","year")}* (`,")"),title:e=>{var t;return(_(e.value)?null===(t=ms(e.calculator.block,e.value))||void 0===t?void 0:t.label:"")||ol("block:calculator","Year")},editor:(e,t)=>{cL(t,ol("block:calculator","Retrieves the year of the date."))}};var gC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTcuNSAxMGgtNkMuNjczIDEwIDAgOS4zMjcgMCA4LjV2LTZDMCAxLjY3My42NzMgMSAxLjUgMWg2QzguMzI3IDEgOSAxLjY3MyA5IDIuNXY2YzAgLjgyNy0uNjczIDEuNS0xLjUgMS41em0tNi04YS41LjUgMCAwIDAtLjUuNXY2YS41LjUgMCAwIDAgLjUuNWg2YS41LjUgMCAwIDAgLjUtLjV2LTZhLjUuNSAwIDAgMC0uNS0uNWgtNnptNiAxOGgtNkMuNjczIDIwIDAgMTkuMzI3IDAgMTguNXYtNmMwLS44MjcuNjczLTEuNSAxLjUtMS41aDZjLjgyNyAwIDEuNS42NzMgMS41IDEuNXY2YzAgLjgyNy0uNjczIDEuNS0xLjUgMS41em0tNi04YS41LjUgMCAwIDAtLjUuNXY2YS41LjUgMCAwIDAgLjUuNWg2YS41LjUgMCAwIDAgLjUtLjV2LTZhLjUuNSAwIDAgMC0uNS0uNWgtNnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTYuNSA2aC00YS41LjUgMCAwIDEgMC0xaDRhLjUuNSAwIDAgMSAwIDF6bTAgOUg1di0xLjVhLjUuNSAwIDAgMC0xIDBWMTVIMi41YS41LjUgMCAwIDAgMCAxSDR2MS41YS41LjUgMCAwIDAgMSAwVjE2aDEuNWEuNS41IDAgMCAwIDAtMXptMTEgNWgtNmMtLjgyNyAwLTEuNS0uNjczLTEuNS0xLjV2LTE2YzAtLjgyNy42NzMtMS41IDEuNS0xLjVoNmMuODI3IDAgMS41LjY3MyAxLjUgMS41djE2YzAgLjgyNy0uNjczIDEuNS0xLjUgMS41em0tNi0xOGEuNS41IDAgMCAwLS41LjV2MTZhLjUuNSAwIDAgMCAuNS41aDZhLjUuNSAwIDAgMCAuNS0uNXYtMTZhLjUuNSAwIDAgMC0uNS0uNWgtNnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE2LjUgMTBoLTRhLjUuNSAwIDAgMSAwLTFoNGEuNS41IDAgMCAxIDAgMXptMCAyaC00YS41LjUgMCAwIDEgMC0xaDRhLjUuNSAwIDAgMSAwIDF6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==";class bC extends Rl.Item{constructor(){super(...arguments),this.startBlank=!1,this.operator="=",this.opcode="number",this.operations=Rl.of(bC,this)}get calculator(){return this.ref}get block(){return this.calculator.block}get outcome(){return"calc"===this.opcode&&this.calculator.block.slots.select(this.id,"dynamic")||void 0}get icon(){if(this.calculator.startBlank&&this.isFirst&&!this.isSubCalculation)return"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIgLjVDMS4xNzMuNS41IDEuMTczLjUgMnYxNmMwIC44MjcuNjczIDEuNSAxLjUgMS41aDE2Yy44MjcgMCAxLjUtLjY3MyAxLjUtMS41VjJjMC0uODI3LS42NzMtMS41LTEuNS0xLjVIMnptOS43NSA2Yy4xMjggMCAuMjU2LjA0OS4zNTQuMTQ2bDMgM2EuNS41IDAgMCAxIDAgLjcwOGwtMyAzYS41LjUgMCAwIDEtLjcwOC0uNzA4bDIuMTQ3LTIuMTQ2SDUuMjVhLjUuNSAwIDAgMSAwLTFoOC4yOTNsLTIuMTQ3LTIuMTQ1YS41MDIuNTAyIDAgMCAxIC4zNTQtLjg1NXoiIGZpbGw9IiNBOEM2REYiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";switch(this.operator){case"+":return q_;case"-":return X_;case"*":return J_;case"/":return K_;default:return Q_}}get name(){var e;const t=(null===(e=bC.get(this.opcode))||void 0===e?void 0:e.name(this))||"";return this.isFirst||"/"!==this.operator||"0"!==t?t:t+" *(division by zero error)*"}get title(){var e;return(null===(e=bC.get(this.opcode))||void 0===e?void 0:e.title(this))||""}get width(){switch(this.opcode){case"calc":return 520;case"date":case"datetime":case"age":return 475}return 400}get menu(){return[new ec.MenuSubmenuWithImage(gC,ol("block:calculator","Operator"),(e=this,[new ec.MenuItemWithImage(q_,ol("block:calculator","Add"),(()=>e.operator="+"),"+"===e.operator),new ec.MenuItemWithImage(X_,ol("block:calculator","Subtract"),(()=>e.operator="-"),"-"===e.operator),new ec.MenuItemWithImage(J_,ol("block:calculator","Multiply"),(()=>e.operator="*"),"*"===e.operator),new ec.MenuItemWithImage(K_,ol("block:calculator","Divide"),(()=>e.operator="/"),"/"===e.operator),new ec.MenuSeparator,new ec.MenuItemWithImage(Q_,ol("block:calculator","Equal"),(()=>e.operator="="),"="===e.operator)]),this.calculator.startBlank&&this.isFirst)];var e}get isSubCalculation(){var e;return(null===(e=this.calculator.operations.itemAtIndex(this.index))||void 0===e?void 0:e.id)!==this.id}get allowANS(){return this.isSubCalculation||!this.calculator.startBlank||!this.isFirst}static get(e){switch(e){case"abs":return dL;case"acos":return mL;case"acosh":return pL;case"age":return bL;case"asin":return yL;case"asinh":return fL;case"atan":return ML;case"atanh":return vL;case"boolean":return wL;case"calc":return SL;case"cast":return IL;case"ceil":return kL;case"chars":return NL;case"clamp":return _L;case"cos":return CL;case"cosh":return LL;case"count":return DL;case"date":case"datetime":return jL;case"day-of-month":return TL;case"day-of-week":return zL;case"equation":return EL;case"evaluate":return OL;case"exp":return PL;case"fact":return RL;case"floor":return HL;case"gamma":return FL;case"hour":return UL;case"lines":return BL;case"ln":return YL;case"log":return ZL;case"max":return VL;case"millisecond":return WL;case"min":return GL;case"minute":return $L;case"mod":return QL;case"month":return qL;case"number":return XL;case"occurrences":return JL;case"percentage":return KL;case"pow":return eC;case"round":return tC;case"score":return iC;case"second":return sC;case"sgn":return oC;case"sin":return rC;case"sinh":return nC;case"sqrt":return aC;case"square":return lC;case"sum":return cC;case"tan":return hC;case"tanh":return uC;case"trunc":return dC;case"year":return mC;case"words":return pC}}set(e){var t;if(this.operator=e.operator,this.opcode=e.opcode,this.value=e.value,this.cona=e.cona,this.conb=e.conb,this.outa=e.outa,this.outb=e.outb,this.min=e.min,this.max=e.max,this.exponent=e.exponent,this.divisor=e.divisor,this.percentage=e.percentage,this.ageAbs=e.ageAbs,this.calculator.preselect&&this.isFirst&&"number"===this.opcode&&_(this.value)){const e=null===(t=ms(this.calculator.block,this.value))||void 0===t?void 0:t.slot;e instanceof Ki.Numeric&&this.calculator.preselect(e)}return e.open&&this.open(),this}format(e,t,i,s,o=!1,n){var r;const a=this[e];let l="";if(t&&(t+=" "),i&&(!s||_(a)||!A(a)&&this.allowANS)&&(i=" "+i),_(a))if(G_(a))l="`"+(a.length>1?a.toUpperCase():a)+"`";else{if(!(null===(r=ms(this.calculator.block,a))||void 0===r?void 0:r.label))return"";l="@"+a}else l=A(a)||!n&&!this.allowANS?(o?"**":"")+il.locale.number(A(a)?a:0,"auto",!1)+(o?"**":""):this.isFirst&&this.isSubCalculation?"`ANS` "+ol("block:calculator","of parent calculation"):this.isFirst&&!n&&this.calculator.firstANS?this.calculator.firstANS:"`"+(n||"ANS")+"`";return(t||"")+l+(i||"")}defineEditor(){var e;null===(e=bC.get(this.opcode))||void 0===e||e.editor(this,this.editor)}initOperation(){var e;"calc"===this.opcode&&(null===(e=this.calculator.outcome)||void 0===e||e.hook("OnSlotProperty","synchronous",(e=>{switch(e.property){case"decimal":case"precision":case"separator":case"minimum":case"maximum":case"prefix":case"prefixPlural":case"suffix":case"suffixPlural":Ue(this.outcome,e.property,e.slot[e.property])}}),this))}deleteOperation(){var e;"calc"===this.opcode&&(null===(e=this.calculator.outcome)||void 0===e||e.unhookContext(this),this.calculator.block.slots.delete(this.id,"dynamic"),this.operations.each((e=>e.deleteOperation())))}}V_([hd],bC.prototype,"icon",null),V_([ud],bC.prototype,"name",null),V_([md],bC.prototype,"title",null),V_([bd],bC.prototype,"width",null),V_([gd],bC.prototype,"menu",null),V_([Mi,od("#icon"),od("#name")],bC.prototype,"operator",void 0),V_([Mi,od("#name")],bC.prototype,"opcode",void 0),V_([Mi,od("#name")],bC.prototype,"operations",void 0),V_([Mi,od("#name")],bC.prototype,"description",void 0),V_([Mi],bC.prototype,"reference",void 0),V_([Mi,od("#name")],bC.prototype,"value",void 0),V_([Mi,od("#name")],bC.prototype,"exponent",void 0),V_([Mi,od("#name")],bC.prototype,"cona",void 0),V_([Mi,od("#name")],bC.prototype,"conb",void 0),V_([Mi,od("#name")],bC.prototype,"outa",void 0),V_([Mi,od("#name")],bC.prototype,"outb",void 0),V_([Mi,od("#name")],bC.prototype,"compareMode",void 0),V_([Mi,od("#name")],bC.prototype,"angleUnits",void 0),V_([Mi,od("#name")],bC.prototype,"ageIn",void 0),V_([Mi],bC.prototype,"ageAbs",void 0),V_([Mi],bC.prototype,"ignoreCase",void 0),V_([Mi],bC.prototype,"scores",void 0),V_([Mi,od("#name")],bC.prototype,"min",void 0),V_([Mi,od("#name")],bC.prototype,"max",void 0),V_([Mi,od("#name")],bC.prototype,"divisor",void 0),V_([Mi,od("#name")],bC.prototype,"percentage",void 0),V_([cd],bC.prototype,"defineEditor",null),V_([rd],bC.prototype,"initOperation",null),V_([ld],bC.prototype,"deleteOperation",null);let fC=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Numeric){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:calculator","or")} @${e.id} > ${this.parse(e,this.to)}`;case"defined":return`@${e.id} ${ol("block:calculator","calculated")}`;case"undefined":return`@${e.id} ${ol("block:calculator","not calculated")}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,((e,t)=>il.locale.number(e,t,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:calculator","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:calculator","Calculation is equal to"),value:"equal"},{label:ol("block:calculator","Calculation is not equal to"),value:"not-equal"},{label:ol("block:calculator","Calculation is lower than"),value:"below"},{label:ol("block:calculator","Calculation is higher than"),value:"above"},{label:ol("block:calculator","Calculation is between"),value:"between"},{label:ol("block:calculator","Calculation is not between"),value:"not-between"},{label:ol("block:calculator","Calculation is valid"),value:"defined"},{label:ol("block:calculator","Calculation is not valid"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(t.visible("defined"!==e.value&&"undefined"!==e.value),i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:calculator","If calculation equals");break;case"not-equal":t.title=ol("block:calculator","If calculation not equals");break;case"below":t.title=ol("block:calculator","If calculation is lower than");break;case"above":t.title=ol("block:calculator","If calculation is higher than");break;case"between":t.title=ol("block:calculator","If calculation is between");break;case"not-between":t.title=ol("block:calculator","If calculation is not between")}}))]});const e=(e,t,i)=>{var s;const o=this[e],n=this.slot,r=new rc.Numeric(A(o)?o:0).label(ol("block:calculator","Use fixed number")).precision((null==n?void 0:n.precision)||0).digits((null==n?void 0:n.digits)||0).decimalSign((null==n?void 0:n.decimal)||"").thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||"").prefix((null==n?void 0:n.prefix)||"").prefixPlural((null==n?void 0:n.prefixPlural)||void 0).suffix((null==n?void 0:n.suffix)||"").suffixPlural((null==n?void 0:n.suffixPlural)||void 0).min(null==n?void 0:n.minimum).max(null==n?void 0:n.maximum).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),a=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(o)?o:void 0,!0,null===(s=this.slot)||void 0===s?void 0:s.id),l=new rc.Dropdown(a,_(o)?o:"").label(ol("block:calculator","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:calculator","Number"),value:"number"},{label:ol("block:calculator","Value"),value:"variable",disabled:0===a.length}],_(o)?"variable":"number").on((e=>{r.visible("number"===e.value),l.visible("variable"===e.value),r.isObservable&&r.focus()})),r,l]}).visible(i)},t=e("value",ol("block:calculator","If calculation equals"),"defined"!==this.mode&&"undefined"!==this.mode),i=e("to",ol("block:calculator","And"),"between"===this.mode||"not-between"===this.mode)}};var yC;V_([Mi,od("#name")],fC.prototype,"mode",void 0),V_([Mi,od("#name")],fC.prototype,"value",void 0),V_([Mi,od("#name")],fC.prototype,"to",void 0),V_([cd],fC.prototype,"defineEditor",null),fC=V_([Ia({type:"condition",context:"tripetto-block-calculator",identifier:"tripetto-block-calculator",version:"3.1.2",icon:gC,get label(){return ol("block:calculator","Verify calculation")}})],fC);let vC=yC=class extends Sa{constructor(){super(...arguments),this.allowMarkdown=!1,this.startBlank=!0,this.operations=Rl.of(bC,this)}get block(){return this}get label(){return sl("block:calculator","%2 (%1 operation)","%2 (%1 operations)",this.operations.count,this.type.label)}defineName(){var t;if(!this.node.name&&!this.operations.count){let i=0,s=1;null===(t=this.map)||void 0===t||t.forEach((e=>{if("tripetto-block-calculator"===e.blockTypeIdentifier&&(i++,e.name&&0===e.name.indexOf(yC.label+" "))){const t=G(e.name.substr(yC.label.length+1));t>s&&(s=t+1)}}),"nodes"),this.node.name=yC.label+` ${e.max(s,i)}`}this.outcome.hook("OnSlotProperty","synchronous",(e=>{switch(e.property){case"precision":case"digits":case"decimal":case"separator":case"minimum":case"maximum":case"prefix":case"prefixPlural":case"suffix":case"suffixPlural":this.slots.each((t=>{t instanceof Ki.Numeric&&"dynamic"===t.kind&&Fe(t,e.property,this.outcome[e.property])}))}}),this)}defineSlot(){this.outcome=this.slots.static({type:Ki.Numeric,reference:"calculator",label:this.node.name||ol("block:calculator","Calculation"),exchange:["alias","exportable","precision","digits","decimal","separator","minimum","maximum","prefix","prefixPlural","suffix","suffixPlural"]})}defineEditor(){const e=new rc.Numeric(rc.Numeric.bind(this.outcome,"minimum",void 0)).precision(this.outcome.precision||0).digits(this.outcome.digits||0).decimalSign(this.outcome.decimal||"").thousands(!!this.outcome.separator,this.outcome.separator||"").prefix(this.outcome.prefix||"").prefixPlural(this.outcome.prefixPlural||void 0).suffix(this.outcome.suffix||"").suffixPlural(this.outcome.suffixPlural||void 0).label(ol("block:calculator","Minimum")),t=new rc.Numeric(rc.Numeric.bind(this.outcome,"maximum",void 0)).precision(this.outcome.precision||0).digits(this.outcome.digits||0).decimalSign(this.outcome.decimal||"").thousands(!!this.outcome.separator,this.outcome.separator||"").prefix(this.outcome.prefix||"").prefixPlural(this.outcome.prefixPlural||void 0).suffix(this.outcome.suffix||"").suffixPlural(this.outcome.suffixPlural||void 0).label(ol("block:calculator","Maximum")),i=this.editor.form({controls:[new rc.Notification(ol("block:calculator","Some formatting options were automatically set for you, based on the block you've just selected as initial value."),"success")]}).visible(!1),s=pc("block:calculator");this.editor.form({title:ol("block:calculator","Explanation"),controls:[new rc.Static(ol("block:calculator","Perform a calculation and use the result in your form%1.",s?` ([${ol("block:calculator","learn more")}](${s}))`:"")).markdown()]}),this.editor.option({name:ol("block:calculator","Operations"),collection:xL(this),activated:!0,locked:!0}),this.editor.name(!1,!1,ol("block:calculator","Description"),!1),this.editor.groups.settings();const o=new rc.Dropdown([{optGroup:ol("block:calculator","Decimals")},{label:"#",value:0},{label:"#.#",value:1},{label:"#.##",value:2},{label:"#.###",value:3},{label:"#.####",value:4},{label:"#.#####",value:5},{label:"#.######",value:6},{label:"#.#######",value:7},{label:"#.########",value:8},{optGroup:ol("block:calculator","Digits")},{label:"##",value:-2},{label:"###",value:-3},{label:"####",value:-4},{label:"#####",value:-5},{label:"######",value:-6},{label:"#######",value:-7},{label:"########",value:-8},{label:"#########",value:-9},{label:"##########",value:-10},{label:"###########",value:-11},{label:"############",value:-12},{label:"#############",value:-13},{label:"##############",value:-14},{label:"###############",value:-15},{label:"################",value:-16}],(this.outcome.digits?-this.outcome.digits:this.outcome.precision)||0).on((()=>{this.outcome.precision=o.isFeatureEnabled&&D(o.value)&&o.value>=0?o.value:void 0,this.outcome.digits=o.isFeatureEnabled&&D(o.value)&&o.value<0?-o.value:void 0,e.precision(this.outcome.precision||0),t.precision(this.outcome.precision||0),e.digits(this.outcome.digits||0),t.digits(this.outcome.digits||0),r.disabled(!this.outcome.precision),b.disabled((this.outcome.digits||0)>0)})),n=this.editor.option({name:ol("block:calculator","Format"),form:{title:ol("block:calculator","Format"),controls:[o]},activated:D(this.outcome.precision)||D(this.outcome.digits)}),r=new rc.Dropdown([{label:"#.#",value:"."},{label:"#,#",value:","}],rc.Dropdown.bind(this.outcome,"decimal",void 0)).label(ol("block:calculator","Decimal sign")).disabled(!this.outcome.precision).on((i=>{e.decimalSign(i.isFeatureEnabled&&i.value||""),t.decimalSign(i.isFeatureEnabled&&i.value||"")})),a=new rc.Dropdown([{label:ol("block:calculator","None"),value:void 0},{label:"#,###",value:","},{label:"#.###",value:"."}],rc.Dropdown.bind(this.outcome,"separator",void 0)).label(ol("block:calculator","Thousands separator")).on((i=>{e.thousands(!(!i.isFeatureEnabled||!i.value),i.isFeatureEnabled&&i.value||""),t.thousands(!(!i.isFeatureEnabled||!i.value),i.isFeatureEnabled&&i.value||"")}));this.editor.option({name:ol("block:calculator","Limits"),form:{title:ol("block:calculator","Limits"),controls:[e,t]},activated:D(this.outcome.minimum)||D(this.outcome.maximum)});const l=new rc.Text("singleline",rc.Text.bind(this.outcome,"prefix",void 0)).sanitize(!1).on((i=>{e.prefix(i.isFeatureEnabled&&i.value||""),t.prefix(i.isFeatureEnabled&&i.value||"")})),c=new rc.Text("singleline",rc.Text.bind(this.outcome,"prefixPlural",void 0)).indent(32).sanitize(!1).on((i=>{e.prefixPlural(i.isFeatureEnabled&&i.isObservable&&i.value||void 0),t.prefixPlural(i.isFeatureEnabled&&i.isObservable&&i.value||void 0)})).placeholder(ol("block:calculator","Prefix when value is plural")).visible(_(this.outcome.prefixPlural)),u=new rc.Checkbox(ol("block:calculator","Specify different prefix for plural values"),_(this.outcome.prefixPlural)).on((e=>{l.placeholder(e.isChecked&&ol("block:calculator","Prefix when value is singular")||""),c.visible(e.isChecked)})),h=this.editor.option({name:ol("block:calculator","Prefix"),form:{title:ol("block:calculator","Prefix"),controls:[l,u,c]},activated:_(this.outcome.prefix)}),d=new rc.Text("singleline",rc.Text.bind(this.outcome,"suffix",void 0)).sanitize(!1).on((i=>{e.suffix(i.isFeatureEnabled&&i.value||""),t.suffix(i.isFeatureEnabled&&i.value||"")})),p=new rc.Text("singleline",rc.Text.bind(this.outcome,"suffixPlural",void 0)).indent(32).sanitize(!1).on((i=>{e.suffixPlural(i.isFeatureEnabled&&i.isObservable&&i.value||void 0),t.suffixPlural(i.isFeatureEnabled&&i.isObservable&&i.value||void 0)})).placeholder(ol("block:calculator","Suffix when value is plural")).visible(_(this.outcome.suffixPlural)),m=new rc.Checkbox(ol("block:calculator","Specify different suffix for plural values"),_(this.outcome.suffixPlural)).on((e=>{d.placeholder(e.isChecked&&ol("block:calculator","Suffix when value is singular")||""),p.visible(e.isChecked)})),g=this.editor.option({name:ol("block:calculator","Suffix"),form:{title:ol("block:calculator","Suffix"),controls:[d,m,p]},activated:_(this.outcome.suffix)}),b=this.editor.option({name:ol("block:calculator","Signs"),form:{title:ol("block:calculator","Signs"),controls:[r,a,new rc.Static(ol("block:calculator","**Note:** These signs are used to format the number in de dataset. When the number is displayed in a runner, the appropriate user locale might be applied making it seem like changing these settings has no effect.")).markdown()]},activated:_(this.outcome.separator)||_(this.outcome.decimal),disabled:(this.outcome.digits||0)>0});this.editor.groups.options(),this.editor.visibility(),this.editor.alias(this.outcome),this.editor.exportable(this.outcome),this.preselect=e=>{let t=!1;!e.precision&&!e.digits||n.isActivated||(o.value=e.digits?-e.digits:e.precision,t=!0,n.activate()),!e.decimal&&!e.separator||b.isActivated||(r.value=e.decimal,a.value=e.decimal,t=!0,b.activate()),!e.prefix&&!e.prefixPlural||h.isActivated||(l.value=e.prefix||"",t=!0,e.prefixPlural&&(c.value=e.prefixPlural,u.check()),h.activate()),!e.suffix&&!e.suffixPlural||g.isActivated||(d.value=e.suffix||"",t=!0,e.suffixPlural&&(p.value=e.suffixPlural,m.check()),g.activate()),t&&(i.visible(!0),Le((()=>{i.visible(!1)}),1e4)),this.preselect=void 0}}defineCondition(){const e=(e,t)=>ee([{mode:"equal",label:ol("block:calculator","Calculation is equal to")},{mode:"not-equal",label:ol("block:calculator","Calculation is not equal to")},{mode:"below",label:ol("block:calculator","Calculation is lower than")},{mode:"above",label:ol("block:calculator","Calculation is higher than")},{mode:"between",label:ol("block:calculator","Calculation is between")},{mode:"not-between",label:ol("block:calculator","Calculation is not between")},{mode:"defined",label:ol("block:calculator","Calculation is valid")},{mode:"undefined",label:ol("block:calculator","Calculation is not valid")}],(i=>{e.template({condition:fC,label:i.label,autoOpen:"defined"!==i.mode&&"undefined"!==i.mode,props:{slot:t,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}));this.slots.count>1?this.slots.each((t=>{t.label&&e(this.conditions.group(t.label),t)})):e(this.conditions,this.outcome)}};function MC(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}V_([Mi,od("#name")],vC.prototype,"operations",void 0),V_([Ts],vC.prototype,"defineName",null),V_([Ps,yd],vC.prototype,"defineSlot",null),V_([cd],vC.prototype,"defineEditor",null),V_([nd],vC.prototype,"defineCondition",null),vC=yC=V_([Ia({type:"node",identifier:"tripetto-block-calculator",version:"3.1.2",icon:gC,get label(){return ol("block:calculator","Calculator")},kind:"headless"})],vC);var wC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE3LjUgMjBoLTE2Qy42NzMgMjAgMCAxOS4zMjcgMCAxOC41di0xNkMwIDEuNjczLjY3MyAxIDEuNSAxaDE2Yy44MjcgMCAxLjUuNjczIDEuNSAxLjV2MTZjMCAuODI3LS42NzMgMS41LTEuNSAxLjV6TTEuNSAyYS41LjUgMCAwIDAtLjUuNXYxNmEuNS41IDAgMCAwIC41LjVoMTZhLjUuNSAwIDAgMCAuNS0uNXYtMTZhLjUuNSAwIDAgMC0uNS0uNWgtMTZ6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjxwYXRoIGQ9Ik03LjUgMTQuNWEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTMtM2EuNS41IDAgMCAxIC43MDctLjcwN2wyLjY0NiAyLjY0NiA2LjY0Ni02LjY0NmEuNS41IDAgMCAxIC43MDcuNzA3bC03IDdhLjQ5OC40OTggMCAwIDEtLjM1NC4xNDZ6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",xC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE3LjUgMjBoLTE2Qy42NzMgMjAgMCAxOS4zMjcgMCAxOC41di0xNkMwIDEuNjczLjY3MyAxIDEuNSAxaDE2Yy44MjcgMCAxLjUuNjczIDEuNSAxLjV2MTZjMCAuODI3LS42NzMgMS41LTEuNSAxLjV6TTEuNSAyYS41LjUgMCAwIDAtLjUuNXYxNmEuNS41IDAgMCAwIC41LjVoMTZhLjUuNSAwIDAgMCAuNS0uNXYtMTZhLjUuNSAwIDAgMC0uNS0uNWgtMTZ6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==";let SC=class extends Zs{constructor(){super(...arguments),this.checked=!0}get icon(){return this.checked?wC:xC}get name(){return this.checked?this.slot instanceof Ki.Boolean&&this.slot.labelForTrue||ol("block:checkbox","Checked"):this.slot instanceof Ki.Boolean&&this.slot.labelForFalse||ol("block:checkbox","Not checked")}defineEditor(){var e,t;(null===(e=this.node)||void 0===e?void 0:e.label)&&this.editor.form({controls:[new rc.Checkbox(null===(t=this.node)||void 0===t?void 0:t.label,rc.Checkbox.bind(this,"checked",!0))]})}};MC([Mi,od("#name")],SC.prototype,"checked",void 0),MC([cd],SC.prototype,"defineEditor",null),SC=MC([Ia({type:"condition",context:"tripetto-block-checkbox",identifier:"tripetto-block-checkbox",version:"5.1.1",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2LjIzIDMuMzA3Yy0uMzk2LS4yNjgtLjk0OS0uNTA0LTEuNjQzLS43MDJDMTMuMjIxIDIuMjE1IDExLjQxNSAyIDkuNSAycy0zLjcyMi4yMTUtNS4wODcuNjA1Yy0uNjk0LjE5OC0xLjI0Ni40MzQtMS42NDMuNzAyLS42MzcuNDMtLjc3Ljg4Ni0uNzcgMS4xOTNWNWMwIC40MjguMzIxIDEuMTMzLjYzOSAxLjYwOWw0Ljg5MSA3LjMzNmMuMjUxLjM3Ni40NzEgMS4xMDMuNDcxIDEuNTU1djNhLjUuNSAwIDAgMCAuNzI0LjQ0N2wyLTFhLjUuNSAwIDAgMCAuMjc2LS40NDd2LTJjMC0uNDUyLjIyLTEuMTc5LjQ3MS0xLjU1NWw0Ljg5MS03LjMzNmMuMzE3LS40NzYuNjM5LTEuMTgyLjYzOS0xLjYwOXYtLjVjMC0uMzA3LS4xMzQtLjc2My0uNzctMS4xOTN6bS0xMS41NDIuMjZDNS45NjcgMy4yMDIgNy42NzYgMyA5LjUgM3MzLjUzNC4yMDEgNC44MTIuNTY3QzE1LjY5IDMuOTYxIDE2IDQuMzgzIDE2IDQuNXMtLjMxLjU0LTEuNjg4LjkzM0MxMy4wMzMgNS43OTggMTEuMzI0IDYgOS41IDZzLTMuNTM0LS4yMDEtNC44MTItLjU2N0MzLjMxIDUuMDM5IDMgNC42MTcgMyA0LjVzLjMxLS41NCAxLjY4OC0uOTMzem01Ljk1MSA5LjgyNGMtLjM1OC41MzctLjYzOSAxLjQ2NC0uNjM5IDIuMTA5djEuNjkxbC0xIC41VjE1LjVjMC0uNjQ2LS4yODEtMS41NzItLjYzOS0yLjEwOWwtNC44OC03LjMyYy4yNzQuMTE3LjU4NS4yMjYuOTMyLjMyNEM1Ljc3OSA2Ljc4NSA3LjU4NSA3IDkuNSA3czMuNzIyLS4yMTUgNS4wODctLjYwNWMuMzQ2LS4wOTkuNjU4LS4yMDcuOTMyLS4zMjVsLTQuODggNy4zMnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",get label(){return ol("block:checkbox","Checkbox state")}})],SC);var IC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgOEgxM1YzLjVhLjUuNSAwIDAgMC0uNS0uNWgtNmEuNS41IDAgMCAwLS41LjVWNkguNWEuNS41IDAgMCAwLS41LjV2MTBhLjUuNSAwIDAgMCAuNS41aDE4YS41LjUgMCAwIDAgLjUtLjV2LThhLjUuNSAwIDAgMC0uNS0uNXpNNyA0aDV2MTJIN1Y0ek0xIDdoNXY5SDFWN3ptMTcgOWgtNVY5aDV2N3oiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTkuNSAxMGEuNS41IDAgMCAxLS41LS41di00YS41LjUgMCAwIDEgMSAwdjRhLjUuNSAwIDAgMS0uNS41em0tNSAzaC0yYS41LjUgMCAwIDEtLjUtLjV2LTJhLjUuNSAwIDAgMSAuNS0uNUg0VjlIMi41YS41LjUgMCAwIDEgMC0xaDJhLjUuNSAwIDAgMSAuNS41djJhLjUuNSAwIDAgMS0uNS41SDN2MWgxLjVhLjUuNSAwIDAgMSAwIDF6bTEyLTNoLTJhLjUuNSAwIDAgMCAwIDFIMTZ2MWgtMS41YS41LjUgMCAwIDAgMCAxSDE2djFoLTEuNWEuNS41IDAgMCAwIDAgMWgyYS41LjUgMCAwIDAgLjUtLjV2LTRhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";let kC=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Numeric){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:checkbox","or")} @${e.id} > ${this.parse(e,this.to)}`;case"defined":return`@${e.id} ${ol("block:checkbox","calculated")}`;case"undefined":return`@${e.id} ${ol("block:checkbox","not calculated")}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,((e,t)=>il.locale.number(e,t,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:checkbox","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:checkbox","Score is equal to"),value:"equal"},{label:ol("block:checkbox","Score is not equal to"),value:"not-equal"},{label:ol("block:checkbox","Score is lower than"),value:"below"},{label:ol("block:checkbox","Score is higher than"),value:"above"},{label:ol("block:checkbox","Score is between"),value:"between"},{label:ol("block:checkbox","Score is not between"),value:"not-between"},{label:ol("block:checkbox","Score is calculated"),value:"defined"},{label:ol("block:checkbox","Score is not calculated"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(t.visible("defined"!==e.value&&"undefined"!==e.value),i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:checkbox","If score equals");break;case"not-equal":t.title=ol("block:checkbox","If score not equals");break;case"below":t.title=ol("block:checkbox","If score is lower than");break;case"above":t.title=ol("block:checkbox","If score is higher than");break;case"between":t.title=ol("block:checkbox","If score is between");break;case"not-between":t.title=ol("block:checkbox","If score is not between")}}))]});const e=(e,t,i)=>{var s;const o=this[e],n=this.slot,r=new rc.Numeric(A(o)?o:0).label(ol("block:checkbox","Use fixed number")).precision((null==n?void 0:n.precision)||0).digits((null==n?void 0:n.digits)||0).decimalSign((null==n?void 0:n.decimal)||"").thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||"").prefix((null==n?void 0:n.prefix)||"").prefixPlural((null==n?void 0:n.prefixPlural)||void 0).suffix((null==n?void 0:n.suffix)||"").suffixPlural((null==n?void 0:n.suffixPlural)||void 0).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),a=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(o)?o:void 0,!0,null===(s=this.slot)||void 0===s?void 0:s.id),l=new rc.Dropdown(a,_(o)?o:"").label(ol("block:checkbox","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:checkbox","Number"),value:"number"},{label:ol("block:checkbox","Value"),value:"variable",disabled:0===a.length}],_(o)?"variable":"number").on((e=>{r.visible("number"===e.value),l.visible("variable"===e.value),r.isObservable&&r.focus()})),r,l]}).visible(i)},t=e("value",ol("block:checkbox","If score equals"),"defined"!==this.mode&&"undefined"!==this.mode),i=e("to",ol("block:checkbox","And"),"between"===this.mode||"not-between"===this.mode)}};MC([Mi,od("#name")],kC.prototype,"mode",void 0),MC([Mi,od("#name")],kC.prototype,"value",void 0),MC([Mi,od("#name")],kC.prototype,"to",void 0),MC([cd],kC.prototype,"defineEditor",null),kC=MC([Ia({type:"condition",context:"tripetto-block-checkbox",identifier:"tripetto-block-checkbox:score",version:"5.1.1",icon:IC,get label(){return ol("block:checkbox","Verify score")}})],kC);let NC=class extends Sa{get calculator(){return{checked:{scores:[{reference:!0,score:this.scoreForTrue},{reference:!1,score:this.scoreForFalse}]}}}defineSlot(){this.checkboxSlot=this.slots.static({type:Ki.Boolean,reference:"checked",label:ol("block:checkbox","Checkbox"),exchange:["required","alias","exportable","labelForTrue","labelForFalse"]}),this.checkboxSlot.labelForTrue||(this.checkboxSlot.labelForTrue=ol("block:checkbox","Checked")),this.checkboxSlot.labelForFalse||(this.checkboxSlot.labelForFalse=ol("block:checkbox","Not checked"))}defineEditor(){this.editor.name(!1,!1),this.editor.description(),this.editor.placeholder(),this.editor.explanation(),this.editor.groups.options(),this.editor.required(this.checkboxSlot,ol("block:checkbox","Checkbox needs to be checked")),this.editor.visibility();const e=ol("block:checkbox","Checked"),t=ol("block:checkbox","Not checked"),i=new rc.Numeric(rc.Numeric.bind(this,"scoreForTrue",void 0)).label(this.checkboxSlot.labelForTrue||e),s=new rc.Numeric(rc.Numeric.bind(this,"scoreForFalse",void 0)).label(this.checkboxSlot.labelForFalse||t);this.editor.option({name:ol("block:checkbox","Labels"),form:{title:ol("block:checkbox","Labels"),controls:[new rc.Text("singleline",this.checkboxSlot.labelForTrue!==e?this.checkboxSlot.labelForTrue:void 0).placeholder(e).on((t=>{i.label(this.checkboxSlot.labelForTrue=t.isFeatureEnabled&&t.value||e)})),new rc.Text("singleline",this.checkboxSlot.labelForFalse!==t?this.checkboxSlot.labelForFalse:void 0).placeholder(t).on((e=>{s.label(this.checkboxSlot.labelForFalse=e.isFeatureEnabled&&e.value||t)})),new rc.Static(ol("block:checkbox","These labels will be used in the dataset and override the default values %1 and %2.",`**${e}**`,`**${t}**`)).markdown()]},activated:this.checkboxSlot.labelForTrue!==e||this.checkboxSlot.labelForFalse!==t}),this.editor.scores({target:this,scores:[i,s]}),this.editor.alias(this.checkboxSlot),this.editor.exportable(this.checkboxSlot)}defineConditions(){ee([{checked:!0,label:this.checkboxSlot.labelForTrue||ol("block:checkbox","Checkbox is checked"),icon:wC},{checked:!1,label:this.checkboxSlot.labelForFalse||ol("block:checkbox","Checkbox is not checked"),icon:xC}],(e=>{this.conditions.template({condition:SC,label:e.label,icon:e.icon,burst:!0,props:{slot:this.checkboxSlot,checked:e.checked}})}));const e=this.slots.select("score","feature");if(e&&e.label){const t=this.conditions.group(e.label,IC,!1,!0);ee([{mode:"equal",label:ol("block:checkbox","Score is equal to")},{mode:"not-equal",label:ol("block:checkbox","Score is not equal to")},{mode:"below",label:ol("block:checkbox","Score is lower than")},{mode:"above",label:ol("block:checkbox","Score is higher than")},{mode:"between",label:ol("block:checkbox","Score is between")},{mode:"not-between",label:ol("block:checkbox","Score is not between")},{mode:"defined",label:ol("block:checkbox","Score is calculated")},{mode:"undefined",label:ol("block:checkbox","Score is not calculated")}],(i=>{t.template({condition:kC,label:i.label,autoOpen:"defined"!==i.mode&&"undefined"!==i.mode,props:{slot:e,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}))}}};function _C(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}MC([Mi("number","optional")],NC.prototype,"scoreForTrue",void 0),MC([Mi("number","optional")],NC.prototype,"scoreForFalse",void 0),MC([ed("calculator")],NC.prototype,"calculator",null),MC([Ps],NC.prototype,"defineSlot",null),MC([cd],NC.prototype,"defineEditor",null),MC([nd],NC.prototype,"defineConditions",null),NC=MC([Ia({type:"node",identifier:"tripetto-block-checkbox",version:"5.1.1",icon:wC,alias:"checkbox",get label(){return ol("block:checkbox","Checkbox (single)")}})],NC);class LC extends Rl.Item{constructor(){super(...arguments),this.name=""}defineSlot(){const e=this.name&&Us(this.name,ts.MarkdownFeatures.Formatting|ts.MarkdownFeatures.Hyperlinks)||void 0,t=this.ref.slots.dynamic({type:Ki.Boolean,reference:this.id,label:ol("block:checkboxes","Checkbox"),sequence:this.index,name:e,alias:this.value,required:this.ref.required,exportable:"concatenate"!==this.ref.format&&this.ref.exportable,pipeable:{label:ol("block:checkboxes","Checkbox"),content:this.name!==e?{string:e||"",markdown:this.name}:"name",alias:this.ref.alias,legacy:"Checkbox"}});t.labelForTrue=this.labelForTrue||this.ref.labelForTrue||ol("block:checkboxes","Checked"),t.labelForFalse=this.labelForFalse||this.ref.labelForFalse||ol("block:checkboxes","Not checked")}deleteSlot(){this.ref.slots.delete(this.id,"dynamic")}defineEditor(){this.editor.option({name:ol("block:checkboxes","Name"),form:{title:ol("block:checkboxes","Checkbox name"),controls:[new rc.Text("singleline",rc.Text.bind(this,"name","")).action("@",Ic(this)).autoFocus().autoSelect().enter(this.editor.close).escape(this.editor.close)]},locked:!0}),this.editor.option({name:ol("block:checkboxes","Description"),form:{title:ol("block:checkboxes","Description"),controls:[new rc.Text("multiline",rc.Text.bind(this,"description",void 0)).action("@",Ic(this))]},activated:_(this.description)}),this.editor.group(ol("block:checkboxes","Options")),this.editor.option({name:ol("block:checkboxes","Exclusivity"),form:{title:ol("block:checkboxes","Exclusivity"),controls:[new rc.Checkbox(ol("block:checkboxes","Uncheck all other checkboxes when checked"),rc.Checkbox.bind(this,"exclusive",void 0,!0))]},activated:T(this.exclusive)});const e=ol("block:checkboxes","Checked"),t=ol("block:checkboxes","Not checked");this.editor.option({name:ol("block:checkboxes","Labels"),form:{title:ol("block:checkboxes","Labels"),controls:[new rc.Text("singleline",rc.Text.bind(this,"labelForTrue",void 0)).placeholder(e),new rc.Text("singleline",rc.Text.bind(this,"labelForFalse",void 0)).placeholder(t),new rc.Static(ol("block:checkboxes","These labels will be used in the dataset and override the default values %1 and %2.",`**${e}**`,`**${t}**`)).markdown()]},activated:_(this.labelForTrue)||_(this.labelForFalse)}),this.editor.option({name:ol("block:checkboxes","Identifier"),form:{title:ol("block:checkboxes","Identifier"),controls:[new rc.Text("singleline",rc.Text.bind(this,"value",void 0)),new rc.Static(ol("block:checkboxes","If a checkbox identifier is set, this identifier will be used instead of the label."))]},activated:_(this.value)});const i=this.ref.slots.select("score","feature");this.editor.option({name:ol("block:checkboxes","Score"),form:{title:ol("block:checkboxes","Score"),controls:[new rc.Numeric(rc.Numeric.bind(this,"score",void 0)).precision((null==i?void 0:i.precision)||0).digits((null==i?void 0:i.digits)||0).decimalSign((null==i?void 0:i.decimal)||"").thousands(!!(null==i?void 0:i.separator),(null==i?void 0:i.separator)||"").prefix((null==i?void 0:i.prefix)||"").prefixPlural((null==i?void 0:i.prefixPlural)||void 0).suffix((null==i?void 0:i.suffix)||"").suffixPlural((null==i?void 0:i.suffixPlural)||void 0)]},activated:!0,locked:!!i,disabled:!i})}}_C([Mi("string"),ud],LC.prototype,"name",void 0),_C([Mi("string","optional")],LC.prototype,"description",void 0),_C([Mi("string","optional"),dd],LC.prototype,"value",void 0),_C([Mi("string","optional"),od("#refresh")],LC.prototype,"labelForTrue",void 0),_C([Mi("string","optional"),od("#refresh")],LC.prototype,"labelForFalse",void 0),_C([Mi("number","optional"),pd],LC.prototype,"score",void 0),_C([Mi("boolean","optional"),od("#name")],LC.prototype,"exclusive",void 0),_C([rd,vd,yd,fd],LC.prototype,"defineSlot",null),_C([ld],LC.prototype,"deleteSlot",null),_C([cd],LC.prototype,"defineEditor",null);var CC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE3LjUgMjBoLTE2Qy42NzMgMjAgMCAxOS4zMjcgMCAxOC41di0xNkMwIDEuNjczLjY3MyAxIDEuNSAxaDE2Yy44MjcgMCAxLjUuNjczIDEuNSAxLjV2MTZjMCAuODI3LS42NzMgMS41LTEuNSAxLjV6TTEuNSAyYS41LjUgMCAwIDAtLjUuNXYxNmEuNS41IDAgMCAwIC41LjVoMTZhLjUuNSAwIDAgMCAuNS0uNXYtMTZhLjUuNSAwIDAgMC0uNS0uNWgtMTZ6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjxwYXRoIGQ9Ik03LjUgMTQuNWEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTMtM2EuNS41IDAgMCAxIC43MDctLjcwN2wyLjY0NiAyLjY0NiA2LjY0Ni02LjY0NmEuNS41IDAgMCAxIC43MDcuNzA3bC03IDdhLjQ5OC40OTggMCAwIDEtLjM1NC4xNDZ6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",DC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE3LjUgMjBoLTE2Qy42NzMgMjAgMCAxOS4zMjcgMCAxOC41di0xNkMwIDEuNjczLjY3MyAxIDEuNSAxaDE2Yy44MjcgMCAxLjUuNjczIDEuNSAxLjV2MTZjMCAuODI3LS42NzMgMS41LTEuNSAxLjV6TTEuNSAyYS41LjUgMCAwIDAtLjUuNXYxNmEuNS41IDAgMCAwIC41LjVoMTZhLjUuNSAwIDAgMCAuNS0uNXYtMTZhLjUuNSAwIDAgMC0uNS0uNWgtMTZ6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==";let AC=class extends Zs{constructor(){super(...arguments),this.checked=!0}get icon(){return this.checked?CC:DC}get name(){var e;return Us((null===(e=this.checkbox)||void 0===e?void 0:e.name)||"")||this.type.label}defineEditor(){var e;this.editor.form({controls:[new rc.Checkbox(Us((null===(e=this.checkbox)||void 0===e?void 0:e.name)||"")||ol("block:checkboxes","Checkbox is checked"),rc.Checkbox.bind(this,"checked",!0))]})}};_C([od("#name"),ad("#checkboxes")],AC.prototype,"checkbox",void 0),_C([od("#icon"),Mi],AC.prototype,"checked",void 0),_C([cd],AC.prototype,"defineEditor",null),AC=_C([Ia({type:"condition",context:"tripetto-block-checkboxes",identifier:"tripetto-block-checkboxes",version:"6.1.3",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2LjIzIDMuMzA3Yy0uMzk2LS4yNjgtLjk0OS0uNTA0LTEuNjQzLS43MDJDMTMuMjIxIDIuMjE1IDExLjQxNSAyIDkuNSAycy0zLjcyMi4yMTUtNS4wODcuNjA1Yy0uNjk0LjE5OC0xLjI0Ni40MzQtMS42NDMuNzAyLS42MzcuNDMtLjc3Ljg4Ni0uNzcgMS4xOTNWNWMwIC40MjguMzIxIDEuMTMzLjYzOSAxLjYwOWw0Ljg5MSA3LjMzNmMuMjUxLjM3Ni40NzEgMS4xMDMuNDcxIDEuNTU1djNhLjUuNSAwIDAgMCAuNzI0LjQ0N2wyLTFhLjUuNSAwIDAgMCAuMjc2LS40NDd2LTJjMC0uNDUyLjIyLTEuMTc5LjQ3MS0xLjU1NWw0Ljg5MS03LjMzNmMuMzE3LS40NzYuNjM5LTEuMTgyLjYzOS0xLjYwOXYtLjVjMC0uMzA3LS4xMzQtLjc2My0uNzctMS4xOTN6bS0xMS41NDIuMjZDNS45NjcgMy4yMDIgNy42NzYgMyA5LjUgM3MzLjUzNC4yMDEgNC44MTIuNTY3QzE1LjY5IDMuOTYxIDE2IDQuMzgzIDE2IDQuNXMtLjMxLjU0LTEuNjg4LjkzM0MxMy4wMzMgNS43OTggMTEuMzI0IDYgOS41IDZzLTMuNTM0LS4yMDEtNC44MTItLjU2N0MzLjMxIDUuMDM5IDMgNC42MTcgMyA0LjVzLjMxLS41NCAxLjY4OC0uOTMzem01Ljk1MSA5LjgyNGMtLjM1OC41MzctLjYzOSAxLjQ2NC0uNjM5IDIuMTA5djEuNjkxbC0xIC41VjE1LjVjMC0uNjQ2LS4yODEtMS41NzItLjYzOS0yLjEwOWwtNC44OC03LjMyYy4yNzQuMTE3LjU4NS4yMjYuOTMyLjMyNEM1Ljc3OSA2Ljc4NSA3LjU4NSA3IDkuNSA3czMuNzIyLS4yMTUgNS4wODctLjYwNWMuMzQ2LS4wOTkuNjU4LS4yMDcuOTMyLS4zMjVsLTQuODggNy4zMnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",get label(){return ol("block:checkboxes","Checkbox state")}})],AC);let jC=class extends Zs{};jC=_C([Ia({type:"condition",context:"tripetto-block-checkboxes",identifier:"tripetto-block-checkboxes:unchecked",version:"6.1.3",icon:DC,get label(){return ol("block:checkboxes","All checkboxes unchecked")}})],jC);var TC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgOEgxM1YzLjVhLjUuNSAwIDAgMC0uNS0uNWgtNmEuNS41IDAgMCAwLS41LjVWNkguNWEuNS41IDAgMCAwLS41LjV2MTBhLjUuNSAwIDAgMCAuNS41aDE4YS41LjUgMCAwIDAgLjUtLjV2LThhLjUuNSAwIDAgMC0uNS0uNXpNNyA0aDV2MTJIN1Y0ek0xIDdoNXY5SDFWN3ptMTcgOWgtNVY5aDV2N3oiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTkuNSAxMGEuNS41IDAgMCAxLS41LS41di00YS41LjUgMCAwIDEgMSAwdjRhLjUuNSAwIDAgMS0uNS41em0tNSAzaC0yYS41LjUgMCAwIDEtLjUtLjV2LTJhLjUuNSAwIDAgMSAuNS0uNUg0VjlIMi41YS41LjUgMCAwIDEgMC0xaDJhLjUuNSAwIDAgMSAuNS41djJhLjUuNSAwIDAgMS0uNS41SDN2MWgxLjVhLjUuNSAwIDAgMSAwIDF6bTEyLTNoLTJhLjUuNSAwIDAgMCAwIDFIMTZ2MWgtMS41YS41LjUgMCAwIDAgMCAxSDE2djFoLTEuNWEuNS41IDAgMCAwIDAgMWgyYS41LjUgMCAwIDAgLjUtLjV2LTRhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";let zC=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Numeric){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:checkboxes","or")} @${e.id} > ${this.parse(e,this.to)}`;case"defined":return`@${e.id} ${ol("block:checkboxes","calculated")}`;case"undefined":return`@${e.id} ${ol("block:checkboxes","not calculated")}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,((e,t)=>il.locale.number(e,t,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:checkboxes","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:checkboxes","Score is equal to"),value:"equal"},{label:ol("block:checkboxes","Score is not equal to"),value:"not-equal"},{label:ol("block:checkboxes","Score is lower than"),value:"below"},{label:ol("block:checkboxes","Score is higher than"),value:"above"},{label:ol("block:checkboxes","Score is between"),value:"between"},{label:ol("block:checkboxes","Score is not between"),value:"not-between"},{label:ol("block:checkboxes","Score is calculated"),value:"defined"},{label:ol("block:checkboxes","Score is not calculated"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(t.visible("defined"!==e.value&&"undefined"!==e.value),i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:checkboxes","If score equals");break;case"not-equal":t.title=ol("block:checkboxes","If score not equals");break;case"below":t.title=ol("block:checkboxes","If score is lower than");break;case"above":t.title=ol("block:checkboxes","If score is higher than");break;case"between":t.title=ol("block:checkboxes","If score is between");break;case"not-between":t.title=ol("block:checkboxes","If score is not between")}}))]});const e=(e,t,i)=>{var s;const o=this[e],n=this.slot,r=new rc.Numeric(A(o)?o:0).label(ol("block:checkboxes","Use fixed number")).precision((null==n?void 0:n.precision)||0).digits((null==n?void 0:n.digits)||0).decimalSign((null==n?void 0:n.decimal)||"").thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||"").prefix((null==n?void 0:n.prefix)||"").prefixPlural((null==n?void 0:n.prefixPlural)||void 0).suffix((null==n?void 0:n.suffix)||"").suffixPlural((null==n?void 0:n.suffixPlural)||void 0).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),a=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(o)?o:void 0,!0,null===(s=this.slot)||void 0===s?void 0:s.id),l=new rc.Dropdown(a,_(o)?o:"").label(ol("block:checkboxes","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:checkboxes","Number"),value:"number"},{label:ol("block:checkboxes","Value"),value:"variable",disabled:0===a.length}],_(o)?"variable":"number").on((e=>{r.visible("number"===e.value),l.visible("variable"===e.value),r.isObservable&&r.focus()})),r,l]}).visible(i)},t=e("value",ol("block:checkboxes","If score equals"),"defined"!==this.mode&&"undefined"!==this.mode),i=e("to",ol("block:checkboxes","And"),"between"===this.mode||"not-between"===this.mode)}};_C([Mi,od("#name")],zC.prototype,"mode",void 0),_C([Mi,od("#name")],zC.prototype,"value",void 0),_C([Mi,od("#name")],zC.prototype,"to",void 0),_C([cd],zC.prototype,"defineEditor",null),zC=_C([Ia({type:"condition",context:"tripetto-block-checkboxes",identifier:"tripetto-block-checkboxes:score",version:"6.1.3",icon:TC,get label(){return ol("block:checkboxes","Verify score")}})],zC);var EC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTIgNmEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDZMNi4xNDUuNjQ3YS41LjUgMCAwIDEgLjcwNy43MDdsLTQuNSA0LjVBLjQ5OC40OTggMCAwIDEgMS45OTggNnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXpNMiAxM2EuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDYgNC4xNDYtNC4xNDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNC41IDQuNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXpNMiAyMGEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDYgNC4xNDYtNC4xNDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNC41IDQuNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";let OC=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Number){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:checkboxes","or")} @${e.id} > ${this.parse(e,this.to)}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,(e=>il.locale.number(e,0,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:checkboxes","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:checkboxes","Counter is equal to"),value:"equal"},{label:ol("block:checkboxes","Counter is not equal to"),value:"not-equal"},{label:ol("block:checkboxes","Counter is lower than"),value:"below"},{label:ol("block:checkboxes","Counter is higher than"),value:"above"},{label:ol("block:checkboxes","Counter is between"),value:"between"},{label:ol("block:checkboxes","Counter is not between"),value:"not-between"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:checkboxes","If counter equals");break;case"not-equal":t.title=ol("block:checkboxes","If counter not equals");break;case"below":t.title=ol("block:checkboxes","If counter is lower than");break;case"above":t.title=ol("block:checkboxes","If counter is higher than");break;case"between":t.title=ol("block:checkboxes","If counter is between");break;case"not-between":t.title=ol("block:checkboxes","If counter is not between")}}))]});const e=(e,t)=>{var i;const s=this[e],o=new rc.Numeric(A(s)?s:0).label(ol("block:checkboxes","Use fixed number")).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),n=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(s)?s:void 0,!0,null===(i=this.slot)||void 0===i?void 0:i.id),r=new rc.Dropdown(n,_(s)?s:"").label(ol("block:checkboxes","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:checkboxes","Number"),value:"number"},{label:ol("block:checkboxes","Value"),value:"variable",disabled:0===n.length}],_(s)?"variable":"number").on((e=>{o.visible("number"===e.value),r.visible("variable"===e.value),o.isObservable&&o.focus()})),o,r]})},t=e("value",ol("block:checkboxes","If counter equals")),i=e("to",ol("block:checkboxes","And"))}};_C([Mi,od("#name")],OC.prototype,"mode",void 0),_C([Mi,od("#name")],OC.prototype,"value",void 0),_C([Mi,od("#name")],OC.prototype,"to",void 0),_C([cd],OC.prototype,"defineEditor",null),OC=_C([Ia({type:"condition",context:"tripetto-block-checkboxes",identifier:"tripetto-block-checkboxes:counter",version:"6.1.3",icon:EC,get label(){return ol("block:checkboxes","Verify counter")}})],OC);let PC=class extends Sa{constructor(){super(...arguments),this.checkboxes=Rl.of(LC,this)}get label(){return sl("block:checkboxes","%2 (%1 checkbox)","%2 (%1 checkboxes)",this.checkboxes.count,this.type.label)}defineSlot(){this.slots.feature({type:Ki.Number,reference:"counter",label:ol("block:checkboxes","Counter"),exportable:!1}),"concatenate"===this.format||"both"===this.format?this.slots.feature({type:Ki.Text,reference:"concatenation",label:ol("block:checkboxes","Text value"),exportable:this.exportable,alias:this.alias}):this.slots.delete("concatenation","feature")}defineEditor(){this.editor.name(),this.editor.description(),this.editor.explanation();const e=this.editor.collection({collection:this.checkboxes,title:ol("block:checkboxes","Checkboxes"),icon:CC,placeholder:ol("block:checkboxes","Unnamed checkbox"),sorting:"manual",autoOpen:!0,allowVariables:!0,allowImport:!0,allowExport:!0,allowDedupe:!0,showAliases:!0,markdown:ts.MarkdownFeatures.Formatting|ts.MarkdownFeatures.Hyperlinks,indicator:e=>e.exclusive&&ol("block:checkboxes","Exclusive").toUpperCase()||void 0,emptyMessage:ol("block:checkboxes","Click the + button to add a checkbox...")});this.editor.groups.settings();const t=new rc.Numeric(rc.Numeric.bind(this,"min",void 0)).min(1).max(this.max).visible(D(this.min)).indent(32).width(75).on((()=>{i.min(this.min||1)})),i=new rc.Numeric(rc.Numeric.bind(this,"max",void 0)).min(this.min||1).visible(D(this.max)).indent(32).width(75).on((()=>{t.max(this.max)}));this.editor.option({name:ol("block:checkboxes","Limits"),form:{title:ol("block:checkboxes","Limits"),controls:[new rc.Checkbox(ol("block:checkboxes","Minimum number of selected checkboxes"),D(this.min)).on((e=>{t.visible(e.isChecked)})),t,new rc.Checkbox(ol("block:checkboxes","Maximum number of selected checkboxes"),D(this.max)).on((e=>{i.visible(e.isChecked)})),i]},activated:D(this.max)||D(this.min)}),this.editor.option({name:ol("block:checkboxes","Randomization"),form:{title:ol("block:checkboxes","Randomization"),controls:[new rc.Checkbox(ol("block:checkboxes","Randomize the checkboxes (using [Fisher-Yates shuffle](%1))","https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle"),rc.Checkbox.bind(this,"randomize",void 0,!0)).markdown()]},activated:T(this.randomize)}),this.editor.groups.options(),this.editor.required(this),this.editor.visibility();const s=ol("block:checkboxes","Checked"),o=ol("block:checkboxes","Not checked");this.editor.option({name:ol("block:checkboxes","Labels"),form:{title:ol("block:checkboxes","Labels"),controls:[new rc.Text("singleline",rc.Text.bind(this,"labelForTrue",void 0)).placeholder(s),new rc.Text("singleline",rc.Text.bind(this,"labelForFalse",void 0)).placeholder(o),new rc.Static(ol("block:checkboxes","These labels will be used in the dataset and override the default values %1 and %2.",`**${s}**`,`**${o}**`)).markdown()]},activated:_(this.labelForTrue)||_(this.labelForFalse)}),this.editor.scores({target:this,collection:e,description:ol("block:checkboxes","Generates a score based on the selected checkboxes. Open the settings panel for each checkbox to set the individual score for that checkbox.")}),this.editor.alias(this);const n=new rc.Text("singleline",rc.Text.bind(this,"formatSeparatorCustom",void 0)).visible("custom"===this.formatSeparator).sanitize(!1).width(200).label(ol("block:checkboxes","Use this separator:")),r=new rc.Group([new rc.Dropdown([{label:ol("block:checkboxes","Comma separated"),value:"comma"},{label:ol("block:checkboxes","Space separated"),value:"space"},{label:ol("block:checkboxes","List on multiple lines"),value:"list"},{label:ol("block:checkboxes","Bulleted list"),value:"bullets"},{label:ol("block:checkboxes","Numbered list"),value:"numbers"},{label:ol("block:checkboxes","Language sensitive conjunction (_, _, and _)"),value:"conjunction"},{label:ol("block:checkboxes","Language sensitive disjunction (_, _, or _)"),value:"disjunction"},{label:ol("block:checkboxes","Custom separator"),value:"custom"}],rc.Radiobutton.bind(this,"formatSeparator",void 0,"comma")).label(ol("block:checkboxes","How to separate the selected checkboxes:")).on((e=>{n.visible("custom"===e.value)})),n]).visible("concatenate"===this.format||"both"===this.format);this.editor.option({name:ol("block:checkboxes","Data format"),form:{title:ol("block:checkboxes","Data format"),controls:[new rc.Radiobutton([{label:ol("block:checkboxes","Every checkbox as a separate field"),description:ol("block:checkboxes","Every checkbox is included in the dataset as a separate value."),value:"fields"},{label:ol("block:checkboxes","Text field with a list of all selected checkboxes"),description:ol("block:checkboxes","All the selected checkboxes are concatenated to a single string of text separated using a configurable separator."),value:"concatenate"},{label:ol("block:checkboxes","Both options above"),description:ol("block:checkboxes","Includes every checkbox in the dataset together with the concatenated text."),value:"both"}],rc.Radiobutton.bind(this,"format",void 0,"fields")).label(ol("block:checkboxes","This setting determines how the data is stored in the dataset:")).on((e=>{r.visible("concatenate"===e.value||"both"===e.value)})),r]},activated:_(this.format)}),this.editor.exportable(this)}defineConditions(){this.checkboxes.each((e=>{e.name&&this.conditions.template({condition:AC,markdown:e.name,icon:CC,burst:!0,props:{slot:this.slots.select(e.id),checkbox:e,checked:!0}})})),this.checkboxes.count>0&&this.conditions.template({condition:jC,separator:!0});const e=this.slots.select("counter","feature");if(e&&e.label){const t=this.conditions.group(e.label,EC);ee([{mode:"equal",label:ol("block:checkboxes","Counter is equal to")},{mode:"not-equal",label:ol("block:checkboxes","Counter is not equal to")},{mode:"below",label:ol("block:checkboxes","Counter is lower than")},{mode:"above",label:ol("block:checkboxes","Counter is higher than")},{mode:"between",label:ol("block:checkboxes","Counter is between")},{mode:"not-between",label:ol("block:checkboxes","Counter is not between")}],(i=>{t.template({condition:OC,label:i.label,autoOpen:!0,props:{slot:e,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}))}const t=this.slots.select("score","feature");if(t&&t.label){const e=this.conditions.group(t.label,TC);ee([{mode:"equal",label:ol("block:checkboxes","Score is equal to")},{mode:"not-equal",label:ol("block:checkboxes","Score is not equal to")},{mode:"below",label:ol("block:checkboxes","Score is lower than")},{mode:"above",label:ol("block:checkboxes","Score is higher than")},{mode:"between",label:ol("block:checkboxes","Score is between")},{mode:"not-between",label:ol("block:checkboxes","Score is not between")},{mode:"defined",label:ol("block:checkboxes","Score is calculated")},{mode:"undefined",label:ol("block:checkboxes","Score is not calculated")}],(i=>{e.template({condition:zC,label:i.label,autoOpen:"defined"!==i.mode&&"undefined"!==i.mode,props:{slot:t,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}))}}};function RC(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}_C([Mi("items"),od("#name")],PC.prototype,"checkboxes",void 0),_C([Mi("boolean","optional"),od("#required"),od("#collection","checkboxes")],PC.prototype,"required",void 0),_C([Mi("number","optional")],PC.prototype,"min",void 0),_C([Mi("number","optional")],PC.prototype,"max",void 0),_C([Mi("string","optional"),od("#label"),od("#slots"),od("#collection","checkboxes")],PC.prototype,"alias",void 0),_C([Mi("boolean","optional"),od("#slots"),od("#collection","checkboxes")],PC.prototype,"exportable",void 0),_C([Mi("string","optional"),od("#collection","checkboxes")],PC.prototype,"labelForTrue",void 0),_C([Mi("string","optional"),od("#collection","checkboxes")],PC.prototype,"labelForFalse",void 0),_C([Mi("boolean","optional")],PC.prototype,"randomize",void 0),_C([Mi("string","optional"),od("#slots"),od("#collection","checkboxes")],PC.prototype,"format",void 0),_C([Mi("string","optional")],PC.prototype,"formatSeparator",void 0),_C([Mi("string","optional")],PC.prototype,"formatSeparatorCustom",void 0),_C([Ps],PC.prototype,"defineSlot",null),_C([cd],PC.prototype,"defineEditor",null),_C([nd],PC.prototype,"defineConditions",null),PC=_C([Ia({type:"node",identifier:"tripetto-block-checkboxes",version:"6.1.3",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTIgNmEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDZMNi4xNDUuNjQ3YS41LjUgMCAwIDEgLjcwNy43MDdsLTQuNSA0LjVBLjQ5OC40OTggMCAwIDEgMS45OTggNnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXpNMiAxM2EuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDYgNC4xNDYtNC4xNDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNC41IDQuNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXpNMiAyMGEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDYgNC4xNDYtNC4xNDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNC41IDQuNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",get label(){return ol("block:checkboxes","Checkboxes")}})],PC);let HC=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Date){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:date","or")} @${e.id} > ${this.parse(e,this.to)}`;case"defined":return`@${e.id} ${ol("block:date","not empty")}`;case"undefined":return`@${e.id} ${ol("block:date","empty")}`;case"before":case"after":case"equal":case"not-equal":return`@${e.id} ${"after"===this.mode?">":"before"===this.mode?"<":"not-equal"===this.mode?"":"="} ${t}`}}return this.type.label}get title(){var e;const t=this.node;return(null==t?void 0:t.block)instanceof UC&&t.label+(t.block.range?" / "+(null===(e=this.slot)||void 0===e?void 0:e.label):"")||void 0}parse(e,t){var i;return A(t)?e.supportsTime?il.locale.dateTimeShort(e.toValue(t),!0):il.locale.dateShort(e.toValue(t),!0):_(t)?t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_":"`"+ol("block:date","Now").toUpperCase()+"`"}defineEditor(){const e=this.slot instanceof Ki.Date&&this.slot.supportsTime;this.editor.form({title:ol("block:date","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:date","Date is equal to"),value:"equal"},{label:ol("block:date","Date is not equal to"),value:"not-equal"},{label:ol("block:date","Date is before"),value:"before"},{label:ol("block:date","Date is after"),value:"after"},{label:ol("block:date","Date is between"),value:"between"},{label:ol("block:date","Date is not between"),value:"not-between"},{label:ol("block:date","Date is not empty"),value:"defined"},{label:ol("block:date","Date is empty"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(i.visible("defined"!==e.value&&"undefined"!==e.value),s.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":i.title=ol("block:date","If date equals");break;case"not-equal":i.title=ol("block:date","If date not equals");break;case"before":i.title=ol("block:date","If date is before");break;case"after":i.title=ol("block:date","If date is after");break;case"between":i.title=ol("block:date","If date is between");break;case"not-between":i.title=ol("block:date","If date is not between")}}))]});const t=(t,i,s)=>{var o;const n=this[t],r=Kh(this,(e=>e instanceof Ki.Date),_(n)?n:void 0,!0,null===(o=this.slot)||void 0===o?void 0:o.id),a=new rc.DateTime(A(n)?n:UC.getToday("to"===t?"end":"begin")).label(ol("block:date",e?"Use fixed date/time":"Use fixed date")).features(1|(e?8:32)).years((new Date).getFullYear()-150,(new Date).getFullYear()+50).zone("UTC").width("full").required().on((e=>{e.isFormVisible&&e.isObservable&&(this[t]=e.value)})),l=new rc.Dropdown(r,_(n)?n:"").label(ol("block:date","Use value of")).width("full").on((e=>{e.isFormVisible&&e.isObservable&&(this[t]=e.value||"")}));return this.editor.form({title:i,controls:[new rc.Radiobutton([{label:ol("block:date",e?"Current date/time":"Current date"),value:"current"},{label:ol("block:date",e?"Fixed date/time":"Fixed date"),value:"date"},{label:ol("block:date","Value"),value:"variable",disabled:0===r.length}],_(n)?"variable":A(n)?"date":"current").on((e=>{a.visible("date"===e.value),l.visible("variable"===e.value),"current"===e.value&&(this[t]=void 0)})),a,l]}).visible(s)},i=t("value",ol("block:date","If date equals"),"defined"!==this.mode&&"undefined"!==this.mode),s=t("to",ol("block:date","And"),"between"===this.mode||"not-between"===this.mode)}};var FC;RC([Mi,od("#name")],HC.prototype,"mode",void 0),RC([Mi,od("#name")],HC.prototype,"value",void 0),RC([Mi,od("#name")],HC.prototype,"to",void 0),RC([cd],HC.prototype,"defineEditor",null),HC=RC([Ia({type:"condition",context:"tripetto-block-date",identifier:"tripetto-block-date",version:"3.0.1",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgMkgxNnYtLjVhLjUuNSAwIDAgMC0xIDBWMkg1di0uNWEuNS41IDAgMCAwLTEgMFYySDEuNUMuNjczIDIgMCAyLjY3MyAwIDMuNXYxNGMwIC44MjcuNjczIDEuNSAxLjUgMS41aDE3Yy44MjcgMCAxLjUtLjY3MyAxLjUtMS41di0xNGMwLS44MjctLjY3My0xLjUtMS41LTEuNXptLTE3IDFINHYxLjVhLjUuNSAwIDAgMCAxIDBWM2gxMHYxLjVhLjUuNSAwIDAgMCAxIDBWM2gyLjVhLjUuNSAwIDAgMSAuNS41VjZIMVYzLjVhLjUuNSAwIDAgMSAuNS0uNXptMTcgMTVoLTE3YS41LjUgMCAwIDEtLjUtLjVWN2gxOHYxMC41YS41LjUgMCAwIDEtLjUuNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTguNSAxNS41YS41MDIuNTAyIDAgMCAxLS4zNTQtLjE0NmwtMi0yYS41LjUgMCAwIDEgLjcwNy0uNzA3bDEuNjQ2IDEuNjQ2IDQuNjQ2LTQuNjQ2YS41LjUgMCAwIDEgLjcwNy43MDdsLTUgNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",get label(){return ol("block:date","Verify date")}})],HC);let UC=FC=class extends Sa{get label(){return this.range?ol("block:date","Date range"):this.time?ol("block:date","Date with time"):this.type.label}static getToday(e){return M.UTCToday+("end"===e?86399999:0)}defineSlot(){if(this.dateSlot=this.slots.static({type:Ki.Date,reference:"date",label:this.range?ol("block:date","Date from"):this.time?ol("block:date","Date with time"):FC.label,required:this.required,alias:this.alias,exportable:this.exportable,exchange:["required","alias","exportable","precision","minimum","maximum"]}),this.dateSlot.precision=this.time?"minutes":"days",this.dateSlot.minimum=this.minimum,this.dateSlot.maximum=this.maximum,this.range){const e=this.slots.static({type:Ki.Date,reference:"to",label:ol("block:date","Date to"),required:this.required,alias:this.alias,exportable:this.exportable,exchange:["required","alias","exportable","precision","minimum","maximum"],pipe:"to"});e.precision=this.dateSlot.precision,e.minimum=this.dateSlot.minimum,e.maximum=this.dateSlot.maximum}else this.slots.delete("to","static")}defineEditor(){const e=e=>1|(e?8:32),t=new rc.Text("singleline",rc.Text.bind(this,"placeholder",void 0,"")).placeholder(ol("block:date","Type placeholder for the range to date field...")).action("@",Ic(this)).visible(this.range||!1);this.editor.name(),this.editor.description(),this.editor.placeholder(t),this.editor.explanation(),this.editor.groups.settings(),this.editor.option({name:ol("block:date","Time"),form:{title:ol("block:date","Time"),controls:[new rc.Checkbox(ol("block:date","Allow a time to be set"),rc.Checkbox.bind(this,"time",void 0,!0)).on((t=>{i.features(e(t.isFeatureEnabled&&t.isChecked)),s.features(e(t.isFeatureEnabled&&t.isChecked))})),new rc.Static(ol("block:date","When enabled this will allow the user to set a specific time along with the date."))]},activated:T(this.time)}),this.editor.option({name:ol("block:date","Range"),form:{title:ol("block:date","Range"),controls:[new rc.Checkbox(ol("block:date","Enable date range"),rc.Checkbox.bind(this,"range",void 0,!0)).on((()=>{t.visible(this.range||!1)})),new rc.Static(ol("block:date","When enabled this will display two date input fields. One for the *from* date and another one for the *to* date.")).markdown()]},activated:T(this.range)});const i=new rc.DateTime(D(this.minimum)?this.minimum:void 0).zone("UTC").features(e(this.time)).disabled(!0===this.minimum).years((new Date).getFullYear()-150,(new Date).getFullYear()+50).width("full").label(ol("block:date","Minimum")).placeholder(ol("block:date","Not set")).on((()=>{i.isFeatureEnabled?!0!==this.minimum&&(this.minimum=i.value):this.minimum=void 0})),s=new rc.DateTime(D(this.maximum)?this.maximum:void 0).zone("UTC").features(e(this.time)).disabled(!0===this.maximum).years((new Date).getFullYear()-150,(new Date).getFullYear()+50).width("full").label(ol("block:date","Maximum")).placeholder(ol("block:date","Not set")).on((()=>{s.isFeatureEnabled?!0!==this.maximum&&(this.maximum=s.value):this.maximum=void 0}));this.editor.option({name:ol("block:date","Limits"),form:{title:ol("block:date","Limits"),controls:[i,s,new rc.Static(ol("block:date","Options")),new rc.Checkbox(ol("block:date","Date must be in the future"),!0===this.minimum).on((e=>{e.isFeatureEnabled&&e.isChecked?this.minimum=!0:!0===this.minimum&&(this.minimum=void 0,i.refresh()),i.disabled(!0===this.minimum)})),new rc.Checkbox(ol("block:date","Date must be in the past"),!0===this.maximum).on((e=>{e.isFeatureEnabled&&e.isChecked?this.maximum=!0:!0===this.maximum&&(this.maximum=void 0,s.refresh()),s.disabled(!0===this.maximum)}))]},activated:D(this.minimum)||!0===this.minimum||D(this.maximum)||!0===this.maximum}),this.editor.groups.options(),this.editor.required(this),this.editor.visibility(),this.editor.alias(this),this.editor.exportable(this)}defineCondition(){const e=this.slots.select("date"),t=this.slots.select("to"),i=[{mode:"equal",label:ol("block:date","Is equal to")},{mode:"not-equal",label:ol("block:date","Is not equal to")},{mode:"before",label:ol("block:date","Is before")},{mode:"after",label:ol("block:date","Is after")},{mode:"between",label:ol("block:date","Is between")},{mode:"not-between",label:ol("block:date","Is not between")},{mode:"defined",label:ol("block:date","Is not empty")},{mode:"undefined",label:ol("block:date","Is empty")}];if(e){const s=t?this.conditions.group(e.label||ol("block:date","Date from")):this.conditions;ee(i,(t=>{s.template({condition:HC,label:t.label,autoOpen:"defined"!==t.mode&&"undefined"!==t.mode,props:{slot:e,mode:t.mode,value:this.time?M.UTC:M.UTCToday,to:"between"===t.mode||"not-between"===t.mode?this.time?M.UTC:M.UTCToday:void 0}})}))}if(t){const e=this.conditions.group(t.label||ol("block:date","Date to"));ee(i,(i=>{e.template({condition:HC,label:i.label,autoOpen:"defined"!==i.mode&&"undefined"!==i.mode,props:{slot:t,mode:i.mode,value:M.UTC,to:"between"===i.mode||"not-between"===i.mode?M.UTC:void 0}})}))}}};function BC(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}RC([Mi("boolean","optional"),od("#label"),od("#slots")],UC.prototype,"time",void 0),RC([Mi("boolean","optional"),od("#label"),od("#slots")],UC.prototype,"range",void 0),RC([Mi("number","optional"),od("#slots")],UC.prototype,"minimum",void 0),RC([Mi("number","optional"),od("#slots")],UC.prototype,"maximum",void 0),RC([Mi("boolean","optional"),od("#slots")],UC.prototype,"required",void 0),RC([Mi("string","optional"),od("#slots")],UC.prototype,"alias",void 0),RC([Mi("boolean","optional"),od("#slots")],UC.prototype,"exportable",void 0),RC([Mi("string","optional")],UC.prototype,"placeholder",void 0),RC([Ps],UC.prototype,"defineSlot",null),RC([cd],UC.prototype,"defineEditor",null),RC([nd],UC.prototype,"defineCondition",null),UC=FC=RC([Ia({type:"node",identifier:"tripetto-block-date",version:"3.0.1",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgMkgxNnYtLjVhLjUuNSAwIDAgMC0xIDBWMkg1di0uNWEuNS41IDAgMCAwLTEgMFYySDEuNUMuNjczIDIgMCAyLjY3MyAwIDMuNXYxNGMwIC44MjcuNjczIDEuNSAxLjUgMS41aDE3Yy44MjcgMCAxLjUtLjY3MyAxLjUtMS41di0xNGMwLS44MjctLjY3My0xLjUtMS41LTEuNXptLTE3IDFINHYxLjVhLjUuNSAwIDAgMCAxIDBWM2gxMHYxLjVhLjUuNSAwIDAgMCAxIDBWM2gyLjVhLjUuNSAwIDAgMSAuNS41VjZIMVYzLjVhLjUuNSAwIDAgMSAuNS0uNXptMTcgMTVoLTE3YS41LjUgMCAwIDEtLjUtLjVWN2gxOHYxMC41YS41LjUgMCAwIDEtLjUuNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTcuNSAxMGgtMWEuNS41IDAgMCAxIDAtMWgxYS41LjUgMCAwIDEgMCAxem0zIDBoLTFhLjUuNSAwIDAgMSAwLTFoMWEuNS41IDAgMCAxIDAgMXptMyAwaC0xYS41LjUgMCAwIDEgMC0xaDFhLjUuNSAwIDAgMSAwIDF6bTMgMGgtMWEuNS41IDAgMCAxIDAtMWgxYS41LjUgMCAwIDEgMCAxem0tMTIgMmgtMWEuNS41IDAgMCAxIDAtMWgxYS41LjUgMCAwIDEgMCAxem0zIDBoLTFhLjUuNSAwIDAgMSAwLTFoMWEuNS41IDAgMCAxIDAgMXptMyAwaC0xYS41LjUgMCAwIDEgMC0xaDFhLjUuNSAwIDAgMSAwIDF6bTMgMGgtMWEuNS41IDAgMCAxIDAtMWgxYS41LjUgMCAwIDEgMCAxem0zIDBoLTFhLjUuNSAwIDAgMSAwLTFoMWEuNS41IDAgMCAxIDAgMXptLTEyIDJoLTFhLjUuNSAwIDAgMSAwLTFoMWEuNS41IDAgMCAxIDAgMXptMyAwaC0xYS41LjUgMCAwIDEgMC0xaDFhLjUuNSAwIDAgMSAwIDF6bTMgMGgtMWEuNS41IDAgMCAxIDAtMWgxYS41LjUgMCAwIDEgMCAxem0zIDBoLTFhLjUuNSAwIDAgMSAwLTFoMWEuNS41IDAgMCAxIDAgMXptMyAwaC0xYS41LjUgMCAwIDEgMC0xaDFhLjUuNSAwIDAgMSAwIDF6bS0xMiAyaC0xYS41LjUgMCAwIDEgMC0xaDFhLjUuNSAwIDAgMSAwIDF6bTMgMGgtMWEuNS41IDAgMCAxIDAtMWgxYS41LjUgMCAwIDEgMCAxem0zIDBoLTFhLjUuNSAwIDAgMSAwLTFoMWEuNS41IDAgMCAxIDAgMXptMyAwaC0xYS41LjUgMCAwIDEgMC0xaDFhLjUuNSAwIDAgMSAwIDF6bTMgMGgtMWEuNS41IDAgMCAxIDAtMWgxYS41LjUgMCAwIDEgMCAxeiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48L3N2Zz4=",get label(){return ol("block:date","Date")}})],UC);let YC=class extends Zs{constructor(){super(...arguments),this.deviceType="desktop"}get name(){switch(this.deviceType){case"phone":return ol("block:device","Phone");case"tablet":return ol("block:device","Tablet");case"desktop":return ol("block:device","Desktop")}}get icon(){switch(this.deviceType){case"phone":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTEwLjUgMThoLTFhLjUuNSAwIDAgMSAwLTFoMWEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE0LjUgMjBoLTljLS44MjcgMC0xLjUtLjY3My0xLjUtMS41di0xN0M0IC42NzMgNC42NzMgMCA1LjUgMGg5Yy44MjcgMCAxLjUuNjczIDEuNSAxLjV2MTdjMCAuODI3LS42NzMgMS41LTEuNSAxLjV6bS05LTE5YS41LjUgMCAwIDAtLjUuNXYxN2EuNS41IDAgMCAwIC41LjVoOWEuNS41IDAgMCAwIC41LS41di0xN2EuNS41IDAgMCAwLS41LS41aC05eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48cGF0aCBkPSJNMTMuNSAxNmgtN2EuNS41IDAgMCAxLS41LS41di0xM2EuNS41IDAgMCAxIC41LS41aDdhLjUuNSAwIDAgMSAuNS41djEzYS41LjUgMCAwIDEtLjUuNXpNNyAxNWg2VjNIN3YxMnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";case"tablet":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE1LjUgMjBoLTEyYy0uODI3IDAtMS41LS42NzMtMS41LTEuNXYtMTdDMiAuNjczIDIuNjczIDAgMy41IDBoMTJjLjgyNyAwIDEuNS42NzMgMS41IDEuNXYxN2MwIC44MjctLjY3MyAxLjUtMS41IDEuNXpNMy41IDFhLjUuNSAwIDAgMC0uNS41djE3YS41LjUgMCAwIDAgLjUuNWgxMmEuNS41IDAgMCAwIC41LS41di0xN2EuNS41IDAgMCAwLS41LS41aC0xMnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTEwIDIuNWEuNS41IDAgMSAxLTEgMCAuNS41IDAgMCAxIDEgMHpNOS41IDE4Yy0uODI3IDAtMS41LS42NzMtMS41LTEuNVM4LjY3MyAxNSA5LjUgMTVzMS41LjY3MyAxLjUgMS41LS42NzMgMS41LTEuNSAxLjV6bTAtMmEuNS41IDAgMSAwIDAgMSAuNS41IDAgMCAwIDAtMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";case"desktop":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTMuNSAxNGgxM2MuODI3IDAgMS41LS42NzMgMS41LTEuNXYtOGMwLS44MjctLjY3My0xLjUtMS41LTEuNWgtMTNDMi42NzMgMyAyIDMuNjczIDIgNC41djhjMCAuODI3LjY3MyAxLjUgMS41IDEuNXpNMyA0LjVhLjUuNSAwIDAgMSAuNS0uNWgxM2EuNS41IDAgMCAxIC41LjV2OGEuNS41IDAgMCAxLS41LjVoLTEzYS41LjUgMCAwIDEtLjUtLjV2LTh6TTE5LjUgMTVILjVhLjUuNSAwIDAgMC0uNS41djFjMCAuODI3LjY3MyAxLjUgMS41IDEuNWgxN2MuODI3IDAgMS41LS42NzMgMS41LTEuNXYtMWEuNS41IDAgMCAwLS41LS41em0tMSAyaC0xN2EuNS41IDAgMCAxLS41LS41VjE2aDE4di41YS41LjUgMCAwIDEtLjUuNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+"}}defineEditor(){this.editor.form({title:ol("block:device","Branch on device type"),controls:[new rc.Radiobutton([{value:"desktop",label:ol("block:device","Desktop"),description:ol("block:device","Large screen device (probably a laptop or desktop).")},{value:"tablet",label:ol("block:device","Tablet"),description:ol("block:device","Medium screen device.")},{value:"phone",label:ol("block:device","Phone"),description:ol("block:device","Small screen device.")}],rc.Dropdown.bind(this,"deviceType","desktop"))]})}};function ZC(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}BC([Mi,od("#name")],YC.prototype,"deviceType",void 0),BC([cd],YC.prototype,"defineEditor",null),YC=BC([Ia({type:"condition",context:"*",identifier:"tripetto-block-device",version:"4.0.1",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTExLjUgMTRoLThjLS44MjcgMC0xLjUtLjY3My0xLjUtMS41di04QzIgMy42NzMgMi42NzMgMyAzLjUgM2gxM2MuODI3IDAgMS41LjY3MyAxLjUgMS41djFhLjUuNSAwIDAgMS0xIDB2LTFhLjUuNSAwIDAgMC0uNS0uNWgtMTNhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDhhLjUuNSAwIDAgMSAwIDF6bTAgNGgtMTBDLjY3MyAxOCAwIDE3LjMyNyAwIDE2LjV2LTFhLjUuNSAwIDAgMSAuNS0uNWgxMWEuNS41IDAgMCAxIDAgMUgxdi41YS41LjUgMCAwIDAgLjUuNWgxMGEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE4LjUgMThoLTRjLS44MjcgMC0xLjUtLjY3My0xLjUtMS41di04YzAtLjgyNy42NzMtMS41IDEuNS0xLjVoNGMuODI3IDAgMS41LjY3MyAxLjUgMS41djhjMCAuODI3LS42NzMgMS41LTEuNSAxLjV6bS00LTEwYS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWg0YS41LjUgMCAwIDAgLjUtLjV2LThhLjUuNSAwIDAgMC0uNS0uNWgtNHoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE2LjUgMTZhLjQ5OC40OTggMCAwIDEtLjUtLjUuNDk4LjQ5OCAwIDAgMSAuNS0uNS40OTguNDk4IDAgMCAxIC41LjUuNDk4LjQ5OCAwIDAgMS0uNS41eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48L3N2Zz4=",autoOpen:!0,get label(){return ol("block:device","Device")}})],YC);class VC extends Rl.Item{constructor(){super(...arguments),this.name=""}defineEditor(){this.editor.option({name:ol("block:dropdown","Name"),form:{title:ol("block:dropdown","Option name"),controls:[new rc.Text("singleline",rc.Text.bind(this,"name","")).action("@",Ic(this,"exclude")).autoFocus().autoSelect().enter(this.editor.close).escape(this.editor.close)]},locked:!0}),this.editor.group(ol("block:dropdown","Options")),this.editor.option({name:ol("block:dropdown","Identifier"),form:{title:ol("block:dropdown","Identifier"),controls:[new rc.Text("singleline",rc.Text.bind(this,"value",void 0)),new rc.Static(ol("block:dropdown","If an option identifier is set, this identifier will be used as selected option value instead of the option label."))]},activated:_(this.value)});const e=this.ref.slots.select("score","feature");this.editor.option({name:ol("block:dropdown","Score"),form:{title:ol("block:dropdown","Score"),controls:[new rc.Numeric(rc.Numeric.bind(this,"score",void 0)).precision((null==e?void 0:e.precision)||0).digits((null==e?void 0:e.digits)||0).decimalSign((null==e?void 0:e.decimal)||"").thousands(!!(null==e?void 0:e.separator),(null==e?void 0:e.separator)||"").prefix((null==e?void 0:e.prefix)||"").prefixPlural((null==e?void 0:e.prefixPlural)||void 0).suffix((null==e?void 0:e.suffix)||"").suffixPlural((null==e?void 0:e.suffixPlural)||void 0)]},activated:!0,locked:!!e,disabled:!e})}}ZC([Mi("string"),ud],VC.prototype,"name",void 0),ZC([Mi("string","optional"),dd],VC.prototype,"value",void 0),ZC([Mi("number","optional"),pd],VC.prototype,"score",void 0),ZC([cd],VC.prototype,"defineEditor",null);var WC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE0LjUgNS41YS41MDIuNTAyIDAgMCAxLS4zNTQtLjE0NmwtMi0yYS41LjUgMCAwIDEgLjcwNy0uNzA3bDEuNjQ2IDEuNjQ2IDEuNjQ2LTEuNjQ2YS41LjUgMCAwIDEgLjcwNy43MDdsLTIgMmEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE4LjUgMGgtMTdDLjY3MyAwIDAgLjY3MyAwIDEuNXY1QzAgNy4zMjcuNjczIDggMS41IDhINHYxMC41YzAgLjgyNy42NzMgMS41IDEuNSAxLjVoMTNjLjgyNyAwIDEuNS0uNjczIDEuNS0xLjV2LTE3YzAtLjgyNy0uNjczLTEuNS0xLjUtMS41ek0xIDYuNXYtNWEuNS41IDAgMCAxIC41LS41aDE3YS41LjUgMCAwIDEgLjUuNXY1YS41LjUgMCAwIDEtLjUuNWgtMTdhLjUuNSAwIDAgMS0uNS0uNXpNMTguNSAxOWgtMTNhLjUuNSAwIDAgMS0uNS0uNVY4aDEzLjVjLjE3NSAwIC4zNDMtLjAzMS41LS4wODZWMTguNWEuNS41IDAgMCAxLS41LjV6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjxwYXRoIGQ9Ik0xNi41IDExaC05YS41LjUgMCAwIDEgMC0xaDlhLjUuNSAwIDAgMSAwIDF6bTAgM2gtOWEuNS41IDAgMCAxIDAtMWg5YS41LjUgMCAwIDEgMCAxem0wIDNoLTlhLjUuNSAwIDAgMSAwLTFoOWEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",GC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0ibTEwLjcwNyAxMC41IDUuNjQ2LTUuNjQ2YS41LjUgMCAwIDAtLjcwNy0uNzA3TDEwIDkuNzkzIDQuMzU0IDQuMTQ3YS41LjUgMCAwIDAtLjcwNy43MDdMOS4yOTMgMTAuNWwtNS42NDYgNS42NDZhLjUuNSAwIDAgMCAuNzA4LjcwN2w1LjY0Ni01LjY0NiA1LjY0NiA1LjY0NmEuNDk4LjQ5OCAwIDAgMCAuNzA4IDAgLjUuNSAwIDAgMCAwLS43MDdMMTAuNzA5IDEwLjV6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==";let $C=class extends Zs{get name(){return(this.option?this.option.name:ol("block:dropdown","Nothing selected"))||this.type.label}get icon(){return this.option?WC:GC}get options(){return this.node&&this.node.block instanceof XC&&this.node.block.options||void 0}defineEditor(){if(this.node&&this.options){const e=[];this.options.each((t=>{C(t.name)&&e.push({label:Us(t.name,ts.MarkdownFeatures.None),value:t})})),e.push({label:ol("block:dropdown","Nothing selected"),value:void 0}),this.editor.form({title:this.node.label,controls:[new rc.Dropdown(e,rc.Dropdown.bind(this,"option",void 0))]})}}};ZC([od("#name"),od("#condition"),ad("#options")],$C.prototype,"option",void 0),ZC([cd],$C.prototype,"defineEditor",null),$C=ZC([Ia({type:"condition",context:"tripetto-block-dropdown",identifier:"tripetto-block-dropdown",version:"5.1.2",icon:WC,get label(){return ol("block:dropdown","Dropdown option")}})],$C);var QC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgOEgxM1YzLjVhLjUuNSAwIDAgMC0uNS0uNWgtNmEuNS41IDAgMCAwLS41LjVWNkguNWEuNS41IDAgMCAwLS41LjV2MTBhLjUuNSAwIDAgMCAuNS41aDE4YS41LjUgMCAwIDAgLjUtLjV2LThhLjUuNSAwIDAgMC0uNS0uNXpNNyA0aDV2MTJIN1Y0ek0xIDdoNXY5SDFWN3ptMTcgOWgtNVY5aDV2N3oiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTkuNSAxMGEuNS41IDAgMCAxLS41LS41di00YS41LjUgMCAwIDEgMSAwdjRhLjUuNSAwIDAgMS0uNS41em0tNSAzaC0yYS41LjUgMCAwIDEtLjUtLjV2LTJhLjUuNSAwIDAgMSAuNS0uNUg0VjlIMi41YS41LjUgMCAwIDEgMC0xaDJhLjUuNSAwIDAgMSAuNS41djJhLjUuNSAwIDAgMS0uNS41SDN2MWgxLjVhLjUuNSAwIDAgMSAwIDF6bTEyLTNoLTJhLjUuNSAwIDAgMCAwIDFIMTZ2MWgtMS41YS41LjUgMCAwIDAgMCAxSDE2djFoLTEuNWEuNS41IDAgMCAwIDAgMWgyYS41LjUgMCAwIDAgLjUtLjV2LTRhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";let qC=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Numeric){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:dropdown","or")} @${e.id} > ${this.parse(e,this.to)}`;case"defined":return`@${e.id} ${ol("block:dropdown","calculated")}`;case"undefined":return`@${e.id} ${ol("block:dropdown","not calculated")}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,((e,t)=>il.locale.number(e,t,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:dropdown","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:dropdown","Score is equal to"),value:"equal"},{label:ol("block:dropdown","Score is not equal to"),value:"not-equal"},{label:ol("block:dropdown","Score is lower than"),value:"below"},{label:ol("block:dropdown","Score is higher than"),value:"above"},{label:ol("block:dropdown","Score is between"),value:"between"},{label:ol("block:dropdown","Score is not between"),value:"not-between"},{label:ol("block:dropdown","Score is calculated"),value:"defined"},{label:ol("block:dropdown","Score is not calculated"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(t.visible("defined"!==e.value&&"undefined"!==e.value),i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:dropdown","If score equals");break;case"not-equal":t.title=ol("block:dropdown","If score not equals");break;case"below":t.title=ol("block:dropdown","If score is lower than");break;case"above":t.title=ol("block:dropdown","If score is higher than");break;case"between":t.title=ol("block:dropdown","If score is between");break;case"not-between":t.title=ol("block:dropdown","If score is not between")}}))]});const e=(e,t,i)=>{var s;const o=this[e],n=this.slot,r=new rc.Numeric(A(o)?o:0).label(ol("block:dropdown","Use fixed number")).precision((null==n?void 0:n.precision)||0).digits((null==n?void 0:n.digits)||0).decimalSign((null==n?void 0:n.decimal)||"").thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||"").prefix((null==n?void 0:n.prefix)||"").prefixPlural((null==n?void 0:n.prefixPlural)||void 0).suffix((null==n?void 0:n.suffix)||"").suffixPlural((null==n?void 0:n.suffixPlural)||void 0).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),a=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(o)?o:void 0,!0,null===(s=this.slot)||void 0===s?void 0:s.id),l=new rc.Dropdown(a,_(o)?o:"").label(ol("block:dropdown","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:dropdown","Number"),value:"number"},{label:ol("block:dropdown","Value"),value:"variable",disabled:0===a.length}],_(o)?"variable":"number").on((e=>{r.visible("number"===e.value),l.visible("variable"===e.value),r.isObservable&&r.focus()})),r,l]}).visible(i)},t=e("value",ol("block:dropdown","If score equals"),"defined"!==this.mode&&"undefined"!==this.mode),i=e("to",ol("block:dropdown","And"),"between"===this.mode||"not-between"===this.mode)}};ZC([Mi,od("#name")],qC.prototype,"mode",void 0),ZC([Mi,od("#name")],qC.prototype,"value",void 0),ZC([Mi,od("#name")],qC.prototype,"to",void 0),ZC([cd],qC.prototype,"defineEditor",null),qC=ZC([Ia({type:"condition",context:"tripetto-block-dropdown",identifier:"tripetto-block-dropdown:score",version:"5.1.2",icon:QC,get label(){return ol("block:dropdown","Verify score")}})],qC);let XC=class extends Sa{constructor(){super(...arguments),this.options=Rl.of(VC,this)}get label(){return sl("block:dropdown","%2 (%1 option)","%2 (%1 options)",this.options.count,this.type.label)}get calculator(){return{option:{allowCastToNumber:!0}}}defineSlots(){this.dropdownSlot=this.slots.static({type:Ki.String,reference:"option",label:ol("block:dropdown","Selected option"),exchange:["required","alias","exportable"]})}defineEditor(){this.editor.groups.general(),this.editor.name(),this.editor.description(),this.editor.placeholder(),this.editor.explanation();const e=this.editor.collection({collection:this.options,title:ol("block:dropdown","Dropdown options"),placeholder:ol("block:dropdown","Unnamed option"),autoOpen:!0,allowVariables:!0,allowImport:!0,allowExport:!0,allowDedupe:!0,showAliases:!0,sorting:"manual",emptyMessage:ol("block:dropdown","Click the + button to add an option...")});this.editor.groups.settings(),this.editor.option({name:ol("block:dropdown","Randomization"),form:{title:ol("block:dropdown","Randomization"),controls:[new rc.Checkbox(ol("block:dropdown","Randomize the options (using [Fisher-Yates shuffle](%1))","https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle"),rc.Checkbox.bind(this,"randomize",void 0,!0)).markdown()]},activated:T(this.randomize)}),this.editor.groups.options(),this.editor.required(this.dropdownSlot),this.editor.visibility(),this.editor.scores({target:this,collection:e,description:ol("block:dropdown","Generates a score based on the selected option. Open the settings panel for each option to set the score.")}),this.editor.alias(this.dropdownSlot),this.editor.exportable(this.dropdownSlot)}defineConditions(){this.options.each((e=>{e.name&&this.conditions.template({condition:$C,label:e.name,burst:"branch",props:{slot:this.dropdownSlot,option:e}})})),this.conditions.template({condition:$C,label:ol("block:dropdown","Nothing selected"),icon:GC,separator:!0,props:{slot:this.dropdownSlot,option:void 0}});const e=this.slots.select("score","feature");if(e&&e.label){const t=this.conditions.group(e.label,QC);ee([{mode:"equal",label:ol("block:dropdown","Score is equal to")},{mode:"not-equal",label:ol("block:dropdown","Score is not equal to")},{mode:"below",label:ol("block:dropdown","Score is lower than")},{mode:"above",label:ol("block:dropdown","Score is higher than")},{mode:"between",label:ol("block:dropdown","Score is between")},{mode:"not-between",label:ol("block:dropdown","Score is not between")},{mode:"defined",label:ol("block:dropdown","Score is calculated")},{mode:"undefined",label:ol("block:dropdown","Score is not calculated")}],(i=>{t.template({condition:qC,label:i.label,autoOpen:"defined"!==i.mode&&"undefined"!==i.mode,props:{slot:e,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}))}}};function JC(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}ZC([Mi("items"),od("#label"),Na("#slot","option")],XC.prototype,"options",void 0),ZC([Mi("boolean","optional")],XC.prototype,"randomize",void 0),ZC([ed("calculator")],XC.prototype,"calculator",null),ZC([Ps],XC.prototype,"defineSlots",null),ZC([cd],XC.prototype,"defineEditor",null),ZC([nd],XC.prototype,"defineConditions",null),XC=ZC([Ia({type:"node",identifier:"tripetto-block-dropdown",version:"5.1.2",icon:WC,get label(){return ol("block:dropdown","Dropdown")}})],XC);var KC="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE3LjA3MSAyLjkyOUMxNS4xODIgMS4wNCAxMi42NzEgMCAxMCAwUzQuODE4IDEuMDQgMi45MjkgMi45MjlDMS4wNCA0LjgxOCAwIDcuMzI5IDAgMTBzMS4wNCA1LjE4MiAyLjkyOSA3LjA3MUE5LjkzNCA5LjkzNCAwIDAgMCAxMCAyMGE5Ljg5NCA5Ljg5NCAwIDAgMCA0LjQ2NS0xLjA1IDEwLjA4MyAxMC4wODMgMCAwIDAgMy40My0yLjgxMi41LjUgMCAxIDAtLjc4OS0uNjE1QTguOTUgOC45NSAwIDAgMSAxMCAxOC45OTljLTQuOTYzIDAtOS00LjAzNy05LTlzNC4wMzctOSA5LTkgOSA0LjAzNyA5IDljMCAxLjc2Ni0xLjAyOCAzLTIuNSAzYTIuNTAzIDIuNTAzIDAgMCAxLTIuNS0yLjV2LTRhLjUuNSAwIDAgMC0xIDB2Ljg1N2EzLjk5IDMuOTkgMCAwIDAtMy0xLjM1N2MtMi4yMDYgMC00IDEuNzk0LTQgNHMxLjc5NCA0IDQgNGMxLjQzIDAgMi42ODctLjc1NSAzLjM5NS0xLjg4N2EzLjUwNCAzLjUwNCAwIDAgMCAzLjEwNSAxLjg4N2MuOTY4IDAgMS44NTMtLjM5MyAyLjQ5NC0xLjEwNy42NTgtLjczNCAxLjAwNi0xLjczNCAxLjAwNi0yLjg5M2E5LjkzNCA5LjkzNCAwIDAgMC0yLjkyOS03LjA3MXpNMTAgMTNjLTEuNjU0IDAtMy0xLjM0Ni0zLTNzMS4zNDYtMyAzLTMgMyAxLjM0NiAzIDMtMS4zNDYgMy0zIDN6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==";let eD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="address"}get label(){return""}get name(){var e;if(this.slot instanceof Ki.String){const t=e=>e&&("domain"===this.mode||"not-domain"===this.mode)&&`_@${e}_`||e,i=(Fs(this.match)?(null===(e=ms(this,this.match))||void 0===e?void 0:e.label)&&`@${this.match}`:this.match&&t(Bs(this.match)))||"\\_\\_";switch(this.mode){case"domain":return`@${this.slot.id} ${ol("block:email","from domain")} ${i}`;case"not-domain":return`@${this.slot.id} ${ol("block:email","not from domain")} ${i}`;case"address":return`@${this.slot.id} = ${i}`;case"not-address":return`@${this.slot.id}  ${i}`;case"defined":return`@${this.slot.id} ${ol("block:email","not empty")}`;case"undefined":return`@${this.slot.id} ${ol("block:email","empty")}`}}return this.type.label}get title(){var e;return null===(e=this.node)||void 0===e?void 0:e.label}defineEditor(){var e;this.editor.form({title:ol("block:email","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:email","Email address matches"),value:"address"},{label:ol("block:email","Email address does not match"),value:"not-address"},{label:ol("block:email","Email address matches domain"),value:"domain"},{label:ol("block:email","Email address does not match domain"),value:"not-domain"},{label:ol("block:email","Email address is not empty"),value:"defined"},{label:ol("block:email","Email address is empty"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","address")).on((e=>{switch(n.visible("defined"!==e.value&&"undefined"!==e.value),e.value){case"address":n.title=ol("block:email","If email address matches");break;case"not-address":n.title=ol("block:email","If email address does not match");break;case"domain":n.title=ol("block:email","If email address matches domain");break;case"not-domain":n.title=ol("block:email","If email address does not match domain")}s.isInteractable&&s.focus()}))]});const t=this.match&&Fs(this.match)||!1,i=Kh(this,(e=>e instanceof Ki.String||e instanceof Ki.Text),t?this.match:void 0,!1,null===(e=this.slot)||void 0===e?void 0:e.id),s=new rc.Text("singleline",t?"":this.match).label(ol("block:email","Use fixed text")).action("@",Ic(this,"exclude")).autoFocus().enter(this.editor.close).escape(this.editor.close).on((e=>{e.isFormVisible&&e.isObservable&&(this.match=e.value)})),o=new rc.Dropdown(i,t?this.match:"").label(ol("block:email","Use value of")).width("full").on((e=>{e.isFormVisible&&e.isObservable&&(this.match=e.value||void 0)})),n=this.editor.form({title:ol("block:email","If email address matches"),controls:[new rc.Radiobutton([{label:ol("block:email","Text"),value:"text"},{label:ol("block:email","Value"),value:"variable",disabled:0===i.length}],t?"variable":"text").on((e=>{s.visible("text"===e.value),o.visible("variable"===e.value),s.isInteractable&&s.focus()})),s,o]}).visible("defined"!==this.mode&&"undefined"!==this.mode)}};var tD;JC([Mi,od("#name")],eD.prototype,"mode",void 0),JC([Mi,od("#name")],eD.prototype,"match",void 0),JC([cd],eD.prototype,"defineEditor",null),eD=JC([Ia({type:"condition",context:"tripetto-block-email",identifier:"tripetto-block-email",version:"5.0.1",icon:KC,get label(){return ol("block:email","Match email address")}})],eD);let iD=tD=class extends Sa{defineSlot(){this.emailSlot=this.slots.static({type:Ki.String,reference:"email",label:tD.label,exchange:["required","alias","exportable"]})}defineEditor(){this.editor.name(),this.editor.description(),this.editor.placeholder(),this.editor.explanation(),this.editor.groups.options(),this.editor.required(this.emailSlot),this.editor.visibility(),this.editor.alias(this.emailSlot),this.editor.exportable(this.emailSlot)}defineCondition(){ee([{mode:"address",label:ol("block:email","Email address match")},{mode:"not-address",label:ol("block:email","Email address mismatch")},{mode:"domain",label:ol("block:email","Email address on domain")},{mode:"not-domain",label:ol("block:email","Email address not on domain")},{mode:"defined",label:ol("block:email","Email address is not empty")},{mode:"undefined",label:ol("block:email","Email address is empty")}],(e=>{this.conditions.template({condition:eD,label:e.label,autoOpen:"defined"!==e.mode&&"undefined"!==e.mode,props:{slot:this.emailSlot,mode:e.mode}})}))}};function sD(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}JC([Ps],iD.prototype,"defineSlot",null),JC([cd],iD.prototype,"defineEditor",null),JC([nd],iD.prototype,"defineCondition",null),iD=tD=JC([Ia({type:"node",identifier:"tripetto-block-email",version:"5.0.1",icon:KC,get label(){return ol("block:email","Email address")}})],iD);let oD=class extends Sa{defineEditor(){const e=pc("block:error");this.editor.form({title:ol("block:error","Explanation"),controls:[new rc.Static(ol("block:error","Raises an error, prevents completion of the form and displays an optional message to the user%1.",e?` ([${ol("block:error","learn more")}](${e}))`:"")).markdown()]}),this.editor.name(!1,!0,ol("block:error","Error message")),this.editor.description(),this.editor.groups.options(),this.editor.visibility()}};function nD(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}var rD;sD([cd],oD.prototype,"defineEditor",null),oD=sD([Ia({type:"node",identifier:"tripetto-block-error",version:"4.0.1",kind:"headless",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgMTlILjVhLjUuNSAwIDAgMS0uNDM2LS43NDZsOS0xNmEuNTAxLjUwMSAwIDAgMSAuODcyIDBsOSAxNkEuNTAzLjUwMyAwIDAgMSAxOC41IDE5ek0xLjM1NSAxOGgxNi4yOUw5LjUgMy41MiAxLjM1NSAxOHoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTkuNSAxNGEuNS41IDAgMCAxLS41LS41di01YS41LjUgMCAwIDEgMSAwdjVhLjUuNSAwIDAgMS0uNS41em0wIDNhLjUuNSAwIDAgMS0uNS0uNXYtMWEuNS41IDAgMCAxIDEgMHYxYS41LjUgMCAwIDEtLjUuNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",get label(){return ol("block:error","Raise error")}})],oD);let aD=rD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0}get isString(){return this.slot instanceof Ki.String||this.slot instanceof Ki.Text||!(this.slot||!this.variable)}get isNumber(){return this.slot instanceof Ki.Number||this.slot instanceof Ki.Numeric}get isDate(){return this.slot instanceof Ki.Date}get supportsTime(){return this.slot instanceof Ki.Date&&this.slot.supportsTime}get isBoolean(){return this.slot instanceof Ki.Boolean}get label(){return""}get name(){var e,i;if(this.variable&&ms(this,this.variable)){if("defined"===this.mode)return`@${this.variable} ${ol("block:evaluate","not empty")}`;if("undefined"===this.mode)return`@${this.variable} ${ol("block:evaluate","empty")}`;if(this.isString){const i=e=>e&&("contains"===this.mode||"not-contains"===this.mode||"starts"===this.mode||"ends"===this.mode)&&`_${e}_`||e,s=(_(this.value)&&Fs(this.value)?(null===(e=ms(this,this.value))||void 0===e?void 0:e.label)&&`@${this.value}`:C(this.value)&&i(Bs(t.replace(this.value,"\n",""))))||"\\_\\_";switch(this.mode){case"equal":case"not-equal":return`@${this.variable} ${"not-equal"===this.mode?"":"="} ${s}`;case"contains":case"not-contains":case"starts":case"ends":return`@${this.variable} ${"not-contains"===this.mode?ol("block:evaluate","does not contain"):"starts"===this.mode?ol("block:evaluate","starts with"):"ends"===this.mode?ol("block:evaluate","ends with"):ol("block:evaluate","contains")} ${s}`}}if(this.isNumber){const e=this.slot,t=(e,t)=>{var i;return A(t)?e instanceof Ki.Numeric?e.toString(t,((e,t)=>il.locale.number(e,t,!1))):e.toString(t,(e=>il.locale.number(e,0,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?"@"+t:"\\_\\_"},i=t(e,this.value);switch(this.mode){case"between":return`${i}  @${this.variable}  ${t(e,this.to)}`;case"not-between":return`@${this.variable} < ${i} ${ol("block:evaluate","or")} @${this.variable} > ${t(e,this.to)}`;case"not-equal":return`@${this.variable}  ${i}`;case"above":case"below":case"equal":return`@${this.variable} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${i}`}}if(this.isDate){const e=this.slot,t=(e,t)=>{var i;return A(t)?e.supportsTime?il.locale.dateTimeShort(e.toValue(t),!0):il.locale.dateShort(e.toValue(t),!0):_(t)?t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_":"`"+ol("block:evaluate","Now").toUpperCase()+"`"},i=t(e,this.value);switch(this.mode){case"between":return`${i}  @${e.id}  ${t(e,this.to)}`;case"not-between":return`@${e.id} < ${i} ${ol("block:evaluate","or")} @${e.id} > ${t(e,this.to)}`;case"before":case"after":case"equal":case"not-equal":return`@${e.id} ${"after"===this.mode?">":"before"===this.mode?"<":"not-equal"===this.mode?"":"="} ${i}`}}if(this.isBoolean){const e=this.slot;switch(this.mode){case"true":return`@${this.variable} = ${Bs(e.labelForTrue||"")||ol("block:evaluate","True")}`;case"false":return`@${this.variable} = ${Bs(e.labelForFalse||"")||ol("block:evaluate","False")}`;case"equal":case"not-equal":return`@${this.variable} ${"not-equal"===this.mode?"":"="} ${_(this.value)&&Fs(this.value)&&(null===(i=ms(this,this.value))||void 0===i?void 0:i.label)?`@${this.value}`:"\\_\\_"}`}}}return this.type.label}static getToday(e){return M.UTCToday+("end"===e?86399999:0)}stringEditor(){const e=this.editor.form({title:ol("block:evaluate","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:evaluate","Value matches"),value:"equal"},{label:ol("block:evaluate","Value does not match"),value:"not-equal"},{label:ol("block:evaluate","Value contains"),value:"contains"},{label:ol("block:evaluate","Value does not contain"),value:"not-contains"},{label:ol("block:evaluate","Value starts with"),value:"starts"},{label:ol("block:evaluate","Value ends with"),value:"ends"},{label:ol("block:evaluate","Value is not empty"),value:"defined"},{label:ol("block:evaluate","Value is empty"),value:"undefined"}],this.mode||"equal").on((e=>{switch(this.isString&&e.isObservable&&(this.mode=e.value),u.visible(this.isString&&"defined"!==e.value&&"undefined"!==e.value),e.value){case"equal":u.title=ol("block:evaluate","If value matches");break;case"not-equal":u.title=ol("block:evaluate","If value does not match");break;case"contains":u.title=ol("block:evaluate","If value contains");break;case"not-contains":u.title=ol("block:evaluate","If value does not contain");break;case"starts":u.title=ol("block:evaluate","If value starts with");break;case"ends":u.title=ol("block:evaluate","If value ends with")}o.isObservable&&o.isInteractable&&o.focus(),n.isObservable&&n.isInteractable&&n.focus()}))]}).visible(this.isString);let t=!1;const i=_(this.value)&&Fs(this.value)||!1,s=Kh(this,void 0,i?this.value:void 0),o=new rc.Text("singleline",!i&&_(this.value)?this.value:"").label(ol("block:evaluate","Use fixed text")).action("@",Ic(this)).autoFocus().enter(this.editor.close).escape(this.editor.close).on((e=>{e.isFormVisible&&e.isVisible&&(this.value=n.value=e.value),l.disabled(!!(e.isFormVisible&&e.isVisible&&e.suggestion&&t))})),n=new rc.Text("multiline",!i&&_(this.value)?this.value:"").label(ol("block:evaluate","Use fixed text")).action("@",Ic(this)).autoFocus().enter(this.editor.close).escape(this.editor.close).on((e=>{e.isFormVisible&&e.isVisible&&(this.value=o.value=e.value)})),r=new rc.Dropdown(s,i?this.value:"").label(ol("block:evaluate","Use value of")).width("full").on((e=>{e.isFormVisible&&e.isObservable&&this.variable!==e.value&&(this.value=e.value||void 0)})),a=new rc.Radiobutton([{label:ol("block:evaluate","Text"),value:"text"},{label:ol("block:evaluate","Value"),value:"variable",disabled:0===s.length}],i?"variable":"text").on((e=>{o.visible(!o.isDisabled&&"text"===e.value||!1),n.visible(!n.isDisabled&&"text"===e.value||!1),r.visible("variable"===e.value),o.isObservable&&o.isInteractable&&o.focus(),n.isObservable&&n.isInteractable&&n.focus()})),l=new rc.Checkbox(ol("block:evaluate","Ignore case"),rc.Checkbox.bind(this,"ignoreCase",void 0,!0)),c=()=>{const e=this.slot&&ms(this,this.slot.id);let i;if(t=!1,e&&e.slot&&e.block instanceof Sa){const s=Rl.find(e);s&&(t=s.sole,i=ie(s.collection.all,(e=>Us(e.getNameOfItem()))))}o.suggestions(i),o.disabled(!i),n.disabled(!!i),a.refresh()};c();const u=this.editor.form({title:ol("block:evaluate","If value matches"),controls:[a,o,n,r,l]}).visible(this.isString&&"defined"!==this.mode&&"undefined"!==this.mode);return{update:(t,i)=>{e.visible(this.isString),t!==i&&(t&&r.optionDisabled(t,!1),i&&r.optionDisabled(i,!0)),c()}}}numberEditor(){const e=[],t=this.editor.form({title:ol("block:evaluate","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:evaluate","Number is equal to"),value:"equal"},{label:ol("block:evaluate","Number is not equal to"),value:"not-equal"},{label:ol("block:evaluate","Number is lower than"),value:"below"},{label:ol("block:evaluate","Number is higher than"),value:"above"},{label:ol("block:evaluate","Number is between"),value:"between"},{label:ol("block:evaluate","Number is not between"),value:"not-between"},{label:ol("block:evaluate","Number is not empty"),value:"defined"},{label:ol("block:evaluate","Number is empty"),value:"undefined"}],this.mode||"equal").on((e=>{switch(this.isNumber&&e.isObservable&&(this.mode=e.value),s.visible(this.isNumber&&"defined"!==e.value&&"undefined"!==e.value),n.visible(this.isNumber&&("between"===e.value||"not-between"===e.value)),e.value){case"equal":s.title=ol("block:evaluate","If number equals");break;case"not-equal":s.title=ol("block:evaluate","If number not equals");break;case"below":s.title=ol("block:evaluate","If number is lower than");break;case"above":s.title=ol("block:evaluate","If number is higher than");break;case"between":s.title=ol("block:evaluate","If number is between");break;case"not-between":s.title=ol("block:evaluate","If number is not between")}}))]}).visible(this.isNumber),i=(t,i,s)=>{const o=this[t],n=this.slot instanceof Ki.Numeric?this.slot:void 0,r=new rc.Numeric(A(o)?o:0).label(ol("block:evaluate","Use fixed number")).precision((null==n?void 0:n.precision)||0).digits((null==n?void 0:n.digits)||0).decimalSign((null==n?void 0:n.decimal)||"").thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||"").prefix((null==n?void 0:n.prefix)||"").prefixPlural((null==n?void 0:n.prefixPlural)||void 0).suffix((null==n?void 0:n.suffix)||"").suffixPlural((null==n?void 0:n.suffixPlural)||void 0).min(null==n?void 0:n.minimum).max(null==n?void 0:n.maximum).autoFocus("value"===t).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===t)&&this.editor.close())).on((e=>{e.isFormVisible&&e.isObservable&&(this[t]=e.value)})),a=_(o)&&Fs(o)||!1,l=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),a?o:void 0),c=new rc.Dropdown(l,a?o:"").label(ol("block:evaluate","Use value of")).width("full").on((e=>{e.isFormVisible&&e.isObservable&&this.variable!==e.value&&(this[t]=e.value||"")}));return e.push(c),[this.editor.form({title:i,controls:[new rc.Radiobutton([{label:ol("block:evaluate","Number"),value:"number"},{label:ol("block:evaluate","Value"),value:"variable",disabled:0===l.length}],a?"variable":"number").on((e=>{r.visible("number"===e.value),c.visible("variable"===e.value),r.isObservable&&r.focus()})),r,c]}).visible(s),r]},[s,o]=i("value",ol("block:evaluate","If number equals"),this.isNumber&&"defined"!==this.mode&&"undefined"!==this.mode),[n,r]=i("to",ol("block:evaluate","And"),this.isNumber&&("between"===this.mode||"not-between"===this.mode));return{update:(i,s)=>{const n=e=>{e.precision(this.slot instanceof Ki.Numeric&&this.slot.precision||0),e.digits(this.slot instanceof Ki.Numeric&&this.slot.digits||0),e.decimalSign(this.slot instanceof Ki.Numeric&&this.slot.decimal||""),e.thousands(!!(this.slot instanceof Ki.Numeric&&this.slot.separator),this.slot instanceof Ki.Numeric&&this.slot.separator||""),e.min(this.slot instanceof Ki.Numeric&&this.slot.minimum||void 0),e.max(this.slot instanceof Ki.Numeric&&this.slot.maximum||void 0),e.prefix(this.slot instanceof Ki.Numeric&&this.slot.prefix||""),e.prefixPlural(this.slot instanceof Ki.Numeric&&this.slot.prefixPlural||void 0),e.suffix(this.slot instanceof Ki.Numeric&&this.slot.suffix||""),e.suffixPlural(this.slot instanceof Ki.Numeric&&this.slot.suffixPlural||void 0)};n(o),n(r),t.visible(this.isNumber),i!==s&&(i&&ee(e,(e=>{e.optionDisabled(i,!1)})),s&&ee(e,(e=>{e.optionDisabled(s,!0)})))}}}booleanEditor(){const e=new rc.Radiobutton([{label:this.slot instanceof Ki.Boolean&&this.slot.labelForTrue||ol("block:evaluate","Is true"),value:"true"},{label:this.slot instanceof Ki.Boolean&&this.slot.labelForFalse||ol("block:evaluate","Is false"),value:"false"},{label:ol("block:evaluate","Equals another variable"),value:"equal"},{label:ol("block:evaluate","Not equals another variable"),value:"not-equal"},{label:ol("block:evaluate","Is not empty"),value:"defined"},{label:ol("block:evaluate","Is empty"),value:"undefined"}],this.mode||"true").on((e=>{switch(this.isBoolean&&e.isObservable&&(this.mode=e.value),this.isBoolean&&"equal"!==e.value&&"not-equal"!==e.value&&(this.value=void 0),n.visible(this.isBoolean&&("equal"===e.value||"not-equal"===e.value)),e.value){case"equal":n.title=ol("block:evaluate","If value matches");break;case"not-equal":n.title=ol("block:evaluate","If value does not match")}})),t=this.editor.form({title:ol("block:evaluate","Compare mode"),controls:[e]}).visible(this.isBoolean),i=_(this.value)&&Fs(this.value)||!1,s=Kh(this,((e,t)=>!t&&e instanceof Ki.Boolean),i?this.value:void 0),o=new rc.Dropdown(s,i?this.value:"").width("full").on((e=>{e.isFormVisible&&e.isObservable&&this.variable!==e.value&&(this.value=e.value||void 0)})),n=this.editor.form({title:ol("block:evaluate","If value matches"),controls:[o]}).visible(this.isBoolean&&("equal"===this.mode||"not-equal"===this.mode));return{update:(i,s)=>{t.visible(this.isBoolean),i!==s&&(i&&o.optionDisabled(i,!1),s&&o.optionDisabled(s,!0)),e.buttonLabel("true",this.slot instanceof Ki.Boolean&&this.slot.labelForTrue||ol("block:evaluate","Is true")),e.buttonLabel("false",this.slot instanceof Ki.Boolean&&this.slot.labelForFalse||ol("block:evaluate","Is false"))}}}dateEditor(){const e=[],t=new rc.Radiobutton([{label:ol("block:evaluate","Date is equal to"),value:"equal"},{label:ol("block:evaluate","Date is not equal to"),value:"not-equal"},{label:ol("block:evaluate","Date is before"),value:"before"},{label:ol("block:evaluate","Date is after"),value:"after"},{label:ol("block:evaluate","Date is between"),value:"between"},{label:ol("block:evaluate","Date is not between"),value:"not-between"},{label:ol("block:evaluate","Date is not empty"),value:"defined"},{label:ol("block:evaluate","Date is empty"),value:"undefined"}],this.mode||"equal").on((e=>{switch(this.isDate&&e.isObservable&&(this.mode=e.value),o.visible(this.isDate&&!this.supportsTime&&"defined"!==e.value&&"undefined"!==e.value),n.visible(this.isDate&&this.supportsTime&&"defined"!==e.value&&"undefined"!==e.value),r.visible(this.isDate&&!this.supportsTime&&("between"===e.value||"not-between"===e.value)),a.visible(this.isDate&&this.supportsTime&&("between"===e.value||"not-between"===e.value)),e.value){case"equal":o.title=ol("block:evaluate","If date equals"),n.title=ol("block:evaluate","If date/time equals");break;case"not-equal":o.title=ol("block:evaluate","If date not equals"),n.title=ol("block:evaluate","If date/time not equals");break;case"before":o.title=ol("block:evaluate","If date is before"),n.title=ol("block:evaluate","If date/time is before");break;case"after":o.title=ol("block:evaluate","If date is after"),n.title=ol("block:evaluate","If date/time equals");break;case"between":o.title=ol("block:evaluate","If date is between"),n.title=ol("block:evaluate","If date/time is between");break;case"not-between":o.title=ol("block:evaluate","If date is not between"),n.title=ol("block:evaluate","If date/time is not between")}})),i=this.editor.form({title:ol("block:evaluate","Compare mode"),controls:[t]}).visible(this.isDate),s=(t,i,s,o)=>{const n=this[t],r=_(n)&&Fs(n)||!1,a=Kh(this,(e=>e instanceof Ki.Date),r?n:void 0),l=new rc.DateTime(A(n)?n:rD.getToday("to"===t?"end":"begin")).label(ol("block:evaluate",s?"Use fixed date/time":"Use fixed date")).features(1|(s?8:32)).years((new Date).getFullYear()-150,(new Date).getFullYear()+50).zone("UTC").width("full").required().on((e=>{e.isFormVisible&&e.isObservable&&(this[t]=e.value)})),c=new rc.Dropdown(a,r?n:"").label(ol("block:evaluate","Use value of")).width("full").on((e=>{e.isFormVisible&&e.isObservable&&this.variable!==e.value&&(this[t]=e.value||"")}));return e.push(c),this.editor.form({title:i,controls:[new rc.Radiobutton([{label:ol("block:evaluate",s?"Current date/time":"Current date"),value:"current"},{label:ol("block:evaluate",s?"Fixed date/time":"Fixed date"),value:"date"},{label:ol("block:evaluate","Value"),value:"variable",disabled:0===a.length}],r?"variable":A(n)?"date":"current").on((e=>{l.visible("date"===e.value),c.visible("variable"===e.value),e.isFormVisible&&e.isObservable&&"current"===e.value&&(this[t]=void 0)})),l,c]}).visible(o)},o=s("value",ol("block:evaluate","If date equals"),!1,this.isDate&&!this.supportsTime&&"defined"!==this.mode&&"undefined"!==this.mode),n=s("value",ol("block:evaluate","If date/time equals"),!0,this.isDate&&this.supportsTime&&"defined"!==this.mode&&"undefined"!==this.mode),r=s("to",ol("block:evaluate","And"),!1,this.isDate&&!this.supportsTime&&("between"===this.mode||"not-between"===this.mode)),a=s("to",ol("block:evaluate","And"),!0,this.isDate&&this.supportsTime&&("between"===this.mode||"not-between"===this.mode));return{update:(s,o)=>{i.visible(this.isDate),t.refresh(),s!==o&&(s&&ee(e,(e=>{e.optionDisabled(s,!1)})),o&&ee(e,(e=>{e.optionDisabled(o,!0)})))}}}defineEditor(){this.editor.form({title:ol("block:evaluate","Input"),controls:[new rc.Dropdown(Kh(this,(e=>e instanceof Ki.String||e instanceof Ki.Text||e instanceof Ki.Number||e instanceof Ki.Numeric||e instanceof Ki.Boolean||e instanceof Ki.Date),this.variable),this.variable).placeholder(ol("block:evaluate","Select the input variable to use...")).on((o=>{var n;const r=this.variable;this.variable=o.value||void 0,this.slot=o.value&&(null===(n=ms(this,o.value))||void 0===n?void 0:n.slot)||void 0,e.update(r,this.variable),t.update(r,this.variable),i.update(r,this.variable),s.update(r,this.variable),this.variable||(this.value=void 0),(!this.variable||this.isString||this.isBoolean)&&(this.to=void 0),(!this.variable||this.isNumber||this.isDate||this.isBoolean)&&(this.ignoreCase=void 0)})).autoFocus()]});const e=this.stringEditor(),t=this.numberEditor(),i=this.booleanEditor(),s=this.dateEditor();e.update(void 0,this.variable),t.update(void 0,this.variable),i.update(void 0,this.variable),s.update(void 0,this.variable)}};function lD(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}nD([Mi,od("#name")],aD.prototype,"variable",void 0),nD([Mi,od("#name")],aD.prototype,"mode",void 0),nD([Mi,od("#name")],aD.prototype,"value",void 0),nD([Mi,od("#name")],aD.prototype,"to",void 0),nD([Mi],aD.prototype,"ignoreCase",void 0),nD([cd],aD.prototype,"defineEditor",null),aD=rD=nD([Ia({type:"condition",context:"*",identifier:"tripetto-block-evaluate",version:"3.0.2",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0ibTE4Ljk4NSAxMy4zNzktMy0xMkEuNTAxLjUwMSAwIDAgMCAxNS41IDFIMy41MTFhLjUzMS41MzEgMCAwIDAtLjE4NS4wMzEuNS41IDAgMCAwLS4zMTQuMzU3TC4wMTQgMTMuMzc4YS40OTUuNDk1IDAgMCAwIC4wMDEuMjQySC4wMTRjLjAxNi4wNjMuMTY5LjYzNC42NzEgMS4yMDguNDY3LjUzNCAxLjMzNSAxLjE3MSAyLjgxNCAxLjE3MXMyLjM0Ni0uNjM3IDIuODE0LTEuMTcxYy41MDItLjU3NC42NTYtMS4xNDUuNjcxLTEuMjA4aC0uMDAxYS40OTUuNDk1IDAgMCAwIC4wMDEtLjI0Mkw0LjEzOSAxLjk5OWgxMC43MTlsLTIuODQ1IDExLjM3OWEuNDk1LjQ5NSAwIDAgMCAuMDAxLjI0MmgtLjAwMWMuMDE2LjA2My4xNjkuNjM0LjY3MSAxLjIwOC40NjcuNTM0IDEuMzM1IDEuMTcxIDIuODE0IDEuMTcxczIuMzQ2LS42MzcgMi44MTQtMS4xNzFjLjUwMi0uNTc0LjY1Ni0xLjE0NS42NzEtMS4yMDhoLS4wMDFhLjQ5NS40OTUgMCAwIDAgLjAwMS0uMjQyek0zLjUgMTVjLTEuMjE0IDAtMS44NjUtLjU0Mi0yLjE5OC0xaDQuMzk3Yy0uMzMzLjQ1OC0uOTg0IDEtMi4xOTggMXptMi4zNi0ySDEuMTQxbDIuMzYtOS40MzhMNS44NjEgMTN6bTkuNjQtOS40MzhMMTcuODYgMTNoLTQuNzE5bDIuMzYtOS40Mzh6TTE1LjUgMTVjLTEuMjE0IDAtMS44NjUtLjU0Mi0yLjE5OC0xaDQuMzk3Yy0uMzMzLjQ1OC0uOTg0IDEtMi4xOTggMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE1LjUgMThoLTUuNDZsLjk1OS0xMi40NjJhLjUwMi41MDIgMCAwIDAtLjAyNC0uMTk2bC0xLTNhLjUuNSAwIDAgMC0uOTQ4IDBsLTEgM2EuNTAyLjUwMiAwIDAgMC0uMDI0LjE5Nkw4Ljk2MiAxOGgtNS40NmEuNS41IDAgMCAwIDAgMWgxMmEuNS41IDAgMCAwIDAtMXptLTYtMTMuOTE5LjQ5NCAxLjQ4MUw5LjUgMTEuOThsLS40OTQtNi40MTguNDk0LTEuNDgxeiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48L3N2Zz4=",autoOpen:!0,get label(){return ol("block:evaluate","Evaluate")}})],aD);var cD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0ibTEyLjg1MyAxMS42NDctMi0yYS41LjUgMCAwIDAtLjcwNyAwbC0yIDJhLjUuNSAwIDAgMCAuNzA3LjcwN2wxLjE0Ni0xLjE0NnY0LjI5M2EuNS41IDAgMCAwIDEgMHYtNC4yOTNsMS4xNDcgMS4xNDZhLjQ5Ny40OTcgMCAwIDAgLjcwNi0uMDAxLjUuNSAwIDAgMCAwLS43MDd6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjxwYXRoIGQ9Ik0xNi4wMDYgMTZIMTIuNWEuNS41IDAgMCAxIDAtMWgzLjUwNkEyLjk5NyAyLjk5NyAwIDAgMCAxOSAxMi4wMDZhMi45OTcgMi45OTcgMCAwIDAtNC4wMi0yLjgxNC41LjUgMCAwIDEtLjUzNC0uODE0Yy4zNTctLjM3Ni41NTQtLjg2NS41NTQtMS4zNzkgMC0xLjEwMy0uODk3LTItMi0yLS42NDIgMC0xLjIyOS4yOTctMS42MS44MTQtLjIzLjMxMi0uMzY1LjY3OC0uMzg4IDEuMDU3YS41LjUgMCAwIDEtLjkwOC4yNTdBNS4wMDggNS4wMDggMCAwIDAgNiA0Ljk5OWMtMi43NTcgMC01IDIuMjQzLTUgNXMyLjI0MyA1IDUgNWgyLjVhLjUuNSAwIDAgMSAwIDFINmMtMy4zMDggMC02LTIuNjkyLTYtNnMyLjY5Mi02IDYtNmMxLjYwMiAwIDMuMTM3LjY0MyA0LjI2IDEuNzc1QTMuMDE0IDMuMDE0IDAgMCAxIDEzIDMuOTk5YTMuMDA0IDMuMDA0IDAgMCAxIDIuODIyIDQuMDE3QTMuOTk5IDMuOTk5IDAgMCAxIDIwIDEyLjAwNiAzLjk5OSAzLjk5OSAwIDAgMSAxNi4wMDYgMTZ6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",uD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2IDE2SDYuNWEuNS41IDAgMCAxIDAtMUgxNmMxLjY1NCAwIDMtMS4zNDYgMy0zYTMuMDA0IDMuMDA0IDAgMCAwLTQtMi44My41LjUgMCAwIDEtLjUzMy0uODEyQTIuMDAyIDIuMDAyIDAgMCAwIDEzIDQuOTk5YTIuMDAxIDIuMDAxIDAgMCAwLTEuOTk2IDEuODc1LjUuNSAwIDAgMS0uOTA4LjI1NkE1LjAxMiA1LjAxMiAwIDAgMCA2IDQuOTk5YTUuMDA2IDUuMDA2IDAgMCAwLTQuOTggNS40NTUuNS41IDAgMCAxLS45OTYuMDlBNi4wMDcgNi4wMDcgMCAwIDEgNiAzLjk5OWE2LjAxIDYuMDEgMCAwIDEgNC4yNjEgMS43NzZBMy4wMDcgMy4wMDcgMCAwIDEgMTMgMy45OTlhMy4wMDQgMy4wMDQgMCAwIDEgMi44MjggNC4wMDRBNC4wMDQgNC4wMDQgMCAwIDEgMjAgMTEuOTk5YzAgMi4yMDYtMS43OTQgNC00IDR6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjxwYXRoIGQ9Ik0zLjUgMTUuNWEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTItMmEuNS41IDAgMCAxIC43MDctLjcwN2wxLjY0NiAxLjY0NiA0LjY0Ni00LjY0NmEuNS41IDAgMCAxIC43MDcuNzA3bC01IDVhLjQ5OC40OTggMCAwIDEtLjM1NC4xNDZ6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",hD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2IDE2aC00LjVhLjUuNSAwIDAgMSAwLTFIMTZjMS42NTQgMCAzLTEuMzQ2IDMtM2EzLjAwNCAzLjAwNCAwIDAgMC00LTIuODMuNS41IDAgMCAxLS41MzMtLjgxMkEyLjAwMiAyLjAwMiAwIDAgMCAxMyA0Ljk5OWEyLjAwMSAyLjAwMSAwIDAgMC0xLjk5NiAxLjg3NS41LjUgMCAwIDEtLjkwOC4yNTZBNS4wMTIgNS4wMTIgMCAwIDAgNiA0Ljk5OWMtMi43NTcgMC01IDIuMjQzLTUgNSAwIDEuMDM3LjMxNCAyLjAzMS45MDkgMi44NzVhLjUuNSAwIDEgMS0uODE4LjU3NkE1Ljk2MiA1Ljk2MiAwIDAgMSAwIDkuOTk5YzAtMy4zMDggMi42OTItNiA2LTZhNi4wMSA2LjAxIDAgMCAxIDQuMjYxIDEuNzc2QTMuMDA3IDMuMDA3IDAgMCAxIDEzIDMuOTk5YTMuMDA0IDMuMDA0IDAgMCAxIDIuODI4IDQuMDA0QTQuMDA0IDQuMDA0IDAgMCAxIDIwIDExLjk5OWMwIDIuMjA2LTEuNzk0IDQtNCA0eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48cGF0aCBkPSJtNy4yMDcgMTMgMi4xNDYtMi4xNDZhLjUuNSAwIDAgMC0uNzA3LS43MDdMNi41IDEyLjI5M2wtMi4xNDYtMi4xNDZhLjUuNSAwIDAgMC0uNzA3LjcwN0w1Ljc5MyAxM2wtMi4xNDYgMi4xNDZhLjUuNSAwIDAgMCAuNzA4LjcwN2wyLjE0Ni0yLjE0NiAyLjE0NiAyLjE0NmEuNDk4LjQ5OCAwIDAgMCAuNzA4IDAgLjUuNSAwIDAgMCAwLS43MDdMNy4yMDkgMTN6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==";let dD=class extends Zs{constructor(){super(...arguments),this.isUploaded=!0}get icon(){return this.isUploaded?uD:hD}get name(){return this.isUploaded?ol("block:file-upload","File uploaded"):ol("block:file-upload","No file uploaded")}get title(){var e;return null===(e=this.node)||void 0===e?void 0:e.label}};lD([Mi,od("#name")],dD.prototype,"isUploaded",void 0),dD=lD([Ia({type:"condition",context:"tripetto-block-file-upload",identifier:"tripetto-block-file-upload",version:"4.0.1",icon:cD,get label(){return ol("block:file-upload","File upload state")}})],dD);let pD=class extends Sa{defineSlots(){this.fileSlot=this.slots.static({type:Ki.String,reference:"file",label:ol("block:file-upload","File upload"),protected:!0,exchange:["required","alias"]})}defineEditor(){this.editor.name(),this.editor.description(),this.editor.explanation(),this.editor.groups.settings(),this.editor.option({name:ol("block:file-upload","File size"),form:{title:ol("block:file-upload","Maximum file size"),controls:[new rc.Numeric(rc.Numeric.bind(this,"limit",void 0,1)).min(1).suffix(" Mb")]},activated:A(this.limit)}),this.editor.option({name:ol("block:file-upload","File type"),form:{title:ol("block:file-upload","Allowed file types"),controls:[new rc.Text("singleline",rc.Text.bind(this,"extensions",void 0)).placeholder(ol("block:file-upload","Comma separated list, e.g. .png, .jpg"))]},activated:_(this.extensions)}),this.editor.groups.options(),this.editor.required(this.fileSlot),this.editor.visibility(),this.editor.alias(this.fileSlot)}defineConditions(){ee([{label:ol("block:file-upload","File uploaded"),icon:uD,isUploaded:!0},{label:ol("block:file-upload","No file uploaded"),icon:hD,isUploaded:!1}],(e=>{this.conditions.template({condition:dD,label:e.label,icon:e.icon,burst:!0,props:{slot:this.fileSlot,isUploaded:e.isUploaded}})}))}};function mD(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}lD([Mi],pD.prototype,"limit",void 0),lD([Mi],pD.prototype,"extensions",void 0),lD([Ps],pD.prototype,"defineSlots",null),lD([cd],pD.prototype,"defineEditor",null),lD([nd],pD.prototype,"defineConditions",null),pD=lD([Ia({type:"node",identifier:"tripetto-block-file-upload",version:"4.0.1",icon:cD,alias:"file-upload",get label(){return ol("block:file-upload","File upload")}})],pD);let gD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equals"}get label(){return""}get name(){var e;if(this.slot instanceof Ki.String){const i=e=>e&&("contains"===this.mode||"not-contains"===this.mode||"starts"===this.mode||"ends"===this.mode)&&`_${e}_`||e,s=(Fs(this.value)?(null===(e=ms(this,this.value))||void 0===e?void 0:e.label)&&`@${this.value}`:this.value&&i(Bs(t.replace(this.value,"\n",""))))||"\\_\\_";switch(this.mode){case"equals":case"not-equals":return`@${this.slot.id} ${"not-equals"===this.mode?"":"="} ${s}`;case"contains":case"not-contains":case"starts":case"ends":return`@${this.slot.id} ${"not-contains"===this.mode?ol("block:hidden-field","does not contain"):"starts"===this.mode?ol("block:hidden-field","starts with"):"ends"===this.mode?ol("block:hidden-field","ends with"):ol("block:hidden-field","contains")} ${s}`;case"defined":return`@${this.slot.id} ${ol("block:hidden-field","not empty")}`;case"undefined":return`@${this.slot.id} ${ol("block:hidden-field","empty")}`;case"regex":return`@${this.slot.id} ${ol("block:hidden-field","regular expression")}`}}return this.type.label}get title(){var e;return null===(e=this.node)||void 0===e?void 0:e.label}defineEditor(){var e;this.editor.form({title:ol("block:hidden-field","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:hidden-field","Value matches"),value:"equals"},{label:ol("block:hidden-field","Value does not match"),value:"not-equals"},{label:ol("block:hidden-field","Value contains"),value:"contains"},{label:ol("block:hidden-field","Value does not contain"),value:"not-contains"},{label:ol("block:hidden-field","Value starts with"),value:"starts"},{label:ol("block:hidden-field","Value ends with"),value:"ends"},{label:ol("block:hidden-field","Value is not empty"),value:"defined"},{label:ol("block:hidden-field","Value is empty"),value:"undefined"},{label:ol("block:hidden-field","Value satisfies regular expression"),value:"regex"}],rc.Radiobutton.bind(this,"mode","equals")).on((e=>{switch(n.visible("defined"!==e.value&&"undefined"!==e.value&&"regex"!==e.value),r.visible("regex"===e.value),e.value){case"equals":n.title=ol("block:hidden-field","If value matches");break;case"not-equals":n.title=ol("block:hidden-field","If value does not match");break;case"contains":n.title=ol("block:hidden-field","If value contains");break;case"not-contains":n.title=ol("block:hidden-field","If value does not contain");break;case"starts":n.title=ol("block:hidden-field","If value starts with");break;case"ends":n.title=ol("block:hidden-field","If value ends with")}s.isInteractable&&s.focus()}))]});const t=this.value&&Fs(this.value)||!1,i=Kh(this,void 0,t?this.value:void 0,!1,null===(e=this.slot)||void 0===e?void 0:e.id),s=new rc.Text("multiline",t?"":this.value).label(ol("block:hidden-field","Use fixed text")).action("@",Ic(this,"exclude")).autoFocus().escape(this.editor.close).on((e=>{e.isFormVisible&&e.isVisible&&(this.value=e.value)})),o=new rc.Dropdown(i,t?this.value:"").label(ol("block:hidden-field","Use value of")).width("full").on((e=>{e.isFormVisible&&e.isObservable&&(this.value=e.value||void 0)})),n=this.editor.form({title:ol("block:hidden-field","If value matches"),controls:[new rc.Radiobutton([{label:ol("block:hidden-field","Text"),value:"text"},{label:ol("block:hidden-field","Value"),value:"variable",disabled:0===i.length}],t?"variable":"text").on((e=>{s.visible("text"===e.value),o.visible("variable"===e.value),s.isInteractable&&s.focus()})),s,o,new rc.Checkbox(ol("block:hidden-field","Ignore case"),rc.Checkbox.bind(this,"ignoreCase",void 0,!0))]}).visible("defined"!==this.mode&&"undefined"!==this.mode&&"regex"!==this.mode),r=this.editor.form({title:ol("block:hidden-field","If value satisfies regular expression"),controls:[new rc.Text("singleline",rc.Text.bind(this,"regex",void 0,"")).placeholder(ol("block:hidden-field","Regex literal (for example /ab+c/)")).autoFocus().autoValidate((e=>{if(!e.value)return"unknown";try{const t=e.value.indexOf("/"),i=e.value.lastIndexOf("/");return 0===t&&i>t&&((e,t)=>{try{return new RegExp(e.substring(1,t),e.substr(t+1))instanceof RegExp}catch(e){return!1}})(e.value,i)?"pass":"fail"}catch(e){return"fail"}})),new rc.Checkbox(ol("block:hidden-field","Invert regular expression"),rc.Checkbox.bind(this,"invert",void 0,!1))]}).visible("regex"===this.mode)}};mD([Mi,od("#name")],gD.prototype,"mode",void 0),mD([Mi,od("#name")],gD.prototype,"value",void 0),mD([Mi],gD.prototype,"ignoreCase",void 0),mD([Mi],gD.prototype,"regex",void 0),mD([Mi],gD.prototype,"invert",void 0),mD([cd],gD.prototype,"defineEditor",null),gD=mD([Ia({type:"condition",context:"tripetto-block-hidden-field",identifier:"tripetto-block-hidden-field:string",alias:"tripetto-block-hidden-field-string",version:"5.0.3",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE3LjUgNWgtMTVhLjUuNSAwIDAgMSAwLTFoMTVhLjUuNSAwIDAgMSAwIDF6bS00IDNoLTExYS41LjUgMCAwIDEgMC0xaDExYS41LjUgMCAwIDEgMCAxem00IDNoLTE1YS41LjUgMCAwIDEgMC0xaDE1YS41LjUgMCAwIDEgMCAxem0tNCAzaC0xMWEuNS41IDAgMCAxIDAtMWgxMWEuNS41IDAgMCAxIDAgMXptNCAzaC0xNWEuNS41IDAgMCAxIDAtMWgxNWEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",autoOpen:!0,get label(){return ol("block:hidden-field","Compare value")}})],gD);let bD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Number){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:hidden-field","or")} @${e.id} > ${this.parse(e,this.to)}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e;return null===(e=this.node)||void 0===e?void 0:e.label}parse(e,t){var i;return A(t)?e.toString(t,(e=>il.locale.number(e))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?"@"+t:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:hidden-field","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:hidden-field","Number is equal to"),value:"equal"},{label:ol("block:hidden-field","Number is not equal to"),value:"not-equal"},{label:ol("block:hidden-field","Number is lower than"),value:"below"},{label:ol("block:hidden-field","Number is higher than"),value:"above"},{label:ol("block:hidden-field","Number is between"),value:"between"},{label:ol("block:hidden-field","Number is not between"),value:"not-between"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:hidden-field","If number equals");break;case"not-equal":t.title=ol("block:hidden-field","If number not equals");break;case"below":t.title=ol("block:hidden-field","If number is lower than");break;case"above":t.title=ol("block:hidden-field","If number is higher than");break;case"between":t.title=ol("block:hidden-field","If number is between");break;case"not-between":t.title=ol("block:hidden-field","If number is not between")}}))]});const e=(e,t,i)=>{var s;const o=this[e],n=new rc.Numeric(A(o)?o:0).label(ol("block:hidden-field","Use fixed number")).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),r=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(o)?o:void 0,!1,null===(s=this.slot)||void 0===s?void 0:s.id),a=new rc.Dropdown(r,_(o)?o:"").label(ol("block:hidden-field","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:hidden-field","Number"),value:"number"},{label:ol("block:hidden-field","Value"),value:"variable",disabled:0===r.length}],_(o)?"variable":"number").on((e=>{n.visible("number"===e.value),a.visible("variable"===e.value),n.isObservable&&n.focus()})),n,a]}).visible(i)},t=e("value",ol("block:hidden-field","If number equals"),!0),i=e("to",ol("block:hidden-field","And"),"between"===this.mode||"not-between"===this.mode)}};mD([Mi,od("#name")],bD.prototype,"mode",void 0),mD([Mi,od("#name")],bD.prototype,"value",void 0),mD([Mi,od("#name")],bD.prototype,"to",void 0),mD([cd],bD.prototype,"defineEditor",null),bD=mD([Ia({type:"condition",context:"tripetto-block-hidden-field",identifier:"tripetto-block-hidden-field:number",alias:"tripetto-block-hidden-field-number",version:"5.0.3",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1ODAiIGhlaWdodD0iNTgwIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIHZpZXdCb3g9IjAgMCA1ODAwIDU4MDAiPjxwYXRoIGNsYXNzPSJ0cmlwZXR0by1maWxsIiBkPSJNNzAwIDE1MDBoNDQwMGMyMjAgMCA0MDAgMTgwIDQwMCA0MDB2MjAwMGMwIDIyMC0xODAgNDAwLTQwMCA0MDBINzAwYy0yMjAgMC00MDAtMTgwLTQwMC00MDBWMTkwMGMwLTIyMCAxODAtNDAwIDQwMC00MDB6bTMxMDAgMjAwdjI0MDBoMTMwMGMxMTAgMCAyMDAtOTAgMjAwLTIwMFYxOTAwYzAtMTEwLTkwLTIwMC0yMDAtMjAwSDM4MDB6bS0yMDAgMjQwMFYxNzAwSDcwMGMtMTEwIDAtMjAwIDkwLTIwMCAyMDB2MjAwMGMwIDExMCA5MCAyMDAgMjAwIDIwMGgyOTAwem0xMzAwLTE0MDBjMC0xMjEtNzktMjAwLTIwMC0yMDBoLTIwMGMtMTIxIDAtMjAwIDc5LTIwMCAyMDB2NDAwYzAgMTIxIDc5IDIwMCAyMDAgMjAwaDIwMGMxMjEgMCAyMDAtNzkgMjAwLTIwMHYtNDAwem0yMDAgMHY0MDBjMCAyMzEtMTY5IDQwMC00MDAgNDAwaC0yMDBjLTIzMSAwLTQwMC0xNjktNDAwLTQwMHYtNDAwYzAtMjMxIDE2OS00MDAgNDAwLTQwMGgyMDBjMjMxIDAgNDAwIDE2OSA0MDAgNDAwem0tMjAwMCAwYzAtMTIxLTc5LTIwMC0yMDAtMjAwaC0yMDBjLTEyMSAwLTIwMCA3OS0yMDAgMjAwdjQwMGMwIDEyMSA3OSAyMDAgMjAwIDIwMGgyMDBjMTIxIDAgMjAwLTc5IDIwMC0yMDB2LTQwMHptMjAwIDB2NDAwYzAgMjMxLTE2OSA0MDAtNDAwIDQwMGgtMjAwYy0yMzEgMC00MDAtMTY5LTQwMC00MDB2LTQwMGMwLTIzMSAxNjktNDAwIDQwMC00MDBoMjAwYzIzMSAwIDQwMCAxNjkgNDAwIDQwMHptLTE2MDAgMGMwLTEyMS03OS0yMDAtMjAwLTIwMGgtMjAwYy0xMjEgMC0yMDAgNzktMjAwIDIwMHY0MDBjMCAxMjEgNzkgMjAwIDIwMCAyMDBoMjAwYzEyMSAwIDIwMC03OSAyMDAtMjAwdi00MDB6bTIwMCAwdjQwMGMwIDIzMS0xNjkgNDAwLTQwMCA0MDBoLTIwMGMtMjMxIDAtNDAwLTE2OS00MDAtNDAwdi00MDBjMC0yMzEgMTY5LTQwMCA0MDAtNDAwaDIwMGMyMzEgMCA0MDAgMTY5IDQwMCA0MDB6Ii8+PC9zdmc+",autoOpen:!0,get label(){return ol("block:hidden-field","Compare value")}})],bD);let fD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.orientation="landscape"}get label(){return""}get name(){return this.slot?`@${this.slot.id} = ${"landscape"===this.orientation?ol("block:hidden-field","Landscape"):ol("block:hidden-field","Portrait")}`:this.type.label}defineEditor(){this.editor.form({controls:[new rc.Radiobutton([{label:ol("block:hidden-field","Landscape"),value:"landscape"},{label:ol("block:hidden-field","Portrait"),value:"portrait"}],rc.Radiobutton.bind(this,"orientation","landscape"))]})}};var yD;mD([Mi,od("#name")],fD.prototype,"orientation",void 0),mD([cd],fD.prototype,"defineEditor",null),fD=mD([Ia({type:"condition",context:"tripetto-block-hidden-field",identifier:"tripetto-block-hidden-field:orientation",alias:"tripetto-block-hidden-field-orientation",version:"5.0.3",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTEwLjUgMThoLTFhLjUuNSAwIDAgMSAwLTFoMWEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE0LjUgMjBoLTljLS44MjcgMC0xLjUtLjY3My0xLjUtMS41di0xN0M0IC42NzMgNC42NzMgMCA1LjUgMGg5Yy44MjcgMCAxLjUuNjczIDEuNSAxLjV2MTdjMCAuODI3LS42NzMgMS41LTEuNSAxLjV6bS05LTE5YS41LjUgMCAwIDAtLjUuNXYxN2EuNS41IDAgMCAwIC41LjVoOWEuNS41IDAgMCAwIC41LS41di0xN2EuNS41IDAgMCAwLS41LS41aC05eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48cGF0aCBkPSJNMTMuNSAxNmgtN2EuNS41IDAgMCAxLS41LS41di0xM2EuNS41IDAgMCAxIC41LS41aDdhLjUuNSAwIDAgMSAuNS41djEzYS41LjUgMCAwIDEtLjUuNXpNNyAxNWg2VjNIN3YxMnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",get label(){return ol("block:hidden-field","Orientation")}})],fD);let vD=yD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Date){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:hidden-field","or")} @${e.id} > ${this.parse(e,this.to)}`;case"before":case"after":case"equal":case"not-equal":return`@${e.id} ${"after"===this.mode?">":"before"===this.mode?"<":"not-equal"===this.mode?"":"="} ${t}`}}return this.type.label}get title(){var e;return null===(e=this.node)||void 0===e?void 0:e.label}static getToday(e){return M.UTCToday+("end"===e?86399999:0)}parse(e,t){var i;return A(t)?il.locale.dateTimeShort(e.toValue(t),!0):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:hidden-field","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:hidden-field","Date is equal to"),value:"equal"},{label:ol("block:hidden-field","Date is not equal to"),value:"not-equal"},{label:ol("block:hidden-field","Date is before"),value:"before"},{label:ol("block:hidden-field","Date is after"),value:"after"},{label:ol("block:hidden-field","Date is between"),value:"between"},{label:ol("block:hidden-field","Date is not between"),value:"not-between"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:hidden-field","If date equals");break;case"not-equal":t.title=ol("block:hidden-field","If date not equals");break;case"before":t.title=ol("block:hidden-field","If date is before");break;case"after":t.title=ol("block:hidden-field","If date is after");break;case"between":t.title=ol("block:hidden-field","If date is between");break;case"not-between":t.title=ol("block:hidden-field","If date is not between")}}))]});const e=(e,t,i)=>{var s;const o=this[e],n=Kh(this,(e=>e instanceof Ki.Date),_(o)?o:void 0,!0,null===(s=this.slot)||void 0===s?void 0:s.id),r=new rc.DateTime(A(o)?o:yD.getToday("to"===e?"end":"begin")).label(ol("block:hidden-field","Use fixed date/time")).features(9).years((new Date).getFullYear()-150,(new Date).getFullYear()+50).zone("UTC").width("full").required().on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),a=new rc.Dropdown(n,_(o)?o:"").label(ol("block:hidden-field","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:hidden-field","Fixed date/time"),value:"date"},{label:ol("block:hidden-field","Value"),value:"variable",disabled:0===n.length}],_(o)?"variable":"date").on((e=>{r.visible("date"===e.value),a.visible("variable"===e.value)})),r,a]}).visible(i)},t=e("value",ol("block:hidden-field","If date equals"),!0),i=e("to",ol("block:hidden-field","And"),"between"===this.mode||"not-between"===this.mode)}};function MD(e){switch(e){case"value":return ol("block:hidden-field","Fixed value");case"uuid":return ol("block:hidden-field","Random value");case"timestamp":return ol("block:hidden-field","Timestamp");case"variable":return ol("block:hidden-field","Global JavaScript variable");case"language":return ol("block:hidden-field","User language");case"querystring":return ol("block:hidden-field","Query string");case"cookie":return ol("block:hidden-field","Cookie");case"localStorage":return ol("block:hidden-field","Local storage");case"sessionStorage":return ol("block:hidden-field","Session storage");case"user-agent":return ol("block:hidden-field","User-Agent string");case"title":return ol("block:hidden-field","Page title");case"url":return ol("block:hidden-field","Page URL");case"referrer":return ol("block:hidden-field","Page referrer");case"screenOrientation":return ol("block:hidden-field","Screen orientation");case"screenWidth":return ol("block:hidden-field","Screen width");case"screenHeight":return ol("block:hidden-field","Screen height");case"devicePixelRatio":return ol("block:hidden-field","Screen pixel ratio");default:if(0===e.indexOf("custom-variable:")&&SD.customVariables){const t=ue(SD.customVariables.variables,(t=>t.name===e.replace("custom-variable:","")));if(t&&t.description)return t.description}return ol("block:hidden-field","Unknown")}}function wD(e){switch(e){case"value":return ol("block:hidden-field","Defines a fixed value for the hidden field.");case"uuid":return ol("block:hidden-field","Retrieves a random string value.");case"timestamp":return ol("block:hidden-field","Retrieves the current date and time.");case"variable":return ol("block:hidden-field","Retrieves a JavaScript global variable (only string values are supported).");case"language":return ol("block:hidden-field","Retrieves the preferred language of the user.");case"querystring":return ol("block:hidden-field","Retrieves the complete query string or a specific query string parameter value.");case"cookie":return ol("block:hidden-field","Read one or all cookies associated with the document.");case"localStorage":return ol("block:hidden-field","Retrieves an item from the browser local storage (localStorage).");case"sessionStorage":return ol("block:hidden-field","Retrieves an item from the browser session storage (sessionStorage).");case"user-agent":return ol("block:hidden-field","Retrieves the browser User-Agent string.");case"title":return ol("block:hidden-field","Retrieves the title of the page.");case"url":return ol("block:hidden-field","Retrieves the URL of the page.");case"referrer":return ol("block:hidden-field","Retrieves the URL of the page that linked to this page.");case"screenOrientation":return ol("block:hidden-field","Retrieves the current orientation of the screen (landscape or portrait).");case"screenWidth":return ol("block:hidden-field","Retrieves the width of the screen in pixels.");case"screenHeight":return ol("block:hidden-field","Retrieves the height of the screen in pixels.");case"devicePixelRatio":return ol("block:hidden-field","Retrieves the ratio of the resolution in physical pixels to the resolution in CSS pixels for the current display device.");default:if(0===e.indexOf("custom-variable:")&&SD.customVariables){const t=ue(SD.customVariables.variables,(t=>t.name===e.replace("custom-variable:","")));if(t&&t.description)return ol("block:hidden-field","Retrieves the value of *%1*.",t.description)}return ol("block:hidden-field","Invalid type.")}}var xD;mD([Mi,od("#name")],vD.prototype,"mode",void 0),mD([Mi,od("#name")],vD.prototype,"value",void 0),mD([Mi,od("#name")],vD.prototype,"to",void 0),mD([cd],vD.prototype,"defineEditor",null),vD=yD=mD([Ia({type:"condition",context:"tripetto-block-hidden-field",identifier:"tripetto-block-hidden-field:date",version:"5.0.3",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgMkgxNnYtLjVhLjUuNSAwIDAgMC0xIDBWMkg1di0uNWEuNS41IDAgMCAwLTEgMFYySDEuNUMuNjczIDIgMCAyLjY3MyAwIDMuNXYxNGMwIC44MjcuNjczIDEuNSAxLjUgMS41aDE3Yy44MjcgMCAxLjUtLjY3MyAxLjUtMS41di0xNGMwLS44MjctLjY3My0xLjUtMS41LTEuNXptLTE3IDFINHYxLjVhLjUuNSAwIDAgMCAxIDBWM2gxMHYxLjVhLjUuNSAwIDAgMCAxIDBWM2gyLjVhLjUuNSAwIDAgMSAuNS41VjZIMVYzLjVhLjUuNSAwIDAgMSAuNS0uNXptMTcgMTVoLTE3YS41LjUgMCAwIDEtLjUtLjVWN2gxOHYxMC41YS41LjUgMCAwIDEtLjUuNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTguNSAxNS41YS41MDIuNTAyIDAgMCAxLS4zNTQtLjE0NmwtMi0yYS41LjUgMCAwIDEgLjcwNy0uNzA3bDEuNjQ2IDEuNjQ2IDQuNjQ2LTQuNjQ2YS41LjUgMCAwIDEgLjcwNy43MDdsLTUgNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",autoOpen:!0,get label(){return ol("block:hidden-field","Verify date")}})],vD);let SD=xD=class extends Sa{constructor(){super(...arguments),this.allowMarkdown=!1,this.fieldType="value"}get label(){let e=this.type.label+" / "+MD(this.fieldType);return this.fieldQueryStringParameter&&(e+=" / "+this.fieldQueryStringParameter),this.fieldCookie&&(e+=" / "+this.fieldCookie),this.fieldLocalStorage&&(e+=" / "+this.fieldLocalStorage),this.fieldSessionStorage&&(e+=" / "+this.fieldSessionStorage),this.fieldVariable&&(e+=" / "+this.fieldVariable),e}defineSlot(){switch(this.fieldType){case"devicePixelRatio":case"screenWidth":case"screenHeight":this.fieldSlot=this.slots.static({type:Ki.Number,reference:"value",label:this.label,required:this.required,alias:this.alias,exportable:this.exportable,exchange:["required","alias","exportable"]});break;case"timestamp":this.fieldSlot=this.slots.static({type:Ki.Date,reference:"value",label:this.label,required:this.required,alias:this.alias,exportable:this.exportable,exchange:["required","alias","exportable"]});break;default:this.fieldSlot=this.slots.static({type:Ki.String,reference:"value",label:this.label,required:this.required,alias:this.alias,exportable:this.exportable,exchange:["required","alias","exportable"]})}}defineEditor(){const e=new rc.Static(wD(this.fieldType)).markdown(),t=(...e)=>ie(e,(e=>({label:MD(e),value:e}))),i=pc("block:hidden-field");this.editor.form({title:ol("block:hidden-field","Explanation"),controls:[new rc.Static(ol("block:hidden-field","Generate a hidden field with a certain value and use that value in your form%1.",i?` ([${ol("block:hidden-field","learn more")}](${i}))`:"")).markdown()]}),this.editor.name(!1,!1,ol("block:hidden-field","Name"),!1),this.editor.option({name:ol("block:hidden-field","Type"),form:{title:ol("block:hidden-field","Type of field"),controls:[new rc.Dropdown([...xD.customVariables?[{optGroup:xD.customVariables.name},...ie(xD.customVariables.variables,(e=>({label:e.description,value:`custom-variable:${e.name}`})))]:[],{optGroup:ol("block:hidden-field","Basic fields")},...t("value","timestamp","uuid","variable"),{optGroup:ol("block:hidden-field","Browser information")},...t("language","querystring","cookie","localStorage","sessionStorage","user-agent"),{optGroup:ol("block:hidden-field","Page information")},...t("title","url","referrer"),{optGroup:ol("block:hidden-field","Screen information")},...t("screenOrientation","screenWidth","screenHeight","devicePixelRatio")],rc.Radiobutton.bind(this,"fieldType","value")).on((t=>{e.label(wD(this.fieldType)),o.visible("value"===t.value),o.activated("value"===t.value),n.visible("querystring"===t.value),n.activated("querystring"===t.value&&_(this.fieldQueryStringParameter)),r.visible("cookie"===t.value),r.activated("cookie"===t.value&&_(this.fieldCookie)),a.visible("localStorage"===t.value),a.activated("localStorage"===t.value),l.visible("sessionStorage"===t.value),l.activated("sessionStorage"===t.value),c.visible("variable"===t.value),c.activated("variable"===t.value)}))]},activated:!0,locked:!0}),this.editor.form({title:ol("block:hidden-field","Function"),controls:[e]});const s=(e,t,i,s,o,n=s)=>this.editor.option({name:e,form:{title:t,controls:[new rc.Text("singleline",rc.Text.bind(this,i,void 0))]},activated:s,locked:o}).visible(n),o=this.editor.option({name:ol("block:hidden-field","Value"),form:{title:ol("block:hidden-field","Fixed value"),controls:[new rc.Text("multiline",rc.Text.bind(this,"fieldValue",void 0)).action("@",Ic(this,"validated"))]},activated:"value"===this.fieldType,locked:!0}),n=s(ol("block:hidden-field","Parameter"),ol("block:hidden-field","Query string parameter"),"fieldQueryStringParameter","querystring"===this.fieldType&&_(this.fieldQueryStringParameter),!1,"querystring"===this.fieldType),r=s(ol("block:hidden-field","Cookie"),ol("block:hidden-field","Cookie identifier"),"fieldCookie","cookie"===this.fieldType&&_(this.fieldCookie),!1,"cookie"===this.fieldType),a=s(ol("block:hidden-field","Item"),ol("block:hidden-field","Name of item from local storage"),"fieldLocalStorage","localStorage"===this.fieldType,!0),l=s(ol("block:hidden-field","Item"),ol("block:hidden-field","Name of item from session storage"),"fieldSessionStorage","sessionStorage"===this.fieldType,!0),c=s(ol("block:hidden-field","Variable"),ol("block:hidden-field","Name of variable"),"fieldVariable","variable"===this.fieldType,!0);this.editor.groups.options(),this.editor.required(this,ol("block:hidden-field","Hidden field value is required")),this.editor.visibility(),this.editor.alias(this),this.editor.exportable(this)}defineCondition(){switch(this.fieldType){case"screenOrientation":ee([{mode:"landscape",label:ol("block:hidden-field","Landscape")},{mode:"portrait",label:ol("block:hidden-field","Portrait")}],(e=>{this.conditions.template({condition:fD,label:e.label,props:{slot:this.fieldSlot,orientation:e.mode}})}));break;case"screenWidth":case"screenHeight":case"devicePixelRatio":ee([{mode:"equal",label:ol("block:hidden-field","Number is equal to")},{mode:"not-equal",label:ol("block:hidden-field","Number is not equal to")},{mode:"below",label:ol("block:hidden-field","Number is lower than")},{mode:"above",label:ol("block:hidden-field","Number is higher than")},{mode:"between",label:ol("block:hidden-field","Number is between")},{mode:"not-between",label:ol("block:hidden-field","Number is not between")}],(e=>{this.conditions.template({condition:bD,label:e.label,props:{slot:this.fieldSlot,mode:e.mode}})}));break;case"timestamp":ee([{mode:"equal",label:ol("block:hidden-field","Date is equal to")},{mode:"not-equal",label:ol("block:hidden-field","Date is not equal to")},{mode:"before",label:ol("block:hidden-field","Date is before")},{mode:"after",label:ol("block:hidden-field","Date is after")},{mode:"between",label:ol("block:hidden-field","Date is between")},{mode:"not-between",label:ol("block:hidden-field","Date is not between")}],(e=>{this.conditions.template({condition:vD,label:e.label,props:{slot:this.fieldSlot,mode:e.mode}})}));break;default:ee([{mode:"equals",label:ol("block:hidden-field","Value matches")},{mode:"not-equals",label:ol("block:hidden-field","Value does not match")},{mode:"contains",label:ol("block:hidden-field","Value contains")},{mode:"not-contains",label:ol("block:hidden-field","Value does not contain")},{mode:"starts",label:ol("block:hidden-field","Value starts with")},{mode:"ends",label:ol("block:hidden-field","Value ends with")},{mode:"defined",label:ol("block:hidden-field","Value is not empty")},{mode:"undefined",label:ol("block:hidden-field","Value is empty")},{mode:"regex",label:ol("block:hidden-field","Regular expression")}],(e=>{this.conditions.template({condition:gD,label:e.label,props:{slot:this.fieldSlot,mode:e.mode}})}))}}};function ID(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}mD([Mi,od("#name"),od("#slots")],SD.prototype,"fieldType",void 0),mD([Mi,od("#name")],SD.prototype,"fieldValue",void 0),mD([Mi,od("#name")],SD.prototype,"fieldQueryStringParameter",void 0),mD([Mi,od("#name")],SD.prototype,"fieldCookie",void 0),mD([Mi,od("#name")],SD.prototype,"fieldLocalStorage",void 0),mD([Mi,od("#name")],SD.prototype,"fieldSessionStorage",void 0),mD([Mi,od("#name")],SD.prototype,"fieldVariable",void 0),mD([Mi("boolean","optional"),od("#slots")],SD.prototype,"required",void 0),mD([Mi("string","optional"),od("#slots")],SD.prototype,"alias",void 0),mD([Mi("boolean","optional"),od("#slots")],SD.prototype,"exportable",void 0),mD([Ps],SD.prototype,"defineSlot",null),mD([cd],SD.prototype,"defineEditor",null),mD([nd],SD.prototype,"defineCondition",null),SD=xD=mD([Ia({type:"node",identifier:"tripetto-block-hidden-field",version:"5.0.3",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE5Ljg3MiAxMC4xNjZjLS4wNDctLjA1My0xLjE4Mi0xLjMwNS0yLjk1Ni0yLjU3MmExNy42MSAxNy42MSAwIDAgMC0xLjgwMS0xLjEzNGwxLjcyNS0xLjU5MmEuNS41IDAgMSAwLS42NzktLjczNWwtMi4wMDMgMS44NDljLS4xMjQtLjA1Ni0uMjQ4LS4xMS0uMzcyLS4xNjJDMTIuNDgxIDUuMjc2IDExLjIwNyA1IDEwIDVzLTIuNDgxLjI3Ni0zLjc4Ni44MmMtMS4wMy40MjktMi4wODMgMS4wMjYtMy4xMyAxLjc3M0MxLjMxIDguODYuMTc1IDEwLjExMy4xMjggMTAuMTY1YS41LjUgMCAwIDAgMCAuNjY5Yy4wNDcuMDUzIDEuMTgyIDEuMzA1IDIuOTU2IDIuNTcyLjYuNDI5IDEuMjAyLjgwNyAxLjgwMSAxLjEzNEwzLjE2IDE2LjEzMmEuNS41IDAgMSAwIC42NzkuNzM1bDIuMDAzLTEuODQ5Yy4xMjQuMDU2LjI0OC4xMS4zNzIuMTYyIDEuMzA1LjU0NCAyLjU3OS44MiAzLjc4Ni44MnMyLjQ4MS0uMjc2IDMuNzg2LS44MmMxLjAzLS40MjkgMi4wODMtMS4wMjYgMy4xMy0xLjc3MyAxLjc3NC0xLjI2NyAyLjkwOS0yLjUyIDIuOTU2LTIuNTcyYS41LjUgMCAwIDAgMC0uNjY5ek0xNCA5LjVjMCAyLjIwNi0xLjc5NCA0LTQgNGEzLjk3NiAzLjk3NiAwIDAgMS0xLjk1Ny0uNTEzbDUuNTkyLTUuMTYyYy4yMzguNTE3LjM2NiAxLjA4Ni4zNjYgMS42NzR6bS0xLjQyNi0zLjA2MmMuMTkxLjE2MS4zNjQuMzM3LjUyLjUyNWwtNS44NjcgNS40MTZBMy45ODggMy45ODggMCAwIDEgNiA5LjQ5OWMwLTEuMTg4LjUxOS0yLjI5OCAxLjQyNi0zLjA2Mi44MjItLjI2OCAxLjY5MS0uNDM4IDIuNTc0LS40MzhzMS43NTIuMTcgMi41NzQuNDM4em0tOC44OTEgNi4xNjhBMjAuMDE0IDIwLjAxNCAwIDAgMSAxLjE5NCAxMC41YTIwLjEwMiAyMC4xMDIgMCAwIDEgMi40ODktMi4xMDYgMTYuMTkgMTYuMTkgMCAwIDEgMS44NS0xLjE0NUE0Ljk4OCA0Ljk4OCAwIDAgMCA1IDkuNWMwIDEuMzkxLjU3MSAyLjY1MSAxLjQ5MSAzLjU1OGwtLjgyNS43NjJhMTYuMjMzIDE2LjIzMyAwIDAgMS0xLjk4My0xLjIxNHptMTIuNjM0IDBDMTQuNzg0IDEzLjY5OCAxMi40NDQgMTUgMTAgMTVjLTEuMTY2IDAtMi4zMDktLjI5Ny0zLjM1Mi0uNzI2bC42My0uNTgyYy43ODQuNTEgMS43MTguODA4IDIuNzIxLjgwOGE1LjAwNiA1LjAwNiAwIDAgMCA0LjQ2Ny03LjI1MWMuNjk0LjM2NSAxLjMyLjc2OCAxLjg1IDEuMTQ1YTIwLjAxNCAyMC4wMTQgMCAwIDEgMi40ODkgMi4xMDYgMjAuMTAyIDIwLjEwMiAwIDAgMS0yLjQ4OSAyLjEwNnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",get label(){return ol("block:hidden-field","Hidden field")},kind:"headless"})],SD);var kD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE5LjgzMyAxLjEyN2EuNDk5LjQ5OSAwIDAgMC0uNTI3LS4wODhsLTE5IDhhLjUuNSAwIDAgMCAuMDM2LjkzNUw2IDExLjg2djUuNjRhLjUuNSAwIDAgMCAuODg4LjMxNWwyLjc2My0zLjQwMSA0LjQ5NyA0LjQ0MWEuNDk3LjQ5NyAwIDAgMCAuNDc2LjEyOC41MDEuNTAxIDAgMCAwIC4zNTUtLjM0M2w1LTE3YS41LjUgMCAwIDAtLjE0Ny0uNTE0ek0xNi4xMyAzLjQ2MWwtOS43MjQgNy40OC00LjQ4OC0xLjQ5NkwxNi4xMyAzLjQ2MXpNNyAxMS43NDZsOS40MTUtNy4yNDItNy4xOTQgOC44NTQtLjAwMS4wMDFMNyAxNi4wOTJ2LTQuMzQ2em03LjI1NiA1LjgxMS0zLjk3Mi0zLjkyMiA4LjAzMy05Ljg4Ny00LjA2MSAxMy44MDh6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",ND="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTEwLjUgMGgtNGEuNS41IDAgMCAwLS41LjV2NS41ODZjLS41ODIuMjA2LTEgLjc2Mi0xIDEuNDE0QzUgOC4zMjcgNS42NzMgOSA2LjUgOVM4IDguMzI3IDggNy41YzAtLjY1Mi0uNDE4LTEuMjA4LTEtMS40MTRWM2gzLjVhLjUuNSAwIDAgMCAuNS0uNXYtMmEuNS41IDAgMCAwLS41LS41em0tNCA4YS41LjUgMCAxIDEgMC0xIC41LjUgMCAwIDEgMCAxek0xMCAySDdWMWgzdjF6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjxwYXRoIGQ9Ik0xOS4wODggNi45NDVjLS4zNTQtLjkxNi0uODE4LTEuNjI4LTEuMzgtMi4xMThhMy4zMDMgMy4zMDMgMCAwIDAtMi4yMzQtLjgyNkg4LjVhLjUuNSAwIDAgMCAwIDFoNi45NzRjMi43OSAwIDMuNDY5IDQuMjM2IDMuNTIyIDhIMi45OTl2LThoMS41YS41LjUgMCAwIDAgMC0xaC0xLjV2LS41YS41LjUgMCAwIDAtLjUtLjVoLTJhLjUuNSAwIDAgMC0uNS41djExYS41LjUgMCAwIDAgLjUuNWgyYS41LjUgMCAwIDAgLjUtLjV2LS41aDV2NS41YS41LjUgMCAwIDAgLjUuNWgzYS41LjUgMCAwIDAgLjUtLjV2LTUuNWg3LjVhLjUuNSAwIDAgMCAuNS0uNWMwLTIuNzg1LS4zMDctNC45OS0uOTEyLTYuNTU1ek0yIDE0SDFWNGgxdjEwem05IDVIOXYtNWgydjV6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",_D="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE5LjA4OCA2Ljk0NWMtLjM1NC0uOTE2LS44MTgtMS42MjgtMS4zOC0yLjExOGEzLjMwMyAzLjMwMyAwIDAgMC0yLjIzNC0uODI2SDN2LS41YS41LjUgMCAwIDAtLjUtLjVoLTJhLjUuNSAwIDAgMC0uNS41djExYS41LjUgMCAwIDAgLjUuNWgyYS41LjUgMCAwIDAgLjUtLjV2LS41aDV2NS41YS41LjUgMCAwIDAgLjUuNWgzYS41LjUgMCAwIDAgLjUtLjV2LTUuNWg3LjVhLjUuNSAwIDAgMCAuNS0uNWMwLTIuNzg1LS4zMDctNC45OS0uOTEyLTYuNTU1ek0yIDE0SDFWNGgxdjEwem05IDVIOXYtNWgydjV6bS04LTZWNWgxMi40NzRjMi43OSAwIDMuNDY5IDQuMjM2IDMuNTIyIDhIMi45OTl6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjxwYXRoIGQ9Ik0xMy41IDdINy45MTRjLS4yMDYtLjU4Mi0uNzYyLTEtMS40MTQtMUM1LjY3MyA2IDUgNi42NzMgNSA3LjVTNS42NzMgOSA2LjUgOWMuNjUyIDAgMS4yMDgtLjQxOCAxLjQxNC0xSDExdjMuNWEuNS41IDAgMCAwIC41LjVoMmEuNS41IDAgMCAwIC41LS41di00YS41LjUgMCAwIDAtLjUtLjV6bS03IDFhLjUuNSAwIDEgMSAwLTEgLjUuNSAwIDAgMSAwIDF6bTYuNSAzaC0xVjhoMXYzeiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48L3N2Zz4=";let LD=class extends Zs{constructor(){super(...arguments),this.willMail=!0}get icon(){return this.willMail?ND:_D}get name(){return this.willMail?ol("block:mailer","Mail will be sent"):ol("block:mailer","No mail will be sent")}get title(){var e;return null===(e=this.node)||void 0===e?void 0:e.label}};ID([Mi,od("#name")],LD.prototype,"willMail",void 0),LD=ID([Ia({type:"condition",context:"tripetto-block-mailer",identifier:"tripetto-block-mailer",version:"5.0.2",icon:kD,get label(){return ol("block:mailer","Mail status")}})],LD);let CD=class extends Sa{constructor(){super(...arguments),this.allowMarkdown=!1,this.recipient=""}defineSlot(){this.recipientSlot=this.slots.static({type:Ki.String,reference:"recipient",label:ol("block:mailer","Recipient"),alias:this.alias,exportable:this.recipientExportable,actionable:!0}),this.slots.static({type:Ki.String,reference:"subject",label:ol("block:mailer","Subject"),alias:this.alias,exportable:this.subjectExportable,actionable:!0}),this.slots.static({type:Ki.Text,reference:"message",label:ol("block:mailer","Message"),alias:this.alias,exportable:this.messageExportable,actionable:!0}),this.sender?this.slots.static({type:Ki.String,reference:"sender",label:ol("block:mailer","Sender"),alias:this.alias,exportable:this.senderExportable,actionable:!0}):this.slots.delete("sender"),this.includeData?this.slots.static({type:Ki.Boolean,reference:"data",label:"Data",pipeable:!1,exportable:!1,actionable:!0}):this.slots.delete("data")}defineEditor(){var e;const t=ce(xc(this,{blocks:["tripetto-block-email","tripetto-block-hidden-field"],mode:"validated"}),(e=>!!e.id)),i=new rc.Email(rc.Email.bind(this,"recipientFixed",void 0,"")).placeholder(ol("block:mailer","Type recipient email address here...")).autoValidate().require().visible("fixed"===this.recipient),s=new rc.Email(rc.Email.bind(this,"senderFixed",void 0,"")).placeholder(ol("block:mailer","Type sender email address here...")).autoValidate().require().visible("fixed"===this.sender),o=pc("block:mailer"),n=pc("block:mailer:sender");this.editor.option({name:ol("block:mailer","Recipient"),form:{title:ol("block:mailer","Recipient"),controls:[new rc.Static(ol("block:mailer","This block sends an email to the specified recipient. You can use any email block to define the recipient, as long as the block is inserted before this block. Supply a fixed recipient when the block should always mail to the same email address%1.",o?` ([${ol("block:mailer","learn more")}](${o}))`:"")).markdown(),new rc.Dropdown([...t.length>0?[{optGroup:ol("block:mailer","Available email addresses")},...ie(t,(e=>({label:e.label,value:e.id||""}))),{optGroup:ol("block:mailer","Other")}]:[],{label:ol("block:mailer","Fixed recipient address"),value:"fixed"}],rc.Dropdown.bind(this,"recipient","")).on((e=>{i.visible("fixed"===e.value)})),i]},activated:!0,locked:!0}),this.editor.name(!1,!1,ol("block:mailer","Subject"),"validated"),this.editor.description(!0,ol("block:mailer","Message"),"validated"),this.editor.groups.settings(),this.editor.option({name:ol("block:mailer","Sender"),form:{title:ol("block:mailer","Sender"),controls:[new rc.Static(ol("block:mailer","You can specify a sender address. This address will be used to set the reply-to header of the email%1.",n?` ([${ol("block:mailer","learn more")}](${n}))`:"")).markdown(),new rc.Dropdown([...t.length>0?[{optGroup:ol("block:mailer","Available email addresses")},...ie(t,(e=>({label:e.label,value:e.id||""}))),{optGroup:ol("block:mailer","Other")}]:[],{label:ol("block:mailer","Fixed sender address"),value:"fixed"}],rc.Dropdown.bind(this,"sender",void 0,"")).on((e=>{s.visible("fixed"===e.value)})),s]},activated:_(this.sender)}).onToggle((e=>{var t;a.card instanceof rc.Form&&(null===(t=a.card.control(3))||void 0===t||t.visible(e.isActivated))})),this.editor.option({name:ol("block:mailer","Form data"),form:{title:ol("block:mailer","Append form data"),controls:[new rc.Checkbox(ol("block:mailer","Append all form data to the message"),rc.Checkbox.bind(this,"includeData",void 0,!0)),new rc.Static(ol("block:mailer","This will append _all_ the exportable data of the form to the message. Useful, for example, if you want to send a copy of the form data to the respondent. If you just want to include certain form data, use the `@` sign in the message field.")).markdown()]},activated:T(this.includeData)}),this.editor.groups.options(),this.editor.visibility(),this.editor.alias(this);const r=this.editor.form({controls:[new rc.Notification(ol("block:mailer","By default the data generated by this block (recipient address, subject, message and optionally sender address) will not be stored in the dataset. To change this behavior, please use the *exportability* feature."),"info").markdown()]}).visible(!T(this.recipientExportable)),a=this.editor.exportable({ref:this,props:[{name:"recipientExportable",label:ol("block:mailer","Include recipient address in the dataset")},{name:"subjectExportable",label:ol("block:mailer","Include subject in the dataset")},{name:"messageExportable",label:ol("block:mailer","Include message in the dataset")},{name:"senderExportable",label:ol("block:mailer","Include sender address in the dataset")}]},!1).onToggle((e=>r.visible(!e.isActivated)));a.card instanceof rc.Form&&(null===(e=a.card.control(3))||void 0===e||e.visible(_(this.sender)))}defineConditions(){ee([{label:ol("block:mailer","Mail will be sent"),icon:ND,willMail:!0},{label:ol("block:mailer","No mail will be sent"),icon:_D,willMail:!1}],(e=>{this.conditions.template({condition:LD,label:e.label,icon:e.icon,burst:!0,props:{slot:this.recipientSlot,willMail:e.willMail}})}))}};function DD(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}ID([Mi],CD.prototype,"recipient",void 0),ID([Mi],CD.prototype,"recipientFixed",void 0),ID([Mi,od("#slots")],CD.prototype,"sender",void 0),ID([Mi],CD.prototype,"senderFixed",void 0),ID([Mi,od("#slots")],CD.prototype,"alias",void 0),ID([Mi,od("#slots")],CD.prototype,"includeData",void 0),ID([Mi,od("#slots")],CD.prototype,"recipientExportable",void 0),ID([Mi,od("#slots")],CD.prototype,"senderExportable",void 0),ID([Mi,od("#slots")],CD.prototype,"subjectExportable",void 0),ID([Mi,od("#slots")],CD.prototype,"messageExportable",void 0),ID([Ps],CD.prototype,"defineSlot",null),ID([cd],CD.prototype,"defineEditor",null),ID([nd],CD.prototype,"defineConditions",null),CD=ID([Ia({type:"node",identifier:"tripetto-block-mailer",version:"5.0.2",icon:kD,get label(){return ol("block:mailer","Send email")},kind:"headless"})],CD);class AD extends Rl.Item{constructor(){super(...arguments),this.name=""}defineSlot(){return this.ref.slots.dynamic({type:Ki.String,reference:this.id,label:ol("block:matrix","Matrix row"),sequence:this.index,name:this.name&&Us(this.name,ts.MarkdownFeatures.Formatting|ts.MarkdownFeatures.Hyperlinks)||void 0,alias:this.alias,exportable:this.ref.exportable,exchange:["alias","exportable"],pipeable:{label:ol("block:matrix","Row"),content:"value",legacy:"Row"}})}deleteSlot(){this.ref.slots.delete(this.id,"dynamic")}defineEditor(){this.editor.option({name:ol("block:matrix","Row"),form:{title:ol("block:matrix","Row name"),controls:[new rc.Text("singleline",rc.Text.bind(this,"name","")).action("@",Ic(this)).autoFocus().autoSelect().enter(this.editor.close).escape(this.editor.close)]},locked:!0}),this.editor.option({name:ol("block:matrix","Description"),form:{title:ol("block:matrix","Row description"),controls:[new rc.Text("multiline",rc.Text.bind(this,"explanation",void 0)).action("@",Ic(this))]},activated:_(this.explanation)}),this.editor.group(ol("block:matrix","Options")),this.editor.option({name:ol("block:matrix","Required"),form:{title:ol("block:matrix","Required"),controls:[new rc.Checkbox(ol("block:matrix","Row is required and cannot be skipped"),rc.Checkbox.bind(this.defineSlot(),"required",void 0,!0)).locked(this.ref&&T(this.ref.required)||!1).on((()=>this.refresh("name")))]},activated:T(this.defineSlot().required),disabled:this.ref&&T(this.ref.required)}),this.editor.option({name:ol("block:matrix","Identifier"),form:{title:ol("block:matrix","Row identifier"),controls:[new rc.Text("singleline",rc.Text.bind(this,"alias",void 0)),new rc.Static(ol("block:matrix","If a row identifier is set, this identifier will be used instead of the label."))]},activated:_(this.alias)})}}DD([Mi("string"),ud],AD.prototype,"name",void 0),DD([Mi("string","optional"),dd],AD.prototype,"alias",void 0),DD([Mi("string","optional")],AD.prototype,"explanation",void 0),DD([rd,vd,yd,fd],AD.prototype,"defineSlot",null),DD([ld],AD.prototype,"deleteSlot",null),DD([cd],AD.prototype,"defineEditor",null);class jD extends Rl.Item{constructor(){super(...arguments),this.label=""}defineEditor(){this.editor.option({name:ol("block:matrix","Column"),form:{title:ol("block:matrix","Column name"),controls:[new rc.Text("singleline",rc.Text.bind(this,"label","")).action("@",Ic(this)).autoFocus().autoSelect().enter(this.editor.close).escape(this.editor.close)]},locked:!0}),this.editor.group(ol("block:matrix","Options")),this.editor.option({name:ol("block:matrix","Identifier"),form:{title:ol("block:matrix","Column identifier"),controls:[new rc.Text("singleline",rc.Text.bind(this,"value",void 0)),new rc.Static(ol("block:matrix","If a column identifier is set, this identifier will be used instead of the label."))]},activated:_(this.value)});const e=this.ref.slots.select("score","feature");this.editor.option({name:ol("block:matrix","Score"),form:{title:ol("block:matrix","Score"),controls:[new rc.Numeric(rc.Numeric.bind(this,"score",void 0)).precision((null==e?void 0:e.precision)||0).digits((null==e?void 0:e.digits)||0).decimalSign((null==e?void 0:e.decimal)||"").thousands(!!(null==e?void 0:e.separator),(null==e?void 0:e.separator)||"").prefix((null==e?void 0:e.prefix)||"").prefixPlural((null==e?void 0:e.prefixPlural)||void 0).suffix((null==e?void 0:e.suffix)||"").suffixPlural((null==e?void 0:e.suffixPlural)||void 0)]},activated:!0,locked:!!e,disabled:!e})}}DD([Mi("string"),ud],jD.prototype,"label",void 0),DD([Mi("string","optional"),dd],jD.prototype,"value",void 0),DD([Mi("number","optional"),pd],jD.prototype,"score",void 0),DD([cd],jD.prototype,"defineEditor",null);var TD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2LjUgMmgtMTNDMi42NzMgMiAyIDIuNjczIDIgMy41djEzYzAgLjgyNy42NzMgMS41IDEuNSAxLjVoMTNjLjgyNyAwIDEuNS0uNjczIDEuNS0xLjV2LTEzYzAtLjgyNy0uNjczLTEuNS0xLjUtMS41em0uNSAxLjVWN2gtNFYzaDMuNWEuNS41IDAgMCAxIC41LjV6TTggMTJWOGg0djRIOHptNCAxdjRIOHYtNGg0em0tNS0xSDNWOGg0djR6bTEtNVYzaDR2NEg4em01IDFoNHY0aC00Vjh6TTMuNSAzSDd2NEgzVjMuNWEuNS41IDAgMCAxIC41LS41ek0zIDE2LjVWMTNoNHY0SDMuNWEuNS41IDAgMCAxLS41LS41em0xMy41LjVIMTN2LTRoNHYzLjVhLjUuNSAwIDAgMS0uNS41eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48L3N2Zz4=";let zD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0}get column(){return this.columnRef}set column(e){this.columnRef&&this.columnRef.unhookContext(this),this.columnRef=e,e&&(e.hook("OnRename","framed",(()=>this.rerender()),this),e.hook("OnDelete","framed",(()=>this.delete()),this))}get name(){return(this.row?Us(this.row.name)+(this.column?` \`${Bs(this.column.label)}\``:""):"")||this.type.label}get title(){var e;return Us((null===(e=this.row)||void 0===e?void 0:e.name)||"")}defineEditor(){const e=[];this.node&&this.node.block instanceof PD&&this.node.block.columns.each((t=>{(t.label||t===this.column)&&e.push({label:t.label,value:t})})),this.editor.form({controls:[new rc.Dropdown(e,rc.Dropdown.bind(this,"column",void 0))]})}};DD([od("#name"),ad("#rows")],zD.prototype,"row",void 0),DD([od("#name"),ad("#columns")],zD.prototype,"column",null),DD([cd],zD.prototype,"defineEditor",null),zD=DD([Ia({type:"condition",context:"tripetto-block-matrix",identifier:"tripetto-block-matrix",version:"4.1.2",icon:TD,get label(){return ol("block:matrix","Matrix")}})],zD);var ED="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgOEgxM1YzLjVhLjUuNSAwIDAgMC0uNS0uNWgtNmEuNS41IDAgMCAwLS41LjVWNkguNWEuNS41IDAgMCAwLS41LjV2MTBhLjUuNSAwIDAgMCAuNS41aDE4YS41LjUgMCAwIDAgLjUtLjV2LThhLjUuNSAwIDAgMC0uNS0uNXpNNyA0aDV2MTJIN1Y0ek0xIDdoNXY5SDFWN3ptMTcgOWgtNVY5aDV2N3oiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTkuNSAxMGEuNS41IDAgMCAxLS41LS41di00YS41LjUgMCAwIDEgMSAwdjRhLjUuNSAwIDAgMS0uNS41em0tNSAzaC0yYS41LjUgMCAwIDEtLjUtLjV2LTJhLjUuNSAwIDAgMSAuNS0uNUg0VjlIMi41YS41LjUgMCAwIDEgMC0xaDJhLjUuNSAwIDAgMSAuNS41djJhLjUuNSAwIDAgMS0uNS41SDN2MWgxLjVhLjUuNSAwIDAgMSAwIDF6bTEyLTNoLTJhLjUuNSAwIDAgMCAwIDFIMTZ2MWgtMS41YS41LjUgMCAwIDAgMCAxSDE2djFoLTEuNWEuNS41IDAgMCAwIDAgMWgyYS41LjUgMCAwIDAgLjUtLjV2LTRhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";let OD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Numeric){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:matrix","or")} @${e.id} > ${this.parse(e,this.to)}`;case"defined":return`@${e.id} ${ol("block:matrix","calculated")}`;case"undefined":return`@${e.id} ${ol("block:matrix","not calculated")}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,((e,t)=>il.locale.number(e,t,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:matrix","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:matrix","Score is equal to"),value:"equal"},{label:ol("block:matrix","Score is not equal to"),value:"not-equal"},{label:ol("block:matrix","Score is lower than"),value:"below"},{label:ol("block:matrix","Score is higher than"),value:"above"},{label:ol("block:matrix","Score is between"),value:"between"},{label:ol("block:matrix","Score is not between"),value:"not-between"},{label:ol("block:matrix","Score is calculated"),value:"defined"},{label:ol("block:matrix","Score is not calculated"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(t.visible("defined"!==e.value&&"undefined"!==e.value),i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:matrix","If score equals");break;case"not-equal":t.title=ol("block:matrix","If score not equals");break;case"below":t.title=ol("block:matrix","If score is lower than");break;case"above":t.title=ol("block:matrix","If score is higher than");break;case"between":t.title=ol("block:matrix","If score is between");break;case"not-between":t.title=ol("block:matrix","If score is not between")}}))]});const e=(e,t,i)=>{var s;const o=this[e],n=this.slot,r=new rc.Numeric(A(o)?o:0).label(ol("block:matrix","Use fixed number")).precision((null==n?void 0:n.precision)||0).digits((null==n?void 0:n.digits)||0).decimalSign((null==n?void 0:n.decimal)||"").thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||"").prefix((null==n?void 0:n.prefix)||"").prefixPlural((null==n?void 0:n.prefixPlural)||void 0).suffix((null==n?void 0:n.suffix)||"").suffixPlural((null==n?void 0:n.suffixPlural)||void 0).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),a=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(o)?o:void 0,!0,null===(s=this.slot)||void 0===s?void 0:s.id),l=new rc.Dropdown(a,_(o)?o:"").label(ol("block:matrix","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:matrix","Number"),value:"number"},{label:ol("block:matrix","Value"),value:"variable",disabled:0===a.length}],_(o)?"variable":"number").on((e=>{r.visible("number"===e.value),l.visible("variable"===e.value),r.isObservable&&r.focus()})),r,l]}).visible(i)},t=e("value",ol("block:matrix","If score equals"),"defined"!==this.mode&&"undefined"!==this.mode),i=e("to",ol("block:matrix","And"),"between"===this.mode||"not-between"===this.mode)}};DD([Mi,od("#name")],OD.prototype,"mode",void 0),DD([Mi,od("#name")],OD.prototype,"value",void 0),DD([Mi,od("#name")],OD.prototype,"to",void 0),DD([cd],OD.prototype,"defineEditor",null),OD=DD([Ia({type:"condition",context:"tripetto-block-matrix",identifier:"tripetto-block-matrix:score",version:"4.1.2",icon:ED,get label(){return ol("block:matrix","Verify score")}})],OD);let PD=class extends Sa{constructor(){super(...arguments),this.columns=Rl.of(jD,this),this.rows=Rl.of(AD,this)}get label(){return sl("block:matrix","%2 (%1 row)","%2 (%1 rows)",this.rows.count,this.type.label)}defineEditor(){this.editor.name(),this.editor.description(),this.editor.explanation();const e=this.editor.collection({collection:this.rows,title:ol("block:matrix","Rows"),placeholder:ol("block:matrix","Unnamed row"),sorting:"manual",autoOpen:!0,allowVariables:!0,allowImport:!0,allowExport:!0,allowDedupe:!0,showAliases:!0,markdown:ts.MarkdownFeatures.Formatting|ts.MarkdownFeatures.Hyperlinks,indicator:e=>{var t;return!T(this.required)&&(null===(t=this.slots.select(e.id))||void 0===t?void 0:t.required)&&ol("block:matrix","Required").toUpperCase()||void 0},emptyMessage:ol("block:matrix","Click the + button to add a row...")}),t=this.editor.collection({collection:this.columns,title:ol("block:matrix","Columns"),placeholder:ol("block:matrix","Unnamed column"),autoOpen:!0,showAliases:!0,allowVariables:!0,allowImport:!0,allowExport:!0,allowDedupe:!0,markdown:ts.MarkdownFeatures.Formatting|ts.MarkdownFeatures.Hyperlinks,sorting:"manual",emptyMessage:ol("block:matrix","Click the + button to add a column...")});this.editor.groups.options(),this.editor.required(this,ol("block:matrix","All rows need an answer"),(t=>{this.rows.each((e=>{e.defineSlot().required=t,e.refresh()})),e.refresh()})),this.editor.scores({target:this,collection:t,description:ol("block:matrix","Generates a score based on the selected column for each row. Open the settings panel for each column to set the score.")}),this.editor.visibility(),this.editor.exportable(this)}defineConditions(){this.rows.each((e=>{if(e.name){const t=this.conditions.group(e.name,void 0,!0);this.columns.each((i=>{i.label&&t.template({condition:zD,label:i.label,burst:!0,props:{slot:this.slots.select(e.id),row:e,column:i}})}))}}));const e=this.slots.select("score","feature");if(e&&e.label){const t=this.conditions.group(e.label,ED,!1,!0);ee([{mode:"equal",label:ol("block:matrix","Score is equal to")},{mode:"not-equal",label:ol("block:matrix","Score is not equal to")},{mode:"below",label:ol("block:matrix","Score is lower than")},{mode:"above",label:ol("block:matrix","Score is higher than")},{mode:"between",label:ol("block:matrix","Score is between")},{mode:"not-between",label:ol("block:matrix","Score is not between")},{mode:"defined",label:ol("block:matrix","Score is calculated")},{mode:"undefined",label:ol("block:matrix","Score is not calculated")}],(i=>{t.template({condition:OD,label:i.label,autoOpen:"defined"!==i.mode&&"undefined"!==i.mode,props:{slot:e,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}))}}};function RD(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}DD([Mi("columns"),Na("#collection","rows")],PD.prototype,"columns",void 0),DD([Mi("items"),od("#name")],PD.prototype,"rows",void 0),DD([Mi("boolean","optional"),od("#required")],PD.prototype,"required",void 0),DD([Mi("boolean","optional"),od("#slots"),od("#collection","rows")],PD.prototype,"exportable",void 0),DD([cd],PD.prototype,"defineEditor",null),DD([nd],PD.prototype,"defineConditions",null),PD=DD([Ia({type:"node",identifier:"tripetto-block-matrix",version:"4.1.2",icon:TD,get label(){return ol("block:matrix","Matrix")}})],PD);class HD extends Rl.Item{constructor(){super(...arguments),this.name=""}defineSlot(){if(this.ref.multiple&&!_(this.url)){const e=this.name&&Us(this.name,ts.MarkdownFeatures.None)||void 0,t=this.ref.slots.dynamic({type:Ki.Boolean,reference:this.id,label:ol("block:multiple-choice","Choice"),sequence:this.index,name:e,alias:this.value,required:this.ref.required,exportable:"concatenate"!==this.ref.format&&this.ref.exportable,pipeable:{label:ol("block:multiple-choice","Choice"),content:this.moniker?{string:e||"",markdown:this.moniker}:this.name!==e?{string:e||"",text:this.name}:"name",alias:this.ref.alias,legacy:"Choice"}});t.labelForTrue=this.labelForTrue||this.ref.labelForTrue||ol("block:multiple-choice","Selected"),t.labelForFalse=this.labelForFalse||this.ref.labelForFalse||ol("block:multiple-choice","Not selected")}else this.deleteSlot()}deleteSlot(){this.ref.slots.delete(this.id,"dynamic")}defineEditor(){this.editor.option({name:ol("block:multiple-choice","Name"),form:{title:ol("block:multiple-choice","Choice name"),controls:[new rc.Text("singleline",rc.Text.bind(this,"name","")).action("@",Ic(this)).autoFocus().autoSelect().enter(this.editor.close).escape(this.editor.close)]},locked:!0}),this.editor.option({name:ol("block:multiple-choice","Description"),form:{title:ol("block:multiple-choice","Choice description"),controls:[new rc.Text("singleline",rc.Text.bind(this,"description",void 0)).action("@",Ic(this))]},activated:_(this.description)}),this.editor.group(ol("block:multiple-choice","Options")),this.editor.option({name:ol("block:multiple-choice","URL"),form:{title:ol("block:multiple-choice","URL"),controls:[new rc.Text("singleline",rc.Text.bind(this,"url",void 0)).placeholder("https://").action("@",Ic(this)).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)?"pass":"fail")),new rc.Checkbox(ol("block:multiple-choice","Open in new tab/window"),"self"!==this.target).on((e=>{this.target=e.isFeatureEnabled?e.isChecked?"blank":"self":void 0})),new rc.Static(ol("block:multiple-choice","If a URL is set, clicking the choice will open it. The choice cannot be selected as answer."))]},activated:_(this.url),on:i=>{e.disabled(i.isActivated),n.disabled(i.isActivated),t.disabled(i.isActivated||!this.ref.multiple),o.disabled(i.isActivated||!this.ref.multiple)}});const e=this.editor.option({name:ol("block:multiple-choice","Moniker"),form:{title:ol("block:multiple-choice","Choice moniker"),controls:[new rc.Text("singleline",rc.Text.bind(this,"moniker",void 0)).action("@",Ic(this)),new rc.Static(ol("block:multiple-choice","If a moniker is set, this moniker will be used when referred to this choice."))]},activated:_(this.moniker),disabled:_(this.url)}),t=this.editor.option({name:ol("block:multiple-choice","Exclusivity"),form:{title:ol("block:multiple-choice","Choice exclusivity"),controls:[new rc.Checkbox(ol("block:multiple-choice","Unselect all other selected choices when selected"),rc.Checkbox.bind(this,"exclusive",void 0,!0))]},activated:this.ref.multiple&&!_(this.url)&&T(this.exclusive)||!1,disabled:!this.ref.multiple||_(this.url)}),i=ol("block:multiple-choice","Selected"),s=ol("block:multiple-choice","Not selected"),o=this.editor.option({name:ol("block:multiple-choice","Labels"),form:{title:ol("block:multiple-choice","Labels"),controls:[new rc.Text("singleline",rc.Text.bind(this,"labelForTrue",void 0)).placeholder(i),new rc.Text("singleline",rc.Text.bind(this,"labelForFalse",void 0)).placeholder(s),new rc.Static(ol("block:multiple-choice","These labels will be used in the dataset and override the default values %1 and %2.",`**${i}**`,`**${s}**`)).markdown()]},activated:_(this.labelForTrue)||_(this.labelForFalse),disabled:!this.ref.multiple||_(this.url)}),n=this.editor.option({name:ol("block:multiple-choice","Identifier"),form:{title:ol("block:multiple-choice","Choice identifier"),controls:[new rc.Text("singleline",rc.Text.bind(this,"value",void 0)),new rc.Static(ol("block:multiple-choice","If a choice identifier is set, this identifier will be used instead of the label."))]},activated:_(this.value),disabled:_(this.url)}),r=this.ref.slots.select("score","feature");this.editor.option({name:ol("block:multiple-choice","Score"),form:{title:ol("block:multiple-choice","Score"),controls:[new rc.Numeric(rc.Numeric.bind(this,"score",void 0)).precision((null==r?void 0:r.precision)||0).digits((null==r?void 0:r.digits)||0).decimalSign((null==r?void 0:r.decimal)||"").thousands(!!(null==r?void 0:r.separator),(null==r?void 0:r.separator)||"").prefix((null==r?void 0:r.prefix)||"").prefixPlural((null==r?void 0:r.prefixPlural)||void 0).suffix((null==r?void 0:r.suffix)||"").suffixPlural((null==r?void 0:r.suffixPlural)||void 0)]},activated:!0,locked:!!r,disabled:!r})}}RD([Mi("string"),ud],HD.prototype,"name",void 0),RD([Mi("string","optional")],HD.prototype,"description",void 0),RD([Mi("string","optional"),od("#refresh")],HD.prototype,"url",void 0),RD([Mi("string","optional")],HD.prototype,"target",void 0),RD([Mi("string","optional"),od("#refresh")],HD.prototype,"moniker",void 0),RD([Mi("string","optional"),dd],HD.prototype,"value",void 0),RD([Mi("string","optional"),od("#refresh")],HD.prototype,"labelForTrue",void 0),RD([Mi("string","optional"),od("#refresh")],HD.prototype,"labelForFalse",void 0),RD([Mi("number","optional"),pd],HD.prototype,"score",void 0),RD([Mi("boolean","optional"),od("#name")],HD.prototype,"exclusive",void 0),RD([rd,vd,yd,fd],HD.prototype,"defineSlot",null),RD([ld],HD.prototype,"deleteSlot",null),RD([cd],HD.prototype,"defineEditor",null);var FD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTEwIDIwYy0yLjY3MSAwLTUuMTgyLTEuMDQtNy4wNzEtMi45MjlTMCAxMi42NzEgMCAxMGMwLTIuNjcxIDEuMDQtNS4xODIgMi45MjktNy4wNzFTNy4zMjkgMCAxMCAwYzIuNjcxIDAgNS4xODIgMS4wNCA3LjA3MSAyLjkyOVMyMCA3LjMyOSAyMCAxMGMwIDIuNjcxLTEuMDQgNS4xODItMi45MjkgNy4wNzFTMTIuNjcxIDIwIDEwIDIwem0wLTE5Yy00Ljk2MyAwLTkgNC4wMzctOSA5czQuMDM3IDkgOSA5IDktNC4wMzcgOS05LTQuMDM3LTktOS05eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48cGF0aCBkPSJNMTAgMTZjLTMuMzA4IDAtNi0yLjY5Mi02LTZzMi42OTItNiA2LTYgNiAyLjY5MiA2IDYtMi42OTIgNi02IDZ6bTAtMTFjLTIuNzU3IDAtNSAyLjI0My01IDVzMi4yNDMgNSA1IDUgNS0yLjI0MyA1LTUtMi4yNDMtNS01LTV6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",UD="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggY2xhc3M9InRyaXBldHRvLWZpbGwiIGQ9Ik0xOCAxOS41SDJjLS44MjcgMC0xLjUtLjY3My0xLjUtMS41VjJDLjUgMS4xNzMgMS4xNzMuNSAyIC41aDE2Yy44MjcgMCAxLjUuNjczIDEuNSAxLjV2MTZjMCAuODI3LS42NzMgMS41LTEuNSAxLjV6TTIgMS41YS41LjUgMCAwIDAtLjUuNXYxNmEuNS41IDAgMCAwIC41LjVoMTZhLjUuNSAwIDAgMCAuNS0uNVYyYS41LjUgMCAwIDAtLjUtLjV6Ii8+PHBhdGggY2xhc3M9InRyaXBldHRvLWZpbGwiIGQ9Ik04IDE0YS41MDIuNTAyIDAgMCAxLS4zNTQtLjE0NmwtMy0zYS41LjUgMCAwIDEgLjcwNy0uNzA3bDIuNjQ2IDIuNjQ2IDYuNjQ2LTYuNjQ2YS41LjUgMCAwIDEgLjcwNy43MDdsLTcgN2EuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnoiLz48L3N2Zz4=";let BD=class extends Zs{get icon(){var e,t;return(null===(e=this.node)||void 0===e?void 0:e.block)instanceof $D&&(null===(t=this.node)||void 0===t?void 0:t.block.multiple)?UD:FD}get name(){var e;return(null===(e=this.choice)||void 0===e?void 0:e.name)||this.type.label}get label(){var e;return(null===(e=this.node)||void 0===e?void 0:e.block)instanceof $D&&(this.node.block.alias||this.node.label)||""}get choices(){return this.node&&this.node.block instanceof $D&&this.node.block.choices||void 0}migrate(){var e;if(this.choice&&(null===(e=this.node)||void 0===e?void 0:e.block)instanceof $D){const e=this.node.block.slots,t=this.node.block.multiple?this.choice.id:"choice";return()=>{var i;return(null===(i=this.node)||void 0===i?void 0:i.block)instanceof $D&&(this.slot=e.select(t),!0)}}}defineEditor(){if(this.node&&this.choices){const e=[];this.choices.each((t=>{C(t.name)&&e.push({label:Us(t.name),value:t})})),P(e)>0&&this.editor.form({title:this.node.label,controls:[new rc.Dropdown(e,rc.Dropdown.bind(this,"choice",void 0))]})}}};RD([od("#condition"),ad("#choices")],BD.prototype,"choice",void 0),RD([Os("slot")],BD.prototype,"migrate",null),RD([cd],BD.prototype,"defineEditor",null),BD=RD([Ia({type:"condition",context:"tripetto-block-multiple-choice",identifier:"tripetto-block-multiple-choice",version:"5.2.3",alias:"multiple-choice",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2LjIzIDMuMzA3Yy0uMzk2LS4yNjgtLjk0OS0uNTA0LTEuNjQzLS43MDJDMTMuMjIxIDIuMjE1IDExLjQxNSAyIDkuNSAycy0zLjcyMi4yMTUtNS4wODcuNjA1Yy0uNjk0LjE5OC0xLjI0Ni40MzQtMS42NDMuNzAyLS42MzcuNDMtLjc3Ljg4Ni0uNzcgMS4xOTNWNWMwIC40MjguMzIxIDEuMTMzLjYzOSAxLjYwOWw0Ljg5MSA3LjMzNmMuMjUxLjM3Ni40NzEgMS4xMDMuNDcxIDEuNTU1djNhLjUuNSAwIDAgMCAuNzI0LjQ0N2wyLTFhLjUuNSAwIDAgMCAuMjc2LS40NDd2LTJjMC0uNDUyLjIyLTEuMTc5LjQ3MS0xLjU1NWw0Ljg5MS03LjMzNmMuMzE3LS40NzYuNjM5LTEuMTgyLjYzOS0xLjYwOXYtLjVjMC0uMzA3LS4xMzQtLjc2My0uNzctMS4xOTN6bS0xMS41NDIuMjZDNS45NjcgMy4yMDIgNy42NzYgMyA5LjUgM3MzLjUzNC4yMDEgNC44MTIuNTY3QzE1LjY5IDMuOTYxIDE2IDQuMzgzIDE2IDQuNXMtLjMxLjU0LTEuNjg4LjkzM0MxMy4wMzMgNS43OTggMTEuMzI0IDYgOS41IDZzLTMuNTM0LS4yMDEtNC44MTItLjU2N0MzLjMxIDUuMDM5IDMgNC42MTcgMyA0LjVzLjMxLS41NCAxLjY4OC0uOTMzem01Ljk1MSA5LjgyNGMtLjM1OC41MzctLjYzOSAxLjQ2NC0uNjM5IDIuMTA5djEuNjkxbC0xIC41VjE1LjVjMC0uNjQ2LS4yODEtMS41NzItLjYzOS0yLjEwOWwtNC44OC03LjMyYy4yNzQuMTE3LjU4NS4yMjYuOTMyLjMyNEM1Ljc3OSA2Ljc4NSA3LjU4NSA3IDkuNSA3czMuNzIyLS4yMTUgNS4wODctLjYwNWMuMzQ2LS4wOTkuNjU4LS4yMDcuOTMyLS4zMjVsLTQuODggNy4zMnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",get label(){return ol("block:multiple-choice","Choice")}})],BD);let YD=class extends Zs{};YD=RD([Ia({type:"condition",context:"tripetto-block-multiple-choice",identifier:"tripetto-block-multiple-choice:undefined",version:"5.2.3",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0ibTEwLjcwNyAxMC41IDUuNjQ2LTUuNjQ2YS41LjUgMCAwIDAtLjcwNy0uNzA3TDEwIDkuNzkzIDQuMzU0IDQuMTQ3YS41LjUgMCAwIDAtLjcwNy43MDdMOS4yOTMgMTAuNWwtNS42NDYgNS42NDZhLjUuNSAwIDAgMCAuNzA4LjcwN2w1LjY0Ni01LjY0NiA1LjY0NiA1LjY0NmEuNDk4LjQ5OCAwIDAgMCAuNzA4IDAgLjUuNSAwIDAgMCAwLS43MDdMMTAuNzA5IDEwLjV6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",get label(){return ol("block:multiple-choice","No choice made")}})],YD);var ZD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgOEgxM1YzLjVhLjUuNSAwIDAgMC0uNS0uNWgtNmEuNS41IDAgMCAwLS41LjVWNkguNWEuNS41IDAgMCAwLS41LjV2MTBhLjUuNSAwIDAgMCAuNS41aDE4YS41LjUgMCAwIDAgLjUtLjV2LThhLjUuNSAwIDAgMC0uNS0uNXpNNyA0aDV2MTJIN1Y0ek0xIDdoNXY5SDFWN3ptMTcgOWgtNVY5aDV2N3oiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTkuNSAxMGEuNS41IDAgMCAxLS41LS41di00YS41LjUgMCAwIDEgMSAwdjRhLjUuNSAwIDAgMS0uNS41em0tNSAzaC0yYS41LjUgMCAwIDEtLjUtLjV2LTJhLjUuNSAwIDAgMSAuNS0uNUg0VjlIMi41YS41LjUgMCAwIDEgMC0xaDJhLjUuNSAwIDAgMSAuNS41djJhLjUuNSAwIDAgMS0uNS41SDN2MWgxLjVhLjUuNSAwIDAgMSAwIDF6bTEyLTNoLTJhLjUuNSAwIDAgMCAwIDFIMTZ2MWgtMS41YS41LjUgMCAwIDAgMCAxSDE2djFoLTEuNWEuNS41IDAgMCAwIDAgMWgyYS41LjUgMCAwIDAgLjUtLjV2LTRhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";let VD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Numeric){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:multiple-choice","or")} @${e.id} > ${this.parse(e,this.to)}`;case"defined":return`@${e.id} ${ol("block:multiple-choice","calculated")}`;case"undefined":return`@${e.id} ${ol("block:multiple-choice","not calculated")}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,((e,t)=>il.locale.number(e,t,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:multiple-choice","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:multiple-choice","Score is equal to"),value:"equal"},{label:ol("block:multiple-choice","Score is not equal to"),value:"not-equal"},{label:ol("block:multiple-choice","Score is lower than"),value:"below"},{label:ol("block:multiple-choice","Score is higher than"),value:"above"},{label:ol("block:multiple-choice","Score is between"),value:"between"},{label:ol("block:multiple-choice","Score is not between"),value:"not-between"},{label:ol("block:multiple-choice","Score is calculated"),value:"defined"},{label:ol("block:multiple-choice","Score is not calculated"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(t.visible("defined"!==e.value&&"undefined"!==e.value),i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:multiple-choice","If score equals");break;case"not-equal":t.title=ol("block:multiple-choice","If score not equals");break;case"below":t.title=ol("block:multiple-choice","If score is lower than");break;case"above":t.title=ol("block:multiple-choice","If score is higher than");break;case"between":t.title=ol("block:multiple-choice","If score is between");break;case"not-between":t.title=ol("block:multiple-choice","If score is not between")}}))]});const e=(e,t,i)=>{var s;const o=this[e],n=this.slot,r=new rc.Numeric(A(o)?o:0).label(ol("block:multiple-choice","Use fixed number")).precision((null==n?void 0:n.precision)||0).digits((null==n?void 0:n.digits)||0).decimalSign((null==n?void 0:n.decimal)||"").thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||"").prefix((null==n?void 0:n.prefix)||"").prefixPlural((null==n?void 0:n.prefixPlural)||void 0).suffix((null==n?void 0:n.suffix)||"").suffixPlural((null==n?void 0:n.suffixPlural)||void 0).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),a=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(o)?o:void 0,!0,null===(s=this.slot)||void 0===s?void 0:s.id),l=new rc.Dropdown(a,_(o)?o:"").label(ol("block:multiple-choice","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:multiple-choice","Number"),value:"number"},{label:ol("block:multiple-choice","Value"),value:"variable",disabled:0===a.length}],_(o)?"variable":"number").on((e=>{r.visible("number"===e.value),l.visible("variable"===e.value),r.isObservable&&r.focus()})),r,l]}).visible(i)},t=e("value",ol("block:multiple-choice","If score equals"),"defined"!==this.mode&&"undefined"!==this.mode),i=e("to",ol("block:multiple-choice","And"),"between"===this.mode||"not-between"===this.mode)}};RD([Mi,od("#name")],VD.prototype,"mode",void 0),RD([Mi,od("#name")],VD.prototype,"value",void 0),RD([Mi,od("#name")],VD.prototype,"to",void 0),RD([cd],VD.prototype,"defineEditor",null),VD=RD([Ia({type:"condition",context:"tripetto-block-multiple-choice",identifier:"tripetto-block-multiple-choice:score",version:"5.2.3",icon:ZD,get label(){return ol("block:multiple-choice","Verify score")}})],VD);var WD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTIgNmEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDZMNi4xNDUuNjQ3YS41LjUgMCAwIDEgLjcwNy43MDdsLTQuNSA0LjVBLjQ5OC40OTggMCAwIDEgMS45OTggNnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXpNMiAxM2EuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDYgNC4xNDYtNC4xNDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNC41IDQuNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXpNMiAyMGEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDYgNC4xNDYtNC4xNDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNC41IDQuNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";let GD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Number){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:multiple-choice","or")} @${e.id} > ${this.parse(e,this.to)}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,(e=>il.locale.number(e,0,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:multiple-choice","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:multiple-choice","Counter is equal to"),value:"equal"},{label:ol("block:multiple-choice","Counter is not equal to"),value:"not-equal"},{label:ol("block:multiple-choice","Counter is lower than"),value:"below"},{label:ol("block:multiple-choice","Counter is higher than"),value:"above"},{label:ol("block:multiple-choice","Counter is between"),value:"between"},{label:ol("block:multiple-choice","Counter is not between"),value:"not-between"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:multiple-choice","If counter equals");break;case"not-equal":t.title=ol("block:multiple-choice","If counter not equals");break;case"below":t.title=ol("block:multiple-choice","If counter is lower than");break;case"above":t.title=ol("block:multiple-choice","If counter is higher than");break;case"between":t.title=ol("block:multiple-choice","If counter is between");break;case"not-between":t.title=ol("block:multiple-choice","If counter is not between")}}))]});const e=(e,t)=>{var i;const s=this[e],o=new rc.Numeric(A(s)?s:0).label(ol("block:multiple-choice","Use fixed number")).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),n=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(s)?s:void 0,!0,null===(i=this.slot)||void 0===i?void 0:i.id),r=new rc.Dropdown(n,_(s)?s:"").label(ol("block:multiple-choice","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:multiple-choice","Number"),value:"number"},{label:ol("block:multiple-choice","Value"),value:"variable",disabled:0===n.length}],_(s)?"variable":"number").on((e=>{o.visible("number"===e.value),r.visible("variable"===e.value),o.isObservable&&o.focus()})),o,r]})},t=e("value",ol("block:multiple-choice","If counter equals")),i=e("to",ol("block:multiple-choice","And"))}};RD([Mi,od("#name")],GD.prototype,"mode",void 0),RD([Mi,od("#name")],GD.prototype,"value",void 0),RD([Mi,od("#name")],GD.prototype,"to",void 0),RD([cd],GD.prototype,"defineEditor",null),GD=RD([Ia({type:"condition",context:"tripetto-block-multiple-choice",identifier:"tripetto-block-multiple-choice:counter",version:"5.2.3",icon:WD,get label(){return ol("block:multiple-choice","Verify counter")}})],GD);let $D=class extends Sa{constructor(){super(...arguments),this.choices=Rl.of(HD,this)}get label(){return sl("block:multiple-choice","%2 (%1 option)","%2 (%1 options)",this.choices.count,this.type.label)}defineSlot(){this.multiple?(this.slots.delete("choice","static"),this.slots.feature({type:Ki.Number,reference:"counter",label:ol("block:multiple-choice","Counter"),exportable:!1}),"concatenate"===this.format||"both"===this.format?this.slots.feature({type:Ki.Text,reference:"concatenation",label:ol("block:multiple-choice","Text value"),exportable:this.exportable,alias:this.alias}):this.slots.delete("concatenation","feature")):(this.slots.delete("counter","feature"),this.slots.delete("concatenation","feature"),this.slots.static({type:Ki.String,reference:"choice",label:ol("block:multiple-choice","Choice"),alias:this.alias,required:this.required,exportable:this.exportable,exchange:["alias","required","exportable"]}))}defineEditor(){this.editor.name(!0,!0),this.editor.option({name:ol("block:multiple-choice","Caption"),form:{title:ol("block:multiple-choice","Caption"),controls:[new rc.Text("multiline",rc.Text.bind(this,"caption",void 0)).placeholder(ol("block:multiple-choice","Type caption text here...")).action("@",Ic(this))]},activated:_(this.caption)}),this.editor.description(),this.editor.option({name:ol("block:multiple-choice","Image"),form:{title:ol("block:multiple-choice","Image"),controls:[new rc.Text("singleline",rc.Text.bind(this,"imageURL",void 0)).label(ol("block:multiple-choice","Image source URL")).inputMode("url").placeholder("https://").action("@",Ic(this)).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)||e.value.length>23&&0===e.value.indexOf("data:image/jpeg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/png;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/svg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/gif;base64,")||e.value.length>1&&"/"===e.value.charAt(0)?"pass":"fail")),new rc.Text("singleline",rc.Checkbox.bind(this,"imageWidth",void 0)).label(ol("block:multiple-choice","Image width (optional)")).width(100).align("center"),new rc.Checkbox(ol("block:multiple-choice","Display image on top of the paragraph"),rc.Checkbox.bind(this,"imageAboveText",void 0))]},activated:_(this.imageURL)}),this.editor.explanation();const e=this.editor.collection({collection:this.choices,title:ol("block:multiple-choice","Choices"),placeholder:ol("block:multiple-choice","Unnamed choice"),icon:this.multiple?UD:FD,autoOpen:!0,allowVariables:!0,allowImport:!0,allowExport:!0,allowDedupe:!0,showAliases:!0,sorting:"manual",indicator:e=>this.multiple&&e.exclusive&&ol("block:multiple-choice","Exclusive").toUpperCase()||void 0,emptyMessage:ol("block:multiple-choice","Click the + button to add a choice...")});this.editor.groups.settings(),this.editor.option({name:ol("block:multiple-choice","Multiple select"),form:{title:ol("block:multiple-choice","Multiple select"),controls:[new rc.Checkbox(ol("block:multiple-choice","Allow the selection of multiple choices"),rc.Checkbox.bind(this,"multiple",void 0,!0)).on((()=>{s.disabled(!this.multiple),r.disabled(!this.multiple),c.disabled(!this.multiple),e.icon=this.multiple?UD:FD,this.choices.each((e=>{!0===e.exclusive&&e.refresh("name")}))}))]},activated:T(this.multiple)});const t=new rc.Numeric(rc.Numeric.bind(this,"min",void 0)).min(1).max(this.max).visible(D(this.min)).indent(32).width(75).on((()=>{i.min(this.min||1)})),i=new rc.Numeric(rc.Numeric.bind(this,"max",void 0)).min(this.min||1).visible(D(this.max)).indent(32).width(75).on((()=>{t.max(this.max)})),s=this.editor.option({name:ol("block:multiple-choice","Limits"),form:{title:ol("block:multiple-choice","Limits"),controls:[new rc.Checkbox(ol("block:multiple-choice","Minimum number of selected choices"),D(this.min)).on((e=>{t.visible(e.isChecked)})),t,new rc.Checkbox(ol("block:multiple-choice","Maximum number of selected choices"),D(this.max)).on((e=>{i.visible(e.isChecked)})),i]},activated:D(this.max)||D(this.min),disabled:!this.multiple});this.editor.option({name:ol("block:multiple-choice","Randomization"),form:{title:ol("block:multiple-choice","Randomization"),controls:[new rc.Checkbox(ol("block:multiple-choice","Randomize the choices (using [Fisher-Yates shuffle](%1))","https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle"),rc.Checkbox.bind(this,"randomize",void 0,!0)).markdown()]},activated:T(this.randomize)}),this.editor.option({name:ol("block:multiple-choice","Alignment"),form:{title:ol("block:multiple-choice","Alignment"),controls:[new rc.Radiobutton([{label:ol("block:multiple-choice","Vertically (top-down)"),value:!1},{label:ol("block:multiple-choice","Horizontally (left-right)"),value:!0}],rc.Radiobutton.bind(this,"alignment",void 0))]},activated:T(this.alignment)}),this.editor.groups.options(),this.editor.required(this),this.editor.visibility();const o=ol("block:multiple-choice","Selected"),n=ol("block:multiple-choice","Not selected"),r=this.editor.option({name:ol("block:multiple-choice","Labels"),form:{title:ol("block:multiple-choice","Labels"),controls:[new rc.Text("singleline",rc.Text.bind(this,"labelForTrue",void 0)).placeholder(o),new rc.Text("singleline",rc.Text.bind(this,"labelForFalse",void 0)).placeholder(n),new rc.Static(ol("block:multiple-choice","These labels will be used in the dataset and override the default values %1 and %2.",`**${o}**`,`**${n}**`)).markdown()]},activated:_(this.labelForTrue)||_(this.labelForFalse),disabled:!this.multiple});this.editor.scores({target:this,collection:e,description:ol("block:multiple-choice","Generates a score based on the selected choices. Open the settings panel for each choice to set the individual score for that choice.")}),this.editor.alias(this);const a=new rc.Text("singleline",rc.Text.bind(this,"formatSeparatorCustom",void 0)).visible("custom"===this.formatSeparator).sanitize(!1).width(200).label(ol("block:multiple-choice","Use this separator:")),l=new rc.Group([new rc.Dropdown([{label:ol("block:multiple-choice","Comma separated"),value:"comma"},{label:ol("block:multiple-choice","Space separated"),value:"space"},{label:ol("block:multiple-choice","List on multiple lines"),value:"list"},{label:ol("block:multiple-choice","Bulleted list"),value:"bullets"},{label:ol("block:multiple-choice","Numbered list"),value:"numbers"},{label:ol("block:multiple-choice","Language sensitive conjunction (_, _, and _)"),value:"conjunction"},{label:ol("block:multiple-choice","Language sensitive disjunction (_, _, or _)"),value:"disjunction"},{label:ol("block:multiple-choice","Custom separator"),value:"custom"}],rc.Radiobutton.bind(this,"formatSeparator",void 0,"comma")).label(ol("block:multiple-choice","How to separate the selected choices:")).on((e=>{a.visible("custom"===e.value)})),a]).visible("concatenate"===this.format||"both"===this.format),c=this.editor.option({name:ol("block:multiple-choice","Data format"),form:{title:ol("block:multiple-choice","Data format"),controls:[new rc.Radiobutton([{label:ol("block:multiple-choice","Every choice as a separate field"),description:ol("block:multiple-choice","Every choice is included in the dataset as a separate value."),value:"fields"},{label:ol("block:multiple-choice","Text field with a list of all selected choices"),description:ol("block:multiple-choice","All the selected choices are concatenated to a single string of text separated using a configurable separator."),value:"concatenate"},{label:ol("block:multiple-choice","Both options above"),description:ol("block:multiple-choice","Includes every choice in the dataset together with the concatenated text."),value:"both"}],rc.Radiobutton.bind(this,"format",void 0,"fields")).label(ol("block:multiple-choice","This setting determines how the data is stored in the dataset:")).on((e=>{l.visible("concatenate"===e.value||"both"===e.value)})),l]},activated:_(this.format),disabled:!this.multiple});this.editor.exportable(this)}defineConditions(){this.choices.each((e=>{e.name&&!_(e.url)&&this.conditions.template({condition:BD,label:e.name,icon:this.multiple?UD:FD,burst:"branch",props:{choice:e,slot:this.slots.select(this.multiple?e.id:"choice")}})})),this.choices.count>0&&this.conditions.template({condition:YD,separator:!0});const e=this.slots.select("counter","feature");if(e&&e.label){const t=this.conditions.group(e.label,WD);ee([{mode:"equal",label:ol("block:multiple-choice","Counter is equal to")},{mode:"not-equal",label:ol("block:multiple-choice","Counter is not equal to")},{mode:"below",label:ol("block:multiple-choice","Counter is lower than")},{mode:"above",label:ol("block:multiple-choice","Counter is higher than")},{mode:"between",label:ol("block:multiple-choice","Counter is between")},{mode:"not-between",label:ol("block:multiple-choice","Counter is not between")}],(i=>{t.template({condition:GD,label:i.label,autoOpen:!0,props:{slot:e,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}))}const t=this.slots.select("score","feature");if(t&&t.label){const e=this.conditions.group(t.label,ZD);ee([{mode:"equal",label:ol("block:multiple-choice","Score is equal to")},{mode:"not-equal",label:ol("block:multiple-choice","Score is not equal to")},{mode:"below",label:ol("block:multiple-choice","Score is lower than")},{mode:"above",label:ol("block:multiple-choice","Score is higher than")},{mode:"between",label:ol("block:multiple-choice","Score is between")},{mode:"not-between",label:ol("block:multiple-choice","Score is not between")},{mode:"defined",label:ol("block:multiple-choice","Score is calculated")},{mode:"undefined",label:ol("block:multiple-choice","Score is not calculated")}],(i=>{e.template({condition:VD,label:i.label,autoOpen:"defined"!==i.mode&&"undefined"!==i.mode,props:{slot:t,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}))}}};function QD(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}RD([Mi("string","optional")],$D.prototype,"caption",void 0),RD([Mi("string","optional")],$D.prototype,"imageURL",void 0),RD([Mi("string","optional")],$D.prototype,"imageWidth",void 0),RD([Mi("boolean","optional")],$D.prototype,"imageAboveText",void 0),RD([Mi("items"),od("#name"),Na("#slot","choice")],$D.prototype,"choices",void 0),RD([Mi("boolean","optional"),od("#slots"),od("#collection","choices")],$D.prototype,"multiple",void 0),RD([Mi("number","optional")],$D.prototype,"min",void 0),RD([Mi("number","optional")],$D.prototype,"max",void 0),RD([Mi("boolean","optional")],$D.prototype,"alignment",void 0),RD([Mi("boolean","optional"),od("#required"),od("#slots"),od("#collection","choices")],$D.prototype,"required",void 0),RD([Mi("string","optional"),od("#slots"),od("#collection","choices"),od("#label")],$D.prototype,"alias",void 0),RD([Mi("boolean","optional"),od("#slots"),od("#collection","choices")],$D.prototype,"exportable",void 0),RD([Mi("string","optional"),od("#collection","choices")],$D.prototype,"labelForTrue",void 0),RD([Mi("string","optional"),od("#collection","choices")],$D.prototype,"labelForFalse",void 0),RD([Mi("boolean","optional")],$D.prototype,"randomize",void 0),RD([Mi("string","optional"),od("#slots"),od("#collection","choices")],$D.prototype,"format",void 0),RD([Mi("string","optional")],$D.prototype,"formatSeparator",void 0),RD([Mi("string","optional")],$D.prototype,"formatSeparatorCustom",void 0),RD([Ps],$D.prototype,"defineSlot",null),RD([cd],$D.prototype,"defineEditor",null),RD([nd],$D.prototype,"defineConditions",null),$D=RD([Ia({type:"node",identifier:"tripetto-block-multiple-choice",version:"5.2.3",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgN2gtMTJDNS42NzMgNyA1IDYuMzI3IDUgNS41UzUuNjczIDQgNi41IDRoMTJjLjgyNyAwIDEuNS42NzMgMS41IDEuNVMxOS4zMjcgNyAxOC41IDd6bS0xMi0yYS41LjUgMCAwIDAgMCAxaDEyYS41LjUgMCAwIDAgMC0xaC0xMnptMTIgN2gtMTJjLS44MjcgMC0xLjUtLjY3My0xLjUtMS41UzUuNjczIDkgNi41IDloMTJjLjgyNyAwIDEuNS42NzMgMS41IDEuNXMtLjY3MyAxLjUtMS41IDEuNXptLTEyLTJhLjUuNSAwIDAgMCAwIDFoMTJhLjUuNSAwIDAgMCAwLTFoLTEyem0xMiA3aC0xMmMtLjgyNyAwLTEuNS0uNjczLTEuNS0xLjVTNS42NzMgMTQgNi41IDE0aDEyYy44MjcgMCAxLjUuNjczIDEuNSAxLjVzLS42NzMgMS41LTEuNSAxLjV6bS0xMi0yYS41LjUgMCAwIDAgMCAxaDEyYS41LjUgMCAwIDAgMC0xaC0xMnptLTUtOEMuNjczIDcgMCA2LjMyNyAwIDUuNVMuNjczIDQgMS41IDQgMyA0LjY3MyAzIDUuNSAyLjMyNyA3IDEuNSA3em0wLTJhLjUuNSAwIDEgMCAwIDEgLjUuNSAwIDAgMCAwLTF6bTAgN0MuNjczIDEyIDAgMTEuMzI3IDAgMTAuNVMuNjczIDkgMS41IDkgMyA5LjY3MyAzIDEwLjUgMi4zMjcgMTIgMS41IDEyem0wLTJhLjUuNSAwIDEgMCAwIDEgLjUuNSAwIDAgMCAwLTF6bTAgN0MuNjczIDE3IDAgMTYuMzI3IDAgMTUuNVMuNjczIDE0IDEuNSAxNHMxLjUuNjczIDEuNSAxLjVTMi4zMjcgMTcgMS41IDE3em0wLTJhLjUuNSAwIDEgMCAwIDEgLjUuNSAwIDAgMCAwLTF6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",alias:"multiple-choice",get label(){return ol("block:multiple-choice","Multiple choice")}})],$D);var qD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1ODAiIGhlaWdodD0iNTgwIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIHZpZXdCb3g9IjAgMCA1ODAwIDU4MDAiPjxwYXRoIGNsYXNzPSJ0cmlwZXR0by1maWxsIiBkPSJNNzAwIDE1MDBoNDQwMGMyMjAgMCA0MDAgMTgwIDQwMCA0MDB2MjAwMGMwIDIyMC0xODAgNDAwLTQwMCA0MDBINzAwYy0yMjAgMC00MDAtMTgwLTQwMC00MDBWMTkwMGMwLTIyMCAxODAtNDAwIDQwMC00MDB6bTMxMDAgMjAwdjI0MDBoMTMwMGMxMTAgMCAyMDAtOTAgMjAwLTIwMFYxOTAwYzAtMTEwLTkwLTIwMC0yMDAtMjAwSDM4MDB6bS0yMDAgMjQwMFYxNzAwSDcwMGMtMTEwIDAtMjAwIDkwLTIwMCAyMDB2MjAwMGMwIDExMCA5MCAyMDAgMjAwIDIwMGgyOTAwem0xMzAwLTE0MDBjMC0xMjEtNzktMjAwLTIwMC0yMDBoLTIwMGMtMTIxIDAtMjAwIDc5LTIwMCAyMDB2NDAwYzAgMTIxIDc5IDIwMCAyMDAgMjAwaDIwMGMxMjEgMCAyMDAtNzkgMjAwLTIwMHYtNDAwem0yMDAgMHY0MDBjMCAyMzEtMTY5IDQwMC00MDAgNDAwaC0yMDBjLTIzMSAwLTQwMC0xNjktNDAwLTQwMHYtNDAwYzAtMjMxIDE2OS00MDAgNDAwLTQwMGgyMDBjMjMxIDAgNDAwIDE2OSA0MDAgNDAwem0tMjAwMCAwYzAtMTIxLTc5LTIwMC0yMDAtMjAwaC0yMDBjLTEyMSAwLTIwMCA3OS0yMDAgMjAwdjQwMGMwIDEyMSA3OSAyMDAgMjAwIDIwMGgyMDBjMTIxIDAgMjAwLTc5IDIwMC0yMDB2LTQwMHptMjAwIDB2NDAwYzAgMjMxLTE2OSA0MDAtNDAwIDQwMGgtMjAwYy0yMzEgMC00MDAtMTY5LTQwMC00MDB2LTQwMGMwLTIzMSAxNjktNDAwIDQwMC00MDBoMjAwYzIzMSAwIDQwMCAxNjkgNDAwIDQwMHptLTE2MDAgMGMwLTEyMS03OS0yMDAtMjAwLTIwMGgtMjAwYy0xMjEgMC0yMDAgNzktMjAwIDIwMHY0MDBjMCAxMjEgNzkgMjAwIDIwMCAyMDBoMjAwYzEyMSAwIDIwMC03OSAyMDAtMjAwdi00MDB6bTIwMCAwdjQwMGMwIDIzMS0xNjkgNDAwLTQwMCA0MDBoLTIwMGMtMjMxIDAtNDAwLTE2OS00MDAtNDAwdi00MDBjMC0yMzEgMTY5LTQwMCA0MDAtNDAwaDIwMGMyMzEgMCA0MDAgMTY5IDQwMCA0MDB6Ii8+PC9zdmc+",XD="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTcuNSAxMGgtNkMuNjczIDEwIDAgOS4zMjcgMCA4LjV2LTZDMCAxLjY3My42NzMgMSAxLjUgMWg2QzguMzI3IDEgOSAxLjY3MyA5IDIuNXY2YzAgLjgyNy0uNjczIDEuNS0xLjUgMS41em0tNi04YS41LjUgMCAwIDAtLjUuNXY2YS41LjUgMCAwIDAgLjUuNWg2YS41LjUgMCAwIDAgLjUtLjV2LTZhLjUuNSAwIDAgMC0uNS0uNWgtNnptNiAxOGgtNkMuNjczIDIwIDAgMTkuMzI3IDAgMTguNXYtNmMwLS44MjcuNjczLTEuNSAxLjUtMS41aDZjLjgyNyAwIDEuNS42NzMgMS41IDEuNXY2YzAgLjgyNy0uNjczIDEuNS0xLjUgMS41em0tNi04YS41LjUgMCAwIDAtLjUuNXY2YS41LjUgMCAwIDAgLjUuNWg2YS41LjUgMCAwIDAgLjUtLjV2LTZhLjUuNSAwIDAgMC0uNS0uNWgtNnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTYuNSA2aC00YS41LjUgMCAwIDEgMC0xaDRhLjUuNSAwIDAgMSAwIDF6bTAgOUg1di0xLjVhLjUuNSAwIDAgMC0xIDBWMTVIMi41YS41LjUgMCAwIDAgMCAxSDR2MS41YS41LjUgMCAwIDAgMSAwVjE2aDEuNWEuNS41IDAgMCAwIDAtMXptMTEgNWgtNmMtLjgyNyAwLTEuNS0uNjczLTEuNS0xLjV2LTE2YzAtLjgyNy42NzMtMS41IDEuNS0xLjVoNmMuODI3IDAgMS41LjY3MyAxLjUgMS41djE2YzAgLjgyNy0uNjczIDEuNS0xLjUgMS41em0tNi0xOGEuNS41IDAgMCAwLS41LjV2MTZhLjUuNSAwIDAgMCAuNS41aDZhLjUuNSAwIDAgMCAuNS0uNXYtMTZhLjUuNSAwIDAgMC0uNS0uNWgtNnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE2LjUgMTBoLTRhLjUuNSAwIDAgMSAwLTFoNGEuNS41IDAgMCAxIDAgMXptMCAyaC00YS41LjUgMCAwIDEgMC0xaDRhLjUuNSAwIDAgMSAwIDF6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==";let JD=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get icon(){var e;return"calculator"===(null===(e=this.slot)||void 0===e?void 0:e.reference)?XD:qD}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Numeric){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:number","or")} @${e.id} > ${this.parse(e,this.to)}`;case"defined":return`@${e.id} ${ol("block:number","not empty")}`;case"undefined":return`@${e.id} ${ol("block:number","empty")}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e;return null===(e=this.node)||void 0===e?void 0:e.label}parse(e,t){var i;return A(t)?e.toString(t,((e,t)=>il.locale.number(e,t,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?"@"+t:"\\_\\_"}defineEditor(){var e;const t="calculator"===(null===(e=this.slot)||void 0===e?void 0:e.reference);this.editor.form({title:ol("block:number","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:number",t?"Calculation is equal to":"Number is equal to"),value:"equal"},{label:ol("block:number",t?"Calculation is not equal to":"Number is not equal to"),value:"not-equal"},{label:ol("block:number",t?"Calculation is lower than":"Number is lower than"),value:"below"},{label:ol("block:number",t?"Calculation is higher than":"Number is higher than"),value:"above"},{label:ol("block:number",t?"Calculation is between":"Number is between"),value:"between"},{label:ol("block:number",t?"Calculation is not between":"Number is not between"),value:"not-between"},{label:ol("block:number",t?"Calculation is valid":"Number is not empty"),value:"defined"},{label:ol("block:number",t?"Calculation is not valid":"Number is empty"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(s.visible("defined"!==e.value&&"undefined"!==e.value),o.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":s.title=ol("block:number",t?"If calculation equals":"If number equals");break;case"not-equal":s.title=ol("block:number",t?"If calculation not equals":"If number not equals");break;case"below":s.title=ol("block:number",t?"If calculation is lower than":"If number is lower than");break;case"above":s.title=ol("block:number",t?"If calculation is higher than":"If number is higher than");break;case"between":s.title=ol("block:number",t?"If calculation is between":"If number is between");break;case"not-between":s.title=ol("block:number",t?"If calculation is not between":"If number is not between")}}))]});const i=(e,t,i)=>{var s;const o=this[e],n=this.slot,r=new rc.Numeric(A(o)?o:0).label(ol("block:number","Use fixed number")).precision((null==n?void 0:n.precision)||0).digits((null==n?void 0:n.digits)||0).decimalSign((null==n?void 0:n.decimal)||"").thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||"").prefix((null==n?void 0:n.prefix)||"").prefixPlural((null==n?void 0:n.prefixPlural)||void 0).suffix((null==n?void 0:n.suffix)||"").suffixPlural((null==n?void 0:n.suffixPlural)||void 0).min(null==n?void 0:n.minimum).max(null==n?void 0:n.maximum).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),a=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(o)?o:void 0,!1,null===(s=this.slot)||void 0===s?void 0:s.id),l=new rc.Dropdown(a,_(o)?o:"").label(ol("block:number","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:number","Number"),value:"number"},{label:ol("block:number","Value"),value:"variable",disabled:0===a.length}],_(o)?"variable":"number").on((e=>{r.visible("number"===e.value),l.visible("variable"===e.value),r.isObservable&&r.focus()})),r,l]}).visible(i)},s=i("value",ol("block:number",t?"If calculation equals":"If number equals"),"defined"!==this.mode&&"undefined"!==this.mode),o=i("to",ol("block:number","And"),"between"===this.mode||"not-between"===this.mode)}};var KD;QD([Mi,od("#name")],JD.prototype,"mode",void 0),QD([Mi,od("#name")],JD.prototype,"value",void 0),QD([Mi,od("#name")],JD.prototype,"to",void 0),QD([cd],JD.prototype,"defineEditor",null),JD=QD([Ia({type:"condition",context:"tripetto-block-number",identifier:"tripetto-block-number",version:"7.0.3",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2LjIzIDMuMzA3Yy0uMzk2LS4yNjgtLjk0OS0uNTA0LTEuNjQzLS43MDJDMTMuMjIxIDIuMjE1IDExLjQxNSAyIDkuNSAycy0zLjcyMi4yMTUtNS4wODcuNjA1Yy0uNjk0LjE5OC0xLjI0Ni40MzQtMS42NDMuNzAyLS42MzcuNDMtLjc3Ljg4Ni0uNzcgMS4xOTNWNWMwIC40MjguMzIxIDEuMTMzLjYzOSAxLjYwOWw0Ljg5MSA3LjMzNmMuMjUxLjM3Ni40NzEgMS4xMDMuNDcxIDEuNTU1djNhLjUuNSAwIDAgMCAuNzI0LjQ0N2wyLTFhLjUuNSAwIDAgMCAuMjc2LS40NDd2LTJjMC0uNDUyLjIyLTEuMTc5LjQ3MS0xLjU1NWw0Ljg5MS03LjMzNmMuMzE3LS40NzYuNjM5LTEuMTgyLjYzOS0xLjYwOXYtLjVjMC0uMzA3LS4xMzQtLjc2My0uNzctMS4xOTN6bS0xMS41NDIuMjZDNS45NjcgMy4yMDIgNy42NzYgMyA5LjUgM3MzLjUzNC4yMDEgNC44MTIuNTY3QzE1LjY5IDMuOTYxIDE2IDQuMzgzIDE2IDQuNXMtLjMxLjU0LTEuNjg4LjkzM0MxMy4wMzMgNS43OTggMTEuMzI0IDYgOS41IDZzLTMuNTM0LS4yMDEtNC44MTItLjU2N0MzLjMxIDUuMDM5IDMgNC42MTcgMyA0LjVzLjMxLS41NCAxLjY4OC0uOTMzem01Ljk1MSA5LjgyNGMtLjM1OC41MzctLjYzOSAxLjQ2NC0uNjM5IDIuMTA5djEuNjkxbC0xIC41VjE1LjVjMC0uNjQ2LS4yODEtMS41NzItLjYzOS0yLjEwOWwtNC44OC03LjMyYy4yNzQuMTE3LjU4NS4yMjYuOTMyLjMyNEM1Ljc3OSA2Ljc4NSA3LjU4NSA3IDkuNSA3czMuNzIyLS4yMTUgNS4wODctLjYwNWMuMzQ2LS4wOTkuNjU4LS4yMDcuOTMyLS4zMjVsLTQuODggNy4zMnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",get label(){return ol("block:number","Verify number")}})],JD),us("tripetto-block-number"),hs();let eA=KD=class extends Sa{constructor(){super(...arguments),this.startBlank=!1,this.operations=Rl.of(bC,this)}get block(){return this}get firstANS(){return"@"+this.numberSlot.id}defineSlot(){this.numberSlot=this.slots.static({type:Ki.Numeric,reference:"number",label:KD.label,exchange:["required","alias","exportable","precision","digits","decimal","separator","minimum","maximum","prefix","prefixPlural","suffix","suffixPlural"]})}defineEditor(){const e=new rc.Numeric(rc.Numeric.bind(this.numberSlot,"minimum",void 0)).precision(this.numberSlot.precision||0).digits(this.numberSlot.digits||0).decimalSign(this.numberSlot.decimal||"").thousands(!!this.numberSlot.separator,this.numberSlot.separator||"").prefix(this.numberSlot.prefix||"").prefixPlural(this.numberSlot.prefixPlural||void 0).suffix(this.numberSlot.suffix||"").suffixPlural(this.numberSlot.suffixPlural||void 0).label(ol("block:number","Minimum")),t=new rc.Numeric(rc.Numeric.bind(this.numberSlot,"maximum",void 0)).precision(this.numberSlot.precision||0).digits(this.numberSlot.digits||0).decimalSign(this.numberSlot.decimal||"").thousands(!!this.numberSlot.separator,this.numberSlot.separator||"").prefix(this.numberSlot.prefix||"").prefixPlural(this.numberSlot.prefixPlural||void 0).suffix(this.numberSlot.suffix||"").suffixPlural(this.numberSlot.suffixPlural||void 0).label(ol("block:number","Maximum")),i=new rc.Numeric(rc.Numeric.bind(this,"prefill",void 0)).precision(this.numberSlot.precision||0).digits(this.numberSlot.digits||0).decimalSign(this.numberSlot.decimal||"").thousands(!!this.numberSlot.separator,this.numberSlot.separator||"").prefix(this.numberSlot.prefix||"").prefixPlural(this.numberSlot.prefixPlural||void 0).suffix(this.numberSlot.suffix||"").suffixPlural(this.numberSlot.suffixPlural||void 0).min(this.numberSlot.minimum).max(this.numberSlot.maximum);this.editor.name(),this.editor.description(),this.editor.placeholder(),this.editor.explanation(),this.editor.groups.settings(),this.editor.option({name:ol("block:number","Format"),form:{title:ol("block:number","Format"),controls:[new rc.Dropdown([{optGroup:ol("block:number","Decimals")},{label:"#",value:0},{label:"#.#",value:1},{label:"#.##",value:2},{label:"#.###",value:3},{label:"#.####",value:4},{label:"#.#####",value:5},{label:"#.######",value:6},{label:"#.#######",value:7},{label:"#.########",value:8},{optGroup:ol("block:number","Digits")},{label:"##",value:-2},{label:"###",value:-3},{label:"####",value:-4},{label:"#####",value:-5},{label:"######",value:-6},{label:"#######",value:-7},{label:"########",value:-8},{label:"#########",value:-9},{label:"##########",value:-10},{label:"###########",value:-11},{label:"############",value:-12},{label:"#############",value:-13},{label:"##############",value:-14},{label:"###############",value:-15},{label:"################",value:-16}],(this.numberSlot.digits?-this.numberSlot.digits:this.numberSlot.precision)||0).on((o=>{this.numberSlot.precision=o.isFeatureEnabled&&D(o.value)&&o.value>=0?o.value:void 0,this.numberSlot.digits=o.isFeatureEnabled&&D(o.value)&&o.value<0?-o.value:void 0,e.precision(this.numberSlot.precision||0),t.precision(this.numberSlot.precision||0),i.precision(this.numberSlot.precision||0),e.digits(this.numberSlot.digits||0),t.digits(this.numberSlot.digits||0),i.digits(this.numberSlot.digits||0),s.disabled(!this.numberSlot.precision),l.disabled((this.numberSlot.digits||0)>0)}))]},activated:D(this.numberSlot.precision)||D(this.numberSlot.digits)});const s=new rc.Dropdown([{label:"#.#",value:"."},{label:"#,#",value:","}],rc.Dropdown.bind(this.numberSlot,"decimal",void 0)).label(ol("block:number","Decimal sign")).disabled(!this.numberSlot.precision).on((()=>{e.decimalSign(s.isFeatureEnabled&&s.value||""),t.decimalSign(s.isFeatureEnabled&&s.value||""),i.decimalSign(s.isFeatureEnabled&&s.value||"")}));this.editor.option({name:ol("block:number","Limits"),form:{title:ol("block:number","Limits"),controls:[e,t]},activated:D(this.numberSlot.minimum)||D(this.numberSlot.maximum)});const o=new rc.Text("singleline",rc.Text.bind(this.numberSlot,"prefix",void 0)).sanitize(!1).on((s=>{e.prefix(s.isFeatureEnabled&&s.value||""),t.prefix(s.isFeatureEnabled&&s.value||""),i.prefix(s.isFeatureEnabled&&s.value||"")})),n=new rc.Text("singleline",rc.Text.bind(this.numberSlot,"prefixPlural",void 0)).indent(32).sanitize(!1).on((s=>{e.prefixPlural(s.isFeatureEnabled&&s.isObservable&&s.value||void 0),t.prefixPlural(s.isFeatureEnabled&&s.isObservable&&s.value||void 0),i.prefixPlural(s.isFeatureEnabled&&s.isObservable&&s.value||void 0)})).placeholder(ol("block:number","Prefix when value is plural")).visible(_(this.numberSlot.prefixPlural));this.editor.option({name:ol("block:number","Prefix"),form:{title:ol("block:number","Prefix"),controls:[o,new rc.Checkbox(ol("block:number","Specify different prefix for plural values"),_(this.numberSlot.prefixPlural)).on((e=>{o.placeholder(e.isChecked&&ol("block:number","Prefix when value is singular")||""),n.visible(e.isChecked)})),n]},activated:_(this.numberSlot.prefix)});const r=new rc.Text("singleline",rc.Text.bind(this.numberSlot,"suffix",void 0)).sanitize(!1).on((s=>{e.suffix(s.isFeatureEnabled&&s.value||""),t.suffix(s.isFeatureEnabled&&s.value||""),i.suffix(s.isFeatureEnabled&&s.value||"")})),a=new rc.Text("singleline",rc.Text.bind(this.numberSlot,"suffixPlural",void 0)).indent(32).sanitize(!1).on((s=>{e.suffixPlural(s.isFeatureEnabled&&s.isObservable&&s.value||void 0),t.suffixPlural(s.isFeatureEnabled&&s.isObservable&&s.value||void 0),i.suffixPlural(s.isFeatureEnabled&&s.isObservable&&s.value||void 0)})).placeholder(ol("block:number","Suffix when value is plural")).visible(_(this.numberSlot.suffixPlural));this.editor.option({name:ol("block:number","Suffix"),form:{title:ol("block:number","Suffix"),controls:[r,new rc.Checkbox(ol("block:number","Specify different suffix for plural values"),_(this.numberSlot.suffixPlural)).on((e=>{r.placeholder(e.isChecked&&ol("block:number","Suffix when value is singular")||""),a.visible(e.isChecked)})),a]},activated:_(this.numberSlot.suffix)});const l=this.editor.option({name:ol("block:number","Signs"),form:{title:ol("block:number","Signs"),controls:[s,new rc.Dropdown([{label:ol("block:number","None"),value:void 0},{label:"#,###",value:","},{label:"#.###",value:"."}],rc.Dropdown.bind(this.numberSlot,"separator",void 0)).label(ol("block:number","Thousands separator")).on((s=>{e.thousands(!(!s.isFeatureEnabled||!s.value),s.isFeatureEnabled&&s.value||""),t.thousands(!(!s.isFeatureEnabled||!s.value),s.isFeatureEnabled&&s.value||""),i.thousands(!(!s.isFeatureEnabled||!s.value),s.isFeatureEnabled&&s.value||"")})),new rc.Static(ol("block:number","**Note:** These signs are used to format the number in de dataset. When the number is displayed in a runner, the appropriate user locale might be applied making it seem like changing these settings has no effect.")).markdown()]},activated:_(this.numberSlot.separator)||_(this.numberSlot.decimal),disabled:(this.numberSlot.digits||0)>0});this.editor.groups.options(),this.editor.option({name:ol("block:number","Prefill"),form:{title:ol("block:number","Prefill"),controls:[i,new rc.Static(ol("block:number","This value will be used as initial (or default) value for the number."))]},activated:A(this.prefill)}),this.editor.numeric({target:this,reference:"calculator",label:ol("block:number","Calculation"),name:ol("block:number","Calculator"),title:ol("block:number","Calculator settings"),exportable:!0,pair:this.editor.collection(xL(this,ol("block:number","Perform a calculation with the number value."),ol("block:number","Calculator")))}),this.editor.required(this.numberSlot),this.editor.visibility(),this.editor.alias(this.numberSlot),this.editor.exportable(this.numberSlot)}defineCondition(){const e=this.slots.select("calculator","feature"),t=e?this.conditions.group(this.numberSlot.label||KD.label):this.conditions;if(ee([{mode:"equal",label:ol("block:number","Number is equal to")},{mode:"not-equal",label:ol("block:number","Number is not equal to")},{mode:"below",label:ol("block:number","Number is lower than")},{mode:"above",label:ol("block:number","Number is higher than")},{mode:"between",label:ol("block:number","Number is between")},{mode:"not-between",label:ol("block:number","Number is not between")},{mode:"defined",label:ol("block:number","Number is not empty")},{mode:"undefined",label:ol("block:number","Number is empty")}],(e=>{t.template({condition:JD,icon:qD,label:e.label,autoOpen:"defined"!==e.mode&&"undefined"!==e.mode,props:{slot:this.numberSlot,mode:e.mode}})})),e){const t=this.conditions.group(e.label||ol("block:number","Calculation"));ee([{mode:"equal",label:ol("block:number","Calculation is equal to")},{mode:"not-equal",label:ol("block:number","Calculation is not equal to")},{mode:"below",label:ol("block:number","Calculation is lower than")},{mode:"above",label:ol("block:number","Calculation is higher than")},{mode:"between",label:ol("block:number","Calculation is between")},{mode:"not-between",label:ol("block:number","Calculation is not between")},{mode:"defined",label:ol("block:number","Calculation is valid")},{mode:"undefined",label:ol("block:number","Calculation is not valid")}],(i=>{t.template({condition:JD,icon:XD,label:i.label,autoOpen:"defined"!==i.mode&&"undefined"!==i.mode,props:{slot:e,mode:i.mode}})}))}}};function tA(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}var iA;QD([Mi("number","optional")],eA.prototype,"prefill",void 0),QD([Mi],eA.prototype,"operations",void 0),QD([Ps],eA.prototype,"defineSlot",null),QD([cd],eA.prototype,"defineEditor",null),QD([nd],eA.prototype,"defineCondition",null),eA=KD=QD([Ia({type:"node",identifier:"tripetto-block-number",version:"7.0.3",icon:qD,get label(){return ol("block:number","Number")}})],eA);let sA=iA=class extends Sa{static getYouTubeId(e){const t=e.match(/youtu(?:.*\/v\/|.*v\=|\.be\/)([A-Za-z0-9_\-]{11})/);return t&&2===t.length&&t[1]||""}static getVimeoId(e){const t=e.match(/\/\/(?:www\.)?vimeo\.com\/(?:channels\/staffpicks\/)?([-\w]+)/i);return t&&2===t.length&&t[1]||""}defineEditor(){this.editor.name(!0,!0),this.editor.option({name:ol("block:paragraph","Caption"),form:{title:ol("block:paragraph","Caption"),controls:[new rc.Text("multiline",rc.Text.bind(this,"caption",void 0)).placeholder(ol("block:paragraph","Type caption text here...")).action("@",Ic(this))]},activated:_(this.caption)}),this.editor.description(),this.editor.option({name:ol("block:paragraph","Image"),form:{title:ol("block:paragraph","Image"),controls:[new rc.Text("singleline",rc.Text.bind(this,"imageURL",void 0)).label(ol("block:paragraph","Image source URL")).inputMode("url").placeholder("https://").action("@",Ic(this)).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)||e.value.length>23&&0===e.value.indexOf("data:image/jpeg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/png;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/svg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/gif;base64,")||e.value.length>1&&"/"===e.value.charAt(0)?"pass":"fail")),new rc.Text("singleline",rc.Checkbox.bind(this,"imageWidth",void 0)).label(ol("block:paragraph","Image width (optional)")).width(100).align("center"),new rc.Checkbox(ol("block:paragraph","Display image on top of the paragraph"),rc.Checkbox.bind(this,"imageAboveText",void 0))]},activated:_(this.imageURL)}),this.editor.option({name:ol("block:paragraph","Video"),form:{title:ol("block:paragraph","Video"),controls:[new rc.Text("singleline",rc.Text.bind(this,"video",void 0)).inputMode("url").placeholder("https://").action("@",Ic(this)).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)&&(iA.getYouTubeId(e.value)||iA.getVimeoId(e.value))?"pass":"fail")),new rc.Static(ol("block:paragraph","Currently [YouTube](https://youtube.com) and [Vimeo](https://vimeo.com) videos are supported. Just click the share button of your video and paste the resulting embed link in the field above.")).markdown()]},activated:_(this.video)}),this.editor.explanation(),this.editor.groups.options(),this.editor.visibility()}};function oA(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}tA([Mi("string","optional")],sA.prototype,"caption",void 0),tA([Mi("string","optional")],sA.prototype,"imageURL",void 0),tA([Mi("boolean","optional")],sA.prototype,"imageAboveText",void 0),tA([Mi("string","optional")],sA.prototype,"imageWidth",void 0),tA([Mi("string","optional")],sA.prototype,"video",void 0),tA([cd],sA.prototype,"defineEditor",null),sA=iA=tA([Ia({type:"node",identifier:"tripetto-block-paragraph",version:"4.0.1",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2LjUgMjBoLTEzYy0uODI3IDAtMS41LS42NzMtMS41LTEuNXYtMTZDMiAxLjY3MyAyLjY3MyAxIDMuNSAxaDEzYy44MjcgMCAxLjUuNjczIDEuNSAxLjV2MTZjMCAuODI3LS42NzMgMS41LTEuNSAxLjV6TTMuNSAyYS41LjUgMCAwIDAtLjUuNXYxNmEuNS41IDAgMCAwIC41LjVoMTNhLjUuNSAwIDAgMCAuNS0uNXYtMTZhLjUuNSAwIDAgMC0uNS0uNWgtMTN6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjxwYXRoIGQ9Ik04LjUgNWgtM2EuNS41IDAgMCAxIDAtMWgzYS41LjUgMCAwIDEgMCAxem0wIDJoLTNhLjUuNSAwIDAgMSAwLTFoM2EuNS41IDAgMCAxIDAgMXptMCAyaC0zYS41LjUgMCAwIDEgMC0xaDNhLjUuNSAwIDAgMSAwIDF6bTAgMmgtM2EuNS41IDAgMCAxIDAtMWgzYS41LjUgMCAwIDEgMCAxem02IDJoLTlhLjUuNSAwIDAgMSAwLTFoOWEuNS41IDAgMCAxIDAgMXptMCAyaC05YS41LjUgMCAwIDEgMC0xaDlhLjUuNSAwIDAgMSAwIDF6bTAgMmgtOWEuNS41IDAgMCAxIDAtMWg5YS41LjUgMCAwIDEgMCAxem0wLTZoLTRhLjUuNSAwIDAgMS0uNS0uNXYtNmEuNS41IDAgMCAxIC41LS41aDRhLjUuNSAwIDAgMSAuNS41djZhLjUuNSAwIDAgMS0uNS41ek0xMSAxMGgzVjVoLTN2NXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",alias:"paragraph",get label(){return ol("block:paragraph","Paragraph")}})],sA);var nA="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI1ODAiIGhlaWdodD0iNTgwIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgdGV4dC1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiIgaW1hZ2UtcmVuZGVyaW5nPSJvcHRpbWl6ZVF1YWxpdHkiIHZpZXdCb3g9IjAgMCA1ODAwIDU4MDAiPjxwYXRoIGNsYXNzPSJ0cmlwZXR0by1maWxsIiBkPSJNMzMwMCAyNTAwdjIyN2wxOTctMTEzIDk5IDE3Mi0xOTcgMTE0IDE5NyAxMTQtOTkgMTcyLTE5Ny0xMTN2MjI3aC0yMDB2LTIyN2wtMTk3IDExMy05OS0xNzIgMTk3LTExNC0xOTctMTE0IDk5LTE3MiAxOTcgMTEzdi0yMjdoMjAwem0tMTAwMCAwdjIyN2wxOTctMTEzIDk5IDE3Mi0xOTcgMTE0IDE5NyAxMTQtOTkgMTcyLTE5Ny0xMTN2MjI3aC0yMDB2LTIyN2wtMTk3IDExMy05OS0xNzIgMTk3LTExNC0xOTctMTE0IDk5LTE3MiAxOTcgMTEzdi0yMjdoMjAwem0tMTAwMCAwdjIyN2wxOTctMTEzIDk5IDE3Mi0xOTcgMTE0IDE5NyAxMTQtOTkgMTcyLTE5Ny0xMTN2MjI3aC0yMDB2LTIyN2wtMTk3IDExMy05OS0xNzIgMTk3LTExNC0xOTctMTE0IDk5LTE3MiAxOTcgMTEzdi0yMjdoMjAwem00MjAwLTYwMHYyMDAwSDMwMFYxOTAwaDUyMDB6bS0yMDAgMjAwSDUwMHYxNjAwaDQ4MDBWMjEwMHoiLz48L3N2Zz4=";let rA=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.passphrase=""}get label(){return""}get name(){return this.slot?`@${this.slot.id} ${this.invert?"":"="} ${this.passphrase?"``":"\\_\\_"}`:this.type.label}get title(){var e;return null===(e=this.node)||void 0===e?void 0:e.label}defineEditor(){if(this.id){const e=()=>{(s.value||o.value)&&(s.value===o.value?this.passphrase=ft.encrypt(this.id,s.value+this.id,256,btoa):this.passphrase=""),t.visible(!!this.passphrase),i.visible(!this.passphrase)},t=new rc.Notification(ol("block:password","Password is set!"),"success").visible(!!this.passphrase),i=new rc.Notification(ol("block:password","Password not set!"),"warning").visible(!this.passphrase),s=new rc.Text("password").label(ol("block:password","Password")).autoFocus().on(e),o=new rc.Text("password").label(ol("block:password","Confirm password")).on(e);this.editor.form({title:ol("block:password","Set password"),controls:[new rc.Static(ol("block:password","You can use this condition block to verify a password. The password you set here is _never_ stored in Tripetto. Instead we use *asymmetric cryptography* to verify passwords without knowing them. As a result, you cannot see the password you set here and the fields below might be empty if a password is set. If the message *Password is set* appears, you have set a valid password and you are good to go. To set another password, enter the new password in both fields.")).markdown(),new rc.Spacer,t,i,s,o,new rc.Dropdown([{label:ol("block:password","Verify if password is right"),value:void 0},{label:ol("block:password","Verify if password is wrong"),value:!0}],rc.Dropdown.bind(this,"invert",void 0)).label(ol("block:password","Mode")).width("full")]})}}};var aA;oA([Mi,od("#name")],rA.prototype,"passphrase",void 0),oA([Mi,od("#name")],rA.prototype,"invert",void 0),oA([cd],rA.prototype,"defineEditor",null),rA=oA([Ia({type:"condition",context:"tripetto-block-password",identifier:"tripetto-block-password",version:"5.0.1",icon:nA,get label(){return ol("block:password","Password match")}})],rA);let lA=aA=class extends Sa{defineSlot(){this.passwordSlot=this.slots.static({type:Ki.String,reference:"password",label:aA.label,exportable:this.exportable||!1,exchange:["required","alias"]})}defineEditor(){this.editor.name(),this.editor.description(),this.editor.placeholder(),this.editor.explanation(),this.editor.groups.options(),this.editor.required(this.passwordSlot),this.editor.visibility(),this.editor.alias(this.passwordSlot);const e=this.editor.form({controls:[new rc.Notification(ol("block:password","By default the submitted passwords will not be stored in the dataset (assuming you just want to verify a password). If you do need the password in the dataset, please use the *exportability* feature."),"info").markdown()]}).visible(!T(this.exportable));this.editor.exportable(this,!1).onToggle((t=>e.visible(!t.isActivated)))}defineCondition(){ee([{invert:void 0,label:ol("block:password","Password matches")},{invert:!0,label:ol("block:password","Password does not match")}],(e=>{this.conditions.template({condition:rA,label:e.label,burst:!0,props:{slot:this.passwordSlot,invert:e.invert}})}))}};function cA(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}oA([Mi,od("#slots")],lA.prototype,"exportable",void 0),oA([Ps],lA.prototype,"defineSlot",null),oA([cd],lA.prototype,"defineEditor",null),oA([nd],lA.prototype,"defineCondition",null),lA=aA=oA([Ia({type:"node",identifier:"tripetto-block-password",version:"5.0.1",icon:nA,get label(){return ol("block:password","Password")}})],lA);var uA="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE3Ljg5NCA4Ljg5N2MtMS4wNDEgMC0yLjkyOC0uMzc1LTMuNTE2LS45NjMtLjM2MS0uMzYxLS40NDYtLjgxMy0uNTE1LTEuMTc3LS4wODUtLjQ0OC0uMTM2LS41ODEtLjMzMi0uNjY2LS45MDItLjM4OC0yLjE5Ni0uNjEtMy41NTEtLjYxLTEuMzQgMC0yLjYyLjIxOS0zLjUxMi42LS4xOTQuMDgzLS4yNDQuMjE2LS4zMjcuNjYzLS4wNjguMzY1LS4xNTIuODE5LS41MTIgMS4xNzktLjMyOC4zMjgtMS4wMTUuNTU0LTEuNTMzLjY4NWE4LjQzIDguNDMgMCAwIDEtMS45NjMuMjY3Yy0uNjY0IDAtMS4xMTMtLjEyNi0xLjM3Mi0uMzg2YTIuMzgzIDIuMzgzIDAgMCAxLS42ODUtMS40NjdDLjAzOSA2LjU2Ni4xMjcgNS44OS43NTYgNS4yNmMxLjAyMi0xLjAyMiAyLjM5Ni0xLjgxOSA0LjA4Ni0yLjM2OCAxLjU1NC0uNTA2IDMuMzIyLS43NzMgNS4xMTQtLjc3MyAxLjgwNCAwIDMuNTg3LjI3IDUuMTU2Ljc4MiAxLjcwNS41NTYgMy4wOTMgMS4zNjEgNC4xMjQgMi4zOTMgMS4wNSAxLjA1Ljc5IDIuNDQzLjAxMiAzLjIyMS0uMjU3LjI1Ny0uNy4zODItMS4zNTQuMzgyek05Ljk4IDQuNDgxYzEuNTA3IDAgMi45MDguMjQ2IDMuOTQ2LjY5MS43MTMuMzA2LjgzMy45MzguOTIgMS4zOTguMDUyLjI3NS4wOTcuNTEzLjI0LjY1Ni4yNTIuMjUyIDEuNzA2LjY3MSAyLjgwOS42NzEuNDgxIDAgLjYzMy0uMDgyLjY1Mi0uMDk0LjMxLS4zMTQuNjk4LTEuMDg2LS4wMTctMS44MDItMS44MDUtMS44MDUtNS4wMS0yLjg4Mi04LjU3NC0yLjg4Mi0zLjUzNSAwLTYuNzA5IDEuMDY1LTguNDkzIDIuODQ4LS4yODguMjg4LS40Mi42MTYtLjM5MS45NzQuMDI1LjMwMi4xNy42MTQuMzkuODM2LjAxOS4wMTIuMTczLjA5OC42Ny4wOTggMS4wOTggMCAyLjU0MS0uNDExIDIuNzg5LS42NTkuMTQxLS4xNDEuMTg1LS4zNzkuMjM2LS42NTQuMDg2LS40NjIuMjAzLTEuMDk1LjkxNy0xLjQgMS4wMjYtLjQzOSAyLjQxMy0uNjggMy45MDUtLjY4eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48cGF0aCBkPSJNMTYuNSAxOGgtMTNhMi4zNzMgMi4zNzMgMCAwIDEtMi4zODgtMi41MjVjLjAwNC0uMDc3LjExOC0xLjkwMSAxLjI3LTMuNzM5YTcuNSA3LjUgMCAwIDEgMi42ODYtMi41NzdDNi40MjkgOC4zOSA4LjA4OCA4IDEwIDhzMy41NzEuMzkgNC45MzIgMS4xNTlhNy40ODMgNy40ODMgMCAwIDEgMi42ODYgMi41NzdjMS4xNTIgMS44MzkgMS4yNjYgMy42NjMgMS4yNyAzLjczOUEyLjM3NiAyLjM3NiAwIDAgMSAxNi41IDE4ek0xMCA5Yy0zLjExNyAwLTUuMzg4IDEuMDg4LTYuNzQ5IDMuMjMzLTEuMDMgMS42MjMtMS4xMzkgMy4yODItMS4xNCAzLjI5OS0uMDIyLjM5Mi4xMTEuNzYxLjM3MyAxLjAzOHMuNjIzLjQzIDEuMDE3LjQzaDEzYy4zOTMgMCAuNzU0LS4xNTMgMS4wMTctLjQzcy4zOTUtLjY0Ni4zNzMtMS4wMzljLS4wMDEtLjAxNi0uMTExLTEuNjc1LTEuMTQtMy4yOThDMTUuMzg5IDEwLjA4OCAxMy4xMTggOSAxMC4wMDIgOXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTEwIDE2Yy0xLjY1NCAwLTMtMS4zNDYtMy0zczEuMzQ2LTMgMy0zIDMgMS4zNDYgMyAzLTEuMzQ2IDMtMyAzem0wLTVjLTEuMTAzIDAtMiAuODk3LTIgMnMuODk3IDIgMiAyIDItLjg5NyAyLTItLjg5Ny0yLTItMnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",hA="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2IDIwYy0xLjc3MSAwLTMuNjU1LS41MDItNS42LTEuNDkyLTEuNzkzLS45MTMtMy41NjQtMi4yMi01LjEyMi0zLjc4cy0yLjg2My0zLjMzMy0zLjc3NS01LjEyN0MuNTE1IDcuNjU1LjAxMyA1Ljc3MS4wMTMgNGMwLTEuMTQ4IDEuMDctMi4yNTcgMS41MjktMi42OEMyLjIwMy43MTEgMy4yNDMgMCAzLjk5OSAwYy4zNzYgMCAuODE2LjI0NiAxLjM4Ny43NzQuNDI1LjM5NC45MDQuOTI4IDEuMzgzIDEuNTQ0LjI4OS4zNzIgMS43MyAyLjI3MSAxLjczIDMuMTgyIDAgLjc0Ny0uODQ1IDEuMjY3LTEuNzM5IDEuODE2LS4zNDYuMjEyLS43MDMuNDMyLS45NjEuNjM5LS4yNzYuMjIxLS4zMjUuMzM4LS4zMzMuMzY0Ljk0OSAyLjM2NiAzLjg1IDUuMjY3IDYuMjE1IDYuMjE1LjAyMS0uMDA3LjEzOC0uMDUzLjM2My0uMzMzLjIwNy0uMjU4LjQyNy0uNjE2LjYzOS0uOTYxLjU1LS44OTQgMS4wNjktMS43MzkgMS44MTYtMS43MzkuOTExIDAgMi44MSAxLjQ0MSAzLjE4MiAxLjczLjYxNi40NzkgMS4xNS45NTggMS41NDQgMS4zODMuNTI4LjU3Ljc3NCAxLjAxMS43NzQgMS4zODcgMCAuNzU2LS43MTEgMS43OTktMS4zMTkgMi40NjMtLjQyNC40NjItMS41MzMgMS41MzctMi42ODEgMS41Mzd6TTMuOTk0IDFjLS4yNjguMDA1LS45ODkuMzMzLTEuNzczIDEuMDU1QzEuNDc3IDIuNzQxIDEuMDE0IDMuNDg2IDEuMDE0IDRjMCA2LjcyOSA4LjI2NCAxNSAxNC45ODYgMTUgLjUxMyAwIDEuMjU4LS40NjUgMS45NDQtMS4yMTMuNzIzLS43ODggMS4wNTEtMS41MTIgMS4wNTYtMS43ODEtLjAzMi0uMTktLjU1OC0uOTI5LTEuOTk3LTIuMDM3LTEuMjM3LS45NTItMi4yNC0xLjQ2My0yLjQ5OC0xLjQ2OS0uMDE4LjAwNS0uMTMuMDQ4LS4zNTcuMzM2LS4xOTcuMjUxLS40MDguNTk0LS42MTMuOTI2LS41Ni45MTEtMS4wODkgMS43NzItMS44NTggMS43NzJhLjk3Ljk3IDAgMCAxLS4zNjMtLjA3MWMtMi42MjUtMS4wNS01LjcyOS00LjE1NC02Ljc3OS02Ljc3OS0uMTI2LS4zMTUtLjE0Ni0uODA5LjQ3NC0xLjM3MS4zMy0uMjk5Ljc4Ni0uNTc5IDEuMjI4LS44NTEuMzMyLS4yMDQuNjc2LS40MTUuOTI2LS42MTMuMjg4LS4yMjcuMzMxLS4zMzkuMzM2LS4zNTctLjAwNy0uMjU4LS41MTctMS4yNjEtMS40NjktMi40OThDNC45MjIgMS41NTUgNC4xODMgMS4wMyAzLjk5My45OTd6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",dA="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2IDIwYy0xLjc3MSAwLTMuNjU1LS41MDItNS42LTEuNDkyLTEuNzkzLS45MTMtMy41NjQtMi4yMi01LjEyMi0zLjc4cy0yLjg2My0zLjMzMy0zLjc3NS01LjEyN0MuNTE1IDcuNjU1LjAxMyA1Ljc3MS4wMTMgNGMwLTEuMTQ4IDEuMDctMi4yNTcgMS41MjktMi42OEMyLjIwMy43MTEgMy4yNDMgMCAzLjk5OSAwYy4zNzYgMCAuODE2LjI0NiAxLjM4Ny43NzQuNDI1LjM5NC45MDQuOTI4IDEuMzgzIDEuNTQ0LjI4OS4zNzIgMS43MyAyLjI3MSAxLjczIDMuMTgyIDAgLjc0Ny0uODQ1IDEuMjY3LTEuNzM5IDEuODE2LS4zNDYuMjEyLS43MDMuNDMyLS45NjEuNjM5LS4yNzYuMjIxLS4zMjUuMzM4LS4zMzMuMzY0Ljk0OSAyLjM2NiAzLjg1IDUuMjY3IDYuMjE1IDYuMjE1LjAyMS0uMDA3LjEzOC0uMDUzLjM2My0uMzMzLjIwNy0uMjU4LjQyNy0uNjE2LjYzOS0uOTYxLjU1LS44OTQgMS4wNjktMS43MzkgMS44MTYtMS43MzkuOTExIDAgMi44MSAxLjQ0MSAzLjE4MiAxLjczLjYxNi40NzkgMS4xNS45NTggMS41NDQgMS4zODMuNTI4LjU3Ljc3NCAxLjAxMS43NzQgMS4zODcgMCAuNzU2LS43MTEgMS43OTktMS4zMTkgMi40NjMtLjQyNC40NjItMS41MzMgMS41MzctMi42ODEgMS41Mzd6TTMuOTk0IDFjLS4yNjguMDA1LS45ODkuMzMzLTEuNzczIDEuMDU1QzEuNDc3IDIuNzQxIDEuMDE0IDMuNDg2IDEuMDE0IDRjMCA2LjcyOSA4LjI2NCAxNSAxNC45ODYgMTUgLjUxMyAwIDEuMjU4LS40NjUgMS45NDQtMS4yMTMuNzIzLS43ODggMS4wNTEtMS41MTIgMS4wNTYtMS43ODEtLjAzMi0uMTktLjU1OC0uOTI5LTEuOTk3LTIuMDM3LTEuMjM3LS45NTItMi4yNC0xLjQ2My0yLjQ5OC0xLjQ2OS0uMDE4LjAwNS0uMTMuMDQ4LS4zNTcuMzM2LS4xOTcuMjUxLS40MDguNTk0LS42MTMuOTI2LS41Ni45MTEtMS4wODkgMS43NzItMS44NTggMS43NzJhLjk3Ljk3IDAgMCAxLS4zNjMtLjA3MWMtMi42MjQtMS4wNS01LjcyOS00LjE1NC02Ljc3OS02Ljc3OS0uMTI2LS4zMTUtLjE0Ni0uODA5LjQ3NC0xLjM3MS4zMy0uMjk5Ljc4Ni0uNTc5IDEuMjI4LS44NTEuMzMyLS4yMDQuNjc2LS40MTUuOTI2LS42MTMuMjg4LS4yMjcuMzMxLS4zMzkuMzM2LS4zNTctLjAwNy0uMjU4LS41MTctMS4yNjEtMS40NjktMi40OThDNC45MjIgMS41NTUgNC4xODMgMS4wMyAzLjk5My45OTd6bTEyLjIxMyA0IDIuMTQ2LTIuMTQ2YS41LjUgMCAwIDAtLjcwNy0uNzA3TDE1LjUgNC4yOTNsLTIuMTQ2LTIuMTQ2YS41LjUgMCAwIDAtLjcwNy43MDdMMTQuNzkzIDVsLTIuMTQ2IDIuMTQ2YS41LjUgMCAwIDAgLjcwOC43MDdsMi4xNDYtMi4xNDYgMi4xNDYgMi4xNDZhLjQ5OC40OTggMCAwIDAgLjcwOCAwIC41LjUgMCAwIDAgMC0uNzA3TDE2LjIwOSA1eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48L3N2Zz4=";let pA=class extends Zs{constructor(){super(...arguments),this.mode="defined"}get icon(){return"defined"===this.mode?hA:dA}get label(){return""}get name(){if(this.slot)switch(this.mode){case"defined":return`@${this.slot.id} ${ol("block:phone-number","not empty")}`;case"undefined":return`@${this.slot.id} ${ol("block:phone-number","empty")}`}return this.type.label}get title(){var e;return null===(e=this.node)||void 0===e?void 0:e.label}defineEditor(){this.editor.form({title:ol("block:phone-number","When phone number:"),controls:[new rc.Radiobutton([{label:ol("block:phone-number","Is not empty"),value:"defined"},{label:ol("block:phone-number","Is empty"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","defined"))]})}};var mA;cA([Mi,od("#name")],pA.prototype,"mode",void 0),cA([cd],pA.prototype,"defineEditor",null),pA=cA([Ia({type:"condition",context:"tripetto-block-phone-number",identifier:"tripetto-block-phone-number",version:"3.0.1",icon:uA,get label(){return ol("block:phone-number","Verify phone number")}})],pA);let gA=mA=class extends Sa{defineSlot(){this.phoneNumberSlot=this.slots.static({type:Ki.String,reference:"phone-number",label:mA.label,exchange:["required","alias","exportable"]})}defineEditor(){this.editor.name(),this.editor.description(),this.editor.placeholder(),this.editor.explanation(),this.editor.groups.options(),this.editor.required(this.phoneNumberSlot),this.editor.visibility(),this.editor.alias(this.phoneNumberSlot),this.editor.exportable(this.phoneNumberSlot)}defineCondition(){ee([{mode:"defined",label:ol("block:phone-number","Number is not empty"),icon:hA},{mode:"undefined",label:ol("block:phone-number","Number is empty"),icon:dA}],(e=>{this.conditions.template({condition:pA,label:e.label,icon:e.icon,burst:!0,props:{slot:this.phoneNumberSlot,mode:e.mode}})}))}};function bA(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r}cA([Ps],gA.prototype,"defineSlot",null),cA([cd],gA.prototype,"defineEditor",null),cA([nd],gA.prototype,"defineCondition",null),gA=mA=cA([Ia({type:"node",identifier:"tripetto-block-phone-number",version:"3.0.1",icon:uA,get label(){return ol("block:phone-number","Phone number")}})],gA);class fA extends Rl.Item{constructor(){super(...arguments),this.name="",this.nameVisible=!0}defineSlot(){if(this.ref.multiple&&!_(this.url)){const e=this.name&&Us(this.name,ts.MarkdownFeatures.None)||void 0,t=this.ref.slots.dynamic({type:Ki.Boolean,reference:this.id,label:ol("block:picture-choice","Image"),sequence:this.index,name:e,alias:this.value,required:this.ref.required,exportable:"concatenate"!==this.ref.format&&this.ref.exportable,pipeable:{label:ol("block:picture-choice","Image"),content:this.moniker?{string:e||"",markdown:this.moniker}:this.name!==e?{string:e||"",text:this.name}:"name",alias:this.ref.alias,legacy:"Image"}});t.labelForTrue=this.labelForTrue||this.ref.labelForTrue||ol("block:picture-choice","Selected"),t.labelForFalse=this.labelForFalse||this.ref.labelForFalse||ol("block:picture-choice","Not selected")}else this.deleteSlot()}deleteSlot(){this.ref.slots.delete(this.id,"dynamic")}defineEditor(){const e=new rc.Text("singleline",rc.Text.bind(this,"image",void 0)).label(ol("block:picture-choice","Image source URL")).inputMode("url").placeholder("https://").action("@",Ic(this)).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)||e.value.length>23&&0===e.value.indexOf("data:image/jpeg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/png;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/svg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/gif;base64,")||e.value.length>1&&"/"===e.value.charAt(0)?"pass":"fail")).visible(!_(this.emoji)),t=new rc.Group([new rc.Text("singleline",rc.Text.bind(this,"emoji",void 0)).label(ol("block:picture-choice","Emoji")).maxLength(12).width(65).align("center"),new rc.Static(ol("block:picture-choice","Windows users press: **WIN + .**")).markdown(),new rc.Static(ol("block:picture-choice","MacOS users press: **CTRL + CMD + Space**")).markdown()]).visible(_(this.emoji));this.editor.option({name:ol("block:picture-choice","Name"),form:{title:ol("block:picture-choice","Image name"),controls:[new rc.Text("singleline",rc.Text.bind(this,"name","")).action("@",Ic(this)).autoFocus().autoSelect(),new rc.Checkbox(ol("block:picture-choice","Show this name with the image"),rc.Checkbox.bind(this,"nameVisible",!0))]},locked:!0}),this.editor.form({title:ol("block:picture-choice","Image"),controls:[new rc.Radiobutton([{label:ol("block:picture-choice","Use an image"),value:"image"},{label:ol("block:picture-choice","Use an Emoji"),value:"emoji"}],_(this.emoji)?"emoji":"image").on((i=>{this.emoji="emoji"===i.value?this.emoji||"":void 0,e.visible("image"===i.value),t.visible("emoji"===i.value)})),e,t]}),this.editor.option({name:ol("block:picture-choice","Description"),form:{title:ol("block:picture-choice","Image description"),controls:[new rc.Text("singleline",rc.Text.bind(this,"description",void 0)).action("@",Ic(this))]},activated:_(this.description)}),this.editor.group(ol("block:picture-choice","Options")),this.editor.option({name:ol("block:picture-choice","URL"),form:{title:ol("block:picture-choice","URL"),controls:[new rc.Text("singleline",rc.Text.bind(this,"url",void 0)).placeholder("https://").action("@",Ic(this)).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)?"pass":"fail")),new rc.Checkbox(ol("block:picture-choice","Open in new tab/window"),"self"!==this.target).on((e=>{this.target=e.isFeatureEnabled?e.isChecked?"blank":"self":void 0})),new rc.Static(ol("block:picture-choice","If a URL is set, clicking the image will open it. The image cannot be selected as answer."))]},activated:_(this.url),on:e=>{i.disabled(e.isActivated),a.disabled(e.isActivated),s.disabled(e.isActivated||!this.ref.multiple),r.disabled(e.isActivated||!this.ref.multiple)}});const i=this.editor.option({name:ol("block:picture-choice","Moniker"),form:{title:ol("block:picture-choice","Image moniker"),controls:[new rc.Text("singleline",rc.Text.bind(this,"moniker",void 0)).action("@",Ic(this)),new rc.Static(ol("block:picture-choice","If a moniker is set, this moniker will be used when referred to this image."))]},activated:_(this.moniker),disabled:_(this.url)}),s=this.editor.option({name:ol("block:picture-choice","Exclusivity"),form:{title:ol("block:picture-choice","Image exclusivity"),controls:[new rc.Checkbox(ol("block:picture-choice","Unselect all other selected images when selected"),rc.Checkbox.bind(this,"exclusive",void 0,!0))]},activated:this.ref.multiple&&!_(this.url)&&T(this.exclusive)||!1,disabled:!this.ref.multiple||_(this.url)}),o=ol("block:picture-choice","Selected"),n=ol("block:picture-choice","Not selected"),r=this.editor.option({name:ol("block:picture-choice","Labels"),form:{title:ol("block:picture-choice","Labels"),controls:[new rc.Text("singleline",rc.Text.bind(this,"labelForTrue",void 0)).placeholder(o),new rc.Text("singleline",rc.Text.bind(this,"labelForFalse",void 0)).placeholder(n),new rc.Static(ol("block:picture-choice","These labels will be used in the dataset and override the default values %1 and %2.",`**${o}**`,`**${n}**`)).markdown()]},activated:_(this.labelForTrue)||_(this.labelForFalse),disabled:!this.ref.multiple||_(this.url)}),a=this.editor.option({name:ol("block:picture-choice","Identifier"),form:{title:ol("block:picture-choice","Image identifier"),controls:[new rc.Text("singleline",rc.Text.bind(this,"value",void 0)),new rc.Static(ol("block:picture-choice","If an image identifier is set, this identifier will be used instead of the label."))]},activated:_(this.value),disabled:_(this.url)}),l=this.ref.slots.select("score","feature");this.editor.option({name:ol("block:picture-choice","Score"),form:{title:ol("block:picture-choice","Score"),controls:[new rc.Numeric(rc.Numeric.bind(this,"score",void 0)).precision((null==l?void 0:l.precision)||0).digits((null==l?void 0:l.digits)||0).decimalSign((null==l?void 0:l.decimal)||"").thousands(!!(null==l?void 0:l.separator),(null==l?void 0:l.separator)||"").prefix((null==l?void 0:l.prefix)||"").prefixPlural((null==l?void 0:l.prefixPlural)||void 0).suffix((null==l?void 0:l.suffix)||"").suffixPlural((null==l?void 0:l.suffixPlural)||void 0)]},activated:!0,locked:!!l,disabled:!l})}}bA([Mi("string"),ud],fA.prototype,"name",void 0),bA([Mi("boolean","optional")],fA.prototype,"nameVisible",void 0),bA([Mi("string","optional")],fA.prototype,"image",void 0),bA([Mi("string","optional")],fA.prototype,"emoji",void 0),bA([Mi("string","optional")],fA.prototype,"description",void 0),bA([Mi("string","optional"),od("#refresh")],fA.prototype,"url",void 0),bA([Mi("string","optional")],fA.prototype,"target",void 0),bA([Mi("string","optional"),od("#refresh")],fA.prototype,"moniker",void 0),bA([Mi("string","optional"),dd],fA.prototype,"value",void 0),bA([Mi("string","optional"),od("#refresh")],fA.prototype,"labelForTrue",void 0),bA([Mi("string","optional"),od("#refresh")],fA.prototype,"labelForFalse",void 0),bA([Mi("number","optional"),pd],fA.prototype,"score",void 0),bA([Mi("boolean","optional"),od("#name")],fA.prototype,"exclusive",void 0),bA([rd,vd,yd,fd],fA.prototype,"defineSlot",null),bA([ld],fA.prototype,"deleteSlot",null),bA([cd],fA.prototype,"defineEditor",null);var yA="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTEwIDIwYy0yLjY3MSAwLTUuMTgyLTEuMDQtNy4wNzEtMi45MjlTMCAxMi42NzEgMCAxMGMwLTIuNjcxIDEuMDQtNS4xODIgMi45MjktNy4wNzFTNy4zMjkgMCAxMCAwYzIuNjcxIDAgNS4xODIgMS4wNCA3LjA3MSAyLjkyOVMyMCA3LjMyOSAyMCAxMGMwIDIuNjcxLTEuMDQgNS4xODItMi45MjkgNy4wNzFTMTIuNjcxIDIwIDEwIDIwem0wLTE5Yy00Ljk2MyAwLTkgNC4wMzctOSA5czQuMDM3IDkgOSA5IDktNC4wMzcgOS05LTQuMDM3LTktOS05eiIgY2xhc3M9InRyaXBldHRvLWZpbGwiLz48cGF0aCBkPSJNMTAgMTZjLTMuMzA4IDAtNi0yLjY5Mi02LTZzMi42OTItNiA2LTYgNiAyLjY5MiA2IDYtMi42OTIgNi02IDZ6bTAtMTFjLTIuNzU3IDAtNSAyLjI0My01IDVzMi4yNDMgNSA1IDUgNS0yLjI0MyA1LTUtMi4yNDMtNS01LTV6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",vA="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggY2xhc3M9InRyaXBldHRvLWZpbGwiIGQ9Ik0xOCAxOS41SDJjLS44MjcgMC0xLjUtLjY3My0xLjUtMS41VjJDLjUgMS4xNzMgMS4xNzMuNSAyIC41aDE2Yy44MjcgMCAxLjUuNjczIDEuNSAxLjV2MTZjMCAuODI3LS42NzMgMS41LTEuNSAxLjV6TTIgMS41YS41LjUgMCAwIDAtLjUuNXYxNmEuNS41IDAgMCAwIC41LjVoMTZhLjUuNSAwIDAgMCAuNS0uNVYyYS41LjUgMCAwIDAtLjUtLjV6Ii8+PHBhdGggY2xhc3M9InRyaXBldHRvLWZpbGwiIGQ9Ik04IDE0YS41MDIuNTAyIDAgMCAxLS4zNTQtLjE0NmwtMy0zYS41LjUgMCAwIDEgLjcwNy0uNzA3bDIuNjQ2IDIuNjQ2IDYuNjQ2LTYuNjQ2YS41LjUgMCAwIDEgLjcwNy43MDdsLTcgN2EuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnoiLz48L3N2Zz4=";let MA=class extends Zs{get icon(){var e,t;return(null===(e=this.node)||void 0===e?void 0:e.block)instanceof NA&&(null===(t=this.node)||void 0===t?void 0:t.block.multiple)?vA:yA}get name(){var e;return(null===(e=this.choice)||void 0===e?void 0:e.name)||this.type.label}get label(){var e;return(null===(e=this.node)||void 0===e?void 0:e.block)instanceof NA&&(this.node.block.alias||this.node.label)||""}get choices(){return this.node&&this.node.block instanceof NA&&this.node.block.choices||void 0}migrate(){var e;if(this.choice&&(null===(e=this.node)||void 0===e?void 0:e.block)instanceof NA){const e=this.node.block.slots,t=this.node.block.multiple?this.choice.id:"choice";return()=>{var i;return(null===(i=this.node)||void 0===i?void 0:i.block)instanceof NA&&(this.slot=e.select(t),!0)}}}defineEditor(){if(this.node&&this.choices){const e=[];this.choices.each((t=>{C(t.name)&&e.push({label:Us(t.name),value:t})})),P(e)>0&&this.editor.form({title:this.node.label,controls:[new rc.Dropdown(e,rc.Dropdown.bind(this,"choice",void 0))]})}}};bA([od("#condition"),ad("#choices")],MA.prototype,"choice",void 0),bA([Os("slot")],MA.prototype,"migrate",null),bA([cd],MA.prototype,"defineEditor",null),MA=bA([Ia({type:"condition",context:"tripetto-block-picture-choice",identifier:"tripetto-block-picture-choice",version:"4.2.1",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE2LjIzIDMuMzA3Yy0uMzk2LS4yNjgtLjk0OS0uNTA0LTEuNjQzLS43MDJDMTMuMjIxIDIuMjE1IDExLjQxNSAyIDkuNSAycy0zLjcyMi4yMTUtNS4wODcuNjA1Yy0uNjk0LjE5OC0xLjI0Ni40MzQtMS42NDMuNzAyLS42MzcuNDMtLjc3Ljg4Ni0uNzcgMS4xOTNWNWMwIC40MjguMzIxIDEuMTMzLjYzOSAxLjYwOWw0Ljg5MSA3LjMzNmMuMjUxLjM3Ni40NzEgMS4xMDMuNDcxIDEuNTU1djNhLjUuNSAwIDAgMCAuNzI0LjQ0N2wyLTFhLjUuNSAwIDAgMCAuMjc2LS40NDd2LTJjMC0uNDUyLjIyLTEuMTc5LjQ3MS0xLjU1NWw0Ljg5MS03LjMzNmMuMzE3LS40NzYuNjM5LTEuMTgyLjYzOS0xLjYwOXYtLjVjMC0uMzA3LS4xMzQtLjc2My0uNzctMS4xOTN6bS0xMS41NDIuMjZDNS45NjcgMy4yMDIgNy42NzYgMyA5LjUgM3MzLjUzNC4yMDEgNC44MTIuNTY3QzE1LjY5IDMuOTYxIDE2IDQuMzgzIDE2IDQuNXMtLjMxLjU0LTEuNjg4LjkzM0MxMy4wMzMgNS43OTggMTEuMzI0IDYgOS41IDZzLTMuNTM0LS4yMDEtNC44MTItLjU2N0MzLjMxIDUuMDM5IDMgNC42MTcgMyA0LjVzLjMxLS41NCAxLjY4OC0uOTMzem01Ljk1MSA5LjgyNGMtLjM1OC41MzctLjYzOSAxLjQ2NC0uNjM5IDIuMTA5djEuNjkxbC0xIC41VjE1LjVjMC0uNjQ2LS4yODEtMS41NzItLjYzOS0yLjEwOWwtNC44OC03LjMyYy4yNzQuMTE3LjU4NS4yMjYuOTMyLjMyNEM1Ljc3OSA2Ljc4NSA3LjU4NSA3IDkuNSA3czMuNzIyLS4yMTUgNS4wODctLjYwNWMuMzQ2LS4wOTkuNjU4LS4yMDcuOTMyLS4zMjVsLTQuODggNy4zMnoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",alias:"picture-choice",get label(){return ol("block:picture-choice","Image")}})],MA);let wA=class extends Zs{};wA=bA([Ia({type:"condition",context:"tripetto-block-picture-choice",identifier:"tripetto-block-picture-choice:undefined",version:"4.2.1",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0ibTEwLjcwNyAxMC41IDUuNjQ2LTUuNjQ2YS41LjUgMCAwIDAtLjcwNy0uNzA3TDEwIDkuNzkzIDQuMzU0IDQuMTQ3YS41LjUgMCAwIDAtLjcwNy43MDdMOS4yOTMgMTAuNWwtNS42NDYgNS42NDZhLjUuNSAwIDAgMCAuNzA4LjcwN2w1LjY0Ni01LjY0NiA1LjY0NiA1LjY0NmEuNDk4LjQ5OCAwIDAgMCAuNzA4IDAgLjUuNSAwIDAgMCAwLS43MDdMMTAuNzA5IDEwLjV6IiBjbGFzcz0idHJpcGV0dG8tZmlsbCIvPjwvc3ZnPg==",get label(){return ol("block:picture-choice","No image selected")}})],wA);var xA="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTE4LjUgOEgxM1YzLjVhLjUuNSAwIDAgMC0uNS0uNWgtNmEuNS41IDAgMCAwLS41LjVWNkguNWEuNS41IDAgMCAwLS41LjV2MTBhLjUuNSAwIDAgMCAuNS41aDE4YS41LjUgMCAwIDAgLjUtLjV2LThhLjUuNSAwIDAgMC0uNS0uNXpNNyA0aDV2MTJIN1Y0ek0xIDdoNXY5SDFWN3ptMTcgOWgtNVY5aDV2N3oiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTkuNSAxMGEuNS41IDAgMCAxLS41LS41di00YS41LjUgMCAwIDEgMSAwdjRhLjUuNSAwIDAgMS0uNS41em0tNSAzaC0yYS41LjUgMCAwIDEtLjUtLjV2LTJhLjUuNSAwIDAgMSAuNS0uNUg0VjlIMi41YS41LjUgMCAwIDEgMC0xaDJhLjUuNSAwIDAgMSAuNS41djJhLjUuNSAwIDAgMS0uNS41SDN2MWgxLjVhLjUuNSAwIDAgMSAwIDF6bTEyLTNoLTJhLjUuNSAwIDAgMCAwIDFIMTZ2MWgtMS41YS41LjUgMCAwIDAgMCAxSDE2djFoLTEuNWEuNS41IDAgMCAwIDAgMWgyYS41LjUgMCAwIDAgLjUtLjV2LTRhLjUuNSAwIDAgMC0uNS0uNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";let SA=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Numeric){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:picture-choice","or")} @${e.id} > ${this.parse(e,this.to)}`;case"defined":return`@${e.id} ${ol("block:picture-choice","calculated")}`;case"undefined":return`@${e.id} ${ol("block:picture-choice","not calculated")}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,((e,t)=>il.locale.number(e,t,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:picture-choice","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:picture-choice","Score is equal to"),value:"equal"},{label:ol("block:picture-choice","Score is not equal to"),value:"not-equal"},{label:ol("block:picture-choice","Score is lower than"),value:"below"},{label:ol("block:picture-choice","Score is higher than"),value:"above"},{label:ol("block:picture-choice","Score is between"),value:"between"},{label:ol("block:picture-choice","Score is not between"),value:"not-between"},{label:ol("block:picture-choice","Score is calculated"),value:"defined"},{label:ol("block:picture-choice","Score is not calculated"),value:"undefined"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(t.visible("defined"!==e.value&&"undefined"!==e.value),i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:picture-choice","If score equals");break;case"not-equal":t.title=ol("block:picture-choice","If score not equals");break;case"below":t.title=ol("block:picture-choice","If score is lower than");break;case"above":t.title=ol("block:picture-choice","If score is higher than");break;case"between":t.title=ol("block:picture-choice","If score is between");break;case"not-between":t.title=ol("block:picture-choice","If score is not between")}}))]});const e=(e,t,i)=>{var s;const o=this[e],n=this.slot,r=new rc.Numeric(A(o)?o:0).label(ol("block:picture-choice","Use fixed number")).precision((null==n?void 0:n.precision)||0).digits((null==n?void 0:n.digits)||0).decimalSign((null==n?void 0:n.decimal)||"").thousands(!!(null==n?void 0:n.separator),(null==n?void 0:n.separator)||"").prefix((null==n?void 0:n.prefix)||"").prefixPlural((null==n?void 0:n.prefixPlural)||void 0).suffix((null==n?void 0:n.suffix)||"").suffixPlural((null==n?void 0:n.suffixPlural)||void 0).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),a=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(o)?o:void 0,!0,null===(s=this.slot)||void 0===s?void 0:s.id),l=new rc.Dropdown(a,_(o)?o:"").label(ol("block:picture-choice","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:picture-choice","Number"),value:"number"},{label:ol("block:picture-choice","Value"),value:"variable",disabled:0===a.length}],_(o)?"variable":"number").on((e=>{r.visible("number"===e.value),l.visible("variable"===e.value),r.isObservable&&r.focus()})),r,l]}).visible(i)},t=e("value",ol("block:picture-choice","If score equals"),"defined"!==this.mode&&"undefined"!==this.mode),i=e("to",ol("block:picture-choice","And"),"between"===this.mode||"not-between"===this.mode)}};bA([Mi,od("#name")],SA.prototype,"mode",void 0),bA([Mi,od("#name")],SA.prototype,"value",void 0),bA([Mi,od("#name")],SA.prototype,"to",void 0),bA([cd],SA.prototype,"defineEditor",null),SA=bA([Ia({type:"condition",context:"tripetto-block-picture-choice",identifier:"tripetto-block-picture-choice:score",version:"4.2.1",icon:xA,get label(){return ol("block:picture-choice","Verify score")}})],SA);var IA="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTIgNmEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDZMNi4xNDUuNjQ3YS41LjUgMCAwIDEgLjcwNy43MDdsLTQuNSA0LjVBLjQ5OC40OTggMCAwIDEgMS45OTggNnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXpNMiAxM2EuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDYgNC4xNDYtNC4xNDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNC41IDQuNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXpNMiAyMGEuNTAyLjUwMiAwIDAgMS0uMzU0LS4xNDZsLTEuNS0xLjVhLjUuNSAwIDAgMSAuNzA3LS43MDdsMS4xNDYgMS4xNDYgNC4xNDYtNC4xNDZhLjUuNSAwIDAgMSAuNzA3LjcwN2wtNC41IDQuNWEuNDk4LjQ5OCAwIDAgMS0uMzU0LjE0NnptMTcuNS0xaC0xMmEuNS41IDAgMCAxIDAtMWgxMmEuNS41IDAgMCAxIDAgMXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+";let kA=class extends Zs{constructor(){super(...arguments),this.allowMarkdown=!0,this.mode="equal"}get label(){return""}get name(){const e=this.slot;if(e instanceof Ki.Number){const t=this.parse(e,this.value);switch(this.mode){case"between":return`${t}  @${e.id}  ${this.parse(e,this.to)}`;case"not-between":return`@${e.id} < ${t} ${ol("block:picture-choice","or")} @${e.id} > ${this.parse(e,this.to)}`;case"not-equal":return`@${e.id}  ${t}`;case"above":case"below":case"equal":return`@${e.id} ${"above"===this.mode?">":"below"===this.mode?"<":"="} ${t}`}}return this.type.label}get title(){var e,t;return(null===(e=this.slot)||void 0===e?void 0:e.label)||(null===(t=this.node)||void 0===t?void 0:t.label)}parse(e,t){var i;return A(t)?e.toString(t,(e=>il.locale.number(e,0,!1))):_(t)&&t&&(null===(i=ms(this,t))||void 0===i?void 0:i.label)?`@${t}`:"\\_\\_"}defineEditor(){this.editor.form({title:ol("block:picture-choice","Compare mode"),controls:[new rc.Radiobutton([{label:ol("block:picture-choice","Counter is equal to"),value:"equal"},{label:ol("block:picture-choice","Counter is not equal to"),value:"not-equal"},{label:ol("block:picture-choice","Counter is lower than"),value:"below"},{label:ol("block:picture-choice","Counter is higher than"),value:"above"},{label:ol("block:picture-choice","Counter is between"),value:"between"},{label:ol("block:picture-choice","Counter is not between"),value:"not-between"}],rc.Radiobutton.bind(this,"mode","equal")).on((e=>{switch(i.visible("between"===e.value||"not-between"===e.value),e.value){case"equal":t.title=ol("block:picture-choice","If counter equals");break;case"not-equal":t.title=ol("block:picture-choice","If counter not equals");break;case"below":t.title=ol("block:picture-choice","If counter is lower than");break;case"above":t.title=ol("block:picture-choice","If counter is higher than");break;case"between":t.title=ol("block:picture-choice","If counter is between");break;case"not-between":t.title=ol("block:picture-choice","If counter is not between")}}))]});const e=(e,t)=>{var i;const s=this[e],o=new rc.Numeric(A(s)?s:0).label(ol("block:picture-choice","Use fixed number")).autoFocus("value"===e).escape(this.editor.close).enter((()=>("between"!==this.mode&&"not-between"!==this.mode||"to"===e)&&this.editor.close())).on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value)})),n=Kh(this,(e=>e instanceof Ki.Number||e instanceof Ki.Numeric),_(s)?s:void 0,!0,null===(i=this.slot)||void 0===i?void 0:i.id),r=new rc.Dropdown(n,_(s)?s:"").label(ol("block:picture-choice","Use value of")).width("full").on((t=>{t.isFormVisible&&t.isObservable&&(this[e]=t.value||"")}));return this.editor.form({title:t,controls:[new rc.Radiobutton([{label:ol("block:picture-choice","Number"),value:"number"},{label:ol("block:picture-choice","Value"),value:"variable",disabled:0===n.length}],_(s)?"variable":"number").on((e=>{o.visible("number"===e.value),r.visible("variable"===e.value),o.isObservable&&o.focus()})),o,r]})},t=e("value",ol("block:picture-choice","If counter equals")),i=e("to",ol("block:picture-choice","And"))}};bA([Mi,od("#name")],kA.prototype,"mode",void 0),bA([Mi,od("#name")],kA.prototype,"value",void 0),bA([Mi,od("#name")],kA.prototype,"to",void 0),bA([cd],kA.prototype,"defineEditor",null),kA=bA([Ia({type:"condition",context:"tripetto-block-picture-choice",identifier:"tripetto-block-picture-choice:counter",version:"4.2.1",icon:IA,get label(){return ol("block:picture-choice","Verify counter")}})],kA);let NA=class extends Sa{constructor(){super(...arguments),this.choices=Rl.of(fA,this)}get label(){return sl("block:picture-choice","%2 (%1 image)","%2 (%1 images)",this.choices.count,this.type.label)}defineSlot(){this.multiple?(this.slots.delete("choice","static"),this.slots.feature({type:Ki.Number,reference:"counter",label:ol("block:picture-choice","Counter"),exportable:!1}),"concatenate"===this.format||"both"===this.format?this.slots.feature({type:Ki.Text,reference:"concatenation",label:ol("block:picture-choice","Text value"),exportable:this.exportable,alias:this.alias}):this.slots.delete("concatenation","feature")):(this.slots.delete("counter","feature"),this.slots.delete("concatenation","feature"),this.slots.static({type:Ki.String,reference:"choice",label:ol("block:picture-choice","Image"),alias:this.alias,required:this.required,exportable:this.exportable,exchange:["alias","required","exportable"]}))}defineEditor(){this.editor.name(!0,!0),this.editor.option({name:ol("block:picture-choice","Caption"),form:{title:ol("block:picture-choice","Caption"),controls:[new rc.Text("multiline",rc.Text.bind(this,"caption",void 0)).placeholder(ol("block:picture-choice","Type caption text here...")).action("@",Ic(this))]},activated:_(this.caption)}),this.editor.description(),this.editor.option({name:ol("block:picture-choice","Image"),form:{title:ol("block:picture-choice","Image"),controls:[new rc.Text("singleline",rc.Text.bind(this,"imageURL",void 0)).label(ol("block:picture-choice","Image source URL")).inputMode("url").placeholder("https://").action("@",Ic(this)).autoValidate((e=>""===e.value?"unknown":Nc.test(e.value)||e.value.length>23&&0===e.value.indexOf("data:image/jpeg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/png;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/svg;base64,")||e.value.length>22&&0===e.value.indexOf("data:image/gif;base64,")||e.value.length>1&&"/"===e.value.charAt(0)?"pass":"fail")),new rc.Text("singleline",rc.Checkbox.bind(this,"imageWidth",void 0)).label(ol("block:picture-choice","Image width (optional)")).width(100).align("center"),new rc.Checkbox(ol("block:picture-choice","Display image on top of the paragraph"),rc.Checkbox.bind(this,"imageAboveText",void 0))]},activated:_(this.imageURL)}),this.editor.explanation();const e=this.editor.collection({collection:this.choices,title:ol("block:picture-choice","Images"),placeholder:ol("block:picture-choice","Unnamed image"),icon:this.multiple?vA:yA,autoOpen:!0,allowVariables:!0,allowImport:!0,allowExport:!0,allowDedupe:!0,showAliases:!0,sorting:"manual",indicator:e=>this.multiple&&e.exclusive&&ol("block:picture-choice","Exclusive").toUpperCase()||void 0,emptyMessage:ol("block:picture-choice","Click the + button to add an image...")});this.editor.groups.settings(),this.editor.option({name:ol("block:picture-choice","Multiple select"),form:{title:ol("block:picture-choice","Multiple select"),controls:[new rc.Checkbox(ol("block:picture-choice","Allow the selection of multiple images"),rc.Checkbox.bind(this,"multiple",void 0,!0)).on((()=>{s.disabled(!this.multiple),r.disabled(!this.multiple),c.disabled(!this.multiple),e.icon=this.multiple?vA:yA,this.choices.each((e=>{!0===e.exclusive&&e.refresh("name")}))}))]},activated:T(this.multiple)});const t=new rc.Numeric(rc.Numeric.bind(this,"min",void 0)).min(1).max(this.max).visible(D(this.min)).indent(32).width(75).on((()=>{i.min(this.min||1)})),i=new rc.Numeric(rc.Numeric.bind(this,"max",void 0)).min(this.min||1).visible(D(this.max)).indent(32).width(75).on((()=>{t.max(this.max)})),s=this.editor.option({name:ol("block:picture-choice","Limits"),form:{title:ol("block:picture-choice","Limits"),controls:[new rc.Checkbox(ol("block:picture-choice","Minimum number of selected images"),D(this.min)).on((e=>{t.visible(e.isChecked)})),t,new rc.Checkbox(ol("block:picture-choice","Maximum number of selected images"),D(this.max)).on((e=>{i.visible(e.isChecked)})),i]},activated:D(this.max)||D(this.min),disabled:!this.multiple});this.editor.option({name:ol("block:picture-choice","Randomization"),form:{title:ol("block:picture-choice","Randomization"),controls:[new rc.Checkbox(ol("block:picture-choice","Randomize the images (using [Fisher-Yates shuffle](%1))","https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle"),rc.Checkbox.bind(this,"randomize",void 0,!0)).markdown()]},activated:T(this.randomize)}),this.editor.option({name:ol("block:picture-choice","Size"),form:{title:ol("block:picture-choice","Size"),controls:[new rc.Radiobutton([{label:ol("block:picture-choice","Small"),value:"small"},{label:ol("block:picture-choice","Medium"),value:"medium"},{label:ol("block:picture-choice","Large"),value:"large"}],rc.Radiobutton.bind(this,"size",void 0,"medium"))]},activated:_(this.size)}),this.editor.groups.options(),this.editor.required(this),this.editor.visibility();const o=ol("block:picture-choice","Selected"),n=ol("block:picture-choice","Not selected"),r=this.editor.option({name:ol("block:picture-choice","Labels"),form:{title:ol("block:picture-choice","Labels"),controls:[new rc.Text("singleline",rc.Text.bind(this,"labelForTrue",void 0)).placeholder(o),new rc.Text("singleline",rc.Text.bind(this,"labelForFalse",void 0)).placeholder(n),new rc.Static(ol("block:picture-choice","These labels will be used in the dataset and override the default values %1 and %2.",`**${o}**`,`**${n}**`)).markdown()]},activated:_(this.labelForTrue)||_(this.labelForFalse),disabled:!this.multiple});this.editor.scores({target:this,collection:e,description:ol("block:picture-choice","Generates a score based on the selected choices. Open the settings panel for each choice to set the individual score for that choice.")}),this.editor.alias(this);const a=new rc.Text("singleline",rc.Text.bind(this,"formatSeparatorCustom",void 0)).visible("custom"===this.formatSeparator).sanitize(!1).width(200).label(ol("block:picture-choice","Use this separator:")),l=new rc.Group([new rc.Dropdown([{label:ol("block:picture-choice","Comma separated"),value:"comma"},{label:ol("block:picture-choice","Space separated"),value:"space"},{label:ol("block:picture-choice","List on multiple lines"),value:"list"},{label:ol("block:picture-choice","Bulleted list"),value:"bullets"},{label:ol("block:picture-choice","Numbered list"),value:"numbers"},{label:ol("block:picture-choice","Language sensitive conjunction (_, _, and _)"),value:"conjunction"},{label:ol("block:picture-choice","Language sensitive disjunction (_, _, or _)"),value:"disjunction"},{label:ol("block:picture-choice","Custom separator"),value:"custom"}],rc.Radiobutton.bind(this,"formatSeparator",void 0,"comma")).label(ol("block:picture-choice","How to separate the selected images:")).on((e=>{a.visible("custom"===e.value)})),a]).visible("concatenate"===this.format||"both"===this.format),c=this.editor.option({name:ol("block:picture-choice","Data format"),form:{title:ol("block:picture-choice","Data format"),controls:[new rc.Radiobutton([{label:ol("block:picture-choice","Every image as a separate field"),description:ol("block:picture-choice","Every image is included in the dataset as a separate value."),value:"fields"},{label:ol("block:picture-choice","Text field with a list of all selected images"),description:ol("block:picture-choice","All the selected images are concatenated to a single string of text separated using a configurable separator."),value:"concatenate"},{label:ol("block:picture-choice","Both options above"),description:ol("block:picture-choice","Includes every image in the dataset together with the concatenated text."),value:"both"}],rc.Radiobutton.bind(this,"format",void 0,"fields")).label(ol("block:picture-choice","This setting determines how the data is stored in the dataset:")).on((e=>{l.visible("concatenate"===e.value||"both"===e.value)})),l]},activated:_(this.format),disabled:!this.multiple});this.editor.exportable(this)}defineConditions(){this.choices.each((e=>{e.name&&!_(e.url)&&this.conditions.template({condition:MA,label:e.name,icon:this.multiple?vA:yA,burst:"branch",props:{choice:e,slot:this.slots.select(this.multiple?e.id:"choice")}})})),this.choices.count>0&&this.conditions.template({condition:wA,separator:!0});const e=this.slots.select("counter","feature");if(e&&e.label){const t=this.conditions.group(e.label,IA);ee([{mode:"equal",label:ol("block:picture-choice","Counter is equal to")},{mode:"not-equal",label:ol("block:picture-choice","Counter is not equal to")},{mode:"below",label:ol("block:picture-choice","Counter is lower than")},{mode:"above",label:ol("block:picture-choice","Counter is higher than")},{mode:"between",label:ol("block:picture-choice","Counter is between")},{mode:"not-between",label:ol("block:picture-choice","Counter is not between")}],(i=>{t.template({condition:kA,label:i.label,autoOpen:!0,props:{slot:e,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}))}const t=this.slots.select("score","feature");if(t&&t.label){const e=this.conditions.group(t.label,xA);ee([{mode:"equal",label:ol("block:picture-choice","Score is equal to")},{mode:"not-equal",label:ol("block:picture-choice","Score is not equal to")},{mode:"below",label:ol("block:picture-choice","Score is lower than")},{mode:"above",label:ol("block:picture-choice","Score is higher than")},{mode:"between",label:ol("block:picture-choice","Score is between")},{mode:"not-between",label:ol("block:picture-choice","Score is not between")},{mode:"defined",label:ol("block:picture-choice","Score is calculated")},{mode:"undefined",label:ol("block:picture-choice","Score is not calculated")}],(i=>{e.template({condition:SA,label:i.label,autoOpen:"defined"!==i.mode&&"undefined"!==i.mode,props:{slot:t,mode:i.mode,value:0,to:"between"===i.mode||"not-between"===i.mode?0:void 0}})}))}}};function _A(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function LA(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_A(Object(i),!0).forEach((function(t){CA(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_A(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function CA(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}bA([Mi("string","optional")],NA.prototype,"caption",void 0),bA([Mi("string","optional")],NA.prototype,"imageURL",void 0),bA([Mi("string","optional")],NA.prototype,"imageWidth",void 0),bA([Mi("boolean","optional")],NA.prototype,"imageAboveText",void 0),bA([Mi("items"),od("#name"),Na("#slot","choice")],NA.prototype,"choices",void 0),bA([Mi("boolean","optional"),od("#slots"),od("#collection","choices")],NA.prototype,"multiple",void 0),bA([Mi("number","optional")],NA.prototype,"min",void 0),bA([Mi("number","optional")],NA.prototype,"max",void 0),bA([Mi("boolean","optional"),od("#required"),od("#slots"),od("#collection","choices")],NA.prototype,"required",void 0),bA([Mi("string","optional"),od("#slots"),od("#collection","choices"),od("#label")],NA.prototype,"alias",void 0),bA([Mi("boolean","optional"),od("#slots"),od("#collection","choices")],NA.prototype,"exportable",void 0),bA([Mi("string","optional"),od("#collection","choices")],NA.prototype,"labelForTrue",void 0),bA([Mi("string","optional"),od("#collection","choices")],NA.prototype,"labelForFalse",void 0),bA([Mi("boolean","optional")],NA.prototype,"randomize",void 0),bA([Mi],NA.prototype,"size",void 0),bA([Mi("string","optional"),od("#slots"),od("#collection","choices")],NA.prototype,"format",void 0),bA([Mi("string","optional")],NA.prototype,"formatSeparator",void 0),bA([Mi("string","optional")],NA.prototype,"formatSeparatorCustom",void 0),bA([Ps],NA.prototype,"defineSlot",null),bA([cd],NA.prototype,"defineEditor",null),bA([nd],NA.prototype,"defineConditions",null),NA=bA([Ia({type:"node",identifier:"tripetto-block-picture-choice",version:"4.2.1",icon:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+PHBhdGggZD0iTTEzLjUgOUMxMi4xMjIgOSAxMSA3Ljg3OCAxMSA2LjVTMTIuMTIyIDQgMTMuNSA0IDE2IDUuMTIyIDE2IDYuNSAxNC44NzggOSAxMy41IDl6bTAtNGMtLjgyNyAwLTEuNS42NzMtMS41IDEuNVMxMi42NzMgOCAxMy41IDggMTUgNy4zMjcgMTUgNi41IDE0LjMyNyA1IDEzLjUgNXoiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PHBhdGggZD0iTTE4LjUgMGgtMTdDLjY3MyAwIDAgLjY3MyAwIDEuNXYxN2MwIC44MjcuNjczIDEuNSAxLjUgMS41aDE3Yy44MjcgMCAxLjUtLjY3MyAxLjUtMS41di0xN2MwLS44MjctLjY3My0xLjUtMS41LTEuNXpNMSAxOC41di00LjgwN2w0LjE5Ny00LjYxN2MuMDg1LS4wOTMuMTk2LS4xNDUuMzE0LS4xNDdzLjIzMS4wNDguMzE4LjEzOWw5LjUgOS45MzJIMS40OTlhLjUuNSAwIDAgMS0uNS0uNXptMTggMGEuNS41IDAgMCAxLS41LjVoLTEuNzg2TDYuNTUzIDguMzc3YTEuNDIgMS40MiAwIDAgMC0yLjA5NS4wMjdsLTMuNDU3IDMuODAzVjEuNWEuNS41IDAgMCAxIC41LS41aDE3YS41LjUgMCAwIDEgLjUuNXYxN3oiIGNsYXNzPSJ0cmlwZXR0by1maWxsIi8+PC9zdmc+",alias:"picture-choice",get label(){return ol("block:picture-choice","Picture choice")}})],NA);var DA={disableLogo:!0,disableSaveButton:!0,disableCloseButton:!0,disableTutorialButton:!1,controls:"right",disableEditButton:!0,supportURL:!1,disablePrologue:!0,zoom:"1:1",centering:!0};var AA=Retool.connectReactComponent((function(e){e.triggerQuery;var t=e.model,i=e.modelUpdate,s=(0,o.useRef)(),n=(0,o.useRef)(),r=(0,o.useRef)(),a=(0,o.useRef)();return(0,o.useEffect)((function(){s.current||(s.current=hp.open(t.formDefinition,LA(LA({},DA),{},{element:n.current,onSave:function(){return console.log("SAVED!")},onReady:function(e){I_({element:a.current,definition:e.definition,view:"preview",onEdit:function(t,i){switch(t){case"prologue":e.edit("prologue");break;case"epilogue":e.edit("epilogue",i);break;default:i&&e.edit("node",i)}}}).then((function(e){r.current=e})),e.hook("OnChange","framed",(function(e){r.current.definition=e.definition,i({formDefinitionOutput:e.definition})})),e.hook("OnEdit","synchronous",(function(e){r.current.doPreview(e.data)}))}})))}),[]),o.createElement(o.Fragment,null,o.createElement("div",{ref:n,className:"builder"}),o.createElement("div",{ref:a,className:"runner visible"}))}));document.body.setAttribute("style","margin: 0;"),n.render(o.createElement(AA,null),document.body.appendChild(document.createElement("div")))})(),s})()));